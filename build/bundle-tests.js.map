{"version":3,"file":"bundle-tests.js","sources":["../src/state/_common/helpers.js","../src/state/_common/selectors.js","../src/state/_deprecatedSelections/selectors.js","../src/state/_deprecatedMaps/helpers.js","../src/state/LayerTemplates/selectors.js","../src/state/SpatialDataSources/vector/selectors.js","../src/state/AreaRelations/selectors.js","../src/state/SpatialRelations/selectors.js","../src/state/SpatialData/selectors.js","../src/state/SpatialDataSources/selectors.js","../src/state/AttributeRelations/selectors.js","../src/state/AttributeData/selectors.js","../src/state/AttributeDataSources/selectors.js","../src/state/App/selectors.js","../src/state/Styles/selectors.js","../src/state/Selections/selectors.js","../src/state/Periods/selectors.js","../src/state/_deprecatedMaps/selectors.js","../src/state/Areas/AreaTreeLevels/selectors.js","../src/state/Areas/AreaTrees/selectors.js","../src/state/Areas/selectors.js","../src/state/Attributes/selectors.js","../src/state/AttributeSets/selectors.js","../src/state/AttributeStatistics/selectors.js","../src/state/Cases/selectors.js","../src/state/Charts/selectors.js","../src/state/Components/selectors.js","../src/state/Data/AttributeRelations/selectors.js","../src/state/Data/AttributeDataSources/selectors.js","../src/state/Data/AttributeData/selectors.js","../src/state/Data/SpatialRelations/selectors.js","../src/state/Data/SpatialDataSources/selectors.js","../src/state/Data/SpatialData/selectors.js","../src/state/Data/helpers.js","../src/state/Data/selectors.js","../src/state/LayerPeriods/selectors.js","../src/state/LayerTrees/selectors.js","../src/state/Maps/selectorHelpers.js","../src/state/Maps/selectors.js","../src/state/Scopes/selectors.js","../src/state/Places/selectors.js","../src/state/Scenarios/scenarios/selectors.js","../src/state/Scenarios/cases/selectors.js","../src/state/Scenarios/selectors.js","../src/state/Screens/selectors.js","../src/state/Snapshots/selectors.js","../src/state/Tags/selectors.js","../src/state/Users/selectors.js","../src/state/Views/selectors.js","../src/state/Windows/selectors.js","../src/state/Select.js","../tests/selectorsCacheTest/selectors.js","../tests/helpers.js","../tests/selectorsCacheTest/selectors-test.js","../src/constants/ActionTypes.js","../src/state/_common/request.js","../src/state/_common/actions.js","../src/state/LayerTemplates/actions.js","../src/state/Areas/AreaTreeLevels/actions.js","../src/state/Areas/AreaTrees/actions.js","../src/state/Areas/actions.js","../src/state/Selections/actions.js","../src/state/SpatialDataSources/vector/actions.js","../src/state/SpatialDataSources/actions.js","../src/state/SpatialRelations/actions.js","../src/state/AreaRelations/actions.js","../src/state/SpatialData/actions.js","../src/state/Attributes/actions.js","../src/state/AttributeData/actions.js","../src/state/AttributeStatistics/actions.js","../src/state/AttributeDataSources/actions.js","../src/state/AttributeRelations/actions.js","../src/state/Styles/actions.js","../src/state/_deprecatedMaps/actions.js","../src/state/_deprecatedSelections/actions.js","../src/state/App/actions.js","../src/state/AttributeSets/actions.js","../src/state/Cases/actions.js","../src/state/Charts/actions.js","../src/state/Components/actions.js","../src/state/Data/AttributeRelations/actions.js","../src/state/Data/AttributeDataSources/actions.js","../src/state/Data/AttributeData/actions.js","../src/state/Data/SpatialRelations/actions.js","../src/state/Data/SpatialDataSources/actions.js","../src/state/Data/SpatialData/actions.js","../src/state/Data/constants.js","../src/state/Data/actions.js","../src/state/LayerPeriods/actions.js","../src/state/LayerTrees/actions.js","../src/state/Maps/actions.js","../src/state/Periods/actions.js","../src/state/Places/actions.js","../src/state/Scenarios/actions.js","../src/state/Scopes/actions.js","../src/state/Screens/actions.js","../src/state/Snapshots/actions.js","../src/state/Tags/actions.js","../src/state/Users/actions.js","../src/state/Views/actions.js","../src/state/Windows/actions.js","../src/state/Action.js","../tests/state/_common/actions-test.js","../tests/state/_common/helpers-test.js","../tests/state/_common/helpers/convertModifiersToRequestFriendlyFormat-test.js","../tests/state/_common/helpers/mergeMetadataKeys-test.js","../src/state/_common/reducers.js","../tests/state/_common/reducers-test.js","../tests/state/_common/selectors-test.js","../tests/state/_common/selectors/getActiveKeysByFilterByActive-test.js","../tests/state/App/actions-test.js","../src/state/App/reducers.js","../tests/state/App/reducers-test.js","../tests/state/App/selectors-test.js","../tests/state/Areas/AreaTreeLevels/actions-test.js","../src/state/Areas/AreaTreeLevels/reducers.js","../tests/state/Areas/AreaTreeLevels/reducers-test.js","../tests/state/Areas/AreaTreeLevels/selectors-test.js","../tests/state/Areas/AreaTrees/actions-test.js","../src/state/Areas/AreaTrees/reducers.js","../tests/state/Areas/AreaTrees/reducers-test.js","../tests/state/Areas/AreaTrees/selectors-test.js","../tests/state/AttributeData/actions-test.js","../src/state/AttributeData/reducers.js","../tests/state/AttributeData/reducers-test.js","../tests/state/AttributeData/selectors-test.js","../tests/state/AttributeDataSources/actions-test.js","../src/state/AttributeDataSources/reducers.js","../tests/state/AttributeDataSources/reducers-test.js","../tests/state/AttributeDataSources/selectors-test.js","../tests/state/AttributeRelations/actions-test.js","../src/state/AttributeRelations/reducers.js","../tests/state/AttributeRelations/reducers-test.js","../tests/state/AttributeRelations/selectors-test.js","../tests/state/Attributes/actions-test.js","../src/state/Attributes/reducers.js","../tests/state/Attributes/reducers-test.js","../tests/state/Attributes/selectors-test.js","../tests/state/AttributeSets/actions-test.js","../src/state/AttributeSets/reducers.js","../tests/state/AttributeSets/reducers-test.js","../tests/state/AttributeSets/selectors-test.js","../tests/state/AttributeStatistics/actions-test.js","../src/state/AttributeStatistics/reducers.js","../tests/state/AttributeStatistics/reducers-test.js","../tests/state/AttributeStatistics/selectors-test.js","../tests/state/Cases/actions-test.js","../src/state/Cases/reducers.js","../tests/state/Cases/reducers-test.js","../tests/state/Cases/selectors-test.js","../tests/state/Charts/actions-test.js","../src/state/Charts/reducers.js","../tests/state/Charts/reducers-test.js","../tests/state/Charts/selectors-test.js","../tests/state/Components/actions-test.js","../src/state/Components/reducers.js","../tests/state/Components/reducers-test.js","../tests/state/Components/selectors-test.js","../tests/state/Data/SpatialData/actions-test.js","../src/state/Data/SpatialData/reducers.js","../tests/state/Data/SpatialData/reducers-test.js","../tests/state/Data/SpatialDataSources/actions-test.js","../tests/state/Data/SpatialRelations/actions-test.js","../tests/state/Data/SpatialRelations/selectors-test.js","../src/state/LayerPeriods/reducers.js","../tests/state/LayerPeriods/reducers-test.js","../tests/state/LayerPeriods/selectors-test.js","../tests/state/Maps/selectorHelpers-test.js","../tests/state/Maps/selectors-test.js","../tests/state/selections/selectors-test.js"],"sourcesContent":["import createCachedSelector from \"re-reselect\";\nimport _ from \"lodash\";\n\n/**\n * TODO tests\n * Returns all indexes that fits filter and order\n * @param {*} indexes \n * @param {*} filter \n * @param {*} order \n */\nconst getIndex = createCachedSelector([\n\t\t(indexes) => indexes,\n\t\t(indexes, filter) => filter,\n\t\t(indexes, filter, order) => order,\n\t],\n\t(indexes, filter, order) => {\n\t\tif (indexes){\n\t\t\tconst index = _.find(indexes, (index) => isCorrespondingIndex(index, filter, order));\n\t\t\treturn index ? index : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((indexes, filter, order) => {\n\treturn `${JSON.stringify(filter)}${JSON.stringify(order)}`\n})\n\n\n// TODO Test\nfunction getUniqueIndexes(indexes) {\n\tif(!_.isEmpty(indexes)) {\n\t\treturn indexes.reduce((uniqueIndexes, index) => {\n\t\t\tif (_.find(uniqueIndexes, (i) => i && isCorrespondingIndex(index, i.filter, i.order))) {\n\t\t\t\treturn uniqueIndexes;\n\t\t\t}\n\t\n\t\t\treturn [...uniqueIndexes, index];\n\t\t}, []);\n\t} else {\n\t\treturn null;\n\t}\n}\n\n/**\n * Remove index from given indexes that fit to filter and order.\n * If index does not exists under filter, same instance of indexes has return.\n * @param indexes {Array} Array of indexes\n * @param filter {Object} \n * @param order {Array}\n * @return {Array} New instance of indexes\n */\nfunction removeIndex(indexes = [], filter, order) {\n\tif(indexes && !_.isEmpty(indexes)) {\n\t\tconst clearedIndexes = _.reduce(indexes, (acc, index) => {\n\t\t\tconst indexToBeCleared = isCorrespondingIndex(index, filter, order);\n\t\t\tif(indexToBeCleared) {\n\t\t\t\treturn acc\n\t\t\t} else {\n\t\t\t\treturn [...acc, index];\n\t\t\t}\n\t\t}, [])\n\n\t\tif(clearedIndexes.length === indexes.length) {\n\t\t\treturn indexes;\n\t\t} else {\n\t\t\treturn clearedIndexes;\n\t\t}\n\t} else {\n\t\treturn indexes;\n\t}\n}\n\n/**\n * Create set of updated indexes state based on current state and given indexUpdate.\n * It produce updated indexes state in case of existing index for given filter and order.\n * If index with filter and order is not in the state yet, its add to indexes state.\n * @param state {Object}\n * @param filter {Object}\n * @param order {Array}\n * @param indexUpdate {Array}\n * @param changedOn {string}\n * @param indexesPath {string} name of a property where indexes are stored\n */\nfunction getUpdatedIndexes(state, filter, order, indexUpdate, changedOn, indexesPath = \"indexes\") {\n\n\tlet indexes = [];\n\tlet selectedIndex = {};\n\n\tif (state[indexesPath]) {\n\t\tstate[indexesPath].forEach(index => {\n\t\t\tif (_.isEqual(index.filter, filter) && _.isEqual(index.order, order)){\n\t\t\t\tselectedIndex = index;\n\t\t\t} else {\n\t\t\t\tindexes.push(index);\n\t\t\t}\n\t\t});\n\t}\n\n\tlet index;\n\tif (indexUpdate.length) {\n\t\tindex = {...selectedIndex.index};\n\t\tindexUpdate.forEach((model, i) => {\n\t\t\tif(model.key) {\n\t\t\t\tindex[i] = model.key;\n\t\t\t} else {\n\t\t\t\t//spatial data by spatialDataSourceKey, levels and tiles\n\t\t\t\t//update spatialDataSourceKey\n\t\t\t\tfor(const [level, dataByTiles] of Object.entries(model)) {\n\t\t\t\t\tif(index.hasOwnProperty(level) && index[level]) {\n\t\t\t\t\t\t//update data on level\n\t\t\t\t\t\tindex[level] =  {...index[level], ...dataByTiles}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tindex[level] =  {...dataByTiles}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n\n\tselectedIndex = {\n\t\tfilter: selectedIndex.filter || filter,\n\t\torder: selectedIndex.order || order,\n\t\tchangedOn: changedOn,\n\t\tindex: index || selectedIndex.index\n\t};\n\tindexes.push(selectedIndex);\n\n\treturn indexes;\n}\n\nfunction isCorrespondingIndex(index, filter, order) {\n\treturn _.isEqual(index.filter, filter) && _.isEqual(index.order, order);\n}\n\nfunction itemFitFilter(filter, item) {\n\t// null filter fit \n\tif(filter === null) {\n\t\treturn true;\n\t}\n\n\tconst entries = Object.entries(filter);\n\n\treturn entries.every(([key, value]) => {\n\t\t\tconst itemHasFilterKey = item.data && item.data.hasOwnProperty(key);\n\t\t\tconst itemHasFilterLinkKey = item.data && item.data.hasOwnProperty(`${key}Key`) ;\n\t\t\tif(itemHasFilterKey) {\n\t\t\t\t//apply condition\n\t\t\t\t//\"column0\": \"hleda se rovnost\",\n\t\t\t\t//\"column1\": null,\n\t\t\t\tif(item.data && item.data[key] === value) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// \"column2\": {\n\t\t\t\t// \t\"like\": \"hleda se podobnost, castecny vyskyt\"\n\t\t\t\t// },\n\t\t\t\tif(_.isObject(value) && value['like']) {\n\t\t\t\t\t//now we dont deal like filter, refrest indexes\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\t// \"column3\": {\n\t\t\t\t// \t\"in\": [\"existuje\", \"v\", \"poli\", \"prvku\"]\n\t\t\t\t// },\n\t\t\t\tif(_.isObject(value) && value['in']) {\n\t\t\t\t\treturn value.in.includes(item.data[key]);\n\t\t\t\t}\n\n\t\t\t\t// \"column4\": {\n\t\t\t\t// \t\"notin\": [\"neexistuje\", \"v\", \"poli\", \"prvku\"]\n\t\t\t\t// }\n\t\t\t\tif(_.isObject(value) && value['notin']) {\n\t\t\t\t\treturn !value.notin.includes(item.data[key]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//check if filter contains linking like scopeKey, viewKey, ...\n\t\t\tif(itemHasFilterLinkKey) {\n\t\t\t\tif(item.data && item.data[`${key}Key`] === value) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//if to filter fit return false\n\t\t\treturn false;\n\t})\n}\n\nfunction mergeFilters(activeKeys, filterByActive, filter) {\n\tif (activeKeys && filterByActive) {\n\t\tlet fullFilter = {...filter};\n\t\tif (filterByActive.application){\n\t\t\tif (activeKeys.activeApplicationKey){\n\t\t\t\tfullFilter.applicationKey = activeKeys.activeApplicationKey;\n\t\t\t}\n\t\t}\n\t\tif (filterByActive.case){\n\t\t\tif (activeKeys.activeCaseKey){\n\t\t\t\tfullFilter.caseKey = activeKeys.activeCaseKey;\n\t\t\t}\n\t\t}\n\t\tif (filterByActive.scope){\n\t\t\tif (activeKeys.activeScopeKey){\n\t\t\t\tfullFilter.scopeKey = activeKeys.activeScopeKey;\n\t\t\t}\n\t\t}\n\t\t// TODO add scenario, ...\n\t\tif (filterByActive.place){\n\t\t\tif (activeKeys.activePlaceKey){\n\t\t\t\tfullFilter.placeKey = activeKeys.activePlaceKey;\n\t\t\t} else if (activeKeys.activePlaceKeys){\n\t\t\t\tfullFilter.placeKey = {in: activeKeys.activePlaceKeys};\n\t\t\t}\n\t\t}\n\t\tif (filterByActive.period){\n\t\t\tif (activeKeys.activePeriodKey){\n\t\t\t\tfullFilter.periodKey = activeKeys.activePeriodKey;\n\t\t\t} else if (activeKeys.activePeriodKeys){\n\t\t\t\tfullFilter.periodKey = {in: activeKeys.activePeriodKeys};\n\t\t\t}\n\t\t}\n\t\tif (filterByActive.attribute){\n\t\t\tif (activeKeys.activeAttributeKey){\n\t\t\t\tfullFilter.attributeKey = activeKeys.activeAttributeKey;\n\t\t\t}\n\t\t}\n\t\tif (filterByActive.layerTemplate){\n\t\t\tif (activeKeys.activeLayerTemplateKey){\n\t\t\t\tfullFilter.layerTemplateKey = activeKeys.activeLayerTemplateKey;\n\t\t\t}\n\t\t}\n\t\treturn _.isEmpty(fullFilter) ? null : fullFilter;\n\t} else {\n\t\treturn filter;\n\t}\n}\n\n/**\n * Merge metadata defined by key with metadata keys defined by filterByActive\n * @param definedKeys {Object}\n * @param activeKeys {Object}\n * @return {Object|null}\n */\nfunction mergeMetadataKeys(definedKeys, activeKeys) {\n    if (definedKeys && activeKeys) {\n        return {...activeKeys, ...definedKeys}\n    } else {\n        return definedKeys || activeKeys || null;\n    }\n}\n\n/**\n * It converts modifiers from metadataKeys: [\"A\", \"B\"] to metadataKey: {in: [\"A\", \"B\"]}\n * @param modifiers {Object}\n * @return {Object|null}\n */\nfunction convertModifiersToRequestFriendlyFormat(modifiers) {\n    if (modifiers) {\n        let modifiersForRequest = {};\n        if (modifiers.scopeKey) {\n            modifiersForRequest.scopeKey = modifiers.scopeKey;\n        }\n        \n        if (modifiers.placeKeys) {\n            modifiersForRequest.placeKey = {in: modifiers.placeKeys};\n        } else if (modifiers.placeKey) {\n            modifiersForRequest.placeKey = modifiers.placeKey;\n        }\n\n        if (modifiers.caseKeys) {\n            modifiersForRequest.caseKey = {in: modifiers.caseKeys};\n        } else if (modifiers.caseKey) {\n            modifiersForRequest.caseKey = modifiers.caseKey;\n        }\n\n        if (modifiers.scenarioKeys) {\n            modifiersForRequest.scenarioKey = {in: modifiers.scenarioKeys};\n        } else if (modifiers.scenarioKey) {\n            modifiersForRequest.scenarioKey = modifiers.scenarioKey;\n        }\n\n        if (modifiers.periodKeys) {\n            modifiersForRequest.periodKey = {in: modifiers.periodKeys};\n        } else if (modifiers.periodKey) {\n            modifiersForRequest.periodKey = modifiers.periodKey;\n        }\n\n        return !_.isEmpty(modifiersForRequest) ? modifiersForRequest : null;\n    } else {\n        return null;\n    }\n}\n\nexport default {\n\tconvertModifiersToRequestFriendlyFormat,\n\tremoveIndex,\n\tgetIndex,\n\tgetUniqueIndexes,\n\tgetUpdatedIndexes,\n\tmergeFilters,\n    mergeMetadataKeys,\n\tisCorrespondingIndex,\n\titemFitFilter,\n}","import {createSelector} from \"reselect\";\nimport {createSelector as createRecomputeSelector, createObserver as createRecomputeObserver} from '@jvitela/recompute';\nimport createCachedSelector from \"re-reselect\";\nimport _ from \"lodash\";\nimport commonHelpers from './helpers';\n\nconst activeScopeKey = state => state.scopes.activeKey;\n\n/**\n *\n * @param {*} getSubstate\n * @returns {Object}\n */\nconst getAllByKey = (getSubstate) => {\n\treturn (state) => {\n\t\treturn getSubstate(state).byKey;\n\t}\n};\n\n/**\n * \n * @param {*} getSubstate \n * @returns {Object}\n */\nconst getAllNotRemovedAsObject = (getSubstate) => {\n\treturn createSelector(\n\t\t[getAllByKey(getSubstate)],\n\t\tbyKey => {\n\t\t\treturn _.pickBy(byKey, (item) => !item.hasOwnProperty('removed'));\n\t\t}\n\t);\n};\n\nconst getAllAsObject = getAllNotRemovedAsObject;\n\n/**\n * \n * @param {*} getSubstate \n * @returns {Array|null}\n */\nconst getAll = (getSubstate) => {\n\treturn createSelector(\n\t\t[getAllAsObject(getSubstate)],\n\t\tbyKey => {\n\t\t\treturn byKey ? Object.values(byKey) : null;\n\t\t}\n\t);\n};\n\nfunction modelsFromIndex(models, index) {\n\tif (!index || !index.index) {\n\t\treturn null;\n\t}\n\n\tconst indexedModels = [];\n\tfor (let i = 1; i <= index.count; i++){\n\t\tconst modelKey = index.index[i];\n\t\tif (modelKey){\n\t\t\tconst indexedModel = models[modelKey];\n\t\t\tif (indexedModel){\n\t\t\t\tindexedModels.push(indexedModel);\n\t\t\t} else {\n\t\t\t\tindexedModels.push({key: modelKey});\n\t\t\t}\n\t\t} else {\n\t\t\tindexedModels.push(null);\n\t\t}\n\t}\n\n\treturn nonEmptyArray(indexedModels);\n}\n\nfunction modelsFromIndex2(models, index) {\n\tif (!index || !index.index) {\n\t\treturn null;\n\t}\n\n\tconst indexedModels = [];\n\tfor (const [key, value] of Object.entries(index.index)) {\n\t\tif (value) {\n\t\t\tconst indexedModel = models[value];\n\t\t\tif (indexedModel) {\n\t\t\t\tindexedModels.push(indexedModel);\n\t\t\t} else {\n\t\t\t\tindexedModels.push(null);\n\t\t\t}\n\t\t} else {\n\t\t\tindexedModels.push(null);\n\t\t}\n\t}\n\n\treturn nonEmptyArray(indexedModels);\n}\n\nconst getAllForActiveScope = (getSubstate) => {\n\treturn createSelector(\n\t\t[getAllAsObject(getSubstate), getIndexes(getSubstate), activeScopeKey, (state, order) => order],\n\t\t(models, indexes, activeScopeKey, order) => {\n\t\t\tif (models && indexes && activeScopeKey) {\n\t\t\t\tconst filter = {\n\t\t\t\t\tscopeKey: activeScopeKey\n\t\t\t\t};\n\t\t\t\tconst index = commonHelpers.getIndex(indexes, filter, order);\n\n\t\t\t\treturn modelsFromIndex(models, index);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t);\n};\n\nconst getActiveKey = (getSubstate) => {\n\treturn (state) => getSubstate(state).activeKey\n};\n\nconst getActiveKeys = (getSubstate) => {\n\treturn (state) => getSubstate(state).activeKeys\n};\n\nconst getActive = (getSubstate) => {\n\treturn createSelector(\n\t\t[getAllAsObject(getSubstate), getActiveKey(getSubstate)],\n\t\t(models, activeKey) => {\n\t\t\tif (models && models[activeKey]){\n\t\t\t\treturn models[activeKey];\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getActiveModels = (getSubstate) => {\n\treturn createSelector(\n\t\t[getAllAsObject(getSubstate), getActiveKeys(getSubstate)],\n\t\t(models, activeKeys) => {\n\t\t\tlet activeModels = [];\n\t\t\tif (models && !_.isEmpty(models) && activeKeys && !_.isEmpty(activeKeys)){\n\t\t\t\tactiveKeys.map(key => {\n\t\t\t\t\tlet model = models[key];\n\t\t\t\t\tif (model){\n\t\t\t\t\t\tactiveModels.push(model);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn nonEmptyArray(activeModels);\n\t\t}\n\t)\n};\n\nconst getByFilterOrder = (getSubstate) => {\n\treturn createSelector(\n\t\t[\n\t\t\tgetAllAsObject(getSubstate),\n\t\t\tgetIndexes(getSubstate),\n\t\t\t(state, filter) => filter,\n\t\t\t(state, filter, order) => order\n\t\t],\n\t\t(models, indexes, filter, order) => {\n\t\t\tif (models && indexes) {\n\t\t\t\tconst index = commonHelpers.getIndex(indexes, filter, order);\n\n\t\t\t\treturn modelsFromIndex(models, index);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getBatchByFilterOrder = (getSubstate) => {\n\treturn createSelector(\n\t\t[\n\t\t\tgetAllAsObject(getSubstate),\n\t\t\tgetIndexes(getSubstate),\n\t\t\t(state, filter) => filter,\n\t\t\t(state, filter, order) => order\n\t\t],\n\t\t(models, indexes, filter, order) => {\n\t\t\tif (models && indexes) {\n\t\t\t\tconst index = commonHelpers.getIndex(indexes, filter, order);\n\t\t\t\treturn modelsFromIndex2(models, index);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getIndexed = (getSubstate) => { //todo proper memoization && unify with old getIndexedPage etc.\n\treturn createCachedSelector(\n\t\t[\n\t\t\tgetAllAsObject(getSubstate),\n\t\t\tgetIndexes(getSubstate),\n\t\t\tgetAllActiveKeys,\n\t\t\t(state, filterByActive) => filterByActive,\n\t\t\t(state, filterByActive, filter) => filter,\n\t\t\t(state, filterByActive, filter, order) => order,\n\t\t\t(state, filterByActive, filter, order, start) => start,\n\t\t\t(state, filterByActive, filter, order, start, length) => length,\n\t\t],\n\t\t(models, indexes, activeKeys, filterByActive, filter, order, start, length) => {\n\t\t\tif (models && indexes) {\n\t\t\t\tlet mergedFilter = commonHelpers.mergeFilters(activeKeys, filterByActive, filter);\n\t\t\t\tlet index = commonHelpers.getIndex(indexes, mergedFilter, order);\n\t\t\t\tif (index && index.index) {\n\t\t\t\t\tlet indexedModels = [];\n\t\t\t\t\tlet end = Math.min(start + length - 1, index.count);\n\t\t\t\t\tfor (let i = start; i <= end; i++){\n\t\t\t\t\t\tlet modelKey = index.index[i];\n\t\t\t\t\t\tif (modelKey){\n\t\t\t\t\t\t\tlet indexedModel = models[modelKey];\n\t\t\t\t\t\t\tif (indexedModel){\n\t\t\t\t\t\t\t\tindexedModels.push(indexedModel);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindexedModels.push({key: modelKey});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindexedModels.push(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn indexedModels.length ? indexedModels : null;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t)((state, filterByActive, filter, order, start, length) => {\n\t\treturn `${JSON.stringify(filterByActive)}:${JSON.stringify(filter)}:${JSON.stringify(order)}:${start}:${length}`\n\t});\n};\n\nconst getByKey = (getSubstate) => {\n\treturn createCachedSelector(\n\t\t[\n\t\t\tgetAllAsObject(getSubstate),\n\t\t\t(state, key) => key\n\t\t],\n\t\t(allData, key) => {\n\t\t\tif (key && allData && !_.isEmpty(allData) && allData[key]) {\n\t\t\t\treturn allData[key];\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t)((state, key) => key);\n};\n\nconst getByKeysAsObject = (getSubstate) => {\n\treturn createCachedSelector(\n\t\t[\n\t\t\tgetAllAsObject(getSubstate),\n\t\t\t(state, keys) => keys,\n\t\t],\n\t\t(allData, keys) => {\n\t\t\tif (keys && keys.length && allData && !_.isEmpty(allData)) {\n\t\t\t\tlet data = _.pick(allData, keys);\n\t\t\t\treturn _.isEmpty(data) ? null : data;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t)(\n\t\t(state, keys) => `${keys}`\n\t);\n};\n\n// TODO test + use getByKeysAsObject?\nconst getByKeys = (getSubstate) => {\n\treturn createCachedSelector(\n\t\t[\n\t\t\tgetAllAsObject(getSubstate),\n\t\t\t(state, keys) => keys,\n\t\t],\n\t\t(allData, keys) => {\n\t\t\tif (keys && keys.length && allData && !_.isEmpty(allData)) {\n\t\t\t\tlet data = [];\n\t\t\t\t_.each(keys, key => {\n\t\t\t\t\tif (allData[key]) {\n\t\t\t\t\t\tdata.push(allData[key])\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn nonEmptyArray(data);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t)(\n\t\t(state, keys) => `${keys}`\n\t);\n};\n\nconst getDataByKey = (getSubstate) => {\n\treturn createSelector(\n\t\t[getByKey(getSubstate)],\n\t\t(model) => {\n\t\t\tif (model && model.data) {\n\t\t\t\treturn model.data;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getDeletePermissionByKey = (getSubstate) => {\n\treturn createSelector(\n\t\t[getByKey(getSubstate)],\n\t\t(model) => {\n\t\t\tif (model && model.permissions) {\n\t\t\t\treturn (model.permissions.activeUser && model.permissions.activeUser.delete) || (model.permissions.guest && model.permissions.guest.delete);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getUpdatePermissionByKey = (getSubstate) => {\n\treturn createSelector(\n\t\t[getByKey(getSubstate)],\n\t\t(model) => {\n\t\t\tif (model && model.permissions) {\n\t\t\t\treturn (model.permissions.activeUser && model.permissions.activeUser.update) || (model.permissions.guest && model.permissions.guest.update);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getEditedAll = (getSubstate) => {\n\treturn (state) => {\n\t\tlet data = getSubstate(state).editedByKey;\n\t\treturn data ? Object.values(data) : null;\n\t}\n};\n\nconst getEditedAllAsObject = (getSubstate) => {\n\treturn (state) => getSubstate(state).editedByKey;\n};\n\nconst getEditedActive = (getSubstate) => {\n\treturn createSelector(\n\t\t[getEditedAllAsObject(getSubstate), getActiveKey(getSubstate)],\n\t\t(models, activeKey) => {\n\t\t\tif (models && models[activeKey]){\n\t\t\t\treturn models[activeKey];\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getEditedByKey = (getSubstate) => {\n\treturn (state, key) => {\n\t\tlet allEditedData = getEditedAllAsObject(getSubstate)(state);\n\t\tif (key && allEditedData && !_.isEmpty(allEditedData) && allEditedData[key]) {\n\t\t\treturn allEditedData[key];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n};\n\nconst getEditedDataByKey = (getSubstate) => {\n\treturn createSelector(\n\t\t[getEditedByKey(getSubstate)],\n\t\t(model) => {\n\t\t\tif (model && model.data) {\n\t\t\t\treturn model.data;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getEditedKeys = (getSubstate) => {\n\treturn createSelector(\n\t\t[getEditedAll(getSubstate)],\n\t\t(edited) => {\n\t\t\tif (edited && !_.isEmpty(edited)){\n\t\t\t\treturn edited.map(model => model.key);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t);\n};\n\nconst getIndexes = (getSubstate) => {\n\treturn (state) => getSubstate(state).indexes;\n};\n\nconst getIndexesObserver = createRecomputeObserver((state, getSubstate) => getIndexes(getSubstate)(state));\n\n/**\n * Get whole index by given filter and order\n * @param getSubstate\n */\nconst getIndex = (getSubstate) => {\n\treturn createSelector([\n\t\tgetIndexes(getSubstate),\n\t\t(state, filter) => filter,\n\t\t(state, filter, order) => order],\n\t\t(indexes, filter, order) => {\n\t\t\treturn commonHelpers.getIndex(indexes, filter, order);\n\t\t}\n\t);\n};\n\n/**\n * Get indexes value from given state on given path.\n * Optional param indexPath has default value \"indexes\"\n */\nconst getIndexesByPath = (getSubstate) => {\n\treturn (state, indexPath = 'indexes') =>  _.get(getSubstate(state), indexPath);\n};\n\n/**\n * Get whole index by given filter and order and optional indexPath\n * Beside getIndex indexPath is first optional parameter, filter and order folows.\n */\nconst getIndexByPath = (getSubstate) => {\n\treturn createSelector([\n\t\tgetIndexesByPath(getSubstate),\n\t\t(state, indexPath, filter) => filter,\n\t\t(state, indexPath, filter, order) => order],\n\t\t(indexes, filter, order) => {\n\t\t\treturn commonHelpers.getIndex(indexes, filter, order);\n\t\t}\n\t);\n};\n\nconst getIndex_recompute = (getSubstate) => {\n\treturn createRecomputeSelector((filter, order) => {\n\t\tconst indexes = getIndexesObserver(getSubstate);\n\t\tif (indexes) {\n\t\t\treturn commonHelpers.getIndex(indexes, filter, order);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t});\n};\n\nconst getIndexChangedOn = (getSubstate) => {\n\treturn createSelector(\n\t\t[getIndex(getSubstate)],\n\t\t(index) => {\n\t\t\tif (index && index.changedOn){\n\t\t\t\treturn index.changedOn;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getIndexPage = (getSubstate) => {\n\treturn createSelector([\n\t\tgetIndex(getSubstate),\n\t\t(state, filter, order, start) => (start),\n\t\t(state, filter, order, start, length) => (length)],\n\t\t(index, start, length) => {\n\t\t\tif (index && index.index){\n\t\t\t\tlet indexed = {};\n\t\t\t\tfor (let o = start; o < (start + length) && o <= index.count; o++){\n\t\t\t\t\tlet key = index.index[o];\n\t\t\t\t\tindexed[o] = key ? key : null;\n\t\t\t\t}\n\t\t\t\treturn indexed;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\n/**\n * Get a page of data\n * call with (state, filter, order, start, length)\n */\nconst getIndexedPage = (getSubstate) => {\n\treturn createSelector(\n\t\t[\n\t\t\tgetIndexPage(getSubstate),\n\t\t\tgetAllAsObject(getSubstate)\n\t\t],\n\t\t(page, models) => {\n\t\t\treturn page && page.length && page.map(key => (models[key] || null)) || null; //todo check loading\n\t\t}\n\t);\n};\n\n/**\n * call with (state, filter, order)\n */\nconst getIndexTotal = (getSubstate) => {\n\treturn createSelector(\n\t\t[getIndex(getSubstate)],\n\t\t(index) => {\n\t\t\tif (index && (index.count || index.count === 0)){\n\t\t\t\treturn index.count;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\n/**\n * \n * @param {func} getSubstate \n * @return {Array}\n */\nconst getIndexesByFilteredItem = (getSubstate) => {\n\treturn createSelector([\n\t\tgetIndexes(getSubstate),\n\t\t(state, item) => item,\n\t\t],\n\t\t(indexes, item) => {\n\t\t\tif(!_.isEmpty(indexes)){\n\t\t\t\treturn indexes.filter((index) => commonHelpers.itemFitFilter(index.filter, item));\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\n/**\n * @param {Array} array\n *\n * @returns {Array|null} Non empty array or null.\n */\nfunction nonEmptyArray(array) {\n\treturn array.length ? array : null;\n}\n\n/**\n * Compare keys with loaded models and return which keys need to be loaded\n */\nconst getKeysToLoad = (getSubstate) => {\n\treturn createSelector(\n\t\t[getAllAsObject(getSubstate),\n\t\t\t(state, keys) => (keys)],\n\t\t(models, keys) => {\n\t\t\tif (keys && keys.length){\n\t\t\t\tif (!models){\n\t\t\t\t\treturn keys;\n\t\t\t\t} else {\n\t\t\t\t\treturn nonEmptyArray(keys.filter(key => !models[key] || models[key].outdated));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getUsedKeys = (getSubstate) => {\n\treturn (state) => {\n\t\tlet inUse = getSubstate(state).inUse.keys;\n\t\tif (inUse) {\n\t\t\tlet keys = _.uniq(_.flatten(Object.values(inUse)));\n\t\t\treturn keys.length ? keys : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n};\n\nconst getIndexedDataUses = (getSubstate) => {\n\treturn (state) => {\n\t\tif (getSubstate(state) && getSubstate(state).inUse) {\n\t\t\treturn getSubstate(state).inUse.indexes;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n};\n\nconst getAllActiveKeys = createSelector(\n\t[\n\t\tstate => state.scopes && state.scopes.activeKey,\n\t\tstate => state.cases && state.cases.activeKey,\n\t\tstate => state.cases && state.cases.activeKeys,\n\t\tstate => state.scenarios && state.scenarios.activeKey,\n\t\tstate => state.scenarios && state.scenarios.activeKeys,\n\t\tstate => state.places && state.places.activeKey,\n\t\tstate => state.places && state.places.activeKeys,\n\t\tstate => state.periods && state.periods.activeKey,\n\t\tstate => state.periods && state.periods.activeKeys,\n\t\tstate => state.attributes && state.attributes.activeKey,\n\t\tstate => state.attributes && state.attributes.activeKeys,\n\t\tstate => state.layerTemplates && state.layerTemplates.activeKey,\n\t\tstate => state.areaTreeLevelKeys && state.areaTreeLevelKeys.activeKey,\n\t\tstate => state.specific && state.specific.apps,\n\t\tstate => state.app && state.app.key\n\t],\n\t(activeScopeKey,activeCaseKey,activeCaseKeys,activeScenarioKey,activeScenarioKeys,activePlaceKey,activePlaceKeys,activePeriodKey,activePeriodKeys,activeAttributeKey,activeAttributeKeys, activeLayerTemplateKey, activeAreaTreeLevelKey, apps, appKey) => {\n\t\tlet activeKeys = {\n\t\t    activeScopeKey: activeScopeKey || null,\n            activeCaseKey: activeCaseKey || null,\n            activeCaseKeys: activeCaseKeys || null,\n            activeScenarioKey: activeScenarioKey || null,\n            activeScenarioKeys: activeScenarioKeys || null,\n            activePlaceKey: activePlaceKey || null,\n            activePlaceKeys: activePlaceKeys || null,\n            activePeriodKey: activePeriodKey || null,\n            activePeriodKeys: activePeriodKeys || null,\n            activeAttributeKey: activeAttributeKey || null,\n            activeAttributeKeys: activeAttributeKeys || null,\n            activeLayerTemplateKey: activeLayerTemplateKey || null,\n            activeAreaTreeLevelKey: activeAreaTreeLevelKey || null\n\t\t};\n\n\t\t// for BO usage\n\t\tif (apps){\n\t\t\tactiveKeys.activeApplicationKey = apps.activeKey;\n\t\t} else if (appKey){\n\t\t\tactiveKeys.activeApplicationKey = appKey;\n\t\t}\n\n\t\treturn activeKeys;\n\t}\n);\n\nconst getActiveKeysByFilterByActive = createCachedSelector(\n    [\n        getAllActiveKeys,\n        (state, filterByActive) => filterByActive\n    ],\n    (activeKeys, filterByActive) => {\n        if (filterByActive && !_.isEmpty(filterByActive)) {\n            let keys = {};\n\n            if (filterByActive.scope && activeKeys.activeScopeKey) {\n                keys.scopeKey = activeKeys.activeScopeKey;\n            }\n            if (filterByActive.place) {\n                if (activeKeys.activePlaceKey) {\n                    keys.placeKey = activeKeys.activePlaceKey;\n                } else if (activeKeys.activePlaceKeys) {\n                    keys.placeKeys = activeKeys.activePlaceKeys;\n                }\n            }\n            if (filterByActive.scenario){\n                if (activeKeys.activeScenarioKey) {\n                    keys.scenarioKey = activeKeys.activeScenarioKey;\n                } else if (activeKeys.activeScenarioKeys) {\n                    keys.scenarioKeys = activeKeys.activeScenarioKeys;\n                }\n            }\n            if (filterByActive.case) {\n                if (activeKeys.activeCaseKey) {\n                    keys.caseKey = activeKeys.activeCaseKey;\n                } else if (activeKeys.activeCaseKeys) {\n                    keys.caseKeys = activeKeys.activeCaseKeys;\n                }\n            }\n            if (filterByActive.period) {\n                if (activeKeys.activePeriodKey) {\n                    keys.periodKey = activeKeys.activePeriodKey;\n                } else if (activeKeys.activePeriodKeys) {\n                    keys.periodKeys = activeKeys.activePeriodKeys;\n                }\n            }\n            if (filterByActive.layerTemplate && activeKeys.activeLayerTemplateKey) {\n                keys.layerTemplateKey = activeKeys.activeLayerTemplateKey;\n            }\n            if (filterByActive.areaTreeLevel && activeKeys.activeAreaTreeLevelKey) {\n                keys.areaTreeLevelKey = activeKeys.activeAreaTreeLevelKey;\n            }\n            if (filterByActive.application && activeKeys.activeApplicationKey) {\n                keys.applicationKey = activeKeys.activeApplicationKey\n            }\n\n            return !_.isEmpty(keys) ? keys : null;\n        } else {\n            return null;\n        }\n    }\n)((state, filterByActive) => JSON.stringify(filterByActive));\n\nconst getActiveKeysByFilterByActiveObserver = createRecomputeObserver(getActiveKeysByFilterByActive);\n\nconst getUsedIndexPages = (getSubstate) => {\n\treturn createSelector([\n\t\t\tgetIndexedDataUses(getSubstate),\n\t\t\tgetAllActiveKeys\n\t\t],\n\t\t(indexedDataUses, activeKeys) => {\n\t\t\tlet groupedUses = [];\n\t\t\tlet finalUsedIndexes = [];\n\t\t\tif(!_.isEmpty(indexedDataUses)) {\n\t\t\t\t_.each(indexedDataUses, (usedIndexes) => {\n\t\t\t\t\tusedIndexes.forEach(usedIndex => {\n\t\t\t\t\t\tlet mergedFilter = commonHelpers.mergeFilters(activeKeys, usedIndex.filterByActive, usedIndex.filter);\n\t\n\t\t\t\t\t\tlet existingIndex = _.find(groupedUses, (use) => {\n\t\t\t\t\t\t\treturn _.isEqual(use.filter, mergedFilter) && _.isEqual(use.order, usedIndex.order) ;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (existingIndex){\n\t\t\t\t\t\t\texistingIndex.inUse.push({\n\t\t\t\t\t\t\t\tstart: usedIndex.start,\n\t\t\t\t\t\t\t\tlength: usedIndex.length\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgroupedUses.push({\n\t\t\t\t\t\t\t\tfilter: mergedFilter,\n\t\t\t\t\t\t\t\torder: usedIndex.order,\n\t\t\t\t\t\t\t\tinUse: [{\n\t\t\t\t\t\t\t\t\tstart: usedIndex.start,\n\t\t\t\t\t\t\t\t\tlength: usedIndex.length\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t_.each(groupedUses, index => {\n\t\t\t\tif (index.inUse && Object.keys(index.inUse).length) {\n\t\t\t\t\tfinalUsedIndexes.push({\n\t\t\t\t\t\tfilter: index.filter,\n\t\t\t\t\t\torder: index.order,\n\t\t\t\t\t\tuses: _mergeIntervals(Object.values(index.inUse))\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn finalUsedIndexes.length ? finalUsedIndexes : null;\n\t\t}\n\t);\n};\n\nconst getUsesForIndex = (getSubstate) => {\n\treturn createCachedSelector(\n\t\tgetIndexedDataUses(getSubstate),\n\t\t(state, filter) => filter,\n\t\t(state, filter, order) => order,\n\t\tgetAllActiveKeys,\n\t\t(indexedDataUses, filter, order, activeKeys) => {\n\t\t\tlet index = null;\n\t\t\tif(!_.isEmpty(indexedDataUses)) {\n\t\t\t\t_.each(indexedDataUses, (usedIndexes) => {\n\t\t\t\t\t_.each(usedIndexes, usedIndex => {\n\t\t\t\t\t\tlet mergedFilter = commonHelpers.mergeFilters(activeKeys, usedIndex.filterByActive, usedIndex.filter);\n\n\t\t\t\t\t\tif (_.isEqual(filter, mergedFilter) && _.isEqual(order, usedIndex.order)){\n\t\t\t\t\t\t\tif (index){\n\t\t\t\t\t\t\t\tindex.inUse.push({\n\t\t\t\t\t\t\t\t\tstart: usedIndex.start,\n\t\t\t\t\t\t\t\t\tlength: usedIndex.length\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = {\n\t\t\t\t\t\t\t\t\tfilter: filter,\n\t\t\t\t\t\t\t\t\torder: usedIndex.order,\n\t\t\t\t\t\t\t\t\tinUse: [{\n\t\t\t\t\t\t\t\t\t\tstart: usedIndex.start,\n\t\t\t\t\t\t\t\t\t\tlength: usedIndex.length\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (index){\n\t\t\t\treturn {\n\t\t\t\t\tfilter: index.filter,\n\t\t\t\t\torder: index.order,\n\t\t\t\t\tuses: _mergeIntervals(Object.values(index.inUse))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t)(\n\t\t(state, filter, order) => {\n\t\t\tlet stringOrder = JSON.stringify(order);\n\t\t\tlet stringFilter = JSON.stringify(_.map(filter, (value, key) => {\n\t\t\t\treturn `${key}:${value}`;\n\t\t\t}).sort());\n\t\t\treturn `${stringOrder}:${stringFilter}`;\n\t\t}\n\t);\n};\n\nconst getUsesWithActiveDependency = (getSubstate) => {\n\t/**\n\t * @param state {Object}\n\t * @param filterByActive {Object} Something like {scope: true}\n\t */\n\treturn createSelector([\n\t\t\tgetIndexedDataUses(getSubstate),\n\t\t\tgetAllActiveKeys,\n\t\t\t(state, filterByActive) => filterByActive\n\t\t],\n\t\t/**\n\t\t * @param indexedDataUses {Object} inUse.indexes\n\t\t * @param activeKeys {Object} active keys of all metadata\n\t\t * @param filterByActive {Object} given metadata type active key for filtering (e.g. {scope: true})\n\t\t */\n\t\t(indexedDataUses, activeKeys, filterByActive) => {\n\t\t\tlet groupedUses = []; // uses grouped by filter\n\t\t\tlet usedIndexes = [];\n\n\t\t\tif (filterByActive && !_.isEmpty(indexedDataUses)) {\n\t\t\t\t// loop through components\n\t\t\t\t_.map(indexedDataUses, (componentUsedIndexes) => {\n\t\t\t\t\t// loop through uses for component\n\t\t\t\t\t_.map(componentUsedIndexes, (usedIndex) => {\n\t\t\t\t\t\tif (_.reduce(filterByActive, (accumulator, value, index) => accumulator && value && usedIndex.filterByActive && usedIndex.filterByActive[index], true)) {\n\t\t\t\t\t\t\t// if usedIndex.filterByActive has all the properties of filterByActive\n\n\t\t\t\t\t\t\tlet mergedFilter = commonHelpers.mergeFilters(activeKeys, usedIndex.filterByActive, usedIndex.filter);\n\n\t\t\t\t\t\t\tlet existingIndex = _.find(groupedUses, (use) => {\n\t\t\t\t\t\t\t\treturn _.isEqual(use.filter, mergedFilter) && _.isEqual(use.order, usedIndex.order) ;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (existingIndex){\n\t\t\t\t\t\t\t\texistingIndex.inUse.push({\n\t\t\t\t\t\t\t\t\tstart: usedIndex.start,\n\t\t\t\t\t\t\t\t\tlength: usedIndex.length\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tgroupedUses.push({\n\t\t\t\t\t\t\t\t\tfilter: mergedFilter,\n\t\t\t\t\t\t\t\t\torder: usedIndex.order,\n\t\t\t\t\t\t\t\t\tinUse: [{\n\t\t\t\t\t\t\t\t\t\tstart: usedIndex.start,\n\t\t\t\t\t\t\t\t\t\tlength: usedIndex.length\n\t\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// loop through uses grouped by filter and merge intervals\n\t\t\t\t_.map(groupedUses, index => {\n\t\t\t\t\tif (index.inUse && Object.keys(index.inUse).length) {\n\t\t\t\t\t\tusedIndexes.push({\n\t\t\t\t\t\t\tfilter: index.filter,\n\t\t\t\t\t\t\torder: index.order,\n\t\t\t\t\t\t\tuses: _mergeIntervals(Object.values(index.inUse))\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn usedIndexes.length ? usedIndexes : null;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t);\n};\n\nconst getStateToSave = (getSubstate) => {\n\treturn (state) => {\n\t\tconst activeKey = getSubstate(state).activeKey;\n\t\tif (activeKey) {\n\t\t\treturn {activeKey};\n\t\t}\n\n\t\tconst activeKeys = getSubstate(state).activeKeys;\n\t\tif (activeKeys) {\n\t\t\treturn {activeKeys};\n\t\t}\n\n\t\treturn {}\n\t}\n};\n\nfunction isInterval(interval) {\n\treturn interval && interval.start && interval.length;\n}\n\nfunction intervalsOverlap(earlier, later) {\n\treturn later.start <= (earlier.start + earlier.length);\n}\n\nconst _mergeIntervals = (intervals) => {\n\tconst validIntervals = intervals.filter(isInterval)\n\tconst sortedIntervals = _.sortBy(validIntervals, ['start', 'length']);\n\tif (sortedIntervals.length === 0) {\n\t\treturn null;\n\t}\n\n\t//merge intervals\n\treturn _.tail(sortedIntervals)\n\t\t.reduce((mergedIntervals, interval) => {\n\t\t\tconst last = mergedIntervals.pop();\n\t\t\tif (intervalsOverlap(last, interval)) {\n\t\t\t\t//merge last & current\n\t\t\t\tconst end = Math.max((last.start + last.length), (interval.start + interval.length));\n\t\t\t\treturn [...mergedIntervals, {\n\t\t\t\t\tstart: last.start,\n\t\t\t\t\tlength: (end - last.start)\n\t\t\t\t}];\n\t\t\t} else {\n\t\t\t\t//add both\n\t\t\t\treturn [...mergedIntervals, last, interval];\n\t\t\t}\n\t}, [_.head(sortedIntervals)]);\n};\n\nexport default {\n\tgetActive,\n\tgetActiveModels,\n\tgetActiveKey,\n\tgetActiveKeys,\n    getActiveKeysByFilterByActive,\n\tgetAll,\n\tgetAllActiveKeys,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\n\tgetByFilterOrder,\n\tgetBatchByFilterOrder,\n\tgetByKey,\n\tgetByKeysAsObject,\n\tgetByKeys,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedActive,\n\tgetEditedAll,\n\tgetEditedAllAsObject,\n\tgetEditedByKey,\n\tgetEditedDataByKey,\n\tgetEditedKeys,\n\n\tgetIndex,\n\tgetIndexByPath,\n\tgetIndex_recompute,\n\tgetIndexed,\n\tgetIndexes,\n\tgetIndexChangedOn,\n\tgetIndexPage,\n\tgetIndexedPage,\n\tgetIndexTotal,\n\tgetIndexesByFilteredItem,\n\n\tgetKeysToLoad,\n\n\tgetStateToSave,\n\n\tgetUpdatePermissionByKey,\n\tgetUsesForIndex,\n\tgetUsedIndexPages,\n\tgetUsedKeys,\n\tgetUsesWithActiveDependency,\n\n\t_mergeIntervals,\n\n\t// recompute observers\n\tgetActiveKeysByFilterByActiveObserver\n}","import common from \"../_common/selectors\";\n\nconst getSubstate = state => state._deprecatedSelections;\nconst getActive = common.getActive(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\n\nexport default {\n\tgetActive,\n\tgetActiveKey,\n\n\tgetSubstate\n};","import _ from 'lodash';\nimport createCachedSelector from \"re-reselect\";\nimport commonSelectors from '../_common/selectors';\nimport {CacheFifo} from '@gisatcz/ptr-utils';\n\nlet mergeFeaturesWithAttributesCache = new CacheFifo(20);\n\nconst getMergedFilterFromLayerStateAndActiveMetadataKeys = createCachedSelector(\n\t[\n\t\t(layer) => layer,\n\t\t(layer, activeMetadataKeys) => activeMetadataKeys,\n\t\t(layer, activeMetadataKeys, modifiersPath) => modifiersPath\n\t],\n\t(layer, activeMetadataKeys, modifiersPath) => {\n\t\tlet filter = {...layer[modifiersPath]};\n\t\tif (layer.layerTemplateKey) {\n\t\t\tfilter.layerTemplateKey = layer.layerTemplateKey;\n\t\t}\n\t\tif (layer.areaTreeLevelKey) {\n\t\t\tfilter.areaTreeLevelKey = layer.areaTreeLevelKey;\n\t\t}\n\n\t\t//todo fail on conflict between metadataModifiers & filterByActive ?\n\t\t//todo special filterByActive for attribute data\n\n\t\tlet activeFilter = {};\n\t\tif (layer.filterByActive) {\n\t\t\tlet active = layer.filterByActive;\n\t\t\tif (active.attribute && activeMetadataKeys.activeAttributeKey) {\n\t\t\t\tactiveFilter.attributeKey = activeMetadataKeys.activeAttributeKey;\n\t\t\t}\n\t\t\tif (active.case && activeMetadataKeys.activeCaseKey) {\n\t\t\t\tactiveFilter.caseKey = activeMetadataKeys.activeCaseKey;\n\t\t\t}\n\t\t\tif (active.layerTemplate && activeMetadataKeys.activeLayerTemplateKey) {\n\t\t\t\tactiveFilter.layerTemplateKey = activeMetadataKeys.activeLayerTemplateKey;\n\t\t\t}\n\t\t\tif (active.areaTreeLevelKey && activeMetadataKeys.areaTreeLevelKey) {\n\t\t\t\tactiveFilter.areaTreeLevelKey = activeMetadataKeys.areaTreeLevelKey;\n\t\t\t}\n\t\t\t// TODO what if multiple periods\n\t\t\tif (active.period && activeMetadataKeys.activePeriodKey) {\n\t\t\t\tactiveFilter.periodKey = activeMetadataKeys.activePeriodKey;\n\t\t\t}\n\t\t\t// TODO what if multiple places\n\t\t\tif (active.place && activeMetadataKeys.activePlaceKey) {\n\t\t\t\tactiveFilter.placeKey = activeMetadataKeys.activePlaceKey;\n\t\t\t}\n\t\t\tif (active.scenario && activeMetadataKeys.activeScenarioKey) {\n\t\t\t\tactiveFilter.scenarioKey = activeMetadataKeys.activeScenarioKey;\n\t\t\t}\n\t\t\tif (active.scope && activeMetadataKeys.activeScopeKey) {\n\t\t\t\tactiveFilter.scopeKey = activeMetadataKeys.activeScopeKey;\n\t\t\t}\n\t\t}\n\n\t\treturn {...filter, ...activeFilter}\n\t}\n)((layer, activeMetadataKeys) => `${layer}_${activeMetadataKeys}`);\n\nconst getBackgroundLayersWithFilter = createCachedSelector(\n\t[\n\t\tcommonSelectors.getAllActiveKeys,\n\t\t(state, layerState) => layerState,\n\t\t(state, layerState, layerKey) => layerKey\n\t],\n\t(activeMetadataKeys, layerState, layerKey) => {\n\t\tlayerState = JSON.parse(layerState);\n\n\t\treturn [{\n\t\t\tkey: layerKey,\n\t\t\tfilter: getMergedFilterFromLayerStateAndActiveMetadataKeys(layerState, activeMetadataKeys, 'metadataModifiers')\n\t\t}]\n\t}\n)((state, layerState, layerKey) => (`${layerState}:${layerKey}`));\n\n\n\n\nconst getLayersWithFilter = createCachedSelector(\n\t[\n\t\tcommonSelectors.getAllActiveKeys,\n\t\t(state, layersState) => layersState\n\t],\n\t(activeMetadataKeys, layersState) => {\n\t\tlayersState = JSON.parse(layersState);\n\t\tif (layersState && layersState.length) {\n\t\t\treturn _.map(layersState, (layer) => {\n\t\t\t\treturn {\n\t\t\t\t\tkey: layer.key,\n\t\t\t\t\tfilter: getMergedFilterFromLayerStateAndActiveMetadataKeys(layer, activeMetadataKeys, 'metadataModifiers'),\n\t\t\t\t\tattributeFilter: getMergedFilterFromLayerStateAndActiveMetadataKeys(layer, activeMetadataKeys, 'attributeMetadataModifiers')\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, layersState) => layersState);\n\n/**\n * Create layer deffinition on the base of mandatory parameters.\n * Returns object that is input for Layer from @gisatcz/ptr-maps.\n * @param {string} layerKey \n * @param {Object} dataSource \n * @param {?string} fidColumnName Requided for vector layers\n * @param {Number} index Layer order in dataSources\n * @param {Object} layerState \n * @param {?Object} style \n * @param {Array} attributeDataSources \n * @param {Object} selections \n * @param {Object} layerTemplate \n * @param {Object} period \n */\nconst prepareLayerByDataSourceType = (layerKey, dataSource, fidColumnName, index, layerState, style, attributeDataSources, selections, layerTemplate, period) => {\n\tconst layerOptions = layerState && layerState.options;\n\tlet dataSourceData = dataSource.data;\n\n\tlet {attribution, nameInternal, type, tableName, layerName, features, selected, ...options} = dataSourceData;\n\n\t// TODO data source strucutre\n\tif (type === 'wmts') {\n\t\toptions.url = options.urls[0];\n\t} else if (type === 'wms') {\n\t\tconst {url, params, configuration, ...rest} = options;\n\t\tconst singleTile = configuration && configuration.hasOwnProperty('singleTile') ? configuration.singleTile : false;\n\n\t\toptions = {\n\t\t\tparams: {\n\t\t\t\t...params,\n\t\t\t\tlayers: rest.layers,\n\t\t\t\tstyles: rest.styles,\n\t\t\t},\n\t\t\tsingleTile,\n\t\t\turl\n\t\t}\n\t} else if (type === 'vector' && features) {\n\t\tif (attributeDataSources) {\n\t\t\tfeatures = mergeFeaturesWithAttributes(layerKey, features, attributeDataSources, fidColumnName);\n\t\t}\n\n\t\tif (selections && layerOptions?.selected) {\n\t\t\tselected = prepareSelection(selections, layerOptions.selected);\n\t\t}\n\t\t\n\t\t\n\t\toptions = {\n\t\t\t...layerOptions,\n\t\t\tfeatures,\n\t\t\tselected,\n\t\t\tfidColumnName\n\t\t};\n\n\t\t// TODO type=geoserver\n\t\tif (style && style.data && style.data.source === 'definition') {\n\t\t\toptions.style = style.data.definition;\n\t\t}\n\t}\n\n\tif(period) {\n\t\toptions.period = period;\n\t}\n\n\treturn {\n\t\tkey: layerKey + '_' + index,\n\t\tname: layerState.name || layerTemplate?.data?.nameDisplay,\n\t\tdescription: layerTemplate?.data?.description,\n\t\tlayerKey: layerKey,\n\t\topacity: (layerState && layerState.opacity) || 1,\n\t\ttype,\n\t\toptions\n\t};\n};\n\nfunction prepareSelection(selections, layerSelections) {\n\tlet populatedSelections = {};\n\t_.forIn(layerSelections, (value, key) => {\n\t\tlet selectionData = selections?.[key].data;\n\n\t\tif (selectionData) {\n\t\t\tconst style = selectionData.style;\n\t\t\t// TODO hovered style\n\t\t\tconst color = selectionData.color;\n\t\t\tconst hoveredColor = selectionData.hoveredColor;\n\n\t\t\tif (selectionData.featureKeysFilter) {\n\t\t\t\tpopulatedSelections[key] = {keys: selectionData.featureKeysFilter.keys};\n\t\t\t\tif (style) {\n\t\t\t\t\tpopulatedSelections[key].style = style;\n\t\t\t\t\tpopulatedSelections[key].hoveredStyle = style;\n\t\t\t\t} else {\n\t\t\t\t\tpopulatedSelections[key].style = {\n\t\t\t\t\t\toutlineColor: color,\n\t\t\t\t\t\toutlineWidth: 2\n\t\t\t\t\t};\n\t\t\t\t\tpopulatedSelections[key].hoveredStyle = {\n\t\t\t\t\t\toutlineColor: hoveredColor,\n\t\t\t\t\t\toutlineWidth: 2\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//TODO other selection types\n\t\t}\n\t});\n\n\treturn populatedSelections;\n}\n\nfunction mergeFeaturesWithAttributes(layerKey, features, attributeDataSources, fidColumnName) {\n\tlet cacheKey = JSON.stringify(layerKey);\n\tlet cache = mergeFeaturesWithAttributesCache.findByKey(cacheKey);\n\n\tlet finalFeaturesObject = {};\n\tif (cache && cache.features === features) {\n\t\tfinalFeaturesObject = cache.finalFeaturesObject;\n\t} else {\n\t\tfeatures.forEach((feature) => {\n\t\t\tlet key = feature.properties[fidColumnName];\n\t\t\tfinalFeaturesObject[key] = {...feature};\n\t\t});\n\n\t}\n\n\tattributeDataSources.forEach(attributeDataSource => {\n\t\tlet featuresWithAttributes = attributeDataSource.dataSource.data.features;\n\t\tif (featuresWithAttributes) {\n\t\t\tfeaturesWithAttributes.forEach(featureWithAttributes => {\n\t\t\t\tlet featureKey = featureWithAttributes.properties[fidColumnName];\n\n\t\t\t\t_.forIn(featureWithAttributes.properties, (value, key) => {\n\t\t\t\t\tfinalFeaturesObject[featureKey].properties[key] = value;\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\n\tmergeFeaturesWithAttributesCache.addOrUpdate({\n\t\tcacheKey,\n\t\tfeatures,\n\t\tfinalFeaturesObject\n\t});\n\n\n\treturn Object.values(finalFeaturesObject);\n}\n\nfunction getLayersStateWithoutFeatures(layersState) {\n\tlet withoutFeatures = [];\n\t_.each(layersState, layerState => {\n\t\tif (layerState?.options?.features) {\n\t\t\twithoutFeatures.push({\n\t\t\t\t...layerState,\n\t\t\t\toptions: {\n\t\t\t\t\t...layerState.options,\n\t\t\t\t\tfeatures: null\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\twithoutFeatures.push(layerState);\n\t\t}\n\t});\n\n\treturn withoutFeatures;\n}\n\nexport default {\n\tgetBackgroundLayersWithFilter,\n\tgetLayersWithFilter,\n\tgetLayersStateWithoutFeatures,\n\tprepareLayerByDataSourceType,\n\tprepareSelection\n}\n","import _ from 'lodash';\nimport common from \"../_common/selectors\";\nimport createCachedSelector from \"re-reselect\";\n\nconst getSubstate = state => state.layerTemplates;\n\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\nconst getFilteredTemplatesGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\t(state, layersState) => layersState\n\t],\n\t(layerTemplates, layersState) => {\n\t\tif (layerTemplates && !_.isEmpty(layerTemplates) && layersState) {\n\t\t\tlet layerTemplatesByLayerKey = {};\n\t\t\tlayersState.forEach(layer => {\n\t\t\t\tif (layer.filter.layerTemplateKey) {\n\t\t\t\t\tlayerTemplatesByLayerKey[layer.key] = layerTemplates[layer.filter.layerTemplateKey];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn layerTemplatesByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, layersState) => layersState.map(l => l.filter && l.filter.layerTemplateKey).join(','));\n\nconst getFilteredTemplatesGroupedByLayerTemplateKey = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\t(state, layersState) => layersState\n\t],\n\t(layerTemplates, layersState) => {\n\t\tif (layerTemplates && !_.isEmpty(layerTemplates) && layersState) {\n\t\t\tlet layerTemplatesByLayerKey = {};\n\t\t\tlayersState.forEach(layer => {\n\t\t\t\tif (layer.filter.layerTemplateKey) {\n\t\t\t\t\tlayerTemplatesByLayerKey[layer.filter.layerTemplateKey] = layerTemplates[layer.filter.layerTemplateKey];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn layerTemplatesByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, layersState) => layersState.map(l => l.filter && l.filter.layerTemplateKey).join(','));\n\nexport default {\n\tgetActiveKey,\n\tgetAll,\n\tgetAllAsObject,\n\n\tgetByKey,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\t\n\tgetIndexed: common.getIndexed(getSubstate),\n\n\tgetUpdatePermissionByKey,\n\tgetFilteredTemplatesGroupedByLayerKey,\n\tgetFilteredTemplatesGroupedByLayerTemplateKey,\n\tgetSubstate\n};","import _ from 'lodash';\n\nimport common from \"../../_common/selectors\";\n\nconst getSubstate = state => state.spatialVectorDataSources;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\nconst getBatchByFilterOrder = common.getBatchByFilterOrder(getSubstate);\nconst getDataByKey = common.getDataByKey(getSubstate);\n\nconst getEditedFeatures = state => state.spatialDataSources.vector.editedFeaturesBySourceKey;\n\nconst noMemoGetFeaturesBySourceKey = (state, props) => state.spatialDataSources.vector.featuresBySourceKey[props.dataSourceKey];\nconst noMemoGetEditedFeaturesBySourceKey = (state, props) => state.spatialDataSources.vector.editedFeaturesBySourceKey[props.dataSourceKey];\nconst noMemoGetSelectedFeaturesKeysBySourceKey = (state, props) => state.spatialDataSources.vector.selectedFeaturesKeysBySourceKey[props.dataSourceKey];\n\nconst noMemoGetSelectedFeaturesBySourceKey = (state, props) => {\n\t\treturn _.filter(noMemoGetFeaturesBySourceKey(state, props), feature => {\n\t\t\treturn _.includes(noMemoGetSelectedFeaturesKeysBySourceKey(state, props), feature.key);\n\t\t});\n};\n\n\nexport default {\n\tnoMemoGetFeaturesBySourceKey: noMemoGetFeaturesBySourceKey,\n\tnoMemoGetEditedFeaturesBySourceKey: noMemoGetEditedFeaturesBySourceKey,\n\tnoMemoGetSelectedFeaturesBySourceKey: noMemoGetSelectedFeaturesBySourceKey,\n\t\n\tgetBatchByFilterOrder,\n\tgetSubstate,\n\tgetEditedFeatures: getEditedFeatures,\n\tgetAll,\n\tgetAllAsObject,\n\tgetByKey,\n\tgetDataByKey,\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from \"re-reselect\";\nimport _ from 'lodash';\nimport common from \"../_common/selectors\";\n\nconst getSubstate = (state) => state.areaRelations;\nconst getAll = common.getAll(getSubstate);\n\n/**\n * @return {Array|null}\n */\nconst getAllData = createSelector(\n\t[getAll],\n\t(relations) => {\n\t\tif (relations) {\n\t\t\treturn _.map(relations, relation => relation.data);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param filter {Object}\n * @returns {Array|null}\n */\nconst getFilteredData = createSelector(\n\t[\n\t\tgetAllData,\n\t\t(state, filter) => filter\n\t],\n\t(relations, filter) => {\n\t\tif (relations && relations.length > 0 && filter && !_.isEmpty(filter)) {\n\t\t\treturn _.filter(relations, filter);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @returns {Object}\n */\nconst getFilteredDataSourceKeysGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAll,\n\t\t(state, layers) => layers\n\t],\n\t(relations, layers) => {\n\t\tif (relations && relations.length) {\n\t\t\tlet filteredGroupedByLayerKey = {};\n\n\t\t\t_.forEach(layers, (layer) => {\n\t\t\t\tlet filteredRelations = _.filter(relations, {'data': layer.filter});\n\t\t\t\tif (filteredRelations.length) {\n\t\t\t\t\tfilteredGroupedByLayerKey[layer.key] = filteredRelations.map(relation => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspatialDataSourceKey: relation.data.spatialDataSourceKey,\n\t\t\t\t\t\t\tfidColumnName: relation.data.fidColumnName\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn !_.isEmpty(filteredGroupedByLayerKey) ? filteredGroupedByLayerKey : null;\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, layers) => JSON.stringify(layers)\n);\n\nexport default {\n\tgetSubstate,\n\n\tgetFilteredData,\n\tgetFilteredDataSourceKeysGroupedByLayerKey\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from \"re-reselect\";\nimport _, {isEmpty, cloneDeep} from 'lodash';\nimport common from \"../_common/selectors\";\n\nconst getSubstate = (state) => state.spatialRelations;\nconst getAll = common.getAll(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\n\n/**\n * @return {Array|null}\n */\nconst getAllData = createSelector(\n\t[getAll],\n\t(relations) => {\n\t\tif (relations) {\n\t\t\treturn _.map(relations, relation => relation.data);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param filter {Object}\n * @returns {Array|null}\n */\nconst getFilteredData = createSelector(\n\t[\n\t\tgetAllData,\n\t\t(state, filter) => filter\n\t],\n\t(relations, filter) => {\n\t\tif (relations && relations.length > 0 && filter && !_.isEmpty(filter)) {\n\t\t\treturn _.filter(relations, filter);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @returns {Object}\n */\nconst getFilteredDataSourceKeysGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAll,\n\t\t(state, layers) => layers\n\t],\n\t(relations, layers) => {\n\t\tif (relations && relations.length) {\n\t\t\tlet filteredGroupedByLayerKey = {};\n\n\t\t\t_.forEach(layers, (layer) => {\n\t\t\t\tlet filteredRelations = _.filter(relations, {'data': layer.filter});\n\t\t\t\tif (filteredRelations.length) {\n\t\t\t\t\tfilteredGroupedByLayerKey[layer.key] = filteredRelations.map(relation => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tspatialDataSourceKey: relation.data.spatialDataSourceKey,\n\t\t\t\t\t\t\tfidColumnName: relation.data.fidColumnName\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn !_.isEmpty(filteredGroupedByLayerKey) ? filteredGroupedByLayerKey : null;\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, layers) => JSON.stringify(layers)\n);\n\n/**\n * @returns {Object}\n */\nconst getFilteredDataGroupedByLayerTemplateKey = createCachedSelector(\n\t[\n\t\tgetAll,\n\t\t(state, layers) => layers\n\t],\n\t(relations, layers) => {\n\t\tif (relations && relations.length) {\n\t\t\tlet filteredGroupedByLayerKey = {};\n\n\t\t\t_.forEach(layers, (layer) => {\n\t\t\t\tlet filteredRelations = _.filter(relations, {'data': layer.filter});\n\t\t\t\tconst layerTemplateKey = layer.filter.layerTemplateKey;\n\t\t\t\tif (layerTemplateKey && filteredRelations.length) {\n\t\t\t\t\tfilteredGroupedByLayerKey[layerTemplateKey] = filteredRelations;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn !_.isEmpty(filteredGroupedByLayerKey) ? filteredGroupedByLayerKey : null;\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, layersState) => layersState.map(l => l.filter && l.filter.layerTemplateKey).join(',')\n);\n\n/********************************\n DEPRECATED\n ********************************/\n\n/**\n * Collect and prepare relations for given filters grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getFilteredDataGroupedByLayerKey = createSelector(\n\t[\n\t\tgetAllData,\n\t\t(state, layers) => layers\n\t],\n\t/**\n\t * @param relations {Array | null} list of all relations data\n\t * @param layers {Array | null}\n\t * @return {Object | null} Selected relations grouped by layer key\n\t */\n\t(relations, layers) => {\n\t\tif (layers && !_.isEmpty(layers)) {\n\t\t\tlet groupedRelations = {};\n\t\t\tlayers.forEach(layer => {\n\t\t\t\tconst layerKey = layer.key || (layer.data && layer.data.key);\n\t\t\t\tif (layerKey) {\n\t\t\t\t\tif (relations && relations.length) {\n\t\t\t\t\t\tconst filter = cloneDeep(layer.filter);\n\t\t\t\t\t\t//TODO\n\t\t\t\t\t\t//sapatial data should not be filtered by period and attributeKey\n\t\t\t\t\t\tdelete filter.attributeKey;\n\t\t\t\t\t\tlet filteredRelations = _.filter(relations, filter);\n\t\t\t\t\t\tif (!_.isEmpty(filteredRelations)) {\n\t\t\t\t\t\t\tgroupedRelations[layerKey] = filteredRelations;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgroupedRelations[layerKey] = [null];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgroupedRelations[layerKey] = [null];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn !_.isEmpty(groupedRelations) ? groupedRelations : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param filter {Object}\n */\nconst getDataSourceKeysFiltered = createSelector(\n\t[getFilteredData],\n\t(filteredRelations) => {\n\t\tif (filteredRelations && filteredRelations.length) {\n\t\t\treturn _.map(filteredRelations, relation => relation.spatialDataSourceKey);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * Filter spatialRelationsData by layerTemplateKeys.\n *\n * @param state {Object}\n * @param layerTemplateKeys {Array | null} Array of layerTemplateKeys.\n */\nconst getDataSourceRelationsByLayerTemplateKeys = createSelector(\n\t[getAllData, (state, layerTemplateKeys) => layerTemplateKeys],\n\t(allData, layerTemplateKeys) => {\n\t\tif (allData && !_.isEmpty(allData) && layerTemplateKeys && !_.isEmpty(layerTemplateKeys)) {\n\t\t\tconst filtered = allData.filter(i => layerTemplateKeys.includes(i.layerTemplateKey));\n\t\t\treturn !_.isEmpty(filtered) ? filtered : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n// TODO wtf?\n/**\n * Collect and prepare data relations grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getDataSourceRelationsGroupedByLayerKey = createSelector(\n\t[getFilteredDataGroupedByLayerKey],\n\n\t/**\n\t * @param groupedRelations {null | Object} Relations grouped by layer key\n\t * @return {null | Object} Data sources keys grouped by layer key\n\t */\n\t(groupedRelations) => {\n\t\tif (groupedRelations) {\n\t\t\tlet groupedDataSourceKeys = {};\n\t\t\t_.forIn(groupedRelations, (relationsData, layerKey) => {\n\t\t\t\tgroupedDataSourceKeys[layerKey] = relationsData;\n\t\t\t});\n\t\t\treturn !_.isEmpty(groupedDataSourceKeys) ? groupedDataSourceKeys : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * Collect and prepare data sources keys grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getDataSourceKeysGroupedByLayerKey = createSelector(\n\t[getDataSourceRelationsGroupedByLayerKey],\n\n\t/**\n\t * @param groupedRelations {null | Object} Relations grouped by layer key\n\t * @return {null | Object} Data sources keys grouped by layer key\n\t */\n\t(groupedRelations) => {\n\t\tif (groupedRelations) {\n\t\t\tconst groupedRelationsDataSource = {};\n\t\t\tfor (const [key, value] of Object.entries(groupedRelations)) {\n\t\t\t\tgroupedRelationsDataSource[key] = value.map(r => r ? r.spatialDataSourceKey : null);\n\t\t\t}\n\t\t\treturn groupedRelationsDataSource;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * Collect and prepare data sources keys grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getDataSourceRelationsForLayerKey = createSelector(\n\t[\n\t\tgetDataSourceRelationsGroupedByLayerKey,\n\t\t(state, layers) => layers, //FIXME -> create selector for layers\n\t\t(state, layerKey) => layerKey\n\t],\n\n\t/**\n\t * @param groupedRelations {null | Object} Relations grouped by layer key\n\t * @return {null | Object} Data sources keys grouped by layer key\n\t */\n\t(groupedRelations, layerKey) => {\n\t\tif (groupedRelations) {\n\t\t\treturn groupedRelations[layerKey] || null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetSubstate,\n\tgetByKey,\n\tgetByKeys,\n\tgetAllData,\n\tgetFilteredData,\n\tgetFilteredDataSourceKeysGroupedByLayerKey,\n\tgetFilteredDataGroupedByLayerTemplateKey,\n\n\n\t// Deprecated\n\tgetDataSourceKeysFiltered,\n\tgetDataSourceKeysGroupedByLayerKey,\n\tgetDataSourceRelationsGroupedByLayerKey: getFilteredDataGroupedByLayerKey,\n\tgetDataSourceRelationsByLayerTemplateKeys,\n\tgetDataSourceRelationsForLayerKey,\n\tgetFilteredDataGroupedByLayerKey\n};","import common from \"../_common/selectors\";\n\nconst getSubstate = (state) => state.spatialData;\n\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\n\nexport default {\n\tgetAllAsObject,\n\tgetByKey,\n\tgetSubstate,\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from \"re-reselect\";\nimport _ from 'lodash';\n\nimport vectorSelectors from './vector/selectors';\nimport common from \"../_common/selectors\";\nimport AreaRelations from \"../AreaRelations/selectors\";\nimport SpatialRelations from \"../SpatialRelations/selectors\";\nimport SpatialData from \"../SpatialData/selectors\";\n\nconst getSubstate = (state) => state.spatialDataSources;\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\n\nconst getFilteredSourcesGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tSpatialRelations.getFilteredDataSourceKeysGroupedByLayerKey,\n\t\tAreaRelations.getFilteredDataSourceKeysGroupedByLayerKey,\n\t\tSpatialData.getAllAsObject\n\t],\n\t(dataSources, spatialRelationsDataSourceKeysGroupedByLayerKey, areaRelationsDataSourceKeysGroupedByLayerKey,  spatialData) => {\n\t\tlet dataSourceKeysGroupedByLayerKey = {};\n\t\tif (areaRelationsDataSourceKeysGroupedByLayerKey) {\n\t\t\tdataSourceKeysGroupedByLayerKey = {...dataSourceKeysGroupedByLayerKey, ...areaRelationsDataSourceKeysGroupedByLayerKey};\n\t\t}\n\n\t\tif (spatialRelationsDataSourceKeysGroupedByLayerKey) {\n\t\t\tdataSourceKeysGroupedByLayerKey = {...dataSourceKeysGroupedByLayerKey, ...spatialRelationsDataSourceKeysGroupedByLayerKey};\n\t\t}\n\n\t\tif (dataSourceKeysGroupedByLayerKey && !_.isEmpty(dataSources)) {\n\t\t\tlet dataSourcesGroupedByLayerKey = {};\n\t\t\t_.forIn(dataSourceKeysGroupedByLayerKey, (dataSourceKeysAndFidColumns, layerKey) => {\n\t\t\t\tdataSourcesGroupedByLayerKey[layerKey] = [];\n\t\t\t\t_.forEach(dataSourceKeysAndFidColumns, (dataSourceKeyAndFidColumn) => {\n\t\t\t\t\tif (dataSources[dataSourceKeyAndFidColumn.spatialDataSourceKey]) {\n\t\t\t\t\t\tlet finalDataSource = {...dataSources[dataSourceKeyAndFidColumn.spatialDataSourceKey]};\n\n\t\t\t\t\t\tconst data = spatialData[dataSourceKeyAndFidColumn.spatialDataSourceKey];\n\t\t\t\t\t\tif (data && data.spatialData && data.spatialData.features) {\n\t\t\t\t\t\t\tfinalDataSource.data.features = data.spatialData.features;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataSourcesGroupedByLayerKey[layerKey].push({\n\t\t\t\t\t\t\tdataSource: finalDataSource,\n\t\t\t\t\t\t\tfidColumnName: dataSourceKeyAndFidColumn.fidColumnName\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn dataSourcesGroupedByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, layers) => JSON.stringify(layers)\n);\n\n\n/**************************************************\n DEPRECATED\n **************************************************/\n\n/**\n * Collect and prepare data sources grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getFilteredGroupedByLayerKey = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tSpatialRelations.getDataSourceKeysGroupedByLayerKey,\n\t\tSpatialRelations.getDataSourceRelationsGroupedByLayerKey,\n\t],\n\n\t/**\n\t * @param dataSources {null | Object} all available data sources\n\t * @param groupedKeys {null | Object} Data sources keys grouped by layer key\n\t * @return {null | Object} Data sources grouped by layer key\n\t */\n\t(dataSources, groupedKeys, groupedRelations) => {\n\t\tif (groupedKeys && Object.keys(dataSources).length) {\n\t\t\tlet groupedSources = {};\n\t\t\t_.forIn(groupedKeys, (keys, layerKey) => {\n\t\t\t\tlet sources = [];\n\t\t\t\tkeys.forEach(key => {\n\t\t\t\t\tif (key && dataSources && !_.isEmpty(dataSources) && dataSources[key] && !_.isEmpty(groupedRelations) && groupedRelations[layerKey]) {\n\t\t\t\t\t\tsources.push({...dataSources[key], spatialRelationData: _.find(groupedRelations[layerKey], o => o.spatialDataSourceKey === key) || null});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsources.push(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgroupedSources[layerKey] = sources;\n\t\t\t});\n\t\t\treturn groupedSources;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param filter {Object}\n * @returns {Array|null}\n */\nconst getFilteredData = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\t(state, filter) => filter\n\t],\n\t(spatialDataSources, filter) => {\n\t\tif (spatialDataSources && spatialDataSources.length > 0 && filter && !_.isEmpty(filter)) {\n\t\t\treturn _.filter(spatialDataSources, filter);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetSubstate,\n\n\tgetByKey,\n\tgetByKeys,\n\tgetFilteredSourcesGroupedByLayerKey,\n\n\t// Deprecated\n\tgetFilteredGroupedByLayerKey,\n\tgetFilteredData,\n\tvector: vectorSelectors\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\nimport common from \"../_common/selectors\";\nimport createCachedSelector from \"re-reselect\";\n\nconst getSubstate = (state) => state.attributeRelations;\n\nconst getAll = common.getAll(getSubstate);\nconst getIndexed = common.getIndexed(getSubstate);\n\nconst getFilteredDataSourceKeysWithFidColumn = createCachedSelector(\n\t[\n\t\tgetAll,\n\t\t(state, filter) => filter\n\t],\n\t(relations, filter) => {\n\t\tif (relations && relations.length) {\n\t\t\t// TODO more sophisticated filtering\n\t\t\tconst attributeKeys = filter.attributeKey.in || [filter.attributeKey];\n\t\t\tconst filterWithoutAttributes = _.omit(filter, 'attributeKey');\n\t\t\tlet preFilteredRelations = _.filter(relations, {'data': filterWithoutAttributes});\n\t\t\tlet filteredRelations = _.filter(preFilteredRelations, (relation) => {\n\t\t\t\tif (relation.data.attributeKey) {\n\t\t\t\t\treturn !!_.includes(attributeKeys, relation.data.attributeKey);\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (filteredRelations.length) {\n\t\t\t\treturn filteredRelations.map(relation => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tattributeDataSourceKey: relation.data.attributeDataSourceKey,\n\t\t\t\t\t\tattributeKey: relation.data.attributeKey,\n\t\t\t\t\t\tperiodKey: relation.data.periodKey,\n\t\t\t\t\t\tfidColumnName: relation.data.fidColumnName\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, filter) => {return JSON.stringify(filter)}\n);\n\nconst getFilteredDataSourceKeysWithFidColumnGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAll,\n\t\t(state, layersWithFilter) => layersWithFilter,\n\t\t(state, layersWithFilter, layersState) => layersState\n\t],\n\t(relations, layersWithFilter, layersState) => {\n\t\tif (relations && relations.length) {\n\t\t\tlet filteredGroupedByLayerKey = {};\n\n\t\t\t_.forEach(layersWithFilter, (layer) => {\n\t\t\t\tlet layerState = _.find(layersState, {key: layer.key});\n\t\t\t\tlet attributeKeys = layerState.attributeKeys;\n\t\t\t\tif (attributeKeys) {\n\n\t\t\t\t\t// TODO more sophisticated filtering\n\t\t\t\t\tlet preFilteredRelations = _.filter(relations, {'data': layer.attributeFilter});\n\t\t\t\t\tlet filteredRelations = _.filter(preFilteredRelations, (relation) => {\n\t\t\t\t\t\tif (relation.data.attributeKey) {\n\t\t\t\t\t\t\treturn !!_.includes(attributeKeys, relation.data.attributeKey);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (filteredRelations.length) {\n\t\t\t\t\t\tfilteredGroupedByLayerKey[layer.key] = filteredRelations.map(relation => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tattributeDataSourceKey: relation.data.attributeDataSourceKey,\n\t\t\t\t\t\t\t\tattributeKey: relation.data.attributeKey,\n\t\t\t\t\t\t\t\tfidColumnName: relation.data.fidColumnName\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn !_.isEmpty(filteredGroupedByLayerKey) ? filteredGroupedByLayerKey : null;\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, layersWithFilter, layersState, layersStateAsString) => layersStateAsString\n);\n\n// DEPRECATED ---------------------\n\nconst getAllData = createSelector(\n\t[getAll],\n\t(relations) => {\n\t\tif (relations) {\n\t\t\treturn _.map(relations, relation => relation.data);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param filter {Object}\n */\nconst getFiltered = createSelector(\n\t[\n\t\tgetAllData,\n\t\t(state, filter) => filter\n\t],\n\t(relations, filter) => {\n\t\tif (relations && relations.length > 0 && filter && !_.isEmpty(filter)) {\n\t\t\treturn _.filter(relations, filter);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst getFilteredRelations = createCachedSelector(\n\t[\n\t\tgetAllData,\n\t\t(state, filter) => filter\n\t],\n\t(relations, filter) => {\n\t\tif (relations && relations.length > 0 && filter && !_.isEmpty(filter)) {\n\t\t\treturn _.filter(relations, (relation) => {\n\t\t\t\tlet fitsFilter = true;\n\t\t\t\t_.forIn(filter, (value, key) => {\n\t\t\t\t\tif (relation.hasOwnProperty(key)){\n\t\t\t\t\t\tif (_.isObject(value) && value.in && _.isArray(value.in)){\n\t\t\t\t\t\t\tif (!_.includes(value.in, relation[key])){\n\t\t\t\t\t\t\t\tfitsFilter = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (relation[key] !== value){\n\t\t\t\t\t\t\tfitsFilter = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn fitsFilter;\n\t\t\t});\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, filter, cacheKey) => {\n\tif (cacheKey) {\n\t\treturn JSON.stringify(filter) + ':' + JSON.stringify(cacheKey)\n\t} else {\n\t\treturn JSON.stringify(filter);\n\t}\n});\n\nconst getDataSourcesFromFilteredRelations = createCachedSelector(\n\t[\n\t\tgetFilteredRelations\n\t],\n\t(filteredRelations) => {\n\t\tif (filteredRelations) {\n\t\t\treturn filteredRelations.map(relation => {\n\t\t\t\treturn {\n\t\t\t\t\tattributeDataSourceKey: relation.attributeDataSourceKey,\n\t\t\t\t\tfidColumnName: relation.fidColumnName\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn null\n\t\t}\n\t}\n)((state, filter, cacheKey) => {\n\treturn `${JSON.stringify(filter)}:${JSON.stringify(cacheKey)}`\n});\n\n/**\n * @param state {Object}\n * @param filter {Object}\n * \n * filter\n * {\n * \tlayerTemplateKey\n *\tscopeKey\n *\tperiodKey\n *\tcaseKey\n *\tscenarioKey\n *\tplaceKey\n *\tattributeKey\n * }\n */\nconst getDataSourceKeyFiltered = createSelector(\n\t[getFiltered],\n\t(filteredRelations) => {\n\t\tif(filteredRelations && !_.isEmpty(filteredRelations)) {\n\t\t\t//relation is only for one data, so return first\n\t\t\treturn filteredRelations[0].dataSourceKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t\t// if (filteredRelations && filteredRelations.length) {\n\t\t// \treturn _.find(filteredRelations, relation => relation.dataSourceKey);\n\t\t// } else {\n\t\t// \treturn null;\n\t\t// }\n\t}\n);\n\n\n/**\n * Collect and prepare relations for given filters grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getFilteredDataGroupedByLayerKey = createSelector(\n\t[\n\t\tgetAllData,\n\t\t(state, layers) => layers\n\t],\n\t/**\n\t * @param relations {Array | null} list of all relations data\n\t * @param layers {Array | null}\n\t * @return {Object | null} Selected relations grouped by layer key\n\t */\n\t(relations, layers) => {\n\t\tif (layers && !_.isEmpty(layers)) {\n\t\t\tlet groupedRelations = {};\n\t\t\tlayers.forEach(layer => {\n\t\t\t\tif (layer.data && layer.data.key) {\n\t\t\t\t\tif (relations) {\n\t\t\t\t\t\tlet filteredRelations = _.filter(relations, layer.filter);\n\t\t\t\t\t\tif (!_.isEmpty(filteredRelations)) {\n\t\t\t\t\t\t\tgroupedRelations[layer.data.key] = filteredRelations;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tgroupedRelations[layer.data.key] = [null];\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgroupedRelations[layer.data.key] = [null];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn !_.isEmpty(groupedRelations) ? groupedRelations : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n/**\n * Collect and prepare data relations grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getDataSourceRelationsGroupedByLayerKey = createSelector(\n\t[getFilteredDataGroupedByLayerKey],\n\n\t/**\n\t * @param groupedRelations {null | Object} Relations grouped by layer key\n\t * @return {null | Object} Data sources keys grouped by layer key\n\t */\n\t(groupedRelations) => {\n\t\tif (groupedRelations) {\n\t\t\tlet groupedDataSourceKeys = {};\n\t\t\t_.forIn(groupedRelations, (relationsData, layerKey) => {\n\t\t\t\tgroupedDataSourceKeys[layerKey] = relationsData;\n\t\t\t});\n\t\t\treturn !_.isEmpty(groupedDataSourceKeys) ? groupedDataSourceKeys : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n/**\n * Collect and prepare data sources keys grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array | null} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getDataSourceKeysGroupedByLayerKey = createSelector(\n\t[getDataSourceRelationsGroupedByLayerKey],\n\n\t/**\n\t * @param groupedRelations {null | Object} Relations grouped by layer key\n\t * @return {null | Object} Data sources keys grouped by layer key\n\t */\n\t(groupedRelations) => {\n\t\tif (groupedRelations) {\n\t\t\tconst groupedRelationsDataSource = {};\n\t\t\tfor (const [key, value] of Object.entries(groupedRelations)) {\n\t\t\t\tgroupedRelationsDataSource[key] = value.map(r => r ? r.attributeDataSourceKey : null);\n\t\t\t}\n\t\t\treturn groupedRelationsDataSource;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetFilteredDataSourceKeysWithFidColumn,\n\tgetFilteredDataSourceKeysWithFidColumnGroupedByLayerKey,\n\tgetIndexed,\n\n\n\tgetAllData,\n\tgetDataSourceKeyFiltered,\n\tgetFiltered,\n\tgetFilteredRelations,\n\tgetFilteredDataGroupedByLayerKey,\n\tgetDataSourceRelationsGroupedByLayerKey,\n\tgetDataSourceKeysGroupedByLayerKey,\n\tgetDataSourcesFromFilteredRelations,\n\n\tgetSubstate\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from 're-reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\nimport AttributeRelations from \"../AttributeRelations/selectors\";\n\nconst getSubstate = (state) => state.attributeData;\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getBatchByFilterOrder = common.getBatchByFilterOrder(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\n\n// DEPRECATED -------------------------------------------\n\n/**\n * Collect and prepare data sources grouped by layer key\n *\n * @param state {Object}\n * @param filter {Object}\n *\t @param attributeKey {string}\n *\t @param scopeKey {string}\n *\t @param periodKey {string}\n *\t @param caseKey {string}\n *\t @param scenarioKey {string}\n *\t @param placeKey {string}\n */\nconst getFiltered = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getDataSourceKeyFiltered\n\t],\n\n\t/**\n\t * @param dataSources {null | Object} all available data sources\n\t * @param dataSourceKey {String} Data sources key\n\t * @return {null | Object} Data source\n\t */\n\t(dataSources, dataSourceKey) => {\n\t\tif (dataSourceKey && dataSources && !_.isEmpty(dataSources) && dataSources[dataSourceKey]) {\n\t\t\treturn dataSources[dataSourceKey];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst getFilteredGroupedByFid = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getDataSourcesFromFilteredRelations\n\t],\n\t(allDataSources, filtered) => {\n\t\tif (allDataSources && !_.isEmpty(allDataSources) && filtered) {\n\n\t\t\tlet data = {};\n\t\t\t_.map(filtered, filteredSource => {\n\t\t\t\tlet source = allDataSources[filteredSource.attributeDataSourceKey];\n\t\t\t\tlet keySource = filteredSource.fidColumnName;\n\t\t\t\tlet nameSource = filteredSource.fidColumnName;\n\n\t\t\t\tif (source && source.attributeData && source.attributeData.features) {\n\t\t\t\t\tlet features = source.attributeData.features;\n\t\t\t\t\t_.map(features, (feature) => {\n\t\t\t\t\t\tlet key = feature.properties[keySource];\n\t\t\t\t\t\tlet {[keySource]: keyName, ...props} = feature.properties;\n\n\t\t\t\t\t\tlet values = [];\n\t\t\t\t\t\tlet existingKey = data[key];\n\n\t\t\t\t\t\t_.map(props, (value, key) => {\n\t\t\t\t\t\t\tif (existingKey) {\n\t\t\t\t\t\t\t\texistingKey.data.values.push({key, value});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalues.push({key, value});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (!existingKey) {\n\t\t\t\t\t\t\tdata[key] = {\n\t\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tname: feature.properties[nameSource],\n\t\t\t\t\t\t\t\t\tvalues\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn _.values(data);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, mergedFilter) => {\n\treturn `${JSON.stringify(mergedFilter)}`;\n}\n);\n\nconst getNamesByFid = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getDataSourcesFromFilteredRelations\n\t],\n\t(allDataSources, filtered) => {\n\t\tif (allDataSources && !_.isEmpty(allDataSources) && filtered) {\n\t\t\tlet data = {};\n\t\t\tif (filtered.length === 1) {\n\t\t\t\tlet filteredSource = filtered[0];\n\t\t\t\tlet source = allDataSources[filteredSource.attributeDataSourceKey];\n\t\t\t\tlet keySource = filteredSource.fidColumnName;\n\n\t\t\t\tif (source && source.attributeData && source.attributeData.features) {\n\t\t\t\t\tlet features = source.attributeData.features;\n\t\t\t\t\t_.map(features, (feature) => {\n\t\t\t\t\t\tlet key = feature.properties[keySource];\n\t\t\t\t\t\tlet {[keySource]: keyName, ...props} = feature.properties;\n\n\t\t\t\t\t\tdata[key] = {\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: _.values(props)[0]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn _.values(data);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, filter, cacheKey) => {\n\t\treturn `${JSON.stringify(filter)}:${JSON.stringify(cacheKey)}`;\n\t}\n);\n\n\n/**\n * Collect and prepare data sources grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getFilteredGroupedByLayerKey = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getDataSourceKeysGroupedByLayerKey,\n\t\tAttributeRelations.getDataSourceRelationsGroupedByLayerKey,\n\t],\n\n\t/**\n\t * @param dataSources {null | Object} all available data sources\n\t * @param groupedKeys {null | Object} Data sources keys grouped by layer key\n\t * @return {null | Object} Data sources grouped by layer key\n\t */\n\t(dataSources, groupedKeys, groupedRelations) => {\n\t\tif (groupedKeys) {\n\t\t\tlet groupedSources = {};\n\t\t\t_.forIn(groupedKeys, (keys, layerKey) => {\n\t\t\t\tlet sources = [];\n\t\t\t\t_.map(keys,key => {\n\t\t\t\t\tif (key && dataSources && !_.isEmpty(dataSources) && dataSources[key] && !_.isEmpty(groupedRelations) && groupedRelations[layerKey]) {\n\t\t\t\t\t\tsources.push({...dataSources[key], attributeRelationData: _.find(groupedRelations[layerKey], o => o.attributeDataSourceKey === key) || null});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsources.push(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgroupedSources[layerKey] = sources;\n\t\t\t});\n\t\t\treturn groupedSources;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetSubstate,\n\tgetAllAsObject,\n\tgetByKey,\n\tgetFiltered,\n\tgetBatchByFilterOrder,\n\tgetFilteredGroupedByLayerKey,\n\n\tgetFilteredGroupedByFid,\n\tgetNamesByFid,\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\nimport AttributeData from \"../AttributeData/selectors\";\nimport AttributeRelations from \"../AttributeRelations/selectors\";\nimport createCachedSelector from \"re-reselect\";\n\nconst getSubstate = (state) => state.attributeDataSources;\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getBatchByFilterOrder = common.getBatchByFilterOrder(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\n\nconst getFilteredDataSources = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getFilteredDataSourceKeysWithFidColumn,\n\t\tAttributeData.getAllAsObject,\n\t\t(state, filter) => filter\n\t],\n\t(dataSources, dataSourcesWithFidColumn, attributeData, filter) => {\n\t\tif (!_.isEmpty(dataSourcesWithFidColumn) && attributeData && dataSources) {\n\t\t\tlet finalDataSources = [];\n\t\t\t_.forEach(dataSourcesWithFidColumn, dataSourceWithFidColumn => {\n\t\t\t\tconst key = dataSourceWithFidColumn.attributeDataSourceKey;\n\t\t\t\tlet finalDataSource = {\n\t\t\t\t\t...dataSources[key]\n\t\t\t\t};\n\n\t\t\t\tconst data = attributeData[key];\n\t\t\t\tif (data && data.attributeData && data.attributeData.features) {\n\t\t\t\t\tfinalDataSource.data.features = data.attributeData.features.map(feature => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t[dataSourceWithFidColumn.attributeKey]: feature.properties[finalDataSource.data.columnName],\n\t\t\t\t\t\t\t\t[dataSourceWithFidColumn.fidColumnName]: feature.properties[dataSourceWithFidColumn.fidColumnName]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfinalDataSources.push({\n\t\t\t\t\tdataSource: finalDataSource,\n\t\t\t\t\tattributeKey: dataSourceWithFidColumn.attributeKey,\n\t\t\t\t\tperiodKey: dataSourceWithFidColumn.periodKey,\n\t\t\t\t\tfidColumnName: dataSourceWithFidColumn.fidColumnName\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn finalDataSources.length ? finalDataSources : null;\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, filter) => JSON.stringify(filter));\n\nconst getFilteredDataSourcesGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tAttributeRelations.getFilteredDataSourceKeysWithFidColumnGroupedByLayerKey,\n\t\tgetAllAsObject,\n\t\tAttributeData.getAllAsObject,\n\t\t(state, layersWithFilter, layersState) => layersState\n\t],\n\t(dataSourcesDataByLayerKey, dataSources, attributeData, layersState) => {\n\t\tif (dataSourcesDataByLayerKey && !_.isEmpty(dataSources)) {\n\t\t\tlet dataSourcesGroupedByLayerKey = {};\n\t\t\t_.forIn(dataSourcesDataByLayerKey, (dataSourceKeysAndFidColumns, layerKey) => {\n\t\t\t\tdataSourcesGroupedByLayerKey[layerKey] = [];\n\t\t\t\t_.forEach(dataSourceKeysAndFidColumns, (dataSourceKeyAndFidColumn) => {\n\t\t\t\t\tif (dataSources[dataSourceKeyAndFidColumn.attributeDataSourceKey]) {\n\t\t\t\t\t\tlet finalDataSource = {...dataSources[dataSourceKeyAndFidColumn.attributeDataSourceKey]};\n\t\t\t\t\t\tconst data = attributeData[dataSourceKeyAndFidColumn.attributeDataSourceKey];\n\t\t\t\t\t\tif (data && data.attributeData && data.attributeData.features) {\n\t\t\t\t\t\t\tfinalDataSource.data.features = data.attributeData.features.map(feature => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t[dataSourceKeyAndFidColumn.attributeKey]: feature.properties[finalDataSource.data.columnName],\n\t\t\t\t\t\t\t\t\t\t[dataSourceKeyAndFidColumn.fidColumnName]: feature.properties[dataSourceKeyAndFidColumn.fidColumnName]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataSourcesGroupedByLayerKey[layerKey].push({\n\t\t\t\t\t\t\tdataSource: finalDataSource,\n\t\t\t\t\t\t\tattributeKey: dataSourceKeyAndFidColumn.attributeKey,\n\t\t\t\t\t\t\tfidColumnName: dataSourceKeyAndFidColumn.fidColumnName\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn dataSourcesGroupedByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, layersWithFilter, layersState, layersStateAsString) => layersStateAsString\n);\n\n\n/**\n * Collect and prepare data sources grouped by layer key\n *\n * @param state {Object}\n * @param filter {Object}\n *\t @param attributeKey {string}\n *\t @param scopeKey {string}\n *\t @param periodKey {string}\n *\t @param caseKey {string}\n *\t @param scenarioKey {string}\n *\t @param placeKey {string}\n */\nconst getFiltered = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getDataSourceKeyFiltered\n\t],\n\n\t/**\n\t * @param dataSources {null | Object} all available data sources\n\t * @param dataSourceKey {String} Data sources key\n\t * @return {null | Object} Data source\n\t */\n\t(dataSources, dataSourceKey) => {\n\t\tif (dataSourceKey && dataSources && !_.isEmpty(dataSources) && dataSources[dataSourceKey]) {\n\t\t\treturn dataSources[dataSourceKey];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n/**\n * Collect and prepare data sources grouped by layer key\n *\n * @param state {Object}\n * @param layers {Array} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getFilteredGroupedByLayerKey = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tAttributeRelations.getDataSourceKeysGroupedByLayerKey,\n\t\tAttributeRelations.getDataSourceRelationsGroupedByLayerKey,\n\t],\n\n\t/**\n\t * @param dataSources {null | Object} all available data sources\n\t * @param groupedKeys {null | Object} Data sources keys grouped by layer key\n\t * @return {null | Object} Data sources grouped by layer key\n\t */\n\t(dataSources, groupedKeys, groupedRelations) => {\n\t\tif (groupedKeys) {\n\t\t\tlet groupedSources = {};\n\t\t\t_.forIn(groupedKeys, (keys, layerKey) => {\n\t\t\t\tlet sources = [];\n\t\t\t\t_.map(keys, key => {\n\t\t\t\t\tif (key && dataSources && !_.isEmpty(dataSources) && dataSources[key] && !_.isEmpty(groupedRelations) && groupedRelations[layerKey]) {\n\t\t\t\t\t\tsources.push({...dataSources[key], attributeRelationData: _.find(groupedRelations[layerKey], o => o.attributeDataSourceKey === key) || null});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsources.push(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tgroupedSources[layerKey] = sources;\n\t\t\t});\n\t\t\treturn groupedSources;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetSubstate,\n\tgetFilteredDataSources,\n\tgetFilteredDataSourcesGroupedByLayerKey,\n\n\n\tgetFiltered,\n\tgetBatchByFilterOrder,\n\tgetFilteredGroupedByLayerKey,\n\tgetByKey,\n\tgetByKeys,\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nconst getKey = state => state.app.key;\nconst getCompleteConfiguration = state => state.app.configuration;\nconst getCompleteLocalConfiguration = state => state.app.localConfiguration;\n\nconst getConfiguration = createSelector(\n\t[\n\t\tgetCompleteConfiguration,\n\t\t(state, path) => path,\n\t],\n\t(configuration, path) => _.get(configuration, path, null)\n);\n\nconst getLocalConfiguration = createSelector(\n\t[\n\t\tgetCompleteLocalConfiguration,\n\t\t(state, path) => path,\n\t],\n\t(localConfiguration, path) => _.get(localConfiguration, path, null)\n);\n\nexport default {\n\tgetKey,\n\tgetConfiguration,\n\tgetCompleteConfiguration,\n\tgetLocalConfiguration,\n\tgetCompleteLocalConfiguration\n};","import _ from 'lodash';\n\nimport common from \"../_common/selectors\";\nimport createCachedSelector from \"re-reselect\";\nimport {createObserver as createRecomputeObserver, createSelector as createRecomputeSelector} from '@jvitela/recompute';\n\nconst getSubstate = state => state.styles;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\n\nconst getByKeyObserver = createRecomputeObserver(getByKey);\n\nconst getDefinitionByKey = createRecomputeSelector((key) => {\n\tconst style = getByKeyObserver(key);\n\treturn style?.data?.definition || null;\n});\n\nconst getGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\t(state, layersState) => layersState\n\t],\n\t(styles, layersState) => {\n\t\tif (styles && !_.isEmpty(styles) && layersState) {\n\t\t\tlet stylesByLayerKey = {};\n\t\t\tlayersState.forEach(layer => {\n\t\t\t\tif (layer.styleKey) {\n\t\t\t\t\tstylesByLayerKey[layer.key] = styles[layer.styleKey];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn stylesByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, layerState, layersStateAsString) => layersStateAsString);\n\nexport default {\n\tgetAll,\n\tgetAllAsObject,\n\tgetByKey,\n\tgetDefinitionByKey,\n\tgetIndexed: common.getIndexed(getSubstate),\n\n\tgetGroupedByLayerKey,\n\tgetSubstate\n};","import _ from \"lodash\";\nimport common from \"../_common/selectors\";\nimport StyleSelectors from \"../Styles/selectors\";\nimport {createSelector} from \"reselect\";\nimport {createSelector as createRecomputeSelector, createObserver as createRecomputeObserver} from '@jvitela/recompute';\n\nconst getSubstate = state => state.selections;\nconst getActive = common.getActive(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAll = common.getAll(getSubstate);\n\nconst getAllAsObjectWithStyles = createSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tStyleSelectors.getAllAsObject\n\t],\n\t(selections, allStyles) => {\n\t\tif (selections) {\n\t\t\tif (allStyles) {\n\t\t\t\tlet selectionsWithStyles = {};\n\t\t\t\t_.forIn(selections, (selection, key) => {\n\t\t\t\t\tconst styleKey = selection.data?.styleKey;\n\t\t\t\t\tif (styleKey && allStyles[styleKey]) {\n\t\t\t\t\t\tconst selectionStyle = allStyles[styleKey].data?.definition?.rules?.[0].styles?.[0]; // TODO get first style of first rule for now\n\t\t\t\t\t\tif (selectionStyle) {\n\t\t\t\t\t\t\tselectionsWithStyles[key] = {\n\t\t\t\t\t\t\t\t...selection,\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t...selection.data,\n\t\t\t\t\t\t\t\t\tstyle: selectionStyle\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tselectionsWithStyles[key] = selection;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tselectionsWithStyles[key] = selection;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn selectionsWithStyles;\n\t\t\t} else {\n\t\t\t\treturn selections;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst getByKeyObserver = createRecomputeObserver((state, key) => state.selections.byKey[key]);\n\nconst prepareSelectionByLayerStateSelected = createRecomputeSelector(\n\t(layerStateSelected) => {\n\t\tlet populatedSelections = {};\n\t\t_.forIn(layerStateSelected, (value, key) => {\n\t\t\tlet selection = getByKeyObserver(key);\n\t\t\tlet selectionData = selection?.data;\n\n\t\t\tif (selectionData) {\n\t\t\t\tconst style = selectionData.style;\n\t\t\t\tconst hoveredStyle = selectionData.hoveredStyle || style;\n\t\t\t\tconst color = selectionData.color;\n\t\t\t\tconst hoveredColor = selectionData.hoveredColor || color;\n\n\t\t\t\tif (selectionData.featureKeysFilter) {\n\t\t\t\t\tpopulatedSelections[key] = {keys: selectionData.featureKeysFilter.keys};\n\t\t\t\t\tif (style) {\n\t\t\t\t\t\tpopulatedSelections[key].style = style;\n\t\t\t\t\t\tpopulatedSelections[key].hoveredStyle = hoveredStyle;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpopulatedSelections[key].style = {\n\t\t\t\t\t\t\toutlineColor: color,\n\t\t\t\t\t\t\toutlineWidth: 2\n\t\t\t\t\t\t};\n\t\t\t\t\t\tpopulatedSelections[key].hoveredStyle = {\n\t\t\t\t\t\t\toutlineColor: hoveredColor,\n\t\t\t\t\t\t\toutlineWidth: 2\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//TODO other selection types\n\t\t\t}\n\t\t});\n\n\t\treturn populatedSelections;\n\t}\n);\n\nexport default {\n\tgetActiveKey,\n\tgetActive,\n\tgetAll,\n\tgetAllAsObject,\n\n\tgetAllAsObjectWithStyles,\n\n\tprepareSelectionByLayerStateSelected\n}","import createCachedSelector from 're-reselect';\nimport _ from 'lodash';\nimport moment from \"moment\";\n\nimport common from \"../_common/selectors\";\nimport attributeRelationsSelectors from \"../AttributeRelations/selectors\";\nimport SpatialRelations from \"../SpatialRelations/selectors\";\n\nconst getSubstate = state => state.periods;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAllForActiveScope = common.getAllForActiveScope(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActiveKeys = common.getActiveKeys(getSubstate);\nconst getActiveModels = common.getActiveModels(getSubstate);\n\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\n\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\nconst getIndexed = common.getIndexed(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\nconst getKeysByAttributeRelations = createCachedSelector(\n\t[attributeRelationsSelectors.getFilteredRelations],\n\t(filteredRelations) => {\n\t\tif (filteredRelations) {\n\t\t\treturn _.map(filteredRelations, relation => relation.periodKey);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, filter, cacheKey) => {\n\treturn JSON.stringify(filter) + ':' + JSON.stringify(cacheKey)\n});\n\n/**\n * Both start and end time must be defined, otherwise all available periods are returned.\n */\nconst getByFullPeriodAsObject = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\t(state, start) => start,\n\t\t(state, start, end) => end\n\t],\n\t(periods, start, end) => {\n\t\tif (periods && start && end) {\n\t\t\treturn _.pickBy(periods, (period) => {\n\t\t\t\tconst periodStart = period.data && period.data.start;\n\t\t\t\tconst periodEnd = period.data && period.data.end;\n\n\t\t\t\tif (periodStart && periodEnd) {\n\t\t\t\t\treturn moment(periodStart).isBetween(start, end, null, '[]')\n\t\t\t\t\t\t&& moment(periodEnd).isBetween(start, end, null, '[]');\n\t\t\t\t} else if (periodStart) {\n\t\t\t\t\treturn moment(periodStart).isBetween(start, end, null, '[]');\n\t\t\t\t} else if (periodEnd) {\n\t\t\t\t\treturn moment(periodEnd).isBetween(start, end, null, '[]');\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\treturn periods;\n\t\t}\n\t}\n)((state, start, end) => `${start}_${end}`);\n\nconst getFilteredGroupedByLayerTemplateKey = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tSpatialRelations.getFilteredDataGroupedByLayerTemplateKey,\n\t\t(state, layersState) => layersState\n\t],\n\t(periods, spatialRelationsDataGroupedByLayerTemplateKey, layersState) => {\n\t\tif (periods && !_.isEmpty(periods) && spatialRelationsDataGroupedByLayerTemplateKey && !_.isEmpty(spatialRelationsDataGroupedByLayerTemplateKey) && layersState) {\n\t\t\tconst periodsByLayerKey = {};\n\t\t\tfor (const [layerTemplateKey, spatialRelations] of Object.entries(spatialRelationsDataGroupedByLayerTemplateKey)) {\n\t\t\t\tperiodsByLayerKey[layerTemplateKey] = spatialRelations.map(spatialRelation => {\n\t\t\t\t\tif(periods[spatialRelation.data.periodKey]) {\n\t\t\t\t\t\treturn periods[spatialRelation.data.periodKey];\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tperiodsByLayerKey[layerTemplateKey].filter(i => i); //filter empty\n\t\t\t}\n\t\t\treturn periodsByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, layersState) => layersState.map(l => l.filter && l.filter.layerTemplateKey).join(','));\n\nconst getFilteredGroupedByLayerKey = createCachedSelector(\n\t[\n\t\tgetAllAsObject,\n\t\tSpatialRelations.getFilteredDataGroupedByLayerKey,\n\t\t(state, layersState) => layersState\n\t],\n\t(periods, spatialRelationsDataGroupedByLayerKey, layersState) => {\n\t\tif (periods && !_.isEmpty(periods) && spatialRelationsDataGroupedByLayerKey && !_.isEmpty(spatialRelationsDataGroupedByLayerKey) && layersState) {\n\t\t\tconst periodsByLayerKey = {};\n\t\t\tfor (const [layerKey, spatialRelations] of Object.entries(spatialRelationsDataGroupedByLayerKey)) {\n\t\t\t\tperiodsByLayerKey[layerKey] = spatialRelations.map(spatialRelation => {\n\t\t\t\t\tif(periods[spatialRelation.periodKey]) {\n\t\t\t\t\t\treturn periods[spatialRelation.periodKey];\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tperiodsByLayerKey[layerKey].filter(i => i); //filter empty\n\t\t\t}\n\t\t\treturn periodsByLayerKey;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, layersState) => layersState.map(l => l.key).join(','));\n\nexport default {\n\tgetActive,\n\tgetActiveKey,\n\tgetActiveKeys,\n\tgetActiveModels,\n\tgetAll,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\n\tgetByKey,\n\tgetByKeys,\n\tgetByFullPeriodAsObject,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\tgetFilteredGroupedByLayerTemplateKey,\n\tgetFilteredGroupedByLayerKey,\n\tgetIndexed,\n\tgetKeysByAttributeRelations,\n\tgetUpdatePermissionByKey,\n\n\tgetSubstate,\n\n\t// TODO handle old selectors export\n\tgetActivePeriod: getActive,\n\tgetPeriods: getAll,\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from \"re-reselect\";\nimport _ from 'lodash';\nimport * as path from \"path\";\n\nimport {CacheFifo, map as mapUtils} from '@gisatcz/ptr-utils';\nimport mapHelpers from './helpers';\n\nimport commonSelectors from \"../_common/selectors\";\nimport LayerTemplatesSelectors from '../LayerTemplates/selectors';\nimport SpatialDataSourcesSelectors from '../SpatialDataSources/selectors';\nimport AttributeDataSelectors from '../AttributeData/selectors';\nimport AttributeDataSourcesSelectors from '../AttributeDataSources/selectors';\nimport AppSelectors from '../App/selectors';\n// import {mapConstants} from '@gisatcz/ptr-core';\nimport StylesSelectors from \"../Styles/selectors\";\nimport SelectionsSelectors from \"../Selections/selectors\";\nimport PeriodsSelectors from \"../Periods/selectors\";\nimport AppSelect from \"../App/selectors\";\n\nconst defaultMapView = {\n\tcenter: {\n\t\tlat: 50.099577,\n\t\tlon: 14.425960\n\t},\n\tboxRange: 10000000,\n\ttilt: 0,\n\troll: 0,\n\theading: 0\n};\n\nconst mapConstants = {defaultMapView};\n\nlet getBackgroundLayerCache = new CacheFifo(10);\nlet getLayersCache = new CacheFifo(10);\n\n/* ===== Basic selectors ==================== */\nconst getSubstate = state => state._deprecatedMaps;\n\nconst getMapsAsObject = state => state._deprecatedMaps.maps;\nconst getMapSetsAsObject = state => state._deprecatedMaps.sets;\n\nconst getActiveSetKey = state => state._deprecatedMaps.activeSetKey;\nconst getActiveMapKey = state => state._deprecatedMaps.activeMapKey;\n\nconst getActiveMap = createSelector(\n    [\n        getMapsAsObject,\n        getActiveMapKey\n    ],\n    (maps, activeKey) => {\n        if (maps && !_.isEmpty(maps) && activeKey && maps[activeKey]) {\n            return maps[activeKey];\n        } else {\n            return null;\n        }\n    }\n);\n\nconst getMaps = createSelector(\n\t[getMapsAsObject],\n\t(maps) => {\n\t\tif (maps && !_.isEmpty(maps)) {\n\t\t\treturn Object.values(maps);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst getMapSets = createSelector(\n\t[getMapSetsAsObject],\n\t(sets) => {\n\t\tif (sets && !_.isEmpty(sets)) {\n\t\t\treturn Object.values(sets);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapByKey = createCachedSelector(\n\t[getMapsAsObject,\n\t(state, key) => key],\n\t(maps, key) => {\n\t\tif (maps && !_.isEmpty(maps) && key) {\n\t\t\treturn maps[key] ? maps[key] : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, key) => key);\n\n\nconst getMapLayersByMapKey = createSelector(\n\t[getMapByKey],\n\t(map) => {\n\t\treturn map && map.data && map.data.layers || null;\n\t}\n);\n\n\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetByKey = createSelector(\n\t[getMapSetsAsObject,\n\t(state, key) => key],\n\t(sets, key) => {\n\t\tif (sets && !_.isEmpty(sets) && key) {\n\t\t\treturn sets[key] ? sets[key] : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetByMapKey = createSelector(\n\t[getMapSets,\n\t(state, mapKey) => (mapKey)],\n\t(sets, mapKey) => {\n\t\tif (sets && !_.isEmpty(sets) && mapKey) {\n\t\t\tlet setForMap = null;\n\t\t\tsets.forEach((set) => {\n\t\t\t\tif (set.maps && _.includes(set.maps, mapKey)) {\n\t\t\t\t\tsetForMap = set;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn setForMap;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetMapKeys = createSelector(\n\t[getMapSetByKey],\n\t(set) => {\n\t\tif (set && set.maps && set.maps.length) {\n\t\t\treturn set.maps;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapBackgroundLayerStateByMapKey = createSelector(\n\t[\n\t\tgetMapByKey\n\t],\n\t(map) => {\n\t\tif (map && map.data && map.data.backgroundLayer) {\n\t\t\treturn map.data.backgroundLayer;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapLayersStateByMapKey = createSelector(\n\t[\n\t\tgetMapByKey\n\t],\n\t(map) => {\n\t\tif (map && map.data && map.data.layers) {\n\t\t\treturn map.data.layers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapMetadataModifiersByMapKey = createSelector(\n\t[\n\t\tgetMapByKey\n\t],\n\t(map) => {\n\t\tif (map && map.data && map.data.metadataModifiers) {\n\t\t\treturn map.data.metadataModifiers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapFilterByActiveByMapKey = createSelector(\n\t[\n\t\tgetMapByKey\n\t],\n\t(map) => {\n\t\tif (map && map.data && map.data.filterByActive) {\n\t\t\treturn map.data.filterByActive;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetBackgroundLayerStateByMapKey = createSelector(\n\t[\n\t\tgetMapSetByMapKey\n\t],\n\t(set) => {\n\t\tif (set && set.data && set.data.backgroundLayer) {\n\t\t\treturn set.data.backgroundLayer;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetLayersStateByMapKey = createSelector(\n\t[\n\t\tgetMapSetByMapKey\n\t],\n\t(set) => {\n\t\tif (set && set.data && set.data.layers) {\n\t\t\treturn set.data.layers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetMetadataModifiersByMapKey = createSelector(\n\t[\n\t\tgetMapSetByMapKey\n\t],\n\t(set) => {\n\t\tif (set && set.data && set.data.metadataModifiers) {\n\t\t\treturn set.data.metadataModifiers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetFilterByActiveByMapKey = createSelector(\n\t[\n\t\tgetMapSetByMapKey\n\t],\n\t(set) => {\n\t\tif (set && set.data && set.data.filterByActive) {\n\t\t\treturn set.data.filterByActive;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapSetKey {string}\n */\nconst getMapSetLayersStateBySetKey = createSelector(\n\t[\n\t\tgetMapSetByKey\n\t],\n\t(set) => {\n\t\tif (set && set.data && set.data.layers) {\n\t\t\treturn set.data.layers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @param layerKey {string}\n */\nconst getMapLayerByMapKeyAndLayerKey = createSelector(\n\t[getMapLayersStateByMapKey, (state, mapKey, layerKey) => layerKey],\n\t(layers, layerKey) => {\n\t\tif (layers && layerKey) {\n\t\t\treturn layers.find(l => l.key === layerKey)\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n\n\n\n/* ===== Combined selectors ==================== */\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getFilterByActiveByMapKey = createCachedSelector(\n\t[\n\t\tgetMapFilterByActiveByMapKey,\n\t\tgetMapSetFilterByActiveByMapKey\n\t],\n\t(mapFilter, setFilter) => {\n\t\treturn (setFilter || mapFilter) && {...setFilter, ...mapFilter};\n\t}\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getBackgroundLayerStateByMapKey = createCachedSelector(\n\t[\n\t\tgetMapBackgroundLayerStateByMapKey,\n\t\tgetMapSetBackgroundLayerStateByMapKey,\n\t],\n\t(mapBackgroundLayer, setBackgroundLayer) => {\n\t\treturn mapBackgroundLayer || setBackgroundLayer;\n\t}\n)(\n\t(state, mapKey) => `${mapKey}`\n);\n\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @return {Object} Merged layer state from mapState and mapSetState with metadataModifiers and filterByActive.\n */\nconst getLayersStateByMapKey = createCachedSelector(\n\t[\n\t\tgetMapLayersStateByMapKey,\n\t\tgetMapSetLayersStateByMapKey,\n\t\tgetMapMetadataModifiersByMapKey,\n\t\tgetMapSetMetadataModifiersByMapKey,\n\t\tgetFilterByActiveByMapKey\n\t],\n\t(mapLayers, setLayers, mapMetadataModifiers, setMetadataModifiers, mapFilterByActive) => {\n\t\tif (mapLayers || setLayers) {\n\t\t\tlet layers = [...(setLayers || []), ...(mapLayers || [])];\n\t\t\tlet modifiers = {};\n\t\t\tif (setMetadataModifiers) {\n\t\t\t\tmodifiers = setMetadataModifiers;\n\t\t\t}\n\t\t\tmodifiers = {...modifiers, ...mapMetadataModifiers};\n\n\t\t\tlayers = layers.map(layer => {\n\t\t\t\tlet layerMetadataModifiers = layer.metadataModifiers ? {...modifiers, ...layer.metadataModifiers} : modifiers;\n\t\t\t\tlet layerFilterByActive = layer.filterByActive ? {...mapFilterByActive, ...layer.filterByActive} : mapFilterByActive;\n\n\t\t\t\treturn {...layer, metadataModifiers: layerMetadataModifiers, filterByActive: layerFilterByActive};\n\t\t\t});\n\n\t\t\t// TODO return error for duplicates?\n\t\t\treturn _.uniqBy(layers, 'key');\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, mapKey) => mapKey);\n\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getAllLayersStateByMapKey = createSelector(\n\t[\n\t\tgetBackgroundLayerStateByMapKey,\n\t\tgetLayersStateByMapKey\n\t],\n\t(backgroundLayer, layers) => {\n\t\tif (layers || backgroundLayer) {\n\t\t\tlayers = layers || [];\n\n\t\t\tif (backgroundLayer) {\n\t\t\t\t// TODO do not create new object for background layer on change in layers\n\t\t\t\tbackgroundLayer = {...backgroundLayer, key: 'pantherBackgroundLayer'};\n\t\t\t\treturn [backgroundLayer, ...layers];\n\t\t\t}\n\n\t\t\treturn layers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * Get active map key for set. Either local, or global.\n *\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetActiveMapKey = createSelector(\n\t[\n\t\tgetActiveMapKey,\n\t\tgetMapSetByKey\n\t],\n\t(mapKey, set) => {\n\t\tif (set) {\n\t\t\tlet mapKeyInSet = _.includes(set.maps, mapKey);\n\t\t\treturn set.activeMapKey || (mapKeyInSet && mapKey) || null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getView = createCachedSelector(\n\t[\n\t\tgetMapByKey,\n\t\tgetMapSetByMapKey\n\t],\n\t(map, set) => {\n\t\tif (map) {\n\t\t\tif (set) {\n\t\t\t\tlet mapView = map.data && map.data.view;\n\n\t\t\t\t// omit synced view params from map\n\t\t\t\tif (set.sync && !_.isEmpty(set.sync)) {\n\t\t\t\t\tmapView = _.omitBy(mapView, (viewValue, viewKey) => {\n\t\t\t\t\t\treturn set.sync[viewKey];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlet mapSetView = set.data && set.data.view;\n\t\t\t\tlet view = mapUtils.view.mergeViews(mapConstants.defaultMapView, mapSetView, mapView);\n\t\t\t\treturn !_.isEmpty(view) ? view : null;\n\t\t\t} else {\n\t\t\t\tlet view = map.data && map.data.view;\n\t\t\t\treturn mapUtils.view.mergeViews(mapConstants.defaultMapView, view);\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getViewLimits = createCachedSelector(\n\t[\n\t\tgetMapByKey,\n\t\tgetMapSetByMapKey\n\t],\n\t(map, set) => {\n\t\tif (map) {\n\t\t\tif (set) {\n\t\t\t\tlet mapViewLimits = map.data?.viewLimits;\n\t\t\t\tlet mapSetViewLimits = set.data?.viewLimits;\n\t\t\t\tlet viewLimits = mapUtils.view.mergeViews(mapSetViewLimits, mapViewLimits);\n\t\t\t\treturn !_.isEmpty(viewLimits) ? viewLimits : null;\n\t\t\t} else {\n\t\t\t\treturn map.data?.viewLimits;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetView = createSelector(\n\t[\n\t\tgetMapSetByKey\n\t],\n\t(set) => {\n\t\tif (set) {\n\t\t\tlet setView = set.data && set.data.view;\n\t\t\treturn mapUtils.view.mergeViews(mapConstants.defaultMapView, setView);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetViewLimits = createSelector(\n\t[\n\t\tgetMapSetByKey\n\t],\n\t(set) => {\n\t\treturn set?.data?.viewLimits || null;\n\t}\n);\n\nconst getMapSetActiveMapView = createSelector(\n\t[\n\t\tgetMapSetActiveMapKey,\n\t\tgetMapSetByKey,\n\t\tgetMapsAsObject\n\t],\n\t(mapKey, set, maps) => {\n\t\tlet map = maps[mapKey];\n\n\t\tif (map) {\n\t\t\tif (set) {\n\t\t\t\tlet mapView = map.data && map.data.view;\n\n\t\t\t\t// omit synced view params from map\n\t\t\t\tif (set.sync && !_.isEmpty(set.sync)) {\n\t\t\t\t\tmapView = _.omitBy(mapView, (viewValue, viewKey) => {\n\t\t\t\t\t\treturn set.sync[viewKey];\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlet mapSetView = set.data && set.data.view;\n\t\t\t\tlet view = mapUtils.view.mergeViews(mapConstants.defaultMapView, mapSetView, mapView);\n\t\t\t\treturn !_.isEmpty(view) ? view : null;\n\t\t\t} else {\n\t\t\t\tlet view = map.data && map.data.view;\n\t\t\t\treturn mapUtils.view.mergeViews(mapConstants.defaultMapView, view);\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n/* ===== Complex selectors ========================= */\n\n// TODO cache?\nconst getBackgroundLayer = (state, layerState) => {\n\tif (layerState) {\n\t\tif (layerState.type) {\n\t\t\t// TODO helper\n\t\t\treturn layerState;\n\t\t} else {\n\t\t\tlet layerKey = 'pantherBackgroundLayer';\n\t\t\t// TODO valid approach to stringify parameter?\n\t\t\tlet layersWithFilter = mapHelpers.getBackgroundLayersWithFilter(state, JSON.stringify(layerState), layerKey);\n\t\t\tlet dataSourcesByLayerKey = SpatialDataSourcesSelectors.getFilteredSourcesGroupedByLayerKey(state, layersWithFilter);\n\n\t\t\tif (dataSourcesByLayerKey && dataSourcesByLayerKey[layerKey]) {\n\n\t\t\t\t// TODO experimental\n\t\t\t\tlet cacheKey = JSON.stringify(layersWithFilter);\n\t\t\t\tlet cache = getBackgroundLayerCache.findByKey(cacheKey);\n\t\t\t\tlet layerDataSources = dataSourcesByLayerKey[layerKey];\n\t\t\t\t\n\t\t\t\tif (cache && cache.layersWithFilter === layersWithFilter && cache.layerDataSources === layerDataSources) {\n\t\t\t\t\treturn cache.mapLayers;\n\t\t\t\t} else {\n\t\t\t\t\tlet mapLayers =  _.map(dataSourcesByLayerKey[layerKey], (dataSourceWithFidColumn, index) => mapHelpers.prepareLayerByDataSourceType(layerKey, dataSourceWithFidColumn.dataSource, dataSourceWithFidColumn.fidColumnName, index));\n\n\t\t\t\t\tgetBackgroundLayerCache.addOrUpdate({\n\t\t\t\t\t\tcacheKey,\n\t\t\t\t\t\tlayersWithFilter,\n\t\t\t\t\t\tlayerDataSources,\n\t\t\t\t\t\tmapLayers\n\t\t\t\t\t});\n\n\t\t\t\t\treturn mapLayers;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n};\n\n// TODO cache?\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @return {Array}\n */\nconst getMapBackgroundLayer = (state, mapKey) => {\n\tlet layerState = getBackgroundLayerStateByMapKey(state, mapKey);\n\treturn getBackgroundLayer(state, layerState);\n};\n\n/**\n * Use this function for getting layer deffinition if layer is defined in state.\n * Check if dataSources for layerKey are loaded and defined otherwise return null.\n * Returns object that is input for Layer from @gisatcz/ptr-maps.\n * @param {Object} state App state\n * @param {Object} layerState Merged layer state from mapState and mapSetState with metadataModifiers and filterByActive.\n * @param {Object} dataSourcesByLayerKey dataSources related to layerState.key\n * @param {Object} attributeDataSourcesByLayerKey attributeDataSources related to layerState.key\n * @param {Object} stylesByLayerKey styles related to layerState.key\n * @param {Object} selections selections related to layerState.key\n * @param {Object} layerTemplatesByLayerKey layerTemplates related to layerState.key\n * @param {Object} periodsByLayerKey periods related to layerState.key\n */\nconst getLayerFromState = (state, layerState, dataSourcesByLayerKey, attributeDataSourcesByLayerKey, stylesByLayerKey, selections, layerTemplatesByLayerKey, periodsByLayerKey) => {\n\tlet layerKey = layerState.key;\n\tlet dataSources = dataSourcesByLayerKey[layerKey];\n\tlet attributeDataSources = attributeDataSourcesByLayerKey && attributeDataSourcesByLayerKey[layerKey];\n\tlet style = stylesByLayerKey && stylesByLayerKey[layerKey];\n\tlet layerTemplate = layerTemplatesByLayerKey && layerTemplatesByLayerKey[layerKey];\n\tlet period = periodsByLayerKey && periodsByLayerKey[layerKey];\n\tlet layer = null;\n\tif (dataSources && dataSources.length) {\n\t\tdataSources.forEach((dataSourceWithFidColumn, index) => {\n\t\t\tconst dataSource = dataSourceWithFidColumn && dataSourceWithFidColumn.dataSource;\n\t\t\tconst fidColumnName = dataSourceWithFidColumn && dataSourceWithFidColumn.fidColumnName;\n\n\t\t\t// TODO remove - quick solution for geoinv\n\t\t\tlet currentApp = AppSelectors.getKey(state);\n\t\t\tif (currentApp === 'tacrGeoinvaze') {\n\t\t\t\tconst apiGeoserverWMSProtocol = AppSelect.getLocalConfiguration(state, 'apiGeoserverWMSProtocol');\n\t\t\t\tconst apiGeoserverWMSHost = AppSelect.getLocalConfiguration(state, 'apiGeoserverWMSHost');\n\t\t\t\tconst apiGeoserverWMSPath = AppSelect.getLocalConfiguration(state, 'apiGeoserverWMSPath');\n\n\t\t\t\tif (dataSource && dataSource.data && dataSource.data.layerName && (dataSource.data.type === \"vector\" || dataSource.data.type === \"raster\")) {\n\t\t\t\t\tlayer = {\n\t\t\t\t\t\tkey: layerKey + '_' + dataSource.key,\n\t\t\t\t\t\tlayerKey: layerKey,\n\t\t\t\t\t\ttype: \"wms\",\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\turl: apiGeoserverWMSProtocol + \"://\" + path.join(apiGeoserverWMSHost, apiGeoserverWMSPath),\n\t\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\t\tlayers: dataSource.data.layerName\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tlayer = mapHelpers.prepareLayerByDataSourceType(layerKey, dataSource, fidColumnName, index);\n\t\t\t\t}\n\t\t\t} else if (dataSource && dataSource.data) {\n\t\t\t\tlayer = mapHelpers.prepareLayerByDataSourceType(layerKey, dataSource, fidColumnName, index, layerState, style, attributeDataSources, selections, layerTemplate, period);\n\t\t\t}\n\t\t});\n\t}\n\treturn layer;\n}\n\n// TODO caching is experimental\n/**\n * Returns Array of objects that is input for Layer from @gisatcz/ptr-maps.\n * @param {Object} state App state\n * @param {Array} layersState \n */\nconst getLayers = (state, layersState) => {\t\n\t// TODO valid approach to stringify parameter?\n\tconst layersStateAsString = JSON.stringify(mapHelpers.getLayersStateWithoutFeatures(layersState));\n\tlet layersWithFilter = mapHelpers.getLayersWithFilter(state, layersStateAsString);\n\n\tif (layersWithFilter && layersWithFilter.length) {\n\t\tlet dataSourcesByLayerKey = SpatialDataSourcesSelectors.getFilteredSourcesGroupedByLayerKey(state, layersWithFilter);\n\t\tlet layerTemplatesByLayerKey = LayerTemplatesSelectors.getFilteredTemplatesGroupedByLayerKey(state, layersWithFilter);\n\t\tlet attributeDataSourcesByLayerKey = AttributeDataSourcesSelectors.getFilteredDataSourcesGroupedByLayerKey(state, layersWithFilter, layersState, layersStateAsString);\n\t\tlet stylesByLayerKey = StylesSelectors.getGroupedByLayerKey(state, layersState, layersStateAsString);\n\t\tlet selections = SelectionsSelectors.getAllAsObjectWithStyles(state);\n\t\tlet periodsByLayerKey = PeriodsSelectors.getFilteredGroupedByLayerKey(state, layersWithFilter);\n\n\t\tlet cacheKey = JSON.stringify(layersWithFilter);\n\t\tlet cache = getLayersCache.findByKey(cacheKey);\n\t\tif (cache\n\t\t\t&& cache.layersWithFilter === layersWithFilter\n\t\t\t&& cache.dataSourcesByLayerKey === dataSourcesByLayerKey\n\t\t\t&& cache.layerTemplatesByLayerKey === layerTemplatesByLayerKey\n\t\t\t&& cache.stylesByLayerKey === stylesByLayerKey\n\t\t\t&& cache.attributeDataSourcesByLayerKey === attributeDataSourcesByLayerKey\n\t\t\t&& cache.selections === selections\n\t\t\t&& cache.periodsByLayerKey === periodsByLayerKey\n\t\t) {\n\t\t\treturn cache.mapLayers;\n\t\t} else {\n\t\t\tconst mapLayers = [];\n\t\t\tlayersState.forEach((layerState) => {\n\t\t\t\tif (layerState.layerTemplateKey && dataSourcesByLayerKey && !_.isEmpty(dataSourcesByLayerKey)) {\n\t\t\t\t\tconst layer = getLayerFromState(state, layerState, dataSourcesByLayerKey, attributeDataSourcesByLayerKey, stylesByLayerKey, selections, layerTemplatesByLayerKey, periodsByLayerKey);\n\t\t\t\t\tif(layer) {\n\t\t\t\t\t\tmapLayers.push(layer);\n\t\t\t\t\t}\n\t\t\t\t} else if(layerState.type) {\n\t\t\t\t\tconst layer = layerState.options?.selected ? {\n\t\t\t\t\t\t...layerState,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t...layerState.options,\n\t\t\t\t\t\t\tselected: mapHelpers.prepareSelection(selections, layerState.options.selected)\n\t\t\t\t\t\t}\n\t\t\t\t\t} : layerState;\n\t\t\t\t\tmapLayers.push(layer);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tgetLayersCache.addOrUpdate({\n\t\t\t\tcacheKey,\n\t\t\t\tlayersWithFilter,\n\t\t\t\tdataSourcesByLayerKey,\n\t\t\t\tlayerTemplatesByLayerKey,\n\t\t\t\tattributeDataSourcesByLayerKey,\n\t\t\t\tmapLayers,\n\t\t\t\tstylesByLayerKey,\n\t\t\t\tselections,\n\t\t\t\tperiodsByLayerKey\n\t\t\t});\n\n\t\t\treturn mapLayers;\n\t\t};\n\t} else {\n\t\treturn null;\n\t}\n}\n\n// TODO cache?\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @return {Array}\n */\nconst getMapLayers = (state, mapKey) => {\n\tlet layersState = getLayersStateByMapKey(state, mapKey);\n\treturn getLayers(state, layersState);\n};\n\n\n\n\n\n\n\n\n\n\n/* ===============================================\n   Deprecated\n   =============================================== */\n\nconst getMapByMetadata_deprecated = createSelector(\n\t[\n\t\tgetMaps,\n\t\t(state, metadata) => metadata\n\t],\n\t(maps, metadata) => {\n\t\tif (maps && metadata) {\n\t\t\tlet filtered =  _.filter(maps, (map) => {\n\t\t\t\tif (map.data && map.data.metadataModifiers) {\n\t\t\t\t\treturn _.isMatch(map.data.metadataModifiers, metadata);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (filtered && filtered.length) {\n\t\t\t\treturn filtered[0]; //TODO what if more maps are selected based on filter\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getNavigator_deprecated = createSelector(\n\t[getMapByKey,\n\t\tgetMapSetByMapKey],\n\t(map, set) => {\n\t\tif (map) {\n\t\t\tif (set) {\n\t\t\t\tlet mapNavigator = map.data && map.data.worldWindNavigator;\n\t\t\t\tlet mapSetNavigator = set.data && set.data.worldWindNavigator;\n\t\t\t\tlet navigator = {...mapSetNavigator, ...mapNavigator};\n\t\t\t\treturn !_.isEmpty(navigator) ? navigator : null;\n\t\t\t} else {\n\t\t\t\tlet navigator = map.data && map.data.worldWindNavigator;\n\t\t\t\treturn navigator && !_.isEmpty(navigator) ? navigator : null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst getMapSetNavigatorRange_deprecated = createSelector(\n\t[\n\t\tgetMapSetByKey\n\t],\n\t(set) => {\n\t\tif (set) {\n\t\t\treturn set.data && set.data.worldWindNavigator && set.data.worldWindNavigator.range;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n\n/**\n * Collect and prepare data for map component\n *\n * @param state {Object}\n * @param layers {Array} Collection of layers data. Each object in collection contains filter property (it is used for selecting of relations) and data property (which contains data about layer from map state - e.g. key).\n */\nconst getLayers_deprecated = createSelector(\n\t[\n\t\tSpatialDataSourcesSelectors.getFilteredGroupedByLayerKey,\n\t\tAttributeDataSelectors.getFilteredGroupedByLayerKey,\n\t\tAppSelectors.getCompleteLocalConfiguration,\n\t\t(state, layers) => (layers)\n\t],\n\t/**\n\t * @param groupedSources {null | Object} Data sources grouped by layer key\n\t * @param layers {null | Array}\n\t * @return {null | Array} Collection of layers data for map component\n\t */\n\t(groupedSpatialSources, groupedAttributeSources,localConfig, layers) => {\n\t\t// FIXME - more complex\n\t\tif (groupedSpatialSources && groupedAttributeSources && layers) {\n\t\t\treturn layers.map((layer) => getLayerConfiguration(localConfig, layer, groupedSpatialSources[layer.data.key], groupedAttributeSources[layer.data.key]));\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getBackgroundLayerStateByMapKey_deprecated = createSelector(\n\t[\n\t\tgetMapByKey,\n\t\tgetMapSetByMapKey,\n\t\tcommonSelectors.getAllActiveKeys\n\t],\n\t(map, set, activeKeys) => {\n\t\tlet layerTemplate = null;\n\t\tlet filter = {\n\t\t\tplace: null,\n\t\t\tperiod: null,\n\t\t\tcase: null,\n\t\t\tscenario: null\n\t\t};\n\t\tif (map && map.data && map.data.backgroundLayer) {\n\t\t\tlayerTemplate = map.data.backgroundLayer;\n\t\t} else if (set && set.data && set.data.backgroundLayer) {\n\t\t\tlayerTemplate = set.data.backgroundLayer;\n\t\t}\n\n\t\tif (layerTemplate) {\n\t\t\treturn getFiltersForUse_deprecated({...filter, layerTemplate: layerTemplate.layerTemplate, key: layerTemplate.key}, activeKeys)\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getLayersStateByMapKey_deprecated = createSelector(\n\t[\n\t\tgetMapByKey,\n\t\tgetMapSetByMapKey,\n\t\tcommonSelectors.getAllActiveKeys,\n\t\t(state, mapKey, useActiveMetadataKeys) => useActiveMetadataKeys\n\t],\n\t(map, mapSet, activeKeys, useActiveMetadataKeys) => {\n\t\tlet setLayers = (mapSet && mapSet.data && mapSet.data.layers) || null;\n\t\tlet mapLayers = (map && map.data && map.data.layers) || null;\n\n\t\tif (map && (mapLayers || setLayers)) {\n\t\t\tlet layers = [...(setLayers || []), ...(mapLayers || [])];\n\t\t\tlet modifiers = {};\n\t\t\tif (mapSet) {\n\t\t\t\tlet a = mapSet.data.metadataModifiers;\n\t\t\t\tmodifiers = {...modifiers, ...mapSet.data.metadataModifiers};\n\t\t\t}\n\t\t\tmodifiers = {...modifiers, ...map.data.metadataModifiers};\n\n\t\t\tlayers = layers.map(layer => {\n\t\t\t\treturn getFiltersForUse_deprecated({...modifiers, ...layer}, activeKeys, useActiveMetadataKeys);\n\t\t\t});\n\n\t\t\treturn layers;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getAllLayersStateByMapKey_deprecated = createSelector(\n\t[\n\t\tgetLayersStateByMapKey_deprecated,\n\t\tgetBackgroundLayerStateByMapKey_deprecated\n\t],\n\t(layersState, backgroundLayerState) => {\n\t\tconst backgroundLayerData = backgroundLayerState ? [getLayerState(backgroundLayerState)] : [];\n\t\tconst layersData = layersState ? layersState.map(getLayerState) : [];\n\t\treturn new Array(...layersData, ...backgroundLayerData);\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapSetKey {string}\n * @returns {Array<Map> | null}\n */\nconst getMapsByMapSetKey_deprecated = createSelector(\n\t[\n\t\tgetMapsAsObject,\n\t\tgetMapSetMapKeys\n\t],\n\t(maps, mapSetMapsKeys) => {\n\t\tif (maps && !_.isEmpty(maps) && mapSetMapsKeys && !_.isEmpty(mapSetMapsKeys)) {\n\t\t\treturn mapSetMapsKeys.map(k => maps[k]);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\nconst getLayersStateByMapSetKey_deprecated = createSelector(\n\t[\n\t\tgetMapSetByKey,\n\t\tgetMapsByMapSetKey_deprecated,\n\t\tcommonSelectors.getAllActiveKeys,\n\t],\n\t(mapSet, maps, activeKeys) => {\n\t\tconst mapsLayersState = {};\n\t\tlet setLayers = (mapSet && mapSet.data && mapSet.data.layers) || null;\n\n\t\tif (maps) {\n\t\t\tmaps.forEach((map) => {\n\t\t\t\tlet mapLayers = (map && map.data && map.data.layers) || null;\n\t\t\t\tif (map && (mapLayers || setLayers)) {\n\t\t\t\t\tlet layers = [...(setLayers || []), ...(mapLayers || [])];\n\t\t\t\t\tlet modifiers = {};\n\t\t\t\t\tif (mapSet) {\n\t\t\t\t\t\tlet a = mapSet.data.metadataModifiers;\n\t\t\t\t\t\tmodifiers = {...modifiers, ...mapSet.data.metadataModifiers};\n\t\t\t\t\t}\n\t\t\t\t\tmodifiers = {...modifiers, ...map.data.metadataModifiers};\n\n\t\t\t\t\t//TODO\n\t\t\t\t\t//specific for FUORE\n\t\t\t\t\tconst useMetadata = {\n\t\t\t\t\t\tscope: true,\n\t\t\t\t\t\tattribute: true,\n\t\t\t\t\t\tperiod: true,\n\t\t\t\t\t}\n\n\t\t\t\t\tlayers = layers.map(layer => {\n\t\t\t\t\t\treturn getFiltersForUse_deprecated({...modifiers, ...layer}, activeKeys, useMetadata);\n\t\t\t\t\t});\n\n\t\t\t\t\tmapsLayersState[map.key] = layers;\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\n\t\treturn mapsLayersState;\n\t}\n);\n\n\n// ----- helpers ------\nconst getLayerState = (layer) => ({filter: layer.mergedFilter, data: layer.layer});\n\nconst getLayerConfiguration = (localConfig, layer, spatialSourcesForLayer, attributeSourcesForLayer) => {\n\t// let spatialSourcesForLayer = groupedSpatialSources[layer.data.key];\n\tlet layerConfig = null;\n\tif (spatialSourcesForLayer) {\n\t\t//TODO\n\t\t//take only first datasource for now\n\t\t// spatialSourcesForLayer.forEach(source => {\n\t\t[spatialSourcesForLayer[0]].forEach(source => {\n\t\t\tlet key = `${layer.data.key}`;\n\t\t\tlet mapServerConfig = {\n\t\t\t\twmsMapServerUrl: `${localConfig.apiGeoserverWMSProtocol}://${localConfig.apiGeoserverWMSHost}/${localConfig.apiGeoserverWMSPath}`,\n\t\t\t\twfsMapServerUrl: `${localConfig.apiGeoserverWFSProtocol}://${localConfig.apiGeoserverWFSHost}/${localConfig.apiGeoserverWFSPath}`\n\t\t\t};\n\n\t\t\tif (source) {\n\t\t\t\tkey += `-${source.key}`;\n\t\t\t\tlayerConfig = {\n\t\t\t\t\t...source.data,\n\t\t\t\t\tspatialDataSourceKey: source.key,\n\t\t\t\t\tspatialRelationsData: source.spatialRelationData,\n\t\t\t\t\tkey,\n\t\t\t\t\tmapServerConfig\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tlayerConfig = {\n\t\t\t\t\tkey,\n\t\t\t\t\tmapServerConfig\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\t}\n\n\t//add attribute relations data\n\tif (attributeSourcesForLayer && layerConfig) {\n\t\tattributeSourcesForLayer.forEach(source => {\n\t\t\tif (source) {\n\t\t\t\tconst attributeLayerTemplateKey = source.attributeRelationData && source.attributeRelationData.layerTemplateKey;\n\t\t\t\tif(attributeLayerTemplateKey) {\n\t\t\t\t\tlayerConfig.attributeRelationsData = source.attributeRelationData;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn layerConfig;\n};\n\n/**\n * Prepare filters for use from layers state\n * @param layer {Object} layer state\n * @param activeKeys {Object} Metadata active keys\n * @param useMetadata {Object}\n * @return {{filter, filterByActive, mergedFilter, layer}}\n */\nfunction getFiltersForUse_deprecated(layer, activeKeys, useMetadata) {\n\tlet filter = {};\n\tlet filterByActive = {};\n\tlet mergedFilter = {};\n\n\tif (layer && layer.hasOwnProperty('scope')){\n\t\tfilter.scopeKey = layer.scope;\n\t} else if(!useMetadata || (useMetadata && useMetadata.scope)) {\n\t\tfilterByActive.scope = true;\n\t\tif (activeKeys && activeKeys.activeScopeKey) {\n\t\t\tmergedFilter.scopeKey = activeKeys.activeScopeKey;\n\t\t}\n\t}\n\tif (layer && layer.hasOwnProperty('place')){\n\t\tfilter.placeKey = layer.place;\n\t} else if(!useMetadata || (useMetadata && useMetadata.place)) {\n\t\tfilterByActive.place = true;\n\t\tif (activeKeys && activeKeys.activePlaceKey) {\n\t\t\tmergedFilter.placeKey = activeKeys.activePlaceKey;\n\t\t}\n\t}\n\tif (layer && layer.hasOwnProperty('period')){\n\t\tfilter.periodKey = layer.period;\n\t} else if(!useMetadata || (useMetadata && useMetadata.period)) {\n\t\tfilterByActive.period = true;\n\t\tif (activeKeys && activeKeys.activePeriodKey) {\n\t\t\tmergedFilter.periodKey = activeKeys.activePeriodKey;\n\t\t}\n\t}\n\tif (layer && layer.hasOwnProperty('case')){\n\t\tfilter.caseKey = layer.case;\n\t} else if(!useMetadata || (useMetadata && useMetadata.case)) {\n\t\tfilterByActive.case = true;\n\t\tif (activeKeys && activeKeys.activeCaseKey) {\n\t\t\tmergedFilter.caseKey = activeKeys.activeCaseKey;\n\t\t}\n\t}\n\tif (layer && layer.hasOwnProperty('scenario')){\n\t\tfilter.scenarioKey = layer.scenario;\n\t} else if(!useMetadata || (useMetadata && useMetadata.scenario)) {\n\t\tfilterByActive.scenario = true;\n\t\tif (activeKeys && activeKeys.activeScenarioKey) {\n\t\t\tmergedFilter.scenarioKey = activeKeys.activeScenarioKey;\n\t\t}\n\t}\n\n\tif (layer && layer.hasOwnProperty('layerTemplate')){\n\t\tfilter.layerTemplateKey = layer.layerTemplate;\n\t}\n\n\tif (layer && layer.hasOwnProperty('attribute')){\n\t\tfilter.attributeKey = layer.attribute;\n\t} else if(!useMetadata || (useMetadata && useMetadata.attribute)) {\n\t\tfilterByActive.attribute = true;\n\t\tif (activeKeys && activeKeys.activeAttributeKey) {\n\t\t\tmergedFilter.attributeKey = activeKeys.activeAttributeKey;\n\t\t}\n\t}\n\n\tmergedFilter = {...filter, ...mergedFilter};\n\n\treturn {\n\t\tlayer: layer ? layer : null,\n\t\tfilter,\n\t\tfilterByActive,\n\t\tmergedFilter\n\t}\n}\n\nexport default {\n    getActiveMap,\n\tgetActiveMapKey,\n\tgetActiveSetKey,\n\tgetAllLayersStateByMapKey,\n\n\tgetBackgroundLayer,\n\tgetMapBackgroundLayer,\n\tgetBackgroundLayerStateByMapKey,\n\n\tgetFilterByActiveByMapKey,\n\n\tgetLayers,\n\tgetMapLayers,\n\tgetLayersStateByMapKey,\n\n\tgetMapByKey,\n\tgetMapLayerByMapKeyAndLayerKey,\n\tgetMapLayersByMapKey,\n\tgetMapsAsObject,\n\n\tgetMapSetActiveMapKey,\n\tgetMapSetActiveMapView,\n\tgetMapSetByKey,\n\tgetMapSetByMapKey,\n\tgetMapSetLayersStateBySetKey,\n\tgetMapSetMapKeys,\n\tgetMapSetView,\n\tgetMapSetViewLimits,\n\tgetMapSets,\n\tgetMapSetsAsObject,\n\n\tgetSubstate,\n\n\tgetView,\n\tgetViewLimits,\n\n\t// Deprecated\n\tgetAllLayersStateByMapKey_deprecated,\n\tgetBackgroundLayerStateByMapKey_deprecated,\n\tgetFiltersForUse_deprecated,\n\tgetLayers_deprecated,\n\tgetLayersStateByMapKey_deprecated,\n\tgetLayersStateByMapSetKey_deprecated,\n\tgetMapByMetadata_deprecated,\n\tgetMapSetNavigatorRange_deprecated,\n\tgetNavigator_deprecated\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../../_common/selectors\";\n\nconst getSubstate = state => state.areas.areaTreeLevels;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAllForActiveScope = common.getAllForActiveScope(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActive = common.getActive(getSubstate);\n\nexport default {\n\tgetAll,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\tgetActiveKey,\n\tgetActive,\n\n\tgetSubstate\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../../_common/selectors\";\n\nconst getSubstate = state => state.areas.areaTrees;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAllForActiveScope = common.getAllForActiveScope(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActive = common.getActive(getSubstate);\n\nexport default {\n\tgetAll,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\tgetActiveKey,\n\tgetActive,\n\n\tgetByKeys: common.getByKeys(getSubstate),\n\tgetByKeysAsObject: common.getByKeysAsObject(getSubstate),\n\n\tgetSubstate\n};","import areaTreeLevels from './AreaTreeLevels/selectors';\nimport areaTrees from './AreaTrees/selectors';\n\nexport default {\n\tareaTreeLevels,\n\tareaTrees\n};","import common from '../_common/selectors';\n\n\nconst getSubstate = state => state.attributes;\n\nconst getAttributes =  common.getAll(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\n\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\n\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\nconst getStateToSave = common.getStateToSave(getSubstate);\n\nexport default {\n\tgetAttributes,\n\n\tgetActive,\n\tgetActiveKey,\n\n\tgetAllAsObject,\n\n\tgetByKey,\n\tgetByKeys,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\tgetUpdatePermissionByKey,\n\n\tgetStateToSave,\n\tgetSubstate\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\n\nconst getSubstate = state => state.attributeSets;\n\nconst getAll = common.getAll(getSubstate);\nconst getActiveKeys = common.getActiveKeys(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getStateToSave = common.getStateToSave(getSubstate);\n\nconst getByTopics = createSelector(\n\t[getAll, (state, topics) => topics],\n\t(attributeSets, topics) => {\n\t\tif (attributeSets && topics){\n\t\t\tif (!_.isArray(topics)) topics = [topics];\n\t\t\tlet filtered = _.filter(attributeSets, (attributeSet) => {\n\t\t\t\treturn _.includes(topics, attributeSet.data.topic);\n\t\t\t});\n\t\t\treturn filtered.length ? filtered : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst getUniqueAttributeKeysForTopics = createSelector(\n\t[getByTopics],\n\t(attributeSets) => {\n\t\tif (attributeSets && attributeSets.length){\n\t\t\tlet allAttributeKeys = attributeSets.map((attributeSet) => {\n\t\t\t\treturn attributeSet.data.attributes;\n\t\t\t});\n\t\t\tlet uniqueAttributeKeys = _.compact(_.uniq(_.flatten(allAttributeKeys)));\n\t\t\treturn uniqueAttributeKeys.length ? uniqueAttributeKeys : null;\n\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetActive,\n\tgetActiveKeys,\n\tgetAttributeSets: getAll,\n\n\tgetByTopics,\n\tgetStateToSave,\n\tgetUniqueAttributeKeysForTopics\n};","import common from \"../_common/selectors\";\n\nconst getSubstate = (state) => state.attributeStatistics;\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\nconst getBatchByFilterOrder = common.getBatchByFilterOrder(getSubstate);\n\nexport default {\n\tgetByKey,\n\tgetSubstate,\n\tgetAllAsObject,\n\tgetBatchByFilterOrder,\n};","import common from \"../_common/selectors\";\n\nconst getSubstate = state => state.cases;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAllForActiveScope = common.getAllForActiveScope(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActiveKeys = common.getActiveKeys(getSubstate);\nconst getActiveModels = common.getActiveModels(getSubstate);\n\nconst getByKeys = common.getByKeys(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\n\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\nconst getIndexed = common.getIndexed(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\n\nexport default {\n\tgetActive,\n\tgetActiveKey,\n\tgetActiveKeys,\n\tgetActiveModels,\n\tgetAll,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\n\tgetByKeys,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\tgetIndexed,\n\tgetUpdatePermissionByKey,\n\n\tgetSubstate,\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from 're-reselect';\nimport AttributeDataSelectors from \"../AttributeData/selectors\";\nimport _ from \"lodash\";\n\n// TODO test all selectors\nconst getAllChartsAsObject = (state) => state.charts.charts;\nconst getChartByKey = (state, key) => state.charts.charts[key];\nconst getSetByKey = (state, key) => state.charts.sets[key];\n\nconst getChartsBySetKeyAsObject = createSelector(\n\t[\n\t\tgetSetByKey,\n\t\tgetAllChartsAsObject\n\t],\n\t(set, charts) => {\n\t\tif (set && set.charts && set.charts.length) {\n\t\t\tlet setCharts= {};\n\t\t\t_.each(set.charts, (key) => {\n\t\t\t\tsetCharts[key] = charts[key];\n\t\t\t});\n\t\t\treturn setCharts;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n// TODO other metadata types\nconst getMetadataActiveKeys = state => {\n\treturn {\n\t\tactiveScopeKey: state.scopes.activeKey,\n\t\tactivePeriodKey: state.periods.activeKey,\n\t\tactivePeriodKeys: state.periods.activeKeys,\n\t\tactiveAttributeKey: state.attributes.activeKey\n\t};\n};\n\n\nconst getChartConfiguration = createCachedSelector(\n\t[\n\t\tgetChartByKey,\n\t\tgetMetadataActiveKeys,\n\t\t(state, chart, useActiveMetadataKeys) => useActiveMetadataKeys\n\t],\n\t(chart, activeKeys, useActiveMetadataKeys) => {\n\t\tif (chart && activeKeys) {\n\t\t\tlet filters = getFiltersForUse(chart.data, activeKeys, useActiveMetadataKeys);\n\t\t\treturn {...chart, ...filters};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)(\n\t(state, chart) => `${chart && chart.key}`\n);\n\nconst getDataForChart = createCachedSelector(\n\t[\n\t\tAttributeDataSelectors.getFilteredGroupedByFid,\n\t\t(state, filter, chartKey) => chartKey\n\t],\n\t(data, chartKey) => {\n\t\tif (chartKey && data) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, filter, chartKey) => {return `${JSON.stringify(filter)}:${chartKey}`});\n\nconst getNamesForChart = createCachedSelector(\n\t[\n\t\tAttributeDataSelectors.getNamesByFid,\n\t\t(state, filter, cacheKey) => cacheKey\n\t],\n\t(data, cacheKey) => {\n\t\tif (cacheKey && data) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n)((state, filter, cacheKey) => {return `${JSON.stringify(filter)}:${cacheKey}`});\n\n\n\n/* helpers */\n\n/**\n * Prepare filters for use from layers state\n * @param data {Object} chart data\n * @param activeKeys {Object} Metadata active keys\n * @param useActiveMetadataKeys {Object} Metadata active keys\n * @return {{filter, filterByActive, mergedFilter, data}}\n */\n\n// TODO other metadata types\nfunction getFiltersForUse(data, activeKeys, useActiveMetadataKeys) {\n\tlet filter = {};\n\tlet filterByActive = {};\n\tlet mergedFilter = {};\n\n\tif (data && data.hasOwnProperty('scope')){\n\t\tfilter.scopeKey = data.scope;\n\t} else if (useActiveMetadataKeys && useActiveMetadataKeys.scope) {\n\t\tfilterByActive.scope = true;\n\t\tif (activeKeys && activeKeys.activeScopeKey) {\n\t\t\tmergedFilter.scopeKey = activeKeys.activeScopeKey;\n\t\t}\n\t}\n\n\tif (data && data.hasOwnProperty('periods')){\n\t\tif (data.periods.length > 1) {\n\t\t\tfilter.periodKey = {in: data.periods};\n\t\t} else {\n\t\t\tfilter.periodKey = data.periods[0];\n\t\t}\n\t} else if (useActiveMetadataKeys && useActiveMetadataKeys.period) {\n\t\tfilterByActive.period = true;\n\t\tif (activeKeys && activeKeys.activePeriodKey) {\n\t\t\tmergedFilter.periodKey = activeKeys.activePeriodKey;\n\t\t} else if (activeKeys && activeKeys.activePeriodKeys) {\n\t\t\tmergedFilter.periodKey = {in: activeKeys.activePeriodKeys};\n\t\t}\n\t}\n\n\tif (data && data.hasOwnProperty('attributes')){\n\t\tif (data.attributes.length > 1) {\n\t\t\tfilter.attributeKey = {in: data.attributes};\n\t\t} else {\n\t\t\tfilter.attributeKey = data.attributes[0];\n\t\t}\n\t} else if (useActiveMetadataKeys && useActiveMetadataKeys.attribute) {\n\t\tfilterByActive.attribute = true;\n\t\tif (activeKeys && activeKeys.activeAttributeKey) {\n\t\t\tmergedFilter.attributeKey = activeKeys.activeAttributeKey;\n\t\t} else if (activeKeys && activeKeys.activeAttributeKeys) {\n\t\t\tmergedFilter.attributeKey = {in: activeKeys.activeAttributeKeys};\n\t\t}\n\t}\n\n\tif (data && data.hasOwnProperty('layerTemplate')){\n\t\tfilter.layerTemplateKey = data.layerTemplate;\n\t}\n\n\tmergedFilter = {...filter, ...mergedFilter};\n\n\treturn {\n\t\tfilter,\n\t\tfilterByActive,\n\t\tmergedFilter\n\t}\n}\n\nexport default {\n\tgetChartConfiguration,\n\tgetChartsBySetKeyAsObject,\n\tgetDataForChart,\n\tgetNamesForChart,\n\tgetSetByKey\n}","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nconst getAllByKey = (state) => state.components;\n\nconst getDataByComponentKey = createSelector(\n\t[\n\t\tgetAllByKey,\n\t\t(state, key) => key\n\t],\n\t(components, key) => {\n\t\tif (components && key && components[key]) {\n\t\t\treturn components[key];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst get = createSelector(\n\t[\n\t\tgetDataByComponentKey,\n\t\t(state, key, path) => path,\n\t],\n\t(componentState, path) => _.get(componentState, path, null)\n);\n\nexport default {\n\tget,\n\tgetDataByComponentKey,\n\tgetStateToSave: getAllByKey\n}\n","import common from '../../_common/selectors';\nimport {createObserver as createRecomputeObserver, createSelector as createRecomputeSelector} from '@jvitela/recompute';\nimport _ from 'lodash';\n\nconst getSubstate = (state) => state.data.attributeRelations;\n\nconst getIndex = common.getIndex(getSubstate);\nconst getIndex_recompute = common.getIndex_recompute(getSubstate);\n\n/**\n * It returns relation model for given key, if exists\n * @param key {string} relation key\n * @return {Object} attribute relation\n */\nconst getByKeyObserver = createRecomputeObserver((state, key) => {\n\treturn getSubstate(state)?.byKey?.[key] || null;\n});\n\n/**\n * It returns relation models for given keys\n * @param keys {Array} relation keys\n * @return {Array} A collection of relations\n */\nconst getByKeys = createRecomputeSelector(keys => {\n\treturn keys.map(key => getByKeyObserver(key));\n});\n\n/**\n * It returns a collection of indexed relations for given filter\n * @param filter {Object}\n * @return {Array}\n */\nconst getIndexed = createRecomputeSelector(filter => {\n\tconst index = getIndex_recompute(filter, null);\n\tif (index?.index) {\n\t\t// filter only uuids (not true or false values of index)\n\t\tconst keys = _.filter(Object.values(index.index), (key) => typeof key === \"string\");\n\t\tif (keys?.length) {\n\t\t\treturn getByKeys(keys);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * It returns key-value pairs, where the key is attribute data source key and the value is attribute key\n * @param filter {Object} attribute relation filter\n * @return {Object}\n */\nconst getFilteredAttributeDataSourceKeyAttributeKeyPairs = createRecomputeSelector(filter => {\n\tconst relations = getIndexed(filter);\n\tif (relations) {\n\t\tconst pairs = {};\n\t\t_.forEach(relations, relation => {\n\t\t\tpairs[relation.data.attributeDataSourceKey] = relation.data.attributeKey;\n\t\t});\n\t\treturn pairs;\n\t} else {\n\t\treturn null;\n\t}\n})\n\nexport default {\n\tgetFilteredAttributeDataSourceKeyAttributeKeyPairs,\n    getIndex\n};","import {createSelector as createRecomputeSelector, createObserver as createRecomputeObserver} from '@jvitela/recompute';\nimport common from \"../../_common/selectors\";\n\nconst getSubstate = state => state.data.attributeDataSources;\n\nconst getIndex = common.getIndex(getSubstate);\nconst getIndex_recompute = common.getIndex_recompute(getSubstate);\n\n/**\n * It returns data source model for given key, if exists\n * @param key {string} data source key\n * @return {Object} attribute data source\n */\nconst getByKeyObserver = createRecomputeObserver((state, key) => {\n\treturn getSubstate(state)?.byKey?.[key] || null;\n});\n\n/**\n * It returns data source models for given keys\n * @param keys {Array} data source keys\n * @return {Array} A collection of data sources\n */\nconst getByKeys = createRecomputeSelector(keys => {\n\treturn keys.map(key => getByKeyObserver(key));\n});\n\n/**\n * It returns a collection of indexed data sources for given filter\n * @param filter {Object}\n * @return {Array}\n */\nconst getIndexed = createRecomputeSelector(filter => {\n\tconst index = getIndex_recompute(filter, null);\n\tif (index?.index) {\n\t\tlet keys = Object.values(index.index);\n\t\tif (keys) {\n\t\t\treturn getByKeys(keys);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport default {\n\tgetIndexed,\n\tgetIndex,\n};","import {createObserver as createRecomputeObserver, createSelector as createRecomputeSelector} from '@jvitela/recompute';\nimport common from \"../../_common/selectors\";\nimport commonHelpers from '../../_common/helpers';\n\nconst getSubstate = state => state.data.attributeData;\n\nconst getIndex = common.getIndexByPath(getSubstate);\n\nconst getSpatialIndexesObserver = createRecomputeObserver((state, getSubstate) => getSubstate(state).spatialIndexes);\n\n/**\n * It returns all data for given datasource key\n * @param key {string} data source key\n * @returns {Object} Features as object (by feature key)\n */\nconst getByDataSourceKeyObserver = createRecomputeObserver((state, key) => {\n\treturn getSubstate(state)?.byDataSourceKey?.[key] || null;\n});\n\n/**\n * It returns whole index for given filter & order\n * @param {Object} filter\n * @param {Array} order\n * @return {Object} index\n */\nconst getIndex_recompute = createRecomputeSelector((filter, order) => {\n\tconst indexes = getSpatialIndexesObserver(getSubstate);\n\tif (indexes) {\n\t\treturn commonHelpers.getIndex(indexes, filter, order);\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * It returns attributes data (an object containing featureKey-attributeValue pairs) grouped by data source key\n * @param dataSourceKeys {Array}\n * @return {Object}\n */\nconst getDataByDataSourceKeys = createRecomputeSelector((dataSourceKeys) => {\n\tif (dataSourceKeys) {\n\t\tlet data = {};\n\t\t_.forEach(dataSourceKeys, key => {\n\t\t\tconst attributes = getByDataSourceKeyObserver(key);\n\t\t\tif (attributes && !_.isEmpty(attributes)) {\n\t\t\t\tdata[key] = attributes;\n\t\t\t}\n\t\t});\n\n\t\treturn !_.isEmpty(data) ? data : null;\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * It returns attribute values for given feature key grouped by data source key\n * @param attributeDataSourceKeyAttributeKeyPairs {Object} key-value pairs, where the key is attribute data source key and the value is matching attribute key\n * @param featureKey {string | number}\n * @return {Object} attributeDataSource key - attribute value pairs\n */\nconst getAttributesByDataSourceKeysForFeatureKey = createRecomputeSelector((attributeDataSourceKeyAttributeKeyPairs, featureKey) => {\n\tif (attributeDataSourceKeyAttributeKeyPairs && featureKey) {\n\t\tconst dataSourceKeys = Object.keys(attributeDataSourceKeyAttributeKeyPairs);\n\t\tconst dataByDataSourceKey = getDataByDataSourceKeys(dataSourceKeys);\n\t\tif (dataByDataSourceKey) {\n\t\t\tlet attributes = {};\n\t\t\t_.forIn(dataByDataSourceKey, (dataSourceData, dataSourceKey) => {\n\t\t\t\tconst value = dataSourceData[featureKey];\n\t\t\t\tconst attributeKey = attributeDataSourceKeyAttributeKeyPairs[dataSourceKey];\n\t\t\t\tattributes[attributeKey] = value;\n\t\t\t});\n\n\t\t\treturn !_.isEmpty(attributes) ? attributes : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * It returns indexed feature keys grouped by attribute data source keys\n * @param {Object} filter\n * @param {number} level\n * @param {string} tile\n * @return {Object}\n */\nconst getIndexedFeatureKeysByDataSourceKeys = createRecomputeSelector((filter, level, tile) => {\n\tconst index = getIndex_recompute(filter, null);\n\tif (index?.index) {\n\t\tconst featureKeysByDataSourceKeys = index.index[level]?.[tile];\n\t\treturn featureKeysByDataSourceKeys || null;\n\t} else {\n\t\treturn null;\n\t}\n});\n\n\nexport default {\n\tgetIndex,\n\tgetDataByDataSourceKeys,\n\tgetAttributesByDataSourceKeysForFeatureKey,\n\tgetIndexedFeatureKeysByDataSourceKeys\n};","import common from '../../_common/selectors';\n\nconst getSubstate = (state) => state.data.spatialRelations;\n\nconst getIndex = common.getIndex(getSubstate);\n\nexport default {\n    getIndex\n};","import _ from 'lodash';\nimport {createSelector as createRecomputeSelector, createObserver as createRecomputeObserver} from '@jvitela/recompute';\nimport common from \"../../_common/selectors\";\nimport createCachedSelector from \"re-reselect\";\nimport commonHelpers from '../../_common/helpers';\n\nconst getSubstate = state => state.data.spatialDataSources;\n\nconst getIndex = common.getIndex(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\n\nconst getIndexesObserver = createRecomputeObserver((state, getSubstate) => common.getIndexes(getSubstate)(state));\n\n/**\n * It returns data source model for given key, if exists\n * @param key {string} data source key\n * @return {Object} Data source\n */\nconst getByKeyObserver = createRecomputeObserver((state, key) => {\n\treturn getSubstate(state)?.byKey?.[key] || null;\n});\n\n\n/**\n * It returns data source models for given keys, if exist\n * @param keys {Array} data source keys\n * @return {Array} A collection of data sources\n */\nconst getByKeys = createRecomputeSelector(keys => {\n\treturn keys.map(key => getByKeyObserver(key));\n});\n\n/**\n * It returns whole index for given filter and order\n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param order {Array}\n * @return {Object} index\n */\nconst getIndex_recompute = createRecomputeSelector((filter, order) => {\n\tconst indexes = getIndexesObserver(getSubstate);\n\tif (indexes) {\n\t\treturn commonHelpers.getIndex(indexes, filter, order);\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * It returns a collection of indexed data sources for given filter\n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @return {Array}\n */\nconst getIndexed = createRecomputeSelector(filter => {\n\tconst index = getIndex_recompute(filter, null);\n\tif (index?.index) {\n\t\tlet keys = Object.values(index.index);\n\t\tif (keys) {\n\t\t\treturn getByKeys(keys);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n});\n\n\n/**\n * Select array of SpatialDataSources based on given filter.\n * @param {Object} state \n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @return {Array?}\n */\nconst getByFilteredIndex = createCachedSelector([\n\tgetIndex,\n\tgetAllAsObject,\n    ],\n    (index, dataSources) => {\n        if(!_.isEmpty(index)) {\n\t\t\tconst dataSourceKeys = index.index;\n\t\t\tif(!_.isEmpty(dataSourceKeys)) {\n\t\t\t\tconst filteredDataSources = [];\n\t\t\t\tfor (const dataSourceKey of Object.values(dataSourceKeys)) {\n\t\t\t\t\tfilteredDataSources.push(dataSources[dataSourceKey]);\n\t\t\t\t}\n\n\t\t\t\tif(filteredDataSources.length > 0) {\n\t\t\t\t\treturn filteredDataSources\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n        } else {\n            return null;\n        }\n    }\n)((state, filter) => {\n\treturn `${JSON.stringify(filter)}`\n})\n\n\nexport default {\n\tgetIndexed,\n\tgetIndex,\n\tgetByFilteredIndex,\n};","import common from '../../_common/selectors';\nimport {createSelector as createRecomputeSelector, createObserver as createRecomputeObserver} from '@jvitela/recompute';\nimport commonHelpers from '../../_common/helpers';\n\nconst getSubstate = (state) => state.data.spatialData;\n\nconst getIndex = common.getIndex(getSubstate);\n\nconst getIndexesObserver = createRecomputeObserver((state, getSubstate) => common.getIndexes(getSubstate)(state));\n\n/**\n * It returns all data for given datasource key\n * @param key {string} data source key\n * @returns {Object} Features as object (by feature key)\n */\nconst getByDataSourceKeyObserver = createRecomputeObserver((state, key) => {\n\treturn getSubstate(state)?.byDataSourceKey?.[key] || null;\n});\n\n/**\n * It returns whole index for given filter & order\n * @param {Object} filter\n * @param {Array} order\n * @return {Object} index\n */\nconst getIndex_recompute = createRecomputeSelector((filter, order) => {\n\tconst indexes = getIndexesObserver(getSubstate);\n\tif (indexes) {\n\t\treturn commonHelpers.getIndex(indexes, filter, order);\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * @param {Object} filter\n * @param {number} level\n * @param {string} tile\n * @param {string} dataSourceKey\n * @return {Array} indexed feature keys\n */\nconst getIndexedFeatureKeys = createRecomputeSelector((filter, level, tile, dataSourceKey) => {\n\tconst index = getIndex_recompute(filter, null);\n\tif (index?.index) {\n\t\tconst featureKeys = index.index[level]?.[tile]?.[dataSourceKey];\n\t\treturn featureKeys?.length ? featureKeys : null;\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport default {\n\tgetByDataSourceKeyObserver,\n\tgetIndex,\n\tgetIndexedFeatureKeys\n};","import _ from 'lodash';\n\n/**\n * Returns string representing given tile\n * @param {Array|string} tile \n * @returns {string}\n */\nexport const tileAsString = (tile) => {\n    if(typeof tile === 'string') {\n        return tile;\n    } else {\n        return `${tile[0]},${tile[1]}`;\n    }\n}\n\n/**\n * Converts tile as a string to array\n * @param {Array|string} tile\n * @returns {string}\n */\nexport const tileAsArray = (tile) => {\n\tif(typeof tile === 'string') {\n\t\treturn tile.split(',').map(parseFloat);\n\t} else if(_.isArray(tile)){\n\t\treturn tile.map(parseFloat);\n\t} else {\n\t\treturn null;\n\t}\n}\n\n/**\n * Compare wanted tiles from filter with already loaded or loading tiles and give array of missing tiles\n * @param {Object} index Already loaded index\n * @param {Object} filter Required filter\n * @param {Array.<string|Array.<number>>} filter.tiles\n * @param {number} filter.level\n */\nexport const getMissingTiles = (index, filter) => {\n    if(index && index.index && filter) {\n        if(index.index?.[filter.level] && filter && filter.tiles) {\n            const loadedTilesInIndex = _.reduce(index.index[filter.level], (acc, tileData, tileKey) => {\n                //tileData === true means it is loading, so we mark them as not missing\n                if(tileData) {\n                    return [...acc, tileKey];\n                } else {\n                    return acc;\n                }\n            }, [])\n            \n            const missingTiles = filter.tiles.filter(tile => !loadedTilesInIndex.includes(tileAsString(tile)));\n            return missingTiles;\n        } else {\n            // no data for requested level\n            // all tiles are missing \n            return filter.tiles.map(tile => tileAsString(tile));\n        }\n    } else {\n        if(filter?.tiles) {\n            // all tiles are missing \n            return filter.tiles.map(tile => tileAsString(tile));\n        } else {\n            //filter is not defined\n            return null;\n        }\n    }\n\n}","import {createSelector as createRecomputeSelector} from '@jvitela/recompute';\nimport stringify from 'fast-stringify';\n\nimport attributeRelations from './AttributeRelations/selectors';\nimport attributeDataSources from './AttributeDataSources/selectors';\nimport attributeData from './AttributeData/selectors';\nimport spatialRelations from './SpatialRelations/selectors';\nimport spatialDataSources from './SpatialDataSources/selectors';\nimport spatialData from './SpatialData/selectors';\nimport {CacheFifo} from '@gisatcz/ptr-utils';\nimport {tileAsString} from './helpers';\nimport _ from 'lodash';\n\nlet tilesCache = new CacheFifo(1000);\n\n/**\n * @param dataSourceKey {string} uuid\n * @param fidColumnName {string} name of property used as feature identifier\n * @param attributeDataSourceKeyAttributeKeyPairs {Object} key-value pairs, where key is attribute data source key and value is matching attribute key\n */\nconst getFeatures = createRecomputeSelector((dataSourceKey, fidColumnName, attributeDataSourceKeyAttributeKeyPairs) => {\n\tconst data = spatialData.getByDataSourceKeyObserver(dataSourceKey);\n\tlet attributesByDataSourceKey = null;\n\n\tif (attributeDataSourceKeyAttributeKeyPairs) {\n\t\tattributesByDataSourceKey = attributeData.getDataByDataSourceKeys(Object.keys(attributeDataSourceKeyAttributeKeyPairs));\n\t}\n\n\tif (data) {\n\t\treturn _.map(data, (feature, key) => {\n\t\t\tlet properties = {\n\t\t\t\t[fidColumnName]: key // TODO fix dependency on this in ptr-maps\n\t\t\t}\n\n\t\t\tif (attributesByDataSourceKey) {\n\t\t\t\t_.forIn(attributesByDataSourceKey, (features, attributeDataSourceKey) => {\n\t\t\t\t\tconst attributeValue = features[key];\n\t\t\t\t\tif (attributeValue) {\n\t\t\t\t\t\tproperties[attributeDataSourceKeyAttributeKeyPairs[attributeDataSourceKey]] = attributeValue;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\ttype: \"Feature\",\n\t\t\t\tkey,\n\t\t\t\tgeometry: feature.geometry,\n\t\t\t\tproperties\n\t\t\t}\n\t\t});\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * Assemble vector data for single tile\n * @param dataSourceKey {string} uuid\n * @param fidColumnName {string} name of property used as feature identifier\n * @param level {number}\n * @param tile {Array} tile definition point\n * @param spatialRelationsFilter {Object} getSpatialRelationsFilterFromLayerState\n * @param attributeRelationsFilter {Object} getAttributeRelationsFilterFromLayerState\n * @param attributeDataSourceKeyAttributeKeyPairs {Object} key-value pairs, where key is attribute data source key and value is matching attribute key\n * @param styleKey {string} uuid\n * @return {Object} populated tile (with feature's geometries and attributes)\n */\nconst getTile = createRecomputeSelector((spatialDataSourceKey, fidColumnName, level, tile, spatialRelationsFilter, attributeRelationsFilter, attributeDataSourceKeyAttributeKeyPairs, styleKey) => {\n\t// Get all data for given key. It caused performance issues when the data was passed as a parameter\n\tconst spatialDataForDataSource = spatialData.getByDataSourceKeyObserver(spatialDataSourceKey);\n\n\tif (spatialDataForDataSource) {\n\t\tconst tileString = tileAsString(tile);\n\t\tconst cacheParams = {\n\t\t\tattributeRelationsFilter,\n\t\t\tspatialRelationsFilter, \n\t\t\tlevel,\n\t\t\ttileAsString: tileString,\n\t\t\tspatialDataSourceKey,\n\t\t\tstyleKey\n\t\t};\n\t\tconst indexedFeatureKeys = spatialData.getIndexedFeatureKeys(spatialRelationsFilter, level, tileString, spatialDataSourceKey);\n\t\tconst indexedFeatureKeysByAttributeDataSourceKeys = attributeData.getIndexedFeatureKeysByDataSourceKeys(attributeRelationsFilter, level, tileString);\n\t\tconst cacheKey = stringify({cacheParams, indexedFeatureKeys, indexedFeatureKeysByAttributeDataSourceKeys}); // TODO is index enough as cache key?\n\t\tconst cache = tilesCache.findByKey(cacheKey);\n\t\tif (cache) {\n\t\t\treturn cache.data;\n\t\t} else {\n\t\t\tif (indexedFeatureKeys?.length) {\n\t\t\t\tlet features = [];\n\n\t\t\t\tindexedFeatureKeys.forEach(key => {\n\t\t\t\t\tlet properties = {\n\t\t\t\t\t\t[fidColumnName]: key\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO what if some geometries is missing\n\t\t\t\t\tconst geometry = spatialDataForDataSource[key]?.geometry || spatialDataForDataSource[key]?.geometries[level];\n\n\t\t\t\t\tif (attributeDataSourceKeyAttributeKeyPairs) {\n\t\t\t\t\t\tconst attributes = attributeData.getAttributesByDataSourceKeysForFeatureKey(attributeDataSourceKeyAttributeKeyPairs, key);\n\t\t\t\t\t\tif (attributes) {\n\t\t\t\t\t\t\tproperties = {...properties, ...attributes};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (geometry) {\n\t\t\t\t\t\tfeatures.push({\n\t\t\t\t\t\t\ttype: \"Feature\",\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\tgeometry,\n\t\t\t\t\t\t\tproperties\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tconst data = {\n\t\t\t\t\tfeatures: features.length ? features : null,\n\t\t\t\t\ttile: tileString,\n\t\t\t\t\tlevel\n\t\t\t\t};\n\n\t\t\t\ttilesCache.addOrUpdate({\n\t\t\t\t\tcacheKey,\n\t\t\t\t\tdata\n\t\t\t\t});\n\n\t\t\t\treturn data;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * Assemble vector data for all tiles\n * @param dataSourceKey {string} uuid\n * @param fidColumnName {string} name of property used as feature identifier\n * @param level {number}\n * @param tiles {Array} list of tiles definition points\n * @param spatialRelationsFilter {Object} getSpatialRelationsFilterFromLayerState\n * @param attributeRelationsFilter {Object} getAttributeRelationsFilterFromLayerState\n * @param attributeDataSourceKeyAttributeKeyPairs {Object} key-value pairs, where key is attribute data source key and value is matching attribute key\n * @param styleKey {string} uuid\n * @return {Array} a collection of populated tiles (with feature's geometries and attributes)\n */\nconst getTiles = createRecomputeSelector((dataSourceKey, fidColumnName, level, tiles, spatialRelationsFilter, attributeRelationsFilter, attributeDataSourceKeyAttributeKeyPairs, styleKey) => {\n\tif (tiles?.length) {\n\t\tlet populatedTiles = [];\n\t\t_.forEach(tiles, tile => {\n\t\t\tconst populatedTile = getTile(dataSourceKey, fidColumnName, level, tile, spatialRelationsFilter, attributeRelationsFilter, attributeDataSourceKeyAttributeKeyPairs, styleKey);\n\t\t\tif (populatedTile) {\n\t\t\t\tpopulatedTiles.push(populatedTile);\n\t\t\t}\n\t\t});\n\n\t\treturn populatedTiles.length ? populatedTiles : null;\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport default {\n\tgetFeatures,\n\tgetTiles,\n\n    attributeData,\n    attributeDataSources,\n    attributeRelations,\n    spatialData,\n    spatialDataSources,\n    spatialRelations\n}","import {createSelector} from 'reselect';\n\nconst getByAoiKey = state => state.layerPeriods.byAoiKey;\nconst getByPlaceKey = state => state.layerPeriods.byPlaceKey;\nconst getByKey = state => state.layerPeriods.byKey;\n\nconst getActiveAoiKey = state => state.aoi.activeKey;\nconst getActivePlaceKey = state => state.places.activeKey;\nconst getActiveLpisCaseKey = state => state.specific.lpisChangeReviewCases.activeCaseKey;\n\nconst getActiveAoiData = createSelector(\n\t[getByAoiKey, getActiveAoiKey],\n\t(byAoiKey, activeAoiKey) => {\n\t\treturn byAoiKey[activeAoiKey];\n\t}\n);\n\nconst getActivePlaceData = createSelector(\n\t[getByPlaceKey, getActivePlaceKey],\n\t(byPlaceKey, activePlaceKey) => {\n\t\treturn byPlaceKey[activePlaceKey];\n\t}\n);\n\nconst getForActiveLpisCase = createSelector(\n\t[getByKey, getActiveLpisCaseKey],\n\t(byKey, activeLpisCaseKey) => {\n\t\treturn byKey['lpisCase' + activeLpisCaseKey];\n\t}\n);\n\nexport default {\n\tgetActiveAoiData: getActiveAoiData,\n\tgetActivePlaceData: getActivePlaceData,\n\tgetForActiveLpisCase\n};","import common from \"../_common/selectors\";\nconst getSubstate = state => state.layerTrees;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAllForActiveScope = common.getAllForActiveScope(getSubstate);\n\nconst getByFilterOrder = common.getByFilterOrder(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\n\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\n\nexport default {\n\tgetAll,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\t\n\tgetByFilterOrder,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\tgetUpdatePermissionByKey,\n\tgetSubstate\n};","import createCachedSelector from \"re-reselect\";\nimport _ from 'lodash';\nimport {map as mapUtils} from \"@gisatcz/ptr-utils\";\nimport {mapConstants} from \"@gisatcz/ptr-core\";\nimport {grid} from \"@gisatcz/ptr-tile-grid\";\n\n/* === HELPERS ======================================================================= */\n\n/**\n * Get background layer in 'layer' format\n */\nconst getBackgroundLayerAsLayer = createCachedSelector(\n    [\n        (backgroundLayer) => backgroundLayer\n    ],\n    (backgroundLayer) => {\n        if (backgroundLayer) {\n            return {...backgroundLayer, key: 'pantherBackgroundLayer'};\n        } else {\n            return null;\n        }\n    }\n)(backgroundLayer => JSON.stringify(backgroundLayer));\n\n\n/**\n * Merge background layer definition with layers to one collection\n */\nconst mergeBackgroundLayerWithLayers = createCachedSelector(\n    [\n        (backgroundLayer) => getBackgroundLayerAsLayer(backgroundLayer),\n        (backgroundLayer, layers) => layers\n    ],\n    (backgroundLayer, layers) => {\n        let finalLayers = [];\n\n        if (layers) {\n            finalLayers = layers || [];\n        }\n\n        if (backgroundLayer) {\n            finalLayers = [backgroundLayer, ...finalLayers];\n        }\n\n        return finalLayers?.length ? finalLayers : null;\n    }\n)((backgroundLayer, layers) => `${JSON.stringify(backgroundLayer)}_${JSON.stringify(layers)}`);\n\n/**\n * Merge given modifiers with layer's modifiers & given filterByActive with layer's filter by active and add it to the layer state\n *\n * @param layers {Object} layers state\n * @param metadataModifiers {Object} modifiers like scopeKey, placeKey\n * @param filterByActive {{scope: bool, place: bool, period: bool,  scenario: bool, case: bool}}\n * @return {Object} Final layer state definition\n */\nconst mergeModifiersAndFilterByActiveToLayerStructure = (layers, metadataModifiers, filterByActive) => {\n    return layers.map(layer => {\n        let layerMetadataModifiers = (layer.metadataModifiers && metadataModifiers) ? {...metadataModifiers, ...layer.metadataModifiers} : (metadataModifiers || layer.metadataModifiers || null);\n        let layerFilterByActive = (layer.filterByActive && filterByActive) ? {...filterByActive, ...layer.filterByActive} : (filterByActive || layer.filterByActive || null);\n\n        return {...layer, metadataModifiers: layerMetadataModifiers, filterByActive: layerFilterByActive};\n    });\n}\n\n/**\n * It returns merged view from map and associated map set based on synced params\n * @param map {Object}\n * @param set {Object}\n * @return {Object|unknown} final map view\n */\nconst getView = (map, set) => {\n    if (map) {\n        if (set) {\n            let mapView = map.data?.view;\n\n            // omit synced view params from map\n            if (set.sync && !_.isEmpty(set.sync)) {\n                mapView = _.omitBy(mapView, (viewValue, viewKey) => {\n                    return set.sync[viewKey];\n                });\n            }\n\n            let mapSetView = set.data?.view;\n            let view = mapUtils.view.mergeViews(mapConstants.defaultMapView, mapSetView, mapView);\n            return !_.isEmpty(view) ? view : null;\n        } else {\n            let view = map.data?.view;\n            return mapUtils.view.mergeViews(mapConstants.defaultMapView, view);\n        }\n    } else {\n        return null;\n    }\n}\n\n/**\n * Get zoom level of current view represented by mapWidth, mapHeight and boxRange.\n */\nconst getZoomLevel = createCachedSelector(\n    [\n        (mapWidth) => mapWidth,\n        (mapWidth, mapHeight) => mapHeight,\n        (mapWidth, mapHeight, boxRange) => boxRange,\n    ],\n    (mapWidth, mapHeight, boxRange) => {\n        const viewportRange = mapUtils.view.getMapViewportRange(mapWidth, mapHeight);\n\t\tconst levelBoxRange = mapUtils.view.getNearestZoomLevelBoxRange(mapWidth, mapHeight, boxRange);\n        return grid.getLevelByViewport(levelBoxRange, viewportRange)\n    }\n)((mapWidth, mapHeight, boxRange) => `${mapWidth}${mapHeight}${boxRange}`);\n\n/**\n * Get tiles intersected by map extent.\n * Map extent is represented by mapWidth, mapHeight, center and boxRange.\n */\nconst getTiles = createCachedSelector(\n    [\n        (mapWidth) => mapWidth,\n        (mapWidth, mapHeight) => mapHeight,\n        (mapWidth, mapHeight, center) => center,\n        (mapWidth, mapHeight, center, boxRange) => boxRange,\n    ],\n    (mapWidth, mapHeight, center, boxRange) => {\n\t\tconst levelBoxRange = mapUtils.view.getNearestZoomLevelBoxRange(mapWidth, mapHeight, boxRange);\n\t\tconst lonLat = [center.lon, center.lat];\n        const tileGrid = grid.getTileGrid(mapWidth, mapHeight, levelBoxRange, lonLat, true);\n        return tileGrid.flat(1);\n    }\n)((mapWidth, mapHeight, center, boxRange) => `${mapWidth}${mapHeight}${center.lon}${center.lat}${boxRange}`);\n\nexport default {\n    getBackgroundLayerAsLayer,\n    getTiles,\n    getView,\n    getZoomLevel,\n    mergeBackgroundLayerWithLayers,\n\tmergeModifiersAndFilterByActiveToLayerStructure\n}","import {createSelector} from 'reselect';\nimport createCachedSelector from \"re-reselect\";\nimport {createSelector as createRecomputeSelector, createObserver as createRecomputeObserver} from '@jvitela/recompute';\nimport _ from 'lodash';\n\nimport {map as mapUtils} from \"@gisatcz/ptr-utils\";\nimport {mapConstants} from \"@gisatcz/ptr-core\";\n\nimport common from \"../_common/selectors\";\nimport commonHelpers from '../_common/helpers';\nimport selectorHelpers from \"./selectorHelpers\";\n\nimport DataSelectors from \"../Data/selectors\";\nimport SelectionsSelectors from '../Selections/selectors';\nimport StylesSelectors from '../Styles/selectors';\n\n/* === SELECTORS ======================================================================= */\n\nconst getSubstate = state => state.maps;\n\nconst getActiveMapKey = state => state.maps.activeMapKey;\nconst getMapsAsObject = state => state.maps.maps;\nconst getMapSetsAsObject = state => state.maps.sets;\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapByKey = createSelector(\n    [\n        getMapsAsObject,\n        (state, key) => key\n    ],\n    (maps, key) => {\n        return maps?.[key] || null;\n    }\n);\n\n/**\n * @param state {Object}\n */\nconst getMapSets = createSelector(\n    [getMapSetsAsObject],\n    (sets) => {\n        if (sets && !_.isEmpty(sets)) {\n            return Object.values(sets);\n        } else {\n            return null;\n        }\n    }\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetByKey = createSelector(\n    [\n        getMapSetsAsObject,\n        (state, key) => key\n    ],\n    (sets, key) => {\n        return sets?.[key] || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetByMapKey = createSelector(\n    [\n        getMapSets,\n        (state, mapKey) => (mapKey)\n    ],\n    (sets, mapKey) => {\n        if (sets && !_.isEmpty(sets) && mapKey) {\n            return _.find(sets, (set) => set.maps && _.includes(set.maps, mapKey)) || null;\n        } else {\n            return null;\n        }\n    }\n);\n\n/**\n * Get active map key for set. Either local, or global.\n *\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetActiveMapKey = createSelector(\n    [\n        getActiveMapKey,\n        getMapSetByKey\n    ],\n    (mapKey, set) => {\n        if (set) {\n            let mapKeyInSet = _.includes(set.maps, mapKey);\n            return set.activeMapKey || (mapKeyInSet && mapKey) || null;\n        } else {\n            return null;\n        }\n    }\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetActiveMapView = createCachedSelector(\n    [\n        getMapSetActiveMapKey,\n        getMapSetByKey,\n        getMapsAsObject\n    ],\n    (mapKey, set, maps) => {\n        let map = maps?.[mapKey];\n        if (map) {\n            return selectorHelpers.getView(map, set);\n        } else {\n            return null;\n        }\n    }\n)((state, setKey) => setKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getViewByMapKey = createCachedSelector(\n    [\n        getMapByKey,\n        getMapSetByMapKey\n    ],\n\tselectorHelpers.getView\n)((state, mapKey) => mapKey);\n\nconst getViewByMapKeyObserver = createRecomputeObserver(getViewByMapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getViewportByMapKey = createCachedSelector(\n    [\n        getMapByKey,\n    ],\n\t(map) => {\n    \treturn map?.data?.viewport || null;\n    }\n)((state, mapKey) => mapKey);\n\nconst getViewportByMapKeyObserver = createRecomputeObserver(getViewportByMapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getViewLimitsByMapKey = createCachedSelector(\n    [\n        getMapByKey,\n        getMapSetByMapKey\n    ],\n    (map, set) => {\n        if (map) {\n            if (set) {\n                let mapViewLimits = map.data?.viewLimits;\n                let mapSetViewLimits = set.data?.viewLimits;\n                return mapViewLimits || mapSetViewLimits || null;\n            } else {\n                return map.data?.viewLimits || null;\n            }\n        } else {\n            return null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetMapKeys = createSelector(\n    [getMapSetByKey],\n    (set) => {\n        return set?.maps?.length ? set.maps : null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetMaps = createSelector(\n\t[\n\t\tgetMapsAsObject,\n\t\tgetMapSetMapKeys\n\t],\n\t(maps, mapKeys) => {\n\t\tif (maps && mapKeys?.length) {\n\t\t\treturn mapKeys.map(key => maps[key]);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetView = createSelector(\n    [\n        getMapSetByKey\n    ],\n    (set) => {\n        if (set) {\n            return mapUtils.view.mergeViews(mapConstants.defaultMapView, set.data?.view);\n        } else {\n            return null;\n        }\n    }\n);\n\n/**\n * @param state {Object}\n * @param setKey {string}\n */\nconst getMapSetViewLimits = createSelector(\n    [\n        getMapSetByKey\n    ],\n    (set) => {\n        return set?.data?.viewLimits || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapBackgroundLayerStateByMapKey = createSelector(\n    [\n        getMapByKey\n    ],\n    (map) => {\n        return map?.data?.backgroundLayer || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapLayersStateByMapKey = createSelector(\n    [\n        getMapByKey\n    ],\n    (map) => {\n        return map?.data?.layers || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetBackgroundLayerStateByMapKey = createSelector(\n    [\n        getMapSetByMapKey\n    ],\n    (set) => {\n        return set?.data?.backgroundLayer || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetLayersStateByMapKey = createSelector(\n    [\n        getMapSetByMapKey\n    ],\n    (set) => {\n        return set?.data?.layers || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapMetadataModifiersByMapKey = createSelector(\n    [\n        getMapByKey\n    ],\n    (map) => {\n        return map?.data?.metadataModifiers || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetMetadataModifiersByMapKey = createSelector(\n    [\n        getMapSetByMapKey\n    ],\n    (set) => {\n        return set?.data?.metadataModifiers || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMetadataModifiersByMapKey = createCachedSelector(\n    [\n        getMapMetadataModifiersByMapKey,\n        getMapSetMetadataModifiersByMapKey\n    ],\n    (mapModifiers, setModifiers) => {\n        if (mapModifiers && setModifiers) {\n            return {...setModifiers, ...mapModifiers};\n        } else {\n            return setModifiers || mapModifiers || null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapFilterByActiveByMapKey = createSelector(\n    [\n        getMapByKey\n    ],\n    (map) => {\n        return map?.data?.filterByActive || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getMapSetFilterByActiveByMapKey = createSelector(\n    [\n        getMapSetByMapKey\n    ],\n    (set) => {\n        return set?.data?.filterByActive || null;\n    }\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getFilterByActiveByMapKey = createCachedSelector(\n    [\n        getMapFilterByActiveByMapKey,\n        getMapSetFilterByActiveByMapKey\n    ],\n    (mapFilter, setFilter) => {\n        if (mapFilter && setFilter) {\n            return {...mapFilter, ...setFilter};\n        } else {\n            return setFilter || mapFilter || null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getBackgroundLayerStateByMapKey = createCachedSelector(\n    [\n        getMapBackgroundLayerStateByMapKey,\n        getMapSetBackgroundLayerStateByMapKey,\n    ],\n    (mapBackgroundLayer, setBackgroundLayer) => {\n        return mapBackgroundLayer || setBackgroundLayer || null;\n    }\n)((state, mapKey) => mapKey);\n\nconst getBackgroundLayerStateByMapKeyObserver = createRecomputeObserver(getBackgroundLayerStateByMapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @return {Object} Merged mapSetState with metadataModifiers and filterByActive.\n */\nconst getMapSetLayersStateWithModifiersByMapKey = createCachedSelector(\n    [\n        getMapSetLayersStateByMapKey,\n        getMapSetMetadataModifiersByMapKey,\n        getMapSetFilterByActiveByMapKey\n    ],\n    (setLayers, metadataModifiers, mapSetFilterByActive) => {\n        if (setLayers?.length) {\n            return selectorHelpers.mergeModifiersAndFilterByActiveToLayerStructure(setLayers, metadataModifiers, mapSetFilterByActive);\n        } else {\n            return null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @return {Object} Merged mapState with metadataModifiers and filterByActive.\n */\nconst getMapLayersStateWithModifiersByMapKey = createCachedSelector(\n    [\n        getMapLayersStateByMapKey,\n        getMetadataModifiersByMapKey,\n        getFilterByActiveByMapKey\n    ],\n    (mapLayers, metadataModifiers, mapFilterByActive) => {\n        if (mapLayers?.length) {\n            return selectorHelpers.mergeModifiersAndFilterByActiveToLayerStructure(mapLayers, metadataModifiers, mapFilterByActive);\n        } else {\n            return null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @return {Object} Merged layer state from mapState and mapSetState with metadataModifiers and filterByActive.\n */\nconst getLayersStateByMapKey = createCachedSelector(\n    [\n        getMapSetLayersStateWithModifiersByMapKey,\n        getMapLayersStateWithModifiersByMapKey\n    ],\n    (setLayers, mapLayers) => {\n        if (mapLayers && setLayers) {\n            return [...setLayers, ...mapLayers]\n        } else if (mapLayers) {\n            return mapLayers;\n        } else if (setLayers) {\n            return setLayers;\n        }  else {\n            return null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\nconst getLayersStateByMapKeyObserver = createRecomputeObserver(getLayersStateByMapKey);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n * @param layerKey {string}\n * @return {Object | null}\n */\nconst getLayerStateByLayerKeyAndMapKey = createSelector(\n\t[\n\t\tgetLayersStateByMapKey,\n\t\t(state, mapKey, layerKey) => layerKey\n\t],\n\t(layers, layerKey) => {\n\t\tif (layers) {\n\t\t\tconst layer = _.find(layers, layer => layer.key === layerKey);\n\t\t\treturn layer || null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param mapKey {string}\n */\nconst getAllLayersStateByMapKey = createCachedSelector(\n    [\n        getBackgroundLayerStateByMapKey,\n        getLayersStateByMapKey\n    ],\n    (backgroundLayer, layers) => {\n        if (layers || backgroundLayer) {\n            return selectorHelpers.mergeBackgroundLayerWithLayers(backgroundLayer, layers);\n        } else {\n            return null;\n        }\n    }\n)((state, mapKey) => mapKey);\n\n/**\n * @param layerState {Object}\n */\nconst getSpatialRelationsFilterFromLayerState = createRecomputeSelector((layerState) => {\n\tif (layerState) {\n\t\t// TODO at least a part is the same as in Maps/actions/layerUse?\n\t\tconst layer = layerState;\n\n\t\t// modifiers defined by key\n\t\tlet metadataDefinedByKey = layer.metadataModifiers ? {...layer.metadataModifiers} : {};\n\n\t\t// Get actual metadata keys defined by filterByActive\n\t\tconst activeMetadataKeys = common.getActiveKeysByFilterByActiveObserver(layer.filterByActive);\n\n\t\t// Merge metadata, metadata defined by key have priority\n\t\tconst mergedMetadataKeys = commonHelpers.mergeMetadataKeys(metadataDefinedByKey, activeMetadataKeys);\n\n\t\t// It converts modifiers from metadataKeys: [\"A\", \"B\"] to metadataKey: {in: [\"A\", \"B\"]}\n\t\tlet relationsFilter = commonHelpers.convertModifiersToRequestFriendlyFormat(mergedMetadataKeys);\n\n\t\t// add layerTemplate od areaTreeLevelKey\n\t\tif (layer.layerTemplateKey) {\n\t\t\trelationsFilter.layerTemplateKey = layer.layerTemplateKey;\n\t\t} else if (layer.areaTreeLevelKey) {\n\t\t\trelationsFilter.areaTreeLevelKey = layer.areaTreeLevelKey;\n\t\t}\n\t\treturn relationsFilter;\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * @param layerState {Object}\n */\nconst getAttributeRelationsFilterFromLayerState = createRecomputeSelector((layerState) => {\n    const spatialFilter = getSpatialRelationsFilterFromLayerState(layerState);\n    if(spatialFilter) {\n        const attributeFilter = {...spatialFilter};\n        if(layerState.styleKey) {\n            // add styleKey\n            attributeFilter.styleKey = layerState.styleKey;\n        }\n        return attributeFilter;\n    } else {\n        return null;\n    }\n})\n\n/**\n * @param spatialDataSource {Object}\n * @param layerState {Object} layer definition from state or passed to the Map component\n * @param layerKey {string} layer unique identifier\n * @param attributeDataSourceKeyAttributeKeyPairs {Object} key-value pairs, where key is attribute data source key and value is matching attribute key\n * @param mapKey {string} map unique identifier\n * @param spatialRelationsFilter {Object} see getSpatialRelationsFilterFromLayerState\n * @param attributeRelationsFilter {Object} see getAttributeRelationsFilterFromLayerState\n */\nconst getFinalLayerByDataSourceAndLayerState = createRecomputeSelector((spatialDataSource, layerState, layerKey, attributeDataSourceKeyAttributeKeyPairs, mapKey, spatialRelationsFilter, attributeRelationsFilter) => {\n\tlet {attribution, nameInternal, type, fidColumnName, geometryColumnName,  ...dataSourceOptions} = spatialDataSource?.data;\n\tlet {key, name, opacity, styleKey, renderAsType, options: layerStateOptions} = layerState;\n\n\tlayerKey = layerKey || key;\n\n\t// TODO temporary for development. Next, could be data source type rewritten in layer state (e.g. vector -> tiled-vector?)\n\tif (renderAsType) {\n\t\ttype = renderAsType;\n\t}\n\n\tlet options = {...dataSourceOptions, ...layerStateOptions};\n\n\tif (type === 'wmts') {\n\t\toptions.url = dataSourceOptions.url || dataSourceOptions.urls[0];\n\t} else if (type === 'wms') {\n\t\tconst {url, params, configuration, ...rest} = dataSourceOptions;\n\t\tconst singleTile = configuration && configuration.hasOwnProperty('singleTile') ? configuration.singleTile : false;\n\n\t\toptions = {\n\t\t\tparams: {\n\t\t\t\t...params,\n\t\t\t\tlayers: rest.layers,\n\t\t\t\tstyles: rest.styles,\n\t\t\t},\n\t\t\tsingleTile,\n\t\t\turl\n\t\t}\n\t} else if (type === \"vector\" || type === \"tiled-vector\" ) {\n\t\tlet features, tiles = null;\n\n\t\tif (type === \"vector\") {\n\t\t\tfeatures = DataSelectors.getFeatures(spatialDataSource.key, fidColumnName, attributeDataSourceKeyAttributeKeyPairs);\n\t\t} else if (type === \"tiled-vector\") {\n\t\t\tconst view = getViewByMapKeyObserver(mapKey);\n\t\t\tconst viewport = getViewportByMapKeyObserver(mapKey);\n\t\t\tconst tileList = selectorHelpers.getTiles(viewport.width, viewport.height, view.center, view.boxRange);\n\t\t\tconst level = selectorHelpers.getZoomLevel(viewport.width, viewport.height, view.boxRange);\n\t\t\ttiles = DataSelectors.getTiles(spatialDataSource.key, fidColumnName, level, tileList, spatialRelationsFilter, attributeRelationsFilter, attributeDataSourceKeyAttributeKeyPairs, styleKey);\n\t\t}\n\n\t\tlet selected = null;\n\t\tlet style = options?.style;\n\n\t\tif (options?.selected) {\n\t\t\tselected = SelectionsSelectors.prepareSelectionByLayerStateSelected(options.selected);\n\t\t}\n\n\t\tif (!style && styleKey) {\n\t\t\tstyle = StylesSelectors.getDefinitionByKey(styleKey);\n\t\t}\n\n\t\toptions = {\n\t\t\t...options,\n\t\t\t...(selected && {selected}),\n\t\t\t...(style && {style}),\n\t\t\t...(features && {features}),\n\t\t\t...(tiles && {tiles}),\n\t\t\tfidColumnName,\n\t\t\tgeometryColumnName\n\t\t};\n\t}\n\n\treturn {\n\t\tkey: layerKey + '_' + spatialDataSource.key,\n\t\tlayerKey,\n\t\topacity: opacity || 1,\n\t\tname,\n\t\ttype,\n\t\toptions\n\t};\n});\n\n/**\n * @param mapKey {string} map unique identifier\n * @param layerState {Object} layer definition in state (see getBackgroundLayerState) or passed to the Map component\n * @return {Array} It returns a list of end format definitions of the background layer (per data source). See: https://gisat.github.io/ > Architecture > System data types > Layers\n */\nconst getMapBackgroundLayer = createRecomputeSelector((mapKey, layerState) => {\n\tif (!layerState) {\n\t\tlayerState = getBackgroundLayerStateByMapKeyObserver(mapKey);\n\t}\n\n\tif (layerState) {\n\t\tif (layerState.type) {\n\t\t\treturn layerState;\n\t\t} else {\n\t\t\tconst layerKey = 'pantherBackgroundLayer';\n\t\t\tconst spatialDataSources = DataSelectors.spatialDataSources.getIndexed(layerState);\n\t\t\tif (spatialDataSources) {\n\t\t\t\treturn spatialDataSources.map(dataSource => {\n\t\t\t\t\tconst dataSourceType = dataSource?.data?.type;\n\n\t\t\t\t\t// TODO currently only wms or wmts is supported; add filterByActive & metadata modifiers to support vectors\n\t\t\t\t\tif (dataSourceType === \"wmts\" || dataSourceType === \"wms\") {\n\t\t\t\t\t\treturn getFinalLayerByDataSourceAndLayerState(dataSource, layerState, layerKey);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn null;\n\t}\n});\n\n/**\n * @param mapKey {string} map unique identifier\n * @param layerState {Object} layer definition in state (see getBackgroundLayerState) or passed to the Map component\n * @return {Array} It returns a list of end format definitions of the background layer (per data source). See: https://gisat.github.io/ > Architecture > System data types > Layers\n */\nconst getMapLayers = createRecomputeSelector((mapKey, layersState) => {\n\tif (!layersState) {\n\t\tlayersState = getLayersStateByMapKeyObserver(mapKey);\n\t}\n\n\tif (layersState) {\n\t\tlet finalLayers = [];\n\n\t\t_.forEach(layersState, layerState => {\n\t\t\t// layer is already defined by the end format suitable for presentational map component\n\t\t\tif (layerState.type) {\n\t\t\t\tif (layerState.type === \"vector\" && layerState.options?.selected) {\n\t\t\t\t\tlayerState = {\n\t\t\t\t\t\t...layerState,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t...layerState.options,\n\t\t\t\t\t\t\tselected: SelectionsSelectors.prepareSelectionByLayerStateSelected(layerState.options.selected)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfinalLayers.push(layerState);\n\t\t\t}\n\t\t\t// necessary to assemble data for the end format\n\t\t\telse {\n\t\t\t\tconst spatialRelationsFilter = getSpatialRelationsFilterFromLayerState(layerState);\n\t\t\t\tconst attributeRelationsFilter = getAttributeRelationsFilterFromLayerState(layerState);\n\t\t\t\tconst spatialDataSources = DataSelectors.spatialDataSources.getIndexed(spatialRelationsFilter);\n\t\t\t\tconst attributeDataSourceKeyAttributeKeyPairs = DataSelectors.attributeRelations.getFilteredAttributeDataSourceKeyAttributeKeyPairs(attributeRelationsFilter);\n\t\t\t\tif (spatialDataSources) {\n\t\t\t\t\t_.forEach(spatialDataSources, dataSource => {\n\t\t\t\t\t\tfinalLayers.push(getFinalLayerByDataSourceAndLayerState(dataSource, layerState, null, attributeDataSourceKeyAttributeKeyPairs, mapKey, spatialRelationsFilter, attributeRelationsFilter));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn finalLayers.length ? finalLayers : null;\n\t} else {\n\t\treturn null;\n\t}\n});\n\nexport default {\n    getAllLayersStateByMapKey,\n    getBackgroundLayerStateByMapKey,\n    getFilterByActiveByMapKey,\n\tgetLayerStateByLayerKeyAndMapKey,\n    getLayersStateByMapKey,\n    getMetadataModifiersByMapKey,\n\n    getMapBackgroundLayerStateByMapKey,\n    getMapBackgroundLayer,\n    getMapByKey,\n    getMapFilterByActiveByMapKey,\n    getMapLayersStateByMapKey,\n\tgetMapLayers,\n    getMapLayersStateWithModifiersByMapKey,\n    getMapMetadataModifiersByMapKey,\n\n    getMapSetActiveMapKey,\n    getMapSetActiveMapView,\n    getMapSetBackgroundLayerStateByMapKey,\n    getMapSetByMapKey,\n    getMapSetByKey,\n    getMapSetFilterByActiveByMapKey,\n    getMapSetLayersStateByMapKey,\n    getMapSetLayersStateWithModifiersByMapKey,\n    getMapSetMetadataModifiersByMapKey,\n    getMapSetMapKeys,\n    getMapSetMaps,\n    getMapSets,\n    getMapSetView,\n    getMapSetViewLimits,\n\n    getViewByMapKey,\n    getViewportByMapKey,\n    getViewLimitsByMapKey\n};","import {createSelector} from 'reselect';\nimport common from \"../_common/selectors\";\n\nconst getSubstate = state => state.scopes;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\n\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\nconst getByFilterOrder = common.getByFilterOrder(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\n\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\nconst getIndexed = common.getIndexed(getSubstate);\n\nconst getStateToSave = common.getStateToSave(getSubstate);\n\nconst getActiveScopeConfiguration = createSelector(\n\t[getActive],\n\t(scope) => {\n\t\treturn scope && scope.data && scope.data.configuration ? scope.data.configuration : null;\n\t}\n);\n\nexport default {\n\tgetActive,\n\tgetActiveKey,\n\tgetActiveScopeConfiguration,\n\tgetAll,\n\tgetAllAsObject,\n\n\tgetByFilterOrder,\n\n\tgetDataByKey,\n\tgetByKeys,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\n\tgetIndexed,\n\n\tgetUpdatePermissionByKey,\n\n\tgetStateToSave,\n\tgetSubstate,\n\n\t// TODO handle following obsolete exports\n\tgetActiveScopeData: getActive,\n\tgetActiveScopeKey: getActiveKey,\n\tgetScopes: getAll,\n\tgetScopeData: getByKey,\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\nimport ScopesSelectors from \"../Scopes/selectors\";\nimport {map as mapUtils} from '@gisatcz/ptr-utils';\n\n\nconst getSubstate = state => state.places;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getAllForActiveScope = common.getAllForActiveScope(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActiveKeys = common.getActiveKeys(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getActivePlaces = common.getActiveModels(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\n\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\n// TODO refactor\nconst getPlacesForActiveScope = createSelector(\n\t[getAll, ScopesSelectors.getActiveScopeKey],\n\t(models, activeScopeKey) => {\n\t\treturn _.filter(models, function(model){\n\t\t\treturn model.data && (model.data.dataset === activeScopeKey);\n\t\t});\n\t}\n);\n\nconst getActiveView = createSelector(\n\t[\n\t\tgetActive\n\t],\n\t(place) => {\n\t\tif (place && place.data && place.data.bbox) {\n\t\t\treturn mapUtils.view.getViewFromBoundingBox(place.data.bbox, true);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetPlaces: getAll,\n\tgetAll,\n\tgetAllAsObject,\n\tgetAllForActiveScope,\n\tgetActiveKey,\n\tgetActiveKeys,\n\tgetActive,\n\tgetActivePlaces,\n\tgetActiveView,\n\t\n\tgetByKey: common.getByKey(getSubstate),\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\tgetIndexed: common.getIndexed(getSubstate),\n\tgetPlacesForActiveScope,\n\tgetUpdatePermissionByKey,\n\tgetSubstate\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../../_common/selectors\";\nimport MapsSelectors from \"../../_deprecatedMaps/selectors\";\n\nconst getSubstate = state => state.scenarios.scenarios;\n\nconst isDefaultSituationActive = state => state.scenarios.scenarios.defaultSituationActive;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActiveKeys = common.getActiveKeys(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getActiveScenarios = common.getActiveModels(getSubstate);\n\nconst getByKey = common.getByKey(getSubstate);\n\nconst getEditedAll = common.getEditedAll(getSubstate);\nconst getEditedAllAsObject = common.getEditedAllAsObject(getSubstate);\nconst getEditedByKey = common.getEditedByKey(getSubstate);\n\nconst getEditedKeys = common.getEditedKeys(getSubstate);\n\n/**\n * Select spatial data source for scenario (based on source type)\n */\nconst getPucsScenariosVectorSource = createSelector(\n\t[\n\t\t(state, scenarioKey, defaultSituation) => {return {scenarioKey: scenarioKey, defaultSituation: defaultSituation}}\n\t],\n\t(scenarioData, vectorLayers) => {\n\t\tlet source = null;\n\t\tif (scenarioData.scenarioKey && vectorLayers.length){\n\t\t\tsource = _.find(vectorLayers, {'scenarioKey': scenarioData.scenarioKey});\n\t\t} else if (scenarioData.defaultSituation && vectorLayers.length){\n\t\t\tsource = _.find(vectorLayers, {'scenarioKey': null});\n\t\t}\n\n\t\treturn source ? source : null;\n\t}\n);\n\nexport default {\n\tgetActive,\n\tgetActiveKey,\n\tgetActiveKeys,\n\tgetActiveScenarios,\n\tgetAll,\n\tgetAllAsObject,\n\tgetByKey,\n\tgetEditedAll,\n\tgetEditedAllAsObject,\n\tgetEditedByKey,\n\tgetEditedKeys,\n\n\tgetSubstate,\n\tisDefaultSituationActive,\n\tgetPucsScenariosVectorSource\n}","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../../_common/selectors\";\n\nimport PlacesSelectors from \"../../Places/selectors\";\nimport ScenariosSelectors from \"../../Scenarios/scenarios/selectors\";\n\nconst getSubstate = state => state.scenarios.cases;\n\nconst getAll = common.getAll(getSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\nconst getEditedAll = common.getEditedAll(getSubstate);\nconst getEditedActive = common.getEditedActive(getSubstate);\n\nconst activeCaseScenariosLoaded = createSelector(\n\t[getActive],\n\t(activeCase) => {\n\t\treturn activeCase && activeCase.data && activeCase.data.scenariosLoaded ? activeCase.data.scenariosLoaded : false;\n\t}\n);\n\n/**\n * It should select scenario keys of active case from byKey\n */\nconst getActiveCaseScenarioKeys = createSelector(\n\t[getActive],\n\t(activeCase) => {\n\t\treturn (activeCase && activeCase.data && activeCase.data.scenarios) ? activeCase.data.scenarios : null;\n\t}\n);\n\n/**\n * It should select scenario keys of active case from editedByKey\n */\nconst getActiveCaseEditedScenarioKeys = createSelector(\n\t[getEditedActive],\n\t(activeCaseEdited) => {\n\t\treturn (activeCaseEdited && activeCaseEdited.data && activeCaseEdited.data.scenarios) ? activeCaseEdited.data.scenarios : null;\n\t}\n);\n\n/**\n * It should select scenario models for active case\n */\nconst getActiveCaseScenarios = createSelector(\n\t[ScenariosSelectors.getAllAsObject, getActiveCaseScenarioKeys],\n\t(scenarios, activeCaseScenarioKeys) => {\n\t\tif (scenarios && !_.isEmpty(scenarios) && activeCaseScenarioKeys){\n\t\t\tlet selectedModels = _.pick(scenarios, activeCaseScenarioKeys);\n\t\t\treturn selectedModels && !_.isEmpty(selectedModels) ? Object.values(selectedModels) : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * It should select keys of edited scenarios for active case\n */\nconst getActiveCaseScenariosEditedKeys = createSelector(\n\t[getActive, ScenariosSelectors.getEditedKeys],\n\t(activeCase, scenariosEditedKeys) => {\n\t\tif (activeCase && activeCase.data && activeCase.data.scenarios && scenariosEditedKeys){\n\t\t\tlet commonKeys = _.intersection(activeCase.data.scenarios, scenariosEditedKeys);\n\t\t\treturn commonKeys && commonKeys.length ? commonKeys : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * It should select edited scenarios data for active case\n */\nconst getActiveCaseScenariosEdited = createSelector(\n\t[ScenariosSelectors.getEditedAllAsObject, getActiveCaseScenarioKeys, getActiveCaseEditedScenarioKeys],\n\t(scenariosEdited, activeCaseScenarioKeys, activeCaseEditedScenarioKeys) => {\n\t\tif (scenariosEdited && !_.isEmpty(scenariosEdited)){\n\t\t\tlet keys = [];\n\t\t\tif (activeCaseScenarioKeys && activeCaseEditedScenarioKeys){\n\t\t\t\tkeys = [...activeCaseScenarioKeys, ...activeCaseEditedScenarioKeys];\n\t\t\t} else if (activeCaseScenarioKeys && !activeCaseEditedScenarioKeys){\n\t\t\t\tkeys = activeCaseScenarioKeys;\n\t\t\t} else if (!activeCaseScenarioKeys && activeCaseEditedScenarioKeys){\n\t\t\t\tkeys = activeCaseEditedScenarioKeys;\n\t\t\t}\n\n\t\t\tlet selectedEditedModels = _.pick(scenariosEdited, keys);\n\t\t\treturn selectedEditedModels && !_.isEmpty(selectedEditedModels) ? Object.values(selectedEditedModels) : null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * It should select first edited scenario for active case\n * TODO clarify usage\n */\nconst getActiveCaseScenarioEdited = createSelector(\n\t[getActiveCaseScenariosEdited],\n\t(scenariosEdited) => {\n\t\tif (scenariosEdited && scenariosEdited.length === 1){\n\t\t\treturn scenariosEdited[0];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * Select all cases for active place\n */\nconst getActivePlaceCases = createSelector(\n\t[getAll, PlacesSelectors.getActiveKey],\n\t(cases, activePlaceKey) => {\n\t\tif (cases && cases.length && activePlaceKey){\n\t\t\treturn _.filter(cases, (caseItem) => {\n\t\t\t\treturn _.includes(caseItem.data.place_ids, activePlaceKey);\n\t\t\t});\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n);\n\nexport default {\n\tgetActive,\n\tgetActiveKey,\n\tgetAll,\n\tgetByKey,\n\tgetEditedAll,\n\n\tactiveCaseScenariosLoaded,\n\tgetActiveCaseEdited: getEditedActive,\n\tgetActiveCaseEditedScenarioKeys,\n\tgetActiveCaseScenarioKeys,\n\tgetActiveCaseScenarioEdited,\n\tgetActiveCaseScenarios,\n\tgetActiveCaseScenariosEdited,\n\tgetActiveCaseScenariosEditedKeys,\n\tgetActivePlaceCases,\n\n\tgetSubstate\n}","import casesSelectors from './cases/selectors';\nimport scenariosSelectors from './scenarios/selectors';\n\nexport default {\n\tcases: casesSelectors,\n\tscenarios: scenariosSelectors\n};","import _ from 'lodash';\nimport {createSelector} from 'reselect';\n\nconst getAllScreensAsObject = state => state.screens.screens;\nconst getAllSetsAsObject = state => state.screens.sets;\n\n/**\n * @param state {Object}\n * @param key {string} set key\n */\nconst getSetByKey = createSelector(\n\t[\n\t\tgetAllSetsAsObject,\n\t\t(state, key) => key\n\t],\n\t/**\n\t * @param sets {Object} all sets as object\n\t * @param key {string} set key\n\t * @return {Object | null} selected object\n\t */\n\t(sets, key) => {\n\t\tif (sets && !_.isEmpty(sets) && key && sets[key]) {\n\t\t\treturn sets[key];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param key {string} set key\n */\nconst getScreensBySetKey = createSelector(\n\t[\n\t\tgetSetByKey,\n\t\tgetAllScreensAsObject\n\t],\n\t/**\n\t * @param set {Object} set\n\t * @param screens {Object} all screens as object\n\t * @return {null | Object} selected screen\n\t */\n\t(set, screens) => {\n\t\tif (set) {\n\t\t\tlet setScreens = {};\n\t\t\t_.each(set.orderBySpace, (lineage) => {\n\t\t\t\tsetScreens[lineage] = screens[lineage];\n\t\t\t});\n\t\t\treturn setScreens;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n/**\n * @param state {Object}\n * @param screenLineage {string}\n */\nconst getSetKeyByScreenLineage = createSelector(\n\t[\n\t\tgetAllSetsAsObject,\n\t\t(state, screenLineage) => screenLineage\n\t],\n\t/**\n\t * @param sets {Object} all sets as object\n\t * @param lineage {string}\n\t * @return {string | null} screen set key\n\t */\n\t(sets, lineage) => {\n\t\tlet setKey = null;\n\n\t\t_.forIn(sets, (value, key) => {\n\t\t\tif (_.includes(value.orderByHistory, lineage)) {\n\t\t\t\tsetKey = key;\n\t\t\t}\n\t\t});\n\n\t\treturn setKey;\n\t}\n);\n\n/**\n * @param state {Object}\n * @param screenLineage {string}\n */\nconst getScreenByLineage = createSelector(\n\t[\n\t\tgetAllScreensAsObject,\n\t\t(state, lineage) => (lineage)\n\t],\n\t/**\n\t * @param screens {object} all screens as object\n\t * @param lineage {string}\n\t * @return {Object | null} screen\n\t */\n\t(screens, lineage) => {\n\t\tif (screens && !_.isEmpty(screens) && lineage && screens[lineage]) {\n\t\t\treturn screens[lineage];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nexport default {\n\tgetScreenByLineage,\n\tgetScreensBySetKey,\n\tgetSetByKey,\n\tgetSetKeyByScreenLineage\n}","import common from '../_common/selectors';\n\nconst getSubstate = state => state.snapshots;\n\nconst getAll = common.getAll(getSubstate);\n\nexport default {\n\tgetAll\n}","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\n\nconst getSubstate = state => state.tags;\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\n\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\n\nconst getIndexed = common.getIndexed(getSubstate);\n\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\n\nexport default {\n\tgetAll,\n\tgetAllAsObject,\n\tgetByKey,\n\tgetByKeys,\n\n\tgetDataByKey,\n\tgetDeletePermissionByKey,\n\n\tgetEditedDataByKey,\n\tgetIndexed,\n\tgetUpdatePermissionByKey,\n\n\tgetSubstate,\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from 're-reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\nimport ScopeSelectors from '../Scopes/selectors';\n\nconst DEFAULT_CATEGORY = 'metadata';\n\nconst getSubstate = state => state.users;\nconst getGroupsSubstate = state => state.users.groups;\n\nconst getAll = common.getAll(getSubstate);\nconst getGroups = common.getAll(getGroupsSubstate);\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActive = common.getActive(getSubstate);\nconst getByKey = common.getByKey(getSubstate);\n\nconst isLoggedIn = state => !!state.users.activeKey;\nconst isAdmin = state => state.users.isAdmin;\n\n\nconst getById = createSelector(\n\t[\n\t\tgetAll,\n\t\t(state, userId) => userId,\n\t],\n\t(users, userId) => {\n\t\tif (users, userId) {\n\t\t\treturn users.find(user => user.id === userId);\n\t\t}\n\t\treturn false;\n\t}\n);\n\nconst isAdminGroupMember = createSelector(\n\t[getActive],\n\t(user) => {\n\t\tif (user) {\n\t\t\treturn _.includes(user.groups, 1);\n\t\t}\n\t\treturn false;\n\t}\n);\n\nconst getActiveUserPermissions = createSelector(\n\t[getActive],\n\t(user) => {\n\t\tif (user && user.permissions){\n\t\t\treturn user.permissions;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst isAdminOrAdminGroupMember = createSelector(\n\t[isAdmin, isAdminGroupMember],\n\t(isAdmin, isAdminGroupMember) => {\n\t\treturn isAdmin || isAdminGroupMember;\n\t}\n);\n\nconst getGroupKeysForActiveUser = createSelector(\n\t[getActive],\n\t(activeUser) => {\n\t\tif (activeUser && activeUser.groups) {\n\t\t\treturn activeUser.groups;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n);\n\nconst hasActiveUserPermissionToCreate = createSelector(\n\t[\n\t\tgetActiveUserPermissions,\n\t\t(state, type) => type,\n\t\t(state, type, category) => category\n\t],\n\t(permissions, type, category = DEFAULT_CATEGORY) => {\n\t\treturn (type && permissions && permissions[category] && permissions[category][type] && permissions[category][type].create);\n\t}\n);\n\nconst isDromasAdmin = state => {\n\tlet isDromasAdmin = false;\n\tif (state.users && state.users.data && state.users.data.length) {\n\t\tconst currentUser = state.users.data.filter(user => user.key === state.users.activeKey);\n\t\tif (currentUser.length > 0) {\n\t\t\tcurrentUser[0].groups.forEach(group => {\n\t\t\t\tif (group.name === 'Aktualizace LPIS Gisat admin') {\n\t\t\t\t\tisDromasAdmin = true;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\treturn isDromasAdmin || state.users.isAdmin;\n};\n\nconst getActiveUserDromasLpisChangeReviewGroup = createSelector(\n\t[getGroupKeysForActiveUser, ScopeSelectors.getActiveScopeConfiguration],\n\t(activeUserGroupKeys, activeScopeConfiguration) => {\n\t\tif (_.includes(activeUserGroupKeys, activeScopeConfiguration.dromasLpisChangeReview.groups.gisatAdmins)) {\n\t\t\treturn 'gisatAdmins';\n\t\t} else if (_.includes(activeUserGroupKeys, activeScopeConfiguration.dromasLpisChangeReview.groups.szifAdmins)) {\n\t\t\treturn 'szifAdmins';\n\t\t} else if (_.includes(activeUserGroupKeys, activeScopeConfiguration.dromasLpisChangeReview.groups.gisatUsers)) {\n\t\t\treturn 'gisatUsers';\n\t\t} else if (_.includes(activeUserGroupKeys, activeScopeConfiguration.dromasLpisChangeReview.groups.szifUsers)) {\n\t\t\treturn 'szifUsers';\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\n\nexport default {\n\tgetAll,\n\n\tgetActive,\n\tgetByKey,\n\tgetById,\n\n\tgetActiveKey: getActiveKey,\n\tgetActiveUser: getActive,\n\tgetGroupKeysForActiveUser: getGroupKeysForActiveUser,\n\tgetGroupsForActiveUser: getGroupKeysForActiveUser,\n\tgetUsers: getAll,\n\tgetGroups: getGroups,\n\tgetSubstate: getSubstate,\n\tgetGroupsSubstate,\n\n\thasActiveUserPermissionToCreate,\n\n\tisAdmin: isAdmin,\n\tisAdminGroupMember: isAdminGroupMember,\n\tisAdminOrAdminGroupMember: isAdminOrAdminGroupMember,\n\tisLoggedIn: isLoggedIn,\n\tisDromasAdmin: isDromasAdmin,\n\n\tgetActiveUserDromasLpisChangeReviewGroup: getActiveUserDromasLpisChangeReviewGroup\n};","import {createSelector} from 'reselect';\nimport _ from 'lodash';\n\nimport common from \"../_common/selectors\";\n\nimport attributesSelectors from '../Attributes/selectors';\nimport attributeSetsSelectors from '../AttributeSets/selectors';\nimport componentsSelectors from '../Components/selectors';\nimport scopesSelectors from '../Scopes/selectors';\n\nconst getSubstate = state => state.views;\n\nconst getActiveKey = common.getActiveKey(getSubstate);\nconst getActiveKeys = common.getActiveKeys(getSubstate);\n\nconst getAll = common.getAll(getSubstate);\nconst getAllAsObject = common.getAllAsObject(getSubstate);\n\nconst getByKey = common.getByKey(getSubstate);\nconst getByKeys = common.getByKeys(getSubstate);\n\nconst getDataByKey = common.getDataByKey(getSubstate);\nconst getEditedDataByKey = common.getEditedDataByKey(getSubstate);\n\nconst getDeletePermissionByKey = common.getDeletePermissionByKey(getSubstate);\nconst getUpdatePermissionByKey = common.getUpdatePermissionByKey(getSubstate);\n\nconst getStateToSave = createSelector(\n\t[\n\t\tattributesSelectors.getStateToSave,\n\t\tattributeSetsSelectors.getStateToSave,\n\t\tcomponentsSelectors.getStateToSave,\n\t\tscopesSelectors.getStateToSave,\n\t],\n\t(attributes, attributeSets, components, scopes) => {\n\t\treturn {\n\t\t\tattributes,\n\t\t\tattributeSets,\n\t\t\tcomponents,\n\t\t\tscopes\n\t\t}\n\t}\n);\n\nexport default {\n\tgetActiveKey,\n\tgetActiveKeys,\n\tgetByKeys,\n\tgetDataByKey,\n\tgetEditedDataByKey,\n\tgetViewsData: getByKey,\n\n\tgetAll,\n\tgetAllAsObject,\n\n\tgetDeletePermissionByKey,\n\tgetUpdatePermissionByKey,\n\n\tgetStateToSave,\n\n\tgetSubstate,\n};","import _ from 'lodash';\nimport {createSelector} from 'reselect';\n\nconst getAllSetsAsObject = state => state.windows.sets;\nconst getAllWindowsAsObject = state => state.windows.windows;\n\nconst getSetByKey = createSelector(\n\t[\n\t\tgetAllSetsAsObject,\n\t\t(state, key) => key\n\t],\n\t(sets, key) => {\n\t\treturn sets && sets[key];\n\t}\n);\n\nconst getWindow = createSelector(\n\t[\n\t\tgetAllWindowsAsObject,\n\t\t(state, key) => key\n\t],\n\t(windows, key) => {\n\t\treturn windows && windows[key];\n\t}\n);\n\nconst getWindowsBySetKeyAsObject = createSelector(\n\t[\n\t\tgetSetByKey,\n\t\tgetAllWindowsAsObject\n\t],\n\t(set, windows) => {\n\t\tif (set && set.orderByHistory && set.orderByHistory.length) {\n\t\t\tlet setWindows = {};\n\t\t\t_.each(set.orderByHistory, (key) => {\n\t\t\t\tsetWindows[key] = windows[key];\n\t\t\t});\n\t\t\treturn setWindows;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n);\n\nconst isOpen = createSelector(\n\t[getWindow],\n\t(window) => {\n\t\treturn window && window.data && window.data.state === 'open';\n\t}\n);\n\nexport default {\n\tgetSetByKey,\n\tgetWindow,\n\tgetWindowsBySetKeyAsObject,\n\tisOpen\n}","import _deprecatedSelections from './_deprecatedSelections/selectors';\nimport _deprecatedMaps from './_deprecatedMaps/selectors';\n\nimport App from './App/selectors';\nimport Areas from './Areas/selectors';\nimport AreaRelations from './AreaRelations/selectors';\nimport Attributes from './Attributes/selectors';\nimport AttributeDataSources from './AttributeDataSources/selectors';\nimport AttributeData from './AttributeData/selectors';\nimport AttributeRelations from './AttributeRelations/selectors';\nimport AttributeSets from './AttributeSets/selectors';\nimport AttributeStatistics from './AttributeStatistics/selectors';\nimport Cases from './Cases/selectors';\nimport Charts from './Charts/selectors';\nimport Components from './Components/selectors';\nimport Data from './Data/selectors';\nimport LayerPeriods from './LayerPeriods/selectors';\nimport LayerTemplates from './LayerTemplates/selectors';\nimport LayerTrees from './LayerTrees/selectors';\nimport Maps from './Maps/selectors';\nimport Periods from './Periods/selectors';\nimport Places from './Places/selectors';\nimport Scenarios from './Scenarios/selectors';\nimport Scopes from './Scopes/selectors';\nimport Screens from './Screens/selectors';\nimport Selections from './Selections/selectors';\nimport Snapshots from './Snapshots/selectors';\nimport SpatialData from './SpatialData/selectors';\nimport SpatialDataSources from './SpatialDataSources/selectors';\nimport SpatialRelations from './SpatialRelations/selectors';\nimport Styles from './Styles/selectors';\nimport Tags from './Tags/selectors';\nimport Users from './Users/selectors';\nimport Views from './Views/selectors';\nimport Windows from './Windows/selectors';\n\nexport default {\n\t_deprecatedSelections: _deprecatedSelections,\n    _deprecatedMaps: _deprecatedMaps,\n\tapp: App,\n\tareas: Areas,\n\tareaRelations: AreaRelations,\n\tattributes: Attributes,\n\tattributeData: AttributeData,\n\tattributeDataSources: AttributeDataSources,\n\tattributeStatistics: AttributeStatistics,\n\tattributeRelations: AttributeRelations,\n\tattributeSets: AttributeSets,\n\tcases: Cases,\n\tcharts: Charts,\n\tcomponents: Components,\n\tdata: Data,\n\tlayerPeriods: LayerPeriods,\n\tlayerTemplates: LayerTemplates,\n\tlayerTrees: LayerTrees,\n    maps: Maps,\n\tperiods: Periods,\n\tplaces: Places,\n\tscenarios: Scenarios,\n\tscopes: Scopes,\n\tscreens: Screens,\n\tselections: Selections,\n\tsnapshots: Snapshots,\n\tspatialData: SpatialData,\n\tspatialDataSources: SpatialDataSources,\n\tspatialRelations: SpatialRelations,\n\tstyles: Styles,\n\ttags: Tags,\n\tusers: Users,\n\tviews: Views,\n\twindows: Windows\n};","import {createSelector} from 'reselect';\nimport createCachedSelector from \"re-reselect\";\n\nconst getEurope = state => state.countries.europe;\nconst getAfrica = state => state.countries.africa;\nconst getAsia = state => state.countries.asia;\n\nconst getEuropeCountryByKey = createCachedSelector(\n    [\n        getEurope,\n        (state, key) => key\n    ],\n    (europe, key) => {\n        if (europe && key) {\n            return {\n                ...europe[key],\n                case: \"European country\",\n            }\n        } else {\n            return null;\n        }\n    }\n)((state, key) => key);\n\nconst getAfricaCountryByKey = createCachedSelector(\n    [\n        getAfrica,\n        (state, key) => key\n    ],\n    (africa, key) => {\n        if (africa && key) {\n            return {\n                ...africa[key],\n                case: \"African country\",\n            }\n        } else {\n            return null;\n        }\n    }\n)((state, key) => key);\n\nconst getAsiaCountryByKey = createCachedSelector(\n    [\n        getAsia,\n        (state, key) => key\n    ],\n    (asia, key) => {\n        if (asia && key) {\n            return {\n                ...asia[key],\n                case: \"Asian country\",\n            }\n        } else {\n            return null;\n        }\n    }\n)((state, key) => key);\n\nconst getThreeCountries = createCachedSelector(\n    [\n        (state, europeKey) => getEuropeCountryByKey(state, europeKey),\n        (state, europeKey, africaKey) => getAfricaCountryByKey(state, africaKey),\n        (state, europeKey, africaKey, asiaKey) => getAsiaCountryByKey(state, asiaKey),\n    ],\n    (europeanCountry, africanCountry, asianCountry) => {\n        return [europeanCountry, africanCountry, asianCountry];\n    }\n)((state, europeKey, africaKey, asiaKey) => `${europeKey}_${africaKey}_${asiaKey}`);\n\nexport default {\n    countries: {\n        getEuropeCountryByKey,\n        getAfricaCountryByKey,\n        getAsiaCountryByKey,\n        getThreeCountries\n    }\n}","import {assert} from 'chai';\n\nfunction testCache(testingFunction, params, expectedResult, otherParams) {\n    it('should be cached', () => {\n        if (!otherParams) {\n            otherParams = params.map(param => null);\n        }\n\n        // first run of the selector should return computed value\n        const firstOutput = testingFunction(...params);\n        assert.deepStrictEqual(expectedResult, firstOutput);\n        assert.notEqual(expectedResult, firstOutput);\n\n        // second run to simulate different params\n        testingFunction(...otherParams);\n\n        // third run with the same params as the first one should return cached value\n        const thirdOutput = testingFunction(...params);\n        assert.equal(firstOutput, thirdOutput);\n    });\n}\n\nexport default {\n    testCache\n}","import Select from \"../../src/state/Select\";\nimport {assert} from \"chai\";\nimport selectorsCacheTest from \"./selectors\";\nimport testHelpers from \"../helpers\";\n\ndescribe('selectorsCacheTest', function () {\n    const state = {\n        countries: {\n            europe: {\n                germany: {\n                    name: \"Germany\"\n                },\n                france: {\n                    name: \"France\"\n                }\n            },\n            asia: {\n                china: {\n                    name: \"China\"\n                },\n                japan: {\n                    name: \"Japan\"\n                }\n            },\n            africa: {\n                egypt: {\n                    name: \"Egypt\"\n                },\n                mali: {\n                    name: \"Mali\"\n                }\n            }\n        },\n        cities: {\n            newYork: {\n                name: \"\"\n            }\n        }\n    };\n\n    describe('getEuropeCountryByKey', function () {\n        const expectedResult = {\n            case: \"European country\",\n            name: \"Germany\"\n        };\n\n        const updatedState = {\n            ...state,\n            cities: {\n                ...state.cities,\n                prague: {}\n            }\n        }\n\n        it('should return expected country', () => {\n            const output = selectorsCacheTest.countries.getEuropeCountryByKey(state, \"germany\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        testHelpers.testCache(selectorsCacheTest.countries.getEuropeCountryByKey, [state, \"germany\"], expectedResult, [updatedState, \"france\"]);\n\n\n        it('should return cached value', () => {\n            const output = selectorsCacheTest.countries.getEuropeCountryByKey(state, \"germany\");\n            const updatedState2 = {\n                ...state,\n                countries: {\n                    ...state.countries,\n                    europe: {\n                    \t...state.countries.europe,\n\t\t\t\t\t\tczechia: {}\n\t\t\t\t\t}\n                }\n            };\n\n\t\t\tconst midtermOutput = selectorsCacheTest.countries.getEuropeCountryByKey(state, \"france\");\n            const secondOutput = selectorsCacheTest.countries.getEuropeCountryByKey(updatedState2, \"germany\");\n\n            assert.notEqual(output, secondOutput);\n        });\n\n\t\tit('should return cached value', () => {\n\t\t\tconst output = selectorsCacheTest.countries.getEuropeCountryByKey(state, \"germany\");\n\t\t\tconst updatedState = {\n\t\t\t\t...state,\n\t\t\t\tcities: {\n\t\t\t\t\t...state.cities,\n\t\t\t\t\tprague: {}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst secondOutput = selectorsCacheTest.countries.getEuropeCountryByKey(updatedState, \"germany\");\n\n\t\t\tassert.equal(output, secondOutput);\n\t\t});\n    });\n\n    describe('getThreeCountries', function () {\n        const expectedResult = [{\n            case: \"European country\",\n            name: \"Germany\"\n        }, {\n            case: \"African country\",\n            name: \"Egypt\"\n        }, {\n            case: \"Asian country\",\n            name: \"Japan\"\n        }];\n\n        it('should return expected countries', () => {\n            const output = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"egypt\", \"japan\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return expected', () => {\n            const output = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"egypt\", \"japan\");\n            const output2 = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"mali\", \"japan\");\n            const output3 = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"egypt\", \"japan\");\n\n            assert.notEqual(output, output2);\n            assert.equal(output, output3);\n        });\n\n        testHelpers.testCache(selectorsCacheTest.countries.getThreeCountries, [state, \"germany\", \"egypt\", \"japan\"], expectedResult, [state, \"germany\", \"egypt\", \"china\"]);\n\n        it('should return cached value', () => {\n            const output = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"egypt\", \"japan\");\n            const updatedState = {\n                ...state,\n                cities: {\n                    ...state.cities,\n                    prague: {}\n                }\n            };\n\n            const secondOutput = selectorsCacheTest.countries.getThreeCountries(updatedState, \"germany\", \"egypt\", \"japan\");\n\n            assert.equal(output, secondOutput);\n        });\n\n        it('should return cached value 2', () => {\n            const output = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"egypt\", \"japan\");\n            const updatedState = {\n                ...state,\n                countries: {\n                    ...state.countries,\n                    america: {\n\n                    }\n                }\n            };\n\n            const secondOutput = selectorsCacheTest.countries.getThreeCountries(updatedState, \"germany\", \"egypt\", \"japan\");\n\n            assert.equal(output, secondOutput);\n        });\n\n        it('should not return cached value', () => {\n            const output = selectorsCacheTest.countries.getThreeCountries(state, \"germany\", \"egypt\", \"japan\");\n            const updatedState = {\n                ...state,\n                countries: {\n                    ...state.countries,\n                    europe: {\n                        ...state.countries.europe,\n                        spain: {}\n                    }\n                }\n            };\n\n            const secondOutput = selectorsCacheTest.countries.getThreeCountries(updatedState, \"germany\", \"egypt\", \"japan\");\n\n            assert.notEqual(output, secondOutput);\n        });\n    });\n});","import {utils} from '@gisatcz/ptr-utils'\n\nexport default utils.deepKeyMirror({\n\n\tINITIALIZE: 'INITIALIZE',\n\n\tAOI_ADD: 'AOI_ADD',\n\tAOI_SET_ACTIVE: 'AOI_SET_ACTIVE',\n\tAOI_REQUEST: 'AOI_REQUEST',\n\tAOI_RECEIVE: 'AOI_RECEIVE',\n\tAOI_REQUEST_ERROR: 'AOI_REQUEST_ERROR',\n\tAOI_GEOMETRY_RECEIVE: 'AOI_GEOMETRY_RECEIVE',\n\tAOI_GEOMETRY_REQUEST_ERROR: 'AOI_GEOMETRY_REQUEST_ERROR',\n\n\tAPP: {\n\t\tSET_KEY: null,\n\t\tSET_BASE_URL: null,\n\t\tSET_LOCAL_CONFIGURATION: null,\n\t\tUPDATE_LOCAL_CONFIGURATION: null,\n\t\tRECEIVE_CONFIGURATION: null\n\t},\n\n\tAREAS: {\n\t\tAREA_TREE_LEVELS: {\n\t\t\tADD: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tENSURE: {\n\t\t\t\tERROR: null\n\t\t\t},\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t\tCLEAR_ALL: null\n\t\t\t},\n\t\t\tLOAD: {\n\t\t\t\tERROR: null,\n\t\t\t\tREQUEST: null\n\t\t\t},\n\t\t\tSET_ACTIVE_KEY: null,\n\t\t\tUSE: {\n\t\t\t\tINDEXED: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t},\n\t\t\t\tKEYS: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tAREA_TREES: {\n\t\t\tADD: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tENSURE: {\n\t\t\t\tERROR: null\n\t\t\t},\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t\tCLEAR_ALL: null\n\t\t\t},\n\t\t\tLOAD: {\n\t\t\t\tERROR: null,\n\t\t\t\tREQUEST: null\n\t\t\t},\n\t\t\tSET_ACTIVE_KEY: null,\n\t\t\tUSE: {\n\t\t\t\tINDEXED: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t},\n\t\t\t\tKEYS: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tAREA_RELATIONS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tCLEAR_ALL: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tAREAS_SELECTIONS_SET_ACTIVE_MULTIPLE: 'AREAS_SELECTIONS_SET_ACTIVE_MULTIPLE',\n\tAREAS_SELECTIONS_UPDATE: 'AREAS_SELECTIONS_UPDATE',\n\n\tATTRIBUTES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tADD_BATCH: null,\n\t\t\tCLEAR_ALL: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tINDEXED_BATCH: {\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tATTRIBUTE_SETS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\t\n\tCASES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tCHOROPLETHS_SET_ACTIVE_KEYS: 'CHOROPLETHS_SET_ACTIVE_KEYS',\n\tCHOROPLETHS_UPDATE: 'CHOROPLETHS_UPDATE',\n\n\tCOMMON: {\n\t\tDATA: {\n\t\t\tCLEANUP_ON_LOGOUT: null,\n\t\t\tSET_OUTDATED: null\n\t\t},\n\t\tEDITED: {\n\t\t\tREMOVE_PROPERTY_VALUES: null\n\t\t}\n\t},\n\n\tCOMPONENTS: {\n\t\tUPDATE: null,\n\t\tSET: null,\n\t},\n\n\tCHARTS: {\n\t\tUPDATE: null,\n\t\tSET_INITIAL: null\n\t},\n\n    DATA: {\n        ATTRIBUTE_DATA: {\n\t\t\tADD: null,\n\t\t\tADD_WITH_INDEX: null,\n\t\t\tUPDATE: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t\tREMOVE: null,\n\t\t\t},\n\t\t},\n        ATTRIBUTE_DATA_SOURCES: {\n\t\t\tADD: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t},\n\t\t},\n        ATTRIBUTE_RELATIONS: {\n\t\t\tADD: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t},},\n        SPATIAL_DATA: {\n\t\t\tADD: null,\n\t\t\tADD_WITH_INDEX: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t\tREMOVE: null,\n\t\t\t},\n\t\t},\n        SPATIAL_DATA_SOURCES: {\n\t\t\tADD: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t},\n\t\t},\n        SPATIAL_RELATIONS: {\n\t\t\tADD: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t},\n\t\t},\n    },\n\n\tDATAVIEWS_REMOVE: 'DATAVIEWS_REMOVE',\n\tDATAVIEWS_DELETE_RECEIVE: 'DATAVIEWS_DELETE_RECEIVE',\n\tDATAVIEWS_DELETE_REQUEST: 'DATAVIEWS_DELETE_REQUEST',\n\tDATAVIEWS_DELETE_REQUEST_ERROR: 'DATAVIEWS_DELETE_REQUEST_ERROR',\n\n\tDATAVIEWS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tINDICATORS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tLAYER_PERIODS_AOI_LAYER_REQUEST: 'LAYER_PERIODS_AOI_LAYER_REQUEST',\n\tLAYER_PERIODS_AOI_LAYER_REQUEST_ERROR: 'LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR',\n\tLAYER_PERIODS_AOI_LAYER_RECEIVE: 'LAYER_PERIODS_AOI_LAYER_RECEIVE',\n\tLAYER_PERIODS_PLACE_LAYER_REQUEST: 'LAYER_PERIODS_PLACE_LAYER_REQUEST',\n\tLAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR: 'LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR',\n\tLAYER_PERIODS_PLACE_LAYER_RECEIVE: 'LAYER_PERIODS_PLACE_LAYER_RECEIVE',\n\tLAYER_PERIODS_KEY_LAYER_REQUEST: 'LAYER_PERIODS_KEY_LAYER_REQUEST',\n\tLAYER_PERIODS_KEY_LAYER_REQUEST_ERROR: 'LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR',\n\tLAYER_PERIODS_KEY_LAYER_RECEIVE: 'LAYER_PERIODS_KEY_LAYER_RECEIVE',\n\n\tLAYER_TEMPLATES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tMAPS_ADD: 'MAPS_ADD',\n\tMAPS_REMOVE: 'MAPS_REMOVE',\n\tMAPS_UPDATE: 'MAPS_UPDATE',\n\tMAPS_UPDATE_DEFAULTS: 'MAPS_UPDATE_DEFAULTS',\n\tMAPS_SET_ACTIVE: 'MAPS_SET_ACTIVE',\n\tMAPS_SET_INDEPENDENT_OF_PERIOD: 'MAPS_SET_INDEPENDENT_OF_PERIOD',\n\n    MAPS: {\n\t    SET: {\n            SET_ACTIVE_MAP_KEY: null,\n\t\t\tSET_BACKGROUND_LAYER: null,\n            VIEW: {\n                SET: null,\n                UPDATE: null\n            }\n        },\n        MAP: {\n\t    \tLAYERS: {\n\t    \t\tSET_STYLE_KEY: null\n\t\t\t},\n\t    \tVIEWPORT: {\n\t    \t\tSET: null,\n\t\t\t},\n            VIEW: {\n                SET: null,\n                UPDATE: null\n            }\n        },\n        UPDATE: null\n    },\n\n\t_DEPRECATED_MAPS: {\n\t\tSET_INITIAL: null,\n\t\tSET_ACTIVE_MAP_KEY: null,\n\t\tSET_ACTIVE_SET_KEY: null,\n\t\tSET_SCOPE: null,\n\t\tSET_SCENARIO: null,\n\t\tSET_PERIOD: null,\n\t\tSET_PLACE: null,\n\t\tSET_CASE: null,\n\t\tSET_BACKGROUND_LAYER: null,\n\t\tSET: {\n\t\t\tADD: null,\n\t\t\tSET_BACKGROUND_LAYER: null,\n            SET_LAYERS: null,\n\t\t\tREMOVE: null,\n\t\t\tADD_MAP: null,\n\t\t\tSET_MAPS: null,\n\t\t\tREMOVE_MAP: null,\n\t\t\tWORLD_WIND_NAVIGATOR: { // TODO deprecated\n\t\t\t\tSET: null,\n\t\t\t\tUPDATE: null\n\t\t\t},\n\t\t\tVIEW: {\n\t\t\t\tSET: null,\n\t\t\t\tUPDATE: null\n\t\t\t},\n\t\t\tSET_ACTIVE_MAP_KEY: null,\n\t\t\tSET_SYNC: null,\n\t\t},\n\t\tMAP: {\n\t\t\tADD: null,\n\t\t\tLAYERS: {\n\t\t\t\tSET: {\n\t\t\t\t\tHOVERED_FEATURE_KEYS: null,\n\t\t\t\t\tSELECTION: null,\n                    STYLE: null\n\t\t\t\t},\n\t\t\t\tCLEAR: {\n\t\t\t\t\tSELECTION: null\n\t\t\t\t}\n\t\t\t},\n\t\t\tREMOVE: null,\n\t\t\tSET_NAME: null,\n\t\t\tSET_DATA: null,\n\t\t\tWORLD_WIND_NAVIGATOR: { // TODO deprecated\n\t\t\t\tSET: null,\n\t\t\t\tUPDATE: null\n\t\t\t},\n\t\t\tVIEW: {\n\t\t\t\tSET: null,\n\t\t\t\tUPDATE: null\n\t\t\t}\n\t\t},\n        UPDATE: null,\n\n        // TODO deprecated\n\t\tLAYERS: {\n\t\t\tADD_LAYERS: null,\n\t\t\tREMOVE_LAYERS: null,\n\t\t\tLAYER: {\n\t\t\t\tADD: null,\n                ADD_TO_SET: null,\n\t\t\t\tREMOVE: null,\n\t\t\t\tSET: null,\n\t\t\t\tUPDATE: null,\n\t\t\t\tSET_INDEX: null,\n\t\t\t},\n\t\t\tSET: null\n\t\t}\n\t},\n\n\tPERIODS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tPLACES_ADD: 'PLACES_ADD',\n\tPLACES_SET_ACTIVE_MULTI: 'PLACES_SET_ACTIVE_MULTI',\n\n\tPLACES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t},\n\t},\n\n\tREDIRECT_TO_VIEW: 'REDIRECT_TO_VIEW',\n\n\tSCENARIOS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null\n\t},\n\n\tSCENARIOS_ADD: 'SCENARIOS_ADD',\n\tSCENARIOS_EDITED_UPDATE: 'SCENARIOS_EDITED_UPDATE',\n\tSCENARIOS_EDITED_REMOVE: 'SCENARIOS_EDITED_REMOVE',\n\tSCENARIOS_EDITED_REMOVE_PROPERTY: 'SCENARIOS_EDITED_REMOVE_PROPERTY',\n\tSCENARIOS_SET_ACTIVE: 'SCENARIOS_SET_ACTIVE',\n\tSCENARIOS_SET_ACTIVE_MULTI: 'SCENARIOS_SET_ACTIVE_MULTI',\n\tSCENARIOS_SET_DEFAULT_SITUATION_ACTIVE: 'SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE',\n\tSCENARIOS_CASES_ADD: 'SCENARIOS_CASES_ADD',\n\tSCENARIOS_CASES_REMOVE: 'SCENARIOS_CASES_REMOVE',\n\tSCENARIOS_CASES_SET_ACTIVE: 'SCENARIOS_CASES_SET_ACTIVE',\n\tSCENARIOS_UPDATE: 'SCENARIOS_UPDATE',\n\tSCENARIOS_REQUEST: 'SCENARIOS_REQUEST',\n\tSCENARIOS_RECEIVE: 'SCENARIOS_RECEIVE',\n\tSCENARIOS_REQUEST_ERROR: 'SCENARIOS_REQUEST_ERROR',\n\tSCENARIOS_CASES_REQUEST: 'SCENARIOS_CASES_REQUEST',\n\tSCENARIOS_CASES_RECEIVE: 'SCENARIOS_CASES_RECEIVE',\n\tSCENARIOS_CASES_REQUEST_ERROR: 'SCENARIOS_CASES_REQUEST_ERROR',\n\tSCENARIOS_CASES_UPDATE: 'SCENARIOS_CASES_UPDATE',\n\tSCENARIOS_CASES_EDITED_UPDATE: 'SCENARIOS_CASES_EDITED_UPDATE',\n\tSCENARIOS_CASES_EDITED_REMOVE: 'SCENARIOS_CASES_EDITED_REMOVE',\n\tSCENARIOS_CASES_EDITED_REMOVE_ACTIVE: 'SCENARIOS_CASES_EDITED_REMOVE_ACTIVE',\n\tSCENARIOS_CASES_EDITED_REMOVE_PROPERTY: 'SCENARIOS_CASE_EDITED_REMOVE_PROPERTY',\n\n\tSCENARIOS_API_PROCESSING_FILE_STARTED: 'SCENARIOS_API_PROCESSING_FILE_STARTED',\n\tSCENARIOS_API_PROCESSING_FILE_SUCCESS: 'SCENARIOS_API_PROCESSING_FILE_SUCCESS',\n\tSCENARIOS_API_PROCESSING_FILE_ERROR: 'SCENARIOS_API_PROCESSING_FILE_ERROR',\n\n\tSCENARIOS_CASES_API_CREATE_REQUEST: 'SCENARIOS_CASES_API_CREATE_REQUEST',\n\tSCENARIOS_CASES_API_CREATE_RECEIVE: 'SCENARIOS_CASES_API_CREATE_RECEIVE',\n\tSCENARIOS_CASES_API_CREATE_ERROR: 'SCENARIOS_CASES_API_CREATE_ERROR',\n\tSCENARIOS_CASES_API_DELETE_REQUEST: 'SCENARIOS_CASES_API_DELETE_REQUEST',\n\tSCENARIOS_CASES_API_DELETE_RECEIVE: 'SCENARIOS_CASES_API_DELETE_RECEIVE',\n\tSCENARIOS_CASES_API_DELETE_ERROR: 'SCENARIOS_CASES_API_DELETE_ERROR',\n\tSCENARIOS_CASES_API_UPDATE_REQUEST: 'SCENARIOS_CASES_API_UPDATE_REQUEST',\n\tSCENARIOS_CASES_API_UPDATE_RECEIVE: 'SCENARIOS_CASES_API_UPDATE_RECEIVE',\n\tSCENARIOS_CASES_API_UPDATE_ERROR: 'SCENARIOS_CASES_API_UPDATE_ERROR',\n\n\tSCOPES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tSCREENS: {\n\t\tADD: null,\n\t\tCLOSE: null,\n\t\tOPEN: null,\n\t\tREMOVE: null,\n\t\tREMOVE_ALL: null,\n\t\tRETRACT: null,\n\t\tSETS: {\n\t\t\tADD: null,\n\t\t\tREMOVE: null\n\t\t},\n\t\tTOP_HISTORY: null,\n\t\tUPDATE: null\n\t},\n\n\tSELECTIONS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET: {\n\t\t\tFEATURE_KEYS_FILTER: {\n\t\t\t\tKEYS: null\n\t\t\t}\n\t\t},\n        CLEAR: {\n\t\t    FEATURE_KEYS_FILTER: null\n        }\n\t},\n\n\t_DEPRECATED_SELECTIONS: {\n\t\tADD: null,\n\t\tREMOVE: null,\n\t\tSET_ACTIVE_KEY: null,\n\t\tUPDATE_FROM_VIEW: null,\n\t},\n\n\tSPATIAL_RELATIONS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tCLEAR_ALL: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tSPATIAL_DATA: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tUSE: {\n\t\t\tADD: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t},\n\t},\n\n\tSPATIAL_DATA_SOURCES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tUSE: {\n\t\t\tADD: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tINDEXED_BATCH: {\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t},\n\n\n\n\t\tVECTOR: {\n\t\t\tADD: null,\n\t\t\tADD_BATCH: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tENSURE: {\n\t\t\t\tERROR: null\n\t\t\t},\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t\tCLEAR_INDEX: null,\n\t\t\t\tCLEAR_ALL: null,\n\t\t\t\tADD_BATCH: null\n\t\t\t},\n\t\t\tLOAD: {\n\t\t\t\tERROR: null,\n\t\t\t\tREQUEST: null\n\t\t\t},\n\t\t\tUSE: {\n\t\t\t\tINDEXED: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t},\n\t\t\t\tKEYS: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t},\n\t\t\t\tINDEXED_BATCH: {\n\t\t\t\t\tREGISTER: null\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tATTRIBUTE_DATA_SOURCES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tUSE: {\n\t\t\tADD: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tINDEXED_BATCH: {\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\tATTRIBUTE_DATA: {\n\t\tADD: null,\n\t\tADD_BATCH: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null,\n\t\t\tADD_BATCH: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tINDEXED_BATCH: {\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\tATTRIBUTE_STATISTICS: {\n\t\tADD: null,\n\t\tADD_BATCH: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null,\n\t\t\tADD_BATCH: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tINDEXED_BATCH: {\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\tATTRIBUTE_RELATIONS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tCLEAR_ALL: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tSPATIAL_DATA_SOURCES_DOWNLOAD_FILE_ERROR: 'SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_ERROR',\n\tSPATIAL_DATA_SOURCES_DOWNLOAD_FILE_REQUEST: 'SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_REQUEST',\n\tSPATIAL_DATA_SOURCES_RECEIVE: 'SPATIAL_DATA_SOURCES_RECEIVE',\n\tSPATIAL_DATA_SOURCES_REQUEST: 'SPATIAL_DATA_SOURCES_REQUEST',\n\tSPATIAL_DATA_SOURCES_FILTERED_REQUEST: 'SPATIAL_DATA_SOURCES_FILTERED_REQUEST',\n\tSPATIAL_DATA_SOURCES_REQUEST_ERROR: 'SPATIAL_DATA_SOURCES_REQUEST_ERROR',\n\n\tSPATIAL_DATA_SOURCES_ADD: 'SPATIAL_DATA_SOURCES_ADD',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_RECEIVE: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_RECEIVE',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST_ERROR: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST_ERROR',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST_ERROR: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST_ERROR',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_SELECT: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_SELECT',\n\tSPATIAL_DATA_SOURCES_VECTOR_FEATURES_EDITED_ADD: 'SPATIAL_DATA_SOURCES_VECTOR_FEATURES_EDITED_ADD',\n\n\tSTYLES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tCLEAR_ALL: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tSNAPSHOTS_ADD: 'SNAPSHOTS_ADD',\n\tSNAPSHOTS_REMOVE: 'SNAPSHOTS_REMOVE',\n\n\n\tTAGS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tTHEMES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tUSERS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tGROUPS: {\n\t\t\tADD: null,\n\t\t\tADD_UNRECEIVED: null,\n\t\t\tINDEX: {\n\t\t\t\tADD: null,\n\t\t\t\tCLEAR_ALL: null\n\t\t\t},\n\t\t\tUSE: {\n\t\t\t\tINDEXED: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t},\n\t\t\t\tKEYS: {\n\t\t\t\t\tCLEAR: null,\n\t\t\t\t\tREGISTER: null\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tCURRENT: {\n\t\t\tREQUEST: null\n\t\t},\n\t\tLOGIN: {\n\t\t\tREQUEST: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\t//todo which is it? USER_GROUPS or USERS.GROUPS?\n\tUSER_GROUPS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null\n\t},\n\n\tUSERS_ADD: 'USERS_ADD',\n\tUSERS_LOAD_REQUEST: 'USERS_LOAD_REQUEST',\n\tUSERS_LOAD_REQUEST_ERROR: 'USERS_LOAD_REQUEST_ERROR',\n\tUSERS_LOAD_CURRENT_REQUEST: 'USERS_LOAD_CURRENT_REQUEST',\n\tUSERS_LOAD_CURRENT_REQUEST_ERROR: 'USERS_LOAD_CURRENT_REQUEST_ERROR',\n\tUSERS_LOGIN_REQUEST: 'USERS_LOGIN_REQUEST',\n\tUSERS_LOGIN_REQUEST_ERROR: 'USERS_LOGIN_REQUEST_ERROR',\n\tUSERS_LOGOUT_REQUEST: 'USERS_LOGOUT_REQUEST',\n\tUSERS_LOGOUT_REQUEST_ERROR: 'USERS_LOGOUT_REQUEST_ERROR',\n\tUSERS_UPDATE: 'USERS_UPDATE',\n\n\tLAYER_TREES: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t},\n\t},\n\n\tVIEWS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tDELETE: null,\n\t\tMARK_DELETED: null,\n\t\tEDITED: {\n\t\t\tREMOVE: null,\n\t\t\tREMOVE_PROPERTY: null,\n\t\t\tUPDATE: null,\n\t\t},\n\t\tENSURE: {\n\t\t\tERROR: null\n\t\t},\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_INDEX: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tLOAD: {\n\t\t\tERROR: null,\n\t\t\tREQUEST: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tSET_ACTIVE_KEYS: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tVISUALIZATIONS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tWMS_LAYERS: {\n\t\tADD: null,\n\t\tADD_UNRECEIVED: null,\n\t\tINDEX: {\n\t\t\tADD: null,\n\t\t\tCLEAR_ALL: null\n\t\t},\n\t\tSET_ACTIVE_KEY: null,\n\t\tUSE: {\n\t\t\tINDEXED: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t},\n\t\t\tKEYS: {\n\t\t\t\tCLEAR: null,\n\t\t\t\tREGISTER: null\n\t\t\t}\n\t\t}\n\t},\n\n\tWINDOWS: {\n\t\tADD: null,\n\t\tOPEN: null,\n\t\tREMOVE: null,\n\t\tSETS: {\n\t\t\tADD: null,\n\t\t\tREMOVE: null\n\t\t},\n\t\tTOP: null,\n\t\tUPDATE: null\n\t},\n\n\tLPIS_CASES_ADD: 'LPIS_CASES_ADD',\n\tLPIS_CASE_CHANGES_ADD: 'LPIS_CASE_CHANGES_ADD',\n\tLPIS_CASES_SEARCH_STRING_CHANGE: 'LPIS_CASES_SEARCH_STRING_CHANGE',\n\tLPIS_CASES_SELECTED_STATUS_CHANGE: 'LPIS_CASES_SELECTED_STATUS_CHANGE',\n\tLPIS_CASES_EDIT_ACTIVE_EDITED_CASE: 'LPIS_CASES_EDIT_ACTIVE_EDITED_CASE',\n\tLPIS_CASES_CREATE_NEW_ACTIVE_EDITED_CASE: 'LPIS_CASES_CREATE_NEW_ACTIVE_EDITED_CASE',\n\tLPIS_CASES_REMOVE_EDITED_CASES_BY_KEYS: 'LPIS_CASES_REMOVE_EDITED_CASES_BY_KEYS',\n\tLPIS_CASES_SET_ACTIVE: 'LPIS_CASES_SET_ACTIVE',\n\tLPIS_CASES_CLEAR_EDITED_CASE: 'LPIS_CASES_CLEAR_EDITED_CASE',\n\tLPIS_CASE_EDIT_ACTIVE_CASE: 'LPIS_CASE_EDIT_ACTIVE_CASE',\n\tLPIS_CASE_EDIT_ACTIVE_CASE_STATUS: 'LPIS_CASE_EDIT_ACTIVE_CASE_STATUS',\n\tLPIS_CASE_EDIT_CASE_STATUS: 'LPIS_CASE_EDIT_CASE_STATUS',\n\tLPIS_CASE_SET_NEXT_ACTIVE_CASE_KEY: 'LPIS_CASE_SET_NEXT_ACTIVE_CASE_KEY',\n\n\tLPISCHECK_CASES_ADD: 'LPISCHECK_CASES_ADD',\n\tLPISCHECK_UPDATE_CASE: 'LPISCHECK_UPDATE_CASE',\n\tLPISCHECK_CASES_SET_ACTIVE: 'LPISCHECK_CASES_SET_ACTIVE',\n\tLPIS_CHECK_CASES_SEARCH_PARAM_CHANGE: 'LPIS_CHECK_CASES_SEARCH_PARAM_CHANGE',\n});\n\n\n","import _ from \"lodash\";\nimport _fetch from \"isomorphic-fetch\";\nimport path from \"path\";\nimport queryString from \"query-string\";\n\nconst TTL = 5;\n\n/**\n * Fetch implementation used by this module.\n *\n * It can be useful in tests to override this using `setFetch` fn.\n */\nlet fetch = _fetch;\n\n/**\n * Set different fetch implementation. Useful in tests.\n */\nexport function setFetch(_fetch) {\n\tfetch = _fetch;\n}\n\n/**\n * Reset fetch implementation to default one.\n */\nexport function resetFetch() {\n\tfetch = _fetch;\n}\n\n/**\n * Request helper. Creates an request to backend.\n * @param localConfig\n * @param apiPath - path to backend endpoint (hostname taken from config)\n * @param method - HTTP method\n * @param query - url query as object\n * @param payload - payload as object\n * @param ttl - (optional) number of tries\n * @returns response or error\n */\nexport default function request (localConfig, apiPath, method, query, payload, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, apiPath);\n\tif (query) {\n\t\turl += '?' + queryString.stringify(query);\n\t}\n\n\treturn fetch(url, {\n\t\tmethod: method,\n\t\tcredentials: 'include',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Accept': 'application/json'\n\t\t},\n\t\tbody: payload ? JSON.stringify(payload) : null\n\t}).then(\n\t\tresponse => {\n\t\t\tlet contentType = response.headers.get('Content-type');\n\t\t\tif (response.ok && contentType && (contentType.indexOf('application/json') !== -1)) {\n\t\t\t\treturn response.json().then(body => {\n\t\t\t\t\tif (body.data) {\n\t\t\t\t\t\treturn body;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('no data returned');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthrow new Error('response error');\n\t\t\t}\n\t\t},\n\t\terror => {\n\t\t\tif (ttl - 1) {\n\t\t\t\trequest(localConfig, apiPath, method, query, payload, ttl - 1);\n\t\t\t} else {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t}\n\t);\n}","import _, {isEqual} from \"lodash\";\nimport path from \"path\";\nimport moment from 'moment';\n\nimport request from './request';\nimport commonHelpers from './helpers';\nimport commonSelectors from './selectors';\nimport Select from \"../Select\";\nimport ActionTypes from \"../../constants/ActionTypes\";\n\nimport Action from '../Action';\nimport {utils} from '@gisatcz/ptr-utils';\nimport {configDefaults} from \"@gisatcz/ptr-core\";\n\nconst DEFAULT_CATEGORY_PATH = 'metadata';\n\n\n// ============ factories ===========\n\nconst add = (action) => {\n\treturn (data) => {\n\t\treturn dispatch => {\n\t\t\tif (!_.isArray(data)) data = [data];\n\t\t\tdispatch(action(data));\n\t\t};\n\t}\n};\n\nconst addIndex = (action) => {\n\treturn (filter, order, count, start, data, changedOn) => {\n\t\treturn dispatch => {\n\t\t\tdispatch(action(filter, order, count, start, data, changedOn));\n\t\t};\n\t}\n};\n\nconst apiDelete = (dataType, categoryPath, data) => {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst apiPath = 'backend/rest/' + categoryPath;\n\t\tconst payload = {\n\t\t\tdata: {\n\t\t\t\t[dataType]: data\n\t\t\t}\n\t\t};\n\t\treturn request(localConfig, apiPath, 'DELETE', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tdispatch(actionGeneralError(result.errors[dataType] || new Error('no data')));\n\t\t\t\t} else {\n\t\t\t\t\tconst itemsDeleted = result.data[dataType];\n\t\t\t\t\tif (itemsDeleted.length > 0) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(`No data updated for ${dataType} metadata type`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t});\n\t};\n};\n\nconst apiUpdate = (getSubstate, dataType, actionTypes, categoryPath, editedData) => {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst apiPath = 'backend/rest/' + categoryPath;\n\t\tconst payload = {\n\t\t\tdata: {\n\t\t\t\t[dataType]: editedData\n\t\t\t}\n\t\t};\n\t\treturn request(localConfig, apiPath, 'PUT', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tdispatch(actionGeneralError(result.errors[dataType] || new Error('no data')));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(receiveUpdated(getSubstate, actionTypes, result, dataType, categoryPath));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t});\n\t};\n};\n\nconst updateEdited = (getSubstate, actionTypes) => {\n\treturn (modelKey, key, value) => {\n\t\treturn (dispatch, getState) => {\n\t\t\tif (!getSubstate) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#updateEdited: setSubstate parameter is missing!'));\n\t\t\t}\n\t\t\tif (!actionTypes) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#updateEdited: actionTypes parameter is missing!'));\n\t\t\t}\n\t\t\tif (!modelKey) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#updateEdited: Model key is missing!'));\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#updateEdited: Property key is missing!'));\n\t\t\t}\n\n\t\t\tlet originalModel = commonSelectors.getByKey(getSubstate)(getState(), modelKey);\n\n\t\t\t// delete property from edited, if the value in update is the same as in state\n\t\t\t//TODO - test\n\t\t\tif (originalModel && (value === originalModel.data[key] || isEqual(originalModel.data[key], value))){\n\t\t\t\tdispatch(actionRemovePropertyFromEdited(actionTypes, modelKey, key));\n\t\t\t} else {\n\t\t\t\tdispatch(actionUpdateEdited(actionTypes, [{key: modelKey, data: {[key]: value}}]));\n\t\t\t}\n\t\t};\n\t}\n};\n\nconst removePropertyFromEdited = (actionTypes) => {\n\treturn (modelKey, key) => {\n\t\treturn dispatch(actionRemovePropertyFromEdited(actionTypes, modelKey, key));\n\t}\n}\n\nconst deleteItem = (getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) => {\n\treturn (item) => {\n\t\treturn (dispatch, getState) => {\n\t\t\tif (!item) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#deleteItem: item to delete is missing!'));\n\t\t\t}\n\n\t\t\tif (!item.key) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#deleteItem: item key to delete is missing!'));\n\t\t\t}\n\t\t\t//dispatch deleting?\n\t\t\t//TODO\n\t\t\treturn dispatch(apiDelete(dataType, categoryPath, [{key: item.key}])).then((result) => {\n\t\t\t\tconst data = result.data[dataType];\n\t\t\t\tconst deletedKeys = data.map(d => d.key);\n\n\t\t\t\t//Check if item deleted\n\t\t\t\tif(isEqual(deletedKeys, [item.key])) {\n\t\t\t\t\t// mark deleted items by \"deleted\" date\n\t\t\t\t\tconst deleteDate = moment(new Date().toISOString()).utc().format();\n\t\t\t\t\tdeletedKeys.forEach((key) => {\n\t\t\t\t\t\tdispatch(actionMarkAsDeleted(actionTypes, key, deleteDate));\n\t\t\t\t\t});\n\n\t\t\t\t\t// remove dependencies in all edited metadata\n\t\t\t\t\tdispatch(actionRemovePropertyValuesFromAllEdited(dataType, deletedKeys));\n\t\t\t\t\t// TODO check original metadata dependencies\n\n\t\t\t\t\t//refresh proper indexes\n\t\t\t\t\tconst state = getState();\n\t\t\t\t\tconst indexes = commonSelectors.getIndexesByFilteredItem(getSubstate)(state, item) || [];\n\t\t\t\t\tif(!_.isEmpty(indexes)) {\n\t\t\t\t\t\tindexes.forEach(index => {\n\t\t\t\t\t\t\tif(index) {\n\t\t\t\t\t\t\t\t//invalidate data\n\t\t\t\t\t\t\t\tdispatch(actionClearIndex(actionTypes, index.filter, index.order));\n\t\t\t\t\t\t\t\t//refresh data\n\t\t\t\t\t\t\t\tdispatch(refreshIndex(getSubstate, dataType, index.filter, index.order, actionTypes, categoryPath));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//error\n\t\t\t\t\treturn dispatch(actionGeneralError('common/actions#deleteItem: Deleted key is not equal to key to delete!'));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n\nconst saveEdited = (getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) => {\n\treturn (key) => {\n\t\treturn (dispatch, getState) => {\n\t\t\tif (!getSubstate) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#saveEdited: setSubstate parameter is missing!'));\n\t\t\t}\n\t\t\tif (!dataType) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#saveEdited: dataType parameter is missing!'));\n\t\t\t}\n\t\t\tif (!actionTypes) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#saveEdited: actionTypes parameter is missing!'));\n\t\t\t}\n\t\t\tif (!key) {\n\t\t\t\treturn dispatch(actionGeneralError('common/actions#saveEdited: Model key is missing!'));\n\t\t\t}\n\t\t\tlet state = getState();\n\t\t\tlet saved = commonSelectors.getByKey(getSubstate)(state, key);\n\t\t\tlet edited = commonSelectors.getEditedByKey(getSubstate)(state, key);\n\n\t\t\tif (saved) {\n\t\t\t\t// update\n\t\t\t\treturn dispatch(apiUpdate(getSubstate, dataType, actionTypes, categoryPath, [edited]));\n\t\t\t} else {\n\t\t\t\t// create\n\t\t\t\tdebugger;\n\t\t\t}\n\t\t};\n\t}\n};\n\nconst useKeys = (getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) => {\n\treturn (keys, componentId) => {\n\t\treturn dispatch => {\n\t\t\tdispatch(actionUseKeysRegister(actionTypes, componentId, keys));\n\t\t\treturn dispatch(ensureKeys(getSubstate, dataType, actionTypes, keys, categoryPath));\n\t\t};\n\t}\n};\n\nconst useIndexed = (getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) => {\n\treturn (filterByActive, filter, order, start, length, componentId) => {\n\t\treturn (dispatch, getState) => {\n\t\t\tdispatch(actionUseIndexedRegister(actionTypes, componentId, filterByActive, filter, order, start, length));\n\t\t\tlet state = getState();\n\t\t\tlet fullFilter = commonHelpers.mergeFilters({\n\t\t\t\tactiveApplicationKey: state.app.key,\n\t\t\t\tactiveAttributeKey: commonSelectors.getActiveKey(state => state.attributes)(state),\n\t\t\t\tactiveScopeKey: commonSelectors.getActiveKey(state => state.scopes)(state),\n\t\t\t\tactivePeriodKey: commonSelectors.getActiveKey(state => state.periods)(state),\n\t\t\t\tactivePeriodKeys: commonSelectors.getActiveKeys(state => state.periods)(state),\n\t\t\t\tactivePlaceKey: commonSelectors.getActiveKey(state => state.places)(state),\n\t\t\t\tactivePlaceKeys: commonSelectors.getActiveKeys(state => state.places)(state),\n\t\t\t}, filterByActive, filter);\n\t\t\treturn dispatch(ensureIndexed(getSubstate, dataType, fullFilter, order, start, length, actionTypes, categoryPath));\n\t\t};\n\t}\n};\n\nconst useIndexedBatch = (dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) => {\n\treturn (filterByActive, filter, order, componentId, key, additionalParams) => {\n\t\treturn (dispatch, getState) => {\n\t\t\tdispatch(actionUseIndexedBatchRegister(actionTypes, componentId, filterByActive, filter, order));\n\t\t\tlet state = getState();\n\t\t\tlet fullFilter = commonHelpers.mergeFilters({\n\t\t\t\tactiveApplicationKey: state.app.key,\n\t\t\t\tactiveScopeKey: commonSelectors.getActiveKey(state => state.scopes)(state),\n\t\t\t\tactivePeriodKey: commonSelectors.getActiveKey(state => state.periods)(state),\n\t\t\t\tactivePeriodKeys: commonSelectors.getActiveKeys(state => state.periods)(state),\n\t\t\t\tactivePlaceKey: commonSelectors.getActiveKey(state => state.places)(state),\n\t\t\t\tactivePlaceKeys: commonSelectors.getActiveKeys(state => state.places)(state),\n\t\t\t}, filterByActive, filter);\n\t\t\treturn dispatch(ensureIndexedBatch(dataType, fullFilter, order, actionTypes, categoryPath, key, additionalParams));\n\t\t};\n\t}\n};\n\nconst setActiveKeyAndEnsureDependencies = (actionTypes, filterKey) => {\n\treturn key => {\n\t\treturn dispatch => {\n\t\t\tdispatch(actionSetActiveKey(actionTypes, key));\n\t\t\tdispatch(ensureIndexesWithActiveKey(filterKey));\n\t\t};\n\t};\n};\n\nconst setActiveKeysAndEnsureDependencies = (actionTypes, filterKey) => {\n\treturn keys => {\n\t\treturn dispatch => {\n\t\t\tdispatch(actionSetActiveKeys(actionTypes, keys));\n\t\t\tdispatch(ensureIndexesWithActiveKey(filterKey));\n\t\t};\n\t};\n};\n/**\n * If not refresh data, call clearIndex to invalidate data.\n */\nfunction refreshIndex(getSubstate, dataType, filter, order, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet usesForIndex = commonSelectors.getUsesForIndex(getSubstate)(state, filter, order);\n\t\tif (usesForIndex){\n\t\t\t_.each(usesForIndex.uses, (use) => {\n\t\t\t\tdispatch(ensureIndexed(getSubstate, dataType, usesForIndex.filter, usesForIndex.order, use.start, use.length, actionTypes, categoryPath))\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction receiveIndexed(actionTypes, result, dataType, filter, order, start) {\n\t\treturn dispatch => {\n\t\t\t// add data to store\n\t\t\tif (result.data[dataType].length){\n\t\t\t\tdispatch(actionAdd(actionTypes, result.data[dataType], filter));\n\t\t\t}\n\n\t\t\t// add to index\n\t\t\tdispatch(actionAddIndex(actionTypes, filter, order, result.total, start, result.data[dataType], result.changes && result.changes[dataType]));\n\t\t}\n}\n\nfunction receiveIndexedBatch(actionTypes, result, dataType, filter, order, key) {\n\t\treturn dispatch => {\n\t\t\t// add data to store\n\t\t\tif (result.data[dataType].length){\n\t\t\t\tdispatch(actionAddBatch(actionTypes, result.data[dataType], key));\n\t\t\t}\n\n\t\t\t// add to index\n\t\t\tdispatch(actionAddBatchIndex(actionTypes, filter, order, result.data[dataType], key));\n\t\t}\n}\n\nfunction requestWrapper(apiPath, method, query, payload, successAction, errorAction) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\n\t\trequest(localConfig, apiPath, method, query, payload)\n\t\t\t.then(result => {\n\t\t\t\tdispatch(successAction(result.data));\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(errorAction(error));\n\t\t\t});\n\t}\n}\n\nfunction create(getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn (key, appKey) => {\n\t\treturn (dispatch, getState) => {\n\t\t\tconst state = getState();\n\t\t\tconst apiPath = path.join('backend/rest', categoryPath);\n\t\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(state);\n\n\t\t\tlet applicationKey = null;\n\t\t\tif (appKey) {\n\t\t\t\tapplicationKey = appKey;\n\t\t\t} else {\n\t\t\t\tlet currentAppKey = Select.app.getKey(state);\n\t\t\t\tif (currentAppKey) {\n\t\t\t\t\tapplicationKey = currentAppKey;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst payload = getCreatePayload(dataType, key, applicationKey);\n\t\t\treturn request(localConfig, apiPath, 'POST', null, payload).then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tdispatch(actionGeneralError(result.errors[dataType] || new Error('no data')));\n\t\t\t\t} else {\n\t\t\t\t\tconst items = result.data[dataType];\n\t\t\t\t\tdispatch(actionAdd(actionTypes, items));\n\n\t\t\t\t\tlet indexes = [];\n\t\t\t\t\titems.forEach(item => {\n\t\t\t\t\t\tindexes = indexes.concat(commonSelectors.getIndexesByFilteredItem(getSubstate)(getState(), item)) || [];\n\t\t\t\t\t});\n\n\t\t\t\t\tlet uniqueIndexes = commonHelpers.getUniqueIndexes(indexes);\n\t\t\t\t\tif(!_.isEmpty(uniqueIndexes)) {\n\t\t\t\t\t\tuniqueIndexes.forEach(index => {\n\t\t\t\t\t\t\tif(index) {\n\t\t\t\t\t\t\t\t//invalidate data\n\t\t\t\t\t\t\t\tdispatch(actionClearIndex(actionTypes, index.filter, index.order));\n\t\t\t\t\t\t\t\t//refresh data\n\t\t\t\t\t\t\t\tdispatch(refreshIndex(getSubstate, dataType, index.filter, index.order, actionTypes, categoryPath));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction loadAll(dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst PAGE_SIZE = localConfig.requestPageSize || configDefaults.requestPageSize;\n\t\tconst apiPath = getAPIPath(categoryPath, dataType);\n\t\tlet payload = {\n\t\t\tlimit: PAGE_SIZE\n\t\t};\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tdispatch(actionGeneralError(result.errors[dataType] || new Error('no data')));\n\t\t\t\t} else {\n\t\t\t\t\tif (result.total <= PAGE_SIZE) {\n\t\t\t\t\t\t// everything already loaded\n\t\t\t\t\t\tdispatch(actionAdd(actionTypes, result.data[dataType]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// load remaining pages\n\t\t\t\t\t\tlet promises = [];\n\t\t\t\t\t\tlet remainingPageCount = Math.ceil((result.total - PAGE_SIZE) / PAGE_SIZE);\n\t\t\t\t\t\tfor (let i = 0; i < remainingPageCount; i++) {\n\t\t\t\t\t\t\tlet pagePayload = {\n\t\t\t\t\t\t\t\toffset: (i + 1) * PAGE_SIZE,\n\t\t\t\t\t\t\t\tlimit: PAGE_SIZE\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpromises.push(request(localConfig, apiPath, 'POST', null, pagePayload)); //todo what if one fails?\n\t\t\t\t\t\t}\n\t\t\t\t\t\tPromise.all(promises).then(results => {\n\t\t\t\t\t\t\tlet remainingData = _.flatten(results.map(res => res.data[dataType]));\n\t\t\t\t\t\t\tdispatch(actionAdd(actionTypes, [...result.data[dataType], ...remainingData]));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t});\n\t};\n}\n\nfunction ensureKeys(getSubstate, dataType, actionTypes, keys, categoryPath = DEFAULT_CATEGORY_PATH){\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst PAGE_SIZE = Select.app.getLocalConfiguration(state, 'requestPageSize') || configDefaults.requestPageSize;\n\n\t\tlet keysToLoad = commonSelectors.getKeysToLoad(getSubstate)(state, keys);\n\t\tlet promises = [];\n\n\t\tif (keysToLoad){\n\t\t\tkeysToLoad = _.chunk(keysToLoad, PAGE_SIZE);\n\t\t\t_.each(keysToLoad, keysToLoadPage => {\n\t\t\t\tpromises.push(dispatch(loadKeysPage(dataType, actionTypes, keysToLoadPage, categoryPath)));\n\t\t\t});\n\t\t}\n\n\t\treturn Promise.all(promises);\n\t}\n}\n\nfunction ensureIndexed(getSubstate, dataType, filter, order, start, length, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH){\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(state);\n\t\tconst PAGE_SIZE = localConfig.requestPageSize || configDefaults.requestPageSize;\n\t\tlet total = commonSelectors.getIndexTotal(getSubstate)(state, filter, order);\n\t\tlet changedOn = commonSelectors.getIndexChangedOn(getSubstate)(state, filter, order);\n\n\t\tif (total != null){\n\t\t\t// we have existing index, we only load what we don't have\n\n\t\t\tconst indexPage = commonSelectors.getIndexPage(getSubstate)(state, filter, order, start, length) || {};\n\t\t\tconst pages = _.chunk(Object.values(indexPage), PAGE_SIZE);\n\t\t\tconst promises = pages.map((page, i) => {\n\t\t\t\tconst loadedKeys = page.filter(v => v != null);\n\t\t\t\tif (loadedKeys.length === page.length) {\n\t\t\t\t\treturn; // page is already loaded\n\t\t\t\t}\n\n\t\t\t\tconst completeFilter = loadedKeys.length ? {...filter, key: {notin: loadedKeys}} : filter;\n\n\t\t\t\treturn dispatch(loadIndexedPage(dataType, completeFilter, order, start + (i * PAGE_SIZE), changedOn, actionTypes, categoryPath))\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tif (err.message === 'Index outdated'){\n\t\t\t\t\t\t\tdispatch(refreshIndex(getSubstate, dataType, filter, order, actionTypes, categoryPath));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn Promise.all(promises);\n\n\t\t} else {\n\t\t\t// we don't have index, we need to load everything\n\n\t\t\treturn dispatch(loadIndexedPage(dataType, filter, order, start, changedOn, actionTypes, categoryPath)).then((response) => {\n\t\t\t\t// check success to make sure it's our error from BE and not anything broken in render chain\n\t\t\t\tif (response && response.message && response.success === false){\n\t\t\t\t\t// do nothing\n\t\t\t\t} else {\n\t\t\t\t\t// remaining pages\n\t\t\t\t\tif (length > PAGE_SIZE) {\n\t\t\t\t\t\treturn dispatch(ensureIndexed(getSubstate, dataType, filter, order, start + PAGE_SIZE, length - PAGE_SIZE, actionTypes, categoryPath));\n\t\t\t\t\t} // else already done\n\t\t\t\t}\n\t\t\t}).catch((err)=>{\n\t\t\t\tif (err.message === 'Index outdated'){\n\t\t\t\t\tdispatch(refreshIndex(getSubstate, dataType, filter, order, actionTypes, categoryPath));\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(`_common/actions#ensure: ${err}`);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction ensureIndexedBatch(dataType, filter, order, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH, key, additionalParams) {\n\treturn (dispatch) => {\n\t\treturn dispatch(loadIndexedBatch(dataType, filter, order, actionTypes, categoryPath, key, additionalParams)).then((response) => {\n\t\t\t\t//success\n\t\t\t}).catch((err)=>{\n\t\t\t\tthrow new Error(`_common/actions#ensure: ${err}`);\n\t\t});\n\t};\n}\n\nfunction loadKeysPage(dataType, actionTypes, keys, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst apiPath = getAPIPath(categoryPath, dataType);\n\n\t\tlet payload = {\n\t\t\tfilter: {\n\t\t\t\tkey: {\n\t\t\t\t\tin: keys\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tthrow new Error(result.errors[dataType] || 'no data');\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(receiveKeys(actionTypes, result, dataType, keys));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t\treturn error;\n\t\t\t});\n\t}\n}\n\nfunction loadIndexedPage(dataType, filter, order, start, changedOn, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst PAGE_SIZE = localConfig.requestPageSize || configDefaults.requestPageSize;\n\t\tconst apiPath = getAPIPath(categoryPath, dataType);\n\n\t\tlet payload = {\n\t\t\tfilter: filter && {...filter},\n\t\t\toffset: start -1,\n\t\t\torder: order,\n\t\t\tlimit: PAGE_SIZE\n\t\t};\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tthrow new Error(result.errors[dataType] || 'no data');\n\t\t\t\t} else if (result.changes && result.changes[dataType] && moment(result.changes[dataType]).isAfter(changedOn)) {\n\t\t\t\t\tthrow new Error('Index outdated');\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(receiveIndexed(actionTypes, result, dataType, filter, order, start));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t\treturn error; //todo do we need to return this\n\t\t\t});\n\t};\n}\n\nfunction loadIndexedBatch(dataType, filter, order, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH, key, additionalParams) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst apiPath = getAPIPath(categoryPath, dataType);\n\n\t\tlet payload = {\n\t\t\tfilter: {...filter},\n\t\t\torder: order\n\t\t};\n\n\t\tif (additionalParams) {\n\t\t\tpayload = {...payload, ...additionalParams};\n\t\t}\n\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tthrow new Error(result.errors[dataType] || 'no data');\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(receiveIndexedBatch(actionTypes, result, dataType, filter, order, key));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t\treturn error;\n\t\t\t});\n\t};\n}\n\nfunction loadFiltered(dataType, actionTypes, filter, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst PAGE_SIZE = localConfig.requestPageSize || configDefaults.requestPageSize;\n\t\tconst apiPath = getAPIPath(categoryPath, dataType);\n\t\tconst payload = {\n\t\t\tfilter: filter,\n\t\t\tlimit: PAGE_SIZE\n\t\t};\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors[dataType] || result.data && !result.data[dataType]) {\n\t\t\t\t\tdispatch(actionGeneralError(result.errors[dataType] || new Error('no data')));\n\t\t\t\t} else {\n\t\t\t\t\tif (result.total <= PAGE_SIZE) {\n\t\t\t\t\t\t// everything already loaded\n\t\t\t\t\t\treturn dispatch(actionAdd(actionTypes, result.data[dataType]));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// load remaining pages\n\t\t\t\t\t\tlet promises = [];\n\t\t\t\t\t\tlet remainingPageCount = Math.ceil((result.total - PAGE_SIZE) / PAGE_SIZE);\n\t\t\t\t\t\tfor (let i = 0; i < remainingPageCount; i++) {\n\t\t\t\t\t\t\tlet pagePayload = {\n\t\t\t\t\t\t\t\tfilter: filter,\n\t\t\t\t\t\t\t\toffset: (i + 1) * PAGE_SIZE,\n\t\t\t\t\t\t\t\tlimit: PAGE_SIZE\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpromises.push(request(localConfig, apiPath, 'POST', null, pagePayload)); //todo what if one fails?\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn Promise.all(promises).then(results => {\n\t\t\t\t\t\t\tlet remainingData = _.flatten(results.map(res => res.data[dataType]));\n\t\t\t\t\t\t\tdispatch(actionAdd(actionTypes, [...result.data[dataType], ...remainingData]));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(actionGeneralError(error));\n\t\t\t});\n\t};\n}\n\nfunction receiveUpdated(getSubstate, actionTypes, result, dataType, categoryPath) {\n\treturn (dispatch, getState) => {\n\t\tlet data = result.data[dataType];\n\t\tif (data.length){\n\t\t\tlet originalData = commonSelectors.getAllAsObject(getSubstate)(getState());\n\t\t\tdispatch(actionAdd(actionTypes, data));\n\t\t\tlet editedData = commonSelectors.getEditedAllAsObject(getSubstate)(getState());\n\n\n\t\t\tlet indexes = [];\n\t\t\tdata.forEach(model => {\n\t\t\t\tlet original = originalData[model.key];\n\t\t\t\tlet edited = editedData[model.key].data;\n\t\t\t\t_.forIn(edited, (value, key) => {\n\t\t\t\t\tif (model.data[key] === value) {\n\t\t\t\t\t\tdispatch(actionRemovePropertyFromEdited(actionTypes, model.key, key));\n\t\t\t\t\t} else if (_.isObject(value)) {\n\t\t\t\t\t\tif (JSON.stringify(value) === JSON.stringify(model.data[key])) {\n\t\t\t\t\t\t\tdispatch(actionRemovePropertyFromEdited(actionTypes, model.key, key));\n\t\t\t\t\t\t} else if (_.isArray(value) && _.isEmpty(value)) {\n\t\t\t\t\t\t\tif (_.isEmpty(model.data[key]) || (model.data && !model.data[key])) {\n\t\t\t\t\t\t\t\tdispatch(actionRemovePropertyFromEdited(actionTypes, model.key, key));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tindexes = indexes.concat(commonSelectors.getIndexesByFilteredItem(getSubstate)(getState() || [], model));\n\t\t\t\tindexes = indexes.concat(commonSelectors.getIndexesByFilteredItem(getSubstate)(getState() || [], original));\n\t\t\t});\n\n\t\t\tlet uniqueIndexes = commonHelpers.getUniqueIndexes(indexes);\n\t\t\tif(!_.isEmpty(uniqueIndexes)) {\n\t\t\t\tuniqueIndexes.forEach(index => {\n\t\t\t\t\tif(index) {\n\t\t\t\t\t\t//invalidate data\n\t\t\t\t\t\tdispatch(actionClearIndex(actionTypes, index.filter, index.order));\n\t\t\t\t\t\t//refresh data\n\t\t\t\t\t\tdispatch(refreshIndex(getSubstate, dataType, index.filter, index.order, actionTypes, categoryPath));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(`No data updated for ${dataType} metadata type`);\n\t\t}\n\t};\n}\n\nfunction receiveKeys(actionTypes, result, dataType, keys) {\n\treturn dispatch => {\n\t\t// add data to store\n\t\tif (result.data[dataType].length){\n\t\t\tdispatch(actionAdd(actionTypes, result.data[dataType]));\n\t\t}\n\n\t\t// add unreceived keys\n\t\t_.remove(keys, key => {\n\t\t\treturn _.find(result.data[dataType], {key});\n\t\t});\n\t\tif (keys.length) {\n\t\t\tdispatch(actionAddUnreceivedKeys(actionTypes, keys));\n\t\t}\n\t}\n}\n\nfunction refreshUses(getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn () => {\n\t\treturn(dispatch, getState) => {\n\t\t\tdispatch(actionClearIndexes(actionTypes));\n\n\t\t\tlet state = getState();\n\n\t\t\tlet usedKeys = commonSelectors.getUsedKeys(getSubstate)(state);\n\t\t\tdispatch(ensureKeys(getSubstate, dataType, actionTypes, usedKeys, categoryPath));\n\n\t\t\tlet usedIndexPages = commonSelectors.getUsedIndexPages(getSubstate)(state);\n\n\t\t\tconst promises = _.flatMap(usedIndexPages, (usedIndexPage) => {\n\t\t\t\t_.map(usedIndexPage.uses, (use) => {\n\t\t\t\t\treturn dispatch(ensureIndexed(getSubstate, dataType, usedIndexPage.filter, usedIndexPage.order, use.start, use.length, actionTypes, categoryPath))\n\t\t\t\t});\n\t\t\t})\n\n\t\t\treturn Promise.all(promises);\n\t\t}\n\t}\n}\n\nfunction ensureIndexesWithFilterByActive(getSubstate, dataType, actionTypes, categoryPath = DEFAULT_CATEGORY_PATH) {\n\treturn filterByActive => {\n\t\treturn (dispatch, getState) => {\n\n\t\t\tconst state = getState();\n\t\t\tconst usedIndexes = commonSelectors.getUsesWithActiveDependency(getSubstate)(state, filterByActive);\n\n\t\t\tconst promises = _.flatMap(usedIndexes, (usedIndex) => {\n\t\t\t\t_.map(usedIndex.uses, (use) => {\n\t\t\t\t\treturn dispatch(ensureIndexed(getSubstate, dataType, usedIndex.filter, usedIndex.order, use.start, use.length, actionTypes, categoryPath))\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn Promise.all(promises);\n\t\t}\n\t}\n}\n\nfunction ensureIndexesWithActiveKey(filterKey, categoryPath = DEFAULT_CATEGORY_PATH) {\n\t\treturn dispatch => {\n\n\t\t\tlet filterByActive = {\n\t\t\t\t[filterKey]: true\n\t\t\t};\n\n\t\t\t// dispatch ensureIndexesWithFilterByActive on all stores implementing it\n\t\t\t_.map(Action, actions => {\n\t\t\t\tif (actions.hasOwnProperty('ensureIndexesWithFilterByActive')) {\n\t\t\t\t\tdispatch(actions.ensureIndexesWithFilterByActive(filterByActive, categoryPath))\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n}\n\nfunction updateSubstateFromView(actionTypes) {\n\treturn (data) => {\n\t\treturn dispatch => {\n\t\t\tif (data && data.activeKey) {\n\t\t\t\tdispatch(actionSetActiveKey(actionTypes, data.activeKey));\n\t\t\t} else if (data && data.activeKeys) {\n\t\t\t\tdispatch(actionSetActiveKeys(actionTypes, data.activeKeys));\n\t\t\t}\n\t\t}\n\t}\n}\n\n// ============ common namespace actions ===========\n\nfunction actionDataSetOutdated() {\n\treturn {\n\t\ttype: ActionTypes.COMMON.DATA.SET_OUTDATED\n\t}\n}\n\nfunction actionRemovePropertyValuesFromAllEdited(dataType, keys) {\n\treturn {\n\t\ttype: ActionTypes.COMMON.EDITED.REMOVE_PROPERTY_VALUES,\n\t\tdataType,\n\t\tkeys\n\t};\n}\n\nfunction actionGeneralError(e) {\n\tconsole.error('common/actions error', e);\n\treturn {type: 'ERROR'};\n}\n\n// ============ specific store namespace actions ===========\n\nconst creator = (action) => {\n\treturn (actionTypes) => {\n\t\treturn (...args) => {\n\t\t\treturn dispatch => {\n\t\t\t\tdispatch(action(actionTypes, ...args));\n\t\t\t};\n\t\t};\n\t};\n};\n\nfunction action(actionTypes, type, payload) {\n\ttype = type.split('.');\n\t_.each(type, pathSegment => {\n\t\tif (!actionTypes.hasOwnProperty(pathSegment)) {\n\t\t\tconsole.error('common/actions#action: Action not in namespace', type, payload);\n\t\t\tthrow new Error('common/actions#action: Action not in namespace');\n\t\t}\n\t\tactionTypes = actionTypes[pathSegment];\n\t});\n\tif (typeof actionTypes !== 'string') throw new Error('common/actions#action: Action type not string');\n\treturn {...payload, type: actionTypes};\n}\n\nfunction actionAdd(actionTypes, data, filter) {\n\tif (!_.isArray(data)) data = [data];\n\treturn action(actionTypes, 'ADD', {data, filter});\n}\n\nfunction actionAddBatch(actionTypes, data, key) {\n\tif (!_.isArray(data)) data = [data];\n\tconst payload = {\n\t\tdata,\n\t\tkey //FIXME - key should be union of filter and key?\n\t}\n\treturn action(actionTypes, 'ADD_BATCH', payload);\n}\n\nfunction actionAddUnreceivedKeys(actionTypes, keys) {\n\tif (!_.isArray(keys)) keys = [keys];\n\treturn action(actionTypes, 'ADD_UNRECEIVED', {keys});\n}\n\nfunction actionAddIndex(actionTypes, filter, order, count, start, data, changedOn) {\n\treturn action(actionTypes, 'INDEX.ADD', {filter, order, count, start, data, changedOn});\n}\n\nfunction actionAddBatchIndex(actionTypes, filter, order, data, key) {\n\treturn action(actionTypes, 'INDEX.ADD_BATCH', {filter, order, data, key});\n}\n\n/**\n * Useful for invalidate data before refresh indexes\n */\nfunction actionClearIndex(actionTypes, filter, order) {\n\treturn action(actionTypes, 'INDEX.CLEAR_INDEX', {filter, order});\n}\n\nconst actionMarkAsDeleted = (actionTypes, key, date) => {\n\treturn action(actionTypes, 'MARK_DELETED', {key, date});\n}\n\nfunction actionClearIndexes(actionTypes) {\n\treturn action(actionTypes, 'INDEX.CLEAR_ALL');\n}\n\nfunction actionDelete(actionTypes, keys) {\n\treturn action(actionTypes, 'DELETE', {keys});\n}\n\nfunction actionSetActiveKey(actionTypes, key) {\n\treturn action(actionTypes, 'SET_ACTIVE_KEY', {key});\n}\n\nfunction actionSetActiveKeys(actionTypes, keys) {\n\treturn action(actionTypes, 'SET_ACTIVE_KEYS', {keys});\n}\n\nfunction actionRemoveEdited(actionTypes, keys) {\n\treturn action(actionTypes, 'EDITED.REMOVE', {keys});\n}\n\nfunction actionUpdateEdited(actionTypes, data) {\n\treturn action(actionTypes, 'EDITED.UPDATE', {data});\n}\n\nfunction actionRemovePropertyFromEdited(actionTypes, key, property) {\n\treturn action(actionTypes, 'EDITED.REMOVE_PROPERTY', {key, property});\n}\n\nfunction actionUseIndexedRegister(actionTypes, componentId, filterByActive, filter, order, start, length) {\n\treturn action(actionTypes, 'USE.INDEXED.REGISTER', {componentId, filterByActive, filter, order, start, length});\n}\n\nfunction actionUseIndexedBatchRegister(actionTypes, componentId, filterByActive, filter, order) {\n\treturn action(actionTypes, 'USE.INDEXED_BATCH.REGISTER', {componentId, filterByActive, filter, order});\n}\n\nfunction actionUseIndexedClear(actionTypes, componentId) {\n\treturn action(actionTypes, 'USE.INDEXED.CLEAR', {componentId});\n}\n\nfunction actionUseIndexedClearAll(actionTypes) {\n\treturn action(actionTypes, 'USE.INDEXED.CLEAR_ALL');\n}\n\nfunction actionSetInitial(actionTypes) {\n\treturn action(actionTypes, 'SET_INITIAL');\n}\n\nfunction actionUseKeysClear(actionTypes, componentId) {\n\treturn action(actionTypes, 'USE.KEYS.CLEAR', {componentId});\n}\n\nfunction actionUseKeysRegister(actionTypes, componentId, keys) {\n\treturn action(actionTypes, 'USE.KEYS.REGISTER', {componentId, keys});\n}\n\n// ============ utilities ===========\nconst getAPIPath = (categoryPath = DEFAULT_CATEGORY_PATH, dataType) => {\n\treturn path.join('backend/rest', categoryPath ,'filtered', dataType);\n};\n\nconst getCreatePayload = (datatype, key = utils.uuid(), applicationKey) => {\n\tconst payload = {\n\t\t\"data\": {}\n\t};\n\n\tlet model = {key, data: {}};\n\tif (applicationKey) {\n\t\tmodel.data = {applicationKey};\n\t}\n\n\tpayload.data[datatype] = [model];\n\n\treturn payload;\n};\n\n// ============ export ===========\n\nexport default {\n\tadd: creator(actionAdd),\n\taddBatch: creator(actionAddBatch),\n\taddBatchIndex: creator(actionAddBatchIndex),\n\taction,\n\taddIndex: creator(actionAddIndex),\n\tactionGeneralError,\n\tapiUpdate,\n\tcreator,\n\tcreate,\n\tdelete: deleteItem,\n\tensure: ensureKeys,\n\tensureIndexed,\n\tensureIndexesWithFilterByActive,\n\tensureKeys,\n\tloadAll,\n\tloadFiltered,\n\tuseIndexedBatch,\n\tloadIndexedPage,\n\tloadKeysPage,\n\tsetActiveKey: creator(actionSetActiveKey),\n\tsetActiveKeyAndEnsureDependencies,\n\tsetActiveKeysAndEnsureDependencies,\n\tsetActiveKeys: creator(actionSetActiveKeys),\n\treceiveUpdated,\n\treceiveIndexed,\n\treceiveKeys,\n\trefreshUses,\n\tremovePropertyFromEdited,\n\trequest: requestWrapper,\n\tsaveEdited,\n\tupdateSubstateFromView,\n\tupdateEdited,\n\tuseKeys,\n\tuseKeysClear: creator(actionUseKeysClear),\n\tuseIndexed,\n\tclearIndex: creator(actionClearIndex),\n\n\tuseIndexedRegister: actionUseIndexedRegister,\n\tuseIndexedClear: creator(actionUseIndexedClear),\n\tuseIndexedClearAll: creator(actionUseIndexedClearAll),\n\tsetInitial: creator(actionSetInitial),\n\tactionDataSetOutdated,\n\tactionSetActiveKey\n}\n\n// useIndexedBatch\n// ensureIndexedBatch\n// actionUseIndexedBatchRegister\n// loadIndexedBatch\n// receiveIndexedBatch\n//actionAddBatchIndex\n\n//reducer\n// - USE.INDEXED_BATCH.REGISTER\n// - INDEX.ADD_BATCH\n// - ADD_BATCH","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/actions';\nimport Select from \"../Select\";\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.LAYER_TEMPLATES);\nconst create = common.create(Select.layerTemplates.getSubstate, 'layerTemplates', ActionTypes.LAYER_TEMPLATES);\nconst deleteItem = common.delete(Select.layerTemplates.getSubstate, 'layerTemplates', ActionTypes.LAYER_TEMPLATES);\nconst saveEdited = common.saveEdited(Select.layerTemplates.getSubstate, 'layerTemplates', ActionTypes.LAYER_TEMPLATES);\nconst updateEdited = common.updateEdited(Select.layerTemplates.getSubstate, ActionTypes.LAYER_TEMPLATES);\nconst useKeys = common.useKeys(Select.layerTemplates.getSubstate, 'layerTemplates', ActionTypes.LAYER_TEMPLATES);\nconst useKeysClear = common.useKeysClear(ActionTypes.LAYER_TEMPLATES);\nconst useIndexed = common.useIndexed(Select.layerTemplates.getSubstate, 'layerTemplates', ActionTypes.LAYER_TEMPLATES);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.LAYER_TEMPLATES);\nconst clearIndex = common.clearIndex(ActionTypes.LAYER_TEMPLATES);\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.layerTemplates.getSubstate, 'layerTemplates', ActionTypes.LAYER_TEMPLATES);\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tclearIndex,\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\n\tsaveEdited,\n\t\n\tsetActiveKey: common.setActiveKeyAndEnsureDependencies(ActionTypes.LAYER_TEMPLATES, 'layerTemplate'),\n\n\tupdateEdited,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear,\n}\n","import ActionTypes from '../../../constants/ActionTypes';\n\nimport common from '../../_common/actions';\nimport Select from \"../../Select\";\n\n\n// ============ creators ===========\n\nconst setActiveKey = common.setActiveKey(ActionTypes.AREAS.AREA_TREE_LEVELS);\nconst useIndexed = common.useIndexed(Select.areas.areaTreeLevels.getSubstate, 'areaTreeLevels', ActionTypes.AREAS.AREA_TREE_LEVELS);\nconst useKeys = common.useKeys(Select.areas.areaTreeLevels.getSubstate, 'areaTreeLevels', ActionTypes.AREAS.AREA_TREE_LEVELS);\nconst refreshUses = common.refreshUses(Select.areas.areaTreeLevels.getSubstate, `areaTreeLevels`, ActionTypes.AREAS.AREA_TREE_LEVELS);\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.areas.areaTrees.getSubstate, 'areaTreeLevels', ActionTypes.AREAS.AREA_TREE_LEVELS);\n\n// ============ actions ===========\n\nfunction actionClearUseIndexed(componentId) {\n\treturn {\n\t\ttype: ActionTypes.AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR,\n\t\tcomponentId\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tensureIndexesWithFilterByActive,\n\trefreshUses,\n\tsetActiveKey,\n\tuseIndexed,\n\tuseIndexedClear: actionClearUseIndexed,\n\tuseKeys\n}\n\n","import ActionTypes from '../../../constants/ActionTypes';\n\nimport common from '../../_common/actions';\nimport Select from \"../../Select\";\n\n\n// ============ creators ===========\n\nconst setActiveKey = common.setActiveKey(ActionTypes.AREAS.AREA_TREES);\nconst useIndexed = common.useIndexed(Select.areas.areaTrees.getSubstate, 'areaTrees', ActionTypes.AREAS.AREA_TREES);\nconst useKeys = common.useKeys(Select.areas.areaTrees.getSubstate, 'areaTrees', ActionTypes.AREAS.AREA_TREES);\nconst refreshUses = common.refreshUses(Select.areas.areaTrees.getSubstate, `areaTrees`, ActionTypes.AREAS.AREA_TREES);\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.areas.areaTrees.getSubstate, 'areaTrees', ActionTypes.AREAS.AREA_TREES);\n\n// ============ actions ===========\n\nfunction actionClearUseIndexed(componentId) {\n\treturn {\n\t\ttype: ActionTypes.AREAS.AREA_TREES.USE.INDEXED.CLEAR,\n\t\tcomponentId\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tensureIndexesWithFilterByActive,\n\trefreshUses,\n\tsetActiveKey,\n\tuseIndexed,\n\tuseIndexedClear: actionClearUseIndexed,\n\tuseKeys,\n\tuseKeysClear: common.useKeysClear(ActionTypes.AREAS.AREA_TREES)\n}\n\n","import areaTreeLevels from './AreaTreeLevels/actions';\nimport areaTrees from './AreaTrees/actions';\n\nexport default {\n\tareaTreeLevels,\n\tareaTrees\n}\n","import common from \"../_common/actions\";\nimport ActionTypes from \"../../constants/ActionTypes\";\nimport Select from \"../Select\";\n\nconst add = common.add(ActionTypes.SELECTIONS);\nconst setActiveKey = common.setActiveKey(ActionTypes.SELECTIONS);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.SELECTIONS);\n\nconst setActiveSelectionFeatureKeysFilterKeys = (selectionKeys) => {\n\treturn (dispatch, getState) => {\n\t\tlet activeSelectionKey = Select.selections.getActiveKey(getState());\n\t\tif (activeSelectionKey && selectionKeys) {\n\t\t\tdispatch(setFeatureKeysFilterKeys(activeSelectionKey, selectionKeys));\n\t\t}\n\t}\n};\n\nconst updateStateFromViewWithData = (view) => {\n    return (dispatch, getState) => {\n        dispatch(updateStateFromView(view));\n        if (view.data) {\n            dispatch(add(view.data));\n        }\n    }\n};\n\n// ============ actions ===========\nfunction clearFeatureKeysFilter(key){\n    return {\n        type: ActionTypes.SELECTIONS.CLEAR.FEATURE_KEYS_FILTER,\n        key\n    }\n}\n\nfunction setFeatureKeysFilterKeys(key, featureKeys){\n    return {\n        type: ActionTypes.SELECTIONS.SET.FEATURE_KEYS_FILTER.KEYS,\n        key,\n        featureKeys\n    }\n}\n\nexport default {\n\tadd,\n    clearFeatureKeysFilter,\n\tsetActiveSelectionFeatureKeysFilterKeys,\n\tsetActiveKey,\n\tupdateStateFromView,\n    updateStateFromViewWithData\n}","import ActionTypes from '../../../constants/ActionTypes';\n\nimport _ from 'lodash';\nimport path from 'path';\nimport fetch from 'isomorphic-fetch';\n\nimport Select from '../../Select';\n\nimport common from '../../_common/actions';\n\nconst TTL = 3;\n\nconst useKeys = common.useKeys(Select.spatialDataSources.vector.getSubstate, 'spatial', ActionTypes.SPATIAL_DATA_SOURCES.VECTOR, 'data');\nconst useKeysClear = common.useKeysClear(ActionTypes.SPATIAL_DATA_SOURCES.VECTOR);\nconst useIndexed = common.useIndexed(Select.spatialDataSources.vector.getSubstate, 'spatial', ActionTypes.SPATIAL_DATA_SOURCES.VECTOR, 'data');\nconst useIndexedBatch = common.useIndexedBatch('spatial', ActionTypes.SPATIAL_DATA_SOURCES.VECTOR, 'data');\nconst useIndexedClear = common.useIndexedClear(ActionTypes.SPATIAL_DATA_SOURCES.VECTOR);\nconst clearIndex = common.clearIndex(ActionTypes.SPATIAL_DATA_SOURCES.VECTOR);\nconst addBatch = common.addBatch(ActionTypes.SPATIAL_DATA_SOURCES.VECTOR);\nconst addBatchIndex = common.addBatchIndex(ActionTypes.SPATIAL_DATA_SOURCES.VECTOR);\n\n\n\n// ============ creators ===========\nfunction loadLayerData(filter, componentId) {\n\treturn (dispatch, getState) => {\n\t\tlet additionalParams = {};\n\t\tlet geometriesAccuracy = Select.app.getLocalConfiguration(getState(), 'geometriesAccuracy');\n\n\t\tif (geometriesAccuracy) {\n\t\t\tadditionalParams.transformation = {\n\t\t\t\tsnapToGrid: {\n\t\t\t\t\tsize: geometriesAccuracy\n\t\t\t\t},\n\t\t\t\ttransform: 4326\n\t\t\t}\n\t\t}\n\n\t\treturn dispatch(useIndexedBatch(null, filter, null, componentId, 'spatialDataSourceKey', additionalParams));\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\taddBatch,\n\taddBatchIndex,\n\n\tloadLayerData,\n\tuseKeys,\n\tuseKeysClear,\n\tuseIndexed,\n\tuseIndexedClear,\n\tclearIndex\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport vectorActions from './vector/actions';\nimport common from \"../_common/actions\";\n\n// ============ creators ===========\nconst useKeys = common.useKeys(Select.spatialDataSources.getSubstate, 'spatial', ActionTypes.SPATIAL_DATA_SOURCES, 'dataSources');\nconst useKeysClear = common.useKeysClear(ActionTypes.SPATIAL_DATA_SOURCES);\nconst add = common.add(ActionTypes.SPATIAL_DATA_SOURCES);\n\n// ============ export ===========\n\nexport default {\n\tvector: vectorActions,\n\n\tadd,\n\tuseKeys,\n\tuseKeysClear,\n\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\nimport common from \"../_common/actions\";\nimport _ from \"lodash\";\nimport commonSelectors from \"../_common/selectors\";\nimport SpatialDataSourcesAction from \"../SpatialDataSources/actions\";\n\n\n// ============ creators ===========\nconst useIndexedRegister = (componentId, filterByActive, filter, order, start, length) => common.useIndexedRegister(ActionTypes.SPATIAL_RELATIONS, componentId, filterByActive, filter, order, start, length);\nconst ensureIndexed = (filter, order, start, length) => common.ensureIndexed(Select.spatialRelations.getSubstate, 'spatial', filter, order, start, length, ActionTypes.SPATIAL_RELATIONS, 'relations');\nconst add = common.add(ActionTypes.SPATIAL_RELATIONS);\nconst useIndexedClearAll = common.useIndexedClearAll(ActionTypes.SPATIAL_RELATIONS);\n\nfunction ensureIndexedAndEnsureDependencies(filter, order, start, length, componentId, noStatistic) {\n    return (dispatch, getState) => {\n        dispatch(common.ensureIndexed(Select.spatialRelations.getSubstate, 'spatial', filter, order, start, length, ActionTypes.SPATIAL_RELATIONS, 'relations')).then(() => {\n            let filteredRelations = Select.spatialRelations.getFilteredData(getState(), filter);\n\n            if (filteredRelations) {\n                let dataSourceKeys = _.map(filteredRelations, relation => relation.spatialDataSourceKey);\n                let uniqueDataSourcesKeys = _.uniq(dataSourceKeys);\n\n                /* Ensure spatial data sources */\n                // TODO component id?\n                if (uniqueDataSourcesKeys) {\n                    dispatch(SpatialDataSourcesAction.useKeys(uniqueDataSourcesKeys, componentId)).then(() => {\n                        // TODO load data for vector data sources\n                    });\n                }\n            }\n        }).catch((err) => {\n            dispatch(common.actionGeneralError(err));\n        });\n    }\n}\n\nfunction ensureIndexesWithFilterByActive(filterByActive) {\n    return (dispatch, getState) => {\n\n        let state = getState();\n        let usedIndexes = commonSelectors.getUsesWithActiveDependency(Select.spatialRelations.getSubstate)(state, filterByActive);\n\n        // TODO pass componentId\n        _.each(usedIndexes, (usedIndex) => {\n            _.each(usedIndex.uses, (use) => {\n                dispatch(ensureIndexedAndEnsureDependencies(usedIndex.filter, usedIndex.order, use.start, use.length))\n            });\n        });\n\n    }\n}\n\n\n// ============ export ===========\n\nexport default {\n    add,\n    useIndexedRegister,\n    useIndexedClearAll,\n    ensureIndexed,\n\n    ensureIndexesWithFilterByActive\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\nimport common from \"../_common/actions\";\n\n\n// ============ creators ===========\nconst useIndexedRegister = (componentId, filterByActive, filter, order, start, length) => common.useIndexedRegister(ActionTypes.AREA_RELATIONS, componentId, filterByActive, filter, order, start, length);\nconst ensureIndexed = (filter, order, start, length) => common.ensureIndexed(Select.areaRelations.getSubstate, 'area', filter, order, start, length, ActionTypes.AREA_RELATIONS, 'relations');\nconst add = common.add(ActionTypes.AREA_RELATIONS);\nconst useIndexedClearAll = common.useIndexedClearAll(ActionTypes.AREA_RELATIONS);\n\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tuseIndexedRegister,\n\tuseIndexedClearAll,\n\tensureIndexed,\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\n\nimport common from \"../_common/actions\";\n\nconst useIndexed = common.useIndexed(Select.spatialData.getSubstate, 'spatial', ActionTypes.SPATIAL_DATA, 'data');\n\n// ============ creators ===========\n\n// ============ export ===========\n\nexport default {\n\tuseIndexed\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/actions';\nimport Select from \"../Select\";\n\n// ============ creators ===========\nconst create = common.create(Select.attributes.getSubstate, 'attributes', ActionTypes.ATTRIBUTES);\nconst refreshUses = common.refreshUses(Select.attributes.getSubstate, `attributes`, ActionTypes.ATTRIBUTES);\nconst deleteItem = common.delete(Select.attributes.getSubstate, 'attributes', ActionTypes.ATTRIBUTES);\nconst saveEdited = common.saveEdited(Select.attributes.getSubstate, 'attributes', ActionTypes.ATTRIBUTES);\nconst updateEdited = common.updateEdited(Select.attributes.getSubstate, ActionTypes.ATTRIBUTES);\nconst useIndexed = common.useIndexed(Select.attributes.getSubstate, 'attributes', ActionTypes.ATTRIBUTES);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.ATTRIBUTES);\nconst useKeys = common.useKeys(Select.attributes.getSubstate, 'attributes', ActionTypes.ATTRIBUTES);\nconst useKeysClear = common.useKeysClear(ActionTypes.ATTRIBUTES);\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.attributes.getSubstate, 'attributes', ActionTypes.ATTRIBUTES);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.ATTRIBUTES);\nconst useIndexedBatch = common.useIndexedBatch('attributes', ActionTypes.ATTRIBUTES, 'data');\n\nconst setActiveKeyAndEnsureDependencies = common.setActiveKeyAndEnsureDependencies(ActionTypes.ATTRIBUTES, 'attribute');\n\nfunction setActiveKey(key) {\n\treturn dispatch => {\n\t\tdispatch(setActiveKeyAndEnsureDependencies(key));\n\t};\n}\n\nfunction loadAttributeData(filter, componentId) {\n\treturn (dispatch, getState) => {\n\t\treturn dispatch(useIndexedBatch(null, filter, null, componentId, 'attributeDataSourceKey'));\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\tupdateStateFromView,\n\n\trefreshUses,\n\n\tsaveEdited,\n\tsetActiveKey,\n\n\tupdateEdited,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear,\n\tuseIndexedBatch,\n\n\tloadAttributeData\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport common from \"../_common/actions\";\n\n// ============ creators ===========\nconst useIndexed = common.useIndexed(Select.attributeData.getSubstate, 'attribute', ActionTypes.ATTRIBUTE_DATA, 'data');\nconst useIndexedClear = common.useIndexedClear(ActionTypes.ATTRIBUTE_DATA);\nconst useIndexedBatch = common.useIndexedBatch('attribute', ActionTypes.ATTRIBUTE_DATA, 'data');\n\nfunction loadFilteredData(filter, componentId) {\n\treturn (dispatch) => dispatch(useIndexedBatch(null, filter, null, componentId, 'attributeDataSourceKey'));\n}\n\n// ============ export ===========\n\nexport default {\n    useIndexed,\n    useIndexedClear,\n    loadFilteredData\n}\n","import ActionTypes from '../../constants/ActionTypes';\n\nimport common from \"../_common/actions\";\n\n// ============ creators ===========\nconst useIndexedClear = common.useIndexedClear(ActionTypes.ATTRIBUTE_STATISTICS);\nconst useIndexedBatch = common.useIndexedBatch('attribute', ActionTypes.ATTRIBUTE_STATISTICS, 'statistic');\n\nfunction loadFilteredData(filter, componentId) {\n\treturn (dispatch) => dispatch(useIndexedBatch(null, filter, null, componentId, 'attributeDataSourceKey'));\n}\n\n// ============ export ===========\n\nexport default {\n    useIndexedClear,\n    loadFilteredData\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport common from \"../_common/actions\";\n\n// ============ creators ===========\nconst useKeys = common.useKeys(Select.attributeDataSources.getSubstate, 'attribute', ActionTypes.ATTRIBUTE_DATA_SOURCES, 'dataSources');\nconst useKeysClear = common.useKeysClear(ActionTypes.ATTRIBUTE_DATA_SOURCES);\n// ============ export ===========\n\nexport default {\n    useKeys,\n    useKeysClear,\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\nimport common from \"../_common/actions\";\nimport attributeActions from \"../Attributes/actions\";\nimport attributeDataActions from \"../AttributeData/actions\";\nimport statisticsActions from \"../AttributeStatistics/actions\";\nimport attributeDataSourcesActions from \"../AttributeDataSources/actions\";\nimport commonSelectors from \"../_common/selectors\";\nimport _ from \"lodash\";\nimport {statistics} from '@gisatcz/ptr-utils';\n\n\n// ============ creators ===========\nconst useIndexedRegister = (componentId, filterByActive, filter, order, start, length) => common.useIndexedRegister(ActionTypes.ATTRIBUTE_RELATIONS, componentId, filterByActive, filter, order, start, length);\nconst useIndexed = common.useIndexed(Select.attributeRelations.getSubstate, 'attribute', ActionTypes.ATTRIBUTE_RELATIONS, 'relations');\nconst useIndexedClearAll = common.useIndexedClearAll(ActionTypes.ATTRIBUTE_RELATIONS);\nconst ensureIndexed = (filter, order, start, length) => common.ensureIndexed(Select.attributeRelations.getSubstate, 'attribute', filter, order, start, length, ActionTypes.ATTRIBUTE_RELATIONS, 'relations');\n\n// ============ actions ===========\n\nfunction ensureIndexedSpecific(filter, order, start, length, componentId, noStatistic) {\n    return (dispatch, getState) => {\n        dispatch(common.ensureIndexed(Select.attributeRelations.getSubstate, 'attribute', filter, order, start, length, ActionTypes.ATTRIBUTE_RELATIONS, 'relations')).then(() => {\n        \tlet filteredRelations = Select.attributeRelations.getFilteredRelations(getState(), filter);\n\n        \tif (filteredRelations) {\n        \t\tlet dataSourceKeys = _.map(filteredRelations, relation => relation.attributeDataSourceKey);\n\t\t\t\tlet attributeKeys = _.map(filteredRelations, relation => relation.attributeKey);\n\n\t\t\t\tlet fidColumnNames = null;\n\t\t\t\tlet attributeDataSourceKeys = [];\n\n\t\t\t\tfilteredRelations.map(relation => {\n\t\t\t\t\tfidColumnNames = relation.fidColumnName; // TODO is fidColumnName still the same\n\t\t\t\t\tattributeDataSourceKeys.push(relation.attributeDataSourceKey);\n\t\t\t\t});\n\n\t\t\t\tlet uniqueAtributeDataSourceKeys = _.uniq(attributeDataSourceKeys);\n\n\t\t\t\tlet attributeDataFilter = {\n\t\t\t\t\tfidColumnName: fidColumnNames,\n\t\t\t\t\tattributeDataSourceKey: {in: uniqueAtributeDataSourceKeys}\n\t\t\t\t};\n\n\t\t\t\tlet statisticsFilter = {\n\t\t\t\t\tpercentile: statistics.quartilePercentiles,\n\t\t\t\t\tattributeDataSourceKey: {in: uniqueAtributeDataSourceKeys}\n\t\t\t\t};\n\n\n\t\t\t\t/* use attributes */\n\t\t\t\tif (attributeKeys && attributeKeys.length) {\n\t\t\t\t\tlet uniqueKeys = _.uniq(attributeKeys);\n\t\t\t\t\tdispatch(attributeActions.useKeys(uniqueKeys, componentId));\n\t\t\t\t}\n\n\t\t\t\t/* use attribute data sources */\n\t\t\t\tdispatch(attributeDataSourcesActions.useKeys(dataSourceKeys, componentId));\n\n\t\t\t\t/* use attribute statistics */\n\t\t\t\t/* TODO use indexed? */\n\t\t\t\tlet existingStatisticsSource = Select.attributeStatistics.getBatchByFilterOrder(getState(), statisticsFilter, null);\n\t\t\t\tif (!noStatistic && !existingStatisticsSource) {\n\t\t\t\t\tdispatch(statisticsActions.loadFilteredData(statisticsFilter, componentId));\n\t\t\t\t}\n\n\t\t\t\t/* use attribute data */\n\t\t\t\tlet existingSource = Select.attributeData.getBatchByFilterOrder(getState(), attributeDataFilter, null);\n\t\t\t\tif (!existingSource) {\n\t\t\t\t\tdispatch(attributeDataActions.loadFilteredData(attributeDataFilter, componentId));\n\t\t\t\t}\n\t\t\t}\n        }).catch((err) => {\n        \tdispatch(common.actionGeneralError(err));\n        });\n    }\n}\n\nfunction ensureIndexesWithFilterByActive(filterByActive) {\n    return (dispatch, getState) => {\n\n        let state = getState();\n        let usedIndexes = commonSelectors.getUsesWithActiveDependency(Select.attributeRelations.getSubstate)(state, filterByActive);\n\n        // TODO pass componentId\n        _.each(usedIndexes, (usedIndex) => {\n            _.each(usedIndex.uses, (use) => {\n                dispatch(ensureIndexedSpecific(usedIndex.filter, usedIndex.order, use.start, use.length))\n                // dispatch(ensureIndexedSpecificForLegend(usedIndex.filter, usedIndex.order, use.start, use.length))\n            });\n        });\n\n    }\n}\n\n\n// ============ export ===========\n\nexport default {\n\tuseIndexed,\n\tuseIndexedClearAll,\n    useIndexedRegister,\n    ensureIndexed,\n    ensureIndexesWithFilterByActive,\n\n    // TODO join with ensure indexed\n    ensureIndexedSpecific\n}\n","import ActionTypes from '../../constants/ActionTypes';\n\nimport common from \"../_common/actions\";\nimport Select from \"../Select\";\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.STYLES);\nconst useIndexed = common.useIndexed(Select.styles.getSubstate, 'styles', ActionTypes.STYLES);\nconst useKeys = common.useKeys(Select.styles.getSubstate, 'styles', ActionTypes.STYLES);\nconst useKeysClear = common.useKeysClear(ActionTypes.STYLES);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.STYLES);\n\n// ============ export ===========\n\n// TODO - common?\nconst updateStateFromViewWithData = (view) => {\n    return (dispatch, getState) => {\n        dispatch(updateStateFromView(view));\n        if (view.data) {\n            dispatch(add(view.data));\n        }\n    }\n};\n\nexport default {\n\tadd,\n\tuseIndexed,\n\tuseKeys,\n\tuseKeysClear,\n\tupdateStateFromView,\n    updateStateFromViewWithData\n}\n","import _ from 'lodash';\nimport ActionTypes from '../../constants/ActionTypes';\nimport Select from '../../state/Select';\nimport commonActions from '../_common/actions';\nimport commonHelpers from '../_common/helpers';\nimport commonSelectors from '../_common/selectors';\nimport {utils, map as mapUtils, layerTree} from '@gisatcz/ptr-utils';\n\nimport LayerTemplatesAction from \"../LayerTemplates/actions\";\nimport AreasAction from \"../Areas/actions\";\nimport SelectionsAction from \"../Selections/actions\";\nimport SpatialRelationsAction from \"../SpatialRelations/actions\";\nimport AreaRelationsAction from \"../AreaRelations/actions\";\nimport SpatialDataSourcesAction from \"../SpatialDataSources/actions\";\nimport SpatialDataAction from \"../SpatialData/actions\";\nimport AttributesAction from \"../Attributes/actions\";\nimport AttributeRelationsAction from \"../AttributeRelations/actions\";\nimport AttributeDataSourcesAction from \"../AttributeDataSources/actions\";\nimport AttributeDataAction from \"../AttributeData/actions\";\nimport StylesAction from \"../Styles/actions\";\n\nconst {actionGeneralError} = commonActions;\n\nconst setInitial = commonActions.setInitial(ActionTypes.MAPS);\n\n/*\nTable of contents\n\t- creators\n\t- deprecated creators\n\t- actions\n\t- deprecated actions\n\t- exports\n*/\n\n\n/* ==================================================\n * CREATORS\n * ================================================== */\n\nconst setActiveMapKey = (mapKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(mapByKey) {\n\t\t\tconst activeMapKey = Select._deprecatedMaps.getActiveMapKey(state);\n\t\t\tif(mapKey !== activeMapKey) {\n\t\t\t\tdispatch(actionSetActiveMapKey(mapKey));\n\t\t\t\tconst setByMapKey = Select._deprecatedMaps.getMapSetByMapKey(state, mapKey);\n\t\t\t\tif(setByMapKey) {\n\t\t\t\t\tdispatch(setActiveSetKey(setByMapKey.key));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn dispatch(actionGeneralError(`Can not set mapKey ${mapKey} as active, because map with this key dont exists.`));\n\t\t}\n\t};\n};\n\nconst setMapSetActiveMapKey = (mapKey) => {\n\treturn (dispatch, getState) => {\n\t\tlet set = Select._deprecatedMaps.getMapSetByMapKey(getState(), mapKey);\n\t\tif (set) {\n\t\t\tdispatch(actionSetMapSetActiveMapKey(set.key, mapKey));\n\t\t}\n\t};\n};\n\nconst setActiveSetKey = (setKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(setByKey) {\n\t\t\tconst activeSetKey = Select._deprecatedMaps.getActiveSetKey(state);\n\t\t\tif(setKey !== activeSetKey) {\n\t\t\t\treturn dispatch(actionSetActiveSetKey(setKey));\n\t\t\t}\n\t\t} else {\n\t\t\treturn dispatch(actionGeneralError(`Can not set setKey ${setKey} as active, because set with this key dont exists.`));\n\t\t}\n\t};\n};\n\nconst addSet = (set) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setKey = set.key;\n\t\tif(!setKey) {\n\t\t\treturn dispatch(actionGeneralError(`Undefined setKey for set ${set}`));\n\t\t} else {\n\t\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\t\tif(setByKey) {\n\t\t\t\treturn dispatch(actionGeneralError(`Set with given setKey (${setKey}) already exists ${setByKey}`));\n\t\t\t} else {\n\t\t\t\tdispatch(actionAddSet(set));\n\t\t\t\t//if no set is active, set set as active\n\t\t\t\tconst activeSetKey = Select._deprecatedMaps.getActiveSetKey(state);\n\t\t\t\tif(!activeSetKey) {\n\t\t\t\t\tdispatch(actionSetActiveSetKey(setKey));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t};\n};\n\n/**\n * {Object} layerTreesFilter\n * {Array} mapKeys\n */\nconst addLayersToMaps = (layerTreesFilter, mapKeys, useActiveMetadataKeys) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\t// getIndexed\n\t\tconst layerTreesData = Select.layerTrees.getByFilterOrder(state, layerTreesFilter, null);\n\t\t\n\t\tif(layerTreesData) {\n\t\t\t//BE should return only one record, but could be bore fore scopeKey and applicationKey. \n\t\t\t//Take last record\n\t\t\tconst lastLTdata = layerTreesData[layerTreesData.length - 1];\n\t\t\t\n\t\t\t//parse to map state\n\t\t\tif(lastLTdata && lastLTdata.data && lastLTdata.data.structure && lastLTdata.data.structure.length > 0) {\n\t\t\t\tconst layerTreeStructure = lastLTdata.data.structure;\n\t\t\t\tdispatch(addTreeLayers(layerTreeStructure, 'layers', mapKeys, useActiveMetadataKeys));\n\t\t\t\tdispatch(addTreeLayers(layerTreeStructure, 'backgroundLayers', mapKeys, useActiveMetadataKeys));\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst addTreeLayers = (treeLayers, layerTreeBranchKey, mapKeys, useActiveMetadataKeys) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\n\t\t//no array but object\n\t\tconst flattenLT = layerTree.getFlattenLayers(treeLayers[0][layerTreeBranchKey]);\n\t\tconst visibleLayers = flattenLT.filter((l) => l.visible);\n\t\t//add all visible layers in layerTree to map\n\t\tconst visibleLayersKeys = visibleLayers.map(l => l.key);\n\n\n\t\tif(mapKeys) {\n\t\t\tmapKeys.forEach((mapKey) => {\n\n\t\t\t\t// check if layer in map\n\t\t\t\tconst layersState = Select._deprecatedMaps.getLayersStateByMapKey_deprecated(state, mapKey, useActiveMetadataKeys);\n\n\t\t\t\t// clean templateKeys found in map\n\t\t\t\tconst uniqVisibleLayersKeys = layersState ? visibleLayersKeys.filter((lk) => !layersState.some(ls => ls.layer && ls.layer.layerTemplate === lk)) : visibleLayersKeys;\n\t\t\t\tuniqVisibleLayersKeys.forEach((layerKey) => {\n\t\t\t\t\tconst zIndex = layerTree.getLayerZindex(treeLayers[0], layerKey);\n\t\t\t\t\tconst layer = {layerTemplate: layerKey};\n\n\t\t\t\t\tswitch (layerTreeBranchKey) {\n\t\t\t\t\t\tcase 'backgroundLayers':\n\t\t\t\t\t\t\treturn dispatch(setMapBackgroundLayer(mapKey, layer, zIndex));\n\t\t\t\t\t\tcase 'layers':\n\t\t\t\t\t\t\treturn dispatch(addLayer(mapKey, layer, zIndex, useActiveMetadataKeys));\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn dispatch(addLayer(mapKey, layer, zIndex, useActiveMetadataKeys));\n\t\t\t\t\t}\n\t\t\t\t}) \n\t\t\t})\n\t\t}\n\t}\n};\n\nconst removeSet = (setKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(actionRemoveSet(setKey));\n\t\t}\n\t};\n};\n\nconst addMapToSet = (setKey, mapKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\t//check map exist\n\t\t\tif (setByKey.maps && setByKey.maps.includes(mapKey)) {\n\t\t\t\treturn dispatch(actionGeneralError(`Set ${setKey} already contains map ${mapKey}.`));\n\t\t\t} else {\n\t\t\t\tdispatch(actionAddMapToSet(setKey, mapKey));\n\t\t\t\t//if no map is active, set map as active\n\t\t\t\tconst activeMapKey = Select._deprecatedMaps.getMapSetActiveMapKey(state, setKey);\n\t\t\t\tif(!activeMapKey) {\n\t\t\t\t\tdispatch(setMapSetActiveMapKey(mapKey));\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst removeMapKeyFromSet = (setKey, mapKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\t//check map exist\n\t\t\tif (setByKey.maps && setByKey.maps.includes(mapKey)) {\n\t\t\t\tconst activeMapKey = Select._deprecatedMaps.getMapSetActiveMapKey(state, setKey);\n\t\t\t\tdispatch(actionRemoveMapKeyFromSet(setKey, mapKey));\n\n\t\t\t\tif (activeMapKey === mapKey) {\n\t\t\t\t\tconst mapSetMapKeys = Select._deprecatedMaps.getMapSetMapKeys(getState(), setKey);\n\t\t\t\t\tif (mapSetMapKeys) {\n\t\t\t\t\t\tdispatch(actionSetMapSetActiveMapKey(setKey, mapSetMapKeys[0]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn dispatch(actionGeneralError(`Set ${setKey} do not contains map ${mapKey}.`));\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst setSetView = (setKey, view) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(actionSetSetView(setKey, view));\n\t\t}\n\t}\n};\n\nconst setSetSync = (setKey, sync) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(actionSetSetSync(setKey, sync));\n\t\t}\n\t}\n};\n\nconst orderSetByMapPeriod = (setKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tlet setMaps = Select._deprecatedMaps.getMapSetMapKeys(state, setKey);\n\t\tlet maps = Select._deprecatedMaps.getMapsAsObject(state);\n\t\tlet periods = Select.periods.getAllAsObject(state);\n\t\tif (setMaps && maps && periods) {\n\t\t\tlet extendedSetMaps = setMaps.map(mapKey => {\n\t\t\t\tlet map = _.cloneDeep(maps[mapKey]);\n\t\t\t\tlet periodKey = map && map.data && map.data.metadataModifiers && map.data.metadataModifiers.period;\n\t\t\t\tif (periodKey && periods[periodKey]) {\n\t\t\t\t\tmap.data.metadataModifiers.period = periods[periodKey].data.period || periods[periodKey].data.nameDisplay;\n\t\t\t\t}\n\t\t\t\treturn map;\n\t\t\t});\n\n\t\t\tif (extendedSetMaps && extendedSetMaps.length) {\n\t\t\t\tlet orderedExtendedSetMaps = _.orderBy(extendedSetMaps, ['data.metadataModifiers.period'], ['asc']);\n\t\t\t\tlet orderedMapKeys = orderedExtendedSetMaps.map(map => map.key);\n\t\t\t\tdispatch(actionSetSetMaps(setKey, orderedMapKeys))\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst addMap = (map) => {\n\treturn (dispatch, getState) => {\n\t\tif(map && !map.key) {\n\t\t\treturn dispatch(actionGeneralError(`Undefined mapKey for map ${map}`));\n\t\t} else {\n\t\t\tconst state = getState();\n\t\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, map.key);\n\t\t\t\n\t\t\tif (mapByKey) {\n\t\t\t\treturn dispatch(actionGeneralError(`Map with given mapKey (${map.key}) already exists ${mapByKey}`));\n\t\t\t} else {\n\t\t\t\treturn dispatch(actionAddMap(map));\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst addMapForPeriod = (periodKey, setKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tlet map = Select._deprecatedMaps.getMapByMetadata_deprecated(state, {period: periodKey});\n\n\t\tif (!map) {\n\t\t\tlet mapKey = utils.uuid();\n\t\t\tmap = {\n\t\t\t\tkey: mapKey,\n\t\t\t\tdata: {\n\t\t\t\t\tmetadataModifiers: {\n\t\t\t\t\t\tperiod: periodKey\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tdispatch(addMap(map));\n\t\t}\n\n\t\tdispatch(addMapToSet(setKey, map.key));\n\t\tdispatch(orderSetByMapPeriod(setKey));\n\t};\n};\n\nconst removeMap = (mapKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tconst mapSets = Select._deprecatedMaps.getMapSets(state);\n\t\t\tif (mapSets) {\n\t\t\t\t_.each(mapSets, mapSet => {\n\t\t\t\t\tconst mapSetMapKey = _.includes(mapSet.maps, mapKey);\n\t\t\t\t\tif (mapSetMapKey) {\n\t\t\t\t\t\tdispatch(removeMapKeyFromSet(mapSet.key, mapKey));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tdispatch(actionRemoveMap(mapKey));\n\t\t}\n\t};\n};\n\nconst removeMapForPeriod = (periodKey, setKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst map = Select._deprecatedMaps.getMapByMetadata_deprecated(state, {period: periodKey});\n\t\tif(!map) {\n\t\t\tdispatch(actionGeneralError(`No map found for period ${periodKey}.`));\n\t\t} else {\n\t\t\tdispatch(removeMap(map.key));\n\t\t}\n\t};\n};\n\nconst setMapName = (mapKey, name) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(actionSetMapName(mapKey, name));\n\t\t}\n\t};\n};\n\nconst setMapData = (mapKey, data) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(actionSetMapData(mapKey, data));\n\t\t}\n\t};\n};\n\nconst setMapView = (mapKey, view) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(actionSetMapView(mapKey, view));\n\t\t}\n\t};\n};\n\nconst addLayer = (mapKey, layer, index, useActiveMetadataKeys) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tif (!layer.key){\n\t\t\tlayer.key = utils.uuid();\n\t\t}\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionAddLayer(mapKey, layer, index));\n\t\t\tdispatch(use(mapKey, useActiveMetadataKeys));\n\t\t}\n\t};\n};\n\nconst addLayers = (mapKey, layers) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\treturn layers.map(layer => dispatch(addLayer(mapKey, layer)))\n\t\t}\n\t}\n};\n\nconst removeLayer = (mapKey, layerKey) => {\n\treturn (dispatch, getState) => {\n\t\tif(!layerKey) {\n\t\t\treturn dispatch(actionGeneralError(`Undefined layer key.`));\n\t\t} else {\n\t\t\tconst state = getState();\n\t\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\t\tif(!mapByKey) {\n\t\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t\t} else {\n\t\t\t\t//check if layer exist\n\t\t\t\tconst layer = Select._deprecatedMaps.getMapLayerByMapKeyAndLayerKey(state, mapKey, layerKey);\n\t\t\t\tif(layer) {\n\t\t\t\t\treturn dispatch(actionRemoveLayer(mapKey, layerKey));\n\t\t\t\t} else {\n\t\t\t\t\treturn dispatch(actionGeneralError(`No layer (${layerKey}) found in mapKey ${mapKey}.`));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n};\n\nconst removeLayers = (mapKey, layersKeys) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\treturn layersKeys.map(layerKey => dispatch(removeLayer(mapKey, layerKey)))\n\t\t}\n\t}\n};\n\nconst setLayerIndex = (mapKey, layerKey, index) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetLayerIndex(mapKey, layerKey, index));\n\t\t}\n\t}\n};\n\nconst setLayerHoveredFeatureKeys = (mapKey, layerKey, hoveredFeatureKeys) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapLayer = Select._deprecatedMaps.getMapLayerByMapKeyAndLayerKey(state, mapKey, layerKey);\n\t\tif (mapLayer) {\n\t\t\tconst prevKeys = mapLayer && mapLayer.options && mapLayer.options.hovered && mapLayer.options.hovered.keys;\n\n\t\t\tif (prevKeys) {\n\t\t\t\tconst prevKeysString = JSON.stringify(_.sortBy(prevKeys));\n\t\t\t\tconst nextKeysString = JSON.stringify(_.sortBy(hoveredFeatureKeys));\n\t\t\t\tif (prevKeysString !== nextKeysString) {\n\t\t\t\t\tdispatch(actionSetMapLayerHoveredFeatureKeys(mapKey, layerKey, hoveredFeatureKeys));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatch(actionSetMapLayerHoveredFeatureKeys(mapKey, layerKey, hoveredFeatureKeys));\n\t\t\t}\n\t\t}\n\n\t\t// TODO\n\t\telse {\n\t\t\tlet set = Select._deprecatedMaps.getMapSetByMapKey(state, mapKey);\n\t\t\tif (set) {\n\t\t\t\t// let setLayer = Select._deprecatedMaps.getSetLayerBySetKeyAndLayerKey(state, set.key, layerKey);\n\t\t\t\t// if (setLayer) {\n\t\t\t\t// \t dispatch(actionSetSetLayerHoveredFeatureKeys(state, setKey, layerKey, hoveredFeatureKeys));\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\t}\n};\n\n// TODO refactor - where to decide if selections are enabled\nconst setLayerSelectedFeatureKeys = (mapKey, layerKey, selectedFeatureKeys) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapLayer = Select._deprecatedMaps.getMapLayerByMapKeyAndLayerKey(state, mapKey, layerKey);\n\t\tconst activeSelectionKey = Select.selections.getActiveKey(state);\n\t\tconst selectionKey = activeSelectionKey || utils.uuid();\n\n\t\t// set selection in selections store\n\t\tif (!activeSelectionKey) {\n\t\t\tconst defaultSelection = {\n\t\t\t\tkey: selectionKey,\n\t\t\t\tdata: {\n\t\t\t\t\tcolour: \"#00ffff\",\n\t\t\t\t\t//style: styleKey // TODO???\n\t\t\t\t\tfeatureKeysFilter: {\n\t\t\t\t\t\tkeys: selectedFeatureKeys\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tdispatch(SelectionsAction.add([defaultSelection]));\n\t\t\tdispatch(SelectionsAction.setActiveKey(selectionKey));\n\t\t} else {\n\t\t\tdispatch(SelectionsAction.setActiveSelectionFeatureKeysFilterKeys(selectedFeatureKeys));\n\t\t}\n\n\t\t// TODO it shouldn't be needed since this only clear and set again empty selection object\n\t\t// set selection in map store\n\t\t// if (mapLayer) {\n\t\t// \tdispatch(actionClearSelectionInAllLayers(mapKey, selectionKey));\n\t\t// \tdispatch(actionSetMapLayerSelection(mapKey, layerKey, selectionKey));\n\t\t// }\n\t\t//\n\t\t// // TODO\n\t\t// else {\n\t\t// \tlet set = Select._deprecatedMaps.getMapSetByMapKey(state, mapKey);\n\t\t// \tif (set) {\n\t\t//\n\t\t// \t}\n\t\t// }\n\t}\n};\n\n/**\n * \n * Similar like add layer.\n * It enables to set any layer property except layerKey. \n * Layer object is merged with default layer option.\n */\nconst setMapLayer = (mapKey, layerKey, layer) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\t//check if layer exist\n\t\t\tconst layerExists = Select._deprecatedMaps.getMapLayerByMapKeyAndLayerKey(state, mapKey, layerKey);\n\t\t\tif(layerExists) {\n\t\t\t\tdispatch(actionSetMapLayer(mapKey, layerKey, layer));\n\t\t\t} else {\n\t\t\t\treturn dispatch(actionGeneralError(`No layer (${layerKey}) found in mapKey ${mapKey}.`));\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst setMapLayerStyle = (mapKey, layerKey, style) => {\n    return (dispatch, getState) => {\n        const state = getState();\n        const mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n        if(!mapByKey) {\n            return dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n        } else {\n            //check if layer exist\n            const layerExists = Select._deprecatedMaps.getMapLayerByMapKeyAndLayerKey(state, mapKey, layerKey);\n            if(layerExists) {\n                dispatch(actionSetMapLayerStyle(mapKey, layerKey, style));\n            } else {\n                return dispatch(actionGeneralError(`No layer (${layerKey}) found in mapKey ${mapKey}.`));\n            }\n        }\n    }\n};\n\n\n/**\n * \n * It enables to update any layer property except layerKey. \n * Layer object is merged with actual layer option.\n */\nconst updateMapLayer = (mapKey, layerKey, layer) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\t//check if layer exist\n\t\t\tconst layerExists = Select._deprecatedMaps.getMapLayerByMapKeyAndLayerKey(state, mapKey, layerKey);\n\t\t\tif(layerExists) {\n\t\t\t\tdispatch(actionUpdateMapLayer(mapKey, layerKey, layer));\n\t\t\t} else {\n\t\t\t\treturn dispatch(actionGeneralError(`No layer (${layerKey}) found in mapKey ${mapKey}.`));\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst updateMapAndSetView = (mapKey, update) => {\n\treturn (dispatch, getState) => {\n\t\tlet set = Select._deprecatedMaps.getMapSetByMapKey(getState(), mapKey);\n\t\tlet forSet = null;\n\t\tlet forMap = null;\n\n\t\tif (set && set.sync) {\n\t\t\t// pick key-value pairs that are synced for set\n\t\t\tforSet = _.pickBy(update, (updateVal, updateKey) => {\n\t\t\t\treturn set.sync[updateKey];\n\t\t\t});\n\n\t\t\tforMap = _.omitBy(update, (updateVal, updateKey) => {\n\t\t\t\treturn set.sync[updateKey];\n\t\t\t});\n\t\t} else {\n\t\t\tforMap = update;\n\t\t}\n\n\t\tif (forSet && !_.isEmpty(forSet)) {\n\t\t\t//check data integrity\n\t\t\tforSet = mapUtils.view.ensureViewIntegrity(forSet); //TODO test\n\t\t\tdispatch(actionUpdateSetView(set.key, forSet));\n\t\t}\n\n\t\tif (forMap && !_.isEmpty(forMap)) {\n\t\t\t//check data integrity\n\t\t\tforMap = mapUtils.view.ensureViewIntegrity(forMap); //TODO test\n\t\t\tdispatch(actionUpdateMapView(mapKey, forMap));\n\t\t}\n\t}\n};\n\nconst updateSetView = (setKey, update) => {\n\treturn (dispatch, getState) => {\n\t\tlet activeMapKey = Select._deprecatedMaps.getMapSetActiveMapKey(getState(), setKey);\n\t\tdispatch(updateMapAndSetView(activeMapKey, update));\n\t};\n};\n\nconst resetViewHeading = (mapKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst view = Select._deprecatedMaps.getView(getState(), mapKey);\n\t\tmapUtils.resetHeading(view.heading, heading => dispatch(updateMapAndSetView(mapKey, {heading})));\n\t}\n};\n\nconst setMapScope = (mapKey, scope) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapScope(mapKey, scope));\n\t\t}\n\t};\n};\n\nconst setMapScenario = (mapKey, scenario) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapScenario(mapKey, scenario));\n\t\t}\n\t};\n};\n\nconst setMapPeriod = (mapKey, period) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapPeriod(mapKey, period));\n\t\t}\n\t};\n};\n\nconst setMapPlace = (mapKey, place) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapPlace(mapKey, place));\n\t\t}\n\t};\n};\n\nconst setMapCase = (mapKey, caseKey) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapCase(mapKey, caseKey));\n\t\t}\n\t};\n};\n\nconst setMapBackgroundLayer = (mapKey, backgroundLayer) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tif (backgroundLayer && !backgroundLayer.key){\n\t\t\tbackgroundLayer.key = utils.uuid();\n\t\t}\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapBackgroundLayer(mapKey, backgroundLayer));\n\t\t\tdispatch(deprecated_use(mapKey));\n\t\t}\n\t};\n};\n/**\n * Set (replace) all map layers, and refresh use\n * @param mapKey\n * @param layers - complete layers array\n * @returns {Function}\n */\nconst setMapLayers = (mapKey, layers) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetMapLayers(mapKey, layers));\n\t\t\tdispatch(use(mapKey));\n\t\t}\n\t};\n};\n\nconst setSetBackgroundLayer = (setKey, backgroundLayer) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\tdispatch(actionSetSetBackgroundLayer(setKey, backgroundLayer));\n\t\t}\n\t};\n};\n\nconst setSetLayers = (setKey, layers) => {\n    return (dispatch, getState) => {\n        const state = getState();\n        const setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n        if(!setByKey) {\n            return dispatch(actionGeneralError(`No map set found for setKey ${setKey}.`));\n        } else {\n            dispatch(actionSetSetLayers(setKey, layers));\n        }\n    };\n};\n\nfunction use(mapKey, backgroundLayer, layers) {\n\treturn (dispatch, getState) => {\n\t\tdispatch(useClear(mapKey));\n\t\tlet state = getState();\n\n\t\t// let filterByActive = Select._deprecatedMaps.getFilterByActiveByMapKey(state, mapKey);\n\t\tif (backgroundLayer || layers) {\n\t\t\tif (backgroundLayer) {\n\t\t\t\tbackgroundLayer = {...backgroundLayer, key: 'pantherBackgroundLayer'};\n\t\t\t\tlayers = layers || [];\n\t\t\t\tlayers = [backgroundLayer, ...layers];\n\t\t\t}\n\t\t} else {\n\t\t\tlayers = Select._deprecatedMaps.getAllLayersStateByMapKey(state, mapKey);\n\t\t}\n\n\t\tlet activeKeys = commonSelectors.getAllActiveKeys(state);\n\n\t\tif (layers) {\n\t\t\tconst componentId = `map_${mapKey}`;\n\t\t\tlayers.forEach(layer => {\n\t\t\t\tlet filter = {...layer.metadataModifiers};\n\t\t\t\tif (layer.layerTemplateKey) {\n\t\t\t\t\tfilter.layerTemplateKey = layer.layerTemplateKey;\n\t\t\t\t\tdispatch(LayerTemplatesAction.useKeys([layer.layerTemplateKey], componentId));\n\t\t\t\t} else if (layer.areaTreeLevelKey) {\n\t\t\t\t\tfilter.areaTreeLevelKey = layer.areaTreeLevelKey;\n\t\t\t\t\tdispatch(AreasAction.areaTreeLevels.useKeys([layer.areaTreeLevelKey], componentId));\n\t\t\t\t}\n\n\t\t\t\tlet filterByActive = layer.filterByActive || null;\n\t\t\t\tlet mergedFilter = commonHelpers.mergeFilters(activeKeys, filterByActive, filter);\n\n\n\t\t\t\t/* Ensure spatial relations or area relations */\n\t\t\t\tif (layer.layerTemplateKey || layer.areaTreeLevelKey || mergedFilter.layerTemplateKey) {\n\t\t\t\t\tlet action, select;\n\t\t\t\t\tif (layer.layerTemplateKey || mergedFilter.layerTemplateKey) {\n\t\t\t\t\t\taction = SpatialRelationsAction;\n\t\t\t\t\t\tselect = Select.spatialRelations;\n\t\t\t\t\t} else if (layer.areaTreeLevelKey) {\n\t\t\t\t\t\taction = AreaRelationsAction;\n\t\t\t\t\t\tselect = Select.areaRelations;\n\t\t\t\t\t}\n\t\t\t\t\tdispatch(action.useIndexedRegister(componentId, filterByActive, filter, null, 1, 1000));\n\t\t\t\t\tdispatch(action.ensureIndexed(mergedFilter, null, 1, 1000)).then(() => {\n\t\t\t\t\t\t/* Ensure spatial data sources */\n\t\t\t\t\t\tconst relations = select.getFilteredData(getState(), mergedFilter);\n\t\t\t\t\t\tif (relations && relations.length) {\n\t\t\t\t\t\t\tconst spatialFilters = relations.map(relation => {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tspatialDataSourceKey: relation.spatialDataSourceKey,\n\t\t\t\t\t\t\t\t\tfidColumnName: relation.fidColumnName\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tconst spatialDataSourcesKeys = _.uniq(spatialFilters.map(filter => filter.spatialDataSourceKey));\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdispatch(SpatialDataSourcesAction.useKeys(spatialDataSourcesKeys, componentId)).then(() => {\n\t\t\t\t\t\t\t\tconst dataSources = Select.spatialDataSources.getByKeys(getState(), spatialDataSourcesKeys);\n\t\t\t\t\t\t\t\tif (dataSources) {\n\t\t\t\t\t\t\t\t\tdataSources.forEach(dataSource => {\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// TODO load raster data?\n\t\t\t\t\t\t\t\t\t\tif (dataSource && dataSource.data && dataSource.data.type === 'vector') {\n\t\t\t\t\t\t\t\t\t\t\tconst spatialFilter = _.find(spatialFilters, {spatialDataSourceKey: dataSource.key});\n\t\t\t\t\t\t\t\t\t\t\tdispatch(SpatialDataAction.useIndexed(null, spatialFilter, null, 1, 1, componentId));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// Ensure attribute data //todo\n\t\t\t\t// TODO layer.attributeKey case?\n\t\t\t\t// TODO handle \"key: in {}\" case in filters\n\t\t\t\tif (layer.attributeKeys) {\n\t\t\t\t\tdispatch(AttributesAction.useKeys(layer.attributeKeys, componentId));\n\n\t\t\t\t\tlet attributeFilter = {\n\t\t\t\t\t\t...layer.attributeMetadataModifiers,\n\t\t\t\t\t\tattributeKey: {\n\t\t\t\t\t\t\tin: layer.attributeKeys\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tif (layer.layerTemplateKey) {\n\t\t\t\t\t\tattributeFilter.layerTemplateKey = layer.layerTemplateKey;\n\t\t\t\t\t} else if (layer.areaTreeLevelKey) {\n\t\t\t\t\t\tattributeFilter.areaTreeLevelKey = layer.areaTreeLevelKey;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet attributeFilterByActive = layer.attributeFilterByActive || null;\n\t\t\t\t\tlet mergedAttributeFilter = commonHelpers.mergeFilters(activeKeys, attributeFilterByActive, attributeFilter);\n\n\t\t\t\t\tdispatch(AttributeRelationsAction.useIndexedRegister( componentId, attributeFilterByActive, attributeFilter, null, 1, 2000));\n\t\t\t\t\tdispatch(AttributeRelationsAction.ensureIndexed(mergedAttributeFilter, null, 1, 2000)).then(() => {\n\t\t\t\t\t\t/* Ensure data sources */\n\t\t\t\t\t\tconst relations = Select.attributeRelations.getIndexed(getState(), attributeFilterByActive, attributeFilter, null, 1, 2000);\n\t\t\t\t\t\tif (relations && relations.length) {\n\t\t\t\t\t\t\tconst filters = relations.map(relation => {return {\n\t\t\t\t\t\t\t\tattributeDataSourceKey: relation.data && relation.data.attributeDataSourceKey,\n\t\t\t\t\t\t\t\tfidColumnName: relation.data && relation.data.fidColumnName\n\t\t\t\t\t\t\t}});\n\t\t\t\t\t\t\tconst dataSourcesKeys = filters.map(filter => filter.attributeDataSourceKey);\n\n\t\t\t\t\t\t\tdispatch(AttributeDataSourcesAction.useKeys(dataSourcesKeys, componentId)).then(() => {\n\t\t\t\t\t\t\t\tconst dataSources = Select.attributeDataSources.getByKeys(getState(), dataSourcesKeys);\n\t\t\t\t\t\t\t\tif (dataSources) {\n\n\t\t\t\t\t\t\t\t\tlet dataSourceKeys = [];\n\t\t\t\t\t\t\t\t\tdataSources.forEach(dataSource => {\n\t\t\t\t\t\t\t\t\t\tdataSourceKeys.push(dataSource.key);\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t// TODO fidColumnName!!!\n\t\t\t\t\t\t\t\t\tconst filter = {\n\t\t\t\t\t\t\t\t\t\tattributeDataSourceKey: {\n\t\t\t\t\t\t\t\t\t\t\tin: dataSourceKeys\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tfidColumnName: relations[0].data.fidColumnName\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tdispatch(AttributeDataAction.useIndexed(null, filter, null, 1, 1, componentId));\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\tif (layer.styleKey) {\n\t\t\t\t\tdispatch(StylesAction.useKeys([layer.styleKey],componentId));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction useClear(mapKey) {\n\treturn (dispatch) => {\n\t\tdispatch(commonActions.useIndexedClear(ActionTypes.SPATIAL_RELATIONS)(`map_${mapKey}`));\n\t\tdispatch(commonActions.useKeysClear(ActionTypes.SPATIAL_DATA_SOURCES)(`map_${mapKey}`));\n\t\tdispatch(commonActions.useKeysClear(ActionTypes.LAYER_TEMPLATES)(`map_${mapKey}`));\n\t\tdispatch(commonActions.useKeysClear(ActionTypes.AREAS.AREA_TREE_LEVELS)(`map_${mapKey}`));\n\t\tdispatch(commonActions.useKeysClear(ActionTypes.STYLES)(`map_${mapKey}`));\n\t};\n}\n\nfunction updateStateFromView(data) {\n\treturn dispatch => {\n\t\tif (data) {\n\t\t\tdispatch(actionUpdate(data));\n\t\t}\n\t};\n}\n\nfunction goToPlace(placeString) {\n\treturn (dispatch, getState) => {\n\t\tif (placeString && placeString.length) {\n\t\t\tmapUtils.getLocationFromPlaceString(placeString).then(location => {\n\t\t\t\tif (location) {\n\t\t\t\t\tlet mapKey = Select._deprecatedMaps.getActiveMapKey(getState());\n\t\t\t\t\tdispatch(updateMapAndSetView(mapKey, location));\n\n\t\t\t\t\t// TODO temporary solution for old map state\n\t\t\t\t\tlet navigatorUpdate = {\n\t\t\t\t\t\trange: location.boxRange,\n\t\t\t\t\t\tlookAtLocation: {\n\t\t\t\t\t\t\tlatitude: location.center.lat,\n\t\t\t\t\t\t\tlongitude: location.center.lon\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tdispatch(deprecated_updateWorldWindNavigator(mapKey,navigatorUpdate)); // TODO deprecated\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n}\n\n/* ==================================================\n * DEPRECATED CREATORS\n * ================================================== */\n\nfunction deprecated_use(mapKey, useActiveMetadataKeys) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet layers = Select._deprecatedMaps.getLayersStateByMapKey_deprecated(state, mapKey, useActiveMetadataKeys);\n\t\tlet backgroundLayer = Select._deprecatedMaps.getBackgroundLayerStateByMapKey_deprecated(state, mapKey);\n\t\tlet finalLayers = [];\n\n\t\tif (backgroundLayer) {\n\t\t\tfinalLayers.push(backgroundLayer);\n\t\t}\n\n\t\tif (layers) {\n\t\t\tfinalLayers = finalLayers.concat(layers);\n\t\t}\n\n\t\tif (finalLayers.length) {\n\t\t\tconst componentId = `map_${mapKey}`;\n\n\t\t\tfinalLayers.forEach(filters => {\n\n\t\t\t\t//assume, that spatial data dont need period\n\t\t\t\tconst spatialRelationsFilter = _.cloneDeep(filters.mergedFilter);\n\t\t\t\tconst spatialRelationsFilterByActive= _.cloneDeep(filters.filterByActive);\n\n\t\t\t\tif (spatialRelationsFilter.periodKey) {\n\t\t\t\t\tdelete spatialRelationsFilter.periodKey;\n\t\t\t\t}\n\n\t\t\t\tif (spatialRelationsFilter.attributeKey) {\n\t\t\t\t\tdelete spatialRelationsFilter.attributeKey;\n\t\t\t\t}\n\n\t\t\t\tif (spatialRelationsFilterByActive.attribute) {\n\t\t\t\t\tdelete spatialRelationsFilterByActive.attribute;\n\t\t\t\t}\n\n\n\t\t\t\tdispatch(SpatialRelationsAction.useIndexedRegister( componentId, spatialRelationsFilterByActive, spatialRelationsFilter, null, 1, 1000));\n\t\t\t\tdispatch(SpatialRelationsAction.ensureIndexed(spatialRelationsFilter, null, 1, 1000))\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tlet spatialDataSourcesKeys = Select.spatialRelations.getDataSourceKeysFiltered(getState(), spatialRelationsFilter);\n\t\t\t\t\t\tif (spatialDataSourcesKeys && spatialDataSourcesKeys.length) {\n\n\t\t\t\t\t\t\tdispatch(SpatialDataSourcesAction.useKeys([spatialDataSourcesKeys[0]], componentId)).then(() => {\n\t\t\t\t\t\t\t\tlet dataSource = Select.spatialDataSources.getByKeys(getState(), spatialDataSourcesKeys);\n\t\t\t\t\t\t\t\t//datasource is only one\n\t\t\t\t\t\t\t\t//if vector dataSource, then load attribute data\n\t\t\t\t\t\t\t\tif(dataSource && dataSource[0] && dataSource[0].data.type === 'vector') {\n\t\t\t\t\t\t\t\t\tlet spatialDataSources = Select.spatialRelations.getFilteredData(getState(), spatialRelationsFilter);\n\n\t\t\t\t\t\t\t\t\tconst spatialFilter = {\n\t\t\t\t\t\t\t\t\t\tspatialDataSourceKey: dataSource[0].key,\n\t\t\t\t\t\t\t\t\t\tfidColumnName: spatialDataSources[0].fidColumnName\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tconst spatialData = Select.spatialDataSources.vector.getBatchByFilterOrder(getState(), spatialFilter, null);\n\t\t\t\t\t\t\t\t\t//if data already loaded, skip loading\n\t\t\t\t\t\t\t\t\tif(!spatialData) {\n\t\t\t\t\t\t\t\t\t\tdispatch(SpatialDataSourcesAction.vector.loadLayerData(spatialFilter, componentId));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst attributeFilter = _.cloneDeep(filters.mergedFilter);\n\n\t\t\t\t\t\t\t\t\tdispatch(AttributeRelationsAction.useIndexedRegister( componentId, filters.filterByActive, attributeFilter, null, 1, 1000));\n\t\t\t\t\t\t\t\t\tdispatch(AttributeRelationsAction.ensureIndexedSpecific(attributeFilter, null, 1, 1000, componentId));\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tdispatch(commonActions.actionGeneralError(err));\n\t\t\t\t\t});\n\n\t\t\t\t// TODO register and ensure layer templates\n\t\t\t});\n\t\t}\n\t};\n};\n\nconst deprecated_useClear = (mapKey) => {\n\treturn (dispatch) => {\n\t\tdispatch(commonActions.useIndexedClear(ActionTypes.SPATIAL_RELATIONS)(`map_${mapKey}`));\n\t};\n};\n\nconst deprecated_checkWorldWindNavigatorIntegrity = (WorldWindNavigator) => {\n\tif (WorldWindNavigator.heading && WorldWindNavigator.heading > 360) {\n\t\tWorldWindNavigator.heading = WorldWindNavigator.heading - 360;\n\t}\n\n\tif (WorldWindNavigator.heading && WorldWindNavigator.heading < -360) {\n\t\tWorldWindNavigator.heading = WorldWindNavigator.heading + 360;\n\t}\n\n\tif (WorldWindNavigator.tilt && WorldWindNavigator.tilt < 0) {\n\t\tWorldWindNavigator.tilt = 0;\n\t}\n\n\tif (WorldWindNavigator.tilt && WorldWindNavigator.tilt > 90) {\n\t\tWorldWindNavigator.tilt = 90;\n\t}\n\treturn WorldWindNavigator;\n};\n\nconst deprecated_setMapWorldWindNavigator = (mapKey, worldWindNavigator) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst mapByKey = Select._deprecatedMaps.getMapByKey(state, mapKey);\n\t\tif(!mapByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No map found for mapKey ${mapKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(deprecated_actionSetMapWorldWindNavigator(mapKey, worldWindNavigator));\n\t\t}\n\t};\n};\n\nconst deprecated_setSetWorldWindNavigator = (setKey, worldWindNavigator) => {\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst setByKey = Select._deprecatedMaps.getMapSetByKey(state, setKey);\n\t\tif(!setByKey) {\n\t\t\treturn dispatch(actionGeneralError(`No set found for setKey ${setKey}.`));\n\t\t} else {\n\t\t\treturn dispatch(deprecated_actionSetSetWorldWindNavigator(setKey, worldWindNavigator));\n\t\t}\n\t}\n};\n\nconst deprecated_updateWorldWindNavigator = (mapKey, updates) => {\n\treturn (dispatch, getState) => {\n\t\tlet set = Select._deprecatedMaps.getMapSetByMapKey(getState(), mapKey);\n\t\tlet forSet = {};\n\t\tlet forMap = {};\n\n\t\tif (set && set.sync) {\n\t\t\tforSet = _.pickBy(updates, (updateVal, updateKey) => {\n\t\t\t\tif (updateKey === 'lookAtLocation') {\n\t\t\t\t\treturn set.sync['location'];\n\t\t\t\t} else {\n\t\t\t\t\treturn set.sync[updateKey];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tforMap = _.omitBy(updates, (updateVal, updateKey) => {\n\t\t\t\tif (updateKey === 'lookAtLocation') {\n\t\t\t\t\treturn set.sync['location'];\n\t\t\t\t} else {\n\t\t\t\t\treturn set.sync[updateKey];\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tforMap = updates;\n\t\t}\n\n\t\tif (forSet && !_.isEmpty(forSet)) {\n\t\t\t//check data integrity\n\t\t\tforSet = deprecated_checkWorldWindNavigatorIntegrity(forSet); //TODO test\n\t\t\tdispatch(deprecated_actionUpdateSetWorldWindNavigator(set.key, forSet));\n\t\t}\n\n\t\tif (forMap && !_.isEmpty(forMap)) {\n\t\t\t//check data integrity\n\t\t\tforMap = deprecated_checkWorldWindNavigatorIntegrity(forMap); //TODO test\n\t\t\tdispatch(deprecated_actionUpdateMapWorldWindNavigator(mapKey, forMap));\n\t\t}\n\t}\n};\n\nconst deprecated_resetWorldWindNavigatorHeading = (mapKey, defaultIncrement) => {\n\treturn (dispatch, getState) => {\n\t\tconst mapNavigator = Select._deprecatedMaps.getNavigator_deprecated(getState(), mapKey);\n\n\t\tlet headingIncrement = 1.0;\n\t\tif (Math.abs(mapNavigator.heading) > 60) {\n\t\t\theadingIncrement = 2.0;\n\t\t} else if (Math.abs(mapNavigator.heading) > 120) {\n\t\t\theadingIncrement = 3.0;\n\t\t}\n\t\t//set shortest direction based on angle\n\t\tif (mapNavigator.heading > 0 && mapNavigator.heading < 180 || mapNavigator.heading < 0 && mapNavigator.heading < -180) {\n\t\t\theadingIncrement = -headingIncrement;\n\t\t}\n\t\theadingIncrement = defaultIncrement || headingIncrement;\n\n\t\tsetTimeout(() => {\n\t\t\tlet finalHeading;\n\t\t\tif (Math.abs(mapNavigator.heading) > Math.abs(headingIncrement)) {\n\t\t\t\tfinalHeading = mapNavigator.heading + headingIncrement;\n\t\t\t\tdispatch(deprecated_updateWorldWindNavigator(mapKey, {heading: finalHeading}))\n\t\t\t\tdispatch(deprecated_resetWorldWindNavigatorHeading(mapKey, headingIncrement));\n\t\t\t} else {\n\t\t\t\tfinalHeading = 0;\n\t\t\t\tdispatch(deprecated_updateWorldWindNavigator(mapKey, {heading: finalHeading}))\n\t\t\t}\n\t\t}, 20)\n\n\t}\n};\n\n\n\n\n/* ==================================================\n * ACTIONS\n * ================================================== */\n\nconst actionSetActiveMapKey = (mapKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_ACTIVE_MAP_KEY,\n\t\tmapKey\n\t}\n};\n\nconst actionSetMapSetActiveMapKey = (setKey, mapKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.SET_ACTIVE_MAP_KEY,\n\t\tmapKey,\n\t\tsetKey\n\t}\n};\n\nconst actionSetActiveSetKey = (setKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_ACTIVE_SET_KEY,\n\t\tsetKey\n\t}\n};\n\nconst actionAddSet = (set) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.ADD,\n\t\tset\n\t}\n};\n\nconst actionRemoveSet = (setKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.REMOVE,\n\t\tsetKey\n\t}\n};\n\nconst actionAddMapToSet = (setKey, mapKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.ADD_MAP,\n\t\tsetKey,\n\t\tmapKey,\n\t}\n};\n\nconst actionRemoveMapKeyFromSet = (setKey, mapKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.REMOVE_MAP,\n\t\tsetKey,\n\t\tmapKey,\n\t}\n};\n\nconst actionSetSetView = (setKey, view) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.VIEW.SET,\n\t\tsetKey,\n\t\tview\n\t}\n};\n\nconst actionUpdateSetView = (setKey, update) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.VIEW.UPDATE,\n\t\tsetKey,\n\t\tupdate\n\t}\n};\n\nconst actionSetSetSync = (setKey, sync) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.SET_SYNC,\n\t\tsetKey,\n\t\tsync,\n\t}\n};\n\nconst actionSetSetMaps = (setKey, maps) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.SET_MAPS,\n\t\tsetKey,\n\t\tmaps,\n\t}\n};\n\nconst actionAddMap = (map) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.ADD,\n\t\tmap,\n\t}\n};\n\nconst actionRemoveMap = (mapKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.REMOVE,\n\t\tmapKey,\n\t}\n};\n\nconst actionSetMapName = (mapKey, name) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.SET_NAME,\n\t\tmapKey,\n\t\tname,\n\t}\n};\n\nconst actionSetMapData = (mapKey, data) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.SET_DATA,\n\t\tmapKey,\n\t\tdata,\n\t}\n};\n\nconst actionSetMapView = (mapKey, view) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.VIEW.SET,\n\t\tmapKey,\n\t\tview\n\t}\n};\n\nconst actionUpdateMapView = (mapKey, update) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.VIEW.UPDATE,\n\t\tmapKey,\n\t\tupdate\n\t}\n};\n\n\nconst actionAddLayer = (mapKey, layer, index) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.LAYERS.LAYER.ADD,\n\t\tmapKey,\n\t\tlayer,\n\t\tindex,\n\t}\n};\n\nconst actionRemoveLayer = (mapKey, layerKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.LAYERS.LAYER.REMOVE,\n\t\tmapKey,\n\t\tlayerKey,\n\t}\n};\n\nconst actionSetLayerIndex = (mapKey, layerKey, index) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.LAYERS.LAYER.SET_INDEX,\n\t\tmapKey,\n\t\tlayerKey,\n\t\tindex,\n\t}\n};\n\nconst actionUpdateMapLayer = (mapKey, layerKey, layer) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.LAYERS.LAYER.UPDATE,\n\t\tmapKey,\n\t\tlayerKey,\n\t\tlayer,\n\t}\n};\n\nconst actionSetMapLayer = (mapKey, layerKey, layer) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.LAYERS.LAYER.SET,\n\t\tmapKey,\n\t\tlayerKey,\n\t\tlayer,\n\t}\n};\n\nconst actionSetMapLayerStyle = (mapKey, layerKey, style) => {\n    return {\n        type: ActionTypes._DEPRECATED_MAPS.MAP.LAYERS.SET.STYLE,\n        mapKey,\n        layerKey,\n        style,\n    }\n};\n\nconst actionSetMapLayerHoveredFeatureKeys = (mapKey, layerKey, hoveredFeatureKeys) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.LAYERS.SET.HOVERED_FEATURE_KEYS,\n\t\tmapKey,\n\t\tlayerKey,\n\t\thoveredFeatureKeys\n\t}\n};\n\nconst actionSetMapLayerSelection = (mapKey, layerKey, selectionKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.LAYERS.SET.SELECTION,\n\t\tmapKey,\n\t\tlayerKey,\n\t\tselectionKey\n\t}\n};\n\nconst actionClearSelectionInAllLayers = (mapKey, selectionKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.LAYERS.CLEAR.SELECTION,\n\t\tmapKey,\n\t\tselectionKey\n\t}\n};\n\nconst actionSetMapBackgroundLayer = (mapKey, backgroundLayer) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_BACKGROUND_LAYER,\n\t\tmapKey,\n\t\tbackgroundLayer,\n\t}\n};\n\nconst actionSetSetBackgroundLayer = (setKey, backgroundLayer) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.SET_BACKGROUND_LAYER,\n\t\tsetKey,\n\t\tbackgroundLayer,\n\t}\n};\n\nconst actionSetSetLayers = (setKey, layers) => {\n    return {\n        type: ActionTypes._DEPRECATED_MAPS.SET.SET_LAYERS,\n        setKey,\n        layers,\n    }\n};\n\nconst actionSetMapLayers = (mapKey, layers) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.LAYERS.SET,\n\t\tmapKey,\n\t\tlayers,\n\t}\n};\n\nconst actionSetMapCase = (mapKey, caseKey) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_CASE,\n\t\tmapKey,\n\t\tcase: caseKey,\n\t}\n};\n\nconst actionSetMapScope = (mapKey, scope) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_SCOPE,\n\t\tmapKey,\n\t\tscope,\n\t}\n};\n\nconst actionSetMapScenario = (mapKey, scenario) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_SCENARIO,\n\t\tmapKey,\n\t\tscenario,\n\t}\n};\n\nconst actionSetMapPlace = (mapKey, place) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_PLACE,\n\t\tmapKey,\n\t\tplace,\n\t}\n};\n\nconst actionSetMapPeriod = (mapKey, period) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET_PERIOD,\n\t\tmapKey,\n\t\tperiod,\n\t}\n};\n\nconst actionUpdate = (data) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.UPDATE,\n\t\tdata\n\t}\n};\n\n/* ==================================================\n * DEPRECATED ACTIONS\n * ================================================== */\n\nconst deprecated_actionSetSetWorldWindNavigator = (setKey, worldWindNavigator) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.WORLD_WIND_NAVIGATOR.SET,\n\t\tsetKey,\n\t\tworldWindNavigator,\n\t}\n};\n\nconst deprecated_actionUpdateSetWorldWindNavigator = (setKey, worldWindNavigator) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.SET.WORLD_WIND_NAVIGATOR.UPDATE,\n\t\tsetKey,\n\t\tworldWindNavigator,\n\t}\n};\n\nconst deprecated_actionSetMapWorldWindNavigator = (mapKey, worldWindNavigator) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.WORLD_WIND_NAVIGATOR.SET,\n\t\tmapKey,\n\t\tworldWindNavigator,\n\t}\n};\n\nconst deprecated_actionUpdateMapWorldWindNavigator = (mapKey, worldWindNavigator) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_MAPS.MAP.WORLD_WIND_NAVIGATOR.UPDATE,\n\t\tmapKey,\n\t\tworldWindNavigator,\n\t}\n};\n\n// ============ export ===========\n\n// TODO better naming\nexport default {\n\taddLayer,\n\taddLayers,\n\taddLayersToMaps, // TODO ???\n\taddMap,\n\taddMapForPeriod,\n\taddMapToSet,\n\taddSet,\n\n\tgoToPlace,\n\n\tremoveLayer,\n\tremoveLayers,\n\tremoveMap,\n\tremoveMapForPeriod,\n\tremoveMapKeyFromSet,\n\tremoveSet,\n\n\tresetViewHeading,\n\n\tsetActiveMapKey,\n\tsetActiveSetKey,\n\tsetLayerHoveredFeatureKeys,\n\tsetLayerSelectedFeatureKeys,\n\tsetLayerIndex,\n\n\tsetMapBackgroundLayer,\n\tsetMapCase,\n\tsetMapData,\n\tsetMapLayer,\n    setMapLayerStyle,\n\tsetMapLayers,\n\tsetMapName,\n\tsetMapPeriod,\n\tsetMapPlace,\n\tsetMapScenario,\n\tsetMapScope,\n\tsetMapView,\n\n\tsetMapSetActiveMapKey,\n\tsetSetBackgroundLayer,\n    setSetLayers,\n\tsetSetSync,\n\tsetSetView,\n\n\tsetInitial,\n\n\tupdateMapLayer,\n\tupdateStateFromView,\n\tupdateMapAndSetView,\n\tupdateSetView,\n\n\tuse,\n\tuseClear,\n\n\n\t// Deprecated\n\tdeprecated_resetWorldWindNavigatorHeading,\n\tdeprecated_setMapWorldWindNavigator,\n\tdeprecated_setSetWorldWindNavigator,\n\tdeprecated_updateWorldWindNavigator,\n\tdeprecated_use,\n\tdeprecated_useClear\n}\n","import Select from '../Select';\nimport _ from \"lodash\";\nimport common from \"../_common/actions\";\nimport ActionTypes from \"../../constants/ActionTypes\";\nimport {utils} from '@gisatcz/ptr-utils'\n\nconst add = common.add(ActionTypes._DEPRECATED_SELECTIONS);\nconst setActiveKey = common.setActiveKey(ActionTypes._DEPRECATED_SELECTIONS);\n\nfunction clearActiveSelection() {\n\treturn (dispatch, getState) => {\n\t\tlet activeKey = Select._deprecatedSelections.getActiveKey(getState());\n\n\t\tif (activeKey) {\n\t\t\tdispatch(setActiveKey(null));\n\t\t\tdispatch(actionRemove([activeKey]));\n\t\t}\n\t};\n}\n\nfunction updateActiveSelection(name, values, areas) {\n\treturn (dispatch, getState) => {\n\t\tlet active = Select._deprecatedSelections.getActive(getState());\n\t\tlet data = {name, values, areas};\n\n\t\tif (active) {\n\t\t\tlet updated = {...active, data: {...active.data, ...data}};\n\t\t\tdispatch(add(updated));\n\t\t} else {\n\t\t\tdispatch(create(data));\n\t\t}\n\t};\n}\n\nfunction create(data){\n\treturn (dispatch) => {\n\t\tlet selection = {\n\t\t\tkey: utils.uuid(),\n\t\t\tdata\n\t\t};\n\n\t\tdispatch(add([selection]));\n\t\tdispatch(setActiveKey(selection.key));\n\t}\n}\n\nfunction updateStateFromView(data) {\n\treturn dispatch => {\n\t\tif (data) {\n\t\t\tdispatch(actionUpdate(data));\n\t\t}\n\t};\n}\n\n// ============ actions ===========\nfunction actionRemove(keys){\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_SELECTIONS.REMOVE,\n\t\tkeys\n\t}\n}\n\nconst actionUpdate = (data) => {\n\treturn {\n\t\ttype: ActionTypes._DEPRECATED_SELECTIONS.UPDATE_FROM_VIEW,\n\t\tdata\n\t}\n};\n\nexport default {\n\tclearActiveSelection,\n\tupdateActiveSelection,\n\tupdateStateFromView\n}","import ActionTypes from '../../constants/ActionTypes';\nimport request from \"../_common/request\";\nimport selectors from './selectors';\nimport commonActions from '../_common/actions';\nimport Select from \"../Select\";\n\n// ============ creators ===========\n\nconst loadConfiguration = () => {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst apiPath = 'backend/rest/applications/filtered/configurations';\n\t\tlet applicationKey = selectors.getKey(getState());\n\t\tconst payload = {\n\t\t\tfilter: {\n\t\t\t\tapplicationKey\n\t\t\t}\n\t\t};\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors && result.errors.configurations || result.data && !result.data.configurations) {\n\t\t\t\t\tdispatch(commonActions.actionGeneralError(result.errors.configurations || new Error('no data')));\n\t\t\t\t} else if (result.data.configurations.length && result.data.configurations[0].data && result.data.configurations[0].data.data) {\n\t\t\t\t\tdispatch(actionReceiveConfiguration(result.data.configurations[0].data.data));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(commonActions.actionGeneralError(new Error('empty configuration')));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(commonActions.actionGeneralError(error));\n\t\t\t});\n\t};\n};\n\n// ============ actions ===========\nconst actionSetKey = (key) => {\n\treturn {\n\t\ttype: ActionTypes.APP.SET_KEY,\n\t\tkey\n\t}\n};\nconst actionSetBaseUrl = (url) => {\n\treturn {\n\t\ttype: ActionTypes.APP.SET_BASE_URL,\n\t\turl\n\t}\n};\nconst actionSetLocalConfiguration = (path, value) => {\n\treturn {\n\t\ttype: ActionTypes.APP.SET_LOCAL_CONFIGURATION,\n\t\tpath,\n\t\tvalue\n\t}\n};\nconst actionUpdateLocalConfiguration = (update) => {\n\treturn {\n\t\ttype: ActionTypes.APP.UPDATE_LOCAL_CONFIGURATION,\n\t\tupdate\n\t}\n};\nconst actionReceiveConfiguration = (configuration) => {\n\treturn {\n\t\ttype: ActionTypes.APP.RECEIVE_CONFIGURATION,\n\t\tconfiguration\n\t}\n};\n\n// ============ export ===========\n\nexport default {\n\tadd: actionReceiveConfiguration,\n\tsetKey: actionSetKey,\n\tupdateLocalConfiguration: actionUpdateLocalConfiguration,\n\tsetBaseUrl: actionSetBaseUrl,\n\tsetLocalConfiguration: actionSetLocalConfiguration,\n\tloadConfiguration\n}\n","import ActionTypes from '../../constants/ActionTypes';\n\nimport common from \"../_common/actions\";\n\n\n// ============ creators ===========\n\nconst setActiveKeys = common.setActiveKeys(ActionTypes.ATTRIBUTE_SETS);\n\n// ============ export ===========\n\nexport default {\n\tsetActiveKeys\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/actions';\nimport Select from \"../Select\";\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.CASES);\nconst create = common.create(Select.cases.getSubstate, 'cases', ActionTypes.CASES);\nconst deleteItem = common.delete(Select.cases.getSubstate, 'cases', ActionTypes.CASES);\nconst saveEdited = common.saveEdited(Select.cases.getSubstate, 'cases', ActionTypes.CASES);\nconst updateEdited = common.updateEdited(Select.cases.getSubstate, ActionTypes.CASES);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.CASES);\nconst useKeys = common.useKeys(Select.cases.getSubstate, 'cases', ActionTypes.CASES);\nconst useKeysClear = common.useKeysClear(ActionTypes.CASES);\nconst useIndexed = common.useIndexed(Select.cases.getSubstate, 'cases', ActionTypes.CASES);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.CASES);\nconst refreshUses = common.refreshUses(Select.cases.getSubstate, `cases`, ActionTypes.CASES);\nconst setActiveKeyAndEnsureDependencies = common.setActiveKeyAndEnsureDependencies(ActionTypes.CASES, 'case');\nconst setActiveKeysAndEnsureDependencies = common.setActiveKeysAndEnsureDependencies(ActionTypes.CASES, 'case');\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.cases.getSubstate, 'cases', ActionTypes.CASES);\n\nfunction setActiveKey(key) {\n\treturn dispatch => {\n\t\tdispatch(setActiveKeyAndEnsureDependencies(key));\n\t};\n}\n\nfunction setActiveKeys(keys) {\n\treturn dispatch => {\n\t\tdispatch(setActiveKeysAndEnsureDependencies(keys));\n\t};\n}\n\n// ============ actions ===========\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\n\trefreshUses,\n\n\tsaveEdited,\n\tsetActiveKey,\n\tsetActiveKeys,\n\n\tupdateEdited,\n\tupdateStateFromView,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear\n}\n","import Select from '../../state/Select';\nimport AttributeRelationsAction from \"../AttributeRelations/actions\";\nimport commonActions from \"../_common/actions\";\nimport ActionTypes from \"../../constants/ActionTypes\";\n\nconst setInitial = commonActions.setInitial(ActionTypes.CHARTS);\n\nconst use = (chartKey, useActiveMetadataKeys) => {\n\treturn (dispatch, getState) => {\n\t\tlet chart = Select.charts.getChartConfiguration(getState(), chartKey, useActiveMetadataKeys);\n\t\tlet componentId = 'chart-' + chartKey;\n\n\t\tif (chart) {\n\t\t\tdispatch(AttributeRelationsAction.useIndexedRegister( componentId, chart.filterByActive, chart.mergedFilter, null, 1, 1000));\n\t\t\tdispatch(AttributeRelationsAction.ensureIndexedSpecific(chart.mergedFilter, null, 1, 1000, componentId));\n\t\t}\n\t}\n};\n\nconst useClear = (chartKey) => {\n\treturn (dispatch) => {\n\t\tdispatch(commonActions.useIndexedClear(ActionTypes.ATTRIBUTE_RELATIONS)(`chart_${chartKey}`));\n\t};\n};\n\nconst updateStateFromView = (data) => {\n\treturn dispatch => {\n\t\tif (data) {\n\t\t\tdispatch(actionUpdate(data));\n\t\t}\n\t};\n};\n\n// ============ actions ===========\n\nconst actionUpdate = (data) => {\n\treturn {\n\t\ttype: ActionTypes.CHARTS.UPDATE,\n\t\tdata\n\t}\n};\n\nexport default {\n\tupdateStateFromView,\n\tuse,\n\tuseClear,\n\tsetInitial\n}","import ActionTypes from '../../constants/ActionTypes';\nimport _ from 'lodash';\n\n\n// ============ creators ===========\nfunction update(component, data) {\n\treturn dispatch => {\n\t\tdispatch(actionUpdate(component, data));\n\t};\n}\n\nfunction updateStateFromView(components) {\n\treturn dispatch => {\n\t\tif (components) {\n\t\t\t// TODO update all store at once\n\t\t\t_.forIn(components, (data, component) => {\n\t\t\t\tdispatch(actionUpdate(component, data));\n\t\t\t});\n\t\t}\n\t};\n}\n\n// ============ actions ===========\nfunction actionUpdate(component, data) {\n\treturn {\n\t\ttype: ActionTypes.COMPONENTS.UPDATE,\n\t\tcomponent: component,\n\t\tupdate: data\n\t}\n}\nfunction actionSet(component, path, value) {\n\treturn {\n\t\ttype: ActionTypes.COMPONENTS.SET,\n\t\tcomponent,\n\t\tpath,\n\t\tvalue\n\t}\n}\n\n\n// ============ export ===========\n\nexport default {\n\tupdate,\n\tupdateStateFromView,\n\tset: actionSet\n}\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common from '../../_common/actions';\n\nconst actionTypes = ActionTypes.DATA.ATTRIBUTE_RELATIONS;\n\nconst add = common.add(actionTypes);\nconst addIndex = common.addIndex(actionTypes);\n// ============ creators ===========\n/**\n * It ensure adding index and adding or updating received data from BE.\n * Add relations to state only when attributeRelations received, in case of empty attributeRelations it adds only index.\n * @param {Array} attributeRelations Array received from BE contains attributeRelations.\n * @param {Object} filter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @param {Array?} order\n * @param {Number} start\n * @param {Number} total\n * @param {string?} changedOn \n */\nfunction receiveIndexed(attributeRelations, filter, order, start, total, changedOn) {\n    return dispatch => {\n        // add attributeRelations to store\n        if (attributeRelations.length) {\n            dispatch(add(attributeRelations, filter));\n        }\n\n        // add to index\n        dispatch(addIndex(filter, order, total, start, attributeRelations, changedOn));\n    }\n}\n\n\n// ============ actions ============\n// ============ export ===========\n\nexport default {\n    receiveIndexed,\n}\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common from '../../_common/actions';\n\nconst actionTypes = ActionTypes.DATA.ATTRIBUTE_DATA_SOURCES;\n\nconst addIndex = common.addIndex(actionTypes);\nconst add = common.add(actionTypes);\n\n// ============ creators ===========\n/**\n * It ensure adding index and adding or updating received data from BE.\n * Add dataSources to state only when attributeDataSources received, in case of empty attributeDataSources it adds only index.\n * @param {Array} attributeDataSources Array received from BE contains attributeDataSource definitions.\n * @param {Object} filter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @param {Array?} order\n * @param {Number} start\n * @param {Number} total\n * @param {string?} changedOn \n */\nfunction receiveIndexed(attributeDataSources, filter, order, start, total, changedOn) {\n    return dispatch => {\n        // add attributeDataSources to store\n        if (attributeDataSources.length) {\n            dispatch(add(attributeDataSources, filter));\n        }\n\n        // add to index\n        dispatch(addIndex(filter, order, total, start, attributeDataSources, changedOn));\n    }\n}\n\n// ============ actions ============\n\n// ============ export ===========\n\nexport default {\n\tadd,\n    receiveIndexed,\n}\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common from '../../_common/actions';\nimport {tileAsString} from '../helpers';\nimport _ from 'lodash';\n\nconst actionTypes = ActionTypes.DATA.ATTRIBUTE_DATA;\n\n// ============ creators ===========\n/**\n * It ensure adding index and adding or updating received data from BE.\n * Add data to state only when attributeData received, in case of empty attributeData it adds only index.\n * @param {Object} attributeData Object received from BE contains under attributeDataKey object of data attributes [id]: [value]. \n * @param {Object} spatialData Object received from BE contains under spatialDataKey object of data attributes [id]: {data, spatialIndex}. \n * @param {Object} filter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @param {Array?} order\n * @param {string?} changedOn \n */\nconst receiveIndexed = (attributeData, spatialData, filter, order, changedOn) => {\n    return dispatch => {\n\t\tif (!_.isEmpty(attributeData)) {\n\t\t\tdispatch(addDataAndIndex(filter, order, attributeData, spatialData, changedOn));\n\t\t} else {\n\t\t\t// add to index\n\t\t\tdispatch(createAndAddIndex(filter, order, attributeData, spatialData, changedOn));\n\t\t}\n    }\n}\n\n/**\n * Add data and index at the same time\n *\n * @param spatialFilter {Object}\n * @param {Object} attributeData Object received from BE contains under attributeDataKey object of data attributes [id]: [value].\n * @param {Object} spatialData Object received from BE contains under spatialDataKey object of data attributes [id]: {data, spatialIndex}\n * @param order {Array}\n * @param changedOn {string}\n */\nfunction addDataAndIndex(spatialFilter, order, attributeData, spatialData, changedOn) {\n\treturn (dispatch) => {\n\t\tconst indexData = getIndexData(spatialData, attributeData)\n\n\t\tfor(const attributeDataSourceKey of Object.keys(attributeData)) {\n\t\t\tdispatch(addDataAndIndexAction(attributeDataSourceKey, attributeData[attributeDataSourceKey], spatialFilter, order, [indexData], changedOn));\n\t\t}\n\t}\n}\n\n/**\n * If given attributeDataKey is already in state update its data otherwise add data to state.\n * @param {Object} attributeData Object received from BE contains under attributeDataKey object of data attributes [id]: [value].\n */\nfunction addOrUpdateData(attributeData) {\n    return (dispatch, getState) => {\n        const state = getState();\n        for(const key of Object.keys(attributeData)) {\n            if(_.isEmpty(state.data.attributeData.byDataSourceKey[key])) {\n                dispatch(addDataAction(key, attributeData[key]));\n            } else {\n                dispatch(updateDataAction(key, attributeData[key]));\n            }\n        }\n    }\n}\n\n/**\n * Create and add index for given attribute data based on related spatial data index.\n * @param {Object} filter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @param {Array?} order\n * @param {Object} attributeData Object received from BE contains under attributeDataKey object of data attributes [id]: [value].\n * @param {Object} spatialData Object received from BE contains under spatialDataKey object of data attributes [id]: {data, spatialIndex}. SpatialData indexes are used as a templete for attribute data indexes.\n * @param {*} changedOn \n */\nfunction createAndAddIndex(filter, order, attributeData, spatialData, changedOn) {\n\tconst indexByLevelByTileByDataSourceKey = getIndexData(spatialData, attributeData);\n\treturn addIndexAction(filter, order, [indexByLevelByTileByDataSourceKey], changedOn);\n}\n\n/**\n * Create new index based on given level and tiles with loading indicator.\n * @param {Object} filter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @param {Array?} order\n * @param {Number} level \n * @param {Array.[Array]} tiles\n */\nfunction addLoadingIndex(filter, order, level, tiles) {\n    const changedOn = null;\n    \n    //create index with tiles value \"true\" that indicates loading state\n    const loadingTiles = _.reduce(tiles, (acc, tile) => {\n        const tileId = tileAsString(tile);\n        acc[tileId] = true; \n        return acc\n    }, {})\n    const index = {\n        [level]: loadingTiles\n    };\n\n\treturn addIndexAction(filter, order, [index], changedOn);\n}\n\n// ============ helpers ============\n\n/**\n * Get data for indexing\n * @param {Object} spatialData\n * @param {Object} attributeData\n * @return {Object}\n */\nfunction getIndexData(spatialData, attributeData) {\n\tconst indexByLevelByTileByDataSourceKey = {};\n\n\t//Attribute data indexes are stored in related spatial index\n\t//for all spatial data keys in spatialData\n\tfor (const [spatialDataSourceKey, datasource] of Object.entries(spatialData)) {\n\t\t//for all levels in spatial data source\n\t\tfor (const [level, tiles] of Object.entries(datasource.spatialIndex)) {\n\t\t\tif(!indexByLevelByTileByDataSourceKey[level]) {\n\t\t\t\tindexByLevelByTileByDataSourceKey[level] = {};\n\t\t\t}\n\t\t\t//for all tiles in tiles\n\t\t\tfor (const [tile, tileData] of Object.entries(tiles)) {\n\t\t\t\t// If empty attributeData, then rewrite \"loading\" state.\n\t\t\t\t// or\n\t\t\t\t// Prepare empty tile for new data if tile does not exists.\n\t\t\t\tif(!indexByLevelByTileByDataSourceKey[level][tile] || _.isEmpty(attributeData)){\n\t\t\t\t\tindexByLevelByTileByDataSourceKey[level][tile] = {};\n\t\t\t\t}\n\n\t\t\t\tif(!_.isEmpty(attributeData)) {\n\t\t\t\t\t//for all attribute data source keys in attributeData\n\t\t\t\t\tfor (const [attributeDataSourceKey, attributeDataSource] of Object.entries(attributeData)) {\n\t\t\t\t\t\t// Save only tileData that are incuded in attribute data keys\n\n\t\t\t\t\t\tconst indexes = tileData.filter((e => Object.keys(attributeDataSource).includes(e.toString())));\n\n\t\t\t\t\t\t//Add to existing index\n\t\t\t\t\t\tif(indexByLevelByTileByDataSourceKey?.[level]?.[tile]?.[attributeDataSourceKey]) {\n\t\t\t\t\t\t\tindexByLevelByTileByDataSourceKey[level][tile][attributeDataSourceKey] = [\n\t\t\t\t\t\t\t\t...indexByLevelByTileByDataSourceKey[level][tile][attributeDataSourceKey],\n\t\t\t\t\t\t\t\t...indexes\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t//Create new tile and insert dsKey index data\n\t\t\t\t\t\t\tindexByLevelByTileByDataSourceKey[level][tile][attributeDataSourceKey] = indexes;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn indexByLevelByTileByDataSourceKey;\n}\n\n// ============ actions ============\nfunction addDataAction(key, data) {\n    return {\n        type: actionTypes.ADD,\n        key,\n        data,\n    }\n}\n\nfunction removeIndexAction (filter, order) {\n\treturn {\n        type: actionTypes.INDEX.REMOVE,\n        filter,\n        order,\n    }\n}\n\nfunction updateDataAction(key, data) {\n    return {\n        type: actionTypes.UPDATE,\n        key,\n        data,\n    }\n}\n\nfunction addDataAndIndexAction(attributeDataSourceKey, data, spatialFilter, order, indexData, changedOn) {\n\treturn {\n\t\ttype: actionTypes.ADD_WITH_INDEX,\n\t\tattributeDataSourceKey,\n\t\tdata,\n\t\tspatialFilter,\n\t\torder,\n\t\tindexData,\n\t\tchangedOn\n\t}\n}\n\nfunction addIndexAction(filter, order, index, changedOn) {\n\treturn {\n\t\ttype: actionTypes.INDEX.ADD,\n\t\tspatialFilter: filter,\n\t\torder,\n\t\tindexData: index,\n\t\tchangedOn\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\taddLoadingIndex,\n\tremoveIndex: removeIndexAction,\n    receiveIndexed,\n}\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common from '../../_common/actions';\n\nconst actionTypes = ActionTypes.DATA.SPATIAL_RELATIONS;\n\nconst addIndex = common.addIndex(actionTypes);\nconst add = common.add(actionTypes);\n\n// ============ creators ===========\n/**\n * It ensure adding index and adding received spatialRelations from BE.\n * Add relations to state only when spatialRelations received, in case of empty spatialRelations it adds only index.\n * @param {Object} spatialRelations Object received from BE. \n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Array?} order\n * @param {Number} start\n * @param {Number} total\n * @param {string?} changedOn \n */\nfunction receiveIndexed(spatialRelations, filter, order, start, total, changes) {\n    return dispatch => {\n        // add spatialRelations to store\n        // There should be check if relation is already in the store.\n        if (spatialRelations.length) {\n            dispatch(add(spatialRelations, filter));\n        }\n\n        // add to index\n        dispatch(addIndex(filter, order, total, start, spatialRelations, changes));\n    }\n}\n\n\n// ============ actions ============\n// ============ export ===========\n\nexport default {\n    receiveIndexed,\n}\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common from '../../_common/actions';\n\nconst actionTypes = ActionTypes.DATA.SPATIAL_DATA_SOURCES;\n\nconst addIndex = common.addIndex(actionTypes);\nconst add = common.add(actionTypes);\n\n// ============ creators ===========\n/**\n * It ensure adding index and adding received spatialDataSources from BE.\n * Add dataSources to state only when spatialDataSources received, in case of empty spatialDataSources it adds only index.\n * @param {Object} spatialDataSources Object received from BE. \n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Array?} order\n * @param {Number} start\n * @param {Number} total\n * @param {string?} changedOn \n */\nfunction receiveIndexed(spatialDataSources, filter, order, start, total, changedOn) {\n    return dispatch => {\n        // add spatialDataSources to store\n        // There should be check if spatialDataSources is already in the store.\n        if (spatialDataSources.length) {\n            dispatch(add(spatialDataSources, filter));\n        }\n\n        // add to index\n        dispatch(addIndex(filter, order, total, start, spatialDataSources, changedOn));\n    }\n}\n\n// ============ actions ============\n\n// ============ export ===========\n\nexport default {\n\tadd,\n    receiveIndexed,\n}\n","import ActionTypes from '../../../constants/ActionTypes';\nimport _ from \"lodash\";\nimport common from '../../_common/actions';\nimport {tileAsString} from '../helpers';\n\nconst actionTypes = ActionTypes.DATA.SPATIAL_DATA;\n\n// ============ creators ===========\n/**\n * It ensure adding index and adding received data from BE.\n * Add data to state only when spatialData received, in case of empty spatialData it adds only index.\n * @param {Object} spatialData Object received from BE contains under spatialDataKey object of data attributes [id]: {data, spatialIndex}. \n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Array?} order\n * @param {string?} changedOn \n */\nconst receiveIndexed = (spatialData, filter, order, changedOn) => {\n    return dispatch => {\n\t\t// NEW WAY\n\t\tif (spatialData) {\n\t\t\treturn dispatch(addDataAndIndex(spatialData, filter, order, changedOn));\n\t\t} else {\n\t\t\t// add to index\n\t\t\treturn dispatch(createAndAddIndex(filter, order, spatialData, changedOn));\n\t\t}\n    }\n}\n\n/**\n * Add data and index at the same time\n * Add data, even if data are empty, for replacing loading indicator.\n * @param spatialDataAndIndexByDataSourceKey {Object} [dataSourceKey]: {data: Object, spatialIndex: Object}\n * @param spatialFilter {Object}\n * @param order {Array}\n * @param changedOn {string}\n */\nfunction addDataAndIndex(spatialDataAndIndexByDataSourceKey, spatialFilter, order, changedOn) {\n\treturn (dispatch) => {\n\t\tconst indexByLevelByTileByDataSourceKey = getIndexData(spatialDataAndIndexByDataSourceKey);\n\n\t\t// spatialData should be only from one level\n\t\tconst level = Object.keys(indexByLevelByTileByDataSourceKey)[0];\n\n\t\tlet spatialDataByDataSourceKey = {};\n\t\t_.forIn(spatialDataAndIndexByDataSourceKey, (value, spatialDataSourceKey) => {\n\t\t\tspatialDataByDataSourceKey[spatialDataSourceKey] = value.data;\n\t\t});\n\n\n\t\tdispatch(addDataAndIndexAction(spatialDataByDataSourceKey, level, spatialFilter, order, [indexByLevelByTileByDataSourceKey], changedOn));\n\n\n\t\t// for(const dataSourceKey of Object.keys(spatialDataByDataSourceKey)) {\n\t\t// \t//spatialData should be only from one level\n\t\t// \tconst levels = Object.keys(spatialDataByDataSourceKey[dataSourceKey].spatialIndex);\n\t\t// \tfor (const level of levels) {\n\t\t// \t\t// It dispatch addDataWithIndex for each datasource and level in response with same indexByLevelByTileByDataSourceKey.\n\t\t// \t\t// Multiple datasources in one response is edge case at the moment.\n\t\t// \t\tdispatch(addDataAndIndexAction(dataSourceKey, spatialDataByDataSourceKey[dataSourceKey].data, level, spatialFilter, order, [indexByLevelByTileByDataSourceKey], changedOn));\n\t\t// \t}\n\t\t// }\n\t}\n}\n\n/**\n * Create and add spatial index based on spatialDataSourceKey, level and tiles.\n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Array?} order\n * @param {Object} spatialData Object received from BE contains under spatialDataKey object of data attributes [id]: {data, spatialIndex}. \n * @param {string?} changedOn \n */\nfunction createAndAddIndex(filter, order, spatialData, changedOn) {\n\tconst indexByLevelByTileByDataSourceKey = getIndexData(spatialData);\n    return addIndexAction(filter, order, [indexByLevelByTileByDataSourceKey], changedOn);\n}\n\n/**\n * Dispatch addDataAction for each given spatialDataKey and its level.\n * @param {Object} spatialData Object received from BE contains under spatialDataKey object of data attributes [id]: {data, spatialIndex}.  \n */\nfunction addData(spatialData) {\n    return (dispatch, getState) => {\n        for(const key of Object.keys(spatialData)) {\n            if(!_.isEmpty(spatialData[key].data)) {\n                //spatialData should be only from one level\n                const levels = Object.keys(spatialData[key].spatialIndex);\n                for (const level of levels) {\n                    dispatch(addDataAction(key, spatialData[key].data, level));\n                }\n            }\n        }\n    }\n}\n\n/**\n * Create new index based on given level and tiles with loading indicator.\n * @param {Object} filter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Array?} order\n * @param {Number} level \n * @param {Array.[Array]} tiles\n */\nfunction addLoadingIndex(filter, order, level, tiles) {\n    const changedOn = null;\n    \n    //create index with tiles value \"true\" that indicates loading state\n    const loadingTiles = _.reduce(tiles, (acc, tile) => {\n        const tileId = tileAsString(tile);\n        acc[tileId] = true; \n        return acc\n    }, {})\n    const index = {\n        [level]: loadingTiles\n    };\n    return addIndexAction(filter, order, [index], changedOn);\n}\n\n// ============ helpers ============\n\n/**\n * Get data for indexing\n * @param spatialDataByDataSourceKey {Object} [dataSourceKey]: {data: Object, spatialIndex: Object}\n * @return {Object}\n */\nfunction getIndexData(spatialDataByDataSourceKey) {\n\tconst indexByLevelByTileByDataSourceKey = {};\n\tfor (const [dsKey, datasource] of Object.entries(spatialDataByDataSourceKey)) {\n\t\tfor (const [level, tiles] of Object.entries(datasource.spatialIndex)) {\n\t\t\tif(!indexByLevelByTileByDataSourceKey[level]) {\n\t\t\t\tindexByLevelByTileByDataSourceKey[level] = {};\n\t\t\t}\n\t\t\tfor (const [tile, tileData] of Object.entries(tiles)) {\n\t\t\t\t//Add to existing index\n\t\t\t\tif(indexByLevelByTileByDataSourceKey?.[level]?.[tile]) {\n\t\t\t\t\tindexByLevelByTileByDataSourceKey[level][tile] = {\n\t\t\t\t\t\t...indexByLevelByTileByDataSourceKey[level][tile],\n\t\t\t\t\t\t[dsKey]: tileData,\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t//Create new tile and insert dsKey index data\n\t\t\t\t\tindexByLevelByTileByDataSourceKey[level][tile] = {\n\t\t\t\t\t\t[dsKey]: tileData\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn indexByLevelByTileByDataSourceKey;\n}\n\n\n\n// ============ actions ============\nfunction removeIndexAction (filter, order) {\n\treturn {\n        type: actionTypes.INDEX.REMOVE,\n        filter,\n        order,\n    }\n}\n\nfunction addDataAction(key, data, level) {\n    return {\n        type: actionTypes.ADD,\n        key,\n        data,\n        level,\n    }\n}\n\nfunction addDataAndIndexAction(dataByDataSourceKey, level, spatialFilter, order, indexData, changedOn) {\n\treturn {\n\t\ttype: actionTypes.ADD_WITH_INDEX,\n\t\tdataByDataSourceKey, level, spatialFilter, order, indexData, changedOn\n\t}\n}\n\nfunction addIndexAction(filter, order, index, changedOn) {\n\treturn {\n\t\ttype: actionTypes.INDEX.ADD,\n\t\tspatialFilter: filter,\n\t\torder,\n\t\tindexData: index,\n\t\tchangedOn\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\taddLoadingIndex,\n\tremoveIndex: removeIndexAction,\n    receiveIndexed,\n}\n","// Layer data types that supports vector tiling.\n// Tiled vectors has spatial and attributes indexes with loading indication.\n// TODO 'vector' is only temporary, remove it once it is modified on BE\nexport const TILED_VECTOR_LAYER_TYPES = ['vector', 'tiled-vector'];\n","import {configDefaults} from \"@gisatcz/ptr-core\";\nimport attributeRelations from './AttributeRelations/actions';\nimport attributeDataSources from './AttributeDataSources/actions';\nimport attributeData from './AttributeData/actions';\nimport spatialRelations from './SpatialRelations/actions';\nimport spatialDataSources from './SpatialDataSources/actions';\nimport spatialData from './SpatialData/actions';\nimport request from '../_common/request';\nimport commonActions from '../_common/actions';\n\nimport Select from \"../Select\";\nimport {getMissingTiles, tileAsArray} from './helpers';\nimport {TILED_VECTOR_LAYER_TYPES} from './constants';\n\nconst DEFAULT_RELATIONS_PAGE = {\n    offset: 0,\n    limit: 100,\n}\n\n/**\n * Central method for getting PAGE_SIZE from state or configDefaults.\n * @param {Object} state App state\n * @return {Number}\n */\nconst getPageSize = (state) => {\n    const localConfig = Select.app.getCompleteLocalConfiguration(state);\n    const PAGE_SIZE = localConfig.requestPageSize || configDefaults.requestPageSize;\n    return PAGE_SIZE;\n}\n\nconst getRestRelationsPages = (attributeRelationsCount, spatialRelationsCount, PAGE_SIZE) => {\n    // What is higer to load? attributeRelations or spatialRelations\n    const maxCountValue = Math.max(attributeRelationsCount, spatialRelationsCount);\n    if(maxCountValue === 0) {\n        return 0;\n    } else {\n        const remainingPageCount = Math.ceil((maxCountValue - PAGE_SIZE) / PAGE_SIZE);\n        return remainingPageCount;\n    }\n}\n\n/**\n * Helper function. Usually second step in requesting data.\n * Calculate if relations requests are missing based on attributeRelationsCount and spatialRelationsCount.\n * Each relations request loads one next tile from spatialFilter.\n * Rest tiles are loaded without relatiions.\n * @param {bool} loadGeometry Whether response should contain geometry\n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n * @param {string?} styleKey UUID\n * @param {Array?} order\n * @param {Object} mergedSpatialFilter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Object} mergedAttributeFilter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @param {Number} attributeRelationsCount Count of known attribute relations. Used for determinate further requests.\n * @param {Number} spatialRelationsCount Count of known spatial relations. Used for determinate further requests.\n * @param {Array} preloadedSpatialDataSources SpatialDataSources loaded by previous request.\n * @return {function} Return promise. \n */\nfunction loadMissingRelationsAndData(loadGeometry, spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter, attributeRelationsCount, spatialRelationsCount, preloadedSpatialDataSources = []) {\n    return (dispatch, getState) => {\n        const PAGE_SIZE = getPageSize(getState());\n\n        // FIXME - add attributeFilter support\n        // attributeFilter is null at the moment\n        const attributeFilter = null;\n        const dataSourceKeys = null;\n        const featureKeys = null;\n        const promises = [];\n\n        // load remaining relations pages\n        const remainingRelationsPageCount = getRestRelationsPages(attributeRelationsCount, spatialRelationsCount, PAGE_SIZE);\n        let tilesPagination = 0;\n        const loadRelations = true;\n        for (let i = 1; i <= remainingRelationsPageCount; i++) {\n            const relations = {\n                offset: (i) * PAGE_SIZE,\n                limit: PAGE_SIZE\n            };\n\n            tilesPagination = i;\n            const spatialIndex = {\n                tiles: [spatialFilter.tiles[tilesPagination]],\n            };\n            promises.push(dispatch(loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilter, attributeFilter, loadGeometry, loadRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter)))\n        }\n        \n        // \n        //load rest of tiles\n        // \n        const remainingTilesPageCount = spatialFilter.tiles.length;\n        \n        //first tile was loaded before loadMissingRelationsAndData first request\n        for (let i = (tilesPagination + 1); i < remainingTilesPageCount; i++) {\n            const spatialIndex = {\n                tiles: [spatialFilter.tiles[i]],\n            };\n\n            const relations = {};\n            const loadRestTilesRelations = false;\n            promises.push(dispatch(loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilter, attributeFilter, loadGeometry, loadRestTilesRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter)))\n        }\n\n        return Promise.all(promises).then((response = []) => {\n            // All relations are loaded at this moment. \n            // Check if all spatialDataSources relations from response and preloadedSpatialDataSources are type of \"unsupported\" like raster/wms/wmts.\n            // If all spatialDataSources are unsupported, then received data are empty and indexes needs to be removed.\n            // If only some of spatialDataSources relations are unsupported, then loading status on index will be replaced by data.\n            const spatialDataSourcesTypes = _.flattenDeep(response.map(r => r?.data?.spatialDataSources?.map(sds => ({type: sds.data.type, key: sds.key}))));\n            const spatialDataSourcesPairs = [...spatialDataSourcesTypes, ...preloadedSpatialDataSources];\n            const allSourcesAreUnsupported = spatialDataSourcesPairs.every(ds => !TILED_VECTOR_LAYER_TYPES.includes(ds.type));\n                \n            // Check if all of returned spatialDataSources are unsupported type.\n            // Indexes for unsupported layers can be cleared.\n            if(allSourcesAreUnsupported) {\n                // AttributeData and spatialData index represented by mergedSpatialFilter, mergedAttributeFilter and order can be deleted\n                dispatch(spatialData.removeIndex(mergedSpatialFilter, order))\n                dispatch(attributeData.removeIndex(mergedAttributeFilter, order))\n                }\n        });\n    }\n}\n\n/**\n * Ensure load missing attribute data for tiles defined in spatialFilter that are not loaded or loading in state.\n * \n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n * @param {string?} styleKey UUID\n * @param {Array?} order\n * @param {Object} mergedSpatialFilter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Object} mergedAttributeFilter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @return {function}\n */\nfunction loadMissingAttributeData(spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter) {\n    return (dispatch, getState) => {\n        const PAGE_SIZE = getPageSize(getState());\n\n        const relations = {\n            // start: 0,\n            // length: 1000,\n            offset: 0,\n            limit: PAGE_SIZE,\n        };\n\n        //\n        // which attribute data to load\n        //\n\n        //get attribute data index with loaded and loading data\n        const attributeDataIndex = Select.data.attributeData.getIndex(getState(), \"spatialIndexes\",  mergedAttributeFilter, order) || [];\n        \n        //diff loaded attribute data from index with wanted spatial data\n        const missingAttributeDataTiles = getMissingTiles(attributeDataIndex, spatialFilter) || [];\n        const missingAttributeDataTilesAsArrays = missingAttributeDataTiles.map(tileAsArray);\n\n        // Load relations and data sources in first request if they are not already loaded.\n        const attributeRelations = Select.data.attributeRelations.getIndex(getState(),  mergedAttributeFilter, order);\n        const attributeDataSources = Select.data.attributeDataSources.getIndex(getState(),  mergedAttributeFilter, order);\n        let loadRelationsAndDS = !(!_.isEmpty(attributeRelations) && !_.isEmpty(attributeDataSources));\n\n        //load only attribute data\n        const loadGeometry = false;\n        \n        //FIXME - add support for attributeFilter\n        const attributeFilter = null;\n\n        const dataSourceKeys = null;\n        const featureKeys = null;\n\n        // Modified spatial filter with only missing attribute data tiles\n        const spatialFilterWithMissingTiles = {\n            ...spatialFilter,\n            tiles: missingAttributeDataTilesAsArrays,\n        }\n        // Relations for given filters are missing\n        if(loadRelationsAndDS) {\n            const spatialIndex = null;\n            const loadRelations = true;\n            // Load relations \n            return dispatch(loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilterWithMissingTiles, attributeFilter, loadGeometry, loadRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter)).then((response) => {\n                if(response instanceof Error) {\n                    return;\n                    throw response;\n                }\n\n                const spatialDataSources = response?.data?.spatialDataSources || [];\n                const preloadSpatialDataSources = spatialDataSources.map(sds => ({type: sds.data.type, key: sds.key}));\n\n                const attributeRelationsCount = response.total.attributeRelations;\n                const spatialRelationsCount = response.total.spatialRelations;\n                return dispatch(loadMissingRelationsAndData(loadGeometry, spatialFilterWithMissingTiles, styleKey, order, mergedSpatialFilter, mergedAttributeFilter, attributeRelationsCount, spatialRelationsCount, preloadSpatialDataSources));\n            })\n        } else {\n            const promises = [];\n            const loadRelations = false;\n            for (const tile of missingAttributeDataTiles) {\n                const spatialIndex = {\n                    tiles: [tile],\n                }\n\n                promises.push(dispatch(loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilter, attributeFilter, loadGeometry, loadRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter))) \n            }\n            return Promise.all(promises);\n        }\n    }\n}\n\n/**\n * Ensure load missing spatial data for tiles defined in spatialFilter that are not loaded or loading in state.\n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n * @param {string?} styleKey UUID\n * @param {Array?} order\n * @param {Object} mergedSpatialFilter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Object} mergedAttributeFilter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @return {function}\n */\nfunction loadMissingSpatialData(spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter) {\n    return (dispatch, getState) => {\n\n        //\n        //which spatial data to load\n        //\n\n        //get spatial data index with loaded and loading data\n        const spatialDataIndex = Select.data.spatialData.getIndex(getState(),  mergedSpatialFilter, order) || [];\n        \n        //diff spatial data loaded/loading and to load\n        const missingSpatialDataTiles = getMissingTiles(spatialDataIndex, spatialFilter) || [];\n        const promises = [];\n        for (const tile of missingSpatialDataTiles) {\n            const spatialIndex = {\n                tiles: [tile],\n            }\n\n            const relations = {};\n            const attributeFilter = null;\n            const loadGeometry = true;\n            const loadRelations = false;\n            const dataSourceKeys = null;\n            const featureKeys = null;\n            promises.push(dispatch(loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilter, attributeFilter, loadGeometry, loadRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter))) \n        }\n        return Promise.all(promises);\n    }\n}\n\n\n/**\n * Ensure load spatial data, attribute data and relations for tiles defined in spatialFilter.\n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n * @param {string?} styleKey UUID\n * @param {Array?} order\n * @param {Object} mergedSpatialFilter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Object} mergedAttributeFilter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n * @return {function}\n */\nfunction ensureDataAndRelations(spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter) {\n    return (dispatch, getState) => {\n        const PAGE_SIZE = getPageSize(getState());\n\n        const relations = {\n            // start: 0,\n            // length: 1000,\n            offset: 0,\n            limit: PAGE_SIZE,\n        };\n\n        // FIXME - add attributeFilter support\n        // attributeFilter is null at the moment\n        const attributeFilter = null;\n        const loadGeometry = true;\n        const loadRelations = true;\n        const dataSourceKeys = null;\n        const featureKeys = null;\n        const spatialIndex = null;\n        if(spatialFilter && !_.isEmpty(spatialFilter)) {\n            return dispatch(loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilter, attributeFilter, loadGeometry, loadRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter)).then((response) => {\n                if(response instanceof Error) {\n                    return;\n                    throw response;\n                }\n\n                const attributeRelationsCount = response.total.attributeRelations;\n                const spatialRelationsCount = response.total.spatialRelations;\n\n                const restRelationsPages = getRestRelationsPages(attributeRelationsCount, spatialRelationsCount, PAGE_SIZE);\n\n                const spatialDataSources = response?.data?.spatialDataSources || [];\n                const preloadSpatialDataSources = spatialDataSources.map(sds => ({type: sds.data.type, key: sds.key}));\n                const allSourcesAreUnsupported = spatialDataSources.every(ds => !TILED_VECTOR_LAYER_TYPES.includes(ds.data?.type));\n                \n                // Check if all of returned spatialDataSources are unsupported type.\n                // If so, is no reason to make further requests.\n                // Indexes for unsupported layers can be cleared.\n                if((restRelationsPages === 0) && allSourcesAreUnsupported) {\n                    // AttributeData and spatialData index represented by mergedSpatialFilter, mergedAttributeFilter and order can be deleted\n                    dispatch(spatialData.removeIndex(mergedSpatialFilter, order))\n                    dispatch(attributeData.removeIndex(mergedAttributeFilter, order))\n                    return\n                } else {\n                    return dispatch(loadMissingRelationsAndData(loadGeometry, spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter, attributeRelationsCount, spatialRelationsCount, preloadSpatialDataSources));\n                }\n            \n            }).catch((err)=>{\n                if (err?.message === 'Index outdated'){\n                    dispatch(refreshIndex(getSubstate, dataType, filter, order, actionTypes, categoryPath));\n                } else {\n                    throw new Error(`data/actions#ensure: ${err}`);\n                }\n            });\n        } else {\n            return dispatch(commonActions.actionGeneralError(new Error('Missing spatial filter')));\n        }\n    }\n}\n\n/**\n * Find out all tiles from spatialFilter without loaded attribute data\n * @param {Object} attributeDataIndex \n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n */\nconst hasMissingAttributesData = (attributeDataIndex, spatialFilter) => {\n    const missingAttributeDataTiles = getMissingTiles(attributeDataIndex, spatialFilter) || spatialFilter.tiles;\n    return (missingAttributeDataTiles && missingAttributeDataTiles.length && missingAttributeDataTiles.length > 0) ? true : false;\n}\n\n/**\n * Find out all tiles from spatialFilter without loaded attribute data\n * @param {Object} spatialDataIndex \n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n */\nconst hasMissingSpatialData = (spatialDataIndex, spatialFilter) => {\n    const missingSpatialDataTiles = getMissingTiles(spatialDataIndex, spatialFilter) || spatialFilter.tiles;\n    return (missingSpatialDataTiles && missingSpatialDataTiles.length && missingSpatialDataTiles.length > 0) ? true : false;\n}\n\n/**\n * It find out if for given ltKey/atlKey and mergedSpatialFilter exists relations index.\n * The Existence of index means it is loading or loaded.\n * TODO - add support of areaTrees\n * @param {Object} state App state object\n * @param {string?} areaTreeLevelKey Optional area tree key\n * @param {string?} layerTemplateKey Optional layer template key\n * @param {Object} mergedSpatialFilter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Array} order \n * @return {bool}\n */\nconst hasSpatialOrAreaRelations = (state, areaTreeLevelKey, layerTemplateKey, mergedSpatialFilter, order) => {\n    let spatialRelationsIndex = null;\n    let areaRelationsIndex = null;\n\n    if(layerTemplateKey) {\n        spatialRelationsIndex = Select.data.spatialRelations.getIndex(state, mergedSpatialFilter, order);\n    }\n\n    // FIXME - add support for areaTreeLevels\n    if(areaTreeLevelKey) {\n        // areaRelationsIndex = Select.data.areaRelations.getIndex(getState(), mergedSpatialFilter, order);\n    }\n\n    return spatialRelationsIndex !== null || areaRelationsIndex !== null\n}\n\n/**\n * Entry function for requesting of loading new data. In first step are identified loaded indexes based on filters.\n * Next phase is request only data that are missing.\n * @param filter {Object}\n * @return {function}\n */\nfunction ensure(filter) {\n    return (dispatch, getState) => {\n\n        // Filter params - see Panther docs: Code/API/Data endpoint\n        const {styleKey, data, mergedFilter} = filter;\n        const {spatialFilter} = data;\n        const {areaTreeLevelKey, layerTemplateKey} = mergedFilter;\n        const mergedSpatialFilter = mergedFilter;\n        const mergedAttributeFilter = {...mergedFilter, styleKey};\n        \n        // select indexes\n        const order = null;\n\n        const spatialDataIndex = Select.data.spatialData.getIndex(getState(),  mergedSpatialFilter, order) || [];\n        const attributeDataIndex = Select.data.attributeData.getIndex(getState(), \"spatialIndexes\", mergedAttributeFilter, order) || [];\n        const missingAttributesData = hasMissingAttributesData(attributeDataIndex, spatialFilter);\n        const missingSpatialData = hasMissingSpatialData(spatialDataIndex, spatialFilter);\n        const filterHasSpatialOrAreaRelations = hasSpatialOrAreaRelations(getState(), areaTreeLevelKey, layerTemplateKey, mergedSpatialFilter, order);\n\n        // \n        // Skip over load request on already loaded/loading data\n        // \n        if(!filterHasSpatialOrAreaRelations && missingSpatialData) {\n            return dispatch(ensureDataAndRelations(spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter));\n        }\n\n        if(missingSpatialData) {\n            return dispatch(loadMissingSpatialData(spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter));\n        }\n\n        if(missingAttributesData) {\n            return dispatch(loadMissingAttributeData(spatialFilter, styleKey, order, mergedSpatialFilter, mergedAttributeFilter));\n        }\n    }\n}\n\n\n/**\n * \n * @param {string?} styleKey \n * @param {Object?} relations Pagination for relations.\n * @param {Array?} featureKeys Array of feature keys that should be loaded.\n * @param {Object?} spatialIndex Object where under \"tiles\" key is array of tiles that should be loaded.\n * @param {Object} spatialFilter Spatial defined filter of level and its tiles\n * @param {Object?} attributeFilter Filter for requested attribute data.\n * @param {bool} loadGeometry Whether response should contain geometry\n * @param {bool} loadRelations Whether response should contain relations\n * @param {Array?} dataSourceKeys Another optional filter parameter. Possible to use insted of layerTemplateKey or areaTreeKey\n * @param {Array?} order \n * @param {Object} mergedSpatialFilter Filler object contains modifiers and layerTemplateKey or areaTreeLevelKey.\n * @param {Object} mergedAttributeFilter Filler object contains modifiers, layerTemplateKey or areaTreeLevelKey and styleKey.\n */\nfunction loadIndexedPage(styleKey, relations, featureKeys, spatialIndex, spatialFilter, attributeFilter, loadGeometry, loadRelations, dataSourceKeys, order, mergedSpatialFilter, mergedAttributeFilter) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tconst apiPath = 'backend/rest/data/filtered';\n\n        const {areaTreeLevelKey, layerTemplateKey, ...modifiers} = mergedSpatialFilter\n        const usedRelations = relations ? {...relations} : DEFAULT_RELATIONS_PAGE;\n        \n        //register indexes\n\n        ////\n        // Spatial\n        ////\n        if(loadGeometry) {\n            const loadingTilesGeometry = spatialIndex?.tiles || spatialFilter.tiles;\n            dispatch(spatialData.addLoadingIndex(mergedSpatialFilter, order, spatialFilter.level, loadingTilesGeometry));\n        }\n\n        \n        ////\n        // Attribute\n        ////\n        const loadingTilesAttributes = spatialIndex?.tiles || spatialFilter.tiles;\n        dispatch(attributeData.addLoadingIndex(mergedAttributeFilter, order, spatialFilter.level, loadingTilesAttributes));\n\n\n        // Create payload\n\n\t\tconst payload = {\n            modifiers,\n\n            // which layer you want\n            ...(layerTemplateKey && {layerTemplateKey}),\n            ...(areaTreeLevelKey && {areaTreeLevelKey}),\n\n            // get attributes from style\n            ...(styleKey && {styleKey}),\n\n            // pagination for relations (& data sources)\n            relations: usedRelations,\n\n            data: {\n                // list of features you want\n                ...(featureKeys && {featureKeys}),\n\n                // which tiles you want (pseudo-pagination)\n                // spatialIndex: {\n                //     tiles: [[lon, lat], ...],\n                // },\n                ...(spatialIndex && {spatialIndex}),\n\n                // extent\n                spatialFilter,\n\n                // filter features by attribute value\n                // attributeFilter: {\n                //     'attribute-uuid': \"blue\",\n                //     'attribute-uuid': {\n                //         in: [12, 13]\n                //     },\n                //     ...\n                // },\n                ...(attributeFilter && {attributeFilter}),\n                \n                //request for geometry\n                geometry: !!loadGeometry,\n                \n                //request for relations\n                relations: !!loadRelations,\n                \n                // use data source keys as filter or add them to filter\n                ...(dataSourceKeys && {dataSourceKeys}),\n            },\n        };\n\n\t\treturn request(localConfig, apiPath, 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors) {\n\t\t\t\t\tthrow new Error(result.errors[dataType] || 'no data');\n\t\t\t\t} else {\n                    if(result.data) {\n\t\t\t\t\t\t////\n\t\t\t\t\t\t// Attributes\n\t\t\t\t\t\t////\n\t\t\t\t\t\tif(!!loadRelations && result.data.attributeRelations && !_.isEmpty(result.data.attributeRelations)) {\n\t\t\t\t\t\t\tconst changes = null;\n\t\t\t\t\t\t\tdispatch(attributeRelations.receiveIndexed(result.data.attributeRelations, mergedAttributeFilter, order, relations.offset, result.total.attributeRelations, changes));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(!!loadRelations && result.data.attributeDataSources && !_.isEmpty(result.data.attributeDataSources)) {\n\t\t\t\t\t\t\tconst changes = null;\n\t\t\t\t\t\t\tdispatch(attributeDataSources.receiveIndexed(result.data.attributeDataSources, mergedAttributeFilter, order, relations.offset, result.total.attributeRelations, changes));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(result.data.spatialData && result.data.attributeData) {\n\t\t\t\t\t\t\tconst changes = null;\n\t\t\t\t\t\t\tdispatch(attributeData.receiveIndexed(result.data.attributeData, result.data.spatialData, mergedAttributeFilter, order, changes));\n\t\t\t\t\t\t}\n\n                        ////\n                        // Spatial data\n                        ////\n                        if(!!loadRelations && result.data.spatialRelations && !_.isEmpty(result.data.spatialRelations)) {\n                            const changes = null;\n                            dispatch(spatialRelations.receiveIndexed(result.data.spatialRelations, mergedSpatialFilter, order, relations.offset, result.total.spatialRelations, changes));\n                        }\n\n                        if(!!loadRelations && result.data.spatialDataSources && !_.isEmpty(result.data.spatialDataSources)) {\n                            const changes = null;\n                            dispatch(spatialDataSources.receiveIndexed(result.data.spatialDataSources, mergedSpatialFilter, order, relations.offset, result.total.spatialRelations, changes));\n                        }\n\n                        if(!!loadGeometry) {\n                            // Add data even if data are empty.\n                            // Override loading indicator in state index    \n                            const changes = null;\n                            dispatch(spatialData.receiveIndexed(result.data.spatialData, mergedSpatialFilter, order, changes));\n                        }\n                    \n                        return result;\n                    } else {\n                        const error = new Error('no data');\n                        dispatch(commonActions.actionGeneralError(error));        \n                        return error;\n                    }\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(commonActions.actionGeneralError(error));\n\t\t\t\treturn error; //todo do we need to return this\n\t\t\t});\n\t};\n}\n\nexport default {\n    attributeData,\n    attributeDataSources,\n    attributeRelations,\n    spatialData,\n    spatialDataSources,\n    spatialRelations,\n\n    ensure, //todo TESTS\n    loadMissingSpatialData, //todo TESTS\n    ensureDataAndRelations, //todo TESTS\n}\n","import ActionTypes from '../../constants/ActionTypes';\n\nimport _ from 'lodash';\nimport path from 'path';\nimport fetch from 'isomorphic-fetch';\n\nimport Select from '../Select';\n\nconst TTL = 3;\n\n\n// ============ creators ===========\n\nfunction loadForAoiLayer(aoi, wmsLayer, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst apiBackendProtocol = Select.app.getLocalConfiguration(state, 'apiBackendProtocol');\n\t\tconst apiBackendHost = Select.app.getLocalConfiguration(state, 'apiBackendHost');\n\t\tconst apiBackendPath = Select.app.getLocalConfiguration(state, 'apiBackendPath');\n\t\tconst apiBackendAoiLayerPeriodsPath = Select.app.getLocalConfiguration(state, 'apiBackendAoiLayerPeriodsPath');\n\n\t\tif (!_.isObject(aoi)) {\n\t\t\taoi = _.find(Select.aoi.getAois(getState()), {key: aoi});\n\t\t}\n\t\tif (!_.isObject(wmsLayer)) {\n\t\t\twmsLayer = _.find(getState().wmsLayers.data, {key: wmsLayer});\n\t\t}\n\n\t\tdispatch(actionLoadForAoiRequest(aoi.key, wmsLayer.key));\n\n\t\tlet url = apiBackendProtocol + '://' + path.join(apiBackendHost, apiBackendPath, apiBackendAoiLayerPeriodsPath);\n\t\tlet body = {\n\t\t\tdata: {\n\t\t\t\tgeometry: aoi.geometry,\n\t\t\t\tlayerName: wmsLayer.layerName\n\t\t\t}\n\t\t};\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(body),\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json'\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tconsole.log('#### LayerPeriods receive', response);\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.json().then(data => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdispatch(actionLoadForAoiLayerReceive(aoi.key, wmsLayer.key, data.dates));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdispatch(actionloadForAoiLayerError(aoi.key, wmsLayer.key, 'no data returned'));\n\t\t\t\t\t}\n\t\t\t\t}).catch(function(err){\n\t\t\t\t\tif (ttl - 1){\n\t\t\t\t\t\tloadForAoiLayer(aoi, wmsLayer, ttl - 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdispatch(actionloadForAoiLayerError(aoi.key, wmsLayer.key, response))\n\t\t\t}\n\t\t});\n\n\t};\n}\n\nfunction loadForPlaceLayer(place, wmsLayer, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tconst state = getState();\n\t\tconst apiBackendProtocol = Select.app.getLocalConfiguration(state, 'apiBackendProtocol');\n\t\tconst apiBackendHost = Select.app.getLocalConfiguration(state, 'apiBackendHost');\n\t\tconst apiBackendPath = Select.app.getLocalConfiguration(state, 'apiBackendPath');\n\t\tconst apiBackendAoiLayerPeriodsPath = Select.app.getLocalConfiguration(state, 'apiBackendAoiLayerPeriodsPath');\n\n\t\tif (!_.isObject(place)) {\n\t\t\tplace = _.find(Select.places.getPlaces(getState()), {key: place});\n\t\t}\n\t\tif (!_.isObject(wmsLayer)) {\n\t\t\twmsLayer = _.find(getState().wmsLayers.data, {key: wmsLayer});\n\t\t}\n\n\t\tdispatch(actionLoadForPlaceRequest(place.key, wmsLayer.key));\n\n\t\tlet url = apiBackendProtocol + '://' + path.join(apiBackendHost, apiBackendPath, apiBackendAoiLayerPeriodsPath);\n\t\tlet body = {\n\t\t\tdata: {\n\t\t\t\tgeometry: place.geometry,\n\t\t\t\tlayerName: wmsLayer.layerName\n\t\t\t}\n\t\t};\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(body),\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json'\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tconsole.log('#### LayerPeriods receive', response);\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.json().then(data => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdispatch(actionLoadForPlaceLayerReceive(place.key, wmsLayer.key, data.dates));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdispatch(actionLoadForPlaceLayerError(place.key, wmsLayer.key, 'no data returned'));\n\t\t\t\t\t}\n\t\t\t\t}).catch(function(err){\n\t\t\t\t\tif (ttl - 1){\n\t\t\t\t\t\tloadForPlaceLayer(place, wmsLayer, ttl - 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdispatch(actionLoadForPlaceLayerError(place.key, wmsLayer.key, response))\n\t\t\t}\n\t\t});\n\t};\n}\n\nfunction loadForKeyLayer(key, geometry, wmsLayer, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(state);\n\n\t\tif (!_.isObject(wmsLayer)) {\n\t\t\twmsLayer = _.find(state.wmsLayers.data, {key: wmsLayer});\n\t\t}\n\n\t\tdispatch(actionLoadForKeyLayerRequest(key, geometry, wmsLayer.key));\n\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, localConfig.apiBackendAoiLayerPeriodsPath);\n\t\tlet body = {\n\t\t\tdata: {\n\t\t\t\tgeometry: geometry,\n\t\t\t\tlayerName: wmsLayer.layerName\n\t\t\t}\n\t\t};\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify(body),\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json'\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tconsole.log('#### LayerPeriods receive', response);\n\t\t\tif (response.ok) {\n\t\t\t\tresponse.json().then(data => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdispatch(actionLoadForKeyLayerReceive(key, geometry, wmsLayer.key, data.dates));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdispatch(actionLoadForKeyLayerError(key, geometry, wmsLayer.key, 'no data returned'));\n\t\t\t\t\t}\n\t\t\t\t}).catch(function(err){\n\t\t\t\t\tif (ttl - 1){\n\t\t\t\t\t\tloadForKeyLayer(key, geometry, wmsLayer, ttl - 1);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdispatch(actionLoadForKeyLayerError(key, geometry, wmsLayer.key, response))\n\t\t\t}\n\t\t});\n\t};\n}\n\nfunction loadForAoi(aoiKey) {\n\treturn (dispatch, getState) => {\n\n\t\tlet state = getState();\n\t\tlet aoi = _.find(Select.aoi.getAois(state), {key: aoiKey});\n\t\t_.each(state.wmsLayers.data, wmsLayer => {\n\t\t\tif (wmsLayer.getDates) dispatch(loadForAoiLayer(aoi, wmsLayer));\n\t\t});\n\n\t};\n}\n\nfunction loadForPlace(placeKey) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet place = _.find(Select.places.getPlaces(state), {key: placeKey});\n\t\tif (place && place.geometry){\n\t\t\t_.each(state.wmsLayers.data, wmsLayer => {\n\t\t\t\tif (wmsLayer.getDates) dispatch(loadForPlaceLayer(place, wmsLayer));\n\t\t\t});\n\t\t}\n\t};\n}\n\nfunction loadForKey(key, geometry) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet layers = Select.wmsLayers.getLayersWithGetDate(state);\n\t\t_.each(layers, wmsLayer => {\n\t\t\tdispatch(loadForKeyLayer(key, geometry, wmsLayer));\n\t\t});\n\t};\n}\n\n//function loadReceive(features, aoiLayer) {\n//\treturn dispatch => {\n//\t\tfeatures = _.map(features, feature => {\n//\t\t\treturn {\n//\t\t\t\tkey: feature.properties[aoiLayer.fidColumn || 'fid'],\n//\t\t\t\tcode: feature.properties[aoiLayer.idColumn]\n//\t\t\t};\n//\t\t});\n//\t\tdispatch(actionLoadReceive(features));\n//\t};\n//}\n\n// ============ actions ===========\n\n\nfunction actionLoadForAoiRequest(aoiKey, layerKey) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_AOI_LAYER_REQUEST,\n\t\taoiKey: aoiKey,\n\t\tlayerKey: layerKey\n\t}\n}\n\nfunction actionLoadForAoiLayerReceive(aoiKey, layerKey, periods) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_AOI_LAYER_RECEIVE,\n\t\taoiKey: aoiKey,\n\t\tlayerKey: layerKey,\n\t\tperiods: periods\n\t}\n}\n\nfunction actionloadForAoiLayerError(aoiKey, layerKey, error) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR,\n\t\taoiKey: aoiKey,\n\t\tlayerKey: layerKey,\n\t\terror: error\n\t}\n}\n\nfunction actionLoadForPlaceRequest(placeKey, layerKey) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_PLACE_LAYER_REQUEST,\n\t\tplaceKey: placeKey,\n\t\tlayerKey: layerKey\n\t}\n}\n\nfunction actionLoadForPlaceLayerReceive(placeKey, layerKey, periods) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_PLACE_LAYER_RECEIVE,\n\t\tplaceKey: placeKey,\n\t\tlayerKey: layerKey,\n\t\tperiods: periods\n\t}\n}\n\nfunction actionLoadForPlaceLayerError(placeKey, layerKey, error) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR,\n\t\tplaceKey: placeKey,\n\t\tlayerKey: layerKey,\n\t\terror: error\n\t}\n}\n\nfunction actionLoadForKeyLayerRequest(key, geometry, layerKey) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_KEY_LAYER_REQUEST,\n\t\tkey: key,\n\t\tgeometry: geometry,\n\t\tlayerKey: layerKey\n\t}\n}\n\nfunction actionLoadForKeyLayerReceive(key, geometry, layerKey, periods) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_KEY_LAYER_RECEIVE,\n\t\tkey: key,\n\t\tgeometry: geometry,\n\t\tlayerKey: layerKey,\n\t\tperiods: periods\n\t}\n}\n\nfunction actionLoadForKeyLayerError(key, geometry, layerKey, error) {\n\treturn {\n\t\ttype: ActionTypes.LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR,\n\t\tkey: key,\n\t\tgeometry: geometry,\n\t\tlayerKey: layerKey,\n\t\terror: error\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tloadForAoi: loadForAoi,\n\tloadForPlace: loadForPlace,\n\tloadForKey\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport common from '../_common/actions';\n\n// ============ creators ===========\n\nconst create = common.create(Select.layerTrees.getSubstate, 'layerTrees', ActionTypes.LAYER_TREES, 'applications');\nconst deleteItem = common.delete(Select.layerTrees.getSubstate, 'layerTrees', ActionTypes.LAYER_TREES, 'applications');\nconst saveEdited = common.saveEdited(Select.layerTrees.getSubstate, 'layerTrees', ActionTypes.LAYER_TREES, 'applications');\nconst updateEdited = common.updateEdited(Select.layerTrees.getSubstate, ActionTypes.LAYER_TREES);\nconst useKeys = common.useKeys(Select.layerTrees.getSubstate, 'layerTrees', ActionTypes.LAYER_TREES, 'applications');\nconst useKeysClear = common.useKeysClear(ActionTypes.LAYER_TREES);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.LAYER_TREES);\nconst useIndexed = common.useIndexed(Select.layerTrees.getSubstate, 'layerTrees', ActionTypes.LAYER_TREES, 'applications');\nconst refreshUses = common.refreshUses(Select.layerTrees.getSubstate, 'layerTrees', ActionTypes.LAYER_TREES, 'applications');\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.LAYER_TREES);\n\n// ============ actions ===========\nfunction ensureData(filter, componentId) {\n\treturn (dispatch) => {\n\t\treturn dispatch(useIndexed(null, filter, null, 1, 100, componentId)).then()\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tcreate,\n\tdelete: deleteItem,\n\n\tensureData,\n\n\trefreshUses,\n\n\tsaveEdited,\n\n\tupdateEdited,\n\tupdateStateFromView,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear,\n}\n","import _ from 'lodash';\nimport {map as mapUtils} from \"@gisatcz/ptr-utils\";\n\nimport ActionTypes from '../../constants/ActionTypes';\nimport Select from '../../state/Select';\nimport commonHelpers from '../_common/helpers';\nimport commonSelectors from '../_common/selectors';\n\nimport DataActions from \"../Data/actions\";\nimport {TILED_VECTOR_LAYER_TYPES} from \"../Data/constants\";\nimport StylesActions from \"../Styles/actions\";\n\nimport helpers from \"./selectorHelpers\";\nimport SelectionsAction from '../Selections/actions';\n\n/* ==================================================\n * CREATORS\n * ================================================== */\n\n/**\n * @param mapKey {string}\n * @param backgroundLayer {Object} background layer definition\n * @param layers {Object} layers definition\n * @param mapWidth {number} width of map component in px\n * @param mapHeight {number} height of map component in px\n */\nfunction use(mapKey, backgroundLayer, layers, mapWidth, mapHeight) {\n    return (dispatch, getState) => {\n        // TODO clear use for given mapKey, if exists\n        const state = getState();\n        const componentId = `map_${mapKey}`;\n        const spatialFilter = {};\n        if(mapWidth && mapHeight) {\n            const view = Select.maps.getViewByMapKey(state, mapKey);\n            const tiles = helpers.getTiles(mapWidth, mapHeight, view.center, view.boxRange);\n            const level = helpers.getZoomLevel(mapWidth, mapHeight, view.boxRange);\n            spatialFilter.tiles = tiles;\n            spatialFilter.level = level;\n        } else {\n            //spatial filter is required\n            return;\n        }\n\n        const activeKeys = commonSelectors.getAllActiveKeys(state);\n\n        // uncontrolled map - the map is not controlled from store, but layer data is collected based on stored metadata.\n        if (backgroundLayer || layers) {\n            layers = helpers.mergeBackgroundLayerWithLayers(layers, backgroundLayer);\n        }\n        // controlled map (with stateMapKey) - the map is completely controlled from store\n        else {\n            layers = Select.maps.getAllLayersStateByMapKey(state, mapKey);\n        }\n\n        if (layers) {\n            layers.forEach(layer => \n                // apply layerUse asynchronous on each leyer\n                // it cause better FPS and prevent long synchronous tasks\n                setTimeout(() => {dispatch(layerUse(componentId, activeKeys, layer, spatialFilter))}, 0)\n            );\n        }\n    }\n}\n\n/**\n * @param componentId {string}\n * @param activeKeys {Object} active metadata keys (such as activeApplicationKey, activeScopeKey etc.)\n * @param layerState {Object} layer definition\n * @param spatialFilter {{level: number}, {tiles: Array}}\n */\nfunction layerUse(componentId, activeKeys, layerState, spatialFilter) {\n    return (dispatch, getState) => {\n        const state = getState();\n\n\t\t// TODO ensure style here for now\n\t\tif (layerState.styleKey) {\n\t\t\tdispatch(StylesActions.useKeys([layerState.styleKey], layerState.key + \"_layerUse\"));\n\t\t}\n\n        // modifiers defined by key\n        let metadataDefinedByKey = layerState.metadataModifiers ? {...layerState.metadataModifiers} : {};\n\n        // add layerTemplate od areaTreeLevelKey\n        if (layerState.layerTemplateKey) {\n            metadataDefinedByKey.layerTemplateKey = layerState.layerTemplateKey;\n            // TODO use layerTemplate here?\n        } else if (layerState.areaTreeLevelKey) {\n            metadataDefinedByKey.areaTreeLevelKey = layerState.areaTreeLevelKey;\n            // TODO use areaTreeLevelKey here?\n        }\n\n        // Get actual metadata keys defined by filterByActive\n        const activeMetadataKeys = layerState.filterByActive ? commonSelectors.getActiveKeysByFilterByActive(state, layerState.filterByActive) : null;\n\n        // Merge metadata, metadata defined by key have priority\n        const mergedMetadataKeys = commonHelpers.mergeMetadataKeys(metadataDefinedByKey, activeMetadataKeys);\n\n        // Decouple modifiers from templates\n        const {areaTreeLevelKey, layerTemplateKey, applicationKey, ...modifiers} = mergedMetadataKeys;\n\n        // It converts modifiers from metadataKeys: [\"A\", \"B\"] to metadataKey: {in: [\"A\", \"B\"]}\n        const modifiersForRequest = commonHelpers.convertModifiersToRequestFriendlyFormat(modifiers);\n        if (layerTemplateKey || areaTreeLevelKey) {\n            let mergedFilter = {};\n            if(areaTreeLevelKey) {\n                mergedFilter = {...modifiersForRequest, areaTreeLevelKey};\n            }\n\n            if(layerTemplateKey) {\n                mergedFilter = {...modifiersForRequest, layerTemplateKey};\n            }\n\n\n            if(layerTemplateKey) {\n                const order = null;\n                const spatialDataSources = Select.data.spatialDataSources.getByFilteredIndex(state, mergedFilter, order);\n                const sdsContainsVector = spatialDataSources?.some(spatialDataSource => TILED_VECTOR_LAYER_TYPES.includes(spatialDataSource?.data?.type)) || false;\n                // load only dataSources that are supported type\n                if (spatialDataSources && !sdsContainsVector) {\n                    return;\n                }\n            }\n            // TODO register use?\n            dispatch(DataActions.ensure({\n                styleKey: layerState.styleKey || null,\n                data: {\n                    spatialFilter\n                },\n                mergedFilter\n            }));\n        }\n    }\n}\n\n/**\n * @param mapKey {string}\n * @param layerKey {string}\n * @param selectedFeatureKeys {Array}\n */\nfunction setLayerSelectedFeatureKeys(mapKey, layerKey, selectedFeatureKeys) {\n\treturn (dispatch, getState) => {\n        const state = getState();\n\t\tconst layer = Select.maps.getLayerStateByLayerKeyAndMapKey(state, mapKey, layerKey);\n\t\tif (layer?.options?.selectable) {\n\t\t\tconst activeSelectionKey = Select.selections.getActiveKey(state);\n\t\t\tif (activeSelectionKey && layer.options.selected?.hasOwnProperty(activeSelectionKey)) {\n\t\t\t\t// TODO possible conflicts if features with same key from different layers are selected\n\t\t\t\tdispatch(SelectionsAction.setActiveSelectionFeatureKeysFilterKeys(selectedFeatureKeys));\n\t\t\t} else {\n\t\t\t\t// TODO what if there is no active selection?\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * @param mapKey {string}\n * @param layerKey {string}\n * @param styleKey {string}\n */\nfunction setMapLayerStyleKey(mapKey, layerKey, styleKey) {\n\treturn (dispatch) => {\n\t\tdispatch(actionSetMapLayerStyleKey(mapKey, layerKey, styleKey));\n\t}\n}\n\n/**\n * @param mapKey {string}\n */\nfunction setMapSetActiveMapKey(mapKey) {\n    return (dispatch, getState) => {\n        let set = Select.maps.getMapSetByMapKey(getState(), mapKey);\n        if (set) {\n            dispatch(actionSetMapSetActiveMapKey(set.key, mapKey));\n        }\n    };\n}\n\n/**\n * @param setKey {string}\n * @param backgroundLayer {Object} background layer definition\n */\nfunction setMapSetBackgroundLayer(setKey, backgroundLayer) {\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionSetMapSetBackgroundLayer(setKey, backgroundLayer));\n\t\tconst maps = Select.maps.getMapSetMaps(getState(), setKey);\n\t\tif (maps) {\n\t\t\tmaps.forEach(map => {\n\t\t\t\t// TODO is viewport always defined?\n\t\t\t\tdispatch(use(map.key, null, null, map?.data?.viewport?.width, map?.data?.viewport?.height));\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * @param setKey {string}\n */\nfunction refreshMapSetUse(setKey) {\n\treturn (dispatch, getState) => {\n\t\tconst maps = Select.maps.getMapSetMaps(getState(), setKey);\n\t\tif (maps) {\n\t\t\tmaps.forEach(map => {\n\t\t\t\t// TODO is viewport always defined?\n\t\t\t\tdispatch(use(map.key, null, null, map?.data?.viewport?.width, map?.data?.viewport?.height));\n\t\t\t});\n\t\t}\n\t};\n}\n\n/**\n * @param mapKey {string}\n * @param update {Object} map view fragment\n */\nfunction updateMapAndSetView(mapKey, update) {\n    return (dispatch, getState) => {\n        let set = Select.maps.getMapSetByMapKey(getState(), mapKey);\n        let forSet, forMap;\n\n        if (set && set.sync) {\n            // pick key-value pairs that are synced for set\n            forSet = _.pickBy(update, (updateVal, updateKey) => {\n                return set.sync[updateKey];\n            });\n\n            forMap = _.omitBy(update, (updateVal, updateKey) => {\n                return set.sync[updateKey];\n            });\n        } else {\n            forMap = update;\n        }\n\n        if (forSet && !_.isEmpty(forSet)) {\n            //check data integrity\n            forSet = mapUtils.view.ensureViewIntegrity(forSet); //TODO test\n            dispatch(actionUpdateSetView(set.key, forSet));\n        }\n\n        if (forMap && !_.isEmpty(forMap)) {\n            //check data integrity\n            forMap = mapUtils.view.ensureViewIntegrity(forMap); //TODO test\n            dispatch(actionUpdateMapView(mapKey, forMap));\n        }\n    }\n}\n\n/**\n * @param setKey {string}\n * @param update {Object} map view fragment\n */\nfunction updateSetView(setKey, update) {\n    return (dispatch, getState) => {\n        let activeMapKey = Select.maps.getMapSetActiveMapKey(getState(), setKey);\n        dispatch(updateMapAndSetView(activeMapKey, update));\n    };\n}\n\n/**\n * Update whole maps state from view definition\n * @param data {Object}\n */\nfunction updateStateFromView(data) {\n    return dispatch => {\n        if (data) {\n            dispatch(actionUpdate(data));\n        }\n    };\n}\n\n\n/* ==================================================\n * ACTIONS\n * ================================================== */\n\nconst actionSetMapLayerStyleKey = (mapKey, layerKey, styleKey) => {\n\treturn {\n\t\ttype: ActionTypes.MAPS.MAP.LAYERS.SET_STYLE_KEY,\n\t\tmapKey,\n\t\tlayerKey,\n\t\tstyleKey\n\t}\n};\n\nconst actionSetMapSetActiveMapKey = (setKey, mapKey) => {\n    return {\n        type: ActionTypes.MAPS.SET.SET_ACTIVE_MAP_KEY,\n        mapKey,\n        setKey\n    }\n};\n\nconst actionSetMapSetBackgroundLayer = (setKey, backgroundLayer) => {\n\treturn {\n\t\ttype: ActionTypes.MAPS.SET.SET_BACKGROUND_LAYER,\n\t\tsetKey,\n\t\tbackgroundLayer\n\t}\n};\n\nconst actionSetMapViewport = (mapKey, width, height) => {\n\treturn {\n\t\ttype: ActionTypes.MAPS.MAP.VIEWPORT.SET,\n\t\tmapKey,\n\t\twidth,\n\t\theight\n\t}\n};\n\nconst actionUpdate = (data) => {\n    return {\n        type: ActionTypes.MAPS.UPDATE,\n        data\n    }\n};\n\n\nconst actionUpdateMapView = (mapKey, update) => {\n    return {\n        type: ActionTypes.MAPS.MAP.VIEW.UPDATE,\n        mapKey,\n        update\n    }\n};\n\n\nconst actionUpdateSetView = (setKey, update) => {\n    return {\n        type: ActionTypes.MAPS.SET.VIEW.UPDATE,\n        setKey,\n        update\n    }\n}\n\n\n// ============ export ===========\nexport default {\n\trefreshMapSetUse,\n\tsetLayerSelectedFeatureKeys,\n\tsetMapLayerStyleKey,\n    setMapSetActiveMapKey,\n\tsetMapSetBackgroundLayer,\n\tsetMapViewport: actionSetMapViewport,\n    updateMapAndSetView,\n    updateSetView,\n    updateStateFromView,\n    use\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/actions';\nimport Select from \"../Select\";\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.PERIODS);\nconst create = common.create(Select.periods.getSubstate, 'periods', ActionTypes.PERIODS);\nconst deleteItem = common.delete(Select.periods.getSubstate, 'periods', ActionTypes.PERIODS);\nconst saveEdited = common.saveEdited(Select.periods.getSubstate, 'periods', ActionTypes.PERIODS);\nconst updateEdited = common.updateEdited(Select.periods.getSubstate, ActionTypes.PERIODS);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.PERIODS);\nconst useKeys = common.useKeys(Select.periods.getSubstate, 'periods', ActionTypes.PERIODS);\nconst useKeysClear = common.useKeysClear(ActionTypes.PERIODS);\nconst useIndexed = common.useIndexed(Select.periods.getSubstate, 'periods', ActionTypes.PERIODS);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.PERIODS);\nconst refreshUses = common.refreshUses(Select.periods.getSubstate, `periods`, ActionTypes.PERIODS);\nconst setActiveKeyAndEnsureDependencies = common.setActiveKeyAndEnsureDependencies(ActionTypes.PERIODS, 'period');\nconst setActiveKeysAndEnsureDependencies = common.setActiveKeysAndEnsureDependencies(ActionTypes.PERIODS, 'period');\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.periods.getSubstate, 'periods', ActionTypes.PERIODS);\n\nfunction setActiveKey(key) {\n\treturn dispatch => {\n\t\tdispatch(setActiveKeyAndEnsureDependencies(key));\n\t};\n}\n\nfunction setActiveKeys(keys) {\n\treturn dispatch => {\n\t\tdispatch(setActiveKeysAndEnsureDependencies(keys));\n\t};\n}\n\n// ============ actions ===========\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\n\trefreshUses,\n\n\tsaveEdited,\n\tsetActiveKey,\n\tsetActiveKeys,\n\n\tupdateEdited,\n\tupdateStateFromView,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear\n}\n","import ActionTypes from '../../constants/ActionTypes';\n\nimport common from '../_common/actions';\nimport Select from \"../Select\";\n\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.PLACES);\nconst create = common.create(Select.places.getSubstate, 'places', ActionTypes.PLACES);\nconst deleteItem = common.delete(Select.places.getSubstate, 'places', ActionTypes.PLACES);\nconst saveEdited = common.saveEdited(Select.places.getSubstate, 'places', ActionTypes.PLACES);\nconst setActiveKey = common.setActiveKey(ActionTypes.PLACES);\nconst setActiveKeys = common.setActiveKeys(ActionTypes.PLACES);\nconst updateEdited = common.updateEdited(Select.places.getSubstate, ActionTypes.PLACES);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.PLACES);\nconst useIndexed = common.useIndexed(Select.places.getSubstate, 'places', ActionTypes.PLACES);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.PLACES);\nconst useKeys = common.useKeys(Select.places.getSubstate, 'places', ActionTypes.PLACES);\nconst useKeysClear = common.useKeysClear(ActionTypes.PLACES);\nconst refreshUses = common.refreshUses(Select.places.getSubstate, `places`, ActionTypes.PLACES);\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.places.getSubstate, 'places', ActionTypes.PLACES);\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\trefreshUses,\n\n\tsaveEdited,\n\tsetActiveKey,\n\tsetActiveKeys,\n\n\tupdateEdited,\n\tupdateStateFromView,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear\n}\n","import SpatialRelationsAction from '../SpatialRelations/actions';\nimport SpatialDataSourcesAction from '../SpatialDataSources/actions';\nimport MapsAction from '../_deprecatedMaps/actions';\nimport ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport _ from 'lodash';\nimport path from 'path';\nimport fetch from 'isomorphic-fetch';\nimport queryString from 'query-string';\nimport {utils} from '@gisatcz/ptr-utils'\n\nimport common from '../_common/actions';\n\nlet requestIntervals = {};\n\nconst TTL = 5;\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.SCENARIOS);\nconst updateStateFromView = common.updateSubstateFromView(ActionTypes.SCENARIOS);\n\n// Edited data\nfunction addEditedScenario(key, options){\n\treturn (dispatch, getState) => {\n\t\tlet activeCaseScenarioKeys = Select.scenarios.cases.getActiveCaseScenarioKeys(getState());\n\t\tlet activeCaseEditedScenarioKeys = Select.scenarios.cases.getActiveCaseEditedScenarioKeys(getState());\n\t\tlet updatedScenarioKeys = activeCaseEditedScenarioKeys ? [...activeCaseEditedScenarioKeys, ...[key]] :\n\t\t\t(activeCaseScenarioKeys ? [...activeCaseScenarioKeys, ...[key]] : [key] );\n\t\tdispatch(actionUpdateEditedScenarios([{key: key, ...options}]));\n\t\tdispatch(updateEditedActiveCase('scenarios', updatedScenarioKeys));\n\t};\n}\n\n/**\n * It removes edited scenarios for active case\n */\nfunction removeActiveCaseEditedScenarios() {\n\treturn (dispatch, getState) => {\n\t\tlet activeCaseScenarioKeys = Select.scenarios.cases.getActiveCaseScenarioKeys(getState());\n\t\tlet activeCaseEditedScenarioKeys = Select.scenarios.cases.getActiveCaseEditedScenarioKeys(getState());\n\t\tlet keys = [];\n\t\tif (activeCaseScenarioKeys){\n\t\t\tkeys = [...keys, ...activeCaseScenarioKeys];\n\t\t}\n\t\tif (activeCaseEditedScenarioKeys){\n\t\t\tkeys = [...keys, ...activeCaseEditedScenarioKeys];\n\t\t}\n\t\tdispatch(actionRemoveEditedScenarios(keys));\n\t};\n}\n\nfunction updateEditedActiveCase(key, value) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet activeCaseKey = Select.scenarios.cases.getActiveKey(state);\n\t\tlet activeCase = Select.scenarios.cases.getActive(state);\n\t\tlet sameValue = false;\n\n\t\tif (activeCase && activeCase.data){\n\t\t\tif ((key === 'geometry' || key === 'scenarios') && activeCase.data[key]){\n\t\t\t\tlet val = _.cloneDeep(activeCase.data[key]);\n\t\t\t\tsameValue = JSON.stringify(value) === JSON.stringify(val);\n\t\t\t}\n\n\t\t\tif (sameValue || (value === activeCase.data[key]) || (!activeCase.data[key] && value.length === 0)){\n\t\t\t\tdispatch(actionRemovePropertyFromEditedCase(activeCaseKey, key));\n\t\t\t} else {\n\t\t\t\tdispatch(actionUpdateEditedCases([{key: activeCaseKey, data: {[key]: value}}]));\n\t\t\t}\n\t\t} else {\n\t\t\tdispatch(actionUpdateEditedCases([{key: activeCaseKey, data: {[key]: value}}]));\n\t\t}\n\t};\n}\n\n// it just remove scenario from active case (if it isn't last). Todo unlinking and delete scenario\nfunction removeScenarioFromActiveCase (scenarioKey) {\n\treturn ((dispatch, getState) => {\n\t\tlet activeCase = Select.scenarios.cases.getActive(getState());\n\n\t\tif (activeCase && activeCase.data && activeCase.data.scenarios){\n\t\t\tlet updatedScenarios = _.without(activeCase.data.scenarios, scenarioKey);\n\t\t\tlet updatedCase = {...activeCase, data: {...activeCase.data, scenarios: updatedScenarios}};\n\n\t\t\tdispatch(removeActiveScenario(scenarioKey));\n\t\t\tdispatch(apiUpdateCases([updatedCase],[]));\n\t\t}\n\t});\n}\n\nfunction removeScenarioFromActiveCaseEdited (scenarioKey) {\n\treturn ((dispatch, getState) => {\n\t\tlet activeCaseEdited = Select.scenarios.cases.getActiveCaseEdited(getState());\n\n\t\tif (activeCaseEdited && activeCaseEdited.data && activeCaseEdited.data.scenarios){\n\t\t\tlet updatedScenarios = _.without(activeCaseEdited.data.scenarios, scenarioKey);\n\t\t\tdispatch(updateEditedActiveCase('scenarios', updatedScenarios));\n\t\t}\n\t});\n}\n\nfunction updateEditedScenario(scenarioKey, key, value) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet scenario = Select.scenarios.scenarios.getByKey(state, scenarioKey);\n\t\tlet activeCaseKey = Select.scenarios.cases.getActiveKey(state);\n\t\tlet activeCaseScenarioKeys = Select.scenarios.cases.getActiveCaseScenarioKeys(state);\n\t\tlet activeCaseEditedScenarioKeys = Select.scenarios.cases.getActiveCaseEditedScenarioKeys(state);\n\n\t\tlet updatedScenarioKeys = [];\n\t\tif (activeCaseScenarioKeys){\n\t\t\tupdatedScenarioKeys = _.union(updatedScenarioKeys, activeCaseScenarioKeys);\n\t\t}\n\t\tif (activeCaseEditedScenarioKeys){\n\t\t\tupdatedScenarioKeys = _.union(updatedScenarioKeys, activeCaseEditedScenarioKeys);\n\t\t}\n\n\t\t// delete property from edited, if the value in update is the same as in state\n\t\tif (scenario && (value === scenario.data[key] || (!scenario.data[key] && value.length === 0))){\n\t\t\tdispatch(actionRemovePropertyFromEditedScenario(scenarioKey, key));\n\t\t} else {\n\t\t\tdispatch(actionUpdateEditedCases([{key: activeCaseKey, data: {scenarios: updatedScenarioKeys}}]));\n\t\t\tdispatch(actionUpdateEditedScenarios([{key: scenarioKey, data: {[key]: value}}]));\n\t\t}\n\t};\n}\n\nfunction setActiveCase(key) {\n\treturn (dispatch, getState) => {\n\t\tlet previousCase = Select.scenarios.cases.getActiveKey(getState());\n\t\tdispatch(actionSetActiveCase(key));\n\t\tif (key){\n\t\t\tlet scenarios = Select.scenarios.cases.getActiveCaseScenarioKeys(getState());\n\t\t\tif (key !== previousCase){\n\t\t\t\tdispatch(actionSetActiveKeys(scenarios));\n\t\t\t}\n\t\t} else {\n\t\t\tdispatch(actionSetActiveKeys(null));\n\t\t}\n\t}\n}\n\nfunction addActiveScenario(key){\n\treturn (dispatch, getState) => {\n\t\tlet activeScenarioKeys = Select.scenarios.scenarios.getActiveKeys(getState());\n\t\tlet stateUpdate = _.union(activeScenarioKeys, [key]);\n\t\tdispatch(actionSetActiveKeys(stateUpdate));\n\t}\n}\n\nfunction removeActiveScenario(key){\n\treturn (dispatch, getState) => {\n\t\tlet activeScenarioKeys = Select.scenarios.scenarios.getActiveKeys(getState());\n\t\tlet stateUpdate = _.without(activeScenarioKeys, key);\n\t\tdispatch(actionSetActiveKeys(stateUpdate));\n\t}\n}\n\nfunction applyDataviewSettings(data){\n\treturn (dispatch, getState) => {\n\t\tdispatch(setActiveCase(data.cases.activeKey));\n\t\tdispatch(load(data.cases.activeKey));\n\n\t\tdispatch(actionSetActiveKeys(data.scenarios.activeKeys));\n\t\tdispatch(actionSetDefaultSituationActive(data.scenarios.defaultSituationActive));\n\t}\n}\n\nfunction updateCases(data){\n\treturn dispatch => {\n\t\tdispatch(actionUpdateCases(data));\n\t};\n}\n\nfunction removeCases(keys){\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionRemoveCases(keys));\n\t};\n}\n\nfunction load(caseKey) {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(state);\n\t\tif (state.scenarios.loading) {\n\t\t\t// already loading, do nothing\n\t\t} else {\n\t\t\tdispatch(actionLoadRequest(caseKey));\n\t\t\tlet query = {\n\t\t\t\tscenario_case_id: caseKey\n\t\t\t};\n\t\t\tdispatch(common.request(localConfig, 'backend/rest/metadata/scenarios', \"GET\", query, null, loadReceive, actionLoadError));\n\t\t}\n\t}\n}\n\nfunction loadReceive(data) {\n\t//todo cancel loading for caseKey?\n\tdata = data.scenarios ? data.scenarios : data;\n\n\treturn dispatch => {\n\t\tif (data){\n\t\t\tdata = _.map(data, ({id, ...model}) => {\n\t\t\t\treturn {...model, key: id};\n\t\t\t});\n\t\t\tdispatch(actionLoadReceive(data));\n\t\t\tdispatch(scenariosLoadedForActiveCase());\n\t\t} else {\n\t\t\tconsole.error(\"Scenarios actions#loadReceive: No scenarios loaded\")\n\t\t\t// TODO\n\t\t}\n\t};\n}\n\nfunction scenariosLoadedForActiveCase(){\n\treturn (dispatch, getState) => {\n\t\tlet activeCase = Select.scenarios.cases.getActive(getState());\n\t\tif (activeCase){\n\t\t\tlet updatedCase = {...activeCase, data: {...activeCase.data, scenariosLoaded: true}};\n\t\t\tdispatch(updateCases([updatedCase]));\n\t\t\tdispatch(MapsAction.updateWithScenarios());\n\t\t}\n\t};\n}\n\nfunction loadCases(ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\n\t\tlet state = getState();\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(state);\n\t\tif (state.scenarios.loading) {\n\t\t\t// already loading, do nothing\n\t\t} else {\n\t\t\tdispatch(actionLoadCasesRequest());\n\n\t\t\tlet activePlaceKey = Select.places.getActiveKey(state);\n\n\t\t\tif (activePlaceKey) {\n\n\t\t\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/metadata/scenario_cases');\n\t\t\t\tlet query = queryString.stringify({\n\t\t\t\t\tplace_id: activePlaceKey\n\t\t\t\t});\n\t\t\t\tif (query) {\n\t\t\t\t\turl += '?' + query;\n\t\t\t\t}\n\n\t\t\t\treturn fetch(url, {\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tconsole.log('#### load scenarios cases response', response);\n\t\t\t\t\t\tlet contentType = response.headers.get('Content-type');\n\t\t\t\t\t\tif (response.ok && contentType && (contentType.indexOf('application/json') !== -1)) {\n\t\t\t\t\t\t\treturn response.json().then(data => {\n\t\t\t\t\t\t\t\tif (data.data && data.data.scenario_cases) {\n\t\t\t\t\t\t\t\t\tdispatch(loadCasesReceive(data.data.scenario_cases));\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tdispatch(actionLoadCasesError('no data returned'));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdispatch(actionLoadCasesError(response))\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\tconsole.log('#### load scenario cases error', error);\n\t\t\t\t\t\tif (ttl - 1) {\n\t\t\t\t\t\t\tdispatch(loadCases(ttl - 1));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdispatch(actionLoadCasesError(\"scenarios#actions load cases: cases weren't loaded!\"));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\tdispatch(actionLoadCasesError('scenarios#actions load cases: no active place'));\n\t\t\t}\n\n\t\t}\n\n\t};\n}\n\nfunction loadCasesReceive(models) {\n\treturn dispatch => {\n\t\tmodels = _.map(models, ({id, data, ...model}) => {\n\t\t\tlet {scenario_ids, ...modelData} = data;\n\t\t\treturn {...model, key: id, data: {...modelData, geometry: JSON.parse(modelData.geometry), scenarios: scenario_ids}};\n\t\t});\n\t\tdispatch(actionLoadCasesReceive(models));\n\t};\n}\n\nfunction saveActiveCase() {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet saved = Select.scenarios.cases.getActive(state);\n\t\tlet edited = Select.scenarios.cases.getActiveCaseEdited(state);\n\t\tlet editedScenarios = _.filter(Select.scenarios.scenarios.getEditedAll(state), scenario => {\n\t\t\tlet keys = edited && edited.data && edited.data.scenarios ? edited.data.scenarios : saved.data.scenarios;\n\t\t\treturn _.includes(keys, scenario.key);\n\t\t});\n\t\tlet activePlaceKey = Select.places.getActiveKey(state);\n\n\t\tif (saved) {\n\t\t\t// update\n\t\t\tdispatch(apiUpdateCases(edited ? [edited] : [], editedScenarios));\n\t\t} else {\n\t\t\t// create\n\t\t\tdispatch(apiCreateCases(edited ? [edited] : [], editedScenarios, activePlaceKey));\n\t\t}\n\t};\n}\n\nfunction deleteActiveCase() {\n\treturn (dispatch, getState) => {\n\t\tlet state = getState();\n\t\tlet activeCase = Select.scenarios.cases.getActive(state);\n\t\tif (activeCase){\n\t\t\tdispatch(apiDeleteCases([activeCase]));\n\t\t}\n\t};\n}\n\nfunction apiCreateCases(cases, scenarios, placeKey, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionApiCreateCasesRequest(_.map(cases, 'key')));\n\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/metadata');\n\n\t\tlet payload = {\n\t\t\tdata: {\n\t\t\t\tscenario_cases: _.map(cases, model => {\n\t\t\t\t\tlet caseData = {...model.data, scenario_ids: model.data.scenarios};\n\t\t\t\t\tdelete caseData.scenarios;\n\t\t\t\t\treturn {\n\t\t\t\t\t\tuuid: model.key,\n\t\t\t\t\t\tdata: {...caseData, place_ids: [placeKey]}\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\tscenarios: _.map(scenarios, model => {\n\t\t\t\t\tlet scenarioData = {...model.data};\n\t\t\t\t\tdelete scenarioData['file'];\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tuuid: model.key,\n\t\t\t\t\t\tdata: {...scenarioData}\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\tcredentials: 'include',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(payload)\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tconsole.log('#### create scenario cases response', response);\n\t\t\t\tlet contentType = response.headers.get('Content-type');\n\t\t\t\tif (response.ok && contentType && (contentType.indexOf('application/json') !== -1)) {\n\t\t\t\t\treturn response.json().then(data => {\n\t\t\t\t\t\tif (data.data) {\n\t\t\t\t\t\t\tdispatch(apiCreateCasesReceive(data.data));\n\n\t\t\t\t\t\t\tlet uploadedScenarioFiles = [];\n\n\t\t\t\t\t\t\t_.each(data.data.scenarios, createdScenario => {\n\t\t\t\t\t\t\t\tlet scenarioToCreate = _.find(scenarios, {key: createdScenario.uuid});\n\t\t\t\t\t\t\t\tif (scenarioToCreate) {\n\t\t\t\t\t\t\t\t\tuploadedScenarioFiles.push(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tkey: createdScenario.id,\n\t\t\t\t\t\t\t\t\t\t\tdata: scenarioToCreate.data\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tdispatch(apiUploadScenarioFiles(uploadedScenarioFiles));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdispatch(actionApiCreateCasesError('no data returned'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(actionApiCreateCasesError(response))\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tconsole.log('#### create scenario case error', error);\n\t\t\t\tif (ttl - 1) {\n\t\t\t\t\tdispatch(apiCreateCases(cases, scenarios, placeKey, ttl - 1));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(actionApiCreateCasesError(\"scenarios#actions create cases: cases weren't created!\"));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n}\n\nfunction apiUpdateCases(updates, editedScenarios, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionApiUpdateCasesRequest(_.map(updates, 'key')));\n\n\t\tlet state = getState();\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(state);\n\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/metadata');\n\n\t\tlet payload = {\n\t\t\tdata: {\n\t\t\t\tscenario_cases: _.map(updates, model => {\n\t\t\t\t\tlet caseData = {...model.data, scenario_ids: model.data.scenarios};\n\t\t\t\t\tdelete caseData.scenarios;\n\t\t\t\t\tif (caseData.scenariosLoaded){\n\t\t\t\t\t\tdelete caseData.scenariosLoaded;\n\t\t\t\t\t}\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: model.key,\n\t\t\t\t\t\tdata: caseData\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\tscenarios: _.map(editedScenarios, model => {\n\t\t\t\t\tlet scenario = {\n\t\t\t\t\t\tdata: {...model.data}\n\t\t\t\t\t};\n\t\t\t\t\tif (typeof model.key === \"number\"){\n\t\t\t\t\t\tscenario.id = model.key;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscenario.uuid = model.key;\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete scenario.data['file'];\n\n\t\t\t\t\treturn scenario;\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'PUT',\n\t\t\tcredentials: 'include',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(payload)\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tlet contentType = response.headers.get('Content-type');\n\t\t\t\tif (response.ok && contentType && (contentType.indexOf('application/json') !== -1)) {\n\t\t\t\t\treturn response.json().then(data => {\n\t\t\t\t\t\tif (data.data) {\n\t\t\t\t\t\t\tdispatch(apiUpdateCasesReceive(data.data));\n\n\t\t\t\t\t\t\tlet uploadedScenarioFiles = [];\n\t\t\t\t\t\t\tlet duplicatedScenarios = [];\n\n\t\t\t\t\t\t\t_.each(data.data.scenarios, createdScenario => {\n\t\t\t\t\t\t\t\tlet scenarioToCreate = _.find(editedScenarios, {key: createdScenario.uuid || createdScenario.id});\n\t\t\t\t\t\t\t\tif (scenarioToCreate && scenarioToCreate.data.file) {\n\t\t\t\t\t\t\t\t\tuploadedScenarioFiles.push(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tkey: createdScenario.id,\n\t\t\t\t\t\t\t\t\t\t\tdata: scenarioToCreate.data\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t} else if(scenarioToCreate && scenarioToCreate.dataSourceCloneKey) {\n\t\t\t\t\t\t\t\t\tlet clonedDataSource = Select.spatialDataSources.getDataSource(getState(), scenarioToCreate.dataSourceCloneKey);\n\t\t\t\t\t\t\t\t\tduplicatedScenarios.push(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tkey: createdScenario.id,\n\t\t\t\t\t\t\t\t\t\t\tlayerName: clonedDataSource.data.layer_name,\n\t\t\t\t\t\t\t\t\t\t\tdata: scenarioToCreate.data\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif(uploadedScenarioFiles.length) {\n\t\t\t\t\t\t\t\tdispatch(apiUploadScenarioFiles(uploadedScenarioFiles));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(duplicatedScenarios.length) {\n\t\t\t\t\t\t\t\tdispatch(apiExecuteMultipleMatlabProcessAndPublisResults(_.map(duplicatedScenarios, duplicatedScenario => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tscenario_id: duplicatedScenario.key,\n\t\t\t\t\t\t\t\t\t\tscope_id: Select.scopes.getActiveScopeKey(state),\n\t\t\t\t\t\t\t\t\t\tplace_id: Select.places.getActiveKey(state),\n\t\t\t\t\t\t\t\t\t\tlocalLayer: duplicatedScenario.layerName\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdispatch(actionApiUpdateCasesError('no data returned'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(actionApiUpdateCasesError(response))\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tconsole.log('#### update scenario case error', error);\n\t\t\t\tif (ttl - 1) {\n\t\t\t\t\tdispatch(apiUpdateCases(updates, editedScenarios, ttl - 1));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(actionApiUpdateCasesError(\"scenarios#actions load cases: cases weren't loaded!\"));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n}\n\nfunction apiDeleteCases(cases, ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionApiDeleteCasesRequest(_.map(cases, 'key')));\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/metadata');\n\n\t\tlet payload = {\n\t\t\tdata: {\n\t\t\t\tscenario_cases: _.map(cases, model => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: model.key\n\t\t\t\t\t};\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'DELETE',\n\t\t\tcredentials: 'include',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(payload)\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tconsole.log('#### delete scenario case response', response);\n\t\t\t\tlet contentType = response.headers.get('Content-type');\n\t\t\t\tif (response.ok && contentType && (contentType.indexOf('application/json') !== -1)) {\n\t\t\t\t\treturn response.json().then(data => {\n\t\t\t\t\t\tif (data && data.data && data.data.scenario_cases) {\n\t\t\t\t\t\t\tlet caseKeys = [];\n\t\t\t\t\t\t\tdata.data.scenario_cases.map(scenarioCase => {\n\t\t\t\t\t\t\t\tif (scenarioCase.deleted){\n\t\t\t\t\t\t\t\t\tcaseKeys.push(scenarioCase.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tdispatch(removeCases(caseKeys));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdispatch(apiDeleteCasesError('no data about scenario cases returned'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(apiDeleteCasesError(response))\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tconsole.log('#### delete scenario case error', error);\n\t\t\t\tif (ttl - 1) {\n\t\t\t\t\tdispatch(apiDeleteCases(cases, ttl - 1));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(apiDeleteCasesError(\"scenarios#actions load cases: cases weren't loaded!\"));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n}\n\nfunction apiDeleteCasesError(message){\n\treturn (dispatch) => {\n\t\tdispatch(actionApiDeleteCasesError(message))\n\t}\n}\n\nfunction apiUploadScenarioFiles(scenarios) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/importer/upload');\n\n\t\tlet promises = [];\n\t\tlet scenarioKeys = [];\n\t\tscenarios.forEach((scenario) => {\n\t\t\tif(scenario && scenario.data && scenario.data.file) {\n\t\t\t\tdispatch(apiProcessingScenarioFileStarted(scenario.key));\n\t\t\t\tscenarioKeys.push(scenario.key);\n\t\t\t\tlet postData = new FormData();\n\t\t\t\tpostData.append('file', scenario.data.file);\n\t\t\t\tpromises.push(\n\t\t\t\t\tfetch(\n\t\t\t\t\t\turl,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\t\t\tbody: postData\n\t\t\t\t\t\t}\n\t\t\t\t\t).then((response) => response.json(), error => {dispatch(apiProcessingScenarioFileError(scenario.key, error));})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tscenarioKey: scenario.key,\n\t\t\t\t\t\t\t\tuploadKey: response.data.uploadKey\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(error => {dispatch(apiProcessingScenarioFileError(scenario.key, error));})\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\n\t\tif(promises.length) {\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.then((results) => {\n\t\t\t\t\tdispatch(apiExecutePucsMatlabProcessOnUploadedScenarioFiles(results));\n\t\t\t\t}).catch(error => {dispatch(apiProcessingScenarioFilesError(scenarioKeys, error));});\n\t\t}\n\t}\n}\n\nfunction clearRequestInterval(uuid) {\n\tif (requestIntervals.hasOwnProperty(uuid)) {\n\t\tclearInterval(requestIntervals[uuid]);\n\t}\n}\n\nfunction apiExecuteMultipleMatlabProcessAndPublisResults(processes) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tprocesses = _.isArray(processes) ? processes : [processes];\n\n\t\tprocesses.forEach((process) => {\n\t\t\tif(process.scenario_id) {\n\t\t\t\tdispatch(apiProcessingScenarioFileStarted(process.scenario_id));\n\t\t\t}\n\t\t});\n\n\t\tgetBodyForMatlabProcessesRequest(processes)\n\t\t\t.then((body) => {\n\t\t\t\tlet execute = () => {\n\t\t\t\t\texecuteMatlabProcessRequest(body, localConfig)\n\t\t\t\t\t\t.then((results) => {\n\t\t\t\t\t\t\treturn processMatlabProcessRequestResults(results, dispatch);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((repeat) => {\n\t\t\t\t\t\t\tif(repeat) {\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\texecute();\n\t\t\t\t\t\t\t\t}, 2000);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tconsole.log(`apiExecuteMultipleMatlabProcessAndPublisResults#error`, error);\n\t\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\texecute();\n\t\t\t});\n\t}\n}\n\nfunction processMatlabProcessRequestResults(results, dispatch) {\n\treturn Promise.resolve()\n\t\t.then(() => {\n\t\t\tlet running = false;\n\n\t\t\tresults.data.forEach((resultData) => {\n\t\t\t\tif (resultData.status === \"running\") {\n\t\t\t\t\trunning = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!running) {\n\t\t\t\tlet dataSourcesIds = [];\n\t\t\t\tresults.data.forEach((resultData) => {\n\t\t\t\t\tif (resultData.status === \"done\" && resultData[\"spatial_relations\"]) {\n\t\t\t\t\t\t_.each(resultData['spatial_relations'], (relation) => {\n\t\t\t\t\t\t\tdataSourcesIds.push(relation.data.data_source_id);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tdispatch(SpatialRelationsAction.loadRelationsReceive(resultData['spatial_relations']));\n\t\t\t\t\t\tdispatch(apiProcessingScenarioFileSuccess(resultData.data.scenario_id));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdispatch(SpatialDataSourcesAction.loadFiltered({'id': dataSourcesIds}));\n\t\t\t} else {\n\t\t\t\treturn running;\n\t\t\t}\n\t\t});\n}\n\nfunction executeMatlabProcessRequest(body, localConfig) {\n\treturn fetch(\n\t\tlocalConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/pucs/publish'),\n\t\t{\n\t\t\tmethod: \"POST\",\n\t\t\tcredentials: 'include',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(body)\n\t\t}\n\t).then((response) => {\n\t\tif (response.status === 200) {\n\t\t\treturn response.json();\n\t\t} else {\n\t\t\tthrow new Error('wrong status');\n\t\t}\n\t})\n}\n\nfunction getBodyForMatlabProcessesRequest(processes) {\n\treturn Promise.resolve()\n\t\t.then(() => {\n\t\t\treturn {\n\t\t\t\tdata: _.map(processes, (process) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tuuid: utils.uuid(),\n\t\t\t\t\t\tdata: process\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t};\n\t\t});\n}\n\nfunction apiExecutePucsMatlabProcessOnUploadedScenarioFiles(uploads) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/pucs/execute_matlab');\n\t\tlet state = getState();\n\n\t\tlet scenarioKeys = [];\n\t\tuploads.forEach((upload) => {\n\t\t\tscenarioKeys.push(upload.scenarioKey);\n\t\t\tlet uuid = utils.uuid();\n\t\t\tlet requestAttempt = () => {\n\t\t\t\tfetch(url, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuploadKey: upload.uploadKey,\n\t\t\t\t\t\t\tplaceId: Select.places.getActiveKey(state),\n\t\t\t\t\t\t\tscopeId: Select.scopes.getActiveScopeKey(state)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}).then((response) => {\n\t\t\t\t\treturn response.json().then(data => {\n\t\t\t\t\t\tif(!response.ok || (data.hasOwnProperty('success') && !data.success)) {\n\t\t\t\t\t\t\tclearRequestInterval(uuid);\n\t\t\t\t\t\t\tdispatch(apiProcessingScenarioFilesError(scenarioKeys, response.statusText));\n\t\t\t\t\t\t} else if (data.result) {\n\t\t\t\t\t\t\tclearRequestInterval(uuid);\n\t\t\t\t\t\t\tdispatch(apiCreateRelationsForScenarioProcessResults([{\n\t\t\t\t\t\t\t\tscenarioKey: upload.scenarioKey,\n\t\t\t\t\t\t\t\tprocessResults: JSON.parse(data.result)\n\t\t\t\t\t\t\t}]));\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\tclearRequestInterval(uuid);\n\t\t\t\t\t\tdispatch(apiProcessingScenarioFilesError(scenarioKeys, error));\n\t\t\t\t\t});\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tclearRequestInterval(uuid);\n\t\t\t\t\tdispatch(apiProcessingScenarioFilesError(scenarioKeys, error));\n\t\t\t\t});\n\t\t\t};\n\n\t\t\trequestAttempt();\n\t\t\trequestIntervals[uuid] = setInterval(() => {\n\t\t\t\trequestAttempt();\n\t\t\t}, 5000);\n\t\t});\n\t}\n}\n\n\nfunction apiCreateRelationsForScenarioProcessResults(results) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tlet url = localConfig.apiBackendProtocol + '://' + path.join(localConfig.apiBackendHost, localConfig.apiBackendPath, 'backend/rest/relations');\n\n\t\tlet activePlace = Select.places.getActive(getState());\n\n\t\tlet activePlaceKey = activePlace ? activePlace.key : null;\n\n\t\tlet inputVectorTemplateId, outputRasterHwdTemplateId, outputRasterUhiTemplateId;\n\t\tlet configuration = Select.scopes.getActiveScopeConfiguration(getState());\n\t\tif (configuration.pucsLandUseScenarios && configuration.pucsLandUseScenarios.templates){\n\t\t\tlet templates = configuration.pucsLandUseScenarios.templates;\n\t\t\tinputVectorTemplateId = templates.sourceVector;\n\t\t\toutputRasterHwdTemplateId = templates.hwd;\n\t\t\toutputRasterUhiTemplateId = templates.uhi;\n\t\t} else {\n\t\t\tconsole.error(\"Scenarios actions#apiCreateRelationsForScenarioProcessResults: pucsLandUseScenarios configuration is missing!\")\n\t\t}\n\n\t\tlet relations = [];\n\t\tlet scenarioKeys = [];\n\n\t\tresults.forEach((result) => {\n\t\t\tif(activePlaceKey && result.scenarioKey) {\n\t\t\t\tscenarioKeys.push(result.scenarioKey);\n\t\t\t\tlet inputVectors = result.processResults[0].inputVectors;\n\t\t\t\tlet outputRasters = result.processResults[0].outputRasters;\n\n\t\t\t\tlet inputVector = inputVectors[0];\n\t\t\t\tlet outputHwd = _.find(outputRasters, {indicator: 'hwd'});\n\t\t\t\tlet outputUhi = _.find(outputRasters, {indicator: 'uhi'});\n\n\t\t\t\tif(inputVector && outputHwd && outputUhi) {\n\t\t\t\t\trelations.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tplace_id: Number(activePlaceKey),\n\t\t\t\t\t\t\t\tscenario_id: Number(result.scenarioKey),\n\t\t\t\t\t\t\t\tlayer_template_id: inputVectorTemplateId,\n\t\t\t\t\t\t\t\tdata_source_id: inputVector.spatialDataSourceId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\trelations.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tplace_id: Number(activePlaceKey),\n\t\t\t\t\t\t\t\tscenario_id: Number(result.scenarioKey),\n\t\t\t\t\t\t\t\tlayer_template_id: outputRasterHwdTemplateId,\n\t\t\t\t\t\t\t\tdata_source_id: outputHwd.spatialDataSourceId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\trelations.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tplace_id: Number(activePlaceKey),\n\t\t\t\t\t\t\t\tscenario_id: Number(result.scenarioKey),\n\t\t\t\t\t\t\t\tlayer_template_id: outputRasterUhiTemplateId,\n\t\t\t\t\t\t\t\tdata_source_id: outputUhi.spatialDataSourceId\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(relations.length) {\n\t\t\treturn fetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\"data\": {\"spatial\": relations}})\n\t\t\t}).then((relationResults) => relationResults.json())\n\t\t\t\t.then((relationResults) => {\n\t\t\t\t\tif (relationResults.data.spatial){\n\t\t\t\t\t\t// todo why there are data apart of key, while in SpatialRelationsAction.load response are not?\n\t\t\t\t\t\tlet dataSourcesIds = _.compact(\n\t\t\t\t\t\t\t_.map(relationResults.data.spatial, (spatialRelation) => {\n\t\t\t\t\t\t\t\treturn spatialRelation.data.data_source_id;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdispatch(SpatialRelationsAction.loadRelationsReceive(relationResults.data.spatial));\n\t\t\t\t\t\tdispatch(SpatialDataSourcesAction.loadFiltered({'id': dataSourcesIds}));\n\n\t\t\t\t\t\tdispatch(apiProcessingScenarioFilesSuccess(scenarioKeys));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdispatch(apiProcessingScenarioFilesError(scenarioKeys, \"Relations were not loaded\"));\n\t\t\t\t\t}\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tdispatch(apiProcessingScenarioFilesError(scenarioKeys, error));\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nfunction apiProcessingScenarioFileStarted(scenarioKey){\n\treturn (dispatch, getState) => {\n\t\tlet scenario = Select.scenarios.scenarios.getByKey(getState(), scenarioKey);\n\t\tif (scenario){\n\t\t\tlet updated = {...scenario, fileProcessing: {started: true}};\n\t\t\tdispatch(actionApiProcessingScenarioFileStarted([updated]));\n\t\t}\n\t};\n}\n\nfunction apiProcessingScenarioFilesSuccess(scenarioKeys){\n\treturn (dispatch, getState) => {\n\t\tscenarioKeys.forEach(key => {\n\t\t\tdispatch(apiProcessingScenarioFileSuccess(key));\n\t\t});\n\t};\n}\n\nfunction apiProcessingScenarioFilesError(scenarioKeys, message){\n\treturn (dispatch, getState) => {\n\t\tscenarioKeys.forEach(key => {\n\t\t\tdispatch(apiProcessingScenarioFileError(key, message));\n\t\t});\n\t};\n}\n\nfunction apiProcessingScenarioFileSuccess(scenarioKey){\n\treturn (dispatch, getState) => {\n\t\tlet scenario = Select.scenarios.scenarios.getByKey(getState(), scenarioKey);\n\t\tif (scenario){\n\t\t\tlet updated = {...scenario, fileProcessing: {started: true, finished: true}};\n\t\t\tdispatch(actionApiProcessingScenarioFileSuccess([updated]));\n\t\t}\n\t};\n}\n\nfunction apiProcessingScenarioFileError(scenarioKey, error){\n\treturn (dispatch, getState) => {\n\t\tlet scenario = Select.scenarios.scenarios.getByKey(getState(), scenarioKey);\n\t\tif (scenario){\n\t\t\tlet updated = {...scenario, fileProcessing: {started: true, finished: true, error: true, message: error}};\n\t\t\tdispatch(actionApiProcessingScenarioFileError([updated]));\n\t\t\tconsole.error('Scenarios/actions#apiProcessingScenarioFileError', error);\n\t\t}\n\t};\n}\n\nfunction apiCreateCasesReceive(data) {\n\treturn (dispatch, getState) => {\n\t\tlet cases = data.scenario_cases;\n\t\tlet scenarios = data.scenarios;\n\n\t\t// add to data\n\t\tdispatch(loadCasesReceive(cases));\n\t\tdispatch(apiCreateScenariosReceive(scenarios));\n\n\t\t// change active key if of temporary case\n\t\tlet activeCaseKey = Select.scenarios.cases.getActiveKey(getState());\n\t\tif (activeCaseKey) {\n\t\t\tlet activeCaseCreated = _.find(cases, {uuid: activeCaseKey});\n\t\t\tif (activeCaseCreated) {\n\t\t\t\tdispatch(actionSetActiveCase(activeCaseCreated.id));\n\t\t\t}\n\t\t}\n\t\t// remove from editedData\n\t\tdispatch(actionRemoveEditedCases(_.map(cases, 'uuid')));\n\t};\n}\n\nfunction apiUpdateCasesReceive(data) {\n\treturn dispatch => {\n\t\tlet cases = data.scenario_cases;\n\t\tlet scenarios = data.scenarios;\n\n\t\tif (scenarios.length){\n\t\t\t// remove from editedData\n\t\t\tdispatch(removeActiveCaseEditedScenarios());\n\t\t\t// add/update data\n\t\t\tdispatch(loadReceive(scenarios));\n\t\t}\n\n\t\tdispatch(loadCasesReceive(cases));\n\t\tdispatch(actionRemoveActiveCaseFromEdited());\n\t};\n}\n\nfunction apiCreateScenariosReceive(data) {\n\treturn (dispatch, getState) => {\n\n\t\t// add to data\n\t\tdispatch(loadReceive(data));\n\n\t\t// change keys in (edited) cases\n\t\tlet editedCases = Select.scenarios.cases.getEditedAll(getState());\n\t\tlet updates = [];\n\t\t_.each(editedCases, editedCase => {\n\t\t\tlet scenariosChanged;\n\t\t\tlet newScenarios = _.map(editedCase.data.scenarios, scenarioKey => {\n\t\t\t\tlet createdScenario = _.find(data, {'uuid': scenarioKey});\n\t\t\t\tif (createdScenario) {\n\t\t\t\t\tscenariosChanged = true;\n\t\t\t\t\treturn createdScenario.id;\n\t\t\t\t} else {\n\t\t\t\t\treturn scenarioKey;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (scenariosChanged) {\n\t\t\t\tupdates.push({\n\t\t\t\t\tkey: editedCase.key,\n\t\t\t\t\tdata: {'scenarios': newScenarios}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tif (updates.length) {\n\t\t\tdispatch(actionUpdateEditedCases(updates));\n\t\t}\n\n\t\t// remove from editedData\n\t\tdispatch(removeActiveCaseEditedScenarios());\n\t};\n}\n\n// ============ actions ===========\n\nfunction actionSetActive(scenario) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_SET_ACTIVE,\n\t\tdata: scenario\n\t}\n}\n\nfunction actionSetActiveKeys(scenarios) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_SET_ACTIVE_MULTI,\n\t\tkeys: scenarios\n\t}\n}\n\nfunction actionSetActiveCase(caseKey) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_SET_ACTIVE,\n\t\tkey: caseKey\n\t}\n}\n\nfunction actionSetDefaultSituationActive(active) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE,\n\t\tactive: active\n\t}\n}\n\nfunction actionUpdateCases(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_UPDATE,\n\t\tdata: data\n\t}\n}\n\nfunction actionLoadRequest(caseKey) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_REQUEST,\n\t\tcaseKey: caseKey\n\t}\n}\n\nfunction actionLoadReceive(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_RECEIVE,\n\t\tdata: data\n\t}\n}\n\nfunction actionLoadError(error) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_REQUEST_ERROR,\n\t\terror: error\n\t}\n}\n\nfunction actionLoadCasesRequest() {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_REQUEST\n\t}\n}\n\nfunction actionLoadCasesReceive(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_RECEIVE,\n\t\tdata: data\n\t}\n}\n\nfunction actionLoadCasesError(error) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_REQUEST_ERROR,\n\t\terror: error\n\t}\n}\n\nfunction actionUpdateEditedCases(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_EDITED_UPDATE,\n\t\tdata: data\n\t}\n}\nfunction actionUpdateEditedScenarios(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_EDITED_UPDATE,\n\t\tdata: data\n\t}\n}\nfunction actionRemoveActiveCaseFromEdited() {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_EDITED_REMOVE_ACTIVE,\n\t}\n}\nfunction actionRemoveCases(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_REMOVE,\n\t\tkeys: keys\n\t}\n}\nfunction actionRemoveEditedCases(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_EDITED_REMOVE,\n\t\tkeys: keys\n\t}\n}\nfunction actionRemovePropertyFromEditedCase(caseKey, property) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_EDITED_REMOVE_PROPERTY,\n\t\tcaseKey: caseKey,\n\t\tproperty: property\n\t}\n}\nfunction actionRemoveEditedScenarios(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_EDITED_REMOVE,\n\t\tkeys: keys\n\t}\n}\n\nfunction actionRemovePropertyFromEditedScenario(scenarioKey, property) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_EDITED_REMOVE_PROPERTY,\n\t\tscenarioKey: scenarioKey,\n\t\tproperty: property\n\t}\n}\n\nfunction actionApiCreateCasesRequest(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_API_CREATE_REQUEST,\n\t\tkeys: keys\n\t}\n}\n\nfunction actionApiCreateCasesError(error) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_API_CREATE_ERROR,\n\t\terror: error\n\t}\n}\n\nfunction actionApiDeleteCasesRequest(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_API_DELETE_REQUEST,\n\t\tkeys: keys\n\t}\n}\n\nfunction actionApiDeleteCasesError(error) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_API_DELETE_REQUEST,\n\t\terror: error\n\t}\n}\n\nfunction actionApiUpdateCasesRequest(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_API_UPDATE_REQUEST,\n\t\tkeys: keys\n\t}\n}\n\nfunction actionApiUpdateCasesError(keys) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_CASES_API_UPDATE_ERROR,\n\t\tkeys: keys\n\t}\n}\n\nfunction actionApiProcessingScenarioFileStarted(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_API_PROCESSING_FILE_STARTED,\n\t\tdata: data,\n\t}\n}\n\nfunction actionApiProcessingScenarioFileSuccess(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_API_PROCESSING_FILE_SUCCESS,\n\t\tdata: data,\n\t}\n}\n\nfunction actionApiProcessingScenarioFileError(data) {\n\treturn {\n\t\ttype: ActionTypes.SCENARIOS_API_PROCESSING_FILE_ERROR,\n\t\tdata: data,\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tadd: add,\n\tsetActive: actionSetActive,\n\tremoveEditedActiveCase: actionRemoveActiveCaseFromEdited,\n\n\tapplyDataviewSettings: applyDataviewSettings,\n\tsetDefaultSituationActive: actionSetDefaultSituationActive,\n\n\taddActiveScenario: addActiveScenario,\n\tremoveActiveScenario: removeActiveScenario,\n\n\tdeleteActiveCase: deleteActiveCase,\n\tsaveActiveCase: saveActiveCase,\n\tsetActiveCase: setActiveCase,\n\n\tload: load,\n\tloadCases: loadCases,\n\n\taddEditedScenario: addEditedScenario,\n\tremoveActiveCaseEditedScenarios: removeActiveCaseEditedScenarios,\n\n\tremoveScenarioFromActiveCase: removeScenarioFromActiveCase,\n\tremoveScenarioFromActiveCaseEdited: removeScenarioFromActiveCaseEdited,\n\n\tupdateEditedActiveCase: updateEditedActiveCase,\n\tupdateEditedScenario: updateEditedScenario,\n\tupdateStateFromView,\n}\n\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport common from '../_common/actions';\nimport attributeRelationsActions from '../AttributeRelations/actions';\nimport _ from \"lodash\";\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.SCOPES);\nconst create = common.create(Select.scopes.getSubstate, 'scopes', ActionTypes.SCOPES);\nconst deleteItem = common.delete(Select.scopes.getSubstate, 'scopes', ActionTypes.SCOPES);\nconst saveEdited = common.saveEdited(Select.scopes.getSubstate, 'scopes', ActionTypes.SCOPES);\nconst updateEdited = common.updateEdited(Select.scopes.getSubstate, ActionTypes.SCOPES);\nconst useKeys = common.useKeys(Select.scopes.getSubstate, 'scopes', ActionTypes.SCOPES);\nconst useKeysClear = common.useKeysClear(ActionTypes.SCOPES);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.SCOPES);\nconst useIndexed = common.useIndexed(Select.scopes.getSubstate, 'scopes', ActionTypes.SCOPES);\nconst refreshUses = common.refreshUses(Select.scopes.getSubstate, `scopes`, ActionTypes.SCOPES);\nconst setActiveKeyAndEnsureDependencies = common.setActiveKeyAndEnsureDependencies(ActionTypes.SCOPES, 'scope');\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.scopes.getSubstate, 'scopes', ActionTypes.SCOPES);\n\nfunction setActiveKey(key) {\n\treturn (dispatch, getState) => {\n\t\tdispatch(setActiveKeyAndEnsureDependencies(key));\n\n\t\t// TODO move somewhere else (probably after implementing areas)\n\t\tlet activeScope = Select.scopes.getActive(getState());\n\t\tif (activeScope && activeScope.data && activeScope.data.configuration && activeScope.data.configuration.areaNameAttributeKey) {\n\t\t\tdispatch(attributeRelationsActions.ensureIndexedSpecific({scopeKey: key, attributeKey: activeScope.data.configuration.areaNameAttributeKey}, null, 1, 10, 'scopes.actions#setActiveScope', true));\n\t\t}\n\n\t\t//load filter countries\n\t\tif (activeScope && activeScope.data && activeScope.data.configuration && activeScope.data.configuration.countryCodeAttributeKey) {\n\t\t\tdispatch(attributeRelationsActions.ensureIndexedSpecific({scopeKey: key, attributeKey: activeScope.data.configuration.countryCodeAttributeKey}, null, 1, 10, 'scopes.actions#setActiveScope', true));\n\t\t}\n\t};\n}\n\nfunction updateStateFromView(data) {\n\treturn dispatch => {\n\t\tif (data) {\n\t\t\tif (data && data.byKey) {\n\t\t\t\tdispatch(add(_.values(data.byKey)));\n\t\t\t}\n\n\t\t\tif (data && data.activeKey) {\n\t\t\t\tdispatch(setActiveKey(data.activeKey));\n\t\t\t}\n\t\t}\n\t};\n}\n\n// ============ actions ===========\n\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\n\trefreshUses,\n\n\tsaveEdited,\n\tsetActiveKey,\n\n\tupdateEdited,\n\tupdateStateFromView,\n\tuseIndexed,\n\tuseIndexedClear,\n\tuseKeys,\n\tuseKeysClear,\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nlet timeouts = {};\n\n// ============ creators ===========\nfunction addOrUpdate (setKey, lineage, width, minActiveWidth, component, props) {\n\treturn (dispatch, getState) => {\n\t\tlet existingScreen = Select.screens.getScreenByLineage(getState(), lineage);\n\n\t\tif (existingScreen) {\n\t\t\tif (timeouts[lineage]) {\n\t\t\t\tclearTimeout(timeouts[lineage]);\n\t\t\t}\n\t\t\tdispatch(actionUpdate(\n\t\t\t\tsetKey,\n\t\t\t\tlineage,\n\t\t\t\t{\n\t\t\t\t\twidth,\n\t\t\t\t\tminActiveWidth,\n\t\t\t\t\tdesiredState: 'opening',\n\t\t\t\t\tcomponent,\n\t\t\t\t\tprops\n\t\t\t\t})\n\t\t\t);\n\t\t} else {\n\t\t\tdispatch(actionAdd(\n\t\t\t\tsetKey,\n\t\t\t\tlineage,\n\t\t\t\t{\n\t\t\t\t\twidth,\n\t\t\t\t\tminActiveWidth,\n\t\t\t\t\tdesiredState: 'opening',\n\t\t\t\t\tcomponent,\n\t\t\t\t\tprops\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\t// TODO timeout is necessary to actually trigger associated selectors twice\n\t\tsetTimeout(() => {\n\t\t\tdispatch(open(setKey, lineage));\n\t\t}, 1);\n\t};\n}\n\nfunction ensureSet(setKey) {\n\treturn (dispatch, getState) => {\n\t\tlet existingSet = Select.screens.getSetByKey(getState(), setKey);\n\t\tif (!existingSet) {\n\t\t\tdispatch(actionAddSet(setKey));\n\t\t}\n\t}\n}\n\nfunction open(setKey, screenLineage) {\n\treturn (dispatch, getState) => {\n\t\tif (screenLineage !== 'base') {\n\t\t\tdispatch(actionOpen(setKey, screenLineage));\n\t\t}\n\t\tdispatch(actionTopHistory(setKey, screenLineage));\n\t};\n}\n\nfunction close(setKey, screenLineage) {\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionClose(setKey, screenLineage));\n\t\tdispatch(actionTopHistory(setKey, screenLineage));\n\n\t\ttimeouts[screenLineage] = setTimeout(() => {\n\t\t\tdispatch(actionRemove(setKey, screenLineage))\n\t\t}, 550);\n\t};\n}\n\nfunction removeAllScreensFromSet(setKey) {\n\treturn (dispatch) => {\n\t\tdispatch(actionRemoveAllScreensFromSet(setKey));\n\t};\n}\n\nfunction retract(setKey, screenLineage) {\n\treturn (dispatch, getState) => {\n\t\tdispatch(actionRetract(setKey, screenLineage));\n\t\tdispatch(actionTopHistory(setKey, screenLineage));\n\t};\n}\n\nfunction topHistory(setKey, screenLineage) {\n\treturn (dispatch) => {\n\t\tdispatch(ensureSet(setKey));\n\t\tdispatch(actionTopHistory(setKey, screenLineage));\n\t};\n}\n\n// ============ actions ===========\nconst actionAdd = (setKey, lineage, data) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.ADD,\n\t\tsetKey,\n\t\tlineage,\n\t\tdata\n\t}\n};\n\nconst actionAddSet = (setKey) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.SETS.ADD,\n\t\tsetKey\n\t}\n};\n\nconst actionOpen = (setKey, lineage) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.OPEN,\n\t\tsetKey,\n\t\tlineage\n\t}\n};\n\nconst actionClose = (setKey, lineage) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.CLOSE,\n\t\tsetKey,\n\t\tlineage\n\t}\n};\n\nconst actionRemove = (setKey, lineage) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.REMOVE,\n\t\tsetKey,\n\t\tlineage\n\t}\n};\n\nconst actionRemoveAllScreensFromSet = (setKey) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.REMOVE_ALL,\n\t\tsetKey\n\t}\n};\n\nconst actionRetract = (setKey, lineage) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.RETRACT,\n\t\tsetKey,\n\t\tlineage\n\t}\n};\n\nconst actionTopHistory = (setKey, lineage) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.TOP_HISTORY,\n\t\tsetKey,\n\t\tlineage\n\t}\n};\n\nconst actionUpdate = (setKey, lineage, data) => {\n\treturn {\n\t\ttype: ActionTypes.SCREENS.UPDATE,\n\t\tsetKey,\n\t\tlineage,\n\t\tdata\n\t}\n};\n\n\n// ============ export ===========\n\nexport default {\n\taddOrUpdate,\n\taddSet: actionAddSet,\n\tclose,\n\topen,\n\tremoveAllScreensFromSet,\n\tretract,\n\ttopHistory\n}","import ActionTypes from '../../constants/ActionTypes';\nimport _ from 'lodash';\n\n// ============ creators ===========\nconst add = (data) => {\n\treturn (dispatch) => {\n\t\tif (!_.isArray(data)) data = [data];\n\t\tdispatch(actionAdd(data));\n\t}\n};\n\nconst remove = (keys) => {\n\treturn (dispatch) => {\n\t\tif (!_.isArray(keys)) keys = [keys];\n\n\t\tdispatch(actionRemove(keys));\n\t}\n};\n\nconst createMapSnapshot = () => {\n\treturn (dispatch) => {\n\t\twindow.Stores.generateSnapshot().then(snapshots => {\n\t\t\tsnapshots.forEach(snapshot => {\n                dispatch(add({\n\t\t\t\t\tkey: snapshot.uuid,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: snapshot.name,\n\t\t\t\t\t\ttype: \"map\",\n\t\t\t\t\t\tsource: snapshot.source\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t});\n\t\t});\n\t}\n};\n\n// ============ actions ===========\nfunction actionAdd(data){\n\treturn {\n\t\ttype: ActionTypes.SNAPSHOTS_ADD,\n\t\tdata: data\n\t}\n}\n\nfunction actionRemove(keys){\n\treturn {\n\t\ttype: ActionTypes.SNAPSHOTS_REMOVE,\n\t\tkeys: keys\n\t}\n}\n\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tremove,\n\tcreateMapSnapshot\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport common from '../_common/actions';\n\n// ============ creators ===========\n\nconst create = common.create(Select.tags.getSubstate, 'tags', ActionTypes.TAGS);\nconst deleteItem = common.delete(Select.tags.getSubstate, 'tags', ActionTypes.TAGS);\nconst saveEdited = common.saveEdited(Select.tags.getSubstate, 'tags', ActionTypes.TAGS);\nconst updateEdited = common.updateEdited(Select.tags.getSubstate, ActionTypes.TAGS);\nconst useKeys = common.useKeys(Select.tags.getSubstate, 'tags', ActionTypes.TAGS);\nconst useKeysClear = common.useKeysClear(ActionTypes.TAGS);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.TAGS);\nconst useIndexed = common.useIndexed(Select.tags.getSubstate, 'tags', ActionTypes.TAGS);\nconst refreshUses = common.refreshUses(Select.tags.getSubstate, `tags`, ActionTypes.TAGS);\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.tags.getSubstate, 'tags', ActionTypes.TAGS);\n\n// ============ actions ===========\n\n// ============ export ===========\n\nexport default {\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\tsaveEdited,\n\tupdateEdited,\n\tuseKeys,\n\tuseKeysClear,\n\trefreshUses,\n\tuseIndexed,\n\tuseIndexedClear,\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport _ from 'lodash';\nimport path from \"path\";\nimport fetch from \"isomorphic-fetch\";\n\nimport request from \"../_common/request\";\n\nimport common from '../_common/actions';\nimport Select from \"../Select\";\n\nimport ScopesAction from '../Scopes/actions';\nimport PlacesAction from '../Places/actions';\nimport PeriodsAction from '../Periods/actions';\n\nconst TTL = 5;\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.USERS);\nconst setActiveKey = common.setActiveKey(ActionTypes.USERS);\nconst refreshUses = () => (dispatch) => {\n\tdispatch(common.refreshUses(Select.users.getSubstate, 'users', ActionTypes.USERS, 'user')());\n\tdispatch(common.refreshUses(Select.users.getGroupsSubstate, 'groups', ActionTypes.USERS.GROUPS, 'user')());\n};\nconst useKeys = common.useKeys(Select.users.getSubstate, 'users', ActionTypes.USERS, 'user');\nconst useKeysClear = common.useKeysClear(ActionTypes.USERS);\nconst useIndexedUsers = common.useIndexed(Select.users.getSubstate, 'users', ActionTypes.USERS, 'user');\nconst useIndexedGroups = common.useIndexed(Select.users.getGroupsSubstate, 'groups', ActionTypes.USERS.GROUPS, 'user');\n\nfunction onLogin() {\n\treturn (dispatch) => {\n\t\tdispatch(common.actionDataSetOutdated());\n\t\tdispatch(apiLoadCurrentUser());\n\n\t\tdispatch(ScopesAction.refreshUses());\n\t\tdispatch(PlacesAction.refreshUses());\n\t\tdispatch(PeriodsAction.refreshUses());\n\t\tdispatch(refreshUses());\n\t}\n}\n\nfunction onLogout() {\n\treturn (dispatch) => {\n\t\tdispatch(actionLogout());\n\t\tdispatch(setActiveKey(null));\n\n\t\tdispatch(ScopesAction.refreshUses());\n\t\tdispatch(PlacesAction.refreshUses());\n\t\tdispatch(PeriodsAction.refreshUses());\n\t\tdispatch(refreshUses());\n\t}\n}\n\nfunction apiLoginUser(email, password) {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tdispatch(actionApiLoginRequest());\n\n\t\tlet payload = {\n\t\t\tusername: email,\n\t\t\tpassword: password\n\t\t};\n\n\t\treturn request(localConfig, 'backend/api/login/login', 'POST', null, payload)\n\t\t\t.then(result => {\n\t\t\t\tif (result.data.status === \"ok\") {\n\t\t\t\t\tdispatch(onLogin());\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(common.actionGeneralError(error));\n\t\t\t\treturn error;\n\t\t\t});\n\t};\n}\n\n// function apiLoad(ttl) {\n// \tif (_.isUndefined(ttl)) ttl = TTL;\n// \treturn (dispatch, getState) => {\n// \t\tlet state = getState();\n// \t\tif (state.users.loading) {\n// \t\t\t// already loading, do nothing\n// \t\t} else {\n// \t\t\tdispatch(actionApiLoadRequest());\n//\n// \t\t\tlet url = config.apiBackendProtocol + '://' + path.join(config.apiBackendHost, 'backend/rest/user');\n//\n// \t\t\treturn fetch(url, {\n// \t\t\t\tmethod: 'GET',\n// \t\t\t\tcredentials: 'include',\n// \t\t\t\theaders: {\n// \t\t\t\t\t'Content-Type': 'application/json',\n// \t\t\t\t\t'Accept': 'application/json'\n// \t\t\t\t}\n// \t\t\t}).then(\n// \t\t\t\tresponse => {\n// \t\t\t\t\tlet contentType = response.headers.get('Content-type');\n// \t\t\t\t\tif (response.ok && contentType && (contentType.indexOf('application/json') !== -1)) {\n// \t\t\t\t\t\treturn response.json().then(data => {\n// \t\t\t\t\t\t\tPromise.all(data.data.map(user => {\n// \t\t\t\t\t\t\t\treturn new User({data: user}).then(user => {\n// \t\t\t\t\t\t\t\t\tuser.key = user.id;\n// \t\t\t\t\t\t\t\t\treturn user;\n// \t\t\t\t\t\t\t\t});\n// \t\t\t\t\t\t\t})).then(users => {\n// \t\t\t\t\t\t\t\tdispatch(actionAdd(users));\n// \t\t\t\t\t\t\t});\n// \t\t\t\t\t\t});\n// \t\t\t\t\t} else {\n// \t\t\t\t\t\tdispatch(actionApiLoadRequestError('scopes#action Problem with loading scopes.'));\n// \t\t\t\t\t}\n// \t\t\t\t},\n// \t\t\t\terror => {\n// \t\t\t\t\tif (ttl - 1) {\n// \t\t\t\t\t\tdispatch(apiLoad(ttl - 1));\n// \t\t\t\t\t} else {\n// \t\t\t\t\t\tdispatch(actionApiLoadRequestError('scopes#action Problem with loading scopes.'));\n// \t\t\t\t\t}\n// \t\t\t\t}\n// \t\t\t);\n// \t\t}\n// \t};\n// }\n\nfunction apiLoadCurrentUser() {\n\treturn (dispatch, getState) => {\n\t\tconst localConfig = Select.app.getCompleteLocalConfiguration(getState());\n\t\tdispatch(actionApiLoadCurrentUserRequest());\n\n\t\treturn request(localConfig,'backend/rest/user/current', 'GET', null, null)\n\t\t\t.then(result => {\n\t\t\t\tif (result.errors) { //todo how do we return errors here?\n\t\t\t\t\tthrow new Error(result.errors);\n\t\t\t\t} else {\n\t\t\t\t\tif (result.key === 0) {\n\t\t\t\t\t\t// no logged in user = guest\n\t\t\t\t\t\tdispatch(actionAddGroups(transformGroups(result.groups)));\n\t\t\t\t\t} else if (result.key) {\n\t\t\t\t\t\t// logged in user\n\t\t\t\t\t\tdispatch(setActiveKey(result.key));\n\t\t\t\t\t\tdispatch(add(transformUser(result)));\n\t\t\t\t\t\tdispatch(actionAddGroups(transformGroups(result.groups)));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tdispatch(common.actionGeneralError(error));\n\t\t\t\treturn error;\n\t\t\t});\n\n\t};\n}\n\nfunction apiLogoutUser(ttl) {\n\tif (_.isUndefined(ttl)) ttl = TTL;\n\treturn (dispatch, getState) => {\n\t\tconst apiBackendProtocol = Select.app.getLocalConfiguration(getState(), 'apiBackendProtocol');\n\t\tconst apiBackendHost = Select.app.getLocalConfiguration(getState(), 'apiBackendHost');\n\t\tdispatch(actionApiLogoutRequest());\n\n\t\tlet url = apiBackendProtocol + '://' + path.join(apiBackendHost, 'backend/api/login/logout');\n\n\t\treturn fetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\tcredentials: 'include',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Accept': 'application/json'\n\t\t\t}\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tconsole.log('#### logout user response', response);\n\t\t\t\tif (response.ok) {\n\t\t\t\t\t// window.location.reload();\n\t\t\t\t\tdispatch(onLogout());\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(actionApiLogoutRequestError('user#action logout Problem with logging out the User, please try later.'));\n\t\t\t\t}\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tconsole.log('#### logout user error', error);\n\t\t\t\tif (ttl - 1) {\n\t\t\t\t\tdispatch(apiLogoutUser(ttl - 1));\n\t\t\t\t} else {\n\t\t\t\t\tdispatch(actionApiLogoutRequestError('user#action logout Problem with logging out the User, please try later.'));\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n}\n\n// ============ helpers ===========\n\nfunction transformUser(user) {\n\treturn {\n\t\t...user,\n\t\t//TODO remove -> workaround with permissions.guest.get\n\t\tpermissions: {...user.permissions, guest: {get: false}},\n\t\tgroups: _.map(user.groups, 'key'),\n\n\t}\n}\n//TODO remove -> workaround with permissions.guest.get\nfunction transformGroups(groups) {\n\treturn groups.map(group => ({...group, permissions: {guest: {get: false}}}))\n}\n\n// ============ actions ===========\n\nfunction actionClearUsersUseIndexed(componentId) {\n\treturn {\n\t\ttype: ActionTypes.USERS.USE.INDEXED.CLEAR,\n\t\tcomponentId\n\t}\n}\n\nfunction actionClearGroupsUseIndexed(componentId) {\n\treturn {\n\t\ttype: ActionTypes.USERS.GROUPS.USE.INDEXED.CLEAR,\n\t\tcomponentId\n\t}\n}\n\nfunction actionAddGroups(groups) {\n\treturn {\n\t\ttype: ActionTypes.USERS.GROUPS.ADD,\n\t\tdata: groups\n\t}\n}\n\nfunction actionApiLogoutRequest() {\n\treturn {\n\t\ttype: ActionTypes.USERS_LOGOUT_REQUEST\n\t}\n}\n\nfunction actionApiLogoutRequestError(error) {\n\treturn {\n\t\ttype: ActionTypes.USERS_LOGOUT_REQUEST_ERROR,\n\t\terror: error\n\t}\n}\n\nfunction actionApiLoadRequest() {\n\treturn {\n\t\ttype: ActionTypes.USERS_LOAD_REQUEST\n\t}\n}\n\nfunction actionApiLoadRequestError(error) {\n\treturn {\n\t\ttype: ActionTypes.USERS_LOAD_REQUEST_ERROR,\n\t\terror: error\n\t}\n}\n\nfunction actionApiLoginRequest() {\n\treturn {\n\t\ttype: ActionTypes.USERS.LOGIN.REQUEST\n\t}\n}\n\nfunction actionApiLoadCurrentUserRequest() {\n\treturn {\n\t\ttype: ActionTypes.USERS.CURRENT.REQUEST\n\t}\n}\n\nfunction actionLogout() {\n\treturn {\n\t\ttype: ActionTypes.COMMON.DATA.CLEANUP_ON_LOGOUT\n\t}\n}\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\t// apiLoad: apiLoad,\n\tapiLoadCurrentUser: apiLoadCurrentUser,\n\tapiLoginUser: apiLoginUser,\n\tapiLogoutUser: apiLogoutUser,\n\trefreshUses,\n\tuseKeys,\n\tuseKeysClear,\n\tuseIndexedUsers,\n\tuseIndexedGroups,\n\tuseIndexedUsersClear: actionClearUsersUseIndexed,\n\tuseIndexedGroupsClear: actionClearGroupsUseIndexed,\n\t// update: update\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\nimport common from '../_common/actions';\nimport _ from \"lodash\";\n\n// ============ creators ===========\n\nconst add = common.add(ActionTypes.VIEWS);\nconst setActiveKey = common.setActiveKey(ActionTypes.VIEWS);\nconst setActiveKeys = common.setActiveKeys(ActionTypes.VIEWS);\nconst create = common.create(Select.views.getSubstate, 'views', ActionTypes.VIEWS, 'views');\nconst deleteItem = common.delete(Select.views.getSubstate, 'views', ActionTypes.VIEWS, 'views');\nconst saveEdited = common.saveEdited(Select.views.getSubstate, 'views', ActionTypes.VIEWS, 'views');\nconst updateEdited = common.updateEdited(Select.views.getSubstate, ActionTypes.VIEWS, 'views');\nconst useKeys = common.useKeys(Select.views.getSubstate, 'views', ActionTypes.VIEWS, 'views');\nconst useKeysClear = common.useKeysClear(ActionTypes.VIEWS);\nconst useIndexedClear = common.useIndexedClear(ActionTypes.VIEWS);\nconst useIndexed = common.useIndexed(Select.views.getSubstate, 'views', ActionTypes.VIEWS, 'views');\nconst refreshUses = common.refreshUses(Select.views.getSubstate, `views`, ActionTypes.VIEWS, 'views');\nconst ensureIndexesWithFilterByActive = common.ensureIndexesWithFilterByActive(Select.views.getSubstate, 'views', ActionTypes.VIEWS, 'views');\n\n// ============ actions ===========\nconst apply = (key, actions) => {\n\treturn (dispatch, getState) => {\n\t\treturn dispatch(common.ensureKeys(Select.views.getSubstate, 'views', ActionTypes.VIEWS, [key], 'views')).then(() => {\n\t\t\tlet data = Select.views.getDataByKey(getState(), key);\n\t\t\tif (data && data.state) {\n\n\t\t\t\tlet actionCreators = [];\n\t\t\t\t_.each(actions, (storeActions, key) => {\n\t\t\t\t\tif (storeActions.hasOwnProperty('updateStateFromView') && data.state[key]) {\n\t\t\t\t\t\tactionCreators.push(storeActions.updateStateFromView(data.state[key]));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (actions.specific) {\n\t\t\t\t\t_.each(actions.specific, (storeActions, key) => {\n\t\t\t\t\t\tif (storeActions.hasOwnProperty('updateStateFromView') && data.state[key]) {\n\t\t\t\t\t\t\tactionCreators.push(storeActions.updateStateFromView(data.state[key]));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tdispatch(actionCreators);\n\n\n\t\t\t} else {\n\t\t\t\tdispatch(common.actionGeneralError(\"Views#apply: View or state of view doesn't exist! View key: \" + key));\n\t\t\t}\n\t\t}).catch(err => {\n\t\t\tdispatch(common.actionGeneralError(\"Views#apply: \" + err));\n\t\t});\n\t}\n};\n\n// ============ export ===========\n\nexport default {\n\tadd,\n\tapply,\n\tsetActiveKey,\n\tsetActiveKeys,\n\tcreate,\n\tdelete: deleteItem,\n\tensureIndexesWithFilterByActive,\n\tsaveEdited,\n\tupdateEdited,\n\tuseKeys,\n\tuseKeysClear,\n\trefreshUses,\n\tuseIndexed,\n\tuseIndexedClear,\n}\n","import ActionTypes from '../../constants/ActionTypes';\nimport Select from '../Select';\n\n// ============ creators ===========\n\n\n// TODO add or update\nfunction addOrOpen(setKey, windowKey, settings, component, props) {\n\treturn (dispatch, getState) => {\n\t\tlet existingWindow = Select.windows.getWindow(getState(), windowKey);\n\t\tif (existingWindow) {\n\t\t\tdispatch(actionOpen(setKey, windowKey));\n\t\t} else {\n\t\t\tdispatch(actionAdd(\n\t\t\t\tsetKey,\n\t\t\t\twindowKey,\n\t\t\t\t'open',\n\t\t\t\tsettings,\n\t\t\t\tcomponent,\n\t\t\t\tprops\n\t\t\t));\n\t\t}\n\t}\n}\n\nfunction updateSettings(windowKey, settings) {\n\treturn (dispatch, getState) => {\n\t\tlet window = Select.windows.getWindow(getState(), windowKey);\n\t\tlet updatedData = {...window.data, settings: {...window.data.settings, ...settings}};\n\t\tdispatch(actionUpdate(windowKey, updatedData));\n\t}\n}\n\n\n// ============ actions ===========\nconst actionAdd = (setKey, windowKey, state, settings, component, props) => {\n\treturn {\n\t\ttype: ActionTypes.WINDOWS.ADD,\n\t\tsetKey,\n\t\twindowKey,\n\t\tstate,\n\t\tsettings,\n\t\tcomponent,\n\t\tprops\n\t}\n};\n\nconst actionOpen = (setKey, windowKey) => {\n\treturn {\n\t\ttype: ActionTypes.WINDOWS.OPEN,\n\t\tsetKey,\n\t\twindowKey\n\t}\n};\n\nconst actionRemove = (setKey, windowKey) => {\n\treturn {\n\t\ttype: ActionTypes.WINDOWS.REMOVE,\n\t\tsetKey,\n\t\twindowKey\n\t}\n};\n\nconst actionTopWindow = (setKey, windowKey) => {\n\treturn {\n\t\ttype: ActionTypes.WINDOWS.TOP,\n\t\tsetKey,\n\t\twindowKey\n\t}\n};\n\nconst actionUpdate = (windowKey, data) => {\n\treturn {\n\t\ttype: ActionTypes.WINDOWS.UPDATE,\n\t\twindowKey,\n\t\tdata\n\t}\n};\n\n// ============ export ===========\n\nexport default {\n\taddOrOpen,\n\tremove: actionRemove,\n\ttopWindow: actionTopWindow,\n\tupdateSettings\n}","import _deprecatedMaps from './_deprecatedMaps/actions';\nimport _deprecatedSelections from './_deprecatedSelections/actions';\n\nimport App from './App/actions';\nimport Areas from './Areas/actions';\nimport AreaRelations from './AreaRelations/actions';\nimport Attributes from './Attributes/actions';\nimport AttributeRelations from './AttributeRelations/actions';\nimport AttributeDataSources from './AttributeDataSources/actions';\nimport AttributeData from './AttributeData/actions';\nimport AttributeSets from './AttributeSets/actions';\nimport AttributeStatistics from './AttributeStatistics/actions';\nimport Cases from './Cases/actions';\nimport Charts from './Charts/actions';\nimport Components from './Components/actions';\nimport Data from './Data/actions';\nimport LayerPeriods from \"./LayerPeriods/actions\";\nimport LayerTemplates from './LayerTemplates/actions';\nimport LayerTrees from './LayerTrees/actions';\nimport Maps from './Maps/actions';\nimport Periods from './Periods/actions';\nimport Places from './Places/actions';\nimport Scenarios from './Scenarios/actions';\nimport Scopes from './Scopes/actions';\nimport Screens from './Screens/actions';\nimport Selections from './Selections/actions';\nimport Snapshots from './Snapshots/actions';\nimport SpatialData from './SpatialData/actions';\nimport SpatialDataSources from './SpatialDataSources/actions';\nimport SpatialRelations from './SpatialRelations/actions';\nimport Styles from './Styles/actions';\nimport Tags from './Tags/actions';\nimport Users from './Users/actions';\nimport Views from './Views/actions';\nimport Windows from './Windows/actions';\n\nexport default {\n\t_deprecatedSelections: _deprecatedSelections,\n\tapp: App,\n\tareas: Areas,\n\tareaRelations: AreaRelations,\n\tattributes: Attributes,\n\tattributeData: AttributeData,\n\tattributeDataSources: AttributeDataSources,\n\tattributeRelations: AttributeRelations,\n\tattributeStatistics: AttributeStatistics,\n\tattributeSets: AttributeSets,\n\tcases: Cases,\n\tcharts: Charts,\n\tcomponents: Components,\n\tdata: Data,\n\tlayerPeriods: LayerPeriods,\n\tlayerTemplates: LayerTemplates,\n\tlayerTrees: LayerTrees,\n    maps: Maps,\n\t_deprecatedMaps: _deprecatedMaps,\n\tperiods: Periods,\n\tplaces: Places,\n\tscenarios: Scenarios,\n\tscopes: Scopes,\n\tscreens: Screens,\n\tselections: Selections,\n\tsnapshots: Snapshots,\n\tspatialData: SpatialData,\n\tspatialDataSources: SpatialDataSources,\n\tspatialRelations: SpatialRelations,\n\tstyles: Styles,\n\ttags: Tags,\n\tusers: Users,\n\tviews: Views,\n\twindows: Windows\n};\n","import {assert} from 'chai';\nimport slash from 'slash'\nimport '../../../src/state/Action';\nimport actions from '../../../src/state/_common/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/_common/actions', function () {\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t});\n\n\tlet dispatchedActions = [];\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tclearDispatchedActions();\n\t});\n\n\tit('add', function () {\n\t\tactions.add({ADD: 'ADD'})('data', 'filter')(dispatch);\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'ADD', data: ['data'], filter: 'filter'},\n\t\t]);\n\t});\n\n\tit('addBatch', function () {\n\t\tactions.addBatch({ADD_BATCH: 'ADD_BATCH'})('data', 'key')(dispatch);\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'ADD_BATCH', data: ['data'], key: 'key'},\n\t\t]);\n\t});\n\n\tit('addBatchIndex', function () {\n\t\tactions.addBatchIndex({INDEX: {ADD_BATCH: 'ADD_BATCH_INDEX'}})(\n\t\t\t'filter',\n\t\t\t'order',\n\t\t\t'data',\n\t\t\t'key'\n\t\t)(dispatch);\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'ADD_BATCH_INDEX',\n\t\t\t\tdata: 'data',\n\t\t\t\tfilter: 'filter',\n\t\t\t\torder: 'order',\n\t\t\t\tkey: 'key',\n\t\t\t},\n\t\t]);\n\t});\n\n\tdescribe('action', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'simple path',\n\t\t\t\tactionTypes: {ACTION: 'STR_ACTION'},\n\t\t\t\ttype: 'ACTION',\n\t\t\t\tpayload: {p: true},\n\t\t\t\texpectedAction: {type: 'STR_ACTION', p: true},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'complex path',\n\t\t\t\tactionTypes: {SCOPE: {ACTION: 'STR_SCOPE_ACTION'}},\n\t\t\t\ttype: 'SCOPE.ACTION',\n\t\t\t\tpayload: {p: true},\n\t\t\t\texpectedAction: {type: 'STR_SCOPE_ACTION', p: true},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tactions.action(test.actionTypes, test.type, test.payload),\n\t\t\t\t\ttest.expectedAction\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('actionGeneralError', function () {\n\t\tassert.deepStrictEqual(actions.actionGeneralError(new Error()), {\n\t\t\ttype: 'ERROR',\n\t\t});\n\t});\n\n\tit('creator', function () {\n\t\tconst action = (...args) => ({\n\t\t\ttype: 'action',\n\t\t\targs,\n\t\t});\n\n\t\tactions.creator(action)({ADD: 'ADD'})('arg1')(dispatch);\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'action', args: [{ADD: 'ADD'}, 'arg1']},\n\t\t]);\n\t});\n\n\tit('apiUpdate', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tbyKey: {k1: {data: {name: 'old'}}},\n\t\t\t\teditedByKey: {k1: {data: {name: 'old'}}},\n\t\t\t\tindexes: [{filter: {name: 'new'}}, {filter: {name: 'old'}}],\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n      assert.strictEqual('http://localhost/backend/rest/user', slash(url));\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {users: [{key: 'k1', data: {name: 'new'}}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'PUT',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.apiUpdate(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{\n\t\t\t\t\tADD: 'ADD',\n\t\t\t\t\tUPDATE: 'UPDATE',\n\t\t\t\t\tINDEX: {CLEAR_INDEX: 'CLEAR_INDEX'},\n\t\t\t\t},\n\t\t\t\t'user',\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tname: 'new',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tname: 'new',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CLEAR_INDEX',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'new',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CLEAR_INDEX',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'old',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: undefined,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('create', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tindexes: [{filter: {applicationKey: 'ak'}}],\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n      assert.strictEqual('http://localhost/backend/rest/user', slash(url));\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {users: [{key: 'k1', data: {applicationKey: 'ak'}}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.create(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{ADD: 'ADD', INDEX: {CLEAR_INDEX: 'CLEAR_INDEX'}},\n\t\t\t\t'user'\n\t\t\t)('k1', 'ak')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tapplicationKey: 'ak',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CLEAR_INDEX',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tapplicationKey: 'ak',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: undefined,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('deleteItem', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tdispatchedActions.push(res);\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n      assert.strictEqual('http://localhost/backend/rest/user', slash(url));\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {users: [{key: 'k1'}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'DELETE',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.delete(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{MARK_DELETED: 'MARK_DELETED'},\n\t\t\t\t'user'\n\t\t\t)({key: 'k1'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tdelete dispatchedActions[0]['date'];\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\ttype: 'MARK_DELETED',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'COMMON.EDITED.REMOVE_PROPERTY_VALUES',\n\t\t\t\t\t\tdataType: 'users',\n\t\t\t\t\t\tkeys: ['k1'],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('ensureKeys', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk2: {key: 'k2'},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {key: {in: ['k1']}},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve({data: {users: [{key: 'k1'}]}});\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureKeys(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{ADD: 'ADD'},\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tdescribe('ensureIndexed', function () {\n\t\tit('already loaded', function () {\n\t\t\tconst getSubState = (state) => state.sub;\n\t\t\tconst getState = () => ({\n\t\t\t\tapp: {\n\t\t\t\t\tlocalConfiguration: {\n\t\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsub: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tindex: ['k1', 'k2', 'k3', 'k4', 'k5'],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tactions\n\t\t\t\t.ensureIndexed(\n\t\t\t\t\tgetSubState,\n\t\t\t\t\t'users',\n\t\t\t\t\t{name: 'fil'},\n\t\t\t\t\t'asc',\n\t\t\t\t\t0,\n\t\t\t\t\t5,\n\t\t\t\t\t{},\n\t\t\t\t\t'user'\n\t\t\t\t)(dispatch, getState)\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tassert.deepStrictEqual(dispatchedActions, []);\n\t\t\t\t});\n\t\t});\n\n\t\tit('missing keys', function () {\n\t\t\tconst getSubState = (state) => state.sub;\n\t\t\tconst getState = () => ({\n\t\t\t\tapp: {\n\t\t\t\t\tlocalConfiguration: {\n\t\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsub: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst dispatch = (action) => {\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\t\tif (res != null) {\n\t\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\n\t\t\t\tdispatchedActions.push(action);\n\t\t\t};\n\t\t\tsetFetch(function (url, options) {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n          slash(url)\n\t\t\t\t);\n\t\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\tnotin: ['k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t}),\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t});\n\n\t\t\t\tconst body = {\n\t\t\t\t\tdata: {users: {k3: {}, k4: {}}},\n\t\t\t\t\ttotal: 5,\n\t\t\t\t\tchanges: {\n\t\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: function () {\n\t\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t\t},\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tdata: JSON.stringify(body),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn actions\n\t\t\t\t.ensureIndexed(\n\t\t\t\t\tgetSubState,\n\t\t\t\t\t'users',\n\t\t\t\t\t{name: 'fil'},\n\t\t\t\t\t'asc',\n\t\t\t\t\t1,\n\t\t\t\t\t5,\n\t\t\t\t\t{INDEX: {ADD: 'ADD_INDEX'}},\n\t\t\t\t\t'user'\n\t\t\t\t)(dispatch, getState)\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'ADD_INDEX',\n\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\tkey: {notin: ['k1', 'k2', 'k3']},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\tdata: {k3: {}, k4: {}},\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t});\n\n\t\tit('nothing loaded', function () {\n\t\t\tconst getSubState = (state) => state.sub;\n\t\t\tconst getState = () => ({\n\t\t\t\tapp: {\n\t\t\t\t\tlocalConfiguration: {\n\t\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tsub: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst dispatch = (action) => {\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\t\tif (res != null) {\n\t\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\n\t\t\t\tdispatchedActions.push(action);\n\t\t\t};\n\t\t\tsetFetch(function (url, options) {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n          slash(url)\n\t\t\t\t);\n\t\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t}),\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t});\n\n\t\t\t\tconst body = {\n\t\t\t\t\tdata: {users: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\t\ttotal: 5,\n\t\t\t\t\tchanges: {\n\t\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: function () {\n\t\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t\t},\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tdata: JSON.stringify(body),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn actions\n\t\t\t\t.ensureIndexed(\n\t\t\t\t\tgetSubState,\n\t\t\t\t\t'users',\n\t\t\t\t\t{name: 'fil'},\n\t\t\t\t\t'asc',\n\t\t\t\t\t1,\n\t\t\t\t\t5,\n\t\t\t\t\t{INDEX: {ADD: 'ADD_INDEX'}},\n\t\t\t\t\t'user'\n\t\t\t\t)(dispatch, getState)\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'ADD_INDEX',\n\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t});\n\t});\n\n\tit('ensureIndexesWithFilterByActive', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureIndexesWithFilterByActive(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{INDEX: {ADD: 'ADD_INDEX'}},\n\t\t\t\t'user'\n\t\t\t)({name: 'fil'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD_INDEX',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('ensureKeys', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tkey: {in: ['k2', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: [{key: 'k2'}]},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureKeys(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{ADD_UNRECEIVED: 'ADD_UNRECEIVED', ADD: 'ADD'},\n\t\t\t\t['k1', 'k2', 'k3'],\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD_UNRECEIVED',\n\t\t\t\t\t\tkeys: ['k3'],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('loadAll', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadAll(\n\t\t\t\t'users',\n\t\t\t\t{ADD: 'ADD'},\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tk1: {},\n\t\t\t\t\t\t\t\tk2: {},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('loadFiltered', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadFiltered(\n\t\t\t\t'users',\n\t\t\t\t{ADD: 'ADD'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tk1: {},\n\t\t\t\t\t\t\t\tk2: {},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedBatch', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tscopes: {activeKey: 's1'},\n\t\t\tperiods: {activeKey: 'pe1'},\n\t\t\tplaces: {activeKey: 'pl1'},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\torder: 'asc',\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexedBatch(\n\t\t\t\t'users',\n\t\t\t\t{\n\t\t\t\t\tUSE: {INDEXED_BATCH: {REGISTER: 'REGISTER'}},\n\t\t\t\t\tINDEX: {ADD_BATCH: 'ADD_BATCH'},\n\t\t\t\t},\n\t\t\t\t'user'\n\t\t\t)(\n\t\t\t\t{name: 'fil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t'cid',\n\t\t\t\t'k1',\n\t\t\t\t{}\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'REGISTER',\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD_BATCH',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('loadIndexedPage', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadIndexedPage(\n\t\t\t\t'users',\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t'2020-01-01',\n\t\t\t\t{INDEX: {ADD: 'ADD_INDEX'}},\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD_INDEX',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('loadKeysPage', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {key: {in: ['k1', 'k2']}},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: [{key: 'k1'}]},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadKeysPage(\n\t\t\t\t'users',\n\t\t\t\t{ADD: 'ADD', ADD_UNRECEIVED: 'ADD_UNRECEIVED'},\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{type: 'ADD', filter: undefined, data: [{key: 'k1'}]},\n\t\t\t\t\t{keys: ['k2'], type: 'ADD_UNRECEIVED'},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('setActiveKey', function () {\n\t\tactions.setActiveKey({SET_ACTIVE_KEY: 'SET_ACTIVE_KEY'})('k1')(\n\t\t\tdispatch\n\t\t);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'SET_ACTIVE_KEY', key: 'k1'},\n\t\t]);\n\t});\n\n\tit('setActiveKeys', function () {\n\t\tactions.setActiveKeys({SET_ACTIVE_KEYS: 'SET_ACTIVE_KEYS'})([\n\t\t\t'k1',\n\t\t\t'k2',\n\t\t])(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'SET_ACTIVE_KEYS', keys: ['k1', 'k2']},\n\t\t]);\n\t});\n\n\tdescribe('receiveUpdated', function () {\n\t\tit('no updates', function () {\n\t\t\tconst getSubState = (state) => state.sub;\n\t\t\tconst getState = () => ({\n\t\t\t\tsub: {},\n\t\t\t});\n\t\t\tconst result = {data: {users: []}};\n\n\t\t\tactions.receiveUpdated(\n\t\t\t\tgetSubState,\n\t\t\t\t{},\n\t\t\t\tresult,\n\t\t\t\t'users',\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, []);\n\t\t});\n\n\t\tit('some updates', function () {\n\t\t\tconst getSubState = (state) => state.sub;\n\t\t\tconst getState = () => ({\n\t\t\t\tsub: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tpropScalarSame: 'propScalarSame',\n\t\t\t\t\t\t\t\tpropScalarChanged: 'propScalarChanged',\n\t\t\t\t\t\t\t\tpropObjSame: {same: 'same'},\n\t\t\t\t\t\t\t\tpropObjChanged: {changed: 'changed'},\n\t\t\t\t\t\t\t\tpropArrSame: ['same'],\n\t\t\t\t\t\t\t\tpropArrChanged: ['changed'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst result = {\n\t\t\t\tdata: {\n\t\t\t\t\tusers: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tpropScalarSame: 'propScalarSame',\n\t\t\t\t\t\t\t\tpropScalarChanged: 'propScalarChanged2',\n\t\t\t\t\t\t\t\tpropObjSame: {same: 'same'},\n\t\t\t\t\t\t\t\tpropObjChanged: {changed: 'changed2'},\n\t\t\t\t\t\t\t\tpropArrSame: ['same'],\n\t\t\t\t\t\t\t\tpropArrChanged: ['changed2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tactions.receiveUpdated(\n\t\t\t\tgetSubState,\n\t\t\t\t{ADD: 'ADD', EDITED: {REMOVE_PROPERTY: 'REMOVE_PROPERTY'}},\n\t\t\t\tresult,\n\t\t\t\t'users',\n\t\t\t\t'user'\n\t\t\t)(dispatch, getState);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\tfilter: undefined,\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tpropScalarSame: 'propScalarSame',\n\t\t\t\t\t\t\t\tpropScalarChanged: 'propScalarChanged2',\n\t\t\t\t\t\t\t\tpropObjSame: {same: 'same'},\n\t\t\t\t\t\t\t\tpropObjChanged: {changed: 'changed2'},\n\t\t\t\t\t\t\t\tpropArrSame: ['same'],\n\t\t\t\t\t\t\t\tpropArrChanged: ['changed2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'k1',\n\t\t\t\t\tproperty: 'propScalarSame',\n\t\t\t\t\ttype: 'REMOVE_PROPERTY',\n\t\t\t\t},\n\t\t\t\t{key: 'k1', property: 'propObjSame', type: 'REMOVE_PROPERTY'},\n\t\t\t\t{key: 'k1', property: 'propArrSame', type: 'REMOVE_PROPERTY'},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('receiveIndexed', function () {\n\t\tactions.receiveIndexed(\n\t\t\t{ADD: 'ADD', INDEX: {ADD: 'ADD_INDEX'}},\n\t\t\t{\n\t\t\t\tdata: {users: [{key: 'k1'}]},\n\t\t\t\ttotal: 1,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t},\n\t\t\t'users',\n\t\t\t'fil',\n\t\t\t'asc',\n\t\t\t1\n\t\t)(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'ADD',\n\t\t\t\tdata: [{key: 'k1'}],\n\t\t\t\tfilter: 'fil',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'ADD_INDEX',\n\t\t\t\tcount: 1,\n\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'asc',\n\t\t\t\tstart: 1,\n\t\t\t\tdata: [{key: 'k1'}],\n\t\t\t},\n\t\t]);\n\t});\n\n\tit('receiveKeys', function () {\n\t\tactions.receiveKeys(\n\t\t\t{ADD: 'ADD', ADD_UNRECEIVED: 'ADD_UNRECEIVED'},\n\t\t\t{data: {users: [{key: 'k1'}]}},\n\t\t\t'users',\n\t\t\t['k1', 'k2']\n\t\t)(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'ADD', data: [{key: 'k1'}], filter: undefined},\n\t\t\t{type: 'ADD_UNRECEIVED', keys: ['k2']},\n\t\t]);\n\t});\n\n\tit('refreshUses', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tinUse: {\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {key: 'k1'},\n\t\t\t\t\tk2: {key: 'k2'},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.refreshUses(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{INDEX: {CLEAR_ALL: 'CLEAR_ALL', ADD: 'ADD'}},\n\t\t\t\t'user'\n\t\t\t)()(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{type: 'CLEAR_ALL'},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('saveEdited', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}},\n\t\t\t\teditedByKey: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n      assert.strictEqual('http://localhost/backend/rest/user', slash(url));\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {users: [{key: 'k1', data: {prop: 'val'}}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'PUT',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: [{key: 'k1', data: {prop: 'val'}}]},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.saveEdited(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{ADD: 'ADD', EDITED: {REMOVE_PROPERTY: 'REMOVE_PROPERTY'}},\n\t\t\t\t'user'\n\t\t\t)('k1')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t\tdata: [{key: 'k1', data: {prop: 'val'}}],\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{type: 'REMOVE_PROPERTY', key: 'k1', property: 'prop'},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tdescribe('updateSubstateFromView', function () {\n\t\tit('activeKey', function () {\n\t\t\tactions.updateSubstateFromView({SET_ACTIVE_KEY: 'SET_ACTIVE_KEY'})({\n\t\t\t\tactiveKey: 'ak',\n\t\t\t})(dispatch);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{key: 'ak', type: 'SET_ACTIVE_KEY'},\n\t\t\t]);\n\t\t});\n\n\t\tit('activeKeys', function () {\n\t\t\tactions.updateSubstateFromView({\n\t\t\t\tSET_ACTIVE_KEYS: 'SET_ACTIVE_KEYS',\n\t\t\t})({\n\t\t\t\tactiveKeys: ['k1', 'k2'],\n\t\t\t})(dispatch);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{keys: ['k1', 'k2'], type: 'SET_ACTIVE_KEYS'},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('updateEdited', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}},\n\t\t\t\teditedByKey: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t},\n\t\t});\n\t\tactions.updateEdited(getSubState, {\n\t\t\tEDITED: {UPDATE: 'UPDATE'},\n\t\t})('users', 'k1', {\n\t\t\tkey: 'k1',\n\t\t\tdata: {prop: 'val'},\n\t\t})(dispatch, getState);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'UPDATE',\n\t\t\t\tdata: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'users',\n\t\t\t\t\t\tdata: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t]);\n\t});\n\n\tit('useKeys', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tsub: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}, k2: {key: 'k2'}},\n\t\t\t},\n\t\t});\n\n\t\treturn actions\n\t\t\t.useKeys(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{\n\t\t\t\t\tUSE: {KEYS: {REGISTER: 'REGISTER'}},\n\t\t\t\t},\n\t\t\t\t'user'\n\t\t\t)(\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'cid'\n\t\t\t)(dispatch)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{componentId: 'cid', keys: ['k1', 'k2'], type: 'REGISTER'},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useKeysClear', function () {\n\t\tactions.useKeysClear({USE: {KEYS: {CLEAR: 'CLEAR'}}})('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{componentId: 'cid', type: 'CLEAR'},\n\t\t]);\n\t});\n\n\tit('useIndexed', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t\tsub: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/user/filtered/users',\n        slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {users: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\tgetSubState,\n\t\t\t\t'users',\n\t\t\t\t{USE: {INDEXED: {REGISTER: 'REGISTER'}}, INDEX: {ADD: 'ADD'}},\n\t\t\t\t'user'\n\t\t\t)(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('clearIndex', function () {\n\t\tactions.clearIndex({INDEX: {CLEAR_INDEX: 'CLEAR_INDEX'}})('fil', 'asc')(\n\t\t\tdispatch\n\t\t);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{filter: 'fil', order: 'asc', type: 'CLEAR_INDEX'},\n\t\t]);\n\t});\n\n\tit('useIndexedRegister', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tactions.useIndexedRegister(\n\t\t\t\t{USE: {INDEXED: {REGISTER: 'REGISTER'}}},\n\t\t\t\t'cid',\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'REGISTER',\n\t\t\t\tcomponentId: 'cid',\n\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\torder: 'asc',\n\t\t\t\tstart: 1,\n\t\t\t\tlength: 5,\n\t\t\t}\n\t\t);\n\t});\n\n\tit('useIndexedClear', function () {\n\t\tactions.useIndexedClear({\n\t\t\tUSE: {INDEXED: {CLEAR: 'CLEAR'}},\n\t\t})('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{componentId: 'cid', type: 'CLEAR'},\n\t\t]);\n\t});\n\n\tit('useIndexedClearAll', function () {\n\t\tactions.useIndexedClearAll({\n\t\t\tUSE: {INDEXED: {CLEAR_ALL: 'CLEAR_ALL'}},\n\t\t})()(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [{type: 'CLEAR_ALL'}]);\n\t});\n\n\tit('setInitial', function () {\n\t\tactions.setInitial({SET_INITIAL: 'SET_INITIAL'})()(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [{type: 'SET_INITIAL'}]);\n\t});\n\n\tit('actionDataSetOutdated', function () {\n\t\tassert.deepStrictEqual(actions.actionDataSetOutdated(), {\n\t\t\ttype: 'COMMON.DATA.SET_OUTDATED',\n\t\t});\n\t});\n\n\tit('actionSetActiveKey', function () {\n\t\tactions.setActiveKey({SET_ACTIVE_KEY: 'SET_ACTIVE_KEY'})('k1')(\n\t\t\tdispatch\n\t\t);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{key: 'k1', type: 'SET_ACTIVE_KEY'},\n\t\t]);\n\t});\n});\n","import {assert} from 'chai';\nimport helpers from '../../../src/state/_common/helpers';\n\ndescribe('state/_common/helpers', function () {\n\tdescribe('getIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tindexes: [],\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'indexes',\n\t\t\t\tindexes: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t],\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: {filter: 'fil', order: 'asc'},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\thelpers.getIndex(test.indexes, test.filter, test.order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getUniqueIndexes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tindexes: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'unique indexes',\n\t\t\t\tindexes: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non unique indexes',\n\t\t\t\tindexes: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\n\t\t\t\t\t// exact duplicities\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\n\t\t\t\t\t// duplicities with additional prop\n\t\t\t\t\t{filter: 'fil2', order: 'desc', p: true},\n\t\t\t\t\t{filter: 'fil', order: 'desc', p: true},\n\t\t\t\t\t{filter: 'fil', order: 'asc', p: true},\n\t\t\t\t\t{filter: 'fil2', order: 'asc', p: true},\n\t\t\t\t],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\thelpers.getUniqueIndexes(test.indexes),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('isCorrespondingIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'corresponding',\n\t\t\t\tindex: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'corresponding with extra key',\n\t\t\t\tindex: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\textraKey: 'val',\n\t\t\t\t},\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'different order',\n\t\t\t\tindex: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'desc',\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'different filter',\n\t\t\t\tindex: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\tfilter: 'fil2',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\thelpers.isCorrespondingIndex(\n\t\t\t\t\t\ttest.index,\n\t\t\t\t\t\ttest.filter,\n\t\t\t\t\t\ttest.order\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('itemFitFilter', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'fits null filter',\n\t\t\t\tfilter: null,\n\t\t\t\titem: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsameProp: 'John',\n\t\t\t\t\t\tlikeProp: 'always matches',\n\t\t\t\t\t\tinProp: 'two',\n\t\t\t\t\t\tnotInProp: 'this',\n\t\t\t\t\t\tlinkKey: 'val',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'fits all filter types',\n\t\t\t\tfilter: {\n\t\t\t\t\tsameProp: 'John',\n\t\t\t\t\tlikeProp: {like: true},\n\t\t\t\t\tinProp: {in: ['one', 'two', 'three']},\n\t\t\t\t\tnotInProp: {notin: ['notThis', 'andThis']},\n\t\t\t\t\tlink: 'val',\n\t\t\t\t},\n\t\t\t\titem: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsameProp: 'John',\n\t\t\t\t\t\tlikeProp: 'always matches',\n\t\t\t\t\t\tinProp: 'two',\n\t\t\t\t\t\tnotInProp: 'this',\n\t\t\t\t\t\tlinkKey: 'val',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'does not fit same prop',\n\t\t\t\tfilter: {\n\t\t\t\t\tsameProp: 'John',\n\t\t\t\t},\n\t\t\t\titem: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsameProp: 'Johnny',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'does not fit in prop',\n\t\t\t\tfilter: {\n\t\t\t\t\tinProp: {in: ['one', 'two', 'three']},\n\t\t\t\t},\n\t\t\t\titem: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tinProp: 'four',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'does not fit notin prop',\n\t\t\t\tfilter: {\n\t\t\t\t\tnotInProp: {notin: ['notThis', 'andThis']},\n\t\t\t\t},\n\t\t\t\titem: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tnotInProp: 'notThis',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'does not fit link prop',\n\t\t\t\tfilter: {\n\t\t\t\t\tlink: 'val',\n\t\t\t\t},\n\t\t\t\titem: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlinkKey: 'notval',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\thelpers.itemFitFilter(test.filter, test.item),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeIndex', function () {\n\t\tconst indexes = [\n\t\t\t{\n\t\t\t\tfilter: {},\n\t\t\t\torder: null\n\t\t\t},\n\t\t\t{\n\t\t\t\tfilter: {\n\t\t\t\t\ttest: 1\n\t\t\t\t},\n\t\t\t\torder: []\n\t\t\t}\n\t\t]\n\t\t\n\t\tit('return new instance of indexes without filtered index', function () {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\thelpers.removeIndex(indexes, {}, null),\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\ttest: 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: []\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t);\n\t\t});\n\n\t\tit('return same instance of indexes', function () {\n\t\t\tassert.equal(\n\t\t\t\thelpers.removeIndex(indexes, {}, []),\n\t\t\t\tindexes\n\t\t\t);\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport commonHelpers from '../../../../src/state/_common/helpers';\n\ndescribe('convertModifiersToRequestFriendlyFormat', function() {\n    it('should merge keys, defined keys have a priority', () => {\n        const modifiers = {\n            scopeKey: \"A\",\n            placeKeys: [\"B\", \"C\"],\n            scenarioKey: \"F\",\n            caseKeys: [\"I\", \"J\"]\n        }\n\n        const expectedResult = {\n            scopeKey: \"A\",\n            placeKey: {\n                in: [\"B\", \"C\"]\n            },\n            scenarioKey: \"F\",\n            caseKey: {\n                in: [\"I\", \"J\"]\n            }\n        };\n\n        const output = commonHelpers.convertModifiersToRequestFriendlyFormat(modifiers);\n        assert.deepStrictEqual(output, expectedResult);\n    });\n\n    it('should return null if input is null', () => {\n        const output = commonHelpers.convertModifiersToRequestFriendlyFormat(null);\n        assert.isNull(output);\n    });\n});","import {assert} from 'chai';\nimport commonHelpers from '../../../../src/state/_common/helpers';\n\ndescribe('mergeMetadataKeys', function() {\n    const defined = {\n        scopeKey: \"A\",\n        placeKeys: [\"B\", \"C\"]\n    };\n\n    const active = {\n        placeKeys: [\"D\", \"E\"],\n        scenarioKey: \"F\"\n    }\n\n    it('should merge keys, defined keys have a priority', () => {\n        const expectedResult = {\n            scopeKey: \"A\",\n            placeKeys: [\"B\", \"C\"],\n            scenarioKey: \"F\"\n        };\n        const output = commonHelpers.mergeMetadataKeys(defined, active);\n        assert.deepStrictEqual(output, expectedResult);\n    });\n\n    it('should return defined keys only if active is null and vice versa', () => {\n        const output = commonHelpers.mergeMetadataKeys(defined, null);\n        assert.deepStrictEqual(output, defined);\n\n        const output2 = commonHelpers.mergeMetadataKeys(null, active);\n        assert.deepStrictEqual(output2, active);\n    });\n\n    it('should return null if both parameters are null', () => {\n        const output = commonHelpers.mergeMetadataKeys(null, null);\n        assert.isNull(output);\n    });\n});","import _ from 'lodash';\nimport commonHelpers from './helpers';\n\nexport const DEFAULT_INITIAL_STATE = {\n\tactiveKey: null,\n\tbyKey: null,\n\tcount: null,\n\teditedByKey: null,\n\tindexes: null,\n\tinUse: {\n\t\tindexes: null,\n\t\tkeys: null\n\t},\n\tlastChangedOn: null,\n\tloading: false,\n\tloadingKeys: null,\n};\n\nexport default {\n\tadd: (state, action) => {\n\t\tlet newData = {...state.byKey};\n\t\tif (action.data && action.data.length) {\n\t\t\taction.data.forEach(model => {\n\t\t\t\tnewData[model.key] = {...newData[model.key], ...model};\n\t\t\t\tdelete newData[model.key].outdated;\n\t\t\t\tdelete newData[model.key].unreceived;\n\t\t\t});\n\t\t}\n\t\treturn {...state, byKey: newData}\n\t},\n\n\taddBatch: (state, action) => {\n\t\tlet newData = {...state.byKey};\n\t\tif (action.data && action.data.length) {\n\t\t\taction.data.forEach(model => {\n\t\t\t\tnewData[model[action.key]] = {...newData[model[action.key]], ...model};\n\t\t\t\tdelete newData[model[action.key]].outdated;\n\t\t\t\tdelete newData[model[action.key]].unreceived;\n\t\t\t});\n\t\t}\n\t\treturn {...state, byKey: newData}\n\t},\n\n\taddUnreceivedKeys: (state, action) => {\n\t\tlet newData = {...state.byKey};\n\t\tif (action.keys && action.keys.length) {\n\t\t\taction.keys.forEach(key => {\n\t\t\t\tnewData[key] = {key, unreceived: true};\n\t\t\t});\n\t\t}\n\t\treturn {...state, byKey: newData}\n\t},\n\n\taddIndex: (state, action) => {\n\t\tlet indexes = [];\n\t\tlet selectedIndex = {};\n\n\t\tif (state.indexes){\n\t\t\tstate.indexes.forEach(index => {\n\t\t\t\tif (_.isEqual(index.filter, action.filter) && _.isEqual(index.order, action.order)){\n\t\t\t\t\tselectedIndex = index;\n\t\t\t\t} else {\n\t\t\t\t\tindexes.push(index);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tlet index;\n\t\tif (action.data.length){\n\t\t\tindex = {...selectedIndex.index};\n\t\t\taction.data.forEach((model, i) => {\n\t\t\t\tindex[action.start + i] = model.key;\n\t\t\t});\n\t\t}\n\n\t\tselectedIndex = {\n\t\t\tfilter: selectedIndex.filter || action.filter,\n\t\t\torder: selectedIndex.order || action.order,\n\t\t\tcount: action.count,\n\t\t\tchangedOn: action.changedOn,\n\t\t\tindex: index || selectedIndex.index\n\t\t};\n\t\tindexes.push(selectedIndex);\n\n\t\treturn {...state, indexes: indexes};\n\t},\n\n\taddBatchIndex: (state, action) => {\n\t\tlet indexes = [];\n\t\tlet selectedIndex = {};\n\n\t\tif (state.indexes){\n\t\t\tstate.indexes.forEach(index => {\n\t\t\t\tif (_.isEqual(index.filter, action.filter) && _.isEqual(index.order, action.order)){\n\t\t\t\t\tselectedIndex = index;\n\t\t\t\t} else {\n\t\t\t\t\tindexes.push(index);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tlet index;\n\t\tif (action.data.length){\n\t\t\tindex = {...selectedIndex.index};\n\t\t\taction.data.forEach((model, i) => {\n\t\t\t\tindex[i] = model[action.key];\n\t\t\t});\n\t\t}\n\n\t\tselectedIndex = {\n\t\t\tfilter: selectedIndex.filter || action.filter,\n\t\t\torder: selectedIndex.order || action.order,\n\t\t\tindex: index || selectedIndex.index\n\t\t};\n\t\tindexes.push(selectedIndex);\n\n\t\treturn {...state, indexes: indexes};\n\t},\n\n\tregisterUseIndexed: (state, action) => {\n\t\tlet newUse = {\n\t\t\tfilterByActive: action.filterByActive,\n\t\t\tfilter: action.filter,\n\t\t\torder: action.order,\n\t\t\tstart: action.start,\n\t\t\tlength: action.length\n\t\t};\n\n\t\tlet existingUse = false;\n\t\tif (state.inUse.indexes && state.inUse.indexes[action.componentId]) {\n\t\t\texistingUse = _.find(state.inUse.indexes[action.componentId], newUse);\n\t\t}\n\n\t\t// add use if it doesn't already exist\n\t\tif (!existingUse) {\n\t\t\treturn {...state,\n\t\t\t\tinUse: {\n\t\t\t\t\t...state.inUse,\n\t\t\t\t\tindexes: {\n\t\t\t\t\t\t...state.inUse.indexes,\n\t\t\t\t\t\t[action.componentId]: (\n\t\t\t\t\t\t\t(state.inUse.indexes && state.inUse.indexes[action.componentId]) ?\n\t\t\t\t\t\t\t\t[...state.inUse.indexes[action.componentId], newUse] : [newUse]\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tregisterBatchUseIndexed: (state, action) => {\n\t\tlet newUse = {\n\t\t\tfilterByActive: action.filterByActive,\n\t\t\tfilter: action.filter,\n\t\t\torder: action.order,\n\t\t};\n\n\t\tlet existingUse = false;\n\t\tif (state.inUse.indexes && state.inUse.indexes[action.componentId]) {\n\t\t\texistingUse = _.find(state.inUse.indexes[action.componentId], newUse);\n\t\t}\n\n\t\t// add use if it doesn't already exist\n\t\tif (!existingUse) {\n\t\t\treturn {...state,\n\t\t\t\tinUse: {\n\t\t\t\t\t...state.inUse,\n\t\t\t\t\tindexes: {\n\t\t\t\t\t\t...state.inUse.indexes,\n\t\t\t\t\t\t[action.componentId]: (\n\t\t\t\t\t\t\t(state.inUse.indexes && state.inUse.indexes[action.componentId]) ?\n\t\t\t\t\t\t\t\t[...state.inUse.indexes[action.componentId], newUse] : [newUse]\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t} else {\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tuseIndexedClear: (state, action) => {\n\t\tif (state.inUse && state.inUse.indexes && state.inUse.indexes.hasOwnProperty(action.componentId)) {\n\t\t\tlet indexes = {...state.inUse.indexes};\n\t\t\tdelete indexes[action.componentId];\n\t\t\treturn {...state, inUse: {...state.inUse, indexes: _.isEmpty(indexes) ? null : indexes}};\n\t\t} else {\n\t\t\t// do not mutate if no index was changed\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tuseIndexedClearAll: (state, action) => {\n\t\tif (state.inUse && state.inUse.indexes) {\n\t\t\treturn {...state, inUse: {...state.inUse, indexes: null}};\n\t\t} else {\n\t\t\t// do not mutate if no index was changed\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tuseKeysRegister: (state, action) => {\n\t\treturn {\n\t\t\t...state,\n\t\t\tinUse: {\n\t\t\t\t...state.inUse,\n\t\t\t\tkeys: {\n\t\t\t\t\t...state.inUse.keys,\n\t\t\t\t\t[action.componentId]: state.inUse.keys && state.inUse.keys[action.componentId] ? _.union(state.inUse.keys[action.componentId], action.keys) : action.keys\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tuseKeysClear: (state, action) => {\n\t\tlet keys = {...state.inUse.keys};\n\t\tdelete keys[action.componentId];\n\n\t\treturn {\n\t\t\t...state,\n\t\t\tinUse: {\n\t\t\t\t...state.inUse,\n\t\t\t\tkeys: _.isEmpty(keys) ? null : keys\n\t\t\t}\n\t\t}\n\t},\n\n\tmarkDeleted: (state, action) => {\n\t\tif (state.byKey && state.byKey[action.key]) {\n\t\t\tconst byKey = {...state.byKey};\n\t\t\tbyKey[action.key].removed = true;\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbyKey\n\t\t\t};\n\t\t} else {\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tremove: (state, action) => {\n\t\tlet newData = state.byKey ? _.omit(state.byKey, action.keys) : null;\n\t\treturn {...state, byKey: newData}\n\t},\n\n\tremoveEdited: (state, action) => {\n\t\tlet newData = state.editedByKey ? _.omit(state.editedByKey, action.keys) : null;\n\t\treturn {...state, editedByKey: newData}\n\t},\n\n\tremoveEditedActive: (state) => {\n\t\tlet newData = state.editedByKey ? _.omit(state.editedByKey, state.activeKey) : null;\n\t\treturn {...state, editedByKey: newData}\n\t},\n\n\tremoveEditedProperty: (state, action) => {\n\t\tlet newEditedModelData = state.editedByKey && state.editedByKey[action.key] && state.editedByKey[action.key].data ?\n\t\t\t_.omit(state.editedByKey[action.key].data, action.property) : null;\n\n\n\t\tif (newEditedModelData && !_.isEmpty(newEditedModelData)){\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\teditedByKey: {\n\t\t\t\t\t...state.editedByKey,\n\t\t\t\t\t[action.key]: {\n\t\t\t\t\t\t...state.editedByKey[action.key],\n\t\t\t\t\t\tdata: newEditedModelData\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (newEditedModelData && _.isEmpty(newEditedModelData)) {\n\t\t\tlet editedModels = {...state.editedByKey};\n\t\t\tdelete editedModels[action.key];\n\n\t\t\treturn {...state, editedByKey: editedModels}\n\t\t} else {\n\t\t\treturn state;\n\t\t}\n\n\t},\n\n\t// todo test\n\tremoveEditedPropertyValues: (state, action) => {\n\t\tconst dataTypeSingular = action.dataType.slice(0, -1);\n\t\tconst keyProperty = dataTypeSingular + \"Key\";\n\t\tconst keysProperty = dataTypeSingular + \"Keys\";\n\n\t\tlet editedData = {...state.editedByKey};\n\t\tif (!_.isEmpty(editedData)) {\n\t\t\tlet updatedEdited = {};\n\t\t\tlet propertyUpdated = false;\n\t\t\t_.forIn(editedData, (model, key) => {\n\t\t\t\tif (model.data && model.data[keyProperty]) {\n\t\t\t\t\tlet keyExists = _.includes(action.keys, model.data[keyProperty]);\n\t\t\t\t\tif (keyExists) {\n\t\t\t\t\t\tupdatedEdited[key] = {...model, data: {...model.data, [keyProperty]: null}};\n\t\t\t\t\t\tpropertyUpdated = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdatedEdited[key] = model;\n\t\t\t\t\t}\n\t\t\t\t} else if (model.data && model.data[keysProperty]) {\n\t\t\t\t\tlet updatedKeys = _.difference(model.data[keysProperty], action.keys);\n\t\t\t\t\tif (updatedKeys.length !== model.data[keysProperty]) {\n\t\t\t\t\t\tupdatedEdited[key] = {...model, data: {...model.data, [keysProperty]: updatedKeys}};\n\t\t\t\t\t\tpropertyUpdated = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdatedEdited[key] = model;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tupdatedEdited[key] = model;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn propertyUpdated ? {...state, editedByKey: updatedEdited} : state;\n\t\t} else {\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tsetActive: (state, action) => {\n\t\treturn {...state, activeKey: action.key, activeKeys: null};\n\t},\n\n\tsetActiveMultiple: (state, action) => {\n\t\treturn {...state, activeKeys: action.keys, activeKey: null};\n\t},\n\n\tupdateEdited: (state, action) => {\n\t\tlet newEditedData = {...state.editedByKey};\n\t\tif (action.data && action.data.length) {\n\t\t\taction.data.forEach(model => {\n\t\t\t\tif (newEditedData[model.key]){\n\t\t\t\t\tnewEditedData[model.key] = {\n\t\t\t\t\t\t...newEditedData[model.key],\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t...newEditedData[model.key].data,\n\t\t\t\t\t\t\t...model.data\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnewEditedData[model.key] = model;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn {...state, editedByKey: newEditedData};\n\t},\n\n\tclearIndexes: (state, action) => {\n\t\tlet indexes = _.map(state.indexes, index => {\n\t\t\treturn {...index, index: null, count: null, changedOn: null, outdated: index.index, outdatedCount: index.count}\n\t\t});\n\n\t\treturn {\n\t\t\t...state,\n\t\t\tindexes: indexes.length ? indexes : null\n\t\t}\n\t},\n\n\t/**\n\t * Useful for invalidate data before refresh indexes\n\t * action.order\n\t * action.filter\n\t * */\n\tclearIndex: (state, action) => {\n\t\tconst indexes = state.indexes.map(index => {\n\t\t\tconst correspondIndex = commonHelpers.isCorrespondingIndex(index, action.filter, action.order);\n\t\t\tif(correspondIndex) {\n\t\t\t\tindex.outdated = index.index;\n\t\t\t\tindex.outdatedCount = index.count;\n\t\t\t\tindex.index = null;\n\t\t\t\tindex.count = null;\n\t\t\t\tindex.changedOn = null;\n\t\t\t}\n\t\t\treturn index;\n\t\t});\n\n\t\treturn {\n\t\t\t...state,\n\t\t\tindexes: [...indexes],\n\t\t}\n\t},\n\n\tdataSetOutdated: (state, action) => {\n\t\tif (state.byKey){\n\t\t\tlet byKey = {};\n\t\t\t_.each(state.byKey, (model, key) => {\n\t\t\t\tbyKey[key] = {\n\t\t\t\t\t...model,\n\t\t\t\t\toutdated: true\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tbyKey\n\t\t\t};\n\t\t} else {\n\t\t\treturn state;\n\t\t}\n\t},\n\n\tcleanupOnLogout: (state, action) => {\n\t\tif (state.byKey){\n\t\t\tlet byKey = {};\n\t\t\t_.each(state.byKey, (model, key) => {\n\t\t\t\tif(model.permissions && model.permissions.guest.get) {\n\t\t\t\t\tbyKey[key] = {\n\t\t\t\t\t\t...model,\n\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\tguest: model.permissions.guest\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn {...state, byKey};\n\t\t} else {\n\t\t\treturn state\n\t\t}\n\t}\n}","import {assert} from 'chai';\nimport reducers, {\n\tDEFAULT_INITIAL_STATE,\n} from '../../../src/state/_common/reducers';\n\ndescribe('state/_common/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.add(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addBatch', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tsomeKey: 'sk1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tsomeKey: 'sk2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tsk1: {key: 'k1', someKey: 'sk1', name: 'first'},\n\t\t\t\t\t\tsk2: {key: 'k2', someKey: 'sk2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.addBatch(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {keys: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {keys: ['k1', 'k2']},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.addUnreceivedKeys(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.addIndex(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addBatchIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t\t{someKey: 'k'},\n\t\t\t\t\t\t\t\t{someKey: 'k.1'},\n\t\t\t\t\t\t\t\t{someKey: 'k.2'},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [{someKey: 'k2'}, {someKey: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: 'k2', 1: 'k3', 2: {someKey: 'k.2'}},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.addBatchIndex(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.registerUseIndexed(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerBatchUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.registerBatchUseIndexed(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.useIndexedClear(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('useIndexedClearAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'clear all',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducers.useIndexedClearAll(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useKeysRegister', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: {comp: ['k1', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.useKeysRegister(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useKeysClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'comp2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2'], comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'last',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.useKeysClear(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('markDeleted', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non matching key',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'sk',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matching key',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {sk: {v: 0}, nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'sk',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {sk: {v: 0, removed: true}, nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.markDeleted(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('remove', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {byKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {byKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducers.remove(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('removeEdited', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {editedByKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {editedByKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.removeEdited(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEditedActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\teditedByKey: {k1: 1, k2: 2, k3: 3},\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\teditedByKey: {k2: 2, k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\teditedByKey: {k1: 1},\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\teditedByKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.removeEditedActive(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEditedProperty', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: null},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: null},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched last property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.removeEditedProperty(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEditedPropertyValues', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'updated',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop in keys',\n\t\t\t\t\t\t\t\tactionKey: 'ak1',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop not in keys',\n\t\t\t\t\t\t\t\tactionKey: 'nak2',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk3: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak3.1', 'ak3.2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk4: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop not in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak4.1', 'ak4.2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tdataType: 'actions',\n\t\t\t\t\tkeys: ['ak1', 'ak3.2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop in keys',\n\t\t\t\t\t\t\t\tactionKey: null,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop not in keys',\n\t\t\t\t\t\t\t\tactionKey: 'nak2',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk3: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak3.1'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk4: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop not in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak4.1', 'ak4.2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.removeEditedPropertyValues(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.action\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkey: 'ak',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'ak',\n\t\t\t\t\tactiveKeys: null,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.setActive(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActiveMultiple', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'setActiveMultiple',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tkeys: ['aks1', 'aks2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: null,\n\t\t\t\t\tactiveKeys: ['aks1', 'aks2'],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducers.setActiveMultiple(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('updateEdited', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{key: 'k1', data: {p: 11}},\n\t\t\t\t\t\t{key: 'k3', data: {p: 33}},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 11, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {key: 'k3', data: {p: 33}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.updateEdited(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('clearIndexes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: null,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.clearIndexes(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('clearIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'without match',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tfilter: 'fil2',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with match',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.clearIndex(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('dataSetOutdated', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {byKey: {}},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, outdated: true},\n\t\t\t\t\t\tk2: {data: {p: 2}, outdated: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.dataSetOutdated(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('cleanupOnLogout', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducers.cleanupOnLogout(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/_common/selectors';\n\ndescribe('state/_common/selectors', function () {\n\tconst getSubState = (state) => state.sub;\n\n\tdescribe('getActive', function () {\n\t\tconst createState = (activeKey) => ({\n\t\t\tsub: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t},\n\t\t\t\tactiveKey,\n\t\t\t},\n\t\t});\n\n\t\tit('select active', function () {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tselectors.getActive(getSubState)(createState('k1')),\n\t\t\t\t{n: 1}\n\t\t\t);\n\t\t});\n\n\t\tit('select inactive', function () {\n\t\t\tassert.isNull(selectors.getActive(getSubState)(createState('k3')));\n\t\t});\n\t});\n\n\tdescribe('getActiveModels', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none with null active keys',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none with empty active keys',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none with empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tactiveKeys: ['k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: ['k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'one',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: ['k1', 'k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'two',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: ['k1', 'k2', 'k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getActiveModels(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getActiveKey', function () {\n\t\tconst state = {sub: {activeKey: 'k'}};\n\n\t\tassert.strictEqual(selectors.getActiveKey(getSubState)(state), 'k');\n\t});\n\n\tit('getActiveKeys', function () {\n\t\tconst state = {sub: {activeKeys: ['k1', 'k2']}};\n\n\t\tassert.deepStrictEqual(selectors.getActiveKeys(getSubState)(state), [\n\t\t\t'k1',\n\t\t\t'k2',\n\t\t]);\n\t});\n\n\tdescribe('getAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAll(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllActiveKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none specified',\n\t\t\t\tstate: {},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveAreaTreeLevelKey: null,\n\t\t\t\t\tactiveAttributeKey: null,\n\t\t\t\t\tactiveAttributeKeys: null,\n\t\t\t\t\tactiveCaseKey: null,\n\t\t\t\t\tactiveCaseKeys: null,\n\t\t\t\t\tactiveLayerTemplateKey: null,\n\t\t\t\t\tactivePeriodKey: null,\n\t\t\t\t\tactivePeriodKeys: null,\n\t\t\t\t\tactivePlaceKey: null,\n\t\t\t\t\tactivePlaceKeys: null,\n\t\t\t\t\tactiveScenarioKey: null,\n\t\t\t\t\tactiveScenarioKeys: null,\n\t\t\t\t\tactiveScopeKey: null,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all specified',\n\t\t\t\tstate: {\n\t\t\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\t\t\tcases: {activeKey: 'casesKey', activeKeys: ['c1', 'c2']},\n\t\t\t\t\tscenarios: {activeKey: 'scenariosKey'},\n\t\t\t\t\tplaces: {activeKey: 'placesKey', activeKeys: ['p1', 'p2']},\n\t\t\t\t\tperiods: {\n\t\t\t\t\t\tactiveKey: 'periodsKey',\n\t\t\t\t\t\tactiveKeys: ['ps1', 'ps2'],\n\t\t\t\t\t},\n\t\t\t\t\tattributes: {activeKey: 'attributesKey', activeKeys: ['a1', 'a2']},\n\t\t\t\t\tlayerTemplates: {activeKey: 'layerTemplatesKey'},\n\t\t\t\t\tareaTreeLevelKeys: {activeKey: 'areaTreeLevelKey'},\n\t\t\t\t\tspecific: {apps: {activeKey: 'appsKey'}},\n\t\t\t\t\tapp: {key: 'appKey'},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveApplicationKey: 'appsKey',\n\t\t\t\t\tactiveAreaTreeLevelKey: 'areaTreeLevelKey',\n\t\t\t\t\tactiveAttributeKey: 'attributesKey',\n\t\t\t\t\tactiveAttributeKeys: ['a1', 'a2'],\n\t\t\t\t\tactiveCaseKey: 'casesKey',\n                    activeCaseKeys: ['c1', 'c2'],\n\t\t\t\t\tactiveLayerTemplateKey: 'layerTemplatesKey',\n\t\t\t\t\tactivePeriodKey: 'periodsKey',\n\t\t\t\t\tactivePeriodKeys: ['ps1', 'ps2'],\n\t\t\t\t\tactivePlaceKey: 'placesKey',\n\t\t\t\t\tactivePlaceKeys: ['p1', 'p2'],\n\t\t\t\t\tactiveScenarioKey: 'scenariosKey',\n\t\t\t\t\tactiveScenarioKeys: null,\n\t\t\t\t\tactiveScopeKey: 'scopesKey',\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllActiveKeys(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllForActiveScope', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no active skope key',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}, {key: 'k3'}, null],\n\t\t\t},\n\t\t];\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllForActiveScope(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\torder\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByFilterOrder', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{key: 'k1'}, {key: 'k2'}, {key: 'k3'}, null],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}, {key: 'k3'}, null],\n\t\t\t},\n\t\t];\n\t\tconst filter = {scopeKey: 'scopeK'};\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByFilterOrder(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\tfilter,\n\t\t\t\t\t\torder\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getBatchByFilterOrder', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, null, null, null],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, {n: 1}, {n: 2}, null],\n\t\t\t},\n\t\t];\n\t\tconst filter = {scopeKey: 'scopeK'};\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getBatchByFilterOrder(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\tfilter,\n\t\t\t\t\t\torder\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k3',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'null key',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: null,\n\t\t\t\texpectedResult: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKey(getSubState)(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKeysAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeysAsObject(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.keys\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeys(getSubState)(test.state, test.keys),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDataByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1, data: 'data'}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1, data: 'data'}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: 'data',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getDataByKey(getSubState)(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDeletePermissionByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'user with access',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tactiveUser: {\n\t\t\t\t\t\t\t\t\t\tdelete: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'guest with access',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tguest: {\n\t\t\t\t\t\t\t\t\t\tdelete: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no access',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getDeletePermissionByKey(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\t'k1'\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getUpdatePermissionByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'user with access',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tactiveUser: {\n\t\t\t\t\t\t\t\t\t\tupdate: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'guest with access',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tguest: {\n\t\t\t\t\t\t\t\t\t\tupdate: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no access',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getUpdatePermissionByKey(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\t'k1'\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tactiveKey: 'k5',\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: 'val2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: 'val2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: 'val1',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getEditedActive(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: 'val2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: ['val1', 'val2'],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getEditedAll(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {prop: 'val'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {prop: 'val'},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getEditedAllAsObject(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null key',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: 'val2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: 'val2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: 'val2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k2',\n\t\t\t\texpectedResult: 'val2',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getEditedByKey(getSubState)(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedDataByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k2',\n\t\t\t\texpectedResult: 'datk2',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getEditedDataByKey(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.key\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {editedByKey: null},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {editedByKey: {}},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\teditedByKey: {k1: {key: 'ke1'}, k2: {key: 'ke2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: ['ke1', 'ke2'],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getEditedKeys(getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfilter: 'fil-not-present',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfilter: 'fil',\n\t\t\t\torder: 'asc',\n\t\t\t\texpectedResult: {filter: 'fil', order: 'asc'},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getIndex(getSubState)(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.filter,\n\t\t\t\t\t\ttest.order\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getIndexed', function () {\n\t\tconst state = {\n\t\t\tsub: {\n\t\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3, removed: true}},\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterByActive: {scope: true},\n\t\t\t\t\t\tfilter: {scopeKey: 'scopesKey'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t'first',\n\t\t\t\t\t\t\t'second',\n\t\t\t\t\t\t\t'third',\n\t\t\t\t\t\t\t'fourth',\n\t\t\t\t\t\t\t'fifth',\n\t\t\t\t\t\t\t'sixth',\n\t\t\t\t\t\t\t'seventh',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst filterByActive = {scope: true};\n\t\tconst filter = {scopeKey: 'scopesKey'};\n\t\tconst order = 'asc';\n\t\tconst start = 3;\n\t\tconst length = 2;\n\n\t\tconst expectedResult = [{key: 'fourth'}, {key: 'fifth'}];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getIndexed(getSubState)(\n\t\t\t\tstate,\n\t\t\t\tfilterByActive,\n\t\t\t\tfilter,\n\t\t\t\torder,\n\t\t\t\tstart,\n\t\t\t\tlength\n\t\t\t),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getIndexes', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getIndexes((state) => state.sub)({\n\t\t\t\tsub: {indexes: 'indexes'},\n\t\t\t}),\n\t\t\t'indexes'\n\t\t);\n\t});\n\n\tdescribe('getIndexChangedOn', function () {\n\t\tconst indexes = [\n\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t{filter: 'fil', order: 'desc', changedOn: '2020-01-01'},\n\t\t\t{filter: 'fil', order: 'asc'},\n\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t];\n\t\tconst filter = 'fil';\n\t\tconst state = {sub: {indexes}};\n\n\t\tit('nil changedOn', function () {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tselectors.getIndexChangedOn(getSubState)(state, filter, 'asc'),\n\t\t\t\tnull\n\t\t\t);\n\t\t});\n\n\t\tit('changedOn', function () {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tselectors.getIndexChangedOn(getSubState)(state, filter, 'desc'),\n\t\t\t\t'2020-01-01'\n\t\t\t);\n\t\t});\n\t});\n\n\tit('getIndexPage', function () {\n\t\tconst state = {\n\t\t\tsub: {\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t'first',\n\t\t\t\t\t\t\t'second',\n\t\t\t\t\t\t\t'third',\n\t\t\t\t\t\t\t'fourth',\n\t\t\t\t\t\t\t'fifth',\n\t\t\t\t\t\t\t'sixth',\n\t\t\t\t\t\t\t'seventh',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst filter = 'fil';\n\t\tconst order = 'asc';\n\t\tconst start = 3;\n\t\tconst length = 2;\n\n\t\tconst expectedResult = {3: 'fourth', 4: 'fifth'};\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getIndexPage(getSubState)(\n\t\t\t\tstate,\n\t\t\t\tfilter,\n\t\t\t\torder,\n\t\t\t\tstart,\n\t\t\t\tlength\n\t\t\t),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\t// getIndexPage selector returns object on which getIndexedPage accesses `length` property?\n\t// it.skip('getIndexedPage', function () {});\n\n\tit('getIndexTotal', function () {\n\t\tconst state = {\n\t\t\tsub: {\n\t\t\t\tindexes: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t{filter: 'fil', order: 'asc', count: 5},\n\t\t\t\t\t{filter: 'fil2', order: 'asc'},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst filter = 'fil';\n\t\tconst order = 'asc';\n\n\t\tassert.strictEqual(\n\t\t\tselectors.getIndexTotal(getSubState)(state, filter, order),\n\t\t\t5\n\t\t);\n\t});\n\n\tit('getIndexesByFilteredItem', function () {\n\t\tconst state = {\n\t\t\tsub: {\n\t\t\t\tindexes: [\n\t\t\t\t\t{filter: 'fil2', order: 'desc'},\n\t\t\t\t\t{filter: {sameProp: 'that'}, order: 'desc'},\n\t\t\t\t\t{filter: {sameProp: 'notThis'}, order: 'asc', count: 5},\n\t\t\t\t\t{filter: {sameProp: 'that'}, order: 'asc'},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst item = {\n\t\t\tdata: {\n\t\t\t\tsameProp: 'that',\n\t\t\t},\n\t\t};\n\n\t\tconst expectedResult = [\n\t\t\t{filter: {sameProp: 'that'}, order: 'desc'},\n\t\t\t{filter: {sameProp: 'that'}, order: 'asc'},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getIndexesByFilteredItem(getSubState)(state, item),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tdescribe('getKeysToLoad', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tkeys: [],\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {p: '1'},\n\t\t\t\t\t\t\tk2: {p: '2'},\n\t\t\t\t\t\t\tk3: {p: '3', outdated: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tkeys: null,\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {p: '1'},\n\t\t\t\t\t\t\tk2: {p: '2'},\n\t\t\t\t\t\t\tk3: {p: '3', outdated: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'nothing loaded',\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: ['k1', 'k2'],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all loaded',\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {p: '1'},\n\t\t\t\t\t\t\tk2: {p: '2'},\n\t\t\t\t\t\t\tk3: {p: '3', outdated: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'outdated k3, missing k5',\n\t\t\t\tkeys: ['k1', 'k3', 'k5'],\n\t\t\t\tstate: {\n\t\t\t\t\tsub: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {p: '1'},\n\t\t\t\t\t\t\tk2: {p: '2'},\n\t\t\t\t\t\t\tk3: {p: '3', outdated: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: ['k3', 'k5'],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\tselectors.getKeysToLoad(getSubState)(test.state, test.keys),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('getStateToSave', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'default state',\n\t\t\t\tgetSubState: (state) => state.sub,\n\t\t\t\tstate: {sub: {}},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'active key',\n\t\t\t\tgetSubState: (state) => state.sub,\n\t\t\t\tstate: {sub: {activeKey: 'actv'}},\n\t\t\t\texpectedResult: {activeKey: 'actv'},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'active keys',\n\t\t\t\tgetSubState: (state) => state.sub,\n\t\t\t\tstate: {sub: {activeKeys: ['k1', 'k2']}},\n\t\t\t\texpectedResult: {activeKeys: ['k1', 'k2']},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getStateToSave(test.getSubState)(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getUsesForIndex', function () {\n\t\tconst state = {\n\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\tsub: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {scope: true},\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'filter'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 5,\n\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = {scopeKey: 'scopesKey'};\n\t\tconst order = 'asc';\n\n\t\tconst expectedResult = {\n\t\t\tfilter: {\n\t\t\t\tscopeKey: 'scopesKey',\n\t\t\t},\n\t\t\torder: 'asc',\n\t\t\tuses: [{start: 5, length: 3}],\n\t\t};\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getUsesForIndex(getSubState)(state, filter, order),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getUsedIndexPages', function () {\n\t\tconst state = {\n\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\tsub: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {scope: true},\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'filter'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 5,\n\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst expectedResult = [\n\t\t\t{\n\t\t\t\tfilter: {\n\t\t\t\t\tscopeKey: 'scopesKey',\n\t\t\t\t},\n\t\t\t\torder: 'asc',\n\t\t\t\tuses: [{start: 5, length: 3}],\n\t\t\t},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getUsedIndexPages(getSubState)(state),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getUsedKeys', function () {\n\t\tconst state = {\n\t\t\tsub: {\n\t\t\t\tinUse: {\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3', ['k1', 'k3', 'k4']],\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst expectedResult = ['k1', 'k2', 'k3', 'k4'];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getUsedKeys(getSubState)(state),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getUsesWithActiveDependency', function () {\n\t\tconst state = {\n\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\tsub: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {scopeKey: 'k'},\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'filter'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 5,\n\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = {scopeKey: 'scopesKey'};\n\t\tconst order = 'asc';\n\n\t\tconst expectedResult = [\n\t\t\t{\n\t\t\t\tfilter: {\n\t\t\t\t\tscopeKey: 'filter',\n\t\t\t\t},\n\t\t\t\torder: 'asc',\n\t\t\t\tuses: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\tstart: 5,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getUsesWithActiveDependency(getSubState)(\n\t\t\t\tstate,\n\t\t\t\tfilter,\n\t\t\t\torder\n\t\t\t),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tdescribe('_mergeIntervals', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tintervals: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tintervals: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 5,\n\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 5,\n\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non overlapping unsorted',\n\t\t\t\tintervals: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 10,\n\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 3,\n\t\t\t\t\t\tlength: 4,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 8,\n\t\t\t\t\t\tlength: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 3,\n\t\t\t\t\t\tlength: 4,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 8,\n\t\t\t\t\t\tlength: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 10,\n\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'overlapping unsorted',\n\t\t\t\tintervals: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 12,\n\t\t\t\t\t\tlength: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 10,\n\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 7,\n\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 7,\n\t\t\t\t\t\tlength: 6,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'mixed',\n\t\t\t\tintervals: [\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 12,\n\t\t\t\t\t\tlength: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'invalid interval',\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tstart: 10,\n\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t},\n\t\t\t\t\t{start: 20, length: 5},\n\t\t\t\t],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{start: 10, length: 3},\n\t\t\t\t\t{start: 20, length: 5},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors._mergeIntervals(test.intervals),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport commonSelectors from '../../../../src/state/_common/selectors';\n\ndescribe('getActiveKeysByFilterByActive', function() {\n    const state = {\n        app: {\n            key: \"testing\"\n        },\n        scopes: {\n            activeKey: \"scopeA\"\n        },\n        places: {\n            activeKey: null,\n            activeKeys: [\"placeA\", \"placeB\"]\n        },\n        scenarios: {},\n        layerTemplates: {\n            activeKey: \"ltA\"\n        }\n    }\n\n    it('should omit metadata which do not have active key or keys', () => {\n        const filterByActive = {\n            scope: true,\n            place: true,\n            scenario: true,\n            layerTemplate: true\n        };\n\n        const expectedResult = {\n            scopeKey: \"scopeA\",\n            placeKeys: [\"placeA\", \"placeB\"],\n            layerTemplateKey: \"ltA\"\n        };\n        const output = commonSelectors.getActiveKeysByFilterByActive(state, filterByActive);\n        assert.deepStrictEqual(output, expectedResult);\n    });\n\n    it('should omit missing metadata', () => {\n        const filterByActive = {\n            scope: true,\n            areaTreeLevelKey: true\n        };\n\n        const expectedResult = {\n            scopeKey: \"scopeA\"\n        };\n        const output = commonSelectors.getActiveKeysByFilterByActive(state, filterByActive);\n        assert.deepStrictEqual(output, expectedResult);\n    });\n\n    it('should return null if no metadata match', () => {\n        const filterByActive = {\n            areaTreeLevelKey: true\n        };\n\n        const output = commonSelectors.getActiveKeysByFilterByActive(state, filterByActive);\n        assert.isNull(output);\n    });\n\n    it('should return null if filter by active is null', () => {\n        const filterByActive = null;\n        const output = commonSelectors.getActiveKeysByFilterByActive(state, filterByActive);\n        assert.isNull(output);\n    });\n});","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../src/state/App/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/App/actions', function () {\n\tlet dispatchedActions = [];\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tit('add', function () {\n\t\tassert.deepStrictEqual(actions.add({p: 'v'}), {\n\t\t\ttype: 'APP.RECEIVE_CONFIGURATION',\n\t\t\tconfiguration: {p: 'v'},\n\t\t});\n\t});\n\n\tit('setKey', function () {\n\t\tassert.deepStrictEqual(actions.setKey('k1'), {\n\t\t\ttype: 'APP.SET_KEY',\n\t\t\tkey: 'k1',\n\t\t});\n\t});\n\n\tit('updateLocalConfiguration', function () {\n\t\tassert.deepStrictEqual(actions.updateLocalConfiguration('update'), {\n\t\t\ttype: 'APP.UPDATE_LOCAL_CONFIGURATION',\n\t\t\tupdate: 'update',\n\t\t});\n\t});\n\n\tit('updateLocalConfiguration', function () {\n\t\tassert.deepStrictEqual(actions.updateLocalConfiguration('update'), {\n\t\t\ttype: 'APP.UPDATE_LOCAL_CONFIGURATION',\n\t\t\tupdate: 'update',\n\t\t});\n\t});\n\n\tit('setBaseUrl', function () {\n\t\tassert.deepStrictEqual(actions.setBaseUrl('http://localhost'), {\n\t\t\ttype: 'APP.SET_BASE_URL',\n\t\t\turl: 'http://localhost',\n\t\t});\n\t});\n\n\tit('setLocalConfiguration', function () {\n\t\tassert.deepStrictEqual(actions.setLocalConfiguration('pth', 'val'), {\n\t\t\ttype: 'APP.SET_LOCAL_CONFIGURATION',\n\t\t\tpath: 'pth',\n\t\t\tvalue: 'val',\n\t\t});\n\t});\n\n\tit('loadConfiguration', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/applications/filtered/configurations',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {configurations: [{key: 'k1', data: {data: {p1: 'v1'}}}]},\n\t\t\t\ttotal: 1,\n\t\t\t\tchanges: {\n\t\t\t\t\tconfigurations: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadConfiguration()(dispatch, getState)\n\t\t\t.then(() => {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'APP.RECEIVE_CONFIGURATION',\n\t\t\t\t\t\tconfiguration: {p1: 'v1'},\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\n\nconst INITIAL_STATE = {\n\tkey: null\n};\n\n/**\n * @param state\n * @param action\n * @param action.key {string}\n * @return {Object}\n */\nconst setKey = (state, action) => {\n\treturn {\n\t\t...state, key: action.key\n\t};\n};\n\nconst setBaseUrl = (state, action) => {\n\treturn {\n\t\t...state, baseUrl: action.url\n\t};\n};\n\nconst setLocalConfiguration = (state, action) => {\n\tlet path = action.path.split('.');\n\treturn {...state, localConfiguration: setHelper(state.localConfiguration, path, action.value)};\n};\n\nconst updateLocalConfiguration = (state, action) => {\n\treturn {...state, localConfiguration: state.localConfiguration ? {...state.localConfiguration, ...action.update} : action.update};\n};\n\nfunction setHelper(state, path, value) {\n\tlet remainingPath = [...path];\n\tlet currentKey = remainingPath.shift();\n\tif (remainingPath.length) {\n\t\treturn {...state, [currentKey]: setHelper(state[currentKey], remainingPath, value)};\n\t} else {\n\t\treturn {...state, [currentKey]: value};\n\t}\n}\n\nconst receiveConfiguration = (state, action) => {\n\treturn {...state, configuration: action.configuration};\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.APP.SET_BASE_URL:\n\t\t\treturn setBaseUrl(state, action);\n\t\tcase ActionTypes.APP.SET_KEY:\n\t\t\treturn setKey(state, action);\n\t\tcase ActionTypes.APP.SET_LOCAL_CONFIGURATION:\n\t\t\treturn setLocalConfiguration(state, action);\n\t\tcase ActionTypes.APP.UPDATE_LOCAL_CONFIGURATION:\n\t\t\treturn updateLocalConfiguration(state, action);\n\t\tcase ActionTypes.APP.RECEIVE_CONFIGURATION:\n\t\t\treturn receiveConfiguration(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/App/reducers';\n\ndescribe('state/App/reducers', function () {\n\tit('SET_BASE_URL', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(null, {\n\t\t\t\ttype: 'APP.SET_BASE_URL',\n\t\t\t\turl: 'http://localhost',\n\t\t\t}),\n\t\t\t{baseUrl: 'http://localhost'}\n\t\t);\n\t});\n\n\tit('SET_KEY', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(null, {\n\t\t\t\ttype: 'APP.SET_KEY',\n\t\t\t\tkey: 'k1',\n\t\t\t}),\n\t\t\t{key: 'k1'}\n\t\t);\n\t});\n\n\tit('SET_LOCAL_CONFIGURATION', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'APP.SET_LOCAL_CONFIGURATION',\n\t\t\t\t\tpath: 'pth',\n\t\t\t\t\tvalue: 'val',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{localConfiguration: {pth: 'val'}}\n\t\t);\n\t});\n\n\tit('UPDATE_LOCAL_CONFIGURATION', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'APP.UPDATE_LOCAL_CONFIGURATION',\n\t\t\t\t\tupdate: {p: 'v'},\n\t\t\t\t}\n\t\t\t),\n\t\t\t{localConfiguration: {p: 'v'}}\n\t\t);\n\t});\n\n\tit('RECEIVE_CONFIGURATION', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'APP.RECEIVE_CONFIGURATION',\n\t\t\t\t\tconfiguration: {p: 'v'},\n\t\t\t\t}\n\t\t\t),\n\t\t\t{configuration: {p: 'v'}}\n\t\t);\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/App/selectors';\n\ndescribe('state/App/selectors', function () {\n\tit('getKey', function () {\n\t\tassert.strictEqual('kk', selectors.getKey({app: {key: 'kk'}}));\n\t});\n\n\tit('getConfiguration', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getConfiguration({app: {configuration: {p: 'v'}}}, 'p'),\n\t\t\t'v'\n\t\t);\n\t});\n\n\tit('getCompleteConfiguration', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getCompleteConfiguration({\n\t\t\t\tapp: {configuration: {p: 'v'}},\n\t\t\t}),\n\t\t\t{p: 'v'}\n\t\t);\n\t});\n\n\tit('getLocalConfiguration', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getLocalConfiguration(\n\t\t\t\t{app: {localConfiguration: {p: 'v'}}},\n\t\t\t\t'p'\n\t\t\t),\n\t\t\t'v'\n\t\t);\n\t});\n\n\tit('getCompleteLocalConfiguration', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getCompleteLocalConfiguration({\n\t\t\t\tapp: {localConfiguration: {p: 'v'}},\n\t\t\t}),\n\t\t\t{p: 'v'}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../../src/state/Areas/AreaTreeLevels/actions';\nimport {resetFetch, setFetch} from '../../../../src/state/_common/request';\n\ndescribe('state/Areas/AreaTreeLevels/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('ensureIndexesWithFilterByActive', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tareas: {\n\t\t\t\tareaTrees: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/areaTreeLevels',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {areaTreeLevels: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tareaTreeLevels: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureIndexesWithFilterByActive({name: 'fil'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.INDEX.ADD',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('refreshUses', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tareas: {\n\t\t\t\tareaTreeLevels: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1'},\n\t\t\t\t\t\tk2: {key: 'k2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/areaTreeLevels',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {areaTreeLevels: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tareaTreeLevels: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.refreshUses()(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{type: 'AREAS.AREA_TREE_LEVELS.INDEX.CLEAR_ALL'},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('setActiveKey', function () {\n\t\tactions.setActiveKey('k1')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'AREAS.AREA_TREE_LEVELS.SET_ACTIVE_KEY', key: 'k1'},\n\t\t]);\n\t});\n\n\tit('useIndexed', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t\tareas: {\n\t\t\t\tareaTreeLevels: {},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/areaTreeLevels',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {areaTreeLevels: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tareaTreeLevels: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.INDEXED.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedClear', function () {\n\t\tassert.deepStrictEqual(actions.useIndexedClear('cid'), {\n\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR',\n\t\t\tcomponentId: 'cid',\n\t\t});\n\t});\n\n\tit('useKeys', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tareas: {\n\t\t\t\tareaTreeLevels: {\n\t\t\t\t\tbyKey: {k1: {key: 'k1'}, k2: {key: 'k2'}},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn actions\n\t\t\t.useKeys(\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'cid'\n\t\t\t)(dispatch)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.KEYS.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n});\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common, {DEFAULT_INITIAL_STATE} from '../../_common/reducers';\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.SET_ACTIVE_KEY:\n\t\t\treturn common.setActive(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.USE.KEYS.REGISTER:\n\t\t\treturn common.useKeysRegister(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.USE.KEYS.CLEAR:\n\t\t\treturn common.useKeysClear(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREE_LEVELS.INDEX.CLEAR_ALL:\n\t\t\treturn common.clearIndexes(state, action);\n\t\tcase ActionTypes.COMMON.DATA.SET_OUTDATED:\n\t\t\treturn common.dataSetOutdated(state, action);\n\t\tcase ActionTypes.COMMON.DATA.CLEANUP_ON_LOGOUT:\n\t\t\treturn common.cleanupOnLogout(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../../src/state/Areas/AreaTreeLevels/reducers';\n\ndescribe('state/Areas/AreaTreeLevels/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'AREAS.AREA_TREE_LEVELS.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'AREAS.AREA_TREE_LEVELS.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'AREAS.AREA_TREE_LEVELS.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.SET_ACTIVE_KEY',\n\t\t\t\t\tkey: 'ak',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'ak',\n\t\t\t\t\tactiveKeys: null,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useKeysRegister', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: {comp: ['k1', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useKeysClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2'], comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'last',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREE_LEVELS.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('clearIndexes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t\taction: {type: 'AREAS.AREA_TREE_LEVELS.INDEX.CLEAR_ALL'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: null,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {type: 'AREAS.AREA_TREE_LEVELS.INDEX.CLEAR_ALL'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('dataSetOutdated', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {byKey: {}},\n\t\t\t\taction: {type: 'COMMON.DATA.SET_OUTDATED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {type: 'COMMON.DATA.SET_OUTDATED'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, outdated: true},\n\t\t\t\t\t\tk2: {data: {p: 2}, outdated: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('cleanupOnLogout', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {type: 'COMMON.DATA.CLEANUP_ON_LOGOUT'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../../src/state/Areas/AreaTreeLevels/selectors';\n\ndescribe('state/Areas/AreaTreeLevels/selectors', function () {\n\tdescribe('getAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAll(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllForActiveScope', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no active skope key',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTreeLevels: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}, {key: 'k3'}, null],\n\t\t\t},\n\t\t];\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllForActiveScope(test.state, order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getActiveKey', function () {\n\t\tconst state = {\n\t\t\tareas: {\n\t\t\t\tareaTreeLevels: {activeKey: 'k'},\n\t\t\t},\n\t\t};\n\n\t\tassert.strictEqual(selectors.getActiveKey(state), 'k');\n\t});\n\n\tdescribe('getActive', function () {\n\t\tconst createState = (activeKey) => ({\n\t\t\tareas: {\n\t\t\t\tareaTreeLevels: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t},\n\t\t\t\t\tactiveKey,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tit('select active', function () {\n\t\t\tassert.deepStrictEqual(selectors.getActive(createState('k1')), {\n\t\t\t\tn: 1,\n\t\t\t});\n\t\t});\n\n\t\tit('select inactive', function () {\n\t\t\tassert.isNull(selectors.getActive(createState('k3')));\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tareas: {\n\t\t\t\t\tareaTreeLevels: 'subst',\n\t\t\t\t},\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../../src/state/Areas/AreaTrees/actions';\nimport {resetFetch, setFetch} from '../../../../src/state/_common/request';\n\ndescribe('state/Areas/AreaTrees/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('ensureIndexesWithFilterByActive', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tareas: {\n\t\t\t\tareaTrees: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/areaTrees',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {areaTrees: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tareaTrees: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureIndexesWithFilterByActive({name: 'fil'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREES.INDEX.ADD',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('refreshUses', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tareas: {\n\t\t\t\tareaTrees: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1'},\n\t\t\t\t\t\tk2: {key: 'k2'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/areaTrees',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {areaTrees: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tareaTrees: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.refreshUses()(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{type: 'AREAS.AREA_TREES.INDEX.CLEAR_ALL'},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREES.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('setActiveKey', function () {\n\t\tactions.setActiveKey('k1')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'AREAS.AREA_TREES.SET_ACTIVE_KEY', key: 'k1'},\n\t\t]);\n\t});\n\n\tit('useIndexed', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t\tareas: {\n\t\t\t\tareaTrees: {},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/areaTrees',\n                slash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {areaTrees: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tareaTrees: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.INDEXED.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREES.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedClear', function () {\n\t\tassert.deepStrictEqual(actions.useIndexedClear('cid'), {\n\t\t\ttype: 'AREAS.AREA_TREES.USE.INDEXED.CLEAR',\n\t\t\tcomponentId: 'cid',\n\t\t});\n\t});\n\n\tit('useKeys', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tareas: {\n\t\t\t\tareaTrees: {\n\t\t\t\t\tbyKey: {k1: {key: 'k1'}, k2: {key: 'k2'}},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn actions\n\t\t\t.useKeys(\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'cid'\n\t\t\t)(dispatch)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useKeysClear', function () {\n\t\tactions.useKeysClear('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.CLEAR',\n\t\t\t\tcomponentId: 'cid',\n\t\t\t},\n\t\t]);\n\t});\n});\n","import ActionTypes from '../../../constants/ActionTypes';\nimport common, {DEFAULT_INITIAL_STATE} from '../../_common/reducers';\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.AREAS.AREA_TREES.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.SET_ACTIVE_KEY:\n\t\t\treturn common.setActive(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.USE.KEYS.REGISTER:\n\t\t\treturn common.useKeysRegister(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.USE.KEYS.CLEAR:\n\t\t\treturn common.useKeysClear(state, action);\n\t\tcase ActionTypes.AREAS.AREA_TREES.INDEX.CLEAR_ALL:\n\t\t\treturn common.clearIndexes(state, action);\n\t\tcase ActionTypes.COMMON.DATA.SET_OUTDATED:\n\t\t\treturn common.dataSetOutdated(state, action);\n\t\tcase ActionTypes.COMMON.DATA.CLEANUP_ON_LOGOUT:\n\t\t\treturn common.cleanupOnLogout(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../../src/state/Areas/AreaTrees/reducers';\n\ndescribe('state/Areas/AreaTrees/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'AREAS.AREA_TREES.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'AREAS.AREA_TREES.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'AREAS.AREA_TREES.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.SET_ACTIVE_KEY',\n\t\t\t\t\tkey: 'ak',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'ak',\n\t\t\t\t\tactiveKeys: null,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useKeysRegister', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: {comp: ['k1', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useKeysClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2'], comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'last',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'AREAS.AREA_TREES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('clearIndexes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t\taction: {type: 'AREAS.AREA_TREES.INDEX.CLEAR_ALL'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: null,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {type: 'AREAS.AREA_TREES.INDEX.CLEAR_ALL'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('dataSetOutdated', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {byKey: {}},\n\t\t\t\taction: {type: 'COMMON.DATA.SET_OUTDATED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {type: 'COMMON.DATA.SET_OUTDATED'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, outdated: true},\n\t\t\t\t\t\tk2: {data: {p: 2}, outdated: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('cleanupOnLogout', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {type: 'COMMON.DATA.CLEANUP_ON_LOGOUT'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../../src/state/Areas/AreaTrees/selectors';\n\ndescribe('state/Areas/AreaTrees/selectors', function () {\n\tdescribe('getAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAll(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllForActiveScope', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no active skope key',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}, {key: 'k3'}, null],\n\t\t\t},\n\t\t];\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllForActiveScope(test.state, order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getActiveKey', function () {\n\t\tconst state = {\n\t\t\tareas: {\n\t\t\t\tareaTrees: {activeKey: 'k'},\n\t\t\t},\n\t\t};\n\n\t\tassert.strictEqual(selectors.getActiveKey(state), 'k');\n\t});\n\n\tdescribe('getActive', function () {\n\t\tconst createState = (activeKey) => ({\n\t\t\tareas: {\n\t\t\t\tareaTrees: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t},\n\t\t\t\t\tactiveKey,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tit('select active', function () {\n\t\t\tassert.deepStrictEqual(selectors.getActive(createState('k1')), {\n\t\t\t\tn: 1,\n\t\t\t});\n\t\t});\n\n\t\tit('select inactive', function () {\n\t\t\tassert.isNull(selectors.getActive(createState('k3')));\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tareas: {\n\t\t\t\t\tareaTrees: 'subst',\n\t\t\t\t},\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n\n\tdescribe('getByKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeys(test.state, test.keys),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKeysAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tareas: {\n\t\t\t\t\t\tareaTrees: {\n\t\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeysAsObject(test.state, test.keys),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../src/state/AttributeData/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\nimport slash from \"slash\";\n\ndescribe('state/AttributeData/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('useIndexed', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t\tattributeData: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n            assert.strictEqual('http://localhost/backend/rest/data/filtered/attribute', slash(url));\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attribute: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'ATTRIBUTE_DATA.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedClear', function () {\n\t\tactions.useIndexedClear('cid')(dispatch);\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED.CLEAR',\n\t\t\t\tcomponentId: 'cid',\n\t\t\t},\n\t\t]);\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\nimport _ from 'lodash';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\n// Add should be actually update, because dataSourceKey is used as key\nconst update = (state, action) => {\n\tlet newData = {...state.byKey};\n\tif (action.data && action.data.length) {\n\t\taction.data.forEach(model => {\n\t\t\tlet previousData = newData[model.attributeDataSourceKey];\n\t\t\tif (previousData) {\n\t\t\t\tconst fidColumnName = action.filter.fidColumnName;\n\t\t\t\tconst previousFeatures = previousData.attributeData.features;\n\t\t\t\tconst nextFeatures = model.attributeData.features;\n\n\t\t\t\tlet newFeaturesAsObject = {};\n\t\t\t\t_.forEach(previousFeatures, (feature) => {\n\t\t\t\t\tnewFeaturesAsObject[feature.properties[fidColumnName]] = feature;\n\t\t\t\t});\n\n\t\t\t\t_.forEach(nextFeatures, feature => {\n\t\t\t\t\tconst key = feature.properties[fidColumnName];\n\t\t\t\t\tnewFeaturesAsObject[key] = feature;\n\t\t\t\t});\n\n\t\t\t\tnewData[model.attributeDataSourceKey] = {\n\t\t\t\t\t...newData[model.attributeDataSourceKey],\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t...newData[model.attributeDataSourceKey].attributeData,\n\t\t\t\t\t\tfeatures: Object.values(newFeaturesAsObject)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tnewData[model.attributeDataSourceKey] = model;\n\t\t\t}\n\t\t});\n\t}\n\treturn {...state, byKey: newData}\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.ATTRIBUTE_DATA.ADD:\n\t\t\treturn update(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.ADD_BATCH:\n\t\t\treturn common.addBatch(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.INDEX.ADD_BATCH:\n\t\t\treturn common.addBatchIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.USE.INDEXED_BATCH.REGISTER:\n\t\t\treturn common.registerBatchUseIndexed(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import {assert} from 'chai';\nimport reducer from '../../../src/state/AttributeData/reducers';\n\ndescribe('state/AttributeData/reducers', function () {\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'ATTRIBUTE_DATA.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n\n\tdescribe('addBatch', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_DATA.ADD_BATCH'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.ADD_BATCH',\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.ADD_BATCH',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tsomeKey: 'sk1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tsomeKey: 'sk2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tsk1: {key: 'k1', someKey: 'sk1', name: 'first'},\n\t\t\t\t\t\tsk2: {key: 'k2', someKey: 'sk2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addBatchIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.INDEX.ADD_BATCH',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t\t{someKey: 'k'},\n\t\t\t\t\t\t\t\t{someKey: 'k.1'},\n\t\t\t\t\t\t\t\t{someKey: 'k.2'},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.INDEX.ADD_BATCH',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [{someKey: 'k2'}, {someKey: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: 'k2', 1: 'k3', 2: {someKey: 'k.2'}},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerBatchUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('update', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'merge',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1'},\n\t\t\t\t\t\tk3: {\n\t\t\t\t\t\t\tkey: 'k3',\n\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\tfeatures: [{properties: {fid: 'f1'}, cv: '1'}],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeDataSourceKey: 'k2',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeDataSourceKey: 'k3',\n\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\tfeatures: [{properties: {fid: 'f2'}, cv: '2'}],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tfilter: {fidColumnName: 'fid'},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\tattributeDataSourceKey: 'k2',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk3: {\n\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\tfeatures: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcv: '1',\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\tfid: 'f1',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcv: '2',\n\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\tfid: 'f2',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tkey: 'k3',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/AttributeData/selectors';\n\ndescribe('state/AttributeData/selectors', function () {\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tattributeData: 'subst',\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n\n\tdescribe('getByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k3',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'null key',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: null,\n\t\t\t\texpectedResult: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getBatchByFilterOrder', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, null, null, null],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, {n: 1}, {n: 2}, null],\n\t\t\t},\n\t\t];\n\t\tconst filter = {scopeKey: 'scopeK'};\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getBatchByFilterOrder(test.state, filter, order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFiltered', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {v: 1, dataSourceKey: 'k1'},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tr2: {data: {v: 2}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFiltered(test.state, ['v', 1]),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFilteredGroupedByLayerKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {v: 1, attributeDataSourceKey: 'k1'},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tr2: {data: {v: 2}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tl1: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeRelationData: {\n\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFilteredGroupedByLayerKey(test.state, [\n\t\t\t\t\t\t{data: {key: 'l1'}, filter: ['v', 1]},\n\t\t\t\t\t]),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFilteredGroupedByFid', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\t\tfeatures: [{properties: {fid: 1}}],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tr2: {data: {v: 2}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{key: 1, data: {name: 1, values: []}}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFilteredGroupedByFid(test.state, [\n\t\t\t\t\t\t{data: {key: 'l1'}, filter: ['v', 1]},\n\t\t\t\t\t]),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getNamesByFid', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\t\tfeatures: [{properties: {fid: 1, p: 'v'}}],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tname: 'v',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tkey: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getNamesByFid(test.state, [\n\t\t\t\t\t\t{data: {key: 'l1'}, filter: ['v', 1]},\n\t\t\t\t\t]),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../src/state/AttributeDataSources/actions';\n\ndescribe('state/AttributeDataSources/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tthis.afterEach(function () {\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('useKeys', function () {\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributeDataSources: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}, k2: {key: 'k2'}},\n\t\t\t},\n\t\t});\n\n\t\treturn actions\n\t\t\t.useKeys(\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'cid'\n\t\t\t)(dispatch)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useKeysClear', function () {\n\t\tactions.useKeysClear('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.CLEAR',\n\t\t\t\tcomponentId: 'cid',\n\t\t\t},\n\t\t]);\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.ATTRIBUTE_DATA_SOURCES.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA_SOURCES.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA_SOURCES.USE.KEYS.REGISTER:\n\t\t\treturn common.useKeysRegister(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA_SOURCES.USE.KEYS.CLEAR:\n\t\t\treturn common.useKeysClear(state, action);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import {assert} from 'chai';\nimport reducer from '../../../src/state/AttributeDataSources/reducers';\n\ndescribe('state/AttributeDataSources/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_DATA_SOURCES.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_DATA_SOURCES.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'ATTRIBUTE_DATA_SOURCES.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useKeysRegister', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: {comp: ['k1', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useKeysClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2'], comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'last',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/AttributeDataSources/selectors';\n\ndescribe('state/AttributeDataSources/selectors', function () {\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tattributeDataSources: 'subst',\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n\n\tdescribe('getByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k3',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'null key',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: null,\n\t\t\t\texpectedResult: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeys(test.state, test.keys),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFiltered', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {v: 1, dataSourceKey: 'k1'},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tr2: {data: {v: 2}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFiltered(test.state, ['v', 1]),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFilteredGroupedByLayerKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {v: 1, attributeDataSourceKey: 'k1'},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tr2: {data: {v: 2}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tl1: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeRelationData: {\n\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFilteredGroupedByLayerKey(test.state, [\n\t\t\t\t\t\t{data: {key: 'l1'}, filter: ['v', 1]},\n\t\t\t\t\t]),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getBatchByFilterOrder', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, null, null, null],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, {n: 1}, {n: 2}, null],\n\t\t\t},\n\t\t];\n\t\tconst filter = {scopeKey: 'scopeK'};\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getBatchByFilterOrder(test.state, filter, order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFilteredDataSources', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tad1: {n: 1},\n\t\t\t\t\t\t\tad2: {n: 2},\n\t\t\t\t\t\t\tad33: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\t\tattributeKey: 'ad1',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tfilter: {\n\t\t\t\t\tattributeKey: {in: ['ad1']},\n\t\t\t\t},\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\tattributeKey: 'ad1',\n\t\t\t\t\t\tdataSource: {\n\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\tperiodKey: undefined,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFilteredDataSources(test.state, test.filter),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getFilteredDataSourcesGroupedByLayerKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeDataSources: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tad1: {n: 1},\n\t\t\t\t\t\t\tad2: {n: 2},\n\t\t\t\t\t\t\tad33: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\t\tattributeKey: 'ad1',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tlayersWithFilter: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'l1',\n\t\t\t\t\t\tattributeFilter: {\n\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\tattributeKey: 'ad1',\n\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tlayersState: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'l1',\n\t\t\t\t\t\tattributeKeys: ['ad1'],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\texpectedResult: {\n\t\t\t\t\tl1: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattributeKey: 'ad1',\n\t\t\t\t\t\t\tdataSource: {\n\t\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getFilteredDataSourcesGroupedByLayerKey(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.layersWithFilter,\n\t\t\t\t\t\ttest.layersState,\n\t\t\t\t\t\t3\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../src/state/AttributeRelations/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/AttributeRelations/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('useIndexed', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t\tattributeRelations: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/relations/filtered/attribute',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attribute: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedClearAll', function () {\n\t\tactions.useIndexedClearAll()(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR_ALL'},\n\t\t]);\n\t});\n\n\tit('useIndexedRegister', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tactions.useIndexedRegister(\n\t\t\t\t'cid',\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5\n\t\t\t),\n\t\t\t{\n\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER',\n\t\t\t\tcomponentId: 'cid',\n\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\torder: 'asc',\n\t\t\t\tstart: 1,\n\t\t\t\tlength: 5,\n\t\t\t}\n\t\t);\n\t});\n\n\tdescribe('ensureIndexed', function () {\n\t\tit('already loaded', function () {\n\t\t\tconst getState = () => ({\n\t\t\t\tapp: {\n\t\t\t\t\tlocalConfiguration: {\n\t\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tattributeRelations: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tindex: ['k1', 'k2', 'k3', 'k4', 'k5'],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tactions\n\t\t\t\t.ensureIndexed(\n\t\t\t\t\t{name: 'fil'},\n\t\t\t\t\t'asc',\n\t\t\t\t\t0,\n\t\t\t\t\t5\n\t\t\t\t)(dispatch, getState)\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tassert.deepStrictEqual(dispatchedActions, []);\n\t\t\t\t});\n\t\t});\n\n\t\tit('missing keys', function () {\n\t\t\tconst getState = () => ({\n\t\t\t\tapp: {\n\t\t\t\t\tlocalConfiguration: {\n\t\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tattributeRelations: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst dispatch = (action) => {\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\t\tif (res != null) {\n\t\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\n\t\t\t\tdispatchedActions.push(action);\n\t\t\t};\n\t\t\tsetFetch(function (url, options) {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\t'http://localhost/backend/rest/relations/filtered/attribute',\n\t\t\t\t\tslash(url)\n\t\t\t\t);\n\t\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\tnotin: ['k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t}),\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t});\n\n\t\t\t\tconst body = {\n\t\t\t\t\tdata: {attribute: {k3: {}, k4: {}}},\n\t\t\t\t\ttotal: 5,\n\t\t\t\t\tchanges: {\n\t\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: function () {\n\t\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t\t},\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tdata: JSON.stringify(body),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn actions\n\t\t\t\t.ensureIndexed(\n\t\t\t\t\t{name: 'fil'},\n\t\t\t\t\t'asc',\n\t\t\t\t\t1,\n\t\t\t\t\t5\n\t\t\t\t)(dispatch, getState)\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\tkey: {notin: ['k1', 'k2', 'k3']},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\tdata: {k3: {}, k4: {}},\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t});\n\n\t\tit('nothing loaded', function () {\n\t\t\tconst getState = () => ({\n\t\t\t\tapp: {\n\t\t\t\t\tlocalConfiguration: {\n\t\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tattributeRelations: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t});\n\t\t\tconst dispatch = (action) => {\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\t\tif (res != null) {\n\t\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn res;\n\t\t\t\t}\n\n\t\t\t\tdispatchedActions.push(action);\n\t\t\t};\n\t\t\tsetFetch(function (url, options) {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\t'http://localhost/backend/rest/relations/filtered/attribute',\n\t\t\t\t\tslash(url)\n\t\t\t\t);\n\t\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffset: 0,\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tlimit: 100,\n\t\t\t\t\t}),\n\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t});\n\n\t\t\t\tconst body = {\n\t\t\t\t\tdata: {attribute: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\t\ttotal: 5,\n\t\t\t\t\tchanges: {\n\t\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\tok: true,\n\t\t\t\t\tjson: function () {\n\t\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t\t},\n\t\t\t\t\theaders: {\n\t\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tdata: JSON.stringify(body),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn actions\n\t\t\t\t.ensureIndexed(\n\t\t\t\t\t{name: 'fil'},\n\t\t\t\t\t'asc',\n\t\t\t\t\t1,\n\t\t\t\t\t5\n\t\t\t\t)(dispatch, getState)\n\t\t\t\t.then(function () {\n\t\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t\t})\n\t\t\t\t.then(function () {\n\t\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t});\n\t\t});\n\t});\n\n\tit('ensureIndexesWithFilterByActive', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributeRelations: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/relations/filtered/attribute',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attribute: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\tactions.ensureIndexesWithFilterByActive({name: 'fil'})(\n\t\t\tdispatch,\n\t\t\tgetState\n\t\t);\n\n\t\treturn runFunctionActions({dispatch, getState}).then(function () {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\tcount: 5,\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('ensureIndexedSpecific', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributeRelations: {\n\t\t\t\tindexes: [],\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/relations/filtered/attribute',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attribute: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\tactions.ensureIndexedSpecific(\n\t\t\t{name: 'fil'},\n\t\t\t'asc',\n\t\t\t1,\n\t\t\t5,\n\t\t\t'cid',\n\t\t\ttrue\n\t\t)(dispatch, getState);\n\n\t\treturn runFunctionActions({dispatch, getState}).then(function () {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\tcount: 5,\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.ATTRIBUTE_RELATIONS.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_RELATIONS.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_RELATIONS.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR_ALL:\n\t\t\treturn common.useIndexedClearAll(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/AttributeRelations/reducers';\n\ndescribe('state/AttributeRelations/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_RELATIONS.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_RELATIONS.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'ATTRIBUTE_RELATIONS.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('useIndexedClearAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'clear all',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR_ALL',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/AttributeRelations/selectors';\n\ndescribe('state/AttributeRelations/selectors', function () {\n\tit('getIndexed', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3, removed: true}},\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterByActive: {scope: true},\n\t\t\t\t\t\tfilter: {scopeKey: 'scopesKey'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t'first',\n\t\t\t\t\t\t\t'second',\n\t\t\t\t\t\t\t'third',\n\t\t\t\t\t\t\t'fourth',\n\t\t\t\t\t\t\t'fifth',\n\t\t\t\t\t\t\t'sixth',\n\t\t\t\t\t\t\t'seventh',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst filterByActive = {scope: true};\n\t\tconst filter = {scopeKey: 'scopesKey'};\n\t\tconst order = 'asc';\n\t\tconst start = 3;\n\t\tconst length = 2;\n\n\t\tconst expectedResult = [{key: 'fourth'}, {key: 'fifth'}];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getIndexed(\n\t\t\t\tstate,\n\t\t\t\tfilterByActive,\n\t\t\t\tfilter,\n\t\t\t\torder,\n\t\t\t\tstart,\n\t\t\t\tlength\n\t\t\t),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tdescribe('getAllData', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {data: {n: 1}},\n\t\t\t\t\t\t\tk2: {data: {n: 2}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllData(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tattributeRelations: 'subst',\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n\n\tit('getFiltered', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {data: {v: 1, active: true}},\n\t\t\t\t\tk2: {data: {v: 2, active: true}},\n\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = 'active';\n\t\tconst expectedResult = [\n\t\t\t{v: 1, active: true},\n\t\t\t{v: 2, active: true},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getFiltered(state, filter),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getFilteredRelations', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {data: {v: 1, active: true}},\n\t\t\t\t\tk2: {data: {v: 2, active: true}},\n\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = {active: true};\n\t\tconst expectedResult = [\n\t\t\t{v: 1, active: true},\n\t\t\t{v: 2, active: true},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getFilteredRelations(state, filter),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getFilteredDataGroupedByLayerKey', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {data: {v: 1, active: true}},\n\t\t\t\t\tk2: {data: {v: 2, active: true}},\n\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst layers = [{data: {key: 'l1', filter: ['v', 1]}}];\n\t\tconst expectedResult = {\n\t\t\tl1: [\n\t\t\t\t{\n\t\t\t\t\tactive: true,\n\t\t\t\t\tv: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tactive: true,\n\t\t\t\t\tv: 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tactive: false,\n\t\t\t\t\tv: 3,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getFilteredDataGroupedByLayerKey(state, layers),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getDataSourceRelationsGroupedByLayerKey', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {data: {v: 1, active: true}},\n\t\t\t\t\tk2: {data: {v: 2, active: true}},\n\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst layers = [{data: {key: 'l1', filter: ['v', 1]}}];\n\t\tconst expectedResult = {\n\t\t\tl1: [\n\t\t\t\t{\n\t\t\t\t\tactive: true,\n\t\t\t\t\tv: 1,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tactive: true,\n\t\t\t\t\tv: 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tactive: false,\n\t\t\t\t\tv: 3,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getDataSourceRelationsGroupedByLayerKey(state, layers),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getDataSourceKeysGroupedByLayerKey', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'ad1',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tk2: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tv: 2,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'ad2',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tk3: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tv: 3,\n\t\t\t\t\t\t\tactive: false,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'ad3',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst layers = [{data: {key: 'l1', filter: ['v', 1]}}];\n\t\tconst expectedResult = {\n\t\t\tl1: ['ad1', 'ad2', 'ad3'],\n\t\t};\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getDataSourceKeysGroupedByLayerKey(state, layers),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getDataSourcesFromFilteredRelations', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'ad1',\n\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tk2: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tv: 2,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'ad2',\n\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = {active: true};\n\t\tconst expectedResult = [\n\t\t\t{\n\t\t\t\tattributeDataSourceKey: 'ad1',\n\t\t\t\tfidColumnName: 'fid',\n\t\t\t},\n\t\t\t{\n\t\t\t\tattributeDataSourceKey: 'ad2',\n\t\t\t\tfidColumnName: 'fid',\n\t\t\t},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getDataSourcesFromFilteredRelations(state, filter),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getDataSourceKeyFiltered', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {data: {v: 1, active: true, dataSourceKey: 'dk'}},\n\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = 'active';\n\t\tconst expectedResult = 'dk';\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getDataSourceKeyFiltered(state, filter),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tit('getFilteredDataSourceKeysWithFidColumn', function () {\n\t\tconst state = {\n\t\t\tattributeRelations: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\tattributeDataSourceKey: 'ad1',\n\t\t\t\t\t\t\tattributeKey: 'ak1',\n\t\t\t\t\t\t\tperiodKey: 'pk1',\n\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tconst filter = {\n\t\t\tattributeKey: {\n\t\t\t\tin: ['ak1'],\n\t\t\t},\n\t\t};\n\t\tconst expectedResult = [\n\t\t\t{\n\t\t\t\tattributeDataSourceKey: 'ad1',\n\t\t\t\tattributeKey: 'ak1',\n\t\t\t\tfidColumnName: 'fid',\n\t\t\t\tperiodKey: 'pk1',\n\t\t\t},\n\t\t];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getFilteredDataSourceKeysWithFidColumn(state, filter),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\t// getFilteredDataSourceKeysWithFidColumnGroupedByLayerKey,\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../src/state/Attributes/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/Attributes/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('create', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tindexes: [{filter: {applicationKey: 'ak'}}],\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tattributes: [{key: 'k1', data: {applicationKey: 'ak'}}],\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.create('k1', 'ak')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tapplicationKey: 'ak',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.CLEAR_INDEX',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tapplicationKey: 'ak',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: undefined,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('delete', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tdispatchedActions.push(res);\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {attributes: [{key: 'k1'}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'DELETE',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.delete({key: 'k1'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tdelete dispatchedActions[0]['date'];\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\ttype: 'ATTRIBUTES.MARK_DELETED',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'COMMON.EDITED.REMOVE_PROPERTY_VALUES',\n\t\t\t\t\t\tdataType: 'attributes',\n\t\t\t\t\t\tkeys: ['k1'],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('ensureIndexesWithFilterByActive', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/attributes',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attributes: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tattributes: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureIndexesWithFilterByActive({name: 'fil'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tdescribe('updateStateFromView', function () {\n\t\tit('activeKey', function () {\n\t\t\tactions.updateStateFromView({\n\t\t\t\tactiveKey: 'ak',\n\t\t\t})(dispatch);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{key: 'ak', type: 'ATTRIBUTES.SET_ACTIVE_KEY'},\n\t\t\t]);\n\t\t});\n\n\t\tit('activeKeys', function () {\n\t\t\tactions.updateStateFromView({\n\t\t\t\tactiveKeys: ['k1', 'k2'],\n\t\t\t})(dispatch);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{keys: ['k1', 'k2'], type: 'ATTRIBUTES.SET_ACTIVE_KEYS'},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('refreshUses', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tinUse: {\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {key: 'k1'},\n\t\t\t\t\tk2: {key: 'k2'},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/attributes',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attributes: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattributes: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.refreshUses()(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{type: 'ATTRIBUTES.INDEX.CLEAR_ALL'},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('saveEdited', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}},\n\t\t\t\teditedByKey: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {attributes: [{key: 'k1', data: {prop: 'val'}}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'PUT',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attributes: [{key: 'k1', data: {prop: 'val'}}]},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tusers: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.saveEdited('k1')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.ADD',\n\t\t\t\t\t\tdata: [{key: 'k1', data: {prop: 'val'}}],\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\tproperty: 'prop',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('setActiveKey', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\n\t\tactions.setActiveKey('k1')(dispatch);\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{type: 'ATTRIBUTES.SET_ACTIVE_KEY', key: 'k1'},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('updateEdited', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}},\n\t\t\t\teditedByKey: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t},\n\t\t});\n\t\tactions.updateEdited('attributes', 'k1', {\n\t\t\tkey: 'k1',\n\t\t\tdata: {prop: 'val'},\n\t\t})(dispatch, getState);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'ATTRIBUTES.EDITED.UPDATE',\n\t\t\t\tdata: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'attributes',\n\t\t\t\t\t\tdata: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t]);\n\t});\n\n\tit('useIndexed', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/attributes',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attributes: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattributes: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedClear', function () {\n\t\tactions.useIndexedClear('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{componentId: 'cid', type: 'ATTRIBUTES.USE.INDEXED.CLEAR'},\n\t\t]);\n\t});\n\n\tit('useKeys', function () {\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}, k2: {key: 'k2'}},\n\t\t\t},\n\t\t});\n\n\t\treturn actions\n\t\t\t.useKeys(\n\t\t\t\t['k1', 'k2'],\n\t\t\t\t'cid'\n\t\t\t)(dispatch)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\t\ttype: 'ATTRIBUTES.USE.KEYS.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useKeysClear', function () {\n\t\tactions.useKeysClear('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{componentId: 'cid', type: 'ATTRIBUTES.USE.KEYS.CLEAR'},\n\t\t]);\n\t});\n\n\tit('useIndexedBatch', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tscopes: {activeKey: 's1'},\n\t\t\tperiods: {activeKey: 'pe1'},\n\t\t\tplaces: {activeKey: 'pl1'},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/data/filtered/attributes',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\torder: 'asc',\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attributes: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattributes: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexedBatch(\n\t\t\t\t{name: 'fil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t'cid',\n\t\t\t\t'k1',\n\t\t\t\t{}\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD_BATCH',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('loadAttributeData', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tscopes: {activeKey: 's1'},\n\t\t\tperiods: {activeKey: 'pe1'},\n\t\t\tplaces: {activeKey: 'pl1'},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/data/filtered/attributes',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\torder: null,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attributes: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattributes: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadAttributeData({name: 'fil'}, 'cid')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\tfilterByActive: null,\n\t\t\t\t\t\torder: null,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD_BATCH',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: null,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tkey: 'attributeDataSourceKey',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nconst DEFAULT_ATTRIBUTE_COLLOR = '#008000';\n\nconst addAttribute = (state, action) => {\n\tif (action && action.data && action.data.length) {\n\t\taction.data.forEach(model => {\n\t\t\t//check attribute color\n\t\t\t//if no color, then use default\n\t\t\tif(!model.data.color) {\n\t\t\t\tmodel.data.color = DEFAULT_ATTRIBUTE_COLLOR;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn common.add(state, action);\n}\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.ATTRIBUTES.ADD:\n\t\t\treturn addAttribute(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.DELETE:\n\t\t\treturn common.remove(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.EDITED.REMOVE:\n\t\t\treturn common.removeEdited(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.EDITED.REMOVE_PROPERTY:\n\t\t\treturn common.removeEditedProperty(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.EDITED.UPDATE:\n\t\t\treturn common.updateEdited(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.INDEX.CLEAR_ALL:\n\t\t\treturn common.clearIndexes(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.INDEX.CLEAR_INDEX:\n\t\t\treturn common.clearIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.MARK_DELETED:\n\t\t\treturn common.markDeleted(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.SET_ACTIVE_KEY:\n\t\t\treturn common.setActive(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.USE.KEYS.REGISTER:\n\t\t\treturn common.useKeysRegister(state, action);\n\t\tcase ActionTypes.ATTRIBUTES.USE.KEYS.CLEAR:\n\t\t\treturn common.useKeysClear(state, action);\n\n\t\tcase ActionTypes.COMMON.DATA.SET_OUTDATED:\n\t\t\treturn common.dataSetOutdated(state, action);\n\t\tcase ActionTypes.COMMON.DATA.CLEANUP_ON_LOGOUT:\n\t\t\treturn common.cleanupOnLogout(state, action);\n\t\tcase ActionTypes.COMMON.EDITED.REMOVE_PROPERTY_VALUES:\n\t\t\treturn common.removeEditedPropertyValues(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/Attributes/reducers';\n\ndescribe('state/Attributes/reducers', function () {\n\tdescribe('addAttribute', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTES.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTES.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tdata: {name: 'first'},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\t\tcolor: 'green',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tdata: {name: 'first', color: '#008000'},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk2: {key: 'k2', data: {name: 'second', color: 'green'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'ATTRIBUTES.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('remove', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {byKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.DELETE',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {byKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.DELETE',\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEdited', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {editedByKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {editedByKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE',\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEditedProperty', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: null},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: null},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched last property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('updateEdited', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.UPDATE',\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.EDITED.UPDATE',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{key: 'k1', data: {p: 11}},\n\t\t\t\t\t\t{key: 'k3', data: {p: 33}},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 11, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {key: 'k3', data: {p: 33}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('clearIndexes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.CLEAR_ALL',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: null,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.CLEAR_ALL',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('clearIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'without match',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.CLEAR_INDEX',\n\t\t\t\t\tfilter: 'fil2',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with match',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.INDEX.CLEAR_INDEX',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('markDeleted', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non matching key',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.MARK_DELETED',\n\t\t\t\t\tkey: 'sk',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matching key',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {sk: {v: 0}, nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.MARK_DELETED',\n\t\t\t\t\tkey: 'sk',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {sk: {v: 0, removed: true}, nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.SET_ACTIVE_KEY',\n\t\t\t\t\tkey: 'ak',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'ak',\n\t\t\t\t\tactiveKeys: null,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useKeysRegister', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: {comp: ['k1', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useKeysClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2'], comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'last',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('dataSetOutdated', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {byKey: {}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'COMMON.DATA.SET_OUTDATED',\n\t\t\t\t},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'COMMON.DATA.SET_OUTDATED',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, outdated: true},\n\t\t\t\t\t\tk2: {data: {p: 2}, outdated: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('cleanupOnLogout', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'COMMON.DATA.CLEANUP_ON_LOGOUT',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEditedPropertyValues', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'updated',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop in keys',\n\t\t\t\t\t\t\t\tactionKey: 'ak1',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop not in keys',\n\t\t\t\t\t\t\t\tactionKey: 'nak2',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk3: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak3.1', 'ak3.2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk4: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop not in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak4.1', 'ak4.2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'COMMON.EDITED.REMOVE_PROPERTY_VALUES',\n\t\t\t\t\tdataType: 'actions',\n\t\t\t\t\tkeys: ['ak1', 'ak3.2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop in keys',\n\t\t\t\t\t\t\t\tactionKey: null,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'key prop not in keys',\n\t\t\t\t\t\t\t\tactionKey: 'nak2',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk3: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak3.1'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tk4: {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tname: 'multi key prop not in keys',\n\t\t\t\t\t\t\t\tactionKeys: ['ak4.1', 'ak4.2'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/Attributes/selectors';\n\ndescribe('state/Attributes/selectors', function () {\n\tdescribe('getAttributes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAttributes(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getActive', function () {\n\t\tconst createState = (activeKey) => ({\n\t\t\tattributes: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t},\n\t\t\t\tactiveKey,\n\t\t\t},\n\t\t});\n\n\t\tit('select active', function () {\n\t\t\tassert.deepStrictEqual(selectors.getActive(createState('k1')), {\n\t\t\t\tn: 1,\n\t\t\t});\n\t\t});\n\n\t\tit('select inactive', function () {\n\t\t\tassert.isNull(selectors.getActive(createState('k3')));\n\t\t});\n\t});\n\n\tit('getActiveKey', function () {\n\t\tconst state = {attributes: {activeKey: 'k'}};\n\n\t\tassert.strictEqual(selectors.getActiveKey(state), 'k');\n\t});\n\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k3',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'null key',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: null,\n\t\t\t\texpectedResult: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeys(test.state, test.keys),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDataByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1, data: 'data'}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1, data: 'data'}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: 'data',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getDataByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDeletePermissionByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'user with access',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tactiveUser: {\n\t\t\t\t\t\t\t\t\t\tdelete: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'guest with access',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tguest: {\n\t\t\t\t\t\t\t\t\t\tdelete: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no access',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getDeletePermissionByKey(test.state, 'k1'),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedDataByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k2',\n\t\t\t\texpectedResult: 'datk2',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getEditedDataByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getUpdatePermissionByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'user with access',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tactiveUser: {\n\t\t\t\t\t\t\t\t\t\tupdate: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'guest with access',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tguest: {\n\t\t\t\t\t\t\t\t\t\tupdate: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no access',\n\t\t\t\tstate: {\n\t\t\t\t\tattributes: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getUpdatePermissionByKey(test.state, 'k1'),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getStateToSave', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'default state',\n\t\t\t\tstate: {attributes: {}},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'active key',\n\t\t\t\tstate: {attributes: {activeKey: 'actv'}},\n\t\t\t\texpectedResult: {activeKey: 'actv'},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'active keys',\n\t\t\t\tstate: {attributes: {activeKeys: ['k1', 'k2']}},\n\t\t\t\texpectedResult: {activeKeys: ['k1', 'k2']},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getStateToSave(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tattributes: 'subst',\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../src/state/AttributeSets/actions';\n\ndescribe('state/AttributeSets/actions', function () {\n\tlet dispatchedActions = [];\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tafterEach(function () {\n\t\tclearDispatchedActions();\n\t});\n\n\tit('setActiveKeys', function () {\n\t\tactions.setActiveKeys(['k1', 'k2'])(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'ATTRIBUTE_SETS.SET_ACTIVE_KEYS', keys: ['k1', 'k2']},\n\t\t]);\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE,\n\tactiveKeys: null\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.ATTRIBUTE_SETS.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_SETS.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_SETS.SET_ACTIVE_KEYS:\n\t\t\treturn common.setActiveMultiple(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/AttributeSets/reducers';\n\ndescribe('state/AttributeSets/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_SETS.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_SETS.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_SETS.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_SETS.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_SETS.ADD_UNRECEIVED', keys: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_SETS.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActiveMultiple', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'setActiveMultiple',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_SETS.SET_ACTIVE_KEYS',\n\t\t\t\t\tkeys: ['aks1', 'aks2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: null,\n\t\t\t\t\tactiveKeys: ['aks1', 'aks2'],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/AttributeSets/selectors';\n\ndescribe('state/AttributeSets/selectors', function () {\n\tdescribe('getActive', function () {\n\t\tconst createState = (activeKey) => ({\n\t\t\tattributeSets: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t},\n\t\t\t\tactiveKey,\n\t\t\t},\n\t\t});\n\n\t\tit('select active', function () {\n\t\t\tassert.deepStrictEqual(selectors.getActive(createState('k1')), {\n\t\t\t\tn: 1,\n\t\t\t});\n\t\t});\n\n\t\tit('select inactive', function () {\n\t\t\tassert.isNull(selectors.getActive(createState('k3')));\n\t\t});\n\t});\n\n\tit('getActiveKeys', function () {\n\t\tconst state = {attributeSets: {activeKeys: ['k1', 'k2']}};\n\n\t\tassert.deepStrictEqual(selectors.getActiveKeys(state), ['k1', 'k2']);\n\t});\n\n\tdescribe('getAttributeSets', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAttributeSets(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByTopics', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 't0',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk2: {n: 2, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk3: {n: 3, data: {topic: 't2'}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttopics: ['t0'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 't1',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk2: {n: 2, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk3: {n: 3, data: {topic: 't2'}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttopics: ['t1'],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{n: 1, data: {topic: 't1'}},\n\t\t\t\t\t{n: 2, data: {topic: 't1'}},\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 't2',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk2: {n: 2, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk3: {n: 3, data: {topic: 't2'}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttopics: ['t2'],\n\t\t\t\texpectedResult: [{n: 3, data: {topic: 't2'}}],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 't1, t2',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk2: {n: 2, data: {topic: 't1'}},\n\t\t\t\t\t\t\tk3: {n: 3, data: {topic: 't2'}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttopics: ['t1', 't2'],\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{n: 1, data: {topic: 't1'}},\n\t\t\t\t\t{n: 2, data: {topic: 't1'}},\n\t\t\t\t\t{n: 3, data: {topic: 't2'}},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByTopics(test.state, test.topics),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getStateToSave', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'default state',\n\t\t\t\tstate: {attributeSets: {}},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'active key',\n\t\t\t\tstate: {attributeSets: {activeKey: 'actv'}},\n\t\t\t\texpectedResult: {activeKey: 'actv'},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'active keys',\n\t\t\t\tstate: {attributeSets: {activeKeys: ['k1', 'k2']}},\n\t\t\t\texpectedResult: {activeKeys: ['k1', 'k2']},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getStateToSave(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getUniqueAttributeKeysForTopics', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeSets: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t\t\tdata: {topic: 't1', attributes: ['at1', 'at2']},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\t\tn: 2,\n\t\t\t\t\t\t\t\tdata: {topic: 't1', attributes: ['at1', 'at3']},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk3: {n: 3, data: {topic: 't2', attributes: []}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\ttopics: ['t1', 't2'],\n\t\t\t\texpectedResult: ['at1', 'at2', 'at3'],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getUniqueAttributeKeysForTopics(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.topics\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../src/state/AttributeStatistics/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/AttributeStatistics/actions', function () {\n\tlet dispatchedActions = [];\n\n\tthis.afterEach(function () {\n\t\tresetFetch();\n\t\tdispatchedActions = [];\n\t});\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tit('loadFilteredData', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tscopes: {activeKey: 's1'},\n\t\t\tperiods: {activeKey: 'pe1'},\n\t\t\tplaces: {activeKey: 'pl1'},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/statistic/filtered/attribute',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\torder: null,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attribute: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.loadFilteredData({name: 'fil'}, 'cid')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\tfilterByActive: null,\n\t\t\t\t\t\torder: null,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.INDEX.ADD_BATCH',\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: null,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tkey: 'attributeDataSourceKey',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.ADD_BATCH:\n\t\t\treturn common.addBatch(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.INDEX.ADD_BATCH:\n\t\t\treturn common.addBatchIndex(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_STATISTICS.USE.INDEXED_BATCH.REGISTER:\n\t\t\treturn common.registerBatchUseIndexed(state, action);\n\t\tcase ActionTypes.ATTRIBUTE_DATA_SOURCES.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}","import {assert} from 'chai';\nimport reducer from '../../../src/state/AttributeStatistics/reducers';\n\ndescribe('state/AttributeStatistics/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_STATISTICS.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_STATISTICS.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addBatch', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_STATISTICS.ADD_BATCH'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_STATISTICS.ADD_BATCH', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.ADD_BATCH',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tsomeKey: 'sk1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tsomeKey: 'sk2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tsk1: {key: 'k1', someKey: 'sk1', name: 'first'},\n\t\t\t\t\t\tsk2: {key: 'k2', someKey: 'sk2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'ATTRIBUTE_STATISTICS.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: null,\n\t\t\t\t},\n\t\t\t\taction: {type: 'ATTRIBUTE_STATISTICS.ADD_UNRECEIVED', keys: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.ADD_UNRECEIVED',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addBatchIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.INDEX.ADD_BATCH',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t\t{someKey: 'k'},\n\t\t\t\t\t\t\t\t{someKey: 'k.1'},\n\t\t\t\t\t\t\t\t{someKey: 'k.2'},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.INDEX.ADD_BATCH',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tkey: 'someKey',\n\t\t\t\t\tdata: [{someKey: 'k2'}, {someKey: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: 'k2', 1: 'k3', 2: {someKey: 'k.2'}},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerBatchUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_STATISTICS.USE.INDEXED_BATCH.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'ATTRIBUTE_DATA_SOURCES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/AttributeStatistics/selectors';\n\ndescribe('state/AttributeStatistics/selectors', function () {\n\tdescribe('getByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k3',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'null key',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: null,\n\t\t\t\texpectedResult: undefined,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: {\n\t\t\t\t\tn: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getBatchByFilterOrder', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, null, null, null],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeStatistics: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [null, {n: 1}, {n: 2}, null],\n\t\t\t},\n\t\t];\n\t\tconst filter = {scopeKey: 'scopeK'};\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getBatchByFilterOrder(test.state, filter, order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tattributeStatistics: 'subst',\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../src/state/Cases/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/Cases/actions', function () {\n\tlet dispatchedActions = [];\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tresetFetch();\n\t\tclearDispatchedActions();\n\t});\n\n\tit('add', function () {\n\t\tactions.add('data', 'filter')(dispatch);\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'CASES.ADD', data: ['data'], filter: 'filter'},\n\t\t]);\n\t});\n\n\tit('create', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tcases: {\n\t\t\t\tindexes: [{filter: {applicationKey: 'ak'}}],\n\t\t\t},\n\t\t});\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {cases: [{key: 'k1', data: {applicationKey: 'ak'}}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.create('k1', 'ak')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CASES.ADD',\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tapplicationKey: 'ak',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CASES.INDEX.CLEAR_INDEX',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tapplicationKey: 'ak',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: undefined,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('delete', function () {\n\t\tconst getSubState = (state) => state.sub;\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tcases: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tdispatchedActions.push(res);\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {cases: [{key: 'k1'}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'DELETE',\n\t\t\t});\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(JSON.parse(options.body));\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: options.body,\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.delete({key: 'k1'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tdelete dispatchedActions[0]['date'];\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\ttype: 'CASES.MARK_DELETED',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'COMMON.EDITED.REMOVE_PROPERTY_VALUES',\n\t\t\t\t\t\tdataType: 'cases',\n\t\t\t\t\t\tkeys: ['k1'],\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('ensureIndexesWithFilterByActive', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tcases: {\n\t\t\t\tinUse: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilterByActive: {name: 'fil'},\n\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/cases',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {cases: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tcases: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.ensureIndexesWithFilterByActive({name: 'fil'})(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CASES.INDEX.ADD',\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tname: 'fil',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}, k3: {}, k4: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('refreshUses', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tcases: {\n\t\t\t\tinUse: {\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\t\t\tlength: 3,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {key: 'k1'},\n\t\t\t\t\tk2: {key: 'k2'},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/cases',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {cases: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tcases: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.refreshUses()(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{type: 'CASES.INDEX.CLEAR_ALL'},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'CASES.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('saveEdited', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tcases: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}},\n\t\t\t\teditedByKey: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tdata: {cases: [{key: 'k1', data: {prop: 'val'}}]},\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'PUT',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {cases: [{key: 'k1', data: {prop: 'val'}}]},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tcases: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.saveEdited('k1')(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CASES.ADD',\n\t\t\t\t\t\tdata: [{key: 'k1', data: {prop: 'val'}}],\n\t\t\t\t\t\tfilter: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CASES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\tproperty: 'prop',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('updateEdited', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tcases: {\n\t\t\t\tbyKey: {k1: {key: 'k1'}},\n\t\t\t\teditedByKey: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t},\n\t\t});\n\t\tactions.updateEdited('users', 'k1', {\n\t\t\tkey: 'k1',\n\t\t\tdata: {prop: 'val'},\n\t\t})(dispatch, getState);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{\n\t\t\t\ttype: 'CASES.EDITED.UPDATE',\n\t\t\t\tdata: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'users',\n\t\t\t\t\t\tdata: {k1: {key: 'k1', data: {prop: 'val'}}},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t]);\n\t});\n\n\tdescribe('updateStateFromView', function () {\n\t\tit('activeKey', function () {\n\t\t\tactions.updateStateFromView({\n\t\t\t\tactiveKey: 'ak',\n\t\t\t})(dispatch);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{key: 'ak', type: 'CASES.SET_ACTIVE_KEY'},\n\t\t\t]);\n\t\t});\n\n\t\tit('activeKeys', function () {\n\t\t\tactions.updateStateFromView({\n\t\t\t\tactiveKeys: ['k1', 'k2'],\n\t\t\t})(dispatch);\n\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{keys: ['k1', 'k2'], type: 'CASES.SET_ACTIVE_KEYS'},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('useIndexed', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributes: {activeKey: 'k1'},\n\t\t\tscopes: {activeKey: 'k1'},\n\t\t\tperiods: {activeKey: 'k1'},\n\t\t\tplaces: {activeKey: 'k1'},\n\t\t\tcases: {},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/metadata/filtered/cases',\n\t\t\t\tslash(url)\n\t\t\t);\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {cases: {k1: {}, k2: {}}},\n\t\t\t\ttotal: 2,\n\t\t\t\tchanges: {\n\t\t\t\t\tcases: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\treturn actions\n\t\t\t.useIndexed(\n\t\t\t\t{name: 'afil'},\n\t\t\t\t{name: 'fil'},\n\t\t\t\t'asc',\n\t\t\t\t1,\n\t\t\t\t5,\n\t\t\t\t'cid'\n\t\t\t)(dispatch, getState)\n\t\t\t.then(function () {\n\t\t\t\treturn runFunctionActions({dispatch, getState});\n\t\t\t})\n\t\t\t.then(function () {\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t\t{\n\t\t\t\t\t\tcomponentId: 'cid',\n\t\t\t\t\t\tfilterByActive: {name: 'afil'},\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tlength: 5,\n\t\t\t\t\t\ttype: 'CASES.USE.INDEXED.REGISTER',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {name: 'fil'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\tstart: 1,\n\t\t\t\t\t\tdata: {k1: {}, k2: {}},\n\t\t\t\t\t\tchangedOn: '2020-01-01',\n\t\t\t\t\t\ttype: 'CASES.INDEX.ADD',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t});\n\t});\n\n\tit('useIndexedClear', function () {\n\t\tactions.useIndexedClear('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{componentId: 'cid', type: 'CASES.USE.INDEXED.CLEAR'},\n\t\t]);\n\t});\n\n\tit('useKeysClear', function () {\n\t\tactions.useKeysClear('cid')(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{componentId: 'cid', type: 'CASES.USE.KEYS.CLEAR'},\n\t\t]);\n\t});\n\n\tit('setActiveKey', function () {\n\t\tconst getState = () => ({\n\t\t\tcases: {},\n\t\t});\n\n\t\tactions.setActiveKey('k1', {name: 'fil'})(dispatch, getState);\n\n\t\treturn runFunctionActions({dispatch, getState}).then(function () {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\tkey: 'k1',\n\t\t\t\t\ttype: 'CASES.SET_ACTIVE_KEY',\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('setActiveKeys', function () {\n\t\tconst getState = () => ({\n\t\t\tcases: {},\n\t\t});\n\n\t\tactions.setActiveKeys(['k1', 'k2'], {name: 'fil'})(dispatch, getState);\n\n\t\treturn runFunctionActions({dispatch, getState}).then(function () {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t\ttype: 'CASES.SET_ACTIVE_KEYS',\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\nimport common from '../_common/reducers';\n\nimport {DEFAULT_INITIAL_STATE} from \"../_common/reducers\";\n\nconst INITIAL_STATE = {\n\t...DEFAULT_INITIAL_STATE\n};\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.CASES.ADD:\n\t\t\treturn common.add(state, action);\n\t\tcase ActionTypes.CASES.ADD_UNRECEIVED:\n\t\t\treturn common.addUnreceivedKeys(state, action);\n\t\tcase ActionTypes.CASES.DELETE:\n\t\t\treturn common.remove(state, action);\n\t\tcase ActionTypes.CASES.EDITED.REMOVE:\n\t\t\treturn common.removeEdited(state, action);\n\t\tcase ActionTypes.CASES.EDITED.REMOVE_PROPERTY:\n\t\t\treturn common.removeEditedProperty(state, action);\n\t\tcase ActionTypes.CASES.EDITED.UPDATE:\n\t\t\treturn common.updateEdited(state, action);\n\t\tcase ActionTypes.CASES.INDEX.ADD:\n\t\t\treturn common.addIndex(state, action);\n\t\tcase ActionTypes.CASES.INDEX.CLEAR_ALL:\n\t\t\treturn common.clearIndexes(state, action);\n\t\tcase ActionTypes.CASES.INDEX.CLEAR_INDEX:\n\t\t\treturn common.clearIndex(state, action);\n\t\tcase ActionTypes.CASES.MARK_DELETED:\n\t\t\treturn common.markDeleted(state, action);\n\t\tcase ActionTypes.CASES.SET_ACTIVE_KEY:\n\t\t\treturn common.setActive(state, action);\n\t\tcase ActionTypes.CASES.SET_ACTIVE_KEYS:\n\t\t\treturn common.setActiveMultiple(state, action);\n\t\tcase ActionTypes.CASES.USE.INDEXED.CLEAR:\n\t\t\treturn common.useIndexedClear(state, action);\n\t\tcase ActionTypes.CASES.USE.INDEXED.REGISTER:\n\t\t\treturn common.registerUseIndexed(state, action);\n\t\tcase ActionTypes.CASES.USE.KEYS.REGISTER:\n\t\t\treturn common.useKeysRegister(state, action);\n\t\tcase ActionTypes.CASES.USE.KEYS.CLEAR:\n\t\t\treturn common.useKeysClear(state, action);\n\t\tcase ActionTypes.COMMON.DATA.SET_OUTDATED:\n\t\t\treturn common.dataSetOutdated(state, action);\n\t\tcase ActionTypes.COMMON.DATA.CLEANUP_ON_LOGOUT:\n\t\t\treturn common.cleanupOnLogout(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/Cases/reducers';\n\ndescribe('state/Cases/reducers', function () {\n\tdescribe('add', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'CASES.ADD'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'CASES.ADD', data: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.ADD',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k1',\n\t\t\t\t\t\t\tname: 'first',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'k2',\n\t\t\t\t\t\t\tname: 'second',\n\t\t\t\t\t\t\toutdated: true,\n\t\t\t\t\t\t\tunreceived: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', name: 'first'},\n\t\t\t\t\t\tk2: {key: 'k2', name: 'second'},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addUnreceivedKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'CASES.ADD_UNRECEIVED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'CASES.ADD_UNRECEIVED', keys: []},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some keys',\n\t\t\t\tstate: {byKey: null},\n\t\t\t\taction: {type: 'CASES.ADD_UNRECEIVED', keys: ['k1', 'k2']},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {key: 'k1', unreceived: true},\n\t\t\t\t\t\tk2: {key: 'k2', unreceived: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('remove', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {byKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.DELETE',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {byKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.DELETE',\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('removeEdited', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {editedByKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.REMOVE',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {k3: 3},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'all',\n\t\t\t\tstate: {editedByKey: {k1: 1, k2: 2, k3: 3}},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.REMOVE',\n\t\t\t\t\tkeys: ['k1', 'k2', 'k3'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('removeEditedProperty', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: null},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: null},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2, p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p2: 22}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched last property',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.REMOVE_PROPERTY',\n\t\t\t\t\tkey: 'k2',\n\t\t\t\t\tproperty: 'p',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, p2: 12}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('updateEdited', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.UPDATE',\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tstate: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 1, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.EDITED.UPDATE',\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t{key: 'k1', data: {p: 11}},\n\t\t\t\t\t\t{key: 'k3', data: {p: 33}},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\teditedByKey: {\n\t\t\t\t\t\tk1: {data: {p: 11, ep: 2}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {key: 'k3', data: {p: 33}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('addIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty data',\n\t\t\t\tstate: {indexes: [{filter: 'fil', order: 'asc', index: 'idx'}]},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tdata: [],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: 'idx',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'new data',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tindex: [{key: 'k'}, {key: 'k.1'}, {key: 'k.2'}],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.INDEX.ADD',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\tcount: 2,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\tdata: [{key: 'k2'}, {key: 'k3'}],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchangedOn: 'some time',\n\t\t\t\t\t\t\tcount: 2,\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\tindex: {0: {key: 'k'}, 1: 'k2', 2: 'k3'},\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('clearIndexes', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [],\n\t\t\t\t},\n\t\t\t\taction: {type: 'CASES.INDEX.CLEAR_ALL'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: null,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {type: 'CASES.INDEX.CLEAR_ALL'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('clearIndex', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'without match',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.INDEX.CLEAR_INDEX',\n\t\t\t\t\tfilter: 'fil2',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with match',\n\t\t\t\tstate: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t\t\tindex: ['v1', 'v2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.INDEX.CLEAR_INDEX',\n\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\tcount: null,\n\t\t\t\t\t\t\tindex: null,\n\t\t\t\t\t\t\tchangedOn: null,\n\t\t\t\t\t\t\toutdated: ['v1', 'v2'],\n\t\t\t\t\t\t\toutdatedCount: 5,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter: 'fil',\n\t\t\t\t\t\t\torder: 'desc',\n\t\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\t\tindex: ['v2.1', 'v2.2'],\n\t\t\t\t\t\t\tchangedOn: 'changed on2',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('markDeleted', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non matching key',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.MARK_DELETED',\n\t\t\t\t\tkey: 'sk',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matching key',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {sk: {v: 0}, nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.MARK_DELETED',\n\t\t\t\t\tkey: 'sk',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {sk: {v: 0, removed: true}, nk: {v: 1}, nk2: {v: 2}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActive', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.SET_ACTIVE_KEY',\n\t\t\t\t\tkey: 'ak',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: 'ak',\n\t\t\t\t\tactiveKeys: null,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('setActiveMultiple', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'setActiveMultiple',\n\t\t\t\tstate: {\n\t\t\t\t\tactiveKey: 'k1',\n\t\t\t\t\tactiveKeys: ['ks1', 'ks2'],\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.SET_ACTIVE_KEYS',\n\t\t\t\t\tkeys: ['aks1', 'aks2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tactiveKey: null,\n\t\t\t\t\tactiveKeys: ['aks1', 'aks2'],\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tassert.deepStrictEqual(\n\t\t\t\treducer(test.state, test.action),\n\t\t\t\ttest.expectedResult\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('useIndexedClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'matched index',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {indexes: {some: 'some', some3: 'some3'}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.INDEXED.CLEAR',\n\t\t\t\t\tcomponentId: 'some3',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {indexes: {some: 'some'}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('registerUseIndexed', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.INDEXED.REGISTER',\n\t\t\t\t\tcomponentId: 'compId',\n\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\tfilter: 'f',\n\t\t\t\t\torder: 'asc',\n\t\t\t\t\tstart: 4,\n\t\t\t\t\tlength: 2,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tindexes: {\n\t\t\t\t\t\t\tcompId: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: 'fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfilterByActive: '_fba',\n\t\t\t\t\t\t\t\t\tfilter: 'f',\n\t\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\t\tstart: 4,\n\t\t\t\t\t\t\t\t\tlength: 2,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useKeysRegister', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with initial keys',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {\n\t\t\t\t\t\tkeys: {comp: ['k1', 'k3']},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.KEYS.REGISTER',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('useKeysClear', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'non existing',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp2',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'single',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2'], comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: {comp2: ['kc']}},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'last',\n\t\t\t\tstate: {\n\t\t\t\t\tinUse: {keys: {comp: ['k1', 'k3', 'k2']}},\n\t\t\t\t},\n\t\t\t\taction: {\n\t\t\t\t\ttype: 'CASES.USE.KEYS.CLEAR',\n\t\t\t\t\tcomponentId: 'comp',\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tinUse: {keys: null},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('dataSetOutdated', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {byKey: {}},\n\t\t\t\taction: {type: 'COMMON.DATA.SET_OUTDATED'},\n\t\t\t\texpectedResult: {byKey: {}},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'non empty',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {type: 'COMMON.DATA.SET_OUTDATED'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, outdated: true},\n\t\t\t\t\t\tk2: {data: {p: 2}, outdated: true},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('cleanupOnLogout', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'test',\n\t\t\t\tstate: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk2: {data: {p: 2}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taction: {type: 'COMMON.DATA.CLEANUP_ON_LOGOUT'},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tbyKey: {\n\t\t\t\t\t\tk1: {data: {p: 1}, permissions: {guest: {get: true}}},\n\t\t\t\t\t\tk3: {data: {p: 3}, permissions: {guest: {get: true}}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\treducer(test.state, test.action),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/Cases/selectors';\n\ndescribe('state/Cases/selectors', function () {\n\tdescribe('getActive', function () {\n\t\tconst createState = (activeKey) => ({\n\t\t\tcases: {\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t},\n\t\t\t\tactiveKey,\n\t\t\t},\n\t\t});\n\n\t\tit('select active', function () {\n\t\t\tassert.deepStrictEqual(selectors.getActive(createState('k1')), {\n\t\t\t\tn: 1,\n\t\t\t});\n\t\t});\n\n\t\tit('select inactive', function () {\n\t\t\tassert.isNull(selectors.getActive(createState('k3')));\n\t\t});\n\t});\n\n\tit('getActiveKey', function () {\n\t\tconst state = {cases: {activeKey: 'k'}};\n\n\t\tassert.strictEqual(selectors.getActiveKey(state), 'k');\n\t});\n\n\tit('getActiveKeys', function () {\n\t\tconst state = {cases: {activeKeys: ['k1', 'k2']}};\n\n\t\tassert.deepStrictEqual(selectors.getActiveKeys(state), ['k1', 'k2']);\n\t});\n\n\tdescribe('getActiveModels', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none with null active keys',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none with empty active keys',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: [],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none with empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t\tactiveKeys: ['k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: ['k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'one',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: ['k1', 'k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'two',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactiveKeys: ['k1', 'k2', 'k3'],\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getActiveModels(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAll', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: null,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAll(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tk1: {n: 1},\n\t\t\t\t\tk2: {n: 2},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllAsObject(test.state),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getAllForActiveScope', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'empty models',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty indexes',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [],\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no active skope key',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}},\n\t\t\t\t\t\tindexes: [\n\t\t\t\t\t\t\t{filter: 'fil', order: 'desc'},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilter: {scopeKey: 'scopeK'},\n\t\t\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\t\t\tcount: 4,\n\t\t\t\t\t\t\t\tindex: [null, 'k1', 'k2', 'k3'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tscopes: {\n\t\t\t\t\t\tactiveKey: 'scopeK',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}, {key: 'k3'}, null],\n\t\t\t},\n\t\t];\n\t\tconst order = 'asc';\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getAllForActiveScope(test.state, order),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getByKeys', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'null keys',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: null,\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty keys',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: [],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k5', 'k6'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'empty',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkeys: ['k1', 'k2'],\n\t\t\t\texpectedResult: [{n: 1}, {n: 2}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getByKeys(test.state, test.keys),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDataByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1, data: 'data'}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {k1: {n: 1, data: 'data'}, k2: {n: 2}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: 'data',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getDataByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDeletePermissionByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'user with access',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tactiveUser: {\n\t\t\t\t\t\t\t\t\t\tdelete: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'guest with access',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tguest: {\n\t\t\t\t\t\t\t\t\t\tdelete: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no access',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getDeletePermissionByKey(test.state, 'k1'),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getEditedDataByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'none',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k5',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\texpectedResult: null,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\teditedByKey: {k1: 'val1', k2: {data: 'datk2'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k2',\n\t\t\t\texpectedResult: 'datk2',\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getEditedDataByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getIndexed', function () {\n\t\tconst state = {\n\t\t\tcases: {\n\t\t\t\tscopes: {activeKey: 'scopesKey'},\n\t\t\t\tbyKey: {k1: {n: 1}, k2: {n: 2}, k3: {n: 3, removed: true}},\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilterByActive: {scope: true},\n\t\t\t\t\t\tfilter: {scopeKey: 'scopesKey'},\n\t\t\t\t\t\torder: 'asc',\n\t\t\t\t\t\tcount: 7,\n\t\t\t\t\t\tindex: [\n\t\t\t\t\t\t\t'first',\n\t\t\t\t\t\t\t'second',\n\t\t\t\t\t\t\t'third',\n\t\t\t\t\t\t\t'fourth',\n\t\t\t\t\t\t\t'fifth',\n\t\t\t\t\t\t\t'sixth',\n\t\t\t\t\t\t\t'seventh',\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst filterByActive = {scope: true};\n\t\tconst filter = {scopeKey: 'scopesKey'};\n\t\tconst order = 'asc';\n\t\tconst start = 3;\n\t\tconst length = 2;\n\n\t\tconst expectedResult = [{key: 'fourth'}, {key: 'fifth'}];\n\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getIndexed(\n\t\t\t\tstate,\n\t\t\t\tfilterByActive,\n\t\t\t\tfilter,\n\t\t\t\torder,\n\t\t\t\tstart,\n\t\t\t\tlength\n\t\t\t),\n\t\t\texpectedResult\n\t\t);\n\t});\n\n\tdescribe('getUpdatePermissionByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'user with access',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tactiveUser: {\n\t\t\t\t\t\t\t\t\t\tupdate: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'guest with access',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tpermissions: {\n\t\t\t\t\t\t\t\t\tguest: {\n\t\t\t\t\t\t\t\t\t\tupdate: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'no access',\n\t\t\t\tstate: {\n\t\t\t\t\tcases: {},\n\t\t\t\t},\n\t\t\t\texpectedResult: false,\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.strictEqual(\n\t\t\t\t\tselectors.getUpdatePermissionByKey(test.state, 'k1'),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('getSubstate', function () {\n\t\tassert.strictEqual(\n\t\t\tselectors.getSubstate({\n\t\t\t\tcases: 'subst',\n\t\t\t}),\n\t\t\t'subst'\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport slash from 'slash';\nimport actions from '../../../src/state/Charts/actions';\nimport {resetFetch, setFetch} from '../../../src/state/_common/request';\n\ndescribe('state/Charts/actions', function () {\n\tlet dispatchedActions = [];\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tresetFetch();\n\t\tclearDispatchedActions();\n\t});\n\n\tdescribe('updateStateFromView', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'no data',\n\t\t\t\tdata: null,\n\t\t\t\texpectedResult: [],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'some data',\n\t\t\t\tdata: {k: 'v'},\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'CHARTS.UPDATE',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tk: 'v',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tdispatch(actions.updateStateFromView(test.data));\n\t\t\t\trunFunctionActions({dispatch, getState: () => {}});\n\n\t\t\t\tassert.deepStrictEqual(dispatchedActions, test.expectedResult);\n\t\t\t});\n\t\t});\n\t});\n\n\tit('use', function () {\n\t\tconst getState = () => ({\n\t\t\tapp: {\n\t\t\t\tlocalConfiguration: {\n\t\t\t\t\tapiBackendProtocol: 'http',\n\t\t\t\t\tapiBackendHost: 'localhost',\n\t\t\t\t\tapiBackendPath: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\tscopes: {activeKey: 'sc1'},\n\t\t\tperiods: {activeKey: 'sp1', activeKeys: ['sp1']},\n\t\t\tattributes: {activeKey: 'a1'},\n\t\t\tcharts: {\n\t\t\t\tcharts: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tscope: 's1',\n\t\t\t\t\t\t\tperiods: ['p1'],\n\t\t\t\t\t\t\tattributes: ['a1'],\n\t\t\t\t\t\t\tlayerTemplate: 't1',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tattributeRelations: {\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t\t\tperiodKey: 'p1',\n\t\t\t\t\t\t\tattributeKey: 'a1',\n\t\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: null,\n\t\t\t\t\t\tcount: 5,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n\t\t};\n\t\tsetFetch(function (url, options) {\n\t\t\tassert.strictEqual(\n\t\t\t\t'http://localhost/backend/rest/relations/filtered/attribute',\n\t\t\t\tslash(url)\n\t\t\t);\n\n\t\t\tassert.deepStrictEqual(options, {\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t\tperiodKey: 'p1',\n\t\t\t\t\t\tattributeKey: 'a1',\n\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t},\n\t\t\t\t\toffset: 0,\n\t\t\t\t\torder: null,\n\t\t\t\t\tlimit: 100,\n\t\t\t\t}),\n\t\t\t\tcredentials: 'include',\n\t\t\t\theaders: {\n\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t},\n\t\t\t\tmethod: 'POST',\n\t\t\t});\n\n\t\t\tconst body = {\n\t\t\t\tdata: {attribute: {k1: {}, k2: {}, k3: {}, k4: {}}},\n\t\t\t\ttotal: 5,\n\t\t\t\tchanges: {\n\t\t\t\t\tattribute: '2020-01-01',\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn Promise.resolve({\n\t\t\t\tok: true,\n\t\t\t\tjson: function () {\n\t\t\t\t\treturn Promise.resolve(body);\n\t\t\t\t},\n\t\t\t\theaders: {\n\t\t\t\t\tget: function (name) {\n\t\t\t\t\t\treturn {'Content-type': 'application/json'}[name];\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t});\n\t\t});\n\n\t\tdispatch(actions.use('k1', false));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\tcomponentId: 'chart-k1',\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tattributeKey: 'a1',\n\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t\tperiodKey: 'p1',\n\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t},\n\t\t\t\t\tfilterByActive: {},\n\t\t\t\t\tlength: 1000,\n\t\t\t\t\torder: null,\n\t\t\t\t\tstart: 1,\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.REGISTER',\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('useClear', function () {\n\t\tdispatch(actions.useClear('ck'));\n\n\t\treturn runFunctionActions({dispatch, getState: () => ({})}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\tcomponentId: 'chart_ck',\n\t\t\t\t\ttype: 'ATTRIBUTE_RELATIONS.USE.INDEXED.CLEAR',\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('setInitial', function () {\n\t\tactions.setInitial()(dispatch);\n\n\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t{type: 'CHARTS.SET_INITIAL'},\n\t\t]);\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\n\nconst INITIAL_STATE = {\n\tcharts: {},\n\tsets: {}\n};\n\nfunction setInitial() {\n\treturn {...INITIAL_STATE};\n}\n\nfunction update(state, action) {\n\treturn {...state, ...action.data};\n}\n\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.CHARTS.UPDATE:\n\t\t\treturn update(state, action);\n\t\tcase ActionTypes.CHARTS.SET_INITIAL:\n\t\t\treturn setInitial();\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/Charts/reducers';\n\ndescribe('state/Charts/reducers', function () {\n\tit('update', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tcharts: {},\n\t\t\t\t\tsets: {},\n\t\t\t\t},\n\t\t\t\t{type: 'CHARTS.UPDATE', data: {new: true}}\n\t\t\t),\n\t\t\t{\n\t\t\t\tcharts: {},\n\t\t\t\tsets: {},\n\t\t\t\tnew: true,\n\t\t\t}\n\t\t);\n\t});\n\n\tit('setInitial', function () {\n\t\tassert.deepStrictEqual(reducer({}, {type: 'CHARTS.SET_INITIAL'}), {\n\t\t\tcharts: {},\n\t\t\tsets: {},\n\t\t});\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/Charts/selectors';\n\ndescribe('state/Charts/selectors', function () {\n\tdescribe('getChartConfiguration', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'with interesting properties (single value)',\n\t\t\t\tstate: {\n\t\t\t\t\tscopes: {activeKey: 'sc1'},\n\t\t\t\t\tperiods: {activeKey: 'sp1', activeKeys: ['sp1']},\n\t\t\t\t\tattributes: {activeKey: 'a1'},\n\t\t\t\t\tcharts: {\n\t\t\t\t\t\tcharts: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tscope: 's1',\n\t\t\t\t\t\t\t\t\tperiods: ['p1'],\n\t\t\t\t\t\t\t\t\tattributes: ['a1'],\n\t\t\t\t\t\t\t\t\tlayerTemplate: 't1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\tuseActiveMetadataKeys: false,\n\t\t\t\texpectedResult: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tattributes: ['a1'],\n\t\t\t\t\t\tlayerTemplate: 't1',\n\t\t\t\t\t\tperiods: ['p1'],\n\t\t\t\t\t\tscope: 's1',\n\t\t\t\t\t},\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tattributeKey: 'a1',\n\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t\tperiodKey: 'p1',\n\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t},\n\t\t\t\t\tfilterByActive: {},\n\t\t\t\t\tmergedFilter: {\n\t\t\t\t\t\tattributeKey: 'a1',\n\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t\tperiodKey: 'p1',\n\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'with interesting properties (multi value)',\n\t\t\t\tstate: {\n\t\t\t\t\tscopes: {activeKey: 'sc1'},\n\t\t\t\t\tperiods: {activeKey: 'sp1', activeKeys: ['sp1']},\n\t\t\t\t\tattributes: {activeKey: 'a1'},\n\t\t\t\t\tcharts: {\n\t\t\t\t\t\tcharts: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tscope: 's1',\n\t\t\t\t\t\t\t\t\tperiods: ['p1', 'p2'],\n\t\t\t\t\t\t\t\t\tattributes: ['a1', 'a2'],\n\t\t\t\t\t\t\t\t\tlayerTemplate: 't1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\tuseActiveMetadataKeys: false,\n\t\t\t\texpectedResult: {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tattributes: ['a1', 'a2'],\n\t\t\t\t\t\tlayerTemplate: 't1',\n\t\t\t\t\t\tperiods: ['p1', 'p2'],\n\t\t\t\t\t\tscope: 's1',\n\t\t\t\t\t},\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tattributeKey: {in: ['a1', 'a2']},\n\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t\tperiodKey: {in: ['p1', 'p2']},\n\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t},\n\t\t\t\t\tfilterByActive: {},\n\t\t\t\t\tmergedFilter: {\n\t\t\t\t\t\tattributeKey: {in: ['a1', 'a2']},\n\t\t\t\t\t\tlayerTemplateKey: 't1',\n\t\t\t\t\t\tperiodKey: {in: ['p1', 'p2']},\n\t\t\t\t\t\tscopeKey: 's1',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'without interesting properties (single value)',\n\t\t\t\tstate: {\n\t\t\t\t\tscopes: {activeKey: 'sc1'},\n\t\t\t\t\tperiods: {activeKey: 'sp1', activeKeys: ['sp1']},\n\t\t\t\t\tattributes: {activeKey: 'a1'},\n\t\t\t\t\tcharts: {\n\t\t\t\t\t\tcharts: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tdata: {},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 'k1',\n\t\t\t\tuseActiveMetadataKeys: {\n\t\t\t\t\tscope: true,\n\t\t\t\t\tperiod: true,\n\t\t\t\t\tattribute: true,\n\t\t\t\t},\n\t\t\t\texpectedResult: {\n\t\t\t\t\tdata: {},\n\t\t\t\t\tfilter: {},\n\t\t\t\t\tfilterByActive: {\n\t\t\t\t\t\tattribute: true,\n\t\t\t\t\t\tperiod: true,\n\t\t\t\t\t\tscope: true,\n\t\t\t\t\t},\n\t\t\t\t\tmergedFilter: {\n\t\t\t\t\t\tattributeKey: 'a1',\n\t\t\t\t\t\tperiodKey: 'sp1',\n\t\t\t\t\t\tscopeKey: 'sc1',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getChartConfiguration(\n\t\t\t\t\t\ttest.state,\n\t\t\t\t\t\ttest.key,\n\t\t\t\t\t\ttest.useActiveMetadataKeys\n\t\t\t\t\t),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getChartsBySetKeyAsObject', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcharts: {\n\t\t\t\t\t\tcharts: {\n\t\t\t\t\t\t\tc1: {key: 'c1'},\n\t\t\t\t\t\t\tc2: {key: 'c2'},\n\t\t\t\t\t\t\tc3: {key: 'c3'},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsets: {s1: {charts: ['c1', 'c3']}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 's1',\n\t\t\t\texpectedResult: {\n\t\t\t\t\tc1: {\n\t\t\t\t\t\tkey: 'c1',\n\t\t\t\t\t},\n\t\t\t\t\tc3: {\n\t\t\t\t\t\tkey: 'c3',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getChartsBySetKeyAsObject(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getDataForChart', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tad1: {\n\t\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\t\tfeatures: [{properties: {fid: 'f1'}}],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tad2: {n: 2},\n\t\t\t\t\t\t\tad3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'ad1',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk2: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 2,\n\t\t\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'ad2',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk3: {data: {v: 3, active: false}},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tfilter: ['v', 1],\n\t\t\t\t},\n\t\t\t\texpectedResult: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'f1',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tname: 'f1',\n\t\t\t\t\t\t\tvalues: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, () => {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getDataForChart(test.state, 'filter', 'chartKey'),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getNamesForChart', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tattributeData: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tk1: {\n\t\t\t\t\t\t\t\tn: 1,\n\t\t\t\t\t\t\t\tattributeData: {\n\t\t\t\t\t\t\t\t\tfeatures: [{properties: {fid: 1, p: 'v'}}],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tk2: {n: 2},\n\t\t\t\t\t\t\tk3: {n: 3, removed: true},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tattributeRelations: {\n\t\t\t\t\t\tbyKey: {\n\t\t\t\t\t\t\tr1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tv: 1,\n\t\t\t\t\t\t\t\t\tattributeDataSourceKey: 'k1',\n\t\t\t\t\t\t\t\t\tfidColumnName: 'fid',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\texpectedResult: [{key: 1, data: {name: 'v'}}],\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getNamesForChart(test.state, 'filter', 'ck'),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n\n\tdescribe('getSetByKey', function () {\n\t\tconst tests = [\n\t\t\t{\n\t\t\t\tname: 'some',\n\t\t\t\tstate: {\n\t\t\t\t\tcharts: {\n\t\t\t\t\t\tsets: {s1: {key: 's1'}},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tkey: 's1',\n\t\t\t\texpectedResult: {key: 's1'},\n\t\t\t},\n\t\t];\n\n\t\ttests.forEach((test) => {\n\t\t\tit(test.name, function () {\n\t\t\t\tassert.deepStrictEqual(\n\t\t\t\t\tselectors.getSetByKey(test.state, test.key),\n\t\t\t\t\ttest.expectedResult\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../src/state/Components/actions';\n\ndescribe('state/Components/actions', function () {\n\tlet dispatchedActions = [];\n\tconst dispatch = function (action) {\n\t\tdispatchedActions.push(action);\n\t};\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a !== null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tclearDispatchedActions();\n\t});\n\n\tit('update', function () {\n\t\tdispatch(actions.update('cmp', {k: 'v'}));\n\n\t\treturn runFunctionActions({dispatch, getState: () => ({})}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\tcomponent: 'cmp',\n\t\t\t\t\ttype: 'COMPONENTS.UPDATE',\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tk: 'v',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('updateStateFromView', function () {\n\t\tdispatch(actions.updateStateFromView({cmp: {k: 'v'}}));\n\n\t\treturn runFunctionActions({dispatch, getState: () => ({})}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\tcomponent: 'cmp',\n\t\t\t\t\ttype: 'COMPONENTS.UPDATE',\n\t\t\t\t\tupdate: {\n\t\t\t\t\t\tk: 'v',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('set', function () {\n\t\tdispatch(actions.set('cmp', 'k', 'v'));\n\n\t\treturn runFunctionActions({dispatch, getState: () => ({})}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\ttype: 'COMPONENTS.SET',\n\t\t\t\t\tcomponent: 'cmp',\n\t\t\t\t\tpath: 'k',\n\t\t\t\t\tvalue: 'v',\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t});\n});\n","import ActionTypes from '../../constants/ActionTypes';\n\nconst INITIAL_STATE = {\n};\n\nfunction update(state, action) {\n\treturn {...state, [action.component]: state[action.component] ? {...state[action.component], ...action.update} : action.update};\n}\nfunction set(state, action) {\n\tlet path = action.path.split('.');\n\treturn {...state, [action.component]: setHelper(state[action.component], path, action.value)};\n}\n\nfunction setHelper(state, path, value) {\n\tlet remainingPath = [...path];\n\tlet currentKey = remainingPath.shift();\n\tif (remainingPath.length) {\n\t\treturn {...state, [currentKey]: setHelper(state[currentKey], remainingPath, value)};\n\t} else {\n\t\treturn {...state, [currentKey]: value};\n\t}\n}\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.COMPONENTS.UPDATE:\n\t\t\treturn update(state, action);\n\t\tcase ActionTypes.COMPONENTS.SET:\n\t\t\treturn set(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/Components/reducers';\n\ndescribe('state/Components/reducers', function () {\n\tit('update', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{type: 'COMPONENTS.UPDATE', component: 'cmp', update: {k: 'v'}}\n\t\t\t),\n\t\t\t{cmp: {k: 'v'}}\n\t\t);\n\t});\n\n\tit('set', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{cmp: {k: {v: 'old_v'}}},\n\t\t\t\t{\n\t\t\t\t\ttype: 'COMPONENTS.SET',\n\t\t\t\t\tcomponent: 'cmp',\n\t\t\t\t\tpath: 'k.v',\n\t\t\t\t\tvalue: 'v',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{cmp: {k: {v: 'v'}}}\n\t\t);\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/Components/selectors';\n\ndescribe('state/Components/selectors', function () {\n\tit('get', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.get(\n\t\t\t\t{components: {k1: {key: 'k1', data: {k: 'v1'}}}},\n\t\t\t\t'k1',\n\t\t\t\t'data'\n\t\t\t),\n\t\t\t{\n\t\t\t\tk: 'v1',\n\t\t\t}\n\t\t);\n\t});\n\n\tit('getDataByComponentKey', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getDataByComponentKey(\n\t\t\t\t{components: {k1: {key: 'k1', data: {k: 'v1'}}}},\n\t\t\t\t'k1'\n\t\t\t),\n\t\t\t{\n\t\t\t\tkey: 'k1',\n\t\t\t\tdata: {\n\t\t\t\t\tk: 'v1',\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('getStateToSave', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getStateToSave(\n\t\t\t\t{components: {k1: {key: 'k1', data: {k: 'v1'}}}},\n\t\t\t\t'k1'\n\t\t\t),\n\t\t\t{k1: {key: 'k1', data: {k: 'v1'}}}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../../src/state/Data/SpatialData/actions';\n\ndescribe('state/Data/SpatialData/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (Array.isArray(action)) {\n\t\t\t\t\tdispatchedActions = [...dispatchedActions, ...action];\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a != null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tclearDispatchedActions();\n\t});\n\n\tit('Dispatch empty data if recieved data are empty', function () {\n\t\tconst getState = () => ({\n\t\t\tdata: {\n\t\t\t\tspatialData: {\n\t\t\t\t\tbyDataSourceKey: null\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const result = [];\n        const filter = {};\n        const order = null;\n\t\tconst changes = null;\n\t\tdispatch(actions.receiveIndexed(result, filter, order, changes));\n\n\t\tconst expectedResult = [\n\t\t\t{\n\t\t\t  \"changedOn\": null,\n\t\t\t  \"dataByDataSourceKey\": {},\n\t\t\t  \"indexData\": [\n\t\t\t    {}\n\t\t\t  ],\n\t\t\t  \"level\": undefined,\n\t\t\t  \"order\": null,\n\t\t\t  \"spatialFilter\": {},\n\t\t\t  \"type\": \"DATA.SPATIAL_DATA.ADD_WITH_INDEX\",\n\t\t\t}\n\t\t];\n\n\t\t//empty array because of empty results\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, expectedResult);\n\t\t});\n\t});\n\n\tit('receiveIndexed and addDataWithIndex', function () {\n\t\tconst getState = () => ({\n\t\t\tdata: {\n\t\t\t\tspatialData: {\n\t\t\t\t\tbyDataSourceKey: {}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const results = {\n\t\t\tkey1: {\n\t\t\t\tspatialIndex: {\n\t\t\t\t\t2: {\n\t\t\t\t\t\t'0,0': [1]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tcitizens: 1\n\t\t\t\t}\n\t\t\t}, \n\t\t\tkey2: {\n\t\t\t\tspatialIndex: {\n\t\t\t\t\t2: {\n\t\t\t\t\t\t'0,1': [2]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tcitizens: 2\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n        const filter = {};\n        const order = null;\n        const level = 10;\n        const changes = null;\n\t\tdispatch(actions.receiveIndexed(results, filter, order, changes));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t    \"dataByDataSourceKey\": {\n\t\t\t\t\t\t\"key1\": {\n\t\t\t\t\t\t\t\"citizens\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"key2\": {\n\t\t\t\t\t\t\t\"citizens\": 2\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t    \"level\": \"2\",\n\t\t\t\t\t\"type\": \"DATA.SPATIAL_DATA.ADD_WITH_INDEX\",\n\t\t\t\t\t\"order\": null,\n\t\t\t\t\t\"spatialFilter\": {},\n\t\t\t\t\t\"changedOn\": null,\n\t\t\t\t\t\"indexData\": [\n\t\t\t\t\t\t{\n\t\t\t\t        \"2\": {\n\t\t\t\t          \"0,0\": {\n\t\t\t\t            \"key1\": [\n\t\t\t\t              1\n\t\t\t\t            ]\n\t\t\t\t          },\n\t\t\t\t        \n\t\t\t\t          \"0,1\": {\n\t\t\t\t            \"key2\": [\n\t\t\t\t              2\n\t\t\t\t            ]\n\t\t\t\t          }\n\t\t\t\t        }\n\t\t\t\t      }]\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n\tit('receiveIndexed add new data and update current data', function () {\n\t\tconst getState = () => ({\n\t\t\tdata: {\n\t\t\t\tspatialData: {\n\t\t\t\t\tbyDataSourceKey: {\n\t\t\t\t\t\t\"key1\": {\n\t\t\t\t\t\t\tcitizens: 4\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const results = {\n\t\t\tkey1: {\n\t\t\t\tspatialIndex: {\n\t\t\t\t\t2: {\n\t\t\t\t\t\t'0,0': [1]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tcitizens: 1\n\t\t\t\t}\n\t\t\t}, \n\t\t\tkey2: {\n\t\t\t\tspatialIndex: {\n\t\t\t\t\t2: {\n\t\t\t\t\t\t'0,1': [2]\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\tcitizens: 2\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n        const filter = {};\n        const order = null;\n        const level = 10;\n        const changes = null;\n\t\tdispatch(actions.receiveIndexed(results, filter, order, changes));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n\t\t\t\t\t\"changedOn\": null,\n\t\t\t\t\t\"dataByDataSourceKey\": {\n\t\t\t\t\t\t\"key1\": {\n\t\t\t\t\t\t\t\"citizens\": 1\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"key2\": {\n\t\t\t\t\t\t\t\"citizens\": 2\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"level\": \"2\",\n\t\t\t\t\t\"order\": null,\n\t\t\t\t\t\"type\": \"DATA.SPATIAL_DATA.ADD_WITH_INDEX\",\n\t\t\t\t\t\"spatialFilter\": {},\n\t\t\t\t\t\"indexData\": [\n\t\t\t\t\t\t{\n\t\t\t\t        \"2\": {\n\t\t\t\t          \"0,0\": {\n\t\t\t\t            \"key1\": [\n\t\t\t\t              1\n\t\t\t\t            ]\n\t\t\t\t          },\n\t\t\t\t          \"0,1\": {\n\t\t\t\t            \"key2\": [\n\t\t\t\t              2\n\t\t\t\t            ]\n\t\t\t\t          }\n\t\t\t\t        }\n\t\t\t\t      }\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n});\n","import ActionTypes from '../../../constants/ActionTypes';\nimport {DEFAULT_INITIAL_STATE} from '../../_common/reducers';\nimport _ from 'lodash';\nimport commonHelpers from '../../_common/helpers';\n\nconst INITIAL_STATE = {\n    ...DEFAULT_INITIAL_STATE,\n    byDataSourceKey: {},\n};\n\nconst getEmptyFeature = () => {\n    return {\n        geometries: {}\n    }\n}\n\n/**\n * Add spatial data\n * @param state {Object}\n * @param action {Object}\n * @param action.key {String} Data source key\n * @param action.level {number} Zoom level\n * @param action.data {Object} Features as object\n * @return {Object}\n */\n\nconst add = (state, action) => {\n    const dataSourceKey = action.key;\n\tconst updatedDataForDataSourceKey = getUpdatedDataForDataSourceKey(state, dataSourceKey, action.data, action.level);\n\n    return {...state, byDataSourceKey: {...state.byDataSourceKey, [dataSourceKey]: updatedDataForDataSourceKey}}\n}\n\nconst addWithIndex = (state, action) => {\n\tconst updatedByDataSourceKey = getUpdatedByDataSourceKey(state, action.dataByDataSourceKey, action.level);\n\tconst updatedIndexes = commonHelpers.getUpdatedIndexes(state, action.spatialFilter, action.order, action.indexData, action.changedOn);\n\n\treturn {\n\t\t...state,\n\t\tbyDataSourceKey: updatedByDataSourceKey,\n\t\tindexes: updatedIndexes\n\t}\n}\n\nconst addIndex = (state, action) => {\n\tconst updatedIndexes = commonHelpers.getUpdatedIndexes(state, action.spatialFilter, action.order, action.indexData, action.changedOn);\n\n\treturn {\n\t\t...state,\n\t\tindexes: updatedIndexes\n\t}\n}\n\n/**\n * Remove index that fit to filter and order from state.\n * @param {Object} state \n * @param {Object} action \n * @return {Object}\n */\nconst removeIndex = (state, action) => {\n\tconst updatedIndexes = commonHelpers.removeIndex(state.indexes, action.filter, action.order);\n\treturn {\n\t\t...state,\n\t\tindexes: updatedIndexes\n\t}\n}\n\n\n// helpers\n\n/**\n * @param state {Object}\n * @param dataSourceKey {string} uuid\n * @param featuresAsObject {Object}\n * @param level {number}\n * @return {Object}\n */\nfunction getUpdatedDataForDataSourceKey(state, dataSourceKey, featuresAsObject, level) {\n\t// TODO what about features adding without level?\n\tconst dataFeaturesKeys = Object.keys(featuresAsObject);\n\tlet updatedData = state.byDataSourceKey[dataSourceKey] ? {...state.byDataSourceKey[dataSourceKey]} : {};\n\n\tdataFeaturesKeys.forEach((featureKey) => {\n\t\tif (updatedData.hasOwnProperty(featureKey)) {\n\t\t\t//add just level geometry to existing feature\n\t\t\tupdatedData[featureKey].geometries[level] = featuresAsObject[featureKey]\n\t\t} else {\n\t\t\t//create new feature with geometry and add to state\n\t\t\tconst newFeature = getEmptyFeature();\n\t\t\tnewFeature.geometries[level] = featuresAsObject[featureKey]\n\t\t\tupdatedData = {...updatedData, [featureKey]: {...newFeature}};\n\t\t}\n\t});\n\n\treturn updatedData;\n}\n\nfunction getUpdatedByDataSourceKey(state, dataByDataSourceKey, level) {\n\tlet updatedData = {...state.byDataSourceKey};\n\n\t_.forIn(dataByDataSourceKey, (data, dataSourceKey) => {\n\t\tif (!updatedData.hasOwnProperty(dataSourceKey)) {\n\t\t\tupdatedData[dataSourceKey] = {};\n\t\t}\n\n\t\t_.forIn(data, (geometry, featureKey) => {\n\t\t\tconst existingFeature = updatedData[dataSourceKey].hasOwnProperty(featureKey);\n\t\t\tif (existingFeature) {\n\t\t\t\t//add just level geometry to existing feature\n\t\t\t\tupdatedData[dataSourceKey][featureKey].geometries[level] = geometry;\n\t\t\t} else {\n\t\t\t\t//create new feature with geometry and add to state\n\t\t\t\tconst newFeature = getEmptyFeature();\n\t\t\t\tnewFeature.geometries[level] = geometry;\n\t\t\t\tupdatedData[dataSourceKey] = {...updatedData[dataSourceKey], [featureKey]: newFeature};\n\t\t\t}\n\t\t});\n\t});\n\n\treturn updatedData;\n}\n\nexport default (state = INITIAL_STATE, action) => {\n    switch (action.type) {\n        case ActionTypes.DATA.SPATIAL_DATA.ADD:\n\t\t\treturn add(state, action);\n\t\tcase ActionTypes.DATA.SPATIAL_DATA.ADD_WITH_INDEX:\n\t\t\treturn addWithIndex(state, action);\n\t\tcase ActionTypes.DATA.SPATIAL_DATA.INDEX.ADD:\n\t\t\treturn addIndex(state, action);\n\t\tcase ActionTypes.DATA.SPATIAL_DATA.INDEX.REMOVE:\n\t\t\treturn removeIndex(state, action)\n        default:\n            return state;\n    }\n}\n","import {assert} from 'chai';\nimport reducer from '../../../../src/state/Data/SpatialData/reducers';\n\ndescribe('state/Data/SpatialData', function () {\n\tit('add new data', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyDataSourceKey: {\n\t\t\t\t\t\tkey2: {\n\t\t\t\t\t\t\tfeatureKey2: {\n\t\t\t\t\t\t\t\tgeometries: {\n\t\t\t\t\t\t\t\t\t'2': {geom: ['geom']}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'DATA.SPATIAL_DATA.ADD',\n\t\t\t\t\tkey: 'key1',\n\t\t\t\t\tdata: {\"featureKey1\": {geom: ['geom']}},\n\t\t\t\t\tlevel: 2\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyDataSourceKey: {\n\t\t\t\t\tkey1: {\n\t\t\t\t\t\tfeatureKey1: {\n\t\t\t\t\t\t\t\tgeometries: {\n\t\t\t\t\t\t\t\t\t'2': {\n\t\t\t\t\t\t\t\t\t\tgeom: ['geom']\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tkey2: {\n\t\t\t\t\t\tfeatureKey2: {\n\t\t\t\t\t\t\tgeometries: {\n\t\t\t\t\t\t\t\t'2': {geom: ['geom']}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('add data on key that exists', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyDataSourceKey: {\n\t\t\t\t\t\tds1: {\n\t\t\t\t\t\t\tfk1: {\n\t\t\t\t\t\t\t\tgeometries: {\n\t\t\t\t\t\t\t\t\t'2': {geom: ['geom']}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'DATA.SPATIAL_DATA.ADD',\n\t\t\t\t\tkey: 'ds1',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t\"fk2\": {geom: ['geom']}\n\t\t\t\t\t},\n\t\t\t\t\tlevel: 3\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyDataSourceKey: {\n\t\t\t\t\tds1: {\n\t\t\t\t\t\tfk1: {\n\t\t\t\t\t\t\tgeometries: {\n\t\t\t\t\t\t\t\t'2': {geom: ['geom']}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfk2: {\n\t\t\t\t\t\t\tgeometries: {\n\t\t\t\t\t\t\t\t'3': {geom: ['geom']}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('add new indexes', function () {\n\n        const filter = {scope: 'cities'};\n        const order = null;\n        const level = 10;\n\t\tconst spatialDataSourceKey = 'key1';\n\t\tconst tile = '15,51';\n\t\tconst data = [{[level]: {[tile]:{dsKey: [1,2,3]}}}];\n\t\tconst changedOn = null;\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'DATA.SPATIAL_DATA.INDEX.ADD',\n\t\t\t\t\tspatialFilter: filter,\n\t\t\t\t\torder,\n\t\t\t\t\tindexData: data,\n\t\t\t\t\tchangedOn,\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter,\n\t\t\t\t\t\torder,\n\t\t\t\t\t\tchangedOn,\n\t\t\t\t\t\tindex: {[level]: {[tile]:{dsKey: [1,2,3]}}},\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\t});\n\n\tit('add new indexes', function () {\n\n        const filter = {scope: 'cities'};\n        const order = null;\n        const level = 10;\n\t\tconst spatialDataSourceKey = 'key1';\n\t\tconst tile = '15,51';\n\t\tconst tile2 = '15,52';\n\t\tconst data = [{[level]: {\n\t\t\t[tile]:[1,2,3],\n\t\t\t[tile2]:[1,2,5,6]\n\t\t}}];\n\t\tconst changedOn = null;\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'DATA.SPATIAL_DATA.INDEX.ADD',\n\t\t\t\t\tspatialFilter: filter,\n\t\t\t\t\torder,\n\t\t\t\t\tindexData: data,\n\t\t\t\t\tchangedOn,\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter,\n\t\t\t\t\t\torder,\n\t\t\t\t\t\tindex: {[level]: {\n\t\t\t\t\t\t\t[tile]:[1,2,3],\n\t\t\t\t\t\t\t[tile2]:[1,2,5,6]\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tchangedOn,\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\t});\n\n\tit('update index on add indexes', function () {\n\n        const filter = {scope: 'cities'};\n        const order = null;\n        const level = 10;\n\t\tconst spatialDataSourceKey = 'key1';\n\t\tconst tile = '15,51';\n\t\tconst tile2 = '15,52';\n\t\tconst index = {[level]: {\n\t\t\t[tile]:[1,2,9],\n\t\t\t[tile2]:[1,2,5,6],\n\t\t}};\n\t\tconst updateIndex = [{[level]: {\n\t\t\t[tile2]:[1,9,11,10,89],\n\t\t}}];\n\t\tconst changedOn = null;\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tindexes: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilter,\n\t\t\t\t\t\t\torder,\n\t\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\t\tchangedOn,\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'DATA.SPATIAL_DATA.INDEX.ADD',\n\t\t\t\t\tspatialFilter: filter,\n\t\t\t\t\torder,\n\t\t\t\t\tindexData: updateIndex,\n\t\t\t\t\tchangedOn,\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tindexes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tfilter,\n\t\t\t\t\t\torder,\n\t\t\t\t\t\tindex: {[level]: {\n\t\t\t\t\t\t\t[tile]:[1,2,9],\n\t\t\t\t\t\t\t[tile2]:[1,9,11,10,89],\n\t\t\t\t\t\t}},\n\t\t\t\t\t\tchangedOn,\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../../src/state/Data/SpatialDataSources/actions';\n\ndescribe('state/Data/SpatialDataSources/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (Array.isArray(action)) {\n\t\t\t\t\tdispatchedActions = [...dispatchedActions, ...action];\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a != null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tclearDispatchedActions();\n\t});\n\n\tit('receiveIndexed', function () {\n\t\tconst getState = () => ({});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const result = [];\n        const filter = {};\n        const order = null;\n        const start = 0;\n        const total = 10;\n        const changes = null;\n\n\t\tdispatch(actions.receiveIndexed(result, filter, order, start, total, changes));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n                    type: 'DATA.SPATIAL_DATA_SOURCES.INDEX.ADD',\n                    filter,\n                    order,\n                    start,\n                    count: total,\n                    data: result,\n                    changedOn: changes,\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('receiveIndexed with results', function () {\n\t\tconst getState = () => ({});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const results = [{key:1}, {key:2}];\n        const filter = {};\n        const order = null;\n        const start = 0;\n        const total = 10;\n        const changes = null;\n\n\t\tdispatch(actions.receiveIndexed(results, filter, order, start, total, changes));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n                {\n                      \"data\": results,\n                      \"filter\": filter,\n                      \"type\": \"DATA.SPATIAL_DATA_SOURCES.ADD\",\n                },\n\t\t\t\t{\n                    type: 'DATA.SPATIAL_DATA_SOURCES.INDEX.ADD',\n                    filter,\n                    order,\n                    start,\n                    count: total,\n                    data: results,\n                    changedOn: changes,\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport actions from '../../../../src/state/Data/SpatialRelations/actions';\n\ndescribe('state/Data/spatialRealations/actions', function () {\n\tlet dispatchedActions = [];\n\n\tconst clearDispatchedActions = function () {\n\t\tdispatchedActions = [];\n\t};\n\n\tconst runFunctionActions = function ({dispatch, getState}) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst promises = [];\n\t\t\tfor (let i = 0; i < dispatchedActions.length; i++) {\n\t\t\t\tconst action = dispatchedActions[i];\n\n\t\t\t\tif (typeof action === 'function') {\n\t\t\t\t\tpromises.push(action(dispatch, getState));\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (action instanceof Promise) {\n\t\t\t\t\tpromises.push(action);\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t} else if (Array.isArray(action)) {\n\t\t\t\t\tdispatchedActions = [...dispatchedActions, ...action];\n\t\t\t\t\tdispatchedActions[i] = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdispatchedActions = dispatchedActions.filter((a) => a != null);\n\n\t\t\tif (promises.length > 0) {\n\t\t\t\treturn Promise.all(promises)\n\t\t\t\t\t.then(() => runFunctionActions({dispatch, getState}))\n\t\t\t\t\t.then(() => resolve());\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t};\n\n\tafterEach(function () {\n\t\tclearDispatchedActions();\n\t});\n\n\tit('receiveIndexed', function () {\n\t\tconst getState = () => ({});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const result = [];\n        const filter = {};\n        const order = null;\n        const start = 0;\n        const total = 10;\n        const changes = null;\n\n\t\tdispatch(actions.receiveIndexed(result, filter, order, start, total, changes));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n\t\t\t\t{\n                    type: 'DATA.SPATIAL_RELATIONS.INDEX.ADD',\n                    filter,\n                    order,\n                    start,\n                    count: total,\n                    data: result,\n                    changedOn: changes,\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n\n\tit('receiveIndexed with results', function () {\n\t\tconst getState = () => ({});\n\t\tconst dispatch = (action) => {\n\t\t\tif (typeof action === 'function') {\n\t\t\t\tconst res = action(dispatch, getState);\n\t\t\t\tif (res != null) {\n\t\t\t\t\tdispatchedActions.push(res);\n\t\t\t\t}\n\n\t\t\t\treturn res;\n\t\t\t}\n\n\t\t\tdispatchedActions.push(action);\n        };\n        \n        const results = [{key:1}, {key:2}];\n        const filter = {};\n        const order = null;\n        const start = 0;\n        const total = 10;\n        const changes = null;\n\n\t\tdispatch(actions.receiveIndexed(results, filter, order, start, total, changes));\n\n\t\treturn runFunctionActions({dispatch, getState}).then(() => {\n\t\t\tassert.deepStrictEqual(dispatchedActions, [\n                {\n                      \"data\": results,\n                      \"filter\": filter,\n                      \"type\": \"DATA.SPATIAL_RELATIONS.ADD\",\n                },\n\t\t\t\t{\n                    type: 'DATA.SPATIAL_RELATIONS.INDEX.ADD',\n                    filter,\n                    order,\n                    start,\n                    count: total,\n                    data: results,\n                    changedOn: changes,\n\t\t\t\t}\n\t\t\t]);\n\t\t});\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../../src/state/Data/SpatialRelations/selectors';\n\ndescribe('state/Data/SpatialRelations/selectors', function () {\n    describe('getIndex', function () {\n        const state = {\n            data: {\n                spatialRelations: {\n                    indexes: [{\n                        filter: {scopeKey: 'Europe', placeKey: 'Prague'},\n                        order: null,\n                        count: 3,\n                        index: {\n                            1: 'a',\n                            2: 'b',\n                            3: 'c'\n                        }\n                    }, {\n                        filter: {scopeKey: 'Europe', placeKey: 'Prague', caseKey: {in: [\"A\", \"B\"]}},\n                        order: null,\n                        count: 3,\n                        index: {\n                            1: 'a',\n                            2: null,\n                            3: 'c'\n                        }\n                    }]\n                }\n            }\n        }\n\n        it('Should select index', function () {\n            const filter = {scopeKey: 'Europe', placeKey: 'Prague'};\n            const expectedResult = {\n                filter: {scopeKey: 'Europe', placeKey: 'Prague'},\n                order: null,\n                count: 3,\n                index: {\n                    1: 'a',\n                    2: 'b',\n                    3: 'c'\n                }\n            };\n            assert.deepStrictEqual(selectors.getIndex(state, filter, null), expectedResult);\n        });\n\n        it('Should select index, if multiple case keys', function () {\n            const filter = {scopeKey: 'Europe', placeKey: 'Prague', caseKey: {in: [\"A\", \"B\"]}};\n            const expectedResult = {\n                filter: {scopeKey: 'Europe', placeKey: 'Prague', caseKey: {in: [\"A\", \"B\"]}},\n                order: null,\n                count: 3,\n                index: {\n                    1: 'a',\n                    2: null,\n                    3: 'c'\n                }\n            };\n            assert.deepStrictEqual(selectors.getIndex(state, filter, null), expectedResult);\n        });\n\n        it('Should not select index', function () {\n            const filter = {scopeKey: 'Europe', placeKey: 'Prague', caseKey: {in: [\"A\", \"B\", \"C\"]}};\n            const expectedResult = null;\n            assert.deepStrictEqual(selectors.getIndex(state, filter, null), expectedResult);\n        });\n    });\n});\n","import ActionTypes from '../../constants/ActionTypes';\n\nconst INITIAL_STATE = {\n\tbyAoiKey: {},\n\tbyPlaceKey: {},\n\tbyKey: {}\n};\n\n\nfunction requestForAoi(state, action) {\n\tlet layerRecord = {...getLayerRecord(state, action.aoiKey, action.layerKey), data: action.periods, loading: true};\n\tlet byLayerKey = {...getByLayerKey(state, action.aoiKey), [action.layerKey]: layerRecord};\n\tlet aoiRecord = {...state.byAoiKey[action.aoiKey], byLayerKey: byLayerKey};\n\tlet byAoiKey = {...state.byAoiKey, [action.aoiKey]: aoiRecord};\n\treturn {...state, byAoiKey: byAoiKey};\n}\n\nfunction requestForAoiError(state, action) {\n\tlet layerRecord = {...getLayerRecord(state, action.aoiKey, action.layerKey), loading: false}; //todo should we clear old data?\n\tlet byLayerKey = {...getByLayerKey(state, action.aoiKey), [action.layerKey]: layerRecord};\n\tlet aoiRecord = {...state.byAoiKey[action.aoiKey], byLayerKey: byLayerKey};\n\tlet byAoiKey = {...state.byAoiKey, [action.aoiKey]: aoiRecord};\n\treturn {...state, byAoiKey: byAoiKey};\n}\n\nfunction receiveForAoi(state, action) {\n\tlet layerRecord = {...getLayerRecord(state, action.aoiKey, action.layerKey), data: action.periods, loading: false};\n\tlet byLayerKey = {...getByLayerKey(state, action.aoiKey), [action.layerKey]: layerRecord};\n\tlet aoiRecord = {...state.byAoiKey[action.aoiKey], byLayerKey: byLayerKey};\n\tlet byAoiKey = {...state.byAoiKey, [action.aoiKey]: aoiRecord};\n\treturn {...state, byAoiKey: byAoiKey};\n}\n\nfunction requestForPlace(state, action) {\n\tlet layerRecord = {...getLayerRecordForPlace(state, action.placeKey, action.layerKey), data: action.periods, loading: true};\n\tlet byLayerKey = {...getByLayerKeyForPlace(state, action.placeKey), [action.layerKey]: layerRecord};\n\tlet placeRecord = {...state.byPlaceKey[action.placeKey], byLayerKey: byLayerKey};\n\tlet byPlaceKey = {...state.byPlaceKey, [action.placeKey]: placeRecord};\n\treturn {...state, byPlaceKey: byPlaceKey};\n}\n\nfunction requestForPlaceError(state, action) {\n\tlet layerRecord = {...getLayerRecordForPlace(state, action.placeKey, action.layerKey), loading: false};\n\tlet byLayerKey = {...getByLayerKeyForPlace(state, action.placeKey), [action.layerKey]: layerRecord};\n\tlet placeRecord = {...state.byPlaceKey[action.placeKey], byLayerKey: byLayerKey};\n\tlet byPlaceKey = {...state.byPlaceKey, [action.placeKey]: placeRecord};\n\treturn {...state, byPlaceKey: byPlaceKey};\n}\n\nfunction receiveForPlace(state, action) {\n\tlet layerRecord = {...getLayerRecordForPlace(state, action.placeKey, action.layerKey), data: action.periods, loading: false};\n\tlet byLayerKey = {...getByLayerKeyForPlace(state, action.placeKey), [action.layerKey]: layerRecord};\n\tlet placeRecord = {...state.byPlaceKey[action.placeKey], byLayerKey: byLayerKey};\n\tlet byPlaceKey = {...state.byPlaceKey, [action.placeKey]: placeRecord};\n\treturn {...state, byPlaceKey: byPlaceKey};\n}\n\nfunction requestForKey(state, action) {\n\tlet layerRecord = {...getLayerRecordForKey(state, action.key, action.layerKey), data: action.periods, loading: true};\n\tlet byLayerKey = {...getByLayerKeyForKey(state, action.key), [action.layerKey]: layerRecord};\n\tlet record = {...state.byKey[action.key], byLayerKey: byLayerKey};\n\tlet byKey = {...state.byKey, [action.key]: record};\n\treturn {...state, byKey: byKey};\n}\n\nfunction requestForKeyError(state, action) {\n\tlet layerRecord = {...getLayerRecordForKey(state, action.key, action.layerKey), loading: false};\n\tlet byLayerKey = {...getByLayerKeyForKey(state, action.key), [action.layerKey]: layerRecord};\n\tlet record = {...state.byKey[action.key], byLayerKey: byLayerKey};\n\tlet byKey = {...state.byKey, [action.key]: record};\n\treturn {...state, byKey: byKey};\n}\n\nfunction receiveForKey(state, action) {\n\tlet layerRecord = {...getLayerRecordForKey(state, action.key, action.layerKey), data: action.periods, loading: false};\n\tlet byLayerKey = {...getByLayerKeyForKey(state, action.key), [action.layerKey]: layerRecord};\n\tlet record = {...state.byKey[action.key], byLayerKey: byLayerKey};\n\tlet byKey = {...state.byKey, [action.key]: record};\n\treturn {...state, byKey: byKey};\n}\n\n\nexport default (state = INITIAL_STATE, action) => {\n\tswitch (action.type) {\n\t\tcase ActionTypes.LAYER_PERIODS_AOI_LAYER_REQUEST:\n\t\t\treturn requestForAoi(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_AOI_LAYER_RECEIVE:\n\t\t\treturn receiveForAoi(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR:\n\t\t\treturn requestForAoiError(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_PLACE_LAYER_REQUEST:\n\t\t\treturn requestForPlace(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_PLACE_LAYER_RECEIVE:\n\t\t\treturn receiveForPlace(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR:\n\t\t\treturn requestForPlaceError(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_KEY_LAYER_REQUEST:\n\t\t\treturn requestForKey(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_KEY_LAYER_RECEIVE:\n\t\t\treturn receiveForKey(state, action);\n\t\tcase ActionTypes.LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR:\n\t\t\treturn requestForKeyError(state, action);\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\n\nfunction getByLayerKey(state, aoiKey) {\n\treturn state && state.byAoiKey && state.byAoiKey[aoiKey] && state.byAoiKey[aoiKey].byLayerKey;\n}\nfunction getLayerRecord(state, aoiKey, layerKey) {\n\treturn getByLayerKey(state, aoiKey) && state.byAoiKey[aoiKey].byLayerKey[layerKey];\n}\n\nfunction getByLayerKeyForPlace(state, placeKey) {\n\treturn state && state.byPlaceKey && state.byPlaceKey[placeKey] && state.byPlaceKey[placeKey].byLayerKey;\n}\nfunction getLayerRecordForPlace(state, placeKey, layerKey) {\n\treturn getByLayerKeyForPlace(state, placeKey) && state.byPlaceKey[placeKey].byLayerKey[layerKey];\n}\n\nfunction getByLayerKeyForKey(state, key) {\n\treturn state && state.byKey && state.byKey[key] && state.byKey[key].byLayerKey;\n}\nfunction getLayerRecordForKey(state, key, layerKey) {\n\treturn getByLayerKeyForKey(state, key) && state.byKey[key].byLayerKey[layerKey];\n}\n","import {assert} from 'chai';\nimport reducer from '../../../src/state/LayerPeriods/reducers';\n\ndescribe('state/LayerPeriods/reducers', function () {\n\tit('requestForAoi', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyAoiKey: {ak1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_AOI_LAYER_REQUEST',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\taoiKey: 'ak1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyAoiKey: {\n\t\t\t\t\tak1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tp1: 'v1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('receiveForAoi', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyAoiKey: {ak1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_AOI_LAYER_RECEIVE',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\taoiKey: 'ak1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyAoiKey: {\n\t\t\t\t\tak1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tp1: 'v1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('requestForAoiError', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyAoiKey: {ak1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\taoiKey: 'ak1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyAoiKey: {\n\t\t\t\t\tak1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('requestForPlace', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyPlaceKey: {pk1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_PLACE_LAYER_REQUEST',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\tplaceKey: 'pk1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyPlaceKey: {\n\t\t\t\t\tpk1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tp1: 'v1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('receiveForPlace', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyPlaceKey: {pk1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_PLACE_LAYER_RECEIVE',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\tplaceKey: 'pk1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyPlaceKey: {\n\t\t\t\t\tpk1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tp1: 'v1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('requestForPlaceError', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyPlaceKey: {ak1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\tplaceKey: 'ak1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyPlaceKey: {\n\t\t\t\t\tak1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('requestForKey', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyKey: {k1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_KEY_LAYER_REQUEST',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\tkey: 'k1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tp1: 'v1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('receiveForKey', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyKey: {k1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_KEY_LAYER_RECEIVE',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\tkey: 'k1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tp1: 'v1',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('requestForKeyError', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{\n\t\t\t\t\tbyKey: {k1: {byLayerKey: {lk1: {layerKey: 'lk1'}}}},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: 'LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR',\n\t\t\t\t\tperiods: {p1: 'v1'},\n\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\tkey: 'k1',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{\n\t\t\t\tbyKey: {\n\t\t\t\t\tk1: {\n\t\t\t\t\t\tbyLayerKey: {\n\t\t\t\t\t\t\tlk1: {\n\t\t\t\t\t\t\t\tlayerKey: 'lk1',\n\t\t\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t});\n\n\tit('unknown', function () {\n\t\tassert.deepStrictEqual(\n\t\t\treducer(\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\ttype: 'UNKNOWN_ACTION',\n\t\t\t\t}\n\t\t\t),\n\t\t\t{}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectors from '../../../src/state/LayerPeriods/selectors';\n\ndescribe('state/LayerPeriods/selectors', function () {\n\tit('getActiveAoiData', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getActiveAoiData({\n\t\t\t\tlayerPeriods: {byAoiKey: {ak1: {key: 'ak1'}}},\n\t\t\t\taoi: {activeKey: 'ak1'},\n\t\t\t}),\n\t\t\t{key: 'ak1'}\n\t\t);\n\t});\n\n\tit('getActivePlaceData', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getActivePlaceData({\n\t\t\t\tlayerPeriods: {byPlaceKey: {pk1: {key: 'pk1'}}},\n\t\t\t\tplaces: {activeKey: 'pk1'},\n\t\t\t}),\n\t\t\t{key: 'pk1'}\n\t\t);\n\t});\n\n\tit('getForActiveLpisCase', function () {\n\t\tassert.deepStrictEqual(\n\t\t\tselectors.getForActiveLpisCase({\n\t\t\t\tlayerPeriods: {byKey: {lpisCaselk1: {key: 'lk1'}}},\n\t\t\t\tspecific: {lpisChangeReviewCases: {activeCaseKey: 'lk1'}},\n\t\t\t}),\n\t\t\t{key: 'lk1'}\n\t\t);\n\t});\n});\n","import {assert} from 'chai';\nimport selectorHelpers from \"../../../src/state/Maps/selectorHelpers\";\nimport testHelpers from \"../../helpers\";\n\nimport {mapConstants} from \"@gisatcz/ptr-core\";\n\ndescribe('state/Maps/selectorHelpers', function () {\n    describe('getBackgroundLayerAsLayer', function () {\n        const backgroundLayer = {\n            layerTemplateKey: \"layerTemplate-uuid\"\n        };\n\n        const expectedResult = {\n            key: \"pantherBackgroundLayer\",\n            layerTemplateKey: \"layerTemplate-uuid\"\n        };\n\n        it('should return backgroundLayer as layer', () => {\n            // check structure\n            assert.deepStrictEqual(selectorHelpers.getBackgroundLayerAsLayer(backgroundLayer), expectedResult);\n        });\n\n        testHelpers.testCache(selectorHelpers.getBackgroundLayerAsLayer, [backgroundLayer], expectedResult);\n    });\n\n    describe('mergeBackgroundLayerWithLayers', function () {\n        const backgroundLayer = {\n            layerTemplateKey: \"layerTemplate-uuid\"\n        };\n\n        const layers = [\n            {\n                key: \"layer-1\",\n                metadataModifiers: {\n                    caseKey: \"case-1\"\n                }\n            }\n        ];\n\n        const expectedResult = [\n            {\n                key: \"pantherBackgroundLayer\",\n                layerTemplateKey: \"layerTemplate-uuid\"\n            },\n            {\n                key: \"layer-1\",\n                metadataModifiers: {\n                    caseKey: \"case-1\"\n                }\n            }\n        ];\n\n        it('should return merged layers', () => {\n            // check structure\n            assert.deepStrictEqual(selectorHelpers.mergeBackgroundLayerWithLayers(backgroundLayer, layers), expectedResult);\n        });\n\n        testHelpers.testCache(selectorHelpers.mergeBackgroundLayerWithLayers, [backgroundLayer, layers], expectedResult);\n\n        it('should return null, if both backgroundLayer and layers are null', () => {\n            // check structure\n            assert.isNull(selectorHelpers.mergeBackgroundLayerWithLayers(null, null));\n        });\n\n        it('should return layer with one item, if layers are null, but backgroundLayer', () => {\n            // check structure\n            assert.deepStrictEqual(selectorHelpers.mergeBackgroundLayerWithLayers(backgroundLayer), [expectedResult[0]]);\n        });\n    });\n\n    describe('getView', function () {\n        const defaultView = mapConstants.defaultMapView;\n\n        it('should merge map view with set view', () => {\n            const map = {\n                key: \"map1\",\n                data: {\n                    view: {\n                        center: {\n                            lat: 50,\n                            lon: 15\n                        }\n                    }\n                }\n            };\n\n            const set = {\n                maps: [\"map1\"],\n                sync: {\n                    boxRange: true\n                },\n                data: {\n                    view: {\n                        boxRange: 5000\n                    }\n                }\n            }\n\n\n\n            const expectedResult = {...defaultView, ...{\n                    center: {\n                        lat: 50,\n                        lon: 15\n                    },\n                    boxRange: 5000\n                }\n            };\n\n            const output = selectorHelpers.getView(map, set);\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should use set boxRange, if the param is synced', () => {\n            const map = {\n                key: \"map1\",\n                data: {\n                    view: {\n                        center: {\n                            lat: 50,\n                            lon: 15\n                        },\n                        boxRange: 1000\n                    }\n                }\n            };\n\n            const set = {\n                maps: [\"map1\"],\n                sync: {\n                    boxRange: true\n                },\n                data: {\n                    view: {\n                        boxRange: 5000\n                    }\n                }\n            }\n\n\n\n            const expectedResult = {...defaultView, ...{\n                    center: {\n                        lat: 50,\n                        lon: 15\n                    },\n                    boxRange: 5000\n                }\n            };\n\n            const output = selectorHelpers.getView(map, set);\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should not  use set boxRange, if a param is not synced', () => {\n            const map = {\n                key: \"map1\",\n                data: {\n                    view: {\n                        center: {\n                            lat: 50,\n                            lon: 15\n                        },\n                        boxRange: 1000,\n                    }\n                }\n            };\n\n            const set = {\n                maps: [\"map1\"],\n                data: {\n                    view: {\n                        boxRange: 5000\n                    }\n                }\n            }\n\n\n\n            const expectedResult = {...defaultView, ...{\n                    center: {\n                        lat: 50,\n                        lon: 15\n                    },\n                    boxRange: 1000\n                }\n            };\n\n            const output = selectorHelpers.getView(map, set);\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return map view, if set is not defined', () => {\n            const map = {\n                key: \"map1\",\n                data: {\n                    view: {\n                        center: {\n                            lat: 50,\n                            lon: 15\n                        }\n                    }\n                }\n            };\n\n            const expectedResult = {...defaultView, ...{\n                    center: {\n                        lat: 50,\n                        lon: 15\n                    }\n                }\n            };\n\n            const output = selectorHelpers.getView(map, null);\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return map view, if map is not defined', () => {\n            const set = {\n                maps: [\"mapXYZ\"],\n                data: {\n                    view: {\n                        boxRange: 5000\n                    }\n                }\n            }\n\n            const output = selectorHelpers.getView(null, null);\n            assert.isNull(output);\n\n            const output2 = selectorHelpers.getView(null, set);\n            assert.isNull(output2);\n        });\n\n        it('should return set view, if view is not defined & param is synced', () => {\n            const map = {\n                key: \"map1\",\n                data: {\n                    view: null\n                }\n            };\n\n            const set = {\n                maps: [\"mapXYZ\"],\n                sync: {\n                    boxRange: true\n                },\n                data: {\n                    view: {\n                        boxRange: 5000\n                    }\n                }\n            }\n\n\n\n            const expectedResult = {...defaultView, ...{\n                    boxRange: 5000\n                }\n            };\n\n            const output = selectorHelpers.getView(map, set);\n            assert.deepStrictEqual(output, expectedResult);\n        });\n    });\n\n});\n","import {assert} from 'chai';\nimport Select from \"../../../src/state/Select\";\nimport testHelpers from \"../../helpers\";\nimport {mapConstants} from \"@gisatcz/ptr-core\";\n\ndescribe('state/Maps/selectors', function () {\n    const state = {\n        maps: {\n            maps: {\n                map1: {\n                    key: \"map1\",\n                    name: \"Map 1\",\n                    data: {\n                        backgroundLayer: {\n                            layerTemplateKey: \"layerTemplateBackground\"\n                        },\n                        layers: [\n                            {\n                                key: \"layer1\",\n                                name: \"Layer 1\",\n                                layerTemplateKey: \"layerTemplate1\",\n                                styleKey: \"style1\",\n                                metadataModifiers: {\n                                    placeKey: \"place1\",\n                                    scenarioKeys: [\"scenario1\", \"scenario2\"]\n                                },\n                                filterByActive: {\n                                    place: true,\n                                    layerTemplateKey: true,\n                                    applicationKey: true\n                                }\n                            }, {\n                                key: \"layerDefinition1\",\n                                name: \"Layer with definitions\",\n                                type: \"vector\",\n                                options: {\n                                    features: [],\n                                    style: {\n                                        styles: [{\n                                            fill: \"#ff0000\"\n                                        }]\n                                    }\n                                }\n                            }\n                        ],\n                        metadataModifiers: null,\n                        filterByActive: {\n                            period: true\n                        },\n                        view: {\n                            boxRange: 500000,\n                            center: {\n                                lat: 49,\n                                lon: 10\n                            }\n                        }\n                    }\n                },\n                map2: {\n                    key: \"map2\",\n                    name: \"Map 2\",\n                    data: {\n                        backgroundLayer: null,\n                        layers: [\n                            {\n                                key: \"layer3\",\n                                name: \"Layer 3\",\n                                layerTemplateKey: \"layerTemplate3\",\n                                styleKey: \"style3\",\n                                metadataModifiers: {\n                                    placeKey: \"place2\"\n                                }\n                            }\n                        ],\n                        view: {\n                            boxRange: 1000000\n                        },\n                        metadataModifiers: {\n                            periodKey: \"period2\"\n                        }\n                    }\n                }\n            },\n            sets: {\n                set1: {\n                    key: \"set1\",\n                    activeMapKey: \"map1\",\n                    maps: [\"map1\", \"map2\"],\n                    sync: {center: true},\n                    data: {\n                        backgroundLayer: {\n                            type: \"wmts\",\n                            options: {\n                                url: \"http://backgroundLayer.no\"\n                            }\n                        },\n                        layers: [\n                            {\n                                key: \"layer2\",\n                                layerTemplateKey: \"layerTemplate2\",\n                                metadataModifiers: {\n                                    periodKey: \"period1\"\n                                }\n                            }\n                        ],\n                        metadataModifiers: {\n                            scopeKey: \"scope1\"\n                        },\n                        filterByActive: null,\n                        view: {\n                            center: {\n                                lat: 50,\n                                lon: 10\n                            }\n                        },\n                        viewLimits: [500, 500000]\n                    }\n                }\n            }\n        }\n    };\n\n    describe('getMapByKey', function () {\n        it('should return data for given mapKey, if map exists', () => {\n            const expectedResult = state.maps.maps.map1;\n            const output = Select.maps.getMapByKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if map does not exist', () => {\n            const output = Select.maps.getMapByKey(state, \"mapXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSets', function () {\n        it('should return collection of all existing map sets', () => {\n            const expectedResult = Object.values(state.maps.sets);\n            const output = Select.maps.getMapSets(state);\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no sets exist', () => {\n            const output = Select.maps.getMapSets({...state, maps: {...state.maps, sets: null}});\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetByMapKey', function () {\n        it('should return data of the map set for given mapKey, if map exists', () => {\n            const expectedResult = state.maps.sets.set1;\n            const output = Select.maps.getMapSetByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no sets exist', () => {\n            const output = Select.maps.getMapSetByMapKey({...state, maps: {...state.maps, sets: null}}, \"map1\");\n            assert.isNull(output);\n        });\n\n        it('should return null, if map set for given map key does not exist', () => {\n            const output = Select.maps.getMapSetByMapKey(state, \"mapXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetByKey', function () {\n        it('should return data for given setKey, if set exists', () => {\n            const expectedResult = state.maps.sets.set1;\n            const output = Select.maps.getMapSetByKey(state, \"set1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if map does not exist', () => {\n            const output = Select.maps.getMapSetByKey(state, \"setXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetActiveMapKey', function () {\n        it('should return data active map key, if it is defined in map set', () => {\n            const expectedResult = state.maps.sets.set1.activeMapKey;\n            const output = Select.maps.getMapSetActiveMapKey(state, \"set1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return global map key, if map set does not have active key, but map exists in given map set', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    activeMapKey: \"map2\",\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            activeMapKey: null\n                        }\n                    }\n                }\n            }\n            const output = Select.maps.getMapSetActiveMapKey(updatedState, \"set1\");\n            assert.deepStrictEqual(output, \"map2\");\n        });\n\n        it('should return null if map set does not exist', () => {\n            const output = Select.maps.getMapSetActiveMapKey(state, \"setXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetActiveMapView', function () {\n        it('should return null, if there is no activeMapKey for map set', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            activeMapKey: null\n                        }\n                    }\n                }\n            };\n            const output = Select.maps.getMapSetActiveMapView(updatedState, \"set1\");\n            assert.isNull(output);\n        });\n\n        it('should return null if map set does not exist', () => {\n            const output = Select.maps.getMapSetActiveMapView(state, \"setXYZ\");\n            assert.isNull(output);\n        });\n\n        it('should return view', () => {\n            const expectedResult = {\n                boxRange: 500000,\n                center: {\n                    lat: 50,\n                    lon: 10\n                },\n                heading: 0,\n                tilt: 0,\n                roll: 0\n            }\n            const output = Select.maps.getMapSetActiveMapView(state, \"set1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n    });\n\n    describe('getViewByMapKey', function () {\n        it('should return view for given map key', () => {\n            const expectedResult = {\n                boxRange: 500000,\n                center: {\n                    lat: 50,\n                    lon: 10\n                },\n                heading: 0,\n                tilt: 0,\n                roll: 0\n            }\n            const output = Select.maps.getViewByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n    });\n\n    describe('getViewLimitsByMapKey', function () {\n        it('should return null, if map for given key does not exist', () => {\n            const output = Select.maps.getViewLimitsByMapKey(state, \"mapXYZ\");\n            assert.isNull(output);\n        });\n\n        it('should return map view limits only, if a map is not in any set', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            maps: []\n                        }\n                    },\n                    maps: {\n                        ...state.maps.maps,\n                        map1: {\n                            ...state.maps.maps.map1,\n                            data: {\n                                ...state.maps.maps.map1.data,\n                                viewLimits: [500,5000]\n                            }\n                        }\n                    }\n                }\n            };\n            const expectedResult = [500, 5000];\n            const output = Select.maps.getViewLimitsByMapKey(updatedState, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return set view limits', () => {\n            const expectedResult = state.maps.sets.set1.data.viewLimits;\n            const output = Select.maps.getViewLimitsByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n    });\n\n    describe('getMapSetMapKeys', function () {\n        it('should return map set keys for given setKey, if set exists', () => {\n            const expectedResult = state.maps.sets.set1.maps;\n            const output = Select.maps.getMapSetMapKeys(state, \"set1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, maps is empty array', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            maps: []\n                        }\n                    },\n                }\n            };\n            const output = Select.maps.getMapSetMapKeys(updatedState, \"set1\");\n            assert.isNull(output);\n        });\n\n        it('should return null, map set does not exist', () => {\n            const output = Select.maps.getMapSetMapKeys(state, \"setXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetView', function () {\n        it('should return map set view for given setKey, if set exists', () => {\n            const expectedResult = {...mapConstants.defaultMapView, ...state.maps.sets.set1.data.view};\n            const output = Select.maps.getMapSetView(state, \"set1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, map set does not exist', () => {\n            const output = Select.maps.getMapSetView(state, \"setXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetViewLimits', function () {\n        it('should return map set view limits for given setKey, if set exists', () => {\n            const expectedResult = state.maps.sets.set1.data.viewLimits;\n            const output = Select.maps.getMapSetViewLimits(state, \"set1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, map set does not exist', () => {\n            const output = Select.maps.getMapSetViewLimits(state, \"setXYZ\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapBackgroundLayerStateByMapKey', function () {\n        it('should return backgroundLayer data', () => {\n            const expectedResult = {\n                layerTemplateKey: \"layerTemplateBackground\"\n            };\n            const output = Select.maps.getMapBackgroundLayerStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no background layer data exist', () => {\n            const output = Select.maps.getMapBackgroundLayerStateByMapKey({...state,\n                maps: {\n                    ...state.maps,\n                    maps: {\n                        ...state.maps.maps,\n                        map1: {\n                            ...state.maps.maps.map1,\n                            data: {\n                                ...state.maps.maps.map1.data,\n                                backgroundLayer: null\n                            }\n                        }\n                    }\n                }\n            }, \"map1\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapLayersStateByMapKey', function () {\n        it('should return layers data', () => {\n            const expectedResult = state.maps.maps.map1.data.layers;\n            const output = Select.maps.getMapLayersStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no layers exist', () => {\n            const output = Select.maps.getMapLayersStateByMapKey({...state,\n                maps: {\n                    ...state.maps,\n                    maps: {\n                        ...state.maps.maps,\n                        map1: {\n                            ...state.maps.maps.map1,\n                            data: {\n                                ...state.maps.maps.map1.data,\n                                layers: null\n                            }\n                        }\n                    }\n                }\n            }, \"map1\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetBackgroundLayerStateByMapKey', function () {\n        it('should return backgroundLayer data', () => {\n            const expectedResult = {\n                type: \"wmts\",\n                options: {\n                    url: \"http://backgroundLayer.no\"\n                }\n            };\n            const output = Select.maps.getMapSetBackgroundLayerStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no background layer data exist', () => {\n            const output = Select.maps.getMapSetBackgroundLayerStateByMapKey({...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                backgroundLayer: null\n                            }\n                        }\n                    }\n                }\n            }, \"map1\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetLayersStateByMapKey', function () {\n        it('should return layers data', () => {\n            const expectedResult = state.maps.sets.set1.data.layers;\n            const output = Select.maps.getMapSetLayersStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no layers exist', () => {\n            const output = Select.maps.getMapSetLayersStateByMapKey({...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                layers: null\n                            }\n                        }\n                    }\n                }\n            }, \"map1\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapMetadataModifiersByMapKey', function () {\n        it('should return metadata modifiers', () => {\n            const expectedResult = {\n                periodKey: \"period2\"\n            };\n            const output = Select.maps.getMapMetadataModifiersByMapKey(state, \"map2\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no layers exist', () => {\n            const output = Select.maps.getMapMetadataModifiersByMapKey(state, \"map1\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetMetadataModifiersByMapKey', function () {\n        it('should return metadata modifiers', () => {\n            const expectedResult = {\n                scopeKey: \"scope1\"\n            };\n            const output = Select.maps.getMapSetMetadataModifiersByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no metadata modifiers exist', () => {\n            const output = Select.maps.getMapSetMetadataModifiersByMapKey({...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                metadataModifiers: null\n                            }\n                        }\n                    }\n                }\n            }, \"map1\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMetadataModifiersByMapKey', function () {\n        it('should return merged map modifiers', () => {\n            const expectedResult = {\n                scopeKey: \"scope1\",\n                periodKey: \"period2\"\n            };\n            const output = Select.maps.getMetadataModifiersByMapKey(state, \"map2\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return map set modifiers, if map modifiers does not exist', () => {\n            const expectedResult = {\n                scopeKey: \"scope1\"\n            };\n            const output = Select.maps.getMetadataModifiersByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no modifiers exist', () => {\n            const output = Select.maps.getMetadataModifiersByMapKey(state, \"map3\");\n            assert.isNull(output);\n        });\n\n        testHelpers.testCache(Select.maps.getMetadataModifiersByMapKey, [state, \"map2\"], {\n            scopeKey: \"scope1\",\n            periodKey: \"period2\"\n        }, [state, \"map2\"]);\n    });\n\n    describe('getMapFilterByActiveByMapKey', function () {\n        it('should return filter by active', () => {\n            const expectedResult = {\n                period: true\n            };\n            const output = Select.maps.getMapFilterByActiveByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no filter by active exists', () => {\n            const output = Select.maps.getMapFilterByActiveByMapKey(state, \"map2\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetFilterByActiveByMapKey', function () {\n        it('should return filter by active', () => {\n            const expectedResult = {\n                period: true\n            };\n            const output = Select.maps.getMapSetFilterByActiveByMapKey({...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                filterByActive: {\n                                    period: true\n                                }\n                            }\n                        }\n                    }\n                }\n            }, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if no filter by active exists', () => {\n            const output = Select.maps.getMapSetFilterByActiveByMapKey(state, \"map2\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getFilterByActiveByMapKey', function () {\n        it('should return merged filter by active', () => {\n            const expectedResult = {\n                period: true\n            };\n            const output = Select.maps.getFilterByActiveByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return merged filter by active 2', () => {\n            const expectedResult = {\n                period: true,\n                scope: true\n            };\n\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1,\n                                filterByActive: {\n                                    scope: true\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            const output = Select.maps.getFilterByActiveByMapKey(updatedState, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        testHelpers.testCache(Select.maps.getFilterByActiveByMapKey, [state, \"map1\"], {\n            period: true\n        });\n\n        it('should return null, if no modifiers exist', () => {\n            const output = Select.maps.getFilterByActiveByMapKey(state, \"map2\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getBackgroundLayerStateByMapKey', function () {\n        it('should return map background layer', () => {\n            const expectedResult = {\n                layerTemplateKey: \"layerTemplateBackground\"\n            };\n            const output = Select.maps.getBackgroundLayerStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return map set background layer', () => {\n            const expectedResult = {\n                type: \"wmts\",\n                options: {\n                    url: \"http://backgroundLayer.no\"\n                }\n            };\n            const output = Select.maps.getBackgroundLayerStateByMapKey(state, \"map2\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null', () => {\n            const output = Select.maps.getBackgroundLayerStateByMapKey(state, \"map3\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getMapSetLayersStateWithModifiersByMapKey', function () {\n        const expectedResult = [\n            {\n                key: \"layer2\",\n                layerTemplateKey: \"layerTemplate2\",\n                metadataModifiers: {\n                    periodKey: \"period1\",\n                    scopeKey: \"scope1\"\n                },\n                filterByActive: null\n            }\n        ];\n\n        it('should return map set layers for map 1', () => {\n            const output = Select.maps.getMapSetLayersStateWithModifiersByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        testHelpers.testCache(Select.maps.getMapSetLayersStateWithModifiersByMapKey, [state, \"map1\"], expectedResult);\n    });\n\n    describe('getMapLayersStateWithModifiersByMapKey', function () {\n        const expectedResult = [\n            {\n                key: \"layer1\",\n                name: \"Layer 1\",\n                layerTemplateKey: \"layerTemplate1\",\n                styleKey: \"style1\",\n                metadataModifiers: {\n                    placeKey: \"place1\",\n                    scopeKey: \"scope1\",\n                    scenarioKeys: [\"scenario1\", \"scenario2\"]\n                },\n                filterByActive: {\n                    place: true,\n                    period: true,\n                    layerTemplateKey: true,\n                    applicationKey: true\n                }\n            }, {\n                key: \"layerDefinition1\",\n                name: \"Layer with definitions\",\n                type: \"vector\",\n                options: {\n                    features: [],\n                    style: {\n                        styles: [{\n                            fill: \"#ff0000\"\n                        }]\n                    }\n                },\n                filterByActive: {\n                    period: true\n                },\n                metadataModifiers: {\n                    scopeKey: \"scope1\"\n                }\n            }\n        ];\n\n        it('should return map layers for map 1', () => {\n            const output = Select.maps.getMapLayersStateWithModifiersByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        testHelpers.testCache(Select.maps.getMapLayersStateWithModifiersByMapKey, [state, \"map1\"], expectedResult);\n    });\n\n    describe('getLayersStateByMapKey', function () {\n        const expectedResult = [\n            {\n                key: \"layer2\",\n                layerTemplateKey: \"layerTemplate2\",\n                metadataModifiers: {\n                    periodKey: \"period1\",\n                    scopeKey: \"scope1\"\n                },\n                filterByActive: null\n            },\n            {\n                key: \"layer1\",\n                name: \"Layer 1\",\n                layerTemplateKey: \"layerTemplate1\",\n                styleKey: \"style1\",\n                metadataModifiers: {\n                    placeKey: \"place1\",\n                    scopeKey: \"scope1\",\n                    scenarioKeys: [\"scenario1\", \"scenario2\"]\n                },\n                filterByActive: {\n                    place: true,\n                    period: true,\n                    layerTemplateKey: true,\n                    applicationKey: true\n                }\n            }, {\n                key: \"layerDefinition1\",\n                name: \"Layer with definitions\",\n                type: \"vector\",\n                options: {\n                    features: [],\n                    style: {\n                        styles: [{\n                            fill: \"#ff0000\"\n                        }]\n                    }\n                },\n                filterByActive: {\n                    period: true\n                },\n                metadataModifiers: {\n                    scopeKey: \"scope1\"\n                }\n            }\n        ];\n\n        const expectedResult2 = [\n            {\n                key: \"layer2\",\n                layerTemplateKey: \"layerTemplate2\",\n                metadataModifiers: {\n                    periodKey: \"period1\",\n                    scopeKey: \"scope1\"\n                },\n                filterByActive: null\n            },\n            {\n                key: \"layer3\",\n                name: \"Layer 3\",\n                layerTemplateKey: \"layerTemplate3\",\n                styleKey: \"style3\",\n                metadataModifiers: {\n                    placeKey: \"place2\",\n                    periodKey: \"period2\",\n                    scopeKey: \"scope1\"\n                },\n                filterByActive: null\n            }\n        ];\n\n        it('should return map layers for map 1', () => {\n            const output = Select.maps.getLayersStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return map layers for map 2', () => {\n            const output = Select.maps.getLayersStateByMapKey(state, \"map2\");\n            assert.deepStrictEqual(output, expectedResult2);\n        });\n\n        testHelpers.testCache(Select.maps.getLayersStateByMapKey, [state, \"map1\"], expectedResult, [state, \"map2\"]);\n\n        it('should return just map layers, if set layers do not exist', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                layers: null\n                            }\n                        }\n                    }\n                }\n            };\n            const output = Select.maps.getLayersStateByMapKey(updatedState, \"map2\");\n            assert.deepStrictEqual(output, [expectedResult2[1]]);\n        });\n\n        it('should return just set layers, if map layers do not exist', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    maps: {\n                        ...state.maps.maps,\n                        map2: {\n                            ...state.maps.maps.map2,\n                            data: {\n                                ...state.maps.maps.map2.data,\n                                layers: null\n                            }\n                        }\n                    }\n                }\n            };\n            const output = Select.maps.getLayersStateByMapKey(updatedState, \"map2\");\n            assert.deepStrictEqual(output, [expectedResult2[0]]);\n        });\n\n        it('should return null, if both set layers and map layers is null', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                layers: null\n                            }\n                        }\n                    },\n                    maps: {\n                        ...state.maps.maps,\n                        map2: {\n                            ...state.maps.maps.map2,\n                            data: {\n                                ...state.maps.maps.map2.data,\n                                layers: null\n                            }\n                        }\n                    }\n                }\n            };\n            const output = Select.maps.getLayersStateByMapKey(updatedState, \"map2\");\n            assert.isNull(output);\n        });\n    });\n\n    describe('getAllLayersStateByMapKey', function () {\n        const expectedResult = [\n            {\n                key: \"pantherBackgroundLayer\",\n                layerTemplateKey: \"layerTemplateBackground\"\n            },\n            {\n                key: \"layer2\",\n                layerTemplateKey: \"layerTemplate2\",\n                metadataModifiers: {\n                    periodKey: \"period1\",\n                    scopeKey: \"scope1\"\n                },\n                filterByActive: null\n            },\n            {\n                key: \"layer1\",\n                name: \"Layer 1\",\n                layerTemplateKey: \"layerTemplate1\",\n                styleKey: \"style1\",\n                metadataModifiers: {\n                    placeKey: \"place1\",\n                    scopeKey: \"scope1\",\n                    scenarioKeys: [\"scenario1\", \"scenario2\"]\n                },\n                filterByActive: {\n                    place: true,\n                    period: true,\n                    layerTemplateKey: true,\n                    applicationKey: true\n                }\n            }, {\n                key: \"layerDefinition1\",\n                name: \"Layer with definitions\",\n                type: \"vector\",\n                options: {\n                    features: [],\n                    style: {\n                        styles: [{\n                            fill: \"#ff0000\"\n                        }]\n                    }\n                },\n                filterByActive: {\n                    period: true\n                },\n                metadataModifiers: {\n                    scopeKey: \"scope1\"\n                }\n            }\n        ];\n\n        it('should return all map layers for map 1', () => {\n            const output = Select.maps.getAllLayersStateByMapKey(state, \"map1\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        testHelpers.testCache(Select.maps.getAllLayersStateByMapKey, [state, \"map1\"], expectedResult);\n\n        it('should return all map layers for map 2', () => {\n            const expectedResult = [\n                {\n                    key: \"pantherBackgroundLayer\",\n                    type: \"wmts\",\n                    options: {\n                        url: \"http://backgroundLayer.no\"\n                    }\n                },\n                {\n                    key: \"layer2\",\n                    layerTemplateKey: \"layerTemplate2\",\n                    metadataModifiers: {\n                        periodKey: \"period1\",\n                        scopeKey: \"scope1\"\n                    },\n                    filterByActive: null\n                },\n                {\n                    key: \"layer3\",\n                    name: \"Layer 3\",\n                    layerTemplateKey: \"layerTemplate3\",\n                    styleKey: \"style3\",\n                    metadataModifiers: {\n                        placeKey: \"place2\",\n                        periodKey: \"period2\",\n                        scopeKey: \"scope1\"\n                    },\n                    filterByActive: null\n                }\n            ];\n            const output = Select.maps.getAllLayersStateByMapKey(state, \"map2\");\n            assert.deepStrictEqual(output, expectedResult);\n        });\n\n        it('should return null, if both backgroundLayer and layers is null', () => {\n            const updatedState = {\n                ...state,\n                maps: {\n                    ...state.maps,\n                    sets: {\n                        ...state.maps.sets,\n                        set1: {\n                            ...state.maps.sets.set1,\n                            data: {\n                                ...state.maps.sets.set1.data,\n                                layers: null,\n                                backgroundLayer: null\n                            }\n                        }\n                    },\n                    maps: {\n                        ...state.maps.maps,\n                        map1: {\n                            ...state.maps.maps.map1,\n                            data: {\n                                ...state.maps.maps.map1.data,\n                                layers: null,\n                                backgroundLayer: null\n                            }\n                        }\n                    }\n                }\n            }\n            const output = Select.maps.getAllLayersStateByMapKey(updatedState, \"map1\");\n            assert.isNull(output);\n        });\n    });\n});","import {assert} from 'chai';\nimport Select from \"../../../src/state/Select\";\n\ndescribe('state/selections/selectors', function () {\n\tconst state = {\n\t\tstyles: {\n\t\t\tbyKey: {\n\t\t\t\t\"style1\": {\n\t\t\t\t\tkey: 'style1',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdefinition: {\n\t\t\t\t\t\t\trules: [{\n\t\t\t\t\t\t\t\tstyles: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\"fill\": \"#aab5ff\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tselections: {\n\t\t\tbyKey: {\n\t\t\t\t\"selection1\": {\n\t\t\t\t\tkey: \"selection1\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tstyleKey: \"style1\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\n\tdescribe('getAllAsObjectWithStyles', function () {\n\t\tconst noStyleState = {\n\t\t\t...state,\n\t\t\tstyles: {}\n\t\t};\n\n\t\tconst noMatchStyleState = {\n\t\t\t...state,\n\t\t\tstyles: {byKey: {'styleXXX': {}}}\n\t\t};\n\n\t\tconst emptyStyleState = {\n\t\t\t...state,\n\t\t\tstyles: {byKey: {'style1': {key: 'style1', data: {}}}}\n\t\t};\n\n\t\tconst noSelectionState = {\n\t\t\t...state,\n\t\t\tselections: {}\n\t\t};\n\n\t\tit('should return selections with styles', () => {\n\t\t\tconst result = {\n\t\t\t\t\"selection1\": {\n\t\t\t\t\tkey: \"selection1\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tstyleKey: \"style1\",\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\"fill\": \"#aab5ff\"\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tassert.deepEqual(Select.selections.getAllAsObjectWithStyles(state), result);\n\t\t});\n\n\t\tit('should return original selections', () => {\n\t\t\tconst result = {...state.selections.byKey};\n\t\t\tassert.deepEqual(Select.selections.getAllAsObjectWithStyles(noStyleState), result);\n\t\t\tassert.deepEqual(Select.selections.getAllAsObjectWithStyles(noMatchStyleState), result);\n\t\t\tassert.deepEqual(Select.selections.getAllAsObjectWithStyles(emptyStyleState), result);\n\t\t});\n\n\t\tit('should return empty object', () => {\n\t\t\tassert.deepEqual(Select.selections.getAllAsObjectWithStyles(noSelectionState), {});\n\t\t});\n\t});\n});\n"],"names":["getIndex","createCachedSelector","indexes","filter","order","index","_find","isCorrespondingIndex","JSON","stringify","getUniqueIndexes","_isEmpty","reduce","uniqueIndexes","i","removeIndex","clearedIndexes","_reduce","acc","indexToBeCleared","length","getUpdatedIndexes","state","indexUpdate","changedOn","indexesPath","selectedIndex","forEach","_isEqual","push","model","key","Object","entries","level","dataByTiles","hasOwnProperty","itemFitFilter","item","every","value","itemHasFilterKey","data","itemHasFilterLinkKey","_isObject","includes","notin","mergeFilters","activeKeys","filterByActive","fullFilter","application","activeApplicationKey","applicationKey","activeCaseKey","caseKey","scope","activeScopeKey","scopeKey","place","activePlaceKey","placeKey","activePlaceKeys","period","activePeriodKey","periodKey","activePeriodKeys","attribute","activeAttributeKey","attributeKey","layerTemplate","activeLayerTemplateKey","layerTemplateKey","mergeMetadataKeys","definedKeys","convertModifiersToRequestFriendlyFormat","modifiers","modifiersForRequest","placeKeys","caseKeys","scenarioKeys","scenarioKey","periodKeys","scopes","activeKey","getAllByKey","getSubstate","byKey","getAllNotRemovedAsObject","createSelector","_pickBy","getAllAsObject","getAll","values","modelsFromIndex","models","indexedModels","count","modelKey","indexedModel","nonEmptyArray","modelsFromIndex2","getAllForActiveScope","getIndexes","commonHelpers","getActiveKey","getActiveKeys","getActive","getActiveModels","activeModels","map","getByFilterOrder","getBatchByFilterOrder","getIndexed","getAllActiveKeys","start","mergedFilter","end","Math","min","getByKey","allData","getByKeysAsObject","keys","_pick","getByKeys","getDataByKey","getDeletePermissionByKey","permissions","activeUser","guest","getUpdatePermissionByKey","update","getEditedAll","editedByKey","getEditedAllAsObject","getEditedActive","getEditedByKey","allEditedData","getEditedDataByKey","getEditedKeys","edited","getIndexesObserver","createRecomputeObserver","getIndexesByPath","indexPath","_get","getIndexByPath","getIndex_recompute","createRecomputeSelector","getIndexChangedOn","getIndexPage","indexed","o","getIndexedPage","page","getIndexTotal","getIndexesByFilteredItem","array","getKeysToLoad","outdated","getUsedKeys","inUse","_uniq","_flatten","getIndexedDataUses","cases","scenarios","places","periods","attributes","layerTemplates","areaTreeLevelKeys","specific","apps","app","activeCaseKeys","activeScenarioKey","activeScenarioKeys","activeAttributeKeys","activeAreaTreeLevelKey","appKey","getActiveKeysByFilterByActive","scenario","areaTreeLevel","areaTreeLevelKey","getActiveKeysByFilterByActiveObserver","getUsedIndexPages","indexedDataUses","groupedUses","finalUsedIndexes","usedIndexes","usedIndex","existingIndex","use","uses","_mergeIntervals","getUsesForIndex","stringOrder","stringFilter","_map","sort","getUsesWithActiveDependency","componentUsedIndexes","accumulator","getStateToSave","isInterval","interval","intervalsOverlap","earlier","later","intervals","validIntervals","sortedIntervals","_sortBy","_tail","mergedIntervals","last","pop","max","_head","_deprecatedSelections","common","mergeFeaturesWithAttributesCache","CacheFifo","getMergedFilterFromLayerStateAndActiveMetadataKeys","layer","activeMetadataKeys","modifiersPath","activeFilter","active","getBackgroundLayersWithFilter","commonSelectors","layerState","layerKey","parse","getLayersWithFilter","layersState","attributeFilter","prepareLayerByDataSourceType","dataSource","fidColumnName","style","attributeDataSources","selections","layerOptions","options","dataSourceData","attribution","nameInternal","type","tableName","layerName","features","selected","url","urls","params","configuration","rest","singleTile","layers","styles","mergeFeaturesWithAttributes","prepareSelection","source","definition","name","nameDisplay","description","opacity","layerSelections","populatedSelections","selectionData","color","hoveredColor","featureKeysFilter","hoveredStyle","outlineColor","outlineWidth","cacheKey","cache","findByKey","finalFeaturesObject","feature","properties","attributeDataSource","featuresWithAttributes","featureWithAttributes","featureKey","addOrUpdate","getLayersStateWithoutFeatures","withoutFeatures","getFilteredTemplatesGroupedByLayerKey","layerTemplatesByLayerKey","l","join","getFilteredTemplatesGroupedByLayerTemplateKey","spatialVectorDataSources","getEditedFeatures","spatialDataSources","vector","editedFeaturesBySourceKey","noMemoGetFeaturesBySourceKey","props","featuresBySourceKey","dataSourceKey","noMemoGetEditedFeaturesBySourceKey","noMemoGetSelectedFeaturesKeysBySourceKey","selectedFeaturesKeysBySourceKey","noMemoGetSelectedFeaturesBySourceKey","_filter","_includes","areaRelations","getAllData","relations","relation","getFilteredData","getFilteredDataSourceKeysGroupedByLayerKey","filteredGroupedByLayerKey","filteredRelations","spatialDataSourceKey","spatialRelations","getFilteredDataGroupedByLayerTemplateKey","getFilteredDataGroupedByLayerKey","groupedRelations","_cloneDeep","getDataSourceKeysFiltered","getDataSourceRelationsByLayerTemplateKeys","layerTemplateKeys","filtered","getDataSourceRelationsGroupedByLayerKey","groupedDataSourceKeys","relationsData","getDataSourceKeysGroupedByLayerKey","groupedRelationsDataSource","r","getDataSourceRelationsForLayerKey","spatialData","getFilteredSourcesGroupedByLayerKey","SpatialRelations","AreaRelations","SpatialData","dataSources","spatialRelationsDataSourceKeysGroupedByLayerKey","areaRelationsDataSourceKeysGroupedByLayerKey","dataSourceKeysGroupedByLayerKey","dataSourcesGroupedByLayerKey","dataSourceKeysAndFidColumns","dataSourceKeyAndFidColumn","finalDataSource","getFilteredGroupedByLayerKey","groupedKeys","groupedSources","sources","spatialRelationData","vectorSelectors","attributeRelations","getFilteredDataSourceKeysWithFidColumn","attributeKeys","filterWithoutAttributes","_omit","preFilteredRelations","attributeDataSourceKey","getFilteredDataSourceKeysWithFidColumnGroupedByLayerKey","layersWithFilter","layersStateAsString","getFiltered","getFilteredRelations","fitsFilter","_isArray","getDataSourcesFromFilteredRelations","getDataSourceKeyFiltered","attributeData","AttributeRelations","getFilteredGroupedByFid","allDataSources","filteredSource","keySource","nameSource","keyName","existingKey","_values","getNamesByFid","attributeRelationData","getFilteredDataSources","AttributeData","dataSourcesWithFidColumn","finalDataSources","dataSourceWithFidColumn","columnName","getFilteredDataSourcesGroupedByLayerKey","dataSourcesDataByLayerKey","getKey","getCompleteConfiguration","getCompleteLocalConfiguration","localConfiguration","getConfiguration","path","getLocalConfiguration","getByKeyObserver","getDefinitionByKey","getGroupedByLayerKey","stylesByLayerKey","styleKey","getAllAsObjectWithStyles","StyleSelectors","allStyles","selectionsWithStyles","selection","selectionStyle","rules","prepareSelectionByLayerStateSelected","layerStateSelected","getKeysByAttributeRelations","attributeRelationsSelectors","getByFullPeriodAsObject","periodStart","periodEnd","moment","isBetween","getFilteredGroupedByLayerTemplateKey","spatialRelationsDataGroupedByLayerTemplateKey","periodsByLayerKey","spatialRelation","spatialRelationsDataGroupedByLayerKey","getActivePeriod","getPeriods","defaultMapView","center","lat","lon","boxRange","tilt","roll","heading","mapConstants","getBackgroundLayerCache","getLayersCache","_deprecatedMaps","getMapsAsObject","maps","getMapSetsAsObject","sets","getActiveSetKey","activeSetKey","getActiveMapKey","activeMapKey","getActiveMap","getMaps","getMapSets","getMapByKey","getMapLayersByMapKey","getMapSetByKey","getMapSetByMapKey","mapKey","setForMap","set","getMapSetMapKeys","getMapBackgroundLayerStateByMapKey","backgroundLayer","getMapLayersStateByMapKey","getMapMetadataModifiersByMapKey","metadataModifiers","getMapFilterByActiveByMapKey","getMapSetBackgroundLayerStateByMapKey","getMapSetLayersStateByMapKey","getMapSetMetadataModifiersByMapKey","getMapSetFilterByActiveByMapKey","getMapSetLayersStateBySetKey","getMapLayerByMapKeyAndLayerKey","find","getFilterByActiveByMapKey","mapFilter","setFilter","getBackgroundLayerStateByMapKey","mapBackgroundLayer","setBackgroundLayer","getLayersStateByMapKey","mapLayers","setLayers","mapMetadataModifiers","setMetadataModifiers","mapFilterByActive","layerMetadataModifiers","layerFilterByActive","_uniqBy","getAllLayersStateByMapKey","getMapSetActiveMapKey","mapKeyInSet","getView","mapView","view","sync","_omitBy","viewValue","viewKey","mapSetView","mapUtils","mergeViews","getViewLimits","mapViewLimits","viewLimits","mapSetViewLimits","getMapSetView","setView","getMapSetViewLimits","getMapSetActiveMapView","getBackgroundLayer","mapHelpers","dataSourcesByLayerKey","SpatialDataSourcesSelectors","layerDataSources","getMapBackgroundLayer","getLayerFromState","attributeDataSourcesByLayerKey","currentApp","AppSelectors","apiGeoserverWMSProtocol","AppSelect","apiGeoserverWMSHost","apiGeoserverWMSPath","getLayers","LayerTemplatesSelectors","AttributeDataSourcesSelectors","StylesSelectors","SelectionsSelectors","PeriodsSelectors","getMapLayers","getMapByMetadata_deprecated","metadata","_isMatch","getNavigator_deprecated","mapNavigator","worldWindNavigator","mapSetNavigator","navigator","getMapSetNavigatorRange_deprecated","range","getLayers_deprecated","AttributeDataSelectors","groupedSpatialSources","groupedAttributeSources","localConfig","getLayerConfiguration","getBackgroundLayerStateByMapKey_deprecated","getFiltersForUse_deprecated","getLayersStateByMapKey_deprecated","useActiveMetadataKeys","mapSet","a","getAllLayersStateByMapKey_deprecated","backgroundLayerState","backgroundLayerData","getLayerState","layersData","Array","getMapsByMapSetKey_deprecated","mapSetMapsKeys","k","getLayersStateByMapSetKey_deprecated","mapsLayersState","useMetadata","spatialSourcesForLayer","attributeSourcesForLayer","layerConfig","mapServerConfig","wmsMapServerUrl","wfsMapServerUrl","apiGeoserverWFSProtocol","apiGeoserverWFSHost","apiGeoserverWFSPath","spatialRelationsData","attributeLayerTemplateKey","attributeRelationsData","areas","areaTreeLevels","areaTrees","getAttributes","attributeSets","getByTopics","topics","attributeSet","topic","getUniqueAttributeKeysForTopics","allAttributeKeys","uniqueAttributeKeys","_compact","getAttributeSets","attributeStatistics","getAllChartsAsObject","charts","getChartByKey","getSetByKey","getChartsBySetKeyAsObject","setCharts","getMetadataActiveKeys","getChartConfiguration","chart","filters","getFiltersForUse","getDataForChart","chartKey","getNamesForChart","components","getDataByComponentKey","get","componentState","getFilteredAttributeDataSourceKeyAttributeKeyPairs","pairs","getSpatialIndexesObserver","spatialIndexes","getByDataSourceKeyObserver","byDataSourceKey","getDataByDataSourceKeys","dataSourceKeys","_","isEmpty","getAttributesByDataSourceKeysForFeatureKey","attributeDataSourceKeyAttributeKeyPairs","dataByDataSourceKey","forIn","getIndexedFeatureKeysByDataSourceKeys","tile","featureKeysByDataSourceKeys","getByFilteredIndex","filteredDataSources","getIndexedFeatureKeys","featureKeys","tileAsString","tileAsArray","split","parseFloat","getMissingTiles","tiles","loadedTilesInIndex","tileData","tileKey","missingTiles","tilesCache","getFeatures","attributesByDataSourceKey","attributeValue","geometry","getTile","spatialRelationsFilter","attributeRelationsFilter","spatialDataForDataSource","tileString","cacheParams","indexedFeatureKeys","indexedFeatureKeysByAttributeDataSourceKeys","geometries","getTiles","populatedTiles","populatedTile","getByAoiKey","layerPeriods","byAoiKey","getByPlaceKey","byPlaceKey","getActiveAoiKey","aoi","getActivePlaceKey","getActiveLpisCaseKey","lpisChangeReviewCases","getActiveAoiData","activeAoiKey","getActivePlaceData","getForActiveLpisCase","activeLpisCaseKey","layerTrees","getBackgroundLayerAsLayer","mergeBackgroundLayerWithLayers","finalLayers","mergeModifiersAndFilterByActiveToLayerStructure","getZoomLevel","mapWidth","mapHeight","viewportRange","getMapViewportRange","levelBoxRange","getNearestZoomLevelBoxRange","grid","getLevelByViewport","lonLat","tileGrid","getTileGrid","flat","selectorHelpers","setKey","getViewByMapKey","getViewByMapKeyObserver","getViewportByMapKey","viewport","getViewportByMapKeyObserver","getViewLimitsByMapKey","getMapSetMaps","mapKeys","getMetadataModifiersByMapKey","mapModifiers","setModifiers","getBackgroundLayerStateByMapKeyObserver","getMapSetLayersStateWithModifiersByMapKey","mapSetFilterByActive","getMapLayersStateWithModifiersByMapKey","getLayersStateByMapKeyObserver","getLayerStateByLayerKeyAndMapKey","getSpatialRelationsFilterFromLayerState","metadataDefinedByKey","mergedMetadataKeys","relationsFilter","getAttributeRelationsFilterFromLayerState","spatialFilter","getFinalLayerByDataSourceAndLayerState","spatialDataSource","geometryColumnName","dataSourceOptions","renderAsType","layerStateOptions","DataSelectors","tileList","width","height","dataSourceType","getActiveScopeConfiguration","getActiveScopeData","getActiveScopeKey","getScopes","getScopeData","getActivePlaces","getPlacesForActiveScope","ScopesSelectors","dataset","getActiveView","bbox","getViewFromBoundingBox","getPlaces","isDefaultSituationActive","defaultSituationActive","getActiveScenarios","getPucsScenariosVectorSource","defaultSituation","scenarioData","vectorLayers","activeCaseScenariosLoaded","activeCase","scenariosLoaded","getActiveCaseScenarioKeys","getActiveCaseEditedScenarioKeys","activeCaseEdited","getActiveCaseScenarios","ScenariosSelectors","activeCaseScenarioKeys","selectedModels","getActiveCaseScenariosEditedKeys","scenariosEditedKeys","commonKeys","_intersection","getActiveCaseScenariosEdited","scenariosEdited","activeCaseEditedScenarioKeys","selectedEditedModels","getActiveCaseScenarioEdited","getActivePlaceCases","PlacesSelectors","caseItem","place_ids","getActiveCaseEdited","casesSelectors","scenariosSelectors","getAllScreensAsObject","screens","getAllSetsAsObject","getScreensBySetKey","setScreens","orderBySpace","lineage","getSetKeyByScreenLineage","screenLineage","orderByHistory","getScreenByLineage","snapshots","tags","DEFAULT_CATEGORY","users","getGroupsSubstate","groups","getGroups","isLoggedIn","isAdmin","getById","userId","user","id","isAdminGroupMember","getActiveUserPermissions","isAdminOrAdminGroupMember","getGroupKeysForActiveUser","hasActiveUserPermissionToCreate","category","create","isDromasAdmin","currentUser","group","getActiveUserDromasLpisChangeReviewGroup","ScopeSelectors","activeUserGroupKeys","activeScopeConfiguration","dromasLpisChangeReview","gisatAdmins","szifAdmins","gisatUsers","szifUsers","getActiveUser","getGroupsForActiveUser","getUsers","views","attributesSelectors","attributeSetsSelectors","componentsSelectors","scopesSelectors","getViewsData","windows","getAllWindowsAsObject","getWindow","getWindowsBySetKeyAsObject","setWindows","isOpen","window","App","Areas","Attributes","AttributeDataSources","AttributeStatistics","AttributeSets","Cases","Charts","Components","Data","LayerPeriods","LayerTemplates","LayerTrees","Maps","Periods","Places","Scenarios","Scopes","Screens","Selections","Snapshots","SpatialDataSources","Styles","Tags","Users","Views","Windows","getEurope","countries","europe","getAfrica","africa","getAsia","asia","getEuropeCountryByKey","getAfricaCountryByKey","getAsiaCountryByKey","getThreeCountries","europeKey","africaKey","asiaKey","europeanCountry","africanCountry","asianCountry","testCache","testingFunction","expectedResult","otherParams","it","param","firstOutput","assert","deepStrictEqual","notEqual","thirdOutput","equal","describe","germany","france","china","japan","egypt","mali","cities","newYork","updatedState","prague","output","selectorsCacheTest","testHelpers","updatedState2","czechia","midtermOutput","secondOutput","output2","output3","america","spain","utils","deepKeyMirror","INITIALIZE","AOI_ADD","AOI_SET_ACTIVE","AOI_REQUEST","AOI_RECEIVE","AOI_REQUEST_ERROR","AOI_GEOMETRY_RECEIVE","AOI_GEOMETRY_REQUEST_ERROR","APP","SET_KEY","SET_BASE_URL","SET_LOCAL_CONFIGURATION","UPDATE_LOCAL_CONFIGURATION","RECEIVE_CONFIGURATION","AREAS","AREA_TREE_LEVELS","ADD","ADD_UNRECEIVED","ENSURE","ERROR","INDEX","CLEAR_ALL","LOAD","REQUEST","SET_ACTIVE_KEY","USE","INDEXED","CLEAR","REGISTER","KEYS","AREA_TREES","AREA_RELATIONS","AREAS_SELECTIONS_SET_ACTIVE_MULTIPLE","AREAS_SELECTIONS_UPDATE","ATTRIBUTES","DELETE","MARK_DELETED","EDITED","REMOVE","REMOVE_PROPERTY","UPDATE","ADD_BATCH","CLEAR_INDEX","SET_ACTIVE_KEYS","INDEXED_BATCH","ATTRIBUTE_SETS","CASES","CHOROPLETHS_SET_ACTIVE_KEYS","CHOROPLETHS_UPDATE","COMMON","DATA","CLEANUP_ON_LOGOUT","SET_OUTDATED","REMOVE_PROPERTY_VALUES","COMPONENTS","SET","CHARTS","SET_INITIAL","ATTRIBUTE_DATA","ADD_WITH_INDEX","ATTRIBUTE_DATA_SOURCES","ATTRIBUTE_RELATIONS","SPATIAL_DATA","SPATIAL_DATA_SOURCES","SPATIAL_RELATIONS","DATAVIEWS_REMOVE","DATAVIEWS_DELETE_RECEIVE","DATAVIEWS_DELETE_REQUEST","DATAVIEWS_DELETE_REQUEST_ERROR","DATAVIEWS","INDICATORS","LAYER_PERIODS_AOI_LAYER_REQUEST","LAYER_PERIODS_AOI_LAYER_REQUEST_ERROR","LAYER_PERIODS_AOI_LAYER_RECEIVE","LAYER_PERIODS_PLACE_LAYER_REQUEST","LAYER_PERIODS_PLACE_LAYER_REQUEST_ERROR","LAYER_PERIODS_PLACE_LAYER_RECEIVE","LAYER_PERIODS_KEY_LAYER_REQUEST","LAYER_PERIODS_KEY_LAYER_REQUEST_ERROR","LAYER_PERIODS_KEY_LAYER_RECEIVE","LAYER_TEMPLATES","MAPS_ADD","MAPS_REMOVE","MAPS_UPDATE","MAPS_UPDATE_DEFAULTS","MAPS_SET_ACTIVE","MAPS_SET_INDEPENDENT_OF_PERIOD","MAPS","SET_ACTIVE_MAP_KEY","SET_BACKGROUND_LAYER","VIEW","MAP","LAYERS","SET_STYLE_KEY","VIEWPORT","_DEPRECATED_MAPS","SET_ACTIVE_SET_KEY","SET_SCOPE","SET_SCENARIO","SET_PERIOD","SET_PLACE","SET_CASE","SET_LAYERS","ADD_MAP","SET_MAPS","REMOVE_MAP","WORLD_WIND_NAVIGATOR","SET_SYNC","HOVERED_FEATURE_KEYS","SELECTION","STYLE","SET_NAME","SET_DATA","ADD_LAYERS","REMOVE_LAYERS","LAYER","ADD_TO_SET","SET_INDEX","PERIODS","PLACES_ADD","PLACES_SET_ACTIVE_MULTI","PLACES","REDIRECT_TO_VIEW","SCENARIOS","SCENARIOS_ADD","SCENARIOS_EDITED_UPDATE","SCENARIOS_EDITED_REMOVE","SCENARIOS_EDITED_REMOVE_PROPERTY","SCENARIOS_SET_ACTIVE","SCENARIOS_SET_ACTIVE_MULTI","SCENARIOS_SET_DEFAULT_SITUATION_ACTIVE","SCENARIOS_CASES_ADD","SCENARIOS_CASES_REMOVE","SCENARIOS_CASES_SET_ACTIVE","SCENARIOS_UPDATE","SCENARIOS_REQUEST","SCENARIOS_RECEIVE","SCENARIOS_REQUEST_ERROR","SCENARIOS_CASES_REQUEST","SCENARIOS_CASES_RECEIVE","SCENARIOS_CASES_REQUEST_ERROR","SCENARIOS_CASES_UPDATE","SCENARIOS_CASES_EDITED_UPDATE","SCENARIOS_CASES_EDITED_REMOVE","SCENARIOS_CASES_EDITED_REMOVE_ACTIVE","SCENARIOS_CASES_EDITED_REMOVE_PROPERTY","SCENARIOS_API_PROCESSING_FILE_STARTED","SCENARIOS_API_PROCESSING_FILE_SUCCESS","SCENARIOS_API_PROCESSING_FILE_ERROR","SCENARIOS_CASES_API_CREATE_REQUEST","SCENARIOS_CASES_API_CREATE_RECEIVE","SCENARIOS_CASES_API_CREATE_ERROR","SCENARIOS_CASES_API_DELETE_REQUEST","SCENARIOS_CASES_API_DELETE_RECEIVE","SCENARIOS_CASES_API_DELETE_ERROR","SCENARIOS_CASES_API_UPDATE_REQUEST","SCENARIOS_CASES_API_UPDATE_RECEIVE","SCENARIOS_CASES_API_UPDATE_ERROR","SCOPES","SCREENS","CLOSE","OPEN","REMOVE_ALL","RETRACT","SETS","TOP_HISTORY","SELECTIONS","FEATURE_KEYS_FILTER","_DEPRECATED_SELECTIONS","UPDATE_FROM_VIEW","VECTOR","ATTRIBUTE_STATISTICS","SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_ERROR","SPATIAL_DATA_SOURCES_DOWNLOAD_FILE_REQUEST","SPATIAL_DATA_SOURCES_RECEIVE","SPATIAL_DATA_SOURCES_REQUEST","SPATIAL_DATA_SOURCES_FILTERED_REQUEST","SPATIAL_DATA_SOURCES_REQUEST_ERROR","SPATIAL_DATA_SOURCES_ADD","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_RECEIVE","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_BBOX_REQUEST_ERROR","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_POINT_REQUEST_ERROR","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_SELECT","SPATIAL_DATA_SOURCES_VECTOR_FEATURES_EDITED_ADD","STYLES","SNAPSHOTS_ADD","SNAPSHOTS_REMOVE","TAGS","THEMES","USERS","GROUPS","CURRENT","LOGIN","USER_GROUPS","USERS_ADD","USERS_LOAD_REQUEST","USERS_LOAD_REQUEST_ERROR","USERS_LOAD_CURRENT_REQUEST","USERS_LOAD_CURRENT_REQUEST_ERROR","USERS_LOGIN_REQUEST","USERS_LOGIN_REQUEST_ERROR","USERS_LOGOUT_REQUEST","USERS_LOGOUT_REQUEST_ERROR","USERS_UPDATE","LAYER_TREES","VIEWS","VISUALIZATIONS","WMS_LAYERS","WINDOWS","TOP","LPIS_CASES_ADD","LPIS_CASE_CHANGES_ADD","LPIS_CASES_SEARCH_STRING_CHANGE","LPIS_CASES_SELECTED_STATUS_CHANGE","LPIS_CASES_EDIT_ACTIVE_EDITED_CASE","LPIS_CASES_CREATE_NEW_ACTIVE_EDITED_CASE","LPIS_CASES_REMOVE_EDITED_CASES_BY_KEYS","LPIS_CASES_SET_ACTIVE","LPIS_CASES_CLEAR_EDITED_CASE","LPIS_CASE_EDIT_ACTIVE_CASE","LPIS_CASE_EDIT_ACTIVE_CASE_STATUS","LPIS_CASE_EDIT_CASE_STATUS","LPIS_CASE_SET_NEXT_ACTIVE_CASE_KEY","LPISCHECK_CASES_ADD","LPISCHECK_UPDATE_CASE","LPISCHECK_CASES_SET_ACTIVE","LPIS_CHECK_CASES_SEARCH_PARAM_CHANGE","TTL","fetch","_fetch","setFetch","resetFetch","request","apiPath","method","query","payload","ttl","_isUndefined","apiBackendProtocol","apiBackendHost","apiBackendPath","queryString","credentials","headers","body","then","response","contentType","ok","indexOf","json","Error","error","DEFAULT_CATEGORY_PATH","apiDelete","dataType","categoryPath","dispatch","getState","Select","result","errors","actionGeneralError","itemsDeleted","console","warn","apiUpdate","actionTypes","editedData","receiveUpdated","updateEdited","originalModel","actionRemovePropertyFromEdited","actionUpdateEdited","removePropertyFromEdited","deleteItem","deletedKeys","d","deleteDate","Date","toISOString","utc","format","actionMarkAsDeleted","actionRemovePropertyValuesFromAllEdited","actionClearIndex","refreshIndex","saveEdited","saved","useKeys","componentId","actionUseKeysRegister","ensureKeys","useIndexed","actionUseIndexedRegister","ensureIndexed","useIndexedBatch","additionalParams","actionUseIndexedBatchRegister","ensureIndexedBatch","setActiveKeyAndEnsureDependencies","filterKey","actionSetActiveKey","ensureIndexesWithActiveKey","setActiveKeysAndEnsureDependencies","actionSetActiveKeys","usesForIndex","receiveIndexed","actionAdd","actionAddIndex","total","changes","receiveIndexedBatch","actionAddBatch","actionAddBatchIndex","requestWrapper","successAction","errorAction","currentAppKey","getCreatePayload","items","concat","loadAll","PAGE_SIZE","requestPageSize","configDefaults","getAPIPath","limit","promises","remainingPageCount","ceil","pagePayload","offset","Promise","all","results","remainingData","res","keysToLoad","_chunk","keysToLoadPage","loadKeysPage","indexPage","pages","loadedKeys","v","completeFilter","loadIndexedPage","err","message","success","loadIndexedBatch","receiveKeys","isAfter","loadFiltered","originalData","original","actionAddUnreceivedKeys","refreshUses","actionClearIndexes","usedKeys","usedIndexPages","_flatMap","usedIndexPage","ensureIndexesWithFilterByActive","Action","actions","updateSubstateFromView","actionDataSetOutdated","ActionTypes","e","creator","action","args","pathSegment","date","property","actionUseIndexedClear","actionUseIndexedClearAll","actionSetInitial","actionUseKeysClear","datatype","uuid","add","addBatch","addBatchIndex","addIndex","ensure","setActiveKey","setActiveKeys","useKeysClear","clearIndex","useIndexedRegister","useIndexedClear","useIndexedClearAll","setInitial","actionClearUseIndexed","updateStateFromView","setActiveSelectionFeatureKeysFilterKeys","selectionKeys","activeSelectionKey","setFeatureKeysFilterKeys","updateStateFromViewWithData","clearFeatureKeysFilter","loadLayerData","geometriesAccuracy","transformation","snapToGrid","size","transform","vectorActions","ensureIndexedAndEnsureDependencies","noStatistic","uniqueDataSourcesKeys","SpatialDataSourcesAction","loadAttributeData","loadFilteredData","ensureIndexedSpecific","fidColumnNames","attributeDataSourceKeys","uniqueAtributeDataSourceKeys","attributeDataFilter","statisticsFilter","percentile","statistics","quartilePercentiles","uniqueKeys","attributeActions","attributeDataSourcesActions","existingStatisticsSource","statisticsActions","existingSource","attributeDataActions","commonActions","setActiveMapKey","mapByKey","actionSetActiveMapKey","setByMapKey","setActiveSetKey","setMapSetActiveMapKey","actionSetMapSetActiveMapKey","setByKey","actionSetActiveSetKey","addSet","actionAddSet","addLayersToMaps","layerTreesFilter","layerTreesData","lastLTdata","structure","layerTreeStructure","addTreeLayers","treeLayers","layerTreeBranchKey","flattenLT","layerTree","getFlattenLayers","visibleLayers","visible","visibleLayersKeys","uniqVisibleLayersKeys","lk","some","ls","zIndex","getLayerZindex","setMapBackgroundLayer","addLayer","removeSet","actionRemoveSet","addMapToSet","actionAddMapToSet","removeMapKeyFromSet","actionRemoveMapKeyFromSet","mapSetMapKeys","setSetView","actionSetSetView","setSetSync","actionSetSetSync","orderSetByMapPeriod","setMaps","extendedSetMaps","orderedExtendedSetMaps","_orderBy","orderedMapKeys","actionSetSetMaps","addMap","actionAddMap","addMapForPeriod","removeMap","mapSets","mapSetMapKey","actionRemoveMap","removeMapForPeriod","setMapName","actionSetMapName","setMapData","actionSetMapData","setMapView","actionSetMapView","actionAddLayer","addLayers","removeLayer","actionRemoveLayer","removeLayers","layersKeys","setLayerIndex","actionSetLayerIndex","setLayerHoveredFeatureKeys","hoveredFeatureKeys","mapLayer","prevKeys","hovered","prevKeysString","nextKeysString","actionSetMapLayerHoveredFeatureKeys","setLayerSelectedFeatureKeys","selectedFeatureKeys","selectionKey","defaultSelection","colour","SelectionsAction","setMapLayer","layerExists","actionSetMapLayer","setMapLayerStyle","actionSetMapLayerStyle","updateMapLayer","actionUpdateMapLayer","updateMapAndSetView","forSet","forMap","updateVal","updateKey","ensureViewIntegrity","actionUpdateSetView","actionUpdateMapView","updateSetView","resetViewHeading","resetHeading","setMapScope","actionSetMapScope","setMapScenario","actionSetMapScenario","setMapPeriod","actionSetMapPeriod","setMapPlace","actionSetMapPlace","setMapCase","actionSetMapCase","actionSetMapBackgroundLayer","deprecated_use","setMapLayers","actionSetMapLayers","setSetBackgroundLayer","actionSetSetBackgroundLayer","setSetLayers","actionSetSetLayers","useClear","LayerTemplatesAction","AreasAction","select","SpatialRelationsAction","AreaRelationsAction","spatialFilters","spatialDataSourcesKeys","SpatialDataAction","AttributesAction","attributeMetadataModifiers","attributeFilterByActive","mergedAttributeFilter","AttributeRelationsAction","dataSourcesKeys","AttributeDataSourcesAction","AttributeDataAction","StylesAction","actionUpdate","goToPlace","placeString","getLocationFromPlaceString","location","navigatorUpdate","lookAtLocation","latitude","longitude","deprecated_updateWorldWindNavigator","spatialRelationsFilterByActive","deprecated_useClear","deprecated_checkWorldWindNavigatorIntegrity","WorldWindNavigator","deprecated_setMapWorldWindNavigator","deprecated_actionSetMapWorldWindNavigator","deprecated_setSetWorldWindNavigator","deprecated_actionSetSetWorldWindNavigator","updates","deprecated_actionUpdateSetWorldWindNavigator","deprecated_actionUpdateMapWorldWindNavigator","deprecated_resetWorldWindNavigatorHeading","defaultIncrement","headingIncrement","abs","setTimeout","finalHeading","clearActiveSelection","actionRemove","updateActiveSelection","updated","loadConfiguration","selectors","configurations","actionReceiveConfiguration","actionSetKey","actionSetBaseUrl","actionSetLocalConfiguration","actionUpdateLocalConfiguration","updateLocalConfiguration","setBaseUrl","setLocalConfiguration","component","actionSet","addDataAndIndex","createAndAddIndex","indexData","getIndexData","addDataAndIndexAction","indexByLevelByTileByDataSourceKey","addIndexAction","addLoadingIndex","loadingTiles","tileId","datasource","spatialIndex","toString","removeIndexAction","spatialDataAndIndexByDataSourceKey","spatialDataByDataSourceKey","dsKey","TILED_VECTOR_LAYER_TYPES","DEFAULT_RELATIONS_PAGE","getPageSize","getRestRelationsPages","attributeRelationsCount","spatialRelationsCount","maxCountValue","loadMissingRelationsAndData","loadGeometry","mergedSpatialFilter","preloadedSpatialDataSources","remainingRelationsPageCount","tilesPagination","loadRelations","remainingTilesPageCount","loadRestTilesRelations","spatialDataSourcesTypes","flattenDeep","sds","spatialDataSourcesPairs","allSourcesAreUnsupported","ds","loadMissingAttributeData","attributeDataIndex","missingAttributeDataTiles","missingAttributeDataTilesAsArrays","loadRelationsAndDS","spatialFilterWithMissingTiles","preloadSpatialDataSources","loadMissingSpatialData","spatialDataIndex","missingSpatialDataTiles","ensureDataAndRelations","restRelationsPages","hasMissingAttributesData","hasMissingSpatialData","hasSpatialOrAreaRelations","spatialRelationsIndex","areaRelationsIndex","missingAttributesData","missingSpatialData","filterHasSpatialOrAreaRelations","usedRelations","loadingTilesGeometry","loadingTilesAttributes","loadForAoiLayer","wmsLayer","apiBackendAoiLayerPeriodsPath","getAois","wmsLayers","actionLoadForAoiRequest","log","actionLoadForAoiLayerReceive","dates","actionloadForAoiLayerError","loadForPlaceLayer","actionLoadForPlaceRequest","actionLoadForPlaceLayerReceive","actionLoadForPlaceLayerError","loadForKeyLayer","actionLoadForKeyLayerRequest","actionLoadForKeyLayerReceive","actionLoadForKeyLayerError","loadForAoi","aoiKey","getDates","loadForPlace","loadForKey","getLayersWithGetDate","ensureData","helpers","layerUse","StylesActions","sdsContainsVector","DataActions","selectable","setMapLayerStyleKey","actionSetMapLayerStyleKey","setMapSetBackgroundLayer","actionSetMapSetBackgroundLayer","refreshMapSetUse","actionSetMapViewport","setMapViewport","requestIntervals","addEditedScenario","updatedScenarioKeys","actionUpdateEditedScenarios","updateEditedActiveCase","removeActiveCaseEditedScenarios","actionRemoveEditedScenarios","sameValue","val","actionRemovePropertyFromEditedCase","actionUpdateEditedCases","removeScenarioFromActiveCase","updatedScenarios","_without","updatedCase","removeActiveScenario","apiUpdateCases","removeScenarioFromActiveCaseEdited","updateEditedScenario","_union","actionRemovePropertyFromEditedScenario","setActiveCase","previousCase","actionSetActiveCase","addActiveScenario","stateUpdate","applyDataviewSettings","load","actionSetDefaultSituationActive","updateCases","actionUpdateCases","removeCases","actionRemoveCases","loading","actionLoadRequest","scenario_case_id","loadReceive","actionLoadError","actionLoadReceive","scenariosLoadedForActiveCase","MapsAction","updateWithScenarios","loadCases","actionLoadCasesRequest","place_id","scenario_cases","loadCasesReceive","actionLoadCasesError","scenario_ids","modelData","actionLoadCasesReceive","saveActiveCase","editedScenarios","apiCreateCases","deleteActiveCase","apiDeleteCases","actionApiCreateCasesRequest","caseData","apiCreateCasesReceive","uploadedScenarioFiles","createdScenario","scenarioToCreate","apiUploadScenarioFiles","actionApiCreateCasesError","actionApiUpdateCasesRequest","apiUpdateCasesReceive","duplicatedScenarios","file","dataSourceCloneKey","clonedDataSource","getDataSource","layer_name","apiExecuteMultipleMatlabProcessAndPublisResults","duplicatedScenario","scenario_id","scope_id","localLayer","actionApiUpdateCasesError","actionApiDeleteCasesRequest","scenarioCase","deleted","apiDeleteCasesError","actionApiDeleteCasesError","apiProcessingScenarioFileStarted","postData","FormData","append","apiProcessingScenarioFileError","uploadKey","apiExecutePucsMatlabProcessOnUploadedScenarioFiles","apiProcessingScenarioFilesError","clearRequestInterval","clearInterval","processes","process","getBodyForMatlabProcessesRequest","execute","executeMatlabProcessRequest","processMatlabProcessRequestResults","repeat","resolve","running","resultData","status","dataSourcesIds","data_source_id","loadRelationsReceive","apiProcessingScenarioFileSuccess","uploads","upload","requestAttempt","placeId","scopeId","statusText","apiCreateRelationsForScenarioProcessResults","processResults","setInterval","activePlace","inputVectorTemplateId","outputRasterHwdTemplateId","outputRasterUhiTemplateId","pucsLandUseScenarios","templates","sourceVector","hwd","uhi","inputVectors","outputRasters","inputVector","outputHwd","indicator","outputUhi","Number","layer_template_id","spatialDataSourceId","relationResults","spatial","apiProcessingScenarioFilesSuccess","fileProcessing","started","actionApiProcessingScenarioFileStarted","finished","actionApiProcessingScenarioFileSuccess","actionApiProcessingScenarioFileError","apiCreateScenariosReceive","activeCaseCreated","actionRemoveEditedCases","actionRemoveActiveCaseFromEdited","editedCases","editedCase","scenariosChanged","newScenarios","actionSetActive","setActive","removeEditedActiveCase","setDefaultSituationActive","activeScope","areaNameAttributeKey","attributeRelationsActions","countryCodeAttributeKey","timeouts","minActiveWidth","existingScreen","clearTimeout","desiredState","open","ensureSet","existingSet","actionOpen","actionTopHistory","close","actionClose","removeAllScreensFromSet","actionRemoveAllScreensFromSet","retract","actionRetract","topHistory","remove","createMapSnapshot","Stores","generateSnapshot","snapshot","useIndexedUsers","useIndexedGroups","onLogin","apiLoadCurrentUser","ScopesAction","PlacesAction","PeriodsAction","onLogout","actionLogout","apiLoginUser","email","password","actionApiLoginRequest","username","actionApiLoadCurrentUserRequest","actionAddGroups","transformGroups","transformUser","apiLogoutUser","actionApiLogoutRequest","actionApiLogoutRequestError","actionClearUsersUseIndexed","actionClearGroupsUseIndexed","useIndexedUsersClear","useIndexedGroupsClear","apply","actionCreators","storeActions","addOrOpen","windowKey","settings","existingWindow","updateSettings","updatedData","actionTopWindow","topWindow","afterEach","dispatchedActions","clearDispatchedActions","runFunctionActions","reject","tests","ACTION","p","expectedAction","SCOPE","test","getSubState","sub","k1","strictEqual","slash","Accept","undefined","k2","k3","k4","propScalarSame","propScalarChanged","propObjSame","same","propObjChanged","changed","propArrSame","propArrChanged","prop","extraKey","sameProp","likeProp","inProp","notInProp","linkKey","like","link","isNull","defined","DEFAULT_INITIAL_STATE","lastChangedOn","loadingKeys","newData","unreceived","addUnreceivedKeys","registerUseIndexed","newUse","existingUse","registerBatchUseIndexed","useKeysRegister","markDeleted","removed","removeEdited","removeEditedActive","removeEditedProperty","newEditedModelData","editedModels","removeEditedPropertyValues","dataTypeSingular","slice","keyProperty","keysProperty","updatedEdited","propertyUpdated","keyExists","updatedKeys","_difference","setActiveMultiple","newEditedData","clearIndexes","outdatedCount","correspondIndex","dataSetOutdated","cleanupOnLogout","reducers","someKey","sk1","sk2","compId","some3","comp","comp2","nk","nk2","sk","p2","actionKey","actionKeys","ep","createState","n","p1","INITIAL_STATE","baseUrl","setHelper","remainingPath","currentKey","shift","receiveConfiguration","reducer","pth","previousData","previousFeatures","nextFeatures","newFeaturesAsObject","fid","cv","r1","r2","l1","ad1","ad2","ad33","DEFAULT_ATTRIBUTE_COLLOR","addAttribute","c1","c2","c3","s1","ad3","cmp","isArray","key1","citizens","key2","getEmptyFeature","updatedDataForDataSourceKey","getUpdatedDataForDataSourceKey","addWithIndex","updatedByDataSourceKey","getUpdatedByDataSourceKey","updatedIndexes","featuresAsObject","dataFeaturesKeys","newFeature","existingFeature","featureKey2","geom","featureKey1","ds1","fk1","fk2","tile2","updateIndex","requestForAoi","layerRecord","getLayerRecord","byLayerKey","getByLayerKey","aoiRecord","requestForAoiError","receiveForAoi","requestForPlace","getLayerRecordForPlace","getByLayerKeyForPlace","placeRecord","requestForPlaceError","receiveForPlace","requestForKey","getLayerRecordForKey","getByLayerKeyForKey","record","requestForKeyError","receiveForKey","ak1","lk1","pk1","lpisCaselk1","defaultView","map1","fill","map2","set1","expectedResult2","noStyleState","noMatchStyleState","emptyStyleState","noSelectionState","deepEqual"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,QAAQ,GAAGC,wCAAoB,CAAC,CACpC,UAACC,OAAD;AAAA,SAAaA,OAAb;AAAA,CADoC,EAEpC,UAACA,OAAD,EAAUC,MAAV;AAAA,SAAqBA,MAArB;AAAA,CAFoC,EAGpC,UAACD,OAAD,EAAUC,MAAV,EAAkBC,KAAlB;AAAA,SAA4BA,KAA5B;AAAA,CAHoC,CAAD,EAKpC,UAACF,OAAD,EAAUC,MAAV,EAAkBC,KAAlB,EAA4B;AAC3B,MAAIF,OAAJ,EAAY;AACX,QAAMG,KAAK,GAAGC,0BAAOJ,OAAP,EAAgB,UAACG,KAAD;AAAA,aAAWE,oBAAoB,CAACF,KAAD,EAAQF,MAAR,EAAgBC,KAAhB,CAA/B;AAAA,KAAhB,CAAd;;AACA,WAAOC,KAAK,GAAGA,KAAH,GAAW,IAAvB;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAZmC,CAApB,CAaf,UAACH,OAAD,EAAUC,MAAV,EAAkBC,KAAlB,EAA4B;AAC7B,mBAAUI,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAV,SAAmCK,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAnC;AACA,CAfgB,CAAjB;;AAmBA,SAASM,gBAAT,CAA0BR,OAA1B,EAAmC;AAClC,MAAG,CAACS,6BAAUT,OAAV,CAAJ,EAAwB;AACvB,WAAOA,OAAO,CAACU,MAAR,CAAe,UAACC,aAAD,EAAgBR,KAAhB,EAA0B;AAC/C,UAAIC,0BAAOO,aAAP,EAAsB,UAACC,CAAD;AAAA,eAAOA,CAAC,IAAIP,oBAAoB,CAACF,KAAD,EAAQS,CAAC,CAACX,MAAV,EAAkBW,CAAC,CAACV,KAApB,CAAhC;AAAA,OAAtB,CAAJ,EAAuF;AACtF,eAAOS,aAAP;AACA;;AAED,0CAAWA,aAAX,IAA0BR,KAA1B;AACA,KANM,EAMJ,EANI,CAAP;AAOA,GARD,MAQO;AACN,WAAO,IAAP;AACA;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASU,WAAT,GAAkD;AAAA,MAA7Bb,OAA6B,uEAAnB,EAAmB;AAAA,MAAfC,MAAe;AAAA,MAAPC,KAAO;;AACjD,MAAGF,OAAO,IAAI,CAACS,6BAAUT,OAAV,CAAf,EAAmC;AAClC,QAAMc,cAAc,GAAGC,4BAASf,OAAT,EAAkB,UAACgB,GAAD,EAAMb,KAAN,EAAgB;AACxD,UAAMc,gBAAgB,GAAGZ,oBAAoB,CAACF,KAAD,EAAQF,MAAR,EAAgBC,KAAhB,CAA7C;;AACA,UAAGe,gBAAH,EAAqB;AACpB,eAAOD,GAAP;AACA,OAFD,MAEO;AACN,4CAAWA,GAAX,IAAgBb,KAAhB;AACA;AACD,KAPsB,EAOpB,EAPoB,CAAvB;;AASA,QAAGW,cAAc,CAACI,MAAf,KAA0BlB,OAAO,CAACkB,MAArC,EAA6C;AAC5C,aAAOlB,OAAP;AACA,KAFD,MAEO;AACN,aAAOc,cAAP;AACA;AACD,GAfD,MAeO;AACN,WAAOd,OAAP;AACA;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASmB,iBAAT,CAA2BC,KAA3B,EAAkCnB,MAAlC,EAA0CC,KAA1C,EAAiDmB,WAAjD,EAA8DC,SAA9D,EAAkG;AAAA,MAAzBC,WAAyB,uEAAX,SAAW;AAEjG,MAAIvB,OAAO,GAAG,EAAd;AACA,MAAIwB,aAAa,GAAG,EAApB;;AAEA,MAAIJ,KAAK,CAACG,WAAD,CAAT,EAAwB;AACvBH,IAAAA,KAAK,CAACG,WAAD,CAAL,CAAmBE,OAAnB,CAA2B,UAAAtB,KAAK,EAAI;AACnC,UAAIuB,6BAAUvB,KAAK,CAACF,MAAhB,EAAwBA,MAAxB,KAAmCyB,6BAAUvB,KAAK,CAACD,KAAhB,EAAuBA,KAAvB,CAAvC,EAAqE;AACpEsB,QAAAA,aAAa,GAAGrB,KAAhB;AACA,OAFD,MAEO;AACNH,QAAAA,OAAO,CAAC2B,IAAR,CAAaxB,KAAb;AACA;AACD,KAND;AAOA;;AAED,MAAIA,KAAJ;;AACA,MAAIkB,WAAW,CAACH,MAAhB,EAAwB;AACvBf,IAAAA,KAAK,sBAAOqB,aAAa,CAACrB,KAArB,CAAL;AACAkB,IAAAA,WAAW,CAACI,OAAZ,CAAoB,UAACG,KAAD,EAAQhB,CAAR,EAAc;AACjC,UAAGgB,KAAK,CAACC,GAAT,EAAc;AACb1B,QAAAA,KAAK,CAACS,CAAD,CAAL,GAAWgB,KAAK,CAACC,GAAjB;AACA,OAFD,MAEO;AACN;AACA;AACA,2CAAkCC,MAAM,CAACC,OAAP,CAAeH,KAAf,CAAlC,qCAAyD;AAAA;AAAA,cAA9CI,KAA8C;AAAA,cAAvCC,WAAuC;;AACxD,cAAG9B,KAAK,CAAC+B,cAAN,CAAqBF,KAArB,KAA+B7B,KAAK,CAAC6B,KAAD,CAAvC,EAAgD;AAC/C;AACA7B,YAAAA,KAAK,CAAC6B,KAAD,CAAL,qCAAoB7B,KAAK,CAAC6B,KAAD,CAAzB,GAAqCC,WAArC;AACA,WAHD,MAGO;AACN9B,YAAAA,KAAK,CAAC6B,KAAD,CAAL,sBAAoBC,WAApB;AACA;AACD;AACD;AAED,KAhBD;AAiBA;;AAEDT,EAAAA,aAAa,GAAG;AACfvB,IAAAA,MAAM,EAAEuB,aAAa,CAACvB,MAAd,IAAwBA,MADjB;AAEfC,IAAAA,KAAK,EAAEsB,aAAa,CAACtB,KAAd,IAAuBA,KAFf;AAGfoB,IAAAA,SAAS,EAAEA,SAHI;AAIfnB,IAAAA,KAAK,EAAEA,KAAK,IAAIqB,aAAa,CAACrB;AAJf,GAAhB;AAMAH,EAAAA,OAAO,CAAC2B,IAAR,CAAaH,aAAb;AAEA,SAAOxB,OAAP;AACA;;AAED,SAASK,oBAAT,CAA8BF,KAA9B,EAAqCF,MAArC,EAA6CC,KAA7C,EAAoD;AACnD,SAAOwB,6BAAUvB,KAAK,CAACF,MAAhB,EAAwBA,MAAxB,KAAmCyB,6BAAUvB,KAAK,CAACD,KAAhB,EAAuBA,KAAvB,CAA1C;AACA;;AAED,SAASiC,aAAT,CAAuBlC,MAAvB,EAA+BmC,IAA/B,EAAqC;AACpC;AACA,MAAGnC,MAAM,KAAK,IAAd,EAAoB;AACnB,WAAO,IAAP;AACA;;AAED,MAAM8B,OAAO,GAAGD,MAAM,CAACC,OAAP,CAAe9B,MAAf,CAAhB;AAEA,SAAO8B,OAAO,CAACM,KAAR,CAAc,gBAAkB;AAAA;AAAA,QAAhBR,GAAgB;AAAA,QAAXS,KAAW;;AACrC,QAAMC,gBAAgB,GAAGH,IAAI,CAACI,IAAL,IAAaJ,IAAI,CAACI,IAAL,CAAUN,cAAV,CAAyBL,GAAzB,CAAtC;AACA,QAAMY,oBAAoB,GAAGL,IAAI,CAACI,IAAL,IAAaJ,IAAI,CAACI,IAAL,CAAUN,cAAV,WAA4BL,GAA5B,SAA1C;;AACA,QAAGU,gBAAH,EAAqB;AACpB;AACA;AACA;AACA,UAAGH,IAAI,CAACI,IAAL,IAAaJ,IAAI,CAACI,IAAL,CAAUX,GAAV,MAAmBS,KAAnC,EAA0C;AACzC,eAAO,IAAP;AACA,OANmB;AASpB;AACA;;;AACA,UAAGI,8BAAWJ,KAAX,KAAqBA,KAAK,CAAC,MAAD,CAA7B,EAAuC;AACtC;AACA,eAAO,IAAP;AACA,OAdmB;AAiBpB;AACA;;;AACA,UAAGI,8BAAWJ,KAAX,KAAqBA,KAAK,CAAC,IAAD,CAA7B,EAAqC;AACpC,eAAOA,KAAK,MAAL,CAASK,QAAT,CAAkBP,IAAI,CAACI,IAAL,CAAUX,GAAV,CAAlB,CAAP;AACA,OArBmB;AAwBpB;AACA;;;AACA,UAAGa,8BAAWJ,KAAX,KAAqBA,KAAK,CAAC,OAAD,CAA7B,EAAwC;AACvC,eAAO,CAACA,KAAK,CAACM,KAAN,CAAYD,QAAZ,CAAqBP,IAAI,CAACI,IAAL,CAAUX,GAAV,CAArB,CAAR;AACA;AACD,KAhCoC;;;AAmCrC,QAAGY,oBAAH,EAAyB;AACxB,UAAGL,IAAI,CAACI,IAAL,IAAaJ,IAAI,CAACI,IAAL,WAAaX,GAAb,cAA2BS,KAA3C,EAAkD;AACjD,eAAO,IAAP;AACA;AACD,KAvCoC;;;AA0CrC,WAAO,KAAP;AACD,GA3CM,CAAP;AA4CA;;AAED,SAASO,YAAT,CAAsBC,UAAtB,EAAkCC,cAAlC,EAAkD9C,MAAlD,EAA0D;AACzD,MAAI6C,UAAU,IAAIC,cAAlB,EAAkC;AACjC,QAAIC,UAAU,sBAAO/C,MAAP,CAAd;;AACA,QAAI8C,cAAc,CAACE,WAAnB,EAA+B;AAC9B,UAAIH,UAAU,CAACI,oBAAf,EAAoC;AACnCF,QAAAA,UAAU,CAACG,cAAX,GAA4BL,UAAU,CAACI,oBAAvC;AACA;AACD;;AACD,QAAIH,cAAc,QAAlB,EAAwB;AACvB,UAAID,UAAU,CAACM,aAAf,EAA6B;AAC5BJ,QAAAA,UAAU,CAACK,OAAX,GAAqBP,UAAU,CAACM,aAAhC;AACA;AACD;;AACD,QAAIL,cAAc,CAACO,KAAnB,EAAyB;AACxB,UAAIR,UAAU,CAACS,cAAf,EAA8B;AAC7BP,QAAAA,UAAU,CAACQ,QAAX,GAAsBV,UAAU,CAACS,cAAjC;AACA;AACD,KAhBgC;;;AAkBjC,QAAIR,cAAc,CAACU,KAAnB,EAAyB;AACxB,UAAIX,UAAU,CAACY,cAAf,EAA8B;AAC7BV,QAAAA,UAAU,CAACW,QAAX,GAAsBb,UAAU,CAACY,cAAjC;AACA,OAFD,MAEO,IAAIZ,UAAU,CAACc,eAAf,EAA+B;AACrCZ,QAAAA,UAAU,CAACW,QAAX,GAAsB;AAAC,gBAAIb,UAAU,CAACc;AAAhB,SAAtB;AACA;AACD;;AACD,QAAIb,cAAc,CAACc,MAAnB,EAA0B;AACzB,UAAIf,UAAU,CAACgB,eAAf,EAA+B;AAC9Bd,QAAAA,UAAU,CAACe,SAAX,GAAuBjB,UAAU,CAACgB,eAAlC;AACA,OAFD,MAEO,IAAIhB,UAAU,CAACkB,gBAAf,EAAgC;AACtChB,QAAAA,UAAU,CAACe,SAAX,GAAuB;AAAC,gBAAIjB,UAAU,CAACkB;AAAhB,SAAvB;AACA;AACD;;AACD,QAAIjB,cAAc,CAACkB,SAAnB,EAA6B;AAC5B,UAAInB,UAAU,CAACoB,kBAAf,EAAkC;AACjClB,QAAAA,UAAU,CAACmB,YAAX,GAA0BrB,UAAU,CAACoB,kBAArC;AACA;AACD;;AACD,QAAInB,cAAc,CAACqB,aAAnB,EAAiC;AAChC,UAAItB,UAAU,CAACuB,sBAAf,EAAsC;AACrCrB,QAAAA,UAAU,CAACsB,gBAAX,GAA8BxB,UAAU,CAACuB,sBAAzC;AACA;AACD;;AACD,WAAO5D,6BAAUuC,UAAV,IAAwB,IAAxB,GAA+BA,UAAtC;AACA,GA3CD,MA2CO;AACN,WAAO/C,MAAP;AACA;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASsE,iBAAT,CAA2BC,WAA3B,EAAwC1B,UAAxC,EAAoD;AAChD,MAAI0B,WAAW,IAAI1B,UAAnB,EAA+B;AAC3B,6CAAWA,UAAX,GAA0B0B,WAA1B;AACH,GAFD,MAEO;AACH,WAAOA,WAAW,IAAI1B,UAAf,IAA6B,IAApC;AACH;AACJ;AAED;AACA;AACA;AACA;AACA;;;AACA,SAAS2B,uCAAT,CAAiDC,SAAjD,EAA4D;AACxD,MAAIA,SAAJ,EAAe;AACX,QAAIC,mBAAmB,GAAG,EAA1B;;AACA,QAAID,SAAS,CAAClB,QAAd,EAAwB;AACpBmB,MAAAA,mBAAmB,CAACnB,QAApB,GAA+BkB,SAAS,CAAClB,QAAzC;AACH;;AAED,QAAIkB,SAAS,CAACE,SAAd,EAAyB;AACrBD,MAAAA,mBAAmB,CAAChB,QAApB,GAA+B;AAAC,cAAIe,SAAS,CAACE;AAAf,OAA/B;AACH,KAFD,MAEO,IAAIF,SAAS,CAACf,QAAd,EAAwB;AAC3BgB,MAAAA,mBAAmB,CAAChB,QAApB,GAA+Be,SAAS,CAACf,QAAzC;AACH;;AAED,QAAIe,SAAS,CAACG,QAAd,EAAwB;AACpBF,MAAAA,mBAAmB,CAACtB,OAApB,GAA8B;AAAC,cAAIqB,SAAS,CAACG;AAAf,OAA9B;AACH,KAFD,MAEO,IAAIH,SAAS,CAACrB,OAAd,EAAuB;AAC1BsB,MAAAA,mBAAmB,CAACtB,OAApB,GAA8BqB,SAAS,CAACrB,OAAxC;AACH;;AAED,QAAIqB,SAAS,CAACI,YAAd,EAA4B;AACxBH,MAAAA,mBAAmB,CAACI,WAApB,GAAkC;AAAC,cAAIL,SAAS,CAACI;AAAf,OAAlC;AACH,KAFD,MAEO,IAAIJ,SAAS,CAACK,WAAd,EAA2B;AAC9BJ,MAAAA,mBAAmB,CAACI,WAApB,GAAkCL,SAAS,CAACK,WAA5C;AACH;;AAED,QAAIL,SAAS,CAACM,UAAd,EAA0B;AACtBL,MAAAA,mBAAmB,CAACZ,SAApB,GAAgC;AAAC,cAAIW,SAAS,CAACM;AAAf,OAAhC;AACH,KAFD,MAEO,IAAIN,SAAS,CAACX,SAAd,EAAyB;AAC5BY,MAAAA,mBAAmB,CAACZ,SAApB,GAAgCW,SAAS,CAACX,SAA1C;AACH;;AAED,WAAO,CAACtD,6BAAUkE,mBAAV,CAAD,GAAkCA,mBAAlC,GAAwD,IAA/D;AACH,GA/BD,MA+BO;AACH,WAAO,IAAP;AACH;AACJ;;AAED,oBAAe;AACdF,EAAAA,uCAAuC,EAAvCA,uCADc;AAEd5D,EAAAA,WAAW,EAAXA,WAFc;AAGdf,EAAAA,QAAQ,EAARA,QAHc;AAIdU,EAAAA,gBAAgB,EAAhBA,gBAJc;AAKdW,EAAAA,iBAAiB,EAAjBA,iBALc;AAMd0B,EAAAA,YAAY,EAAZA,YANc;AAOX0B,EAAAA,iBAAiB,EAAjBA,iBAPW;AAQdlE,EAAAA,oBAAoB,EAApBA,oBARc;AASd8B,EAAAA,aAAa,EAAbA;AATc,CAAf;;AChSA,IAAMoB,cAAc,GAAG,SAAjBA,cAAiB,CAAAnC,KAAK;AAAA,SAAIA,KAAK,CAAC6D,MAAN,CAAaC,SAAjB;AAAA,CAA5B;AAEA;AACA;AACA;AACA;AACA;;;AACA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,WAAD,EAAiB;AACpC,SAAO,UAAChE,KAAD,EAAW;AACjB,WAAOgE,WAAW,CAAChE,KAAD,CAAX,CAAmBiE,KAA1B;AACA,GAFD;AAGA,CAJD;AAMA;AACA;AACA;AACA;AACA;;;AACA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACF,WAAD,EAAiB;AACjD,SAAOG,uBAAc,CACpB,CAACJ,WAAW,CAACC,WAAD,CAAZ,CADoB,EAEpB,UAAAC,KAAK,EAAI;AACR,WAAOG,4BAASH,KAAT,EAAgB,UAACjD,IAAD;AAAA,aAAU,CAACA,IAAI,CAACF,cAAL,CAAoB,SAApB,CAAX;AAAA,KAAhB,CAAP;AACA,GAJmB,CAArB;AAMA,CAPD;;AASA,IAAMuD,cAAc,GAAGH,wBAAvB;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAMI,MAAM,GAAG,SAATA,MAAS,CAACN,WAAD,EAAiB;AAC/B,SAAOG,uBAAc,CACpB,CAACE,cAAc,CAACL,WAAD,CAAf,CADoB,EAEpB,UAAAC,KAAK,EAAI;AACR,WAAOA,KAAK,GAAGvD,MAAM,CAAC6D,MAAP,CAAcN,KAAd,CAAH,GAA0B,IAAtC;AACA,GAJmB,CAArB;AAMA,CAPD;;AASA,SAASO,eAAT,CAAyBC,MAAzB,EAAiC1F,KAAjC,EAAwC;AACvC,MAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACA,KAArB,EAA4B;AAC3B,WAAO,IAAP;AACA;;AAED,MAAM2F,aAAa,GAAG,EAAtB;;AACA,OAAK,IAAIlF,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIT,KAAK,CAAC4F,KAA3B,EAAkCnF,CAAC,EAAnC,EAAsC;AACrC,QAAMoF,QAAQ,GAAG7F,KAAK,CAACA,KAAN,CAAYS,CAAZ,CAAjB;;AACA,QAAIoF,QAAJ,EAAa;AACZ,UAAMC,YAAY,GAAGJ,MAAM,CAACG,QAAD,CAA3B;;AACA,UAAIC,YAAJ,EAAiB;AAChBH,QAAAA,aAAa,CAACnE,IAAd,CAAmBsE,YAAnB;AACA,OAFD,MAEO;AACNH,QAAAA,aAAa,CAACnE,IAAd,CAAmB;AAACE,UAAAA,GAAG,EAAEmE;AAAN,SAAnB;AACA;AACD,KAPD,MAOO;AACNF,MAAAA,aAAa,CAACnE,IAAd,CAAmB,IAAnB;AACA;AACD;;AAED,SAAOuE,aAAa,CAACJ,aAAD,CAApB;AACA;;AAED,SAASK,gBAAT,CAA0BN,MAA1B,EAAkC1F,KAAlC,EAAyC;AACxC,MAAI,CAACA,KAAD,IAAU,CAACA,KAAK,CAACA,KAArB,EAA4B;AAC3B,WAAO,IAAP;AACA;;AAED,MAAM2F,aAAa,GAAG,EAAtB;;AACA,qCAA2BhE,MAAM,CAACC,OAAP,CAAe5B,KAAK,CAACA,KAArB,CAA3B,qCAAwD;AAAA;AAAA,QAA5C0B,GAA4C;AAAA,QAAvCS,KAAuC;;AACvD,QAAIA,KAAJ,EAAW;AACV,UAAM2D,YAAY,GAAGJ,MAAM,CAACvD,KAAD,CAA3B;;AACA,UAAI2D,YAAJ,EAAkB;AACjBH,QAAAA,aAAa,CAACnE,IAAd,CAAmBsE,YAAnB;AACA,OAFD,MAEO;AACNH,QAAAA,aAAa,CAACnE,IAAd,CAAmB,IAAnB;AACA;AACD,KAPD,MAOO;AACNmE,MAAAA,aAAa,CAACnE,IAAd,CAAmB,IAAnB;AACA;AACD;;AAED,SAAOuE,aAAa,CAACJ,aAAD,CAApB;AACA;;AAED,IAAMM,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAChB,WAAD,EAAiB;AAC7C,SAAOG,uBAAc,CACpB,CAACE,cAAc,CAACL,WAAD,CAAf,EAA8BiB,UAAU,CAACjB,WAAD,CAAxC,EAAuD7B,cAAvD,EAAuE,UAACnC,KAAD,EAAQlB,KAAR;AAAA,WAAkBA,KAAlB;AAAA,GAAvE,CADoB,EAEpB,UAAC2F,MAAD,EAAS7F,OAAT,EAAkBuD,cAAlB,EAAkCrD,KAAlC,EAA4C;AAC3C,QAAI2F,MAAM,IAAI7F,OAAV,IAAqBuD,cAAzB,EAAyC;AACxC,UAAMtD,MAAM,GAAG;AACduD,QAAAA,QAAQ,EAAED;AADI,OAAf;AAGA,UAAMpD,KAAK,GAAGmG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAd;AAEA,aAAO0F,eAAe,CAACC,MAAD,EAAS1F,KAAT,CAAtB;AACA;;AAED,WAAO,IAAP;AACA,GAbmB,CAArB;AAeA,CAhBD;;AAkBA,IAAMoG,YAAY,GAAG,SAAfA,YAAe,CAACnB,WAAD,EAAiB;AACrC,SAAO,UAAChE,KAAD;AAAA,WAAWgE,WAAW,CAAChE,KAAD,CAAX,CAAmB8D,SAA9B;AAAA,GAAP;AACA,CAFD;;AAIA,IAAMsB,aAAa,GAAG,SAAhBA,aAAgB,CAACpB,WAAD,EAAiB;AACtC,SAAO,UAAChE,KAAD;AAAA,WAAWgE,WAAW,CAAChE,KAAD,CAAX,CAAmB0B,UAA9B;AAAA,GAAP;AACA,CAFD;;AAIA,IAAM2D,SAAS,GAAG,SAAZA,SAAY,CAACrB,WAAD,EAAiB;AAClC,SAAOG,uBAAc,CACpB,CAACE,cAAc,CAACL,WAAD,CAAf,EAA8BmB,YAAY,CAACnB,WAAD,CAA1C,CADoB,EAEpB,UAACS,MAAD,EAASX,SAAT,EAAuB;AACtB,QAAIW,MAAM,IAAIA,MAAM,CAACX,SAAD,CAApB,EAAgC;AAC/B,aAAOW,MAAM,CAACX,SAAD,CAAb;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAMwB,eAAe,GAAG,SAAlBA,eAAkB,CAACtB,WAAD,EAAiB;AACxC,SAAOG,uBAAc,CACpB,CAACE,cAAc,CAACL,WAAD,CAAf,EAA8BoB,aAAa,CAACpB,WAAD,CAA3C,CADoB,EAEpB,UAACS,MAAD,EAAS/C,UAAT,EAAwB;AACvB,QAAI6D,YAAY,GAAG,EAAnB;;AACA,QAAId,MAAM,IAAI,CAACpF,6BAAUoF,MAAV,CAAX,IAAgC/C,UAAhC,IAA8C,CAACrC,6BAAUqC,UAAV,CAAnD,EAAyE;AACxEA,MAAAA,UAAU,CAAC8D,GAAX,CAAe,UAAA/E,GAAG,EAAI;AACrB,YAAID,KAAK,GAAGiE,MAAM,CAAChE,GAAD,CAAlB;;AACA,YAAID,KAAJ,EAAU;AACT+E,UAAAA,YAAY,CAAChF,IAAb,CAAkBC,KAAlB;AACA;AACD,OALD;AAMA;;AACD,WAAOsE,aAAa,CAACS,YAAD,CAApB;AACA,GAbmB,CAArB;AAeA,CAhBD;;AAkBA,IAAME,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACzB,WAAD,EAAiB;AACzC,SAAOG,uBAAc,CACpB,CACCE,cAAc,CAACL,WAAD,CADf,EAECiB,UAAU,CAACjB,WAAD,CAFX,EAGC,UAAChE,KAAD,EAAQnB,MAAR;AAAA,WAAmBA,MAAnB;AAAA,GAHD,EAIC,UAACmB,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB;AAAA,WAA0BA,KAA1B;AAAA,GAJD,CADoB,EAOpB,UAAC2F,MAAD,EAAS7F,OAAT,EAAkBC,MAAlB,EAA0BC,KAA1B,EAAoC;AACnC,QAAI2F,MAAM,IAAI7F,OAAd,EAAuB;AACtB,UAAMG,KAAK,GAAGmG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAd;AAEA,aAAO0F,eAAe,CAACC,MAAD,EAAS1F,KAAT,CAAtB;AACA,KAJD,MAIO;AACN,aAAO,IAAP;AACA;AACD,GAfmB,CAArB;AAiBA,CAlBD;;AAoBA,IAAM2G,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC1B,WAAD,EAAiB;AAC9C,SAAOG,uBAAc,CACpB,CACCE,cAAc,CAACL,WAAD,CADf,EAECiB,UAAU,CAACjB,WAAD,CAFX,EAGC,UAAChE,KAAD,EAAQnB,MAAR;AAAA,WAAmBA,MAAnB;AAAA,GAHD,EAIC,UAACmB,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB;AAAA,WAA0BA,KAA1B;AAAA,GAJD,CADoB,EAOpB,UAAC2F,MAAD,EAAS7F,OAAT,EAAkBC,MAAlB,EAA0BC,KAA1B,EAAoC;AACnC,QAAI2F,MAAM,IAAI7F,OAAd,EAAuB;AACtB,UAAMG,KAAK,GAAGmG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAd;AACA,aAAOiG,gBAAgB,CAACN,MAAD,EAAS1F,KAAT,CAAvB;AACA,KAHD,MAGO;AACN,aAAO,IAAP;AACA;AACD,GAdmB,CAArB;AAgBA,CAjBD;;AAmBA,IAAM4G,UAAU,GAAG,SAAbA,UAAa,CAAC3B,WAAD,EAAiB;AAAE;AACrC,SAAOrF,wCAAoB,CAC1B,CACC0F,cAAc,CAACL,WAAD,CADf,EAECiB,UAAU,CAACjB,WAAD,CAFX,EAGC4B,gBAHD,EAIC,UAAC5F,KAAD,EAAQ2B,cAAR;AAAA,WAA2BA,cAA3B;AAAA,GAJD,EAKC,UAAC3B,KAAD,EAAQ2B,cAAR,EAAwB9C,MAAxB;AAAA,WAAmCA,MAAnC;AAAA,GALD,EAMC,UAACmB,KAAD,EAAQ2B,cAAR,EAAwB9C,MAAxB,EAAgCC,KAAhC;AAAA,WAA0CA,KAA1C;AAAA,GAND,EAOC,UAACkB,KAAD,EAAQ2B,cAAR,EAAwB9C,MAAxB,EAAgCC,KAAhC,EAAuC+G,KAAvC;AAAA,WAAiDA,KAAjD;AAAA,GAPD,EAQC,UAAC7F,KAAD,EAAQ2B,cAAR,EAAwB9C,MAAxB,EAAgCC,KAAhC,EAAuC+G,KAAvC,EAA8C/F,MAA9C;AAAA,WAAyDA,MAAzD;AAAA,GARD,CAD0B,EAW1B,UAAC2E,MAAD,EAAS7F,OAAT,EAAkB8C,UAAlB,EAA8BC,cAA9B,EAA8C9C,MAA9C,EAAsDC,KAAtD,EAA6D+G,KAA7D,EAAoE/F,MAApE,EAA+E;AAC9E,QAAI2E,MAAM,IAAI7F,OAAd,EAAuB;AACtB,UAAIkH,YAAY,GAAGZ,aAAa,CAACzD,YAAd,CAA2BC,UAA3B,EAAuCC,cAAvC,EAAuD9C,MAAvD,CAAnB;AACA,UAAIE,KAAK,GAAGmG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCkH,YAAhC,EAA8ChH,KAA9C,CAAZ;;AACA,UAAIC,KAAK,IAAIA,KAAK,CAACA,KAAnB,EAA0B;AACzB,YAAI2F,aAAa,GAAG,EAApB;AACA,YAAIqB,GAAG,GAAGC,IAAI,CAACC,GAAL,CAASJ,KAAK,GAAG/F,MAAR,GAAiB,CAA1B,EAA6Bf,KAAK,CAAC4F,KAAnC,CAAV;;AACA,aAAK,IAAInF,CAAC,GAAGqG,KAAb,EAAoBrG,CAAC,IAAIuG,GAAzB,EAA8BvG,CAAC,EAA/B,EAAkC;AACjC,cAAIoF,QAAQ,GAAG7F,KAAK,CAACA,KAAN,CAAYS,CAAZ,CAAf;;AACA,cAAIoF,QAAJ,EAAa;AACZ,gBAAIC,YAAY,GAAGJ,MAAM,CAACG,QAAD,CAAzB;;AACA,gBAAIC,YAAJ,EAAiB;AAChBH,cAAAA,aAAa,CAACnE,IAAd,CAAmBsE,YAAnB;AACA,aAFD,MAEO;AACNH,cAAAA,aAAa,CAACnE,IAAd,CAAmB;AAACE,gBAAAA,GAAG,EAAEmE;AAAN,eAAnB;AACA;AACD,WAPD,MAOO;AACNF,YAAAA,aAAa,CAACnE,IAAd,CAAmB,IAAnB;AACA;AACD;;AACD,eAAOmE,aAAa,CAAC5E,MAAd,GAAuB4E,aAAvB,GAAuC,IAA9C;AACA,OAjBD,MAiBO;AACN,eAAO,IAAP;AACA;AACD,KAvBD,MAuBO;AACN,aAAO,IAAP;AACA;AACD,GAtCyB,CAApB,CAuCL,UAAC1E,KAAD,EAAQ2B,cAAR,EAAwB9C,MAAxB,EAAgCC,KAAhC,EAAuC+G,KAAvC,EAA8C/F,MAA9C,EAAyD;AAC1D,qBAAUZ,IAAI,CAACC,SAAL,CAAewC,cAAf,CAAV,cAA4CzC,IAAI,CAACC,SAAL,CAAeN,MAAf,CAA5C,cAAsEK,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAtE,cAA+F+G,KAA/F,cAAwG/F,MAAxG;AACA,GAzCM,CAAP;AA0CA,CA3CD;;AA6CA,IAAMoG,QAAQ,GAAG,SAAXA,QAAW,CAAClC,WAAD,EAAiB;AACjC,SAAOrF,wCAAoB,CAC1B,CACC0F,cAAc,CAACL,WAAD,CADf,EAEC,UAAChE,KAAD,EAAQS,GAAR;AAAA,WAAgBA,GAAhB;AAAA,GAFD,CAD0B,EAK1B,UAAC0F,OAAD,EAAU1F,GAAV,EAAkB;AACjB,QAAIA,GAAG,IAAI0F,OAAP,IAAkB,CAAC9G,6BAAU8G,OAAV,CAAnB,IAAyCA,OAAO,CAAC1F,GAAD,CAApD,EAA2D;AAC1D,aAAO0F,OAAO,CAAC1F,GAAD,CAAd;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAXyB,CAApB,CAYL,UAACT,KAAD,EAAQS,GAAR;AAAA,WAAgBA,GAAhB;AAAA,GAZK,CAAP;AAaA,CAdD;;AAgBA,IAAM2F,iBAAiB,GAAG,SAApBA,iBAAoB,CAACpC,WAAD,EAAiB;AAC1C,SAAOrF,wCAAoB,CAC1B,CACC0F,cAAc,CAACL,WAAD,CADf,EAEC,UAAChE,KAAD,EAAQqG,IAAR;AAAA,WAAiBA,IAAjB;AAAA,GAFD,CAD0B,EAK1B,UAACF,OAAD,EAAUE,IAAV,EAAmB;AAClB,QAAIA,IAAI,IAAIA,IAAI,CAACvG,MAAb,IAAuBqG,OAAvB,IAAkC,CAAC9G,6BAAU8G,OAAV,CAAvC,EAA2D;AAC1D,UAAI/E,IAAI,GAAGkF,0BAAOH,OAAP,EAAgBE,IAAhB,CAAX;;AACA,aAAOhH,6BAAU+B,IAAV,IAAkB,IAAlB,GAAyBA,IAAhC;AACA,KAHD,MAGO;AACN,aAAO,IAAP;AACA;AACD,GAZyB,CAApB,CAcN,UAACpB,KAAD,EAAQqG,IAAR;AAAA,qBAAoBA,IAApB;AAAA,GAdM,CAAP;AAgBA,CAjBD;;;AAoBA,IAAME,SAAS,GAAG,SAAZA,SAAY,CAACvC,WAAD,EAAiB;AAClC,SAAOrF,wCAAoB,CAC1B,CACC0F,cAAc,CAACL,WAAD,CADf,EAEC,UAAChE,KAAD,EAAQqG,IAAR;AAAA,WAAiBA,IAAjB;AAAA,GAFD,CAD0B,EAK1B,UAACF,OAAD,EAAUE,IAAV,EAAmB;AAClB,QAAIA,IAAI,IAAIA,IAAI,CAACvG,MAAb,IAAuBqG,OAAvB,IAAkC,CAAC9G,6BAAU8G,OAAV,CAAvC,EAA2D;AAC1D,UAAI/E,IAAI,GAAG,EAAX;;AACA,gCAAOiF,IAAP,EAAa,UAAA5F,GAAG,EAAI;AACnB,YAAI0F,OAAO,CAAC1F,GAAD,CAAX,EAAkB;AACjBW,UAAAA,IAAI,CAACb,IAAL,CAAU4F,OAAO,CAAC1F,GAAD,CAAjB;AACA;AACD,OAJD;;AAMA,aAAOqE,aAAa,CAAC1D,IAAD,CAApB;AACA,KATD,MASO;AACN,aAAO,IAAP;AACA;AACD,GAlByB,CAApB,CAoBN,UAACpB,KAAD,EAAQqG,IAAR;AAAA,qBAAoBA,IAApB;AAAA,GApBM,CAAP;AAsBA,CAvBD;;AAyBA,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAACxC,WAAD,EAAiB;AACrC,SAAOG,uBAAc,CACpB,CAAC+B,QAAQ,CAAClC,WAAD,CAAT,CADoB,EAEpB,UAACxD,KAAD,EAAW;AACV,QAAIA,KAAK,IAAIA,KAAK,CAACY,IAAnB,EAAyB;AACxB,aAAOZ,KAAK,CAACY,IAAb;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAMqF,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACzC,WAAD,EAAiB;AACjD,SAAOG,uBAAc,CACpB,CAAC+B,QAAQ,CAAClC,WAAD,CAAT,CADoB,EAEpB,UAACxD,KAAD,EAAW;AACV,QAAIA,KAAK,IAAIA,KAAK,CAACkG,WAAnB,EAAgC;AAC/B,aAAQlG,KAAK,CAACkG,WAAN,CAAkBC,UAAlB,IAAgCnG,KAAK,CAACkG,WAAN,CAAkBC,UAAlB,UAAjC,IAA0EnG,KAAK,CAACkG,WAAN,CAAkBE,KAAlB,IAA2BpG,KAAK,CAACkG,WAAN,CAAkBE,KAAlB,UAA5G;AACA,KAFD,MAEO;AACN,aAAO,KAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC7C,WAAD,EAAiB;AACjD,SAAOG,uBAAc,CACpB,CAAC+B,QAAQ,CAAClC,WAAD,CAAT,CADoB,EAEpB,UAACxD,KAAD,EAAW;AACV,QAAIA,KAAK,IAAIA,KAAK,CAACkG,WAAnB,EAAgC;AAC/B,aAAQlG,KAAK,CAACkG,WAAN,CAAkBC,UAAlB,IAAgCnG,KAAK,CAACkG,WAAN,CAAkBC,UAAlB,CAA6BG,MAA9D,IAA0EtG,KAAK,CAACkG,WAAN,CAAkBE,KAAlB,IAA2BpG,KAAK,CAACkG,WAAN,CAAkBE,KAAlB,CAAwBE,MAApI;AACA,KAFD,MAEO;AACN,aAAO,KAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAC/C,WAAD,EAAiB;AACrC,SAAO,UAAChE,KAAD,EAAW;AACjB,QAAIoB,IAAI,GAAG4C,WAAW,CAAChE,KAAD,CAAX,CAAmBgH,WAA9B;AACA,WAAO5F,IAAI,GAAGV,MAAM,CAAC6D,MAAP,CAAcnD,IAAd,CAAH,GAAyB,IAApC;AACA,GAHD;AAIA,CALD;;AAOA,IAAM6F,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACjD,WAAD,EAAiB;AAC7C,SAAO,UAAChE,KAAD;AAAA,WAAWgE,WAAW,CAAChE,KAAD,CAAX,CAAmBgH,WAA9B;AAAA,GAAP;AACA,CAFD;;AAIA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAClD,WAAD,EAAiB;AACxC,SAAOG,uBAAc,CACpB,CAAC8C,oBAAoB,CAACjD,WAAD,CAArB,EAAoCmB,YAAY,CAACnB,WAAD,CAAhD,CADoB,EAEpB,UAACS,MAAD,EAASX,SAAT,EAAuB;AACtB,QAAIW,MAAM,IAAIA,MAAM,CAACX,SAAD,CAApB,EAAgC;AAC/B,aAAOW,MAAM,CAACX,SAAD,CAAb;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAMqD,cAAc,GAAG,SAAjBA,cAAiB,CAACnD,WAAD,EAAiB;AACvC,SAAO,UAAChE,KAAD,EAAQS,GAAR,EAAgB;AACtB,QAAI2G,aAAa,GAAGH,oBAAoB,CAACjD,WAAD,CAApB,CAAkChE,KAAlC,CAApB;;AACA,QAAIS,GAAG,IAAI2G,aAAP,IAAwB,CAAC/H,6BAAU+H,aAAV,CAAzB,IAAqDA,aAAa,CAAC3G,GAAD,CAAtE,EAA6E;AAC5E,aAAO2G,aAAa,CAAC3G,GAAD,CAApB;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAPD;AAQA,CATD;;AAWA,IAAM4G,kBAAkB,GAAG,SAArBA,kBAAqB,CAACrD,WAAD,EAAiB;AAC3C,SAAOG,uBAAc,CACpB,CAACgD,cAAc,CAACnD,WAAD,CAAf,CADoB,EAEpB,UAACxD,KAAD,EAAW;AACV,QAAIA,KAAK,IAAIA,KAAK,CAACY,IAAnB,EAAyB;AACxB,aAAOZ,KAAK,CAACY,IAAb;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAMkG,aAAa,GAAG,SAAhBA,aAAgB,CAACtD,WAAD,EAAiB;AACtC,SAAOG,uBAAc,CACpB,CAAC4C,YAAY,CAAC/C,WAAD,CAAb,CADoB,EAEpB,UAACuD,MAAD,EAAY;AACX,QAAIA,MAAM,IAAI,CAAClI,6BAAUkI,MAAV,CAAf,EAAiC;AAChC,aAAOA,MAAM,CAAC/B,GAAP,CAAW,UAAAhF,KAAK;AAAA,eAAIA,KAAK,CAACC,GAAV;AAAA,OAAhB,CAAP;AACA;;AACD,WAAO,IAAP;AACA,GAPmB,CAArB;AASA,CAVD;;AAYA,IAAMwE,UAAU,GAAG,SAAbA,UAAa,CAACjB,WAAD,EAAiB;AACnC,SAAO,UAAChE,KAAD;AAAA,WAAWgE,WAAW,CAAChE,KAAD,CAAX,CAAmBpB,OAA9B;AAAA,GAAP;AACA,CAFD;;AAIA,IAAM4I,kBAAkB,GAAGC,wBAAuB,CAAC,UAACzH,KAAD,EAAQgE,WAAR;AAAA,SAAwBiB,UAAU,CAACjB,WAAD,CAAV,CAAwBhE,KAAxB,CAAxB;AAAA,CAAD,CAAlD;AAEA;AACA;AACA;AACA;;AACA,IAAMtB,UAAQ,GAAG,SAAXA,QAAW,CAACsF,WAAD,EAAiB;AACjC,SAAOG,uBAAc,CAAC,CACrBc,UAAU,CAACjB,WAAD,CADW,EAErB,UAAChE,KAAD,EAAQnB,MAAR;AAAA,WAAmBA,MAAnB;AAAA,GAFqB,EAGrB,UAACmB,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB;AAAA,WAA0BA,KAA1B;AAAA,GAHqB,CAAD,EAIpB,UAACF,OAAD,EAAUC,MAAV,EAAkBC,KAAlB,EAA4B;AAC3B,WAAOoG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAP;AACA,GANmB,CAArB;AAQA,CATD;AAWA;AACA;AACA;AACA;;;AACA,IAAM4I,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC1D,WAAD,EAAiB;AACzC,SAAO,UAAChE,KAAD;AAAA,QAAQ2H,SAAR,uEAAoB,SAApB;AAAA,WAAmCC,yBAAM5D,WAAW,CAAChE,KAAD,CAAjB,EAA0B2H,SAA1B,CAAnC;AAAA,GAAP;AACA,CAFD;AAIA;AACA;AACA;AACA;;;AACA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,CAAC7D,WAAD,EAAiB;AACvC,SAAOG,uBAAc,CAAC,CACrBuD,gBAAgB,CAAC1D,WAAD,CADK,EAErB,UAAChE,KAAD,EAAQ2H,SAAR,EAAmB9I,MAAnB;AAAA,WAA8BA,MAA9B;AAAA,GAFqB,EAGrB,UAACmB,KAAD,EAAQ2H,SAAR,EAAmB9I,MAAnB,EAA2BC,KAA3B;AAAA,WAAqCA,KAArC;AAAA,GAHqB,CAAD,EAIpB,UAACF,OAAD,EAAUC,MAAV,EAAkBC,KAAlB,EAA4B;AAC3B,WAAOoG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAP;AACA,GANmB,CAArB;AAQA,CATD;;AAWA,IAAMgJ,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC9D,WAAD,EAAiB;AAC3C,SAAO+D,wBAAuB,CAAC,UAAClJ,MAAD,EAASC,KAAT,EAAmB;AACjD,QAAMF,OAAO,GAAG4I,kBAAkB,CAACxD,WAAD,CAAlC;;AACA,QAAIpF,OAAJ,EAAa;AACZ,aAAOsG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAP;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAP6B,CAA9B;AAQA,CATD;;AAWA,IAAMkJ,iBAAiB,GAAG,SAApBA,iBAAoB,CAAChE,WAAD,EAAiB;AAC1C,SAAOG,uBAAc,CACpB,CAACzF,UAAQ,CAACsF,WAAD,CAAT,CADoB,EAEpB,UAACjF,KAAD,EAAW;AACV,QAAIA,KAAK,IAAIA,KAAK,CAACmB,SAAnB,EAA6B;AAC5B,aAAOnB,KAAK,CAACmB,SAAb;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;;AAaA,IAAM+H,YAAY,GAAG,SAAfA,YAAe,CAACjE,WAAD,EAAiB;AACrC,SAAOG,uBAAc,CAAC,CACrBzF,UAAQ,CAACsF,WAAD,CADa,EAErB,UAAChE,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB,EAAuB+G,KAAvB;AAAA,WAAkCA,KAAlC;AAAA,GAFqB,EAGrB,UAAC7F,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB,EAAuB+G,KAAvB,EAA8B/F,MAA9B;AAAA,WAA0CA,MAA1C;AAAA,GAHqB,CAAD,EAIpB,UAACf,KAAD,EAAQ8G,KAAR,EAAe/F,MAAf,EAA0B;AACzB,QAAIf,KAAK,IAAIA,KAAK,CAACA,KAAnB,EAAyB;AACxB,UAAImJ,OAAO,GAAG,EAAd;;AACA,WAAK,IAAIC,CAAC,GAAGtC,KAAb,EAAoBsC,CAAC,GAAItC,KAAK,GAAG/F,MAAb,IAAwBqI,CAAC,IAAIpJ,KAAK,CAAC4F,KAAvD,EAA8DwD,CAAC,EAA/D,EAAkE;AACjE,YAAI1H,GAAG,GAAG1B,KAAK,CAACA,KAAN,CAAYoJ,CAAZ,CAAV;AACAD,QAAAA,OAAO,CAACC,CAAD,CAAP,GAAa1H,GAAG,GAAGA,GAAH,GAAS,IAAzB;AACA;;AACD,aAAOyH,OAAP;AACA,KAPD,MAOO;AACN,aAAO,IAAP;AACA;AACD,GAfmB,CAArB;AAiBA,CAlBD;AAoBA;AACA;AACA;AACA;;;AACA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,CAACpE,WAAD,EAAiB;AACvC,SAAOG,uBAAc,CACpB,CACC8D,YAAY,CAACjE,WAAD,CADb,EAECK,cAAc,CAACL,WAAD,CAFf,CADoB,EAKpB,UAACqE,IAAD,EAAO5D,MAAP,EAAkB;AACjB,WAAO4D,IAAI,IAAIA,IAAI,CAACvI,MAAb,IAAuBuI,IAAI,CAAC7C,GAAL,CAAS,UAAA/E,GAAG;AAAA,aAAKgE,MAAM,CAAChE,GAAD,CAAN,IAAe,IAApB;AAAA,KAAZ,CAAvB,IAAiE,IAAxE,CADiB;AAEjB,GAPmB,CAArB;AASA,CAVD;AAYA;AACA;AACA;;;AACA,IAAM6H,aAAa,GAAG,SAAhBA,aAAgB,CAACtE,WAAD,EAAiB;AACtC,SAAOG,uBAAc,CACpB,CAACzF,UAAQ,CAACsF,WAAD,CAAT,CADoB,EAEpB,UAACjF,KAAD,EAAW;AACV,QAAIA,KAAK,KAAKA,KAAK,CAAC4F,KAAN,IAAe5F,KAAK,CAAC4F,KAAN,KAAgB,CAApC,CAAT,EAAgD;AAC/C,aAAO5F,KAAK,CAAC4F,KAAb;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARmB,CAArB;AAUA,CAXD;AAaA;AACA;AACA;AACA;AACA;;;AACA,IAAM4D,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACvE,WAAD,EAAiB;AACjD,SAAOG,uBAAc,CAAC,CACrBc,UAAU,CAACjB,WAAD,CADW,EAErB,UAAChE,KAAD,EAAQgB,IAAR;AAAA,WAAiBA,IAAjB;AAAA,GAFqB,CAAD,EAIpB,UAACpC,OAAD,EAAUoC,IAAV,EAAmB;AAClB,QAAG,CAAC3B,6BAAUT,OAAV,CAAJ,EAAuB;AACtB,aAAOA,OAAO,CAACC,MAAR,CAAe,UAACE,KAAD;AAAA,eAAWmG,aAAa,CAACnE,aAAd,CAA4BhC,KAAK,CAACF,MAAlC,EAA0CmC,IAA1C,CAAX;AAAA,OAAf,CAAP;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAVmB,CAArB;AAYA,CAbD;AAeA;AACA;AACA;AACA;AACA;;;AACA,SAAS8D,aAAT,CAAuB0D,KAAvB,EAA8B;AAC7B,SAAOA,KAAK,CAAC1I,MAAN,GAAe0I,KAAf,GAAuB,IAA9B;AACA;AAED;AACA;AACA;;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACzE,WAAD,EAAiB;AACtC,SAAOG,uBAAc,CACpB,CAACE,cAAc,CAACL,WAAD,CAAf,EACC,UAAChE,KAAD,EAAQqG,IAAR;AAAA,WAAkBA,IAAlB;AAAA,GADD,CADoB,EAGpB,UAAC5B,MAAD,EAAS4B,IAAT,EAAkB;AACjB,QAAIA,IAAI,IAAIA,IAAI,CAACvG,MAAjB,EAAwB;AACvB,UAAI,CAAC2E,MAAL,EAAY;AACX,eAAO4B,IAAP;AACA,OAFD,MAEO;AACN,eAAOvB,aAAa,CAACuB,IAAI,CAACxH,MAAL,CAAY,UAAA4B,GAAG;AAAA,iBAAI,CAACgE,MAAM,CAAChE,GAAD,CAAP,IAAgBgE,MAAM,CAAChE,GAAD,CAAN,CAAYiI,QAAhC;AAAA,SAAf,CAAD,CAApB;AACA;AACD,KAND,MAMO;AACN,aAAO,IAAP;AACA;AACD,GAbmB,CAArB;AAeA,CAhBD;;AAkBA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAC3E,WAAD,EAAiB;AACpC,SAAO,UAAChE,KAAD,EAAW;AACjB,QAAI4I,KAAK,GAAG5E,WAAW,CAAChE,KAAD,CAAX,CAAmB4I,KAAnB,CAAyBvC,IAArC;;AACA,QAAIuC,KAAJ,EAAW;AACV,UAAIvC,IAAI,GAAGwC,0BAAOC,6BAAUpI,MAAM,CAAC6D,MAAP,CAAcqE,KAAd,CAAV,CAAP,CAAX;;AACA,aAAOvC,IAAI,CAACvG,MAAL,GAAcuG,IAAd,GAAqB,IAA5B;AACA,KAHD,MAGO;AACN,aAAO,IAAP;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAM0C,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC/E,WAAD,EAAiB;AAC3C,SAAO,UAAChE,KAAD,EAAW;AACjB,QAAIgE,WAAW,CAAChE,KAAD,CAAX,IAAsBgE,WAAW,CAAChE,KAAD,CAAX,CAAmB4I,KAA7C,EAAoD;AACnD,aAAO5E,WAAW,CAAChE,KAAD,CAAX,CAAmB4I,KAAnB,CAAyBhK,OAAhC;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAND;AAOA,CARD;;AAUA,IAAMgH,gBAAgB,GAAGzB,uBAAc,CACtC,CACC,UAAAnE,KAAK;AAAA,SAAIA,KAAK,CAAC6D,MAAN,IAAgB7D,KAAK,CAAC6D,MAAN,CAAaC,SAAjC;AAAA,CADN,EAEC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACgJ,KAAN,IAAehJ,KAAK,CAACgJ,KAAN,CAAYlF,SAA/B;AAAA,CAFN,EAGC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACgJ,KAAN,IAAehJ,KAAK,CAACgJ,KAAN,CAAYtH,UAA/B;AAAA,CAHN,EAIC,UAAA1B,KAAK;AAAA,SAAIA,KAAK,CAACiJ,SAAN,IAAmBjJ,KAAK,CAACiJ,SAAN,CAAgBnF,SAAvC;AAAA,CAJN,EAKC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACiJ,SAAN,IAAmBjJ,KAAK,CAACiJ,SAAN,CAAgBvH,UAAvC;AAAA,CALN,EAMC,UAAA1B,KAAK;AAAA,SAAIA,KAAK,CAACkJ,MAAN,IAAgBlJ,KAAK,CAACkJ,MAAN,CAAapF,SAAjC;AAAA,CANN,EAOC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACkJ,MAAN,IAAgBlJ,KAAK,CAACkJ,MAAN,CAAaxH,UAAjC;AAAA,CAPN,EAQC,UAAA1B,KAAK;AAAA,SAAIA,KAAK,CAACmJ,OAAN,IAAiBnJ,KAAK,CAACmJ,OAAN,CAAcrF,SAAnC;AAAA,CARN,EASC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACmJ,OAAN,IAAiBnJ,KAAK,CAACmJ,OAAN,CAAczH,UAAnC;AAAA,CATN,EAUC,UAAA1B,KAAK;AAAA,SAAIA,KAAK,CAACoJ,UAAN,IAAoBpJ,KAAK,CAACoJ,UAAN,CAAiBtF,SAAzC;AAAA,CAVN,EAWC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACoJ,UAAN,IAAoBpJ,KAAK,CAACoJ,UAAN,CAAiB1H,UAAzC;AAAA,CAXN,EAYC,UAAA1B,KAAK;AAAA,SAAIA,KAAK,CAACqJ,cAAN,IAAwBrJ,KAAK,CAACqJ,cAAN,CAAqBvF,SAAjD;AAAA,CAZN,EAaC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACsJ,iBAAN,IAA2BtJ,KAAK,CAACsJ,iBAAN,CAAwBxF,SAAvD;AAAA,CAbN,EAcC,UAAA9D,KAAK;AAAA,SAAIA,KAAK,CAACuJ,QAAN,IAAkBvJ,KAAK,CAACuJ,QAAN,CAAeC,IAArC;AAAA,CAdN,EAeC,UAAAxJ,KAAK;AAAA,SAAIA,KAAK,CAACyJ,GAAN,IAAazJ,KAAK,CAACyJ,GAAN,CAAUhJ,GAA3B;AAAA,CAfN,CADsC,EAkBtC,UAAC0B,cAAD,EAAgBH,aAAhB,EAA8B0H,cAA9B,EAA6CC,iBAA7C,EAA+DC,kBAA/D,EAAkFtH,cAAlF,EAAiGE,eAAjG,EAAiHE,eAAjH,EAAiIE,gBAAjI,EAAkJE,kBAAlJ,EAAqK+G,mBAArK,EAA0L5G,sBAA1L,EAAkN6G,sBAAlN,EAA0ON,IAA1O,EAAgPO,MAAhP,EAA2P;AAC1P,MAAIrI,UAAU,GAAG;AACbS,IAAAA,cAAc,EAAEA,cAAc,IAAI,IADrB;AAEPH,IAAAA,aAAa,EAAEA,aAAa,IAAI,IAFzB;AAGP0H,IAAAA,cAAc,EAAEA,cAAc,IAAI,IAH3B;AAIPC,IAAAA,iBAAiB,EAAEA,iBAAiB,IAAI,IAJjC;AAKPC,IAAAA,kBAAkB,EAAEA,kBAAkB,IAAI,IALnC;AAMPtH,IAAAA,cAAc,EAAEA,cAAc,IAAI,IAN3B;AAOPE,IAAAA,eAAe,EAAEA,eAAe,IAAI,IAP7B;AAQPE,IAAAA,eAAe,EAAEA,eAAe,IAAI,IAR7B;AASPE,IAAAA,gBAAgB,EAAEA,gBAAgB,IAAI,IAT/B;AAUPE,IAAAA,kBAAkB,EAAEA,kBAAkB,IAAI,IAVnC;AAWP+G,IAAAA,mBAAmB,EAAEA,mBAAmB,IAAI,IAXrC;AAYP5G,IAAAA,sBAAsB,EAAEA,sBAAsB,IAAI,IAZ3C;AAaP6G,IAAAA,sBAAsB,EAAEA,sBAAsB,IAAI;AAb3C,GAAjB,CAD0P;;AAkB1P,MAAIN,IAAJ,EAAS;AACR9H,IAAAA,UAAU,CAACI,oBAAX,GAAkC0H,IAAI,CAAC1F,SAAvC;AACA,GAFD,MAEO,IAAIiG,MAAJ,EAAW;AACjBrI,IAAAA,UAAU,CAACI,oBAAX,GAAkCiI,MAAlC;AACA;;AAED,SAAOrI,UAAP;AACA,CA3CqC,CAAvC;AA8CA,IAAMsI,6BAA6B,GAAGrL,wCAAoB,CACtD,CACIiH,gBADJ,EAEI,UAAC5F,KAAD,EAAQ2B,cAAR;AAAA,SAA2BA,cAA3B;AAAA,CAFJ,CADsD,EAKtD,UAACD,UAAD,EAAaC,cAAb,EAAgC;AAC5B,MAAIA,cAAc,IAAI,CAACtC,6BAAUsC,cAAV,CAAvB,EAAkD;AAC9C,QAAI0E,IAAI,GAAG,EAAX;;AAEA,QAAI1E,cAAc,CAACO,KAAf,IAAwBR,UAAU,CAACS,cAAvC,EAAuD;AACnDkE,MAAAA,IAAI,CAACjE,QAAL,GAAgBV,UAAU,CAACS,cAA3B;AACH;;AACD,QAAIR,cAAc,CAACU,KAAnB,EAA0B;AACtB,UAAIX,UAAU,CAACY,cAAf,EAA+B;AAC3B+D,QAAAA,IAAI,CAAC9D,QAAL,GAAgBb,UAAU,CAACY,cAA3B;AACH,OAFD,MAEO,IAAIZ,UAAU,CAACc,eAAf,EAAgC;AACnC6D,QAAAA,IAAI,CAAC7C,SAAL,GAAiB9B,UAAU,CAACc,eAA5B;AACH;AACJ;;AACD,QAAIb,cAAc,CAACsI,QAAnB,EAA4B;AACxB,UAAIvI,UAAU,CAACiI,iBAAf,EAAkC;AAC9BtD,QAAAA,IAAI,CAAC1C,WAAL,GAAmBjC,UAAU,CAACiI,iBAA9B;AACH,OAFD,MAEO,IAAIjI,UAAU,CAACkI,kBAAf,EAAmC;AACtCvD,QAAAA,IAAI,CAAC3C,YAAL,GAAoBhC,UAAU,CAACkI,kBAA/B;AACH;AACJ;;AACD,QAAIjI,cAAc,QAAlB,EAAyB;AACrB,UAAID,UAAU,CAACM,aAAf,EAA8B;AAC1BqE,QAAAA,IAAI,CAACpE,OAAL,GAAeP,UAAU,CAACM,aAA1B;AACH,OAFD,MAEO,IAAIN,UAAU,CAACgI,cAAf,EAA+B;AAClCrD,QAAAA,IAAI,CAAC5C,QAAL,GAAgB/B,UAAU,CAACgI,cAA3B;AACH;AACJ;;AACD,QAAI/H,cAAc,CAACc,MAAnB,EAA2B;AACvB,UAAIf,UAAU,CAACgB,eAAf,EAAgC;AAC5B2D,QAAAA,IAAI,CAAC1D,SAAL,GAAiBjB,UAAU,CAACgB,eAA5B;AACH,OAFD,MAEO,IAAIhB,UAAU,CAACkB,gBAAf,EAAiC;AACpCyD,QAAAA,IAAI,CAACzC,UAAL,GAAkBlC,UAAU,CAACkB,gBAA7B;AACH;AACJ;;AACD,QAAIjB,cAAc,CAACqB,aAAf,IAAgCtB,UAAU,CAACuB,sBAA/C,EAAuE;AACnEoD,MAAAA,IAAI,CAACnD,gBAAL,GAAwBxB,UAAU,CAACuB,sBAAnC;AACH;;AACD,QAAItB,cAAc,CAACuI,aAAf,IAAgCxI,UAAU,CAACoI,sBAA/C,EAAuE;AACnEzD,MAAAA,IAAI,CAAC8D,gBAAL,GAAwBzI,UAAU,CAACoI,sBAAnC;AACH;;AACD,QAAInI,cAAc,CAACE,WAAf,IAA8BH,UAAU,CAACI,oBAA7C,EAAmE;AAC/DuE,MAAAA,IAAI,CAACtE,cAAL,GAAsBL,UAAU,CAACI,oBAAjC;AACH;;AAED,WAAO,CAACzC,6BAAUgH,IAAV,CAAD,GAAmBA,IAAnB,GAA0B,IAAjC;AACH,GA7CD,MA6CO;AACH,WAAO,IAAP;AACH;AACJ,CAtDqD,CAApB,CAuDpC,UAACrG,KAAD,EAAQ2B,cAAR;AAAA,SAA2BzC,IAAI,CAACC,SAAL,CAAewC,cAAf,CAA3B;AAAA,CAvDoC,CAAtC;AAyDA,IAAMyI,qCAAqC,GAAG3C,wBAAuB,CAACuC,6BAAD,CAArE;;AAEA,IAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,CAACrG,WAAD,EAAiB;AAC1C,SAAOG,uBAAc,CAAC,CACpB4E,kBAAkB,CAAC/E,WAAD,CADE,EAEpB4B,gBAFoB,CAAD,EAIpB,UAAC0E,eAAD,EAAkB5I,UAAlB,EAAiC;AAChC,QAAI6I,WAAW,GAAG,EAAlB;AACA,QAAIC,gBAAgB,GAAG,EAAvB;;AACA,QAAG,CAACnL,6BAAUiL,eAAV,CAAJ,EAAgC;AAC/B,gCAAOA,eAAP,EAAwB,UAACG,WAAD,EAAiB;AACxCA,QAAAA,WAAW,CAACpK,OAAZ,CAAoB,UAAAqK,SAAS,EAAI;AAChC,cAAI5E,YAAY,GAAGZ,aAAa,CAACzD,YAAd,CAA2BC,UAA3B,EAAuCgJ,SAAS,CAAC/I,cAAjD,EAAiE+I,SAAS,CAAC7L,MAA3E,CAAnB;;AAEA,cAAI8L,aAAa,GAAG3L,0BAAOuL,WAAP,EAAoB,UAACK,GAAD,EAAS;AAChD,mBAAOtK,6BAAUsK,GAAG,CAAC/L,MAAd,EAAsBiH,YAAtB,KAAuCxF,6BAAUsK,GAAG,CAAC9L,KAAd,EAAqB4L,SAAS,CAAC5L,KAA/B,CAA9C;AACA,WAFmB,CAApB;;AAGA,cAAI6L,aAAJ,EAAkB;AACjBA,YAAAA,aAAa,CAAC/B,KAAd,CAAoBrI,IAApB,CAAyB;AACxBsF,cAAAA,KAAK,EAAE6E,SAAS,CAAC7E,KADO;AAExB/F,cAAAA,MAAM,EAAE4K,SAAS,CAAC5K;AAFM,aAAzB;AAIA,WALD,MAKO;AACNyK,YAAAA,WAAW,CAAChK,IAAZ,CAAiB;AAChB1B,cAAAA,MAAM,EAAEiH,YADQ;AAEhBhH,cAAAA,KAAK,EAAE4L,SAAS,CAAC5L,KAFD;AAGhB8J,cAAAA,KAAK,EAAE,CAAC;AACP/C,gBAAAA,KAAK,EAAE6E,SAAS,CAAC7E,KADV;AAEP/F,gBAAAA,MAAM,EAAE4K,SAAS,CAAC5K;AAFX,eAAD;AAHS,aAAjB;AAQA;AACD,SArBD;AAsBA,OAvBD;AAwBA;;AAED,8BAAOyK,WAAP,EAAoB,UAAAxL,KAAK,EAAI;AAC5B,UAAIA,KAAK,CAAC6J,KAAN,IAAelI,MAAM,CAAC2F,IAAP,CAAYtH,KAAK,CAAC6J,KAAlB,EAAyB9I,MAA5C,EAAoD;AACnD0K,QAAAA,gBAAgB,CAACjK,IAAjB,CAAsB;AACrB1B,UAAAA,MAAM,EAAEE,KAAK,CAACF,MADO;AAErBC,UAAAA,KAAK,EAAEC,KAAK,CAACD,KAFQ;AAGrB+L,UAAAA,IAAI,EAAEC,eAAe,CAACpK,MAAM,CAAC6D,MAAP,CAAcxF,KAAK,CAAC6J,KAApB,CAAD;AAHA,SAAtB;AAKA;AACD,KARD;;AASA,WAAO4B,gBAAgB,CAAC1K,MAAjB,GAA0B0K,gBAA1B,GAA6C,IAApD;AACA,GA5CmB,CAArB;AA8CA,CA/CD;;AAiDA,IAAMO,eAAe,GAAG,SAAlBA,eAAkB,CAAC/G,WAAD,EAAiB;AACxC,SAAOrF,wCAAoB,CAC1BoK,kBAAkB,CAAC/E,WAAD,CADQ,EAE1B,UAAChE,KAAD,EAAQnB,MAAR;AAAA,WAAmBA,MAAnB;AAAA,GAF0B,EAG1B,UAACmB,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB;AAAA,WAA0BA,KAA1B;AAAA,GAH0B,EAI1B8G,gBAJ0B,EAK1B,UAAC0E,eAAD,EAAkBzL,MAAlB,EAA0BC,KAA1B,EAAiC4C,UAAjC,EAAgD;AAC/C,QAAI3C,KAAK,GAAG,IAAZ;;AACA,QAAG,CAACM,6BAAUiL,eAAV,CAAJ,EAAgC;AAC/B,gCAAOA,eAAP,EAAwB,UAACG,WAAD,EAAiB;AACxC,kCAAOA,WAAP,EAAoB,UAAAC,SAAS,EAAI;AAChC,cAAI5E,YAAY,GAAGZ,aAAa,CAACzD,YAAd,CAA2BC,UAA3B,EAAuCgJ,SAAS,CAAC/I,cAAjD,EAAiE+I,SAAS,CAAC7L,MAA3E,CAAnB;;AAEA,cAAIyB,6BAAUzB,MAAV,EAAkBiH,YAAlB,KAAmCxF,6BAAUxB,KAAV,EAAiB4L,SAAS,CAAC5L,KAA3B,CAAvC,EAAyE;AACxE,gBAAIC,KAAJ,EAAU;AACTA,cAAAA,KAAK,CAAC6J,KAAN,CAAYrI,IAAZ,CAAiB;AAChBsF,gBAAAA,KAAK,EAAE6E,SAAS,CAAC7E,KADD;AAEhB/F,gBAAAA,MAAM,EAAE4K,SAAS,CAAC5K;AAFF,eAAjB;AAIA,aALD,MAKO;AACNf,cAAAA,KAAK,GAAG;AACPF,gBAAAA,MAAM,EAAEA,MADD;AAEPC,gBAAAA,KAAK,EAAE4L,SAAS,CAAC5L,KAFV;AAGP8J,gBAAAA,KAAK,EAAE,CAAC;AACP/C,kBAAAA,KAAK,EAAE6E,SAAS,CAAC7E,KADV;AAEP/F,kBAAAA,MAAM,EAAE4K,SAAS,CAAC5K;AAFX,iBAAD;AAHA,eAAR;AAQA;AACD;AACD,SApBD;AAqBA,OAtBD;AAuBA;;AAED,QAAIf,KAAJ,EAAU;AACT,aAAO;AACNF,QAAAA,MAAM,EAAEE,KAAK,CAACF,MADR;AAENC,QAAAA,KAAK,EAAEC,KAAK,CAACD,KAFP;AAGN+L,QAAAA,IAAI,EAAEC,eAAe,CAACpK,MAAM,CAAC6D,MAAP,CAAcxF,KAAK,CAAC6J,KAApB,CAAD;AAHf,OAAP;AAKA,KAND,MAMO;AACN,aAAO,IAAP;AACA;AACD,GA1CyB,CAApB,CA4CN,UAAC5I,KAAD,EAAQnB,MAAR,EAAgBC,KAAhB,EAA0B;AACzB,QAAIkM,WAAW,GAAG9L,IAAI,CAACC,SAAL,CAAeL,KAAf,CAAlB;AACA,QAAImM,YAAY,GAAG/L,IAAI,CAACC,SAAL,CAAe+L,yBAAMrM,MAAN,EAAc,UAACqC,KAAD,EAAQT,GAAR,EAAgB;AAC/D,uBAAUA,GAAV,cAAiBS,KAAjB;AACA,KAFiC,EAE/BiK,IAF+B,EAAf,CAAnB;AAGA,qBAAUH,WAAV,cAAyBC,YAAzB;AACA,GAlDK,CAAP;AAoDA,CArDD;;AAuDA,IAAMG,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACpH,WAAD,EAAiB;AACpD;AACD;AACA;AACA;AACC,SAAOG,uBAAc,CAAC,CACpB4E,kBAAkB,CAAC/E,WAAD,CADE,EAEpB4B,gBAFoB,EAGpB,UAAC5F,KAAD,EAAQ2B,cAAR;AAAA,WAA2BA,cAA3B;AAAA,GAHoB,CAAD;AAKpB;AACF;AACA;AACA;AACA;AACE,YAAC2I,eAAD,EAAkB5I,UAAlB,EAA8BC,cAA9B,EAAiD;AAChD,QAAI4I,WAAW,GAAG,EAAlB,CADgD;;AAEhD,QAAIE,WAAW,GAAG,EAAlB;;AAEA,QAAI9I,cAAc,IAAI,CAACtC,6BAAUiL,eAAV,CAAvB,EAAmD;AAClD;AACA,+BAAMA,eAAN,EAAuB,UAACe,oBAAD,EAA0B;AAChD;AACA,iCAAMA,oBAAN,EAA4B,UAACX,SAAD,EAAe;AAC1C,cAAI/K,4BAASgC,cAAT,EAAyB,UAAC2J,WAAD,EAAcpK,KAAd,EAAqBnC,KAArB;AAAA,mBAA+BuM,WAAW,IAAIpK,KAAf,IAAwBwJ,SAAS,CAAC/I,cAAlC,IAAoD+I,SAAS,CAAC/I,cAAV,CAAyB5C,KAAzB,CAAnF;AAAA,WAAzB,EAA6I,IAA7I,CAAJ,EAAwJ;AACvJ;AAEA,gBAAI+G,YAAY,GAAGZ,aAAa,CAACzD,YAAd,CAA2BC,UAA3B,EAAuCgJ,SAAS,CAAC/I,cAAjD,EAAiE+I,SAAS,CAAC7L,MAA3E,CAAnB;;AAEA,gBAAI8L,aAAa,GAAG3L,0BAAOuL,WAAP,EAAoB,UAACK,GAAD,EAAS;AAChD,qBAAOtK,6BAAUsK,GAAG,CAAC/L,MAAd,EAAsBiH,YAAtB,KAAuCxF,6BAAUsK,GAAG,CAAC9L,KAAd,EAAqB4L,SAAS,CAAC5L,KAA/B,CAA9C;AACA,aAFmB,CAApB;;AAGA,gBAAI6L,aAAJ,EAAkB;AACjBA,cAAAA,aAAa,CAAC/B,KAAd,CAAoBrI,IAApB,CAAyB;AACxBsF,gBAAAA,KAAK,EAAE6E,SAAS,CAAC7E,KADO;AAExB/F,gBAAAA,MAAM,EAAE4K,SAAS,CAAC5K;AAFM,eAAzB;AAIA,aALD,MAKO;AACNyK,cAAAA,WAAW,CAAChK,IAAZ,CAAiB;AAChB1B,gBAAAA,MAAM,EAAEiH,YADQ;AAEhBhH,gBAAAA,KAAK,EAAE4L,SAAS,CAAC5L,KAFD;AAGhB8J,gBAAAA,KAAK,EAAE,CAAC;AACP/C,kBAAAA,KAAK,EAAE6E,SAAS,CAAC7E,KADV;AAEP/F,kBAAAA,MAAM,EAAE4K,SAAS,CAAC5K;AAFX,iBAAD;AAHS,eAAjB;AAQA;AACD;AACD,SAzBD;AA0BA,OA5BD,EAFkD;;;AAiClD,+BAAMyK,WAAN,EAAmB,UAAAxL,KAAK,EAAI;AAC3B,YAAIA,KAAK,CAAC6J,KAAN,IAAelI,MAAM,CAAC2F,IAAP,CAAYtH,KAAK,CAAC6J,KAAlB,EAAyB9I,MAA5C,EAAoD;AACnD2K,UAAAA,WAAW,CAAClK,IAAZ,CAAiB;AAChB1B,YAAAA,MAAM,EAAEE,KAAK,CAACF,MADE;AAEhBC,YAAAA,KAAK,EAAEC,KAAK,CAACD,KAFG;AAGhB+L,YAAAA,IAAI,EAAEC,eAAe,CAACpK,MAAM,CAAC6D,MAAP,CAAcxF,KAAK,CAAC6J,KAApB,CAAD;AAHL,WAAjB;AAKA;AACD,OARD;;AASA,aAAO6B,WAAW,CAAC3K,MAAZ,GAAqB2K,WAArB,GAAmC,IAA1C;AACA,KA3CD,MA2CO;AACN,aAAO,IAAP;AACA;AACD,GA5DmB,CAArB;AA8DA,CAnED;;AAqEA,IAAMc,cAAc,GAAG,SAAjBA,cAAiB,CAACvH,WAAD,EAAiB;AACvC,SAAO,UAAChE,KAAD,EAAW;AACjB,QAAM8D,SAAS,GAAGE,WAAW,CAAChE,KAAD,CAAX,CAAmB8D,SAArC;;AACA,QAAIA,SAAJ,EAAe;AACd,aAAO;AAACA,QAAAA,SAAS,EAATA;AAAD,OAAP;AACA;;AAED,QAAMpC,UAAU,GAAGsC,WAAW,CAAChE,KAAD,CAAX,CAAmB0B,UAAtC;;AACA,QAAIA,UAAJ,EAAgB;AACf,aAAO;AAACA,QAAAA,UAAU,EAAVA;AAAD,OAAP;AACA;;AAED,WAAO,EAAP;AACA,GAZD;AAaA,CAdD;;AAgBA,SAAS8J,UAAT,CAAoBC,QAApB,EAA8B;AAC7B,SAAOA,QAAQ,IAAIA,QAAQ,CAAC5F,KAArB,IAA8B4F,QAAQ,CAAC3L,MAA9C;AACA;;AAED,SAAS4L,gBAAT,CAA0BC,OAA1B,EAAmCC,KAAnC,EAA0C;AACzC,SAAOA,KAAK,CAAC/F,KAAN,IAAgB8F,OAAO,CAAC9F,KAAR,GAAgB8F,OAAO,CAAC7L,MAA/C;AACA;;AAED,IAAMgL,eAAe,GAAG,SAAlBA,eAAkB,CAACe,SAAD,EAAe;AACtC,MAAMC,cAAc,GAAGD,SAAS,CAAChN,MAAV,CAAiB2M,UAAjB,CAAvB;;AACA,MAAMO,eAAe,GAAGC,4BAASF,cAAT,EAAyB,CAAC,OAAD,EAAU,QAAV,CAAzB,CAAxB;;AACA,MAAIC,eAAe,CAACjM,MAAhB,KAA2B,CAA/B,EAAkC;AACjC,WAAO,IAAP;AACA,GALqC;;;AAQtC,SAAOmM,0BAAOF,eAAP,EACLzM,MADK,CACE,UAAC4M,eAAD,EAAkBT,QAAlB,EAA+B;AACtC,QAAMU,IAAI,GAAGD,eAAe,CAACE,GAAhB,EAAb;;AACA,QAAIV,gBAAgB,CAACS,IAAD,EAAOV,QAAP,CAApB,EAAsC;AACrC;AACA,UAAM1F,GAAG,GAAGC,IAAI,CAACqG,GAAL,CAAUF,IAAI,CAACtG,KAAL,GAAasG,IAAI,CAACrM,MAA5B,EAAsC2L,QAAQ,CAAC5F,KAAT,GAAiB4F,QAAQ,CAAC3L,MAAhE,CAAZ;AACA,0CAAWoM,eAAX,IAA4B;AAC3BrG,QAAAA,KAAK,EAAEsG,IAAI,CAACtG,KADe;AAE3B/F,QAAAA,MAAM,EAAGiG,GAAG,GAAGoG,IAAI,CAACtG;AAFO,OAA5B;AAIA,KAPD,MAOO;AACN;AACA,0CAAWqG,eAAX,IAA4BC,IAA5B,EAAkCV,QAAlC;AACA;AACF,GAdM,EAcJ,CAACa,0BAAOP,eAAP,CAAD,CAdI,CAAP;AAeA,CAvBD;;AAyBA,sBAAe;AACd1G,EAAAA,SAAS,EAATA,SADc;AAEdC,EAAAA,eAAe,EAAfA,eAFc;AAGdH,EAAAA,YAAY,EAAZA,YAHc;AAIdC,EAAAA,aAAa,EAAbA,aAJc;AAKX4E,EAAAA,6BAA6B,EAA7BA,6BALW;AAMd1F,EAAAA,MAAM,EAANA,MANc;AAOdsB,EAAAA,gBAAgB,EAAhBA,gBAPc;AAQdvB,EAAAA,cAAc,EAAdA,cARc;AASdW,EAAAA,oBAAoB,EAApBA,oBATc;AAWdS,EAAAA,gBAAgB,EAAhBA,gBAXc;AAYdC,EAAAA,qBAAqB,EAArBA,qBAZc;AAadQ,EAAAA,QAAQ,EAARA,QAbc;AAcdE,EAAAA,iBAAiB,EAAjBA,iBAdc;AAedG,EAAAA,SAAS,EAATA,SAfc;AAiBdC,EAAAA,YAAY,EAAZA,YAjBc;AAkBdC,EAAAA,wBAAwB,EAAxBA,wBAlBc;AAoBdS,EAAAA,eAAe,EAAfA,eApBc;AAqBdH,EAAAA,YAAY,EAAZA,YArBc;AAsBdE,EAAAA,oBAAoB,EAApBA,oBAtBc;AAuBdE,EAAAA,cAAc,EAAdA,cAvBc;AAwBdE,EAAAA,kBAAkB,EAAlBA,kBAxBc;AAyBdC,EAAAA,aAAa,EAAbA,aAzBc;AA2Bd5I,EAAAA,QAAQ,EAARA,UA3Bc;AA4BdmJ,EAAAA,cAAc,EAAdA,cA5Bc;AA6BdC,EAAAA,kBAAkB,EAAlBA,kBA7Bc;AA8BdnC,EAAAA,UAAU,EAAVA,UA9Bc;AA+BdV,EAAAA,UAAU,EAAVA,UA/Bc;AAgCd+C,EAAAA,iBAAiB,EAAjBA,iBAhCc;AAiCdC,EAAAA,YAAY,EAAZA,YAjCc;AAkCdG,EAAAA,cAAc,EAAdA,cAlCc;AAmCdE,EAAAA,aAAa,EAAbA,aAnCc;AAoCdC,EAAAA,wBAAwB,EAAxBA,wBApCc;AAsCdE,EAAAA,aAAa,EAAbA,aAtCc;AAwCd8C,EAAAA,cAAc,EAAdA,cAxCc;AA0Cd1E,EAAAA,wBAAwB,EAAxBA,wBA1Cc;AA2CdkE,EAAAA,eAAe,EAAfA,eA3Cc;AA4CdV,EAAAA,iBAAiB,EAAjBA,iBA5Cc;AA6Cd1B,EAAAA,WAAW,EAAXA,WA7Cc;AA8CdyC,EAAAA,2BAA2B,EAA3BA,2BA9Cc;AAgDdN,EAAAA,eAAe,EAAfA,eAhDc;AAkDd;AACAV,EAAAA,qCAAqC,EAArCA;AAnDc,CAAf;;ACh5BA,IAAMpG,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACuM,qBAAV;AAAA,CAAzB;;AACA,IAAMlH,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AAEA,4BAAe;AACdqB,EAAAA,SAAS,EAATA,WADc;AAEdF,EAAAA,YAAY,EAAZA,cAFc;AAIdnB,EAAAA,WAAW,EAAXA;AAJc,CAAf;;ACDA,IAAIyI,gCAAgC,GAAG,IAAIC,kBAAJ,CAAc,EAAd,CAAvC;AAEA,IAAMC,kDAAkD,GAAGhO,wCAAoB,CAC9E,CACC,UAACiO,KAAD;AAAA,SAAWA,KAAX;AAAA,CADD,EAEC,UAACA,KAAD,EAAQC,kBAAR;AAAA,SAA+BA,kBAA/B;AAAA,CAFD,EAGC,UAACD,KAAD,EAAQC,kBAAR,EAA4BC,aAA5B;AAAA,SAA8CA,aAA9C;AAAA,CAHD,CAD8E,EAM9E,UAACF,KAAD,EAAQC,kBAAR,EAA4BC,aAA5B,EAA8C;AAC7C,MAAIjO,MAAM,sBAAO+N,KAAK,CAACE,aAAD,CAAZ,CAAV;;AACA,MAAIF,KAAK,CAAC1J,gBAAV,EAA4B;AAC3BrE,IAAAA,MAAM,CAACqE,gBAAP,GAA0B0J,KAAK,CAAC1J,gBAAhC;AACA;;AACD,MAAI0J,KAAK,CAACzC,gBAAV,EAA4B;AAC3BtL,IAAAA,MAAM,CAACsL,gBAAP,GAA0ByC,KAAK,CAACzC,gBAAhC;AACA,GAP4C;AAU7C;;;AAEA,MAAI4C,YAAY,GAAG,EAAnB;;AACA,MAAIH,KAAK,CAACjL,cAAV,EAA0B;AACzB,QAAIqL,MAAM,GAAGJ,KAAK,CAACjL,cAAnB;;AACA,QAAIqL,MAAM,CAACnK,SAAP,IAAoBgK,kBAAkB,CAAC/J,kBAA3C,EAA+D;AAC9DiK,MAAAA,YAAY,CAAChK,YAAb,GAA4B8J,kBAAkB,CAAC/J,kBAA/C;AACA;;AACD,QAAIkK,MAAM,QAAN,IAAeH,kBAAkB,CAAC7K,aAAtC,EAAqD;AACpD+K,MAAAA,YAAY,CAAC9K,OAAb,GAAuB4K,kBAAkB,CAAC7K,aAA1C;AACA;;AACD,QAAIgL,MAAM,CAAChK,aAAP,IAAwB6J,kBAAkB,CAAC5J,sBAA/C,EAAuE;AACtE8J,MAAAA,YAAY,CAAC7J,gBAAb,GAAgC2J,kBAAkB,CAAC5J,sBAAnD;AACA;;AACD,QAAI+J,MAAM,CAAC7C,gBAAP,IAA2B0C,kBAAkB,CAAC1C,gBAAlD,EAAoE;AACnE4C,MAAAA,YAAY,CAAC5C,gBAAb,GAAgC0C,kBAAkB,CAAC1C,gBAAnD;AACA,KAbwB;;;AAezB,QAAI6C,MAAM,CAACvK,MAAP,IAAiBoK,kBAAkB,CAACnK,eAAxC,EAAyD;AACxDqK,MAAAA,YAAY,CAACpK,SAAb,GAAyBkK,kBAAkB,CAACnK,eAA5C;AACA,KAjBwB;;;AAmBzB,QAAIsK,MAAM,CAAC3K,KAAP,IAAgBwK,kBAAkB,CAACvK,cAAvC,EAAuD;AACtDyK,MAAAA,YAAY,CAACxK,QAAb,GAAwBsK,kBAAkB,CAACvK,cAA3C;AACA;;AACD,QAAI0K,MAAM,CAAC/C,QAAP,IAAmB4C,kBAAkB,CAAClD,iBAA1C,EAA6D;AAC5DoD,MAAAA,YAAY,CAACpJ,WAAb,GAA2BkJ,kBAAkB,CAAClD,iBAA9C;AACA;;AACD,QAAIqD,MAAM,CAAC9K,KAAP,IAAgB2K,kBAAkB,CAAC1K,cAAvC,EAAuD;AACtD4K,MAAAA,YAAY,CAAC3K,QAAb,GAAwByK,kBAAkB,CAAC1K,cAA3C;AACA;AACD;;AAED,2CAAWtD,MAAX,GAAsBkO,YAAtB;AACA,CAlD6E,CAApB,CAmDzD,UAACH,KAAD,EAAQC,kBAAR;AAAA,mBAAkCD,KAAlC,cAA2CC,kBAA3C;AAAA,CAnDyD,CAA3D;AAqDA,IAAMI,6BAA6B,GAAGtO,wCAAoB,CACzD,CACCuO,eAAe,CAACtH,gBADjB,EAEC,UAAC5F,KAAD,EAAQmN,UAAR;AAAA,SAAuBA,UAAvB;AAAA,CAFD,EAGC,UAACnN,KAAD,EAAQmN,UAAR,EAAoBC,QAApB;AAAA,SAAiCA,QAAjC;AAAA,CAHD,CADyD,EAMzD,UAACP,kBAAD,EAAqBM,UAArB,EAAiCC,QAAjC,EAA8C;AAC7CD,EAAAA,UAAU,GAAGjO,IAAI,CAACmO,KAAL,CAAWF,UAAX,CAAb;AAEA,SAAO,CAAC;AACP1M,IAAAA,GAAG,EAAE2M,QADE;AAEPvO,IAAAA,MAAM,EAAE8N,kDAAkD,CAACQ,UAAD,EAAaN,kBAAb,EAAiC,mBAAjC;AAFnD,GAAD,CAAP;AAIA,CAbwD,CAApB,CAcpC,UAAC7M,KAAD,EAAQmN,UAAR,EAAoBC,QAApB;AAAA,mBAAqCD,UAArC,cAAmDC,QAAnD;AAAA,CAdoC,CAAtC;AAmBA,IAAME,mBAAmB,GAAG3O,wCAAoB,CAC/C,CACCuO,eAAe,CAACtH,gBADjB,EAEC,UAAC5F,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAFD,CAD+C,EAK/C,UAACV,kBAAD,EAAqBU,WAArB,EAAqC;AACpCA,EAAAA,WAAW,GAAGrO,IAAI,CAACmO,KAAL,CAAWE,WAAX,CAAd;;AACA,MAAIA,WAAW,IAAIA,WAAW,CAACzN,MAA/B,EAAuC;AACtC,WAAOoL,yBAAMqC,WAAN,EAAmB,UAACX,KAAD,EAAW;AACpC,aAAO;AACNnM,QAAAA,GAAG,EAAEmM,KAAK,CAACnM,GADL;AAEN5B,QAAAA,MAAM,EAAE8N,kDAAkD,CAACC,KAAD,EAAQC,kBAAR,EAA4B,mBAA5B,CAFpD;AAGNW,QAAAA,eAAe,EAAEb,kDAAkD,CAACC,KAAD,EAAQC,kBAAR,EAA4B,4BAA5B;AAH7D,OAAP;AAKA,KANM,CAAP;AAOA,GARD,MAQO;AACN,WAAO,IAAP;AACA;AACD,CAlB8C,CAApB,CAmB1B,UAAC7M,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAnB0B,CAA5B;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAME,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACL,QAAD,EAAWM,UAAX,EAAuBC,aAAvB,EAAsC5O,KAAtC,EAA6CoO,UAA7C,EAAyDS,KAAzD,EAAgEC,oBAAhE,EAAsFC,UAAtF,EAAkG9K,aAAlG,EAAiHP,MAAjH,EAA4H;AAAA;;AAChK,MAAMsL,YAAY,GAAGZ,UAAU,IAAIA,UAAU,CAACa,OAA9C;AACA,MAAIC,cAAc,GAAGP,UAAU,CAACtM,IAAhC;;AAFgK,MAI3J8M,WAJ2J,GAIlED,cAJkE,CAI3JC,WAJ2J;AAAA,MAI9IC,YAJ8I,GAIlEF,cAJkE,CAI9IE,YAJ8I;AAAA,MAIhIC,IAJgI,GAIlEH,cAJkE,CAIhIG,IAJgI;AAAA,MAI1HC,SAJ0H,GAIlEJ,cAJkE,CAI1HI,SAJ0H;AAAA,MAI/GC,SAJ+G,GAIlEL,cAJkE,CAI/GK,SAJ+G;AAAA,MAIpGC,QAJoG,GAIlEN,cAJkE,CAIpGM,QAJoG;AAAA,MAI1FC,QAJ0F,GAIlEP,cAJkE,CAI1FO,QAJ0F;AAAA,MAI7ER,OAJ6E,4BAIlEC,cAJkE;;;AAOhK,MAAIG,IAAI,KAAK,MAAb,EAAqB;AACpBJ,IAAAA,OAAO,CAACS,GAAR,GAAcT,OAAO,CAACU,IAAR,CAAa,CAAb,CAAd;AACA,GAFD,MAEO,IAAIN,IAAI,KAAK,KAAb,EAAoB;AAAA,mBACoBJ,OADpB;AAAA,QACnBS,GADmB,YACnBA,GADmB;AAAA,QACdE,MADc,YACdA,MADc;AAAA,QACNC,aADM,YACNA,aADM;AAAA,QACYC,IADZ;;AAE1B,QAAMC,UAAU,GAAGF,aAAa,IAAIA,aAAa,CAAC9N,cAAd,CAA6B,YAA7B,CAAjB,GAA8D8N,aAAa,CAACE,UAA5E,GAAyF,KAA5G;AAEAd,IAAAA,OAAO,GAAG;AACTW,MAAAA,MAAM,oCACFA,MADE;AAELI,QAAAA,MAAM,EAAEF,IAAI,CAACE,MAFR;AAGLC,QAAAA,MAAM,EAAEH,IAAI,CAACG;AAHR,QADG;AAMTF,MAAAA,UAAU,EAAVA,UANS;AAOTL,MAAAA,GAAG,EAAHA;AAPS,KAAV;AASA,GAbM,MAaA,IAAIL,IAAI,KAAK,QAAT,IAAqBG,QAAzB,EAAmC;AACzC,QAAIV,oBAAJ,EAA0B;AACzBU,MAAAA,QAAQ,GAAGU,2BAA2B,CAAC7B,QAAD,EAAWmB,QAAX,EAAqBV,oBAArB,EAA2CF,aAA3C,CAAtC;AACA;;AAED,QAAIG,UAAU,IAAIC,YAAJ,aAAIA,YAAJ,eAAIA,YAAY,CAAES,QAAhC,EAA0C;AACzCA,MAAAA,QAAQ,GAAGU,gBAAgB,CAACpB,UAAD,EAAaC,YAAY,CAACS,QAA1B,CAA3B;AACA;;AAGDR,IAAAA,OAAO,qCACHD,YADG;AAENQ,MAAAA,QAAQ,EAARA,QAFM;AAGNC,MAAAA,QAAQ,EAARA,QAHM;AAINb,MAAAA,aAAa,EAAbA;AAJM,MAAP,CAVyC;;AAkBzC,QAAIC,KAAK,IAAIA,KAAK,CAACxM,IAAf,IAAuBwM,KAAK,CAACxM,IAAN,CAAW+N,MAAX,KAAsB,YAAjD,EAA+D;AAC9DnB,MAAAA,OAAO,CAACJ,KAAR,GAAgBA,KAAK,CAACxM,IAAN,CAAWgO,UAA3B;AACA;AACD;;AAED,MAAG3M,MAAH,EAAW;AACVuL,IAAAA,OAAO,CAACvL,MAAR,GAAiBA,MAAjB;AACA;;AAED,SAAO;AACNhC,IAAAA,GAAG,EAAE2M,QAAQ,GAAG,GAAX,GAAiBrO,KADhB;AAENsQ,IAAAA,IAAI,EAAElC,UAAU,CAACkC,IAAX,KAAmBrM,aAAnB,aAAmBA,aAAnB,8CAAmBA,aAAa,CAAE5B,IAAlC,wDAAmB,oBAAqBkO,WAAxC,CAFA;AAGNC,IAAAA,WAAW,EAAEvM,aAAF,aAAEA,aAAF,+CAAEA,aAAa,CAAE5B,IAAjB,yDAAE,qBAAqBmO,WAH5B;AAINnC,IAAAA,QAAQ,EAAEA,QAJJ;AAKNoC,IAAAA,OAAO,EAAGrC,UAAU,IAAIA,UAAU,CAACqC,OAA1B,IAAsC,CALzC;AAMNpB,IAAAA,IAAI,EAAJA,IANM;AAONJ,IAAAA,OAAO,EAAPA;AAPM,GAAP;AASA,CA1DD;;AA4DA,SAASkB,gBAAT,CAA0BpB,UAA1B,EAAsC2B,eAAtC,EAAuD;AACtD,MAAIC,mBAAmB,GAAG,EAA1B;;AACA,6BAAQD,eAAR,EAAyB,UAACvO,KAAD,EAAQT,GAAR,EAAgB;AACxC,QAAIkP,aAAa,GAAG7B,UAAH,aAAGA,UAAH,uBAAGA,UAAU,CAAGrN,GAAH,CAAV,CAAkBW,IAAtC;;AAEA,QAAIuO,aAAJ,EAAmB;AAClB,UAAM/B,KAAK,GAAG+B,aAAa,CAAC/B,KAA5B,CADkB;;AAGlB,UAAMgC,KAAK,GAAGD,aAAa,CAACC,KAA5B;AACA,UAAMC,YAAY,GAAGF,aAAa,CAACE,YAAnC;;AAEA,UAAIF,aAAa,CAACG,iBAAlB,EAAqC;AACpCJ,QAAAA,mBAAmB,CAACjP,GAAD,CAAnB,GAA2B;AAAC4F,UAAAA,IAAI,EAAEsJ,aAAa,CAACG,iBAAd,CAAgCzJ;AAAvC,SAA3B;;AACA,YAAIuH,KAAJ,EAAW;AACV8B,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBmN,KAAzB,GAAiCA,KAAjC;AACA8B,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBsP,YAAzB,GAAwCnC,KAAxC;AACA,SAHD,MAGO;AACN8B,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBmN,KAAzB,GAAiC;AAChCoC,YAAAA,YAAY,EAAEJ,KADkB;AAEhCK,YAAAA,YAAY,EAAE;AAFkB,WAAjC;AAIAP,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBsP,YAAzB,GAAwC;AACvCC,YAAAA,YAAY,EAAEH,YADyB;AAEvCI,YAAAA,YAAY,EAAE;AAFyB,WAAxC;AAIA;AACD,OArBiB;;AAwBlB;AACD,GA5BD;;AA8BA,SAAOP,mBAAP;AACA;;AAED,SAAST,2BAAT,CAAqC7B,QAArC,EAA+CmB,QAA/C,EAAyDV,oBAAzD,EAA+EF,aAA/E,EAA8F;AAC7F,MAAIuC,QAAQ,GAAGhR,IAAI,CAACC,SAAL,CAAeiO,QAAf,CAAf;AACA,MAAI+C,KAAK,GAAG1D,gCAAgC,CAAC2D,SAAjC,CAA2CF,QAA3C,CAAZ;AAEA,MAAIG,mBAAmB,GAAG,EAA1B;;AACA,MAAIF,KAAK,IAAIA,KAAK,CAAC5B,QAAN,KAAmBA,QAAhC,EAA0C;AACzC8B,IAAAA,mBAAmB,GAAGF,KAAK,CAACE,mBAA5B;AACA,GAFD,MAEO;AACN9B,IAAAA,QAAQ,CAAClO,OAAT,CAAiB,UAACiQ,OAAD,EAAa;AAC7B,UAAI7P,GAAG,GAAG6P,OAAO,CAACC,UAAR,CAAmB5C,aAAnB,CAAV;AACA0C,MAAAA,mBAAmB,CAAC5P,GAAD,CAAnB,sBAA+B6P,OAA/B;AACA,KAHD;AAKA;;AAEDzC,EAAAA,oBAAoB,CAACxN,OAArB,CAA6B,UAAAmQ,mBAAmB,EAAI;AACnD,QAAIC,sBAAsB,GAAGD,mBAAmB,CAAC9C,UAApB,CAA+BtM,IAA/B,CAAoCmN,QAAjE;;AACA,QAAIkC,sBAAJ,EAA4B;AAC3BA,MAAAA,sBAAsB,CAACpQ,OAAvB,CAA+B,UAAAqQ,qBAAqB,EAAI;AACvD,YAAIC,UAAU,GAAGD,qBAAqB,CAACH,UAAtB,CAAiC5C,aAAjC,CAAjB;;AAEA,mCAAQ+C,qBAAqB,CAACH,UAA9B,EAA0C,UAACrP,KAAD,EAAQT,GAAR,EAAgB;AACzD4P,UAAAA,mBAAmB,CAACM,UAAD,CAAnB,CAAgCJ,UAAhC,CAA2C9P,GAA3C,IAAkDS,KAAlD;AACA,SAFD;AAGA,OAND;AAOA;AACD,GAXD;AAaAuL,EAAAA,gCAAgC,CAACmE,WAAjC,CAA6C;AAC5CV,IAAAA,QAAQ,EAARA,QAD4C;AAE5C3B,IAAAA,QAAQ,EAARA,QAF4C;AAG5C8B,IAAAA,mBAAmB,EAAnBA;AAH4C,GAA7C;AAOA,SAAO3P,MAAM,CAAC6D,MAAP,CAAc8L,mBAAd,CAAP;AACA;;AAED,SAASQ,6BAAT,CAAuCtD,WAAvC,EAAoD;AACnD,MAAIuD,eAAe,GAAG,EAAtB;;AACA,4BAAOvD,WAAP,EAAoB,UAAAJ,UAAU,EAAI;AAAA;;AACjC,QAAIA,UAAJ,aAAIA,UAAJ,sCAAIA,UAAU,CAAEa,OAAhB,gDAAI,oBAAqBO,QAAzB,EAAmC;AAClCuC,MAAAA,eAAe,CAACvQ,IAAhB,mCACI4M,UADJ;AAECa,QAAAA,OAAO,oCACHb,UAAU,CAACa,OADR;AAENO,UAAAA,QAAQ,EAAE;AAFJ;AAFR;AAOA,KARD,MAQO;AACNuC,MAAAA,eAAe,CAACvQ,IAAhB,CAAqB4M,UAArB;AACA;AACD,GAZD;;AAcA,SAAO2D,eAAP;AACA;;AAED,iBAAe;AACd7D,EAAAA,6BAA6B,EAA7BA,6BADc;AAEdK,EAAAA,mBAAmB,EAAnBA,mBAFc;AAGduD,EAAAA,6BAA6B,EAA7BA,6BAHc;AAIdpD,EAAAA,4BAA4B,EAA5BA,4BAJc;AAKdyB,EAAAA,gBAAgB,EAAhBA;AALc,CAAf;;ACtQA,IAAMlL,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACqJ,cAAV;AAAA,CAAzB;;AAEA,IAAMlE,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMM,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AACA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAEA,IAAM+M,qCAAqC,GAAGpS,wCAAoB,CACjE,CACC0F,gBADD,EAEC,UAACrE,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAFD,CADiE,EAKjE,UAAClE,cAAD,EAAiBkE,WAAjB,EAAiC;AAChC,MAAIlE,cAAc,IAAI,CAAChK,6BAAUgK,cAAV,CAAnB,IAAgDkE,WAApD,EAAiE;AAChE,QAAIyD,wBAAwB,GAAG,EAA/B;AACAzD,IAAAA,WAAW,CAAClN,OAAZ,CAAoB,UAAAuM,KAAK,EAAI;AAC5B,UAAIA,KAAK,CAAC/N,MAAN,CAAaqE,gBAAjB,EAAmC;AAClC8N,QAAAA,wBAAwB,CAACpE,KAAK,CAACnM,GAAP,CAAxB,GAAsC4I,cAAc,CAACuD,KAAK,CAAC/N,MAAN,CAAaqE,gBAAd,CAApD;AACA;AACD,KAJD;AAMA,WAAO8N,wBAAP;AACA,GATD,MASO;AACN,WAAO,IAAP;AACA;AACD,CAlBgE,CAApB,CAmB5C,UAAChR,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAW,CAAC/H,GAAZ,CAAgB,UAAAyL,CAAC;AAAA,WAAIA,CAAC,CAACpS,MAAF,IAAYoS,CAAC,CAACpS,MAAF,CAASqE,gBAAzB;AAAA,GAAjB,EAA4DgO,IAA5D,CAAiE,GAAjE,CAAxB;AAAA,CAnB4C,CAA9C;AAqBA,IAAMC,6CAA6C,GAAGxS,wCAAoB,CACzE,CACC0F,gBADD,EAEC,UAACrE,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAFD,CADyE,EAKzE,UAAClE,cAAD,EAAiBkE,WAAjB,EAAiC;AAChC,MAAIlE,cAAc,IAAI,CAAChK,6BAAUgK,cAAV,CAAnB,IAAgDkE,WAApD,EAAiE;AAChE,QAAIyD,wBAAwB,GAAG,EAA/B;AACAzD,IAAAA,WAAW,CAAClN,OAAZ,CAAoB,UAAAuM,KAAK,EAAI;AAC5B,UAAIA,KAAK,CAAC/N,MAAN,CAAaqE,gBAAjB,EAAmC;AAClC8N,QAAAA,wBAAwB,CAACpE,KAAK,CAAC/N,MAAN,CAAaqE,gBAAd,CAAxB,GAA0DmG,cAAc,CAACuD,KAAK,CAAC/N,MAAN,CAAaqE,gBAAd,CAAxE;AACA;AACD,KAJD;AAMA,WAAO8N,wBAAP;AACA,GATD,MASO;AACN,WAAO,IAAP;AACA;AACD,CAlBwE,CAApB,CAmBpD,UAAChR,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAW,CAAC/H,GAAZ,CAAgB,UAAAyL,CAAC;AAAA,WAAIA,CAAC,CAACpS,MAAF,IAAYoS,CAAC,CAACpS,MAAF,CAASqE,gBAAzB;AAAA,GAAjB,EAA4DgO,IAA5D,CAAiE,GAAjE,CAAxB;AAAA,CAnBoD,CAAtD;AAqBA,qBAAe;AACd/L,EAAAA,YAAY,EAAZA,cADc;AAEdb,EAAAA,MAAM,EAANA,QAFc;AAGdD,EAAAA,cAAc,EAAdA,gBAHc;AAKd6B,EAAAA,QAAQ,EAARA,UALc;AAOdM,EAAAA,YAAY,EAAZA,cAPc;AAQdC,EAAAA,wBAAwB,EAAxBA,0BARc;AAUdY,EAAAA,kBAAkB,EAAlBA,oBAVc;AAYd1B,EAAAA,UAAU,EAAE6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAZE;AAcd6C,EAAAA,wBAAwB,EAAxBA,0BAdc;AAedkK,EAAAA,qCAAqC,EAArCA,qCAfc;AAgBdI,EAAAA,6CAA6C,EAA7CA,6CAhBc;AAiBdnN,EAAAA,WAAW,EAAXA;AAjBc,CAAf;;ACrDA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACoR,wBAAV;AAAA,CAAzB;;AAEA,IAAM9M,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAM0B,uBAAqB,GAAG8G,eAAM,CAAC9G,qBAAP,CAA6B1B,aAA7B,CAA9B;AACA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;;AAEA,IAAMqN,iBAAiB,GAAG,SAApBA,iBAAoB,CAAArR,KAAK;AAAA,SAAIA,KAAK,CAACsR,kBAAN,CAAyBC,MAAzB,CAAgCC,yBAApC;AAAA,CAA/B;;AAEA,IAAMC,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACzR,KAAD,EAAQ0R,KAAR;AAAA,SAAkB1R,KAAK,CAACsR,kBAAN,CAAyBC,MAAzB,CAAgCI,mBAAhC,CAAoDD,KAAK,CAACE,aAA1D,CAAlB;AAAA,CAArC;;AACA,IAAMC,kCAAkC,GAAG,SAArCA,kCAAqC,CAAC7R,KAAD,EAAQ0R,KAAR;AAAA,SAAkB1R,KAAK,CAACsR,kBAAN,CAAyBC,MAAzB,CAAgCC,yBAAhC,CAA0DE,KAAK,CAACE,aAAhE,CAAlB;AAAA,CAA3C;;AACA,IAAME,wCAAwC,GAAG,SAA3CA,wCAA2C,CAAC9R,KAAD,EAAQ0R,KAAR;AAAA,SAAkB1R,KAAK,CAACsR,kBAAN,CAAyBC,MAAzB,CAAgCQ,+BAAhC,CAAgEL,KAAK,CAACE,aAAtE,CAAlB;AAAA,CAAjD;;AAEA,IAAMI,oCAAoC,GAAG,SAAvCA,oCAAuC,CAAChS,KAAD,EAAQ0R,KAAR,EAAkB;AAC7D,SAAOO,4BAASR,4BAA4B,CAACzR,KAAD,EAAQ0R,KAAR,CAArC,EAAqD,UAAApB,OAAO,EAAI;AACtE,WAAO4B,8BAAWJ,wCAAwC,CAAC9R,KAAD,EAAQ0R,KAAR,CAAnD,EAAmEpB,OAAO,CAAC7P,GAA3E,CAAP;AACA,GAFM,CAAP;AAGD,CAJD;;AAOA,sBAAe;AACdgR,EAAAA,4BAA4B,EAAEA,4BADhB;AAEdI,EAAAA,kCAAkC,EAAEA,kCAFtB;AAGdG,EAAAA,oCAAoC,EAAEA,oCAHxB;AAKdtM,EAAAA,qBAAqB,EAArBA,uBALc;AAMd1B,EAAAA,WAAW,EAAXA,aANc;AAOdqN,EAAAA,iBAAiB,EAAEA,iBAPL;AAQd/M,EAAAA,MAAM,EAANA,QARc;AASdD,EAAAA,cAAc,EAAdA,gBATc;AAUd6B,EAAAA,QAAQ,EAARA,UAVc;AAWdM,EAAAA,YAAY,EAAZA;AAXc,CAAf;;ACpBA,IAAMxC,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAACmS,aAAjB;AAAA,CAApB;;AACA,IAAM7N,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AAEA;AACA;AACA;;AACA,IAAMoO,UAAU,GAAGjO,uBAAc,CAChC,CAACG,QAAD,CADgC,EAEhC,UAAC+N,SAAD,EAAe;AACd,MAAIA,SAAJ,EAAe;AACd,WAAOnH,yBAAMmH,SAAN,EAAiB,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAAClR,IAAb;AAAA,KAAzB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR+B,CAAjC;AAWA;AACA;AACA;AACA;AACA;;AACA,IAAMmR,eAAe,GAAGpO,uBAAc,CACrC,CACCiO,UADD,EAEC,UAACpS,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADqC,EAKrC,UAACwT,SAAD,EAAYxT,MAAZ,EAAuB;AACtB,MAAIwT,SAAS,IAAIA,SAAS,CAACvS,MAAV,GAAmB,CAAhC,IAAqCjB,MAArC,IAA+C,CAACQ,6BAAUR,MAAV,CAApD,EAAuE;AACtE,WAAOoT,4BAASI,SAAT,EAAoBxT,MAApB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAXoC,CAAtC;AAcA;AACA;AACA;;AACA,IAAM2T,0CAA0C,GAAG7T,wCAAoB,CACtE,CACC2F,QADD,EAEC,UAACtE,KAAD,EAAQ+O,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADsE,EAKtE,UAACsD,SAAD,EAAYtD,MAAZ,EAAuB;AACtB,MAAIsD,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,QAAI2S,yBAAyB,GAAG,EAAhC;;AAEA,iCAAU1D,MAAV,EAAkB,UAACnC,KAAD,EAAW;AAC5B,UAAI8F,iBAAiB,GAAGT,4BAASI,SAAT,EAAoB;AAAC,gBAAQzF,KAAK,CAAC/N;AAAf,OAApB,CAAxB;;AACA,UAAI6T,iBAAiB,CAAC5S,MAAtB,EAA8B;AAC7B2S,QAAAA,yBAAyB,CAAC7F,KAAK,CAACnM,GAAP,CAAzB,GAAuCiS,iBAAiB,CAAClN,GAAlB,CAAsB,UAAA8M,QAAQ,EAAI;AACxE,iBAAO;AACNK,YAAAA,oBAAoB,EAAEL,QAAQ,CAAClR,IAAT,CAAcuR,oBAD9B;AAENhF,YAAAA,aAAa,EAAE2E,QAAQ,CAAClR,IAAT,CAAcuM;AAFvB,WAAP;AAIA,SALsC,CAAvC;AAMA;AACD,KAVD;;AAWA,WAAO,CAACtO,6BAAUoT,yBAAV,CAAD,GAAwCA,yBAAxC,GAAoE,IAA3E;AAEA,GAhBD,MAgBO;AACN,WAAO,IAAP;AACA;AACD,CAzBqE,CAApB,CA2BlD,UAACzS,KAAD,EAAQ+O,MAAR;AAAA,SAAmB7P,IAAI,CAACC,SAAL,CAAe4P,MAAf,CAAnB;AAAA,CA3BkD,CAAnD;AA8BA,oBAAe;AACd/K,EAAAA,WAAW,EAAXA,aADc;AAGduO,EAAAA,eAAe,EAAfA,eAHc;AAIdC,EAAAA,0CAA0C,EAA1CA;AAJc,CAAf;;ACrEA,IAAMxO,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAAC4S,gBAAjB;AAAA,CAApB;;AACA,IAAMtO,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA;AACA;AACA;;AACA,IAAMoO,YAAU,GAAGjO,uBAAc,CAChC,CAACG,QAAD,CADgC,EAEhC,UAAC+N,SAAD,EAAe;AACd,MAAIA,SAAJ,EAAe;AACd,WAAOnH,yBAAMmH,SAAN,EAAiB,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAAClR,IAAb;AAAA,KAAzB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR+B,CAAjC;AAWA;AACA;AACA;AACA;AACA;;AACA,IAAMmR,iBAAe,GAAGpO,uBAAc,CACrC,CACCiO,YADD,EAEC,UAACpS,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADqC,EAKrC,UAACwT,SAAD,EAAYxT,MAAZ,EAAuB;AACtB,MAAIwT,SAAS,IAAIA,SAAS,CAACvS,MAAV,GAAmB,CAAhC,IAAqCjB,MAArC,IAA+C,CAACQ,6BAAUR,MAAV,CAApD,EAAuE;AACtE,WAAOoT,4BAASI,SAAT,EAAoBxT,MAApB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAXoC,CAAtC;AAcA;AACA;AACA;;AACA,IAAM2T,4CAA0C,GAAG7T,wCAAoB,CACtE,CACC2F,QADD,EAEC,UAACtE,KAAD,EAAQ+O,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADsE,EAKtE,UAACsD,SAAD,EAAYtD,MAAZ,EAAuB;AACtB,MAAIsD,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,QAAI2S,yBAAyB,GAAG,EAAhC;;AAEA,iCAAU1D,MAAV,EAAkB,UAACnC,KAAD,EAAW;AAC5B,UAAI8F,iBAAiB,GAAGT,4BAASI,SAAT,EAAoB;AAAC,gBAAQzF,KAAK,CAAC/N;AAAf,OAApB,CAAxB;;AACA,UAAI6T,iBAAiB,CAAC5S,MAAtB,EAA8B;AAC7B2S,QAAAA,yBAAyB,CAAC7F,KAAK,CAACnM,GAAP,CAAzB,GAAuCiS,iBAAiB,CAAClN,GAAlB,CAAsB,UAAA8M,QAAQ,EAAI;AACxE,iBAAO;AACNK,YAAAA,oBAAoB,EAAEL,QAAQ,CAAClR,IAAT,CAAcuR,oBAD9B;AAENhF,YAAAA,aAAa,EAAE2E,QAAQ,CAAClR,IAAT,CAAcuM;AAFvB,WAAP;AAIA,SALsC,CAAvC;AAMA;AACD,KAVD;;AAWA,WAAO,CAACtO,6BAAUoT,yBAAV,CAAD,GAAwCA,yBAAxC,GAAoE,IAA3E;AAEA,GAhBD,MAgBO;AACN,WAAO,IAAP;AACA;AACD,CAzBqE,CAApB,CA2BlD,UAACzS,KAAD,EAAQ+O,MAAR;AAAA,SAAmB7P,IAAI,CAACC,SAAL,CAAe4P,MAAf,CAAnB;AAAA,CA3BkD,CAAnD;AA8BA;AACA;AACA;;AACA,IAAM8D,wCAAwC,GAAGlU,wCAAoB,CACpE,CACC2F,QADD,EAEC,UAACtE,KAAD,EAAQ+O,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADoE,EAKpE,UAACsD,SAAD,EAAYtD,MAAZ,EAAuB;AACtB,MAAIsD,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,QAAI2S,yBAAyB,GAAG,EAAhC;;AAEA,iCAAU1D,MAAV,EAAkB,UAACnC,KAAD,EAAW;AAC5B,UAAI8F,iBAAiB,GAAGT,4BAASI,SAAT,EAAoB;AAAC,gBAAQzF,KAAK,CAAC/N;AAAf,OAApB,CAAxB;;AACA,UAAMqE,gBAAgB,GAAG0J,KAAK,CAAC/N,MAAN,CAAaqE,gBAAtC;;AACA,UAAIA,gBAAgB,IAAIwP,iBAAiB,CAAC5S,MAA1C,EAAkD;AACjD2S,QAAAA,yBAAyB,CAACvP,gBAAD,CAAzB,GAA8CwP,iBAA9C;AACA;AACD,KAND;;AAOA,WAAO,CAACrT,6BAAUoT,yBAAV,CAAD,GAAwCA,yBAAxC,GAAoE,IAA3E;AAEA,GAZD,MAYO;AACN,WAAO,IAAP;AACA;AACD,CArBmE,CAApB,CAuBhD,UAACzS,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAW,CAAC/H,GAAZ,CAAgB,UAAAyL,CAAC;AAAA,WAAIA,CAAC,CAACpS,MAAF,IAAYoS,CAAC,CAACpS,MAAF,CAASqE,gBAAzB;AAAA,GAAjB,EAA4DgO,IAA5D,CAAiE,GAAjE,CAAxB;AAAA,CAvBgD,CAAjD;AA0BA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM4B,gCAAgC,GAAG3O,uBAAc,CACtD,CACCiO,YADD,EAEC,UAACpS,KAAD,EAAQ+O,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADsD;AAKtD;AACD;AACA;AACA;AACA;AACC,UAACsD,SAAD,EAAYtD,MAAZ,EAAuB;AACtB,MAAIA,MAAM,IAAI,CAAC1P,6BAAU0P,MAAV,CAAf,EAAkC;AACjC,QAAIgE,gBAAgB,GAAG,EAAvB;AACAhE,IAAAA,MAAM,CAAC1O,OAAP,CAAe,UAAAuM,KAAK,EAAI;AACvB,UAAMQ,QAAQ,GAAGR,KAAK,CAACnM,GAAN,IAAcmM,KAAK,CAACxL,IAAN,IAAcwL,KAAK,CAACxL,IAAN,CAAWX,GAAxD;;AACA,UAAI2M,QAAJ,EAAc;AACb,YAAIiF,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,cAAMjB,MAAM,GAAGmU,+BAAUpG,KAAK,CAAC/N,MAAhB,CAAf,CADkC;AAGlC;;;AACA,iBAAOA,MAAM,CAACkE,YAAd;;AACA,cAAI2P,iBAAiB,GAAGT,4BAASI,SAAT,EAAoBxT,MAApB,CAAxB;;AACA,cAAI,CAACQ,6BAAUqT,iBAAV,CAAL,EAAmC;AAClCK,YAAAA,gBAAgB,CAAC3F,QAAD,CAAhB,GAA6BsF,iBAA7B;AACA,WAFD,MAEO;AACNK,YAAAA,gBAAgB,CAAC3F,QAAD,CAAhB,GAA6B,CAAC,IAAD,CAA7B;AACA;AACD,SAXD,MAWO;AACN2F,UAAAA,gBAAgB,CAAC3F,QAAD,CAAhB,GAA6B,CAAC,IAAD,CAA7B;AACA;AACD;AACD,KAlBD;AAmBA,WAAO,CAAC/N,6BAAU0T,gBAAV,CAAD,GAA+BA,gBAA/B,GAAkD,IAAzD;AACA,GAtBD,MAsBO;AACN,WAAO,IAAP;AACA;AACD,CApCqD,CAAvD;AAuCA;AACA;AACA;AACA;;AACA,IAAME,yBAAyB,GAAG9O,uBAAc,CAC/C,CAACoO,iBAAD,CAD+C,EAE/C,UAACG,iBAAD,EAAuB;AACtB,MAAIA,iBAAiB,IAAIA,iBAAiB,CAAC5S,MAA3C,EAAmD;AAClD,WAAOoL,yBAAMwH,iBAAN,EAAyB,UAAAJ,QAAQ;AAAA,aAAIA,QAAQ,CAACK,oBAAb;AAAA,KAAjC,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR8C,CAAhD;AAWA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMO,yCAAyC,GAAG/O,uBAAc,CAC/D,CAACiO,YAAD,EAAa,UAACpS,KAAD,EAAQmT,iBAAR;AAAA,SAA8BA,iBAA9B;AAAA,CAAb,CAD+D,EAE/D,UAAChN,OAAD,EAAUgN,iBAAV,EAAgC;AAC/B,MAAIhN,OAAO,IAAI,CAAC9G,6BAAU8G,OAAV,CAAZ,IAAkCgN,iBAAlC,IAAuD,CAAC9T,6BAAU8T,iBAAV,CAA5D,EAA0F;AACzF,QAAMC,QAAQ,GAAGjN,OAAO,CAACtH,MAAR,CAAe,UAAAW,CAAC;AAAA,aAAI2T,iBAAiB,CAAC5R,QAAlB,CAA2B/B,CAAC,CAAC0D,gBAA7B,CAAJ;AAAA,KAAhB,CAAjB;AACA,WAAO,CAAC7D,6BAAU+T,QAAV,CAAD,GAAuBA,QAAvB,GAAkC,IAAzC;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAT8D,CAAhE;;AAaA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,uCAAuC,GAAGlP,uBAAc,CAC7D,CAAC2O,gCAAD,CAD6D;AAG7D;AACD;AACA;AACA;AACC,UAACC,gBAAD,EAAsB;AACrB,MAAIA,gBAAJ,EAAsB;AACrB,QAAIO,qBAAqB,GAAG,EAA5B;;AACA,+BAAQP,gBAAR,EAA0B,UAACQ,aAAD,EAAgBnG,QAAhB,EAA6B;AACtDkG,MAAAA,qBAAqB,CAAClG,QAAD,CAArB,GAAkCmG,aAAlC;AACA,KAFD;;AAGA,WAAO,CAAClU,6BAAUiU,qBAAV,CAAD,GAAoCA,qBAApC,GAA4D,IAAnE;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAjB4D,CAA9D;AAoBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAME,kCAAkC,GAAGrP,uBAAc,CACxD,CAACkP,uCAAD,CADwD;AAGxD;AACD;AACA;AACA;AACC,UAACN,gBAAD,EAAsB;AACrB,MAAIA,gBAAJ,EAAsB;AACrB,QAAMU,0BAA0B,GAAG,EAAnC;;AACA,uCAA2B/S,MAAM,CAACC,OAAP,CAAeoS,gBAAf,CAA3B,qCAA6D;AAAA;AAAA,UAAjDtS,GAAiD;AAAA,UAA5CS,KAA4C;;AAC5DuS,MAAAA,0BAA0B,CAAChT,GAAD,CAA1B,GAAkCS,KAAK,CAACsE,GAAN,CAAU,UAAAkO,CAAC;AAAA,eAAIA,CAAC,GAAGA,CAAC,CAACf,oBAAL,GAA4B,IAAjC;AAAA,OAAX,CAAlC;AACA;;AACD,WAAOc,0BAAP;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAjBuD,CAAzD;AAoBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAME,iCAAiC,GAAGxP,uBAAc,CACvD,CACCkP,uCADD,EAEC,UAACrT,KAAD,EAAQ+O,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD;AAGC,UAAC/O,KAAD,EAAQoN,QAAR;AAAA,SAAqBA,QAArB;AAAA,CAHD,CADuD;AAOvD;AACD;AACA;AACA;AACC,UAAC2F,gBAAD,EAAmB3F,QAAnB,EAAgC;AAC/B,MAAI2F,gBAAJ,EAAsB;AACrB,WAAOA,gBAAgB,CAAC3F,QAAD,CAAhB,IAA8B,IAArC;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAjBsD,CAAxD;AAoBA,uBAAe;AACdpJ,EAAAA,WAAW,EAAXA,aADc;AAEdkC,EAAAA,QAAQ,EAARA,UAFc;AAGdK,EAAAA,SAAS,EAATA,WAHc;AAId6L,EAAAA,UAAU,EAAVA,YAJc;AAKdG,EAAAA,eAAe,EAAfA,iBALc;AAMdC,EAAAA,0CAA0C,EAA1CA,4CANc;AAOdK,EAAAA,wCAAwC,EAAxCA,wCAPc;AAUd;AACAI,EAAAA,yBAAyB,EAAzBA,yBAXc;AAYdO,EAAAA,kCAAkC,EAAlCA,kCAZc;AAadH,EAAAA,uCAAuC,EAAEP,gCAb3B;AAcdI,EAAAA,yCAAyC,EAAzCA,yCAdc;AAedS,EAAAA,iCAAiC,EAAjCA,iCAfc;AAgBdb,EAAAA,gCAAgC,EAAhCA;AAhBc,CAAf;;ACxQA,IAAM9O,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAAC4T,WAAjB;AAAA,CAApB;;AAEA,IAAMvP,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AAEA,kBAAe;AACdK,EAAAA,cAAc,EAAdA,gBADc;AAEd6B,EAAAA,QAAQ,EAARA,UAFc;AAGdlC,EAAAA,WAAW,EAAXA;AAHc,CAAf;;ACGA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAACsR,kBAAjB;AAAA,CAApB;;AACA,IAAMjN,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AAEA,IAAM6P,mCAAmC,GAAGlV,wCAAoB,CAC/D,CACC0F,gBADD,EAECyP,gBAAgB,CAACtB,0CAFlB,EAGCuB,aAAa,CAACvB,0CAHf,EAICwB,WAAW,CAAC3P,cAJb,CAD+D,EAO/D,UAAC4P,WAAD,EAAcC,+CAAd,EAA+DC,4CAA/D,EAA8GP,WAA9G,EAA8H;AAC7H,MAAIQ,+BAA+B,GAAG,EAAtC;;AACA,MAAID,4CAAJ,EAAkD;AACjDC,IAAAA,+BAA+B,qCAAOA,+BAAP,GAA2CD,4CAA3C,CAA/B;AACA;;AAED,MAAID,+CAAJ,EAAqD;AACpDE,IAAAA,+BAA+B,qCAAOA,+BAAP,GAA2CF,+CAA3C,CAA/B;AACA;;AAED,MAAIE,+BAA+B,IAAI,CAAC/U,6BAAU4U,WAAV,CAAxC,EAAgE;AAC/D,QAAII,4BAA4B,GAAG,EAAnC;;AACA,+BAAQD,+BAAR,EAAyC,UAACE,2BAAD,EAA8BlH,QAA9B,EAA2C;AACnFiH,MAAAA,4BAA4B,CAACjH,QAAD,CAA5B,GAAyC,EAAzC;;AACA,mCAAUkH,2BAAV,EAAuC,UAACC,yBAAD,EAA+B;AACrE,YAAIN,WAAW,CAACM,yBAAyB,CAAC5B,oBAA3B,CAAf,EAAiE;AAChE,cAAI6B,eAAe,sBAAOP,WAAW,CAACM,yBAAyB,CAAC5B,oBAA3B,CAAlB,CAAnB;;AAEA,cAAMvR,IAAI,GAAGwS,WAAW,CAACW,yBAAyB,CAAC5B,oBAA3B,CAAxB;;AACA,cAAIvR,IAAI,IAAIA,IAAI,CAACwS,WAAb,IAA4BxS,IAAI,CAACwS,WAAL,CAAiBrF,QAAjD,EAA2D;AAC1DiG,YAAAA,eAAe,CAACpT,IAAhB,CAAqBmN,QAArB,GAAgCnN,IAAI,CAACwS,WAAL,CAAiBrF,QAAjD;AACA;;AAED8F,UAAAA,4BAA4B,CAACjH,QAAD,CAA5B,CAAuC7M,IAAvC,CAA4C;AAC3CmN,YAAAA,UAAU,EAAE8G,eAD+B;AAE3C7G,YAAAA,aAAa,EAAE4G,yBAAyB,CAAC5G;AAFE,WAA5C;AAIA;AACD,OAdD;AAeA,KAjBD;;AAmBA,WAAO0G,4BAAP;AACA,GAtBD,MAsBO;AACN,WAAO,IAAP;AACA;AACD,CA1C8D,CAApB,CA4C3C,UAACrU,KAAD,EAAQ+O,MAAR;AAAA,SAAmB7P,IAAI,CAACC,SAAL,CAAe4P,MAAf,CAAnB;AAAA,CA5C2C,CAA5C;AAgDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM0F,4BAA4B,GAAGtQ,uBAAc,CAClD,CACCE,gBADD,EAECyP,gBAAgB,CAACN,kCAFlB,EAGCM,gBAAgB,CAACT,uCAHlB,CADkD;AAOlD;AACD;AACA;AACA;AACA;AACC,UAACY,WAAD,EAAcS,WAAd,EAA2B3B,gBAA3B,EAAgD;AAC/C,MAAI2B,WAAW,IAAIhU,MAAM,CAAC2F,IAAP,CAAY4N,WAAZ,EAAyBnU,MAA5C,EAAoD;AACnD,QAAI6U,cAAc,GAAG,EAArB;;AACA,+BAAQD,WAAR,EAAqB,UAACrO,IAAD,EAAO+G,QAAP,EAAoB;AACxC,UAAIwH,OAAO,GAAG,EAAd;AACAvO,MAAAA,IAAI,CAAChG,OAAL,CAAa,UAAAI,GAAG,EAAI;AACnB,YAAIA,GAAG,IAAIwT,WAAP,IAAsB,CAAC5U,6BAAU4U,WAAV,CAAvB,IAAiDA,WAAW,CAACxT,GAAD,CAA5D,IAAqE,CAACpB,6BAAU0T,gBAAV,CAAtE,IAAqGA,gBAAgB,CAAC3F,QAAD,CAAzH,EAAqI;AACpIwH,UAAAA,OAAO,CAACrU,IAAR,mCAAiB0T,WAAW,CAACxT,GAAD,CAA5B;AAAmCoU,YAAAA,mBAAmB,EAAE7V,0BAAO+T,gBAAgB,CAAC3F,QAAD,CAAvB,EAAmC,UAAAjF,CAAC;AAAA,qBAAIA,CAAC,CAACwK,oBAAF,KAA2BlS,GAA/B;AAAA,aAApC,KAA2E;AAAnI;AACA,SAFD,MAEO;AACNmU,UAAAA,OAAO,CAACrU,IAAR,CAAa,IAAb;AACA;AACD,OAND;AAOAoU,MAAAA,cAAc,CAACvH,QAAD,CAAd,GAA2BwH,OAA3B;AACA,KAVD;;AAWA,WAAOD,cAAP;AACA,GAdD,MAcO;AACN,WAAO,IAAP;AACA;AACD,CA9BiD,CAAnD;AAiCA;AACA;AACA;AACA;AACA;;AACA,IAAMpC,iBAAe,GAAGpO,uBAAc,CACrC,CACCE,gBADD,EAEC,UAACrE,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADqC,EAKrC,UAACyS,kBAAD,EAAqBzS,MAArB,EAAgC;AAC/B,MAAIyS,kBAAkB,IAAIA,kBAAkB,CAACxR,MAAnB,GAA4B,CAAlD,IAAuDjB,MAAvD,IAAiE,CAACQ,6BAAUR,MAAV,CAAtE,EAAyF;AACxF,WAAOoT,4BAASX,kBAAT,EAA6BzS,MAA7B,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAXoC,CAAtC;AAcA,yBAAe;AACdmF,EAAAA,WAAW,EAAXA,aADc;AAGdkC,EAAAA,QAAQ,EAARA,UAHc;AAIdK,EAAAA,SAAS,EAATA,WAJc;AAKdsN,EAAAA,mCAAmC,EAAnCA,mCALc;AAOd;AACAY,EAAAA,4BAA4B,EAA5BA,4BARc;AASdlC,EAAAA,eAAe,EAAfA,iBATc;AAUdhB,EAAAA,MAAM,EAAEuD;AAVM,CAAf;;ACxHA,IAAM9Q,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAAC+U,kBAAjB;AAAA,CAApB;;AAEA,IAAMzQ,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAM2B,YAAU,GAAG6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAAnB;AAEA,IAAMgR,sCAAsC,GAAGrW,wCAAoB,CAClE,CACC2F,QADD,EAEC,UAACtE,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADkE,EAKlE,UAACwT,SAAD,EAAYxT,MAAZ,EAAuB;AACtB,MAAIwT,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC;AACA,QAAMmV,aAAa,GAAGpW,MAAM,CAACkE,YAAP,UAA0B,CAAClE,MAAM,CAACkE,YAAR,CAAhD;;AACA,QAAMmS,uBAAuB,GAAGC,0BAAOtW,MAAP,EAAe,cAAf,CAAhC;;AACA,QAAIuW,oBAAoB,GAAGnD,4BAASI,SAAT,EAAoB;AAAC,cAAQ6C;AAAT,KAApB,CAA3B;;AACA,QAAIxC,iBAAiB,GAAGT,4BAASmD,oBAAT,EAA+B,UAAC9C,QAAD,EAAc;AACpE,UAAIA,QAAQ,CAAClR,IAAT,CAAc2B,YAAlB,EAAgC;AAC/B,eAAO,CAAC,CAACmP,8BAAW+C,aAAX,EAA0B3C,QAAQ,CAAClR,IAAT,CAAc2B,YAAxC,CAAT;AACA,OAFD,MAEO;AACN,eAAO,IAAP;AACA;AACD,KANuB,CAAxB;;AAQA,QAAI2P,iBAAiB,CAAC5S,MAAtB,EAA8B;AAC7B,aAAO4S,iBAAiB,CAAClN,GAAlB,CAAsB,UAAA8M,QAAQ,EAAI;AACxC,eAAO;AACN+C,UAAAA,sBAAsB,EAAE/C,QAAQ,CAAClR,IAAT,CAAciU,sBADhC;AAENtS,UAAAA,YAAY,EAAEuP,QAAQ,CAAClR,IAAT,CAAc2B,YAFtB;AAGNJ,UAAAA,SAAS,EAAE2P,QAAQ,CAAClR,IAAT,CAAcuB,SAHnB;AAINgL,UAAAA,aAAa,EAAE2E,QAAQ,CAAClR,IAAT,CAAcuM;AAJvB,SAAP;AAMA,OAPM,CAAP;AAQA,KATD,MASO;AACN,aAAO,IAAP;AACA;AACD,GAzBD,MAyBO;AACN,WAAO,IAAP;AACA;AACD,CAlCiE,CAApB,CAoC9C,UAAC3N,KAAD,EAAQnB,MAAR,EAAmB;AAAC,SAAOK,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAP;AAA8B,CApCJ,CAA/C;AAuCA,IAAMyW,uDAAuD,GAAG3W,wCAAoB,CACnF,CACC2F,QADD,EAEC,UAACtE,KAAD,EAAQuV,gBAAR;AAAA,SAA6BA,gBAA7B;AAAA,CAFD,EAGC,UAACvV,KAAD,EAAQuV,gBAAR,EAA0BhI,WAA1B;AAAA,SAA0CA,WAA1C;AAAA,CAHD,CADmF,EAMnF,UAAC8E,SAAD,EAAYkD,gBAAZ,EAA8BhI,WAA9B,EAA8C;AAC7C,MAAI8E,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,QAAI2S,yBAAyB,GAAG,EAAhC;;AAEA,iCAAU8C,gBAAV,EAA4B,UAAC3I,KAAD,EAAW;AACtC,UAAIO,UAAU,GAAGnO,0BAAOuO,WAAP,EAAoB;AAAC9M,QAAAA,GAAG,EAAEmM,KAAK,CAACnM;AAAZ,OAApB,CAAjB;;AACA,UAAIwU,aAAa,GAAG9H,UAAU,CAAC8H,aAA/B;;AACA,UAAIA,aAAJ,EAAmB;AAElB;AACA,YAAIG,oBAAoB,GAAGnD,4BAASI,SAAT,EAAoB;AAAC,kBAAQzF,KAAK,CAACY;AAAf,SAApB,CAA3B;;AACA,YAAIkF,iBAAiB,GAAGT,4BAASmD,oBAAT,EAA+B,UAAC9C,QAAD,EAAc;AACpE,cAAIA,QAAQ,CAAClR,IAAT,CAAc2B,YAAlB,EAAgC;AAC/B,mBAAO,CAAC,CAACmP,8BAAW+C,aAAX,EAA0B3C,QAAQ,CAAClR,IAAT,CAAc2B,YAAxC,CAAT;AACA,WAFD,MAEO;AACN,mBAAO,IAAP;AACA;AACD,SANuB,CAAxB;;AAQA,YAAI2P,iBAAiB,CAAC5S,MAAtB,EAA8B;AAC7B2S,UAAAA,yBAAyB,CAAC7F,KAAK,CAACnM,GAAP,CAAzB,GAAuCiS,iBAAiB,CAAClN,GAAlB,CAAsB,UAAA8M,QAAQ,EAAI;AACxE,mBAAO;AACN+C,cAAAA,sBAAsB,EAAE/C,QAAQ,CAAClR,IAAT,CAAciU,sBADhC;AAENtS,cAAAA,YAAY,EAAEuP,QAAQ,CAAClR,IAAT,CAAc2B,YAFtB;AAGN4K,cAAAA,aAAa,EAAE2E,QAAQ,CAAClR,IAAT,CAAcuM;AAHvB,aAAP;AAKA,WANsC,CAAvC;AAOA;AAED,OAtBD,MAsBO;AACN,eAAO,IAAP;AACA;AACD,KA5BD;;AA6BA,WAAO,CAACtO,6BAAUoT,yBAAV,CAAD,GAAwCA,yBAAxC,GAAoE,IAA3E;AAEA,GAlCD,MAkCO;AACN,WAAO,IAAP;AACA;AACD,CA5CkF,CAApB,CA8C/D,UAACzS,KAAD,EAAQuV,gBAAR,EAA0BhI,WAA1B,EAAuCiI,mBAAvC;AAAA,SAA+DA,mBAA/D;AAAA,CA9C+D,CAAhE;;AAmDA,IAAMpD,YAAU,GAAGjO,uBAAc,CAChC,CAACG,QAAD,CADgC,EAEhC,UAAC+N,SAAD,EAAe;AACd,MAAIA,SAAJ,EAAe;AACd,WAAOnH,yBAAMmH,SAAN,EAAiB,UAAAC,QAAQ;AAAA,aAAIA,QAAQ,CAAClR,IAAb;AAAA,KAAzB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR+B,CAAjC;AAWA;AACA;AACA;AACA;;AACA,IAAMqU,WAAW,GAAGtR,uBAAc,CACjC,CACCiO,YADD,EAEC,UAACpS,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADiC,EAKjC,UAACwT,SAAD,EAAYxT,MAAZ,EAAuB;AACtB,MAAIwT,SAAS,IAAIA,SAAS,CAACvS,MAAV,GAAmB,CAAhC,IAAqCjB,MAArC,IAA+C,CAACQ,6BAAUR,MAAV,CAApD,EAAuE;AACtE,WAAOoT,4BAASI,SAAT,EAAoBxT,MAApB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAXgC,CAAlC;AAcA,IAAM6W,oBAAoB,GAAG/W,wCAAoB,CAChD,CACCyT,YADD,EAEC,UAACpS,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADgD,EAKhD,UAACwT,SAAD,EAAYxT,MAAZ,EAAuB;AACtB,MAAIwT,SAAS,IAAIA,SAAS,CAACvS,MAAV,GAAmB,CAAhC,IAAqCjB,MAArC,IAA+C,CAACQ,6BAAUR,MAAV,CAApD,EAAuE;AACtE,WAAOoT,4BAASI,SAAT,EAAoB,UAACC,QAAD,EAAc;AACxC,UAAIqD,UAAU,GAAG,IAAjB;;AACA,iCAAQ9W,MAAR,EAAgB,UAACqC,KAAD,EAAQT,GAAR,EAAgB;AAC/B,YAAI6R,QAAQ,CAACxR,cAAT,CAAwBL,GAAxB,CAAJ,EAAiC;AAChC,cAAIa,8BAAWJ,KAAX,KAAqBA,KAAK,MAA1B,IAAiC0U,6BAAU1U,KAAK,MAAf,CAArC,EAAyD;AACxD,gBAAI,CAACgR,8BAAWhR,KAAK,MAAhB,EAAqBoR,QAAQ,CAAC7R,GAAD,CAA7B,CAAL,EAAyC;AACxCkV,cAAAA,UAAU,GAAG,KAAb;AACA;AACD,WAJD,MAIO,IAAIrD,QAAQ,CAAC7R,GAAD,CAAR,KAAkBS,KAAtB,EAA4B;AAClCyU,YAAAA,UAAU,GAAG,KAAb;AACA;AACD;AACD,OAVD;;AAWA,aAAOA,UAAP;AACA,KAdM,CAAP;AAeA,GAhBD,MAgBO;AACN,WAAO,IAAP;AACA;AACD,CAzB+C,CAApB,CA0B3B,UAAC3V,KAAD,EAAQnB,MAAR,EAAgBqR,QAAhB,EAA6B;AAC9B,MAAIA,QAAJ,EAAc;AACb,WAAOhR,IAAI,CAACC,SAAL,CAAeN,MAAf,IAAyB,GAAzB,GAA+BK,IAAI,CAACC,SAAL,CAAe+Q,QAAf,CAAtC;AACA,GAFD,MAEO;AACN,WAAOhR,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAP;AACA;AACD,CAhC4B,CAA7B;AAkCA,IAAMgX,mCAAmC,GAAGlX,wCAAoB,CAC/D,CACC+W,oBADD,CAD+D,EAI/D,UAAChD,iBAAD,EAAuB;AACtB,MAAIA,iBAAJ,EAAuB;AACtB,WAAOA,iBAAiB,CAAClN,GAAlB,CAAsB,UAAA8M,QAAQ,EAAI;AACxC,aAAO;AACN+C,QAAAA,sBAAsB,EAAE/C,QAAQ,CAAC+C,sBAD3B;AAEN1H,QAAAA,aAAa,EAAE2E,QAAQ,CAAC3E;AAFlB,OAAP;AAIA,KALM,CAAP;AAMA,GAPD,MAOO;AACN,WAAO,IAAP;AACA;AACD,CAf8D,CAApB,CAgB1C,UAAC3N,KAAD,EAAQnB,MAAR,EAAgBqR,QAAhB,EAA6B;AAC9B,mBAAUhR,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAV,cAAoCK,IAAI,CAACC,SAAL,CAAe+Q,QAAf,CAApC;AACA,CAlB2C,CAA5C;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM4F,wBAAwB,GAAG3R,uBAAc,CAC9C,CAACsR,WAAD,CAD8C,EAE9C,UAAC/C,iBAAD,EAAuB;AACtB,MAAGA,iBAAiB,IAAI,CAACrT,6BAAUqT,iBAAV,CAAzB,EAAuD;AACtD;AACA,WAAOA,iBAAiB,CAAC,CAAD,CAAjB,CAAqBd,aAA5B;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA,GANqB;AAQtB;AACA;AACA;AACA;;AACA,CAd6C,CAA/C;AAkBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMkB,kCAAgC,GAAG3O,uBAAc,CACtD,CACCiO,YADD,EAEC,UAACpS,KAAD,EAAQ+O,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CADsD;AAKtD;AACD;AACA;AACA;AACA;AACC,UAACsD,SAAD,EAAYtD,MAAZ,EAAuB;AACtB,MAAIA,MAAM,IAAI,CAAC1P,6BAAU0P,MAAV,CAAf,EAAkC;AACjC,QAAIgE,gBAAgB,GAAG,EAAvB;AACAhE,IAAAA,MAAM,CAAC1O,OAAP,CAAe,UAAAuM,KAAK,EAAI;AACvB,UAAIA,KAAK,CAACxL,IAAN,IAAcwL,KAAK,CAACxL,IAAN,CAAWX,GAA7B,EAAkC;AACjC,YAAI4R,SAAJ,EAAe;AACd,cAAIK,iBAAiB,GAAGT,4BAASI,SAAT,EAAoBzF,KAAK,CAAC/N,MAA1B,CAAxB;;AACA,cAAI,CAACQ,6BAAUqT,iBAAV,CAAL,EAAmC;AAClCK,YAAAA,gBAAgB,CAACnG,KAAK,CAACxL,IAAN,CAAWX,GAAZ,CAAhB,GAAmCiS,iBAAnC;AACA,WAFD,MAEO;AACNK,YAAAA,gBAAgB,CAACnG,KAAK,CAACxL,IAAN,CAAWX,GAAZ,CAAhB,GAAmC,CAAC,IAAD,CAAnC;AACA;AACD,SAPD,MAOO;AACNsS,UAAAA,gBAAgB,CAACnG,KAAK,CAACxL,IAAN,CAAWX,GAAZ,CAAhB,GAAmC,CAAC,IAAD,CAAnC;AACA;AACD;AACD,KAbD;AAcA,WAAO,CAACpB,6BAAU0T,gBAAV,CAAD,GAA+BA,gBAA/B,GAAkD,IAAzD;AACA,GAjBD,MAiBO;AACN,WAAO,IAAP;AACA;AACD,CA/BqD,CAAvD;AAmCA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMM,yCAAuC,GAAGlP,uBAAc,CAC7D,CAAC2O,kCAAD,CAD6D;AAG7D;AACD;AACA;AACA;AACC,UAACC,gBAAD,EAAsB;AACrB,MAAIA,gBAAJ,EAAsB;AACrB,QAAIO,qBAAqB,GAAG,EAA5B;;AACA,+BAAQP,gBAAR,EAA0B,UAACQ,aAAD,EAAgBnG,QAAhB,EAA6B;AACtDkG,MAAAA,qBAAqB,CAAClG,QAAD,CAArB,GAAkCmG,aAAlC;AACA,KAFD;;AAGA,WAAO,CAAClU,6BAAUiU,qBAAV,CAAD,GAAoCA,qBAApC,GAA4D,IAAnE;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAjB4D,CAA9D;AAqBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAME,oCAAkC,GAAGrP,uBAAc,CACxD,CAACkP,yCAAD,CADwD;AAGxD;AACD;AACA;AACA;AACC,UAACN,gBAAD,EAAsB;AACrB,MAAIA,gBAAJ,EAAsB;AACrB,QAAMU,0BAA0B,GAAG,EAAnC;;AACA,uCAA2B/S,MAAM,CAACC,OAAP,CAAeoS,gBAAf,CAA3B,qCAA6D;AAAA;AAAA,UAAjDtS,GAAiD;AAAA,UAA5CS,KAA4C;;AAC5DuS,MAAAA,0BAA0B,CAAChT,GAAD,CAA1B,GAAkCS,KAAK,CAACsE,GAAN,CAAU,UAAAkO,CAAC;AAAA,eAAIA,CAAC,GAAGA,CAAC,CAAC2B,sBAAL,GAA8B,IAAnC;AAAA,OAAX,CAAlC;AACA;;AACD,WAAO5B,0BAAP;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAjBuD,CAAzD;AAoBA,gBAAe;AACduB,EAAAA,sCAAsC,EAAtCA,sCADc;AAEdM,EAAAA,uDAAuD,EAAvDA,uDAFc;AAGd3P,EAAAA,UAAU,EAAVA,YAHc;AAMdyM,EAAAA,UAAU,EAAVA,YANc;AAOd0D,EAAAA,wBAAwB,EAAxBA,wBAPc;AAQdL,EAAAA,WAAW,EAAXA,WARc;AASdC,EAAAA,oBAAoB,EAApBA,oBATc;AAUd5C,EAAAA,gCAAgC,EAAhCA,kCAVc;AAWdO,EAAAA,uCAAuC,EAAvCA,yCAXc;AAYdG,EAAAA,kCAAkC,EAAlCA,oCAZc;AAadqC,EAAAA,mCAAmC,EAAnCA,mCAbc;AAed7R,EAAAA,WAAW,EAAXA;AAfc,CAAf;;AC/SA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAAC+V,aAAjB;AAAA,CAApB;;AACA,IAAM1R,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAM0B,uBAAqB,GAAG8G,eAAM,CAAC9G,qBAAP,CAA6B1B,aAA7B,CAA9B;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMyR,aAAW,GAAGtR,uBAAc,CACjC,CACCE,gBADD,EAEC2R,SAAkB,CAACF,wBAFpB,CADiC;AAMjC;AACD;AACA;AACA;AACA;AACC,UAAC7B,WAAD,EAAcrC,aAAd,EAAgC;AAC/B,MAAIA,aAAa,IAAIqC,WAAjB,IAAgC,CAAC5U,6BAAU4U,WAAV,CAAjC,IAA2DA,WAAW,CAACrC,aAAD,CAA1E,EAA2F;AAC1F,WAAOqC,WAAW,CAACrC,aAAD,CAAlB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAjBgC,CAAlC;AAoBA,IAAMqE,uBAAuB,GAAGtX,wCAAoB,CACnD,CACC0F,gBADD,EAEC2R,SAAkB,CAACH,mCAFpB,CADmD,EAKnD,UAACK,cAAD,EAAiB9C,QAAjB,EAA8B;AAC7B,MAAI8C,cAAc,IAAI,CAAC7W,6BAAU6W,cAAV,CAAnB,IAAgD9C,QAApD,EAA8D;AAE7D,QAAIhS,IAAI,GAAG,EAAX;;AACA,6BAAMgS,QAAN,EAAgB,UAAA+C,cAAc,EAAI;AACjC,UAAIhH,MAAM,GAAG+G,cAAc,CAACC,cAAc,CAACd,sBAAhB,CAA3B;AACA,UAAIe,SAAS,GAAGD,cAAc,CAACxI,aAA/B;AACA,UAAI0I,UAAU,GAAGF,cAAc,CAACxI,aAAhC;;AAEA,UAAIwB,MAAM,IAAIA,MAAM,CAAC4G,aAAjB,IAAkC5G,MAAM,CAAC4G,aAAP,CAAqBxH,QAA3D,EAAqE;AACpE,YAAIA,QAAQ,GAAGY,MAAM,CAAC4G,aAAP,CAAqBxH,QAApC;;AACA,iCAAMA,QAAN,EAAgB,UAAC+B,OAAD,EAAa;AAC5B,cAAI7P,GAAG,GAAG6P,OAAO,CAACC,UAAR,CAAmB6F,SAAnB,CAAV;;AAD4B,oCAEW9F,OAAO,CAACC,UAFnB;AAAA,cAEV+F,OAFU,uBAEtBF,SAFsB;AAAA,cAEE1E,KAFF,kDAEtB0E,SAFsB;;AAI5B,cAAI7R,MAAM,GAAG,EAAb;AACA,cAAIgS,WAAW,GAAGnV,IAAI,CAACX,GAAD,CAAtB;;AAEA,mCAAMiR,KAAN,EAAa,UAACxQ,KAAD,EAAQT,GAAR,EAAgB;AAC5B,gBAAI8V,WAAJ,EAAiB;AAChBA,cAAAA,WAAW,CAACnV,IAAZ,CAAiBmD,MAAjB,CAAwBhE,IAAxB,CAA6B;AAACE,gBAAAA,GAAG,EAAHA,GAAD;AAAMS,gBAAAA,KAAK,EAALA;AAAN,eAA7B;AACA,aAFD,MAEO;AACNqD,cAAAA,MAAM,CAAChE,IAAP,CAAY;AAACE,gBAAAA,GAAG,EAAHA,GAAD;AAAMS,gBAAAA,KAAK,EAALA;AAAN,eAAZ;AACA;AACD,WAND;;AAQA,cAAI,CAACqV,WAAL,EAAkB;AACjBnV,YAAAA,IAAI,CAACX,GAAD,CAAJ,GAAY;AACXA,cAAAA,GAAG,EAAHA,GADW;AAEXW,cAAAA,IAAI,EAAE;AACLiO,gBAAAA,IAAI,EAAEiB,OAAO,CAACC,UAAR,CAAmB8F,UAAnB,CADD;AAEL9R,gBAAAA,MAAM,EAANA;AAFK;AAFK,aAAZ;AAOA;AACD,SAxBD;AAyBA;AACD,KAjCD;;AAkCA,WAAOiS,4BAASpV,IAAT,CAAP;AACA,GAtCD,MAsCO;AACN,WAAO,IAAP;AACA;AACD,CA/CkD,CAApB,CAiD/B,UAACpB,KAAD,EAAQ8F,YAAR,EAAyB;AACzB,mBAAU5G,IAAI,CAACC,SAAL,CAAe2G,YAAf,CAAV;AACA,CAnD+B,CAAhC;AAsDA,IAAM2Q,aAAa,GAAG9X,wCAAoB,CACzC,CACC0F,gBADD,EAEC2R,SAAkB,CAACH,mCAFpB,CADyC,EAKzC,UAACK,cAAD,EAAiB9C,QAAjB,EAA8B;AAC7B,MAAI8C,cAAc,IAAI,CAAC7W,6BAAU6W,cAAV,CAAnB,IAAgD9C,QAApD,EAA8D;AAC7D,QAAIhS,IAAI,GAAG,EAAX;;AACA,QAAIgS,QAAQ,CAACtT,MAAT,KAAoB,CAAxB,EAA2B;AAC1B,UAAIqW,cAAc,GAAG/C,QAAQ,CAAC,CAAD,CAA7B;AACA,UAAIjE,MAAM,GAAG+G,cAAc,CAACC,cAAc,CAACd,sBAAhB,CAA3B;AACA,UAAIe,SAAS,GAAGD,cAAc,CAACxI,aAA/B;;AAEA,UAAIwB,MAAM,IAAIA,MAAM,CAAC4G,aAAjB,IAAkC5G,MAAM,CAAC4G,aAAP,CAAqBxH,QAA3D,EAAqE;AACpE,YAAIA,QAAQ,GAAGY,MAAM,CAAC4G,aAAP,CAAqBxH,QAApC;;AACA,iCAAMA,QAAN,EAAgB,UAAC+B,OAAD,EAAa;AAC5B,cAAI7P,GAAG,GAAG6P,OAAO,CAACC,UAAR,CAAmB6F,SAAnB,CAAV;;AAD4B,qCAEW9F,OAAO,CAACC,UAFnB;AAAA,cAEV+F,OAFU,wBAEtBF,SAFsB;AAAA,cAEE1E,KAFF,mDAEtB0E,SAFsB;;AAI5BhV,UAAAA,IAAI,CAACX,GAAD,CAAJ,GAAY;AACXA,YAAAA,GAAG,EAAHA,GADW;AAEXW,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAEmH,4BAAS9E,KAAT,EAAgB,CAAhB;AADD;AAFK,WAAZ;AAMA,SAVD;AAWA;;AAED,aAAO8E,4BAASpV,IAAT,CAAP;AACA,KArBD,MAqBO;AACN,aAAO,IAAP;AACA;AACD,GA1BD,MA0BO;AACN,WAAO,IAAP;AACA;AACD,CAnCwC,CAApB,CAqCrB,UAACpB,KAAD,EAAQnB,MAAR,EAAgBqR,QAAhB,EAA6B;AAC5B,mBAAUhR,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAV,cAAoCK,IAAI,CAACC,SAAL,CAAe+Q,QAAf,CAApC;AACA,CAvCoB,CAAtB;AA2CA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMuE,8BAA4B,GAAGtQ,uBAAc,CAClD,CACCE,gBADD,EAEC2R,SAAkB,CAACxC,kCAFpB,EAGCwC,SAAkB,CAAC3C,uCAHpB,CADkD;AAOlD;AACD;AACA;AACA;AACA;AACC,UAACY,WAAD,EAAcS,WAAd,EAA2B3B,gBAA3B,EAAgD;AAC/C,MAAI2B,WAAJ,EAAiB;AAChB,QAAIC,cAAc,GAAG,EAArB;;AACA,+BAAQD,WAAR,EAAqB,UAACrO,IAAD,EAAO+G,QAAP,EAAoB;AACxC,UAAIwH,OAAO,GAAG,EAAd;;AACA,+BAAMvO,IAAN,EAAW,UAAA5F,GAAG,EAAI;AACjB,YAAIA,GAAG,IAAIwT,WAAP,IAAsB,CAAC5U,6BAAU4U,WAAV,CAAvB,IAAiDA,WAAW,CAACxT,GAAD,CAA5D,IAAqE,CAACpB,6BAAU0T,gBAAV,CAAtE,IAAqGA,gBAAgB,CAAC3F,QAAD,CAAzH,EAAqI;AACpIwH,UAAAA,OAAO,CAACrU,IAAR,mCAAiB0T,WAAW,CAACxT,GAAD,CAA5B;AAAmCiW,YAAAA,qBAAqB,EAAE1X,0BAAO+T,gBAAgB,CAAC3F,QAAD,CAAvB,EAAmC,UAAAjF,CAAC;AAAA,qBAAIA,CAAC,CAACkN,sBAAF,KAA6B5U,GAAjC;AAAA,aAApC,KAA6E;AAAvI;AACA,SAFD,MAEO;AACNmU,UAAAA,OAAO,CAACrU,IAAR,CAAa,IAAb;AACA;AACD,OAND;;AAOAoU,MAAAA,cAAc,CAACvH,QAAD,CAAd,GAA2BwH,OAA3B;AACA,KAVD;;AAWA,WAAOD,cAAP;AACA,GAdD,MAcO;AACN,WAAO,IAAP;AACA;AACD,CA9BiD,CAAnD;AAiCA,kBAAe;AACd3Q,EAAAA,WAAW,EAAXA,aADc;AAEdK,EAAAA,cAAc,EAAdA,gBAFc;AAGd6B,EAAAA,QAAQ,EAARA,UAHc;AAIduP,EAAAA,WAAW,EAAXA,aAJc;AAKd/P,EAAAA,qBAAqB,EAArBA,uBALc;AAMd+O,EAAAA,4BAA4B,EAA5BA,8BANc;AAQdwB,EAAAA,uBAAuB,EAAvBA,uBARc;AASdQ,EAAAA,aAAa,EAAbA;AATc,CAAf;;AC9KA,IAAMzS,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAAC6N,oBAAjB;AAAA,CAApB;;AACA,IAAMxJ,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAM0B,uBAAqB,GAAG8G,eAAM,CAAC9G,qBAAP,CAA6B1B,aAA7B,CAA9B;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA,IAAM2S,sBAAsB,GAAGhY,wCAAoB,CAClD,CACC0F,gBADD,EAEC2R,SAAkB,CAAChB,sCAFpB,EAGC4B,WAAa,CAACvS,cAHf,EAIC,UAACrE,KAAD,EAAQnB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAJD,CADkD,EAOlD,UAACoV,WAAD,EAAc4C,wBAAd,EAAwCd,aAAxC,EAAuDlX,MAAvD,EAAkE;AACjE,MAAI,CAACQ,6BAAUwX,wBAAV,CAAD,IAAwCd,aAAxC,IAAyD9B,WAA7D,EAA0E;AACzE,QAAI6C,gBAAgB,GAAG,EAAvB;;AACA,iCAAUD,wBAAV,EAAoC,UAAAE,uBAAuB,EAAI;AAC9D,UAAMtW,GAAG,GAAGsW,uBAAuB,CAAC1B,sBAApC;;AACA,UAAIb,eAAe,sBACfP,WAAW,CAACxT,GAAD,CADI,CAAnB;;AAIA,UAAMW,IAAI,GAAG2U,aAAa,CAACtV,GAAD,CAA1B;;AACA,UAAIW,IAAI,IAAIA,IAAI,CAAC2U,aAAb,IAA8B3U,IAAI,CAAC2U,aAAL,CAAmBxH,QAArD,EAA+D;AAC9DiG,QAAAA,eAAe,CAACpT,IAAhB,CAAqBmN,QAArB,GAAgCnN,IAAI,CAAC2U,aAAL,CAAmBxH,QAAnB,CAA4B/I,GAA5B,CAAgC,UAAA8K,OAAO,EAAI;AAAA;;AAC1E,iBAAO;AACNC,YAAAA,UAAU,kDACRwG,uBAAuB,CAAChU,YADhB,EAC+BuN,OAAO,CAACC,UAAR,CAAmBiE,eAAe,CAACpT,IAAhB,CAAqB4V,UAAxC,CAD/B,gCAERD,uBAAuB,CAACpJ,aAFhB,EAEgC2C,OAAO,CAACC,UAAR,CAAmBwG,uBAAuB,CAACpJ,aAA3C,CAFhC;AADJ,WAAP;AAMA,SAP+B,CAAhC;AAQA;;AAEDmJ,MAAAA,gBAAgB,CAACvW,IAAjB,CAAsB;AACrBmN,QAAAA,UAAU,EAAE8G,eADS;AAErBzR,QAAAA,YAAY,EAAEgU,uBAAuB,CAAChU,YAFjB;AAGrBJ,QAAAA,SAAS,EAAEoU,uBAAuB,CAACpU,SAHd;AAIrBgL,QAAAA,aAAa,EAAEoJ,uBAAuB,CAACpJ;AAJlB,OAAtB;AAMA,KAxBD;;AA0BA,WAAOmJ,gBAAgB,CAAChX,MAAjB,GAA0BgX,gBAA1B,GAA6C,IAApD;AAEA,GA9BD,MA8BO;AACN,WAAO,IAAP;AACA;AACD,CAzCiD,CAApB,CA0C7B,UAAC9W,KAAD,EAAQnB,MAAR;AAAA,SAAmBK,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAnB;AAAA,CA1C6B,CAA/B;AA4CA,IAAMoY,uCAAuC,GAAGtY,wCAAoB,CACnE,CACCqX,SAAkB,CAACV,uDADpB,EAECjR,gBAFD,EAGCuS,WAAa,CAACvS,cAHf,EAIC,UAACrE,KAAD,EAAQuV,gBAAR,EAA0BhI,WAA1B;AAAA,SAA0CA,WAA1C;AAAA,CAJD,CADmE,EAOnE,UAAC2J,yBAAD,EAA4BjD,WAA5B,EAAyC8B,aAAzC,EAAwDxI,WAAxD,EAAwE;AACvE,MAAI2J,yBAAyB,IAAI,CAAC7X,6BAAU4U,WAAV,CAAlC,EAA0D;AACzD,QAAII,4BAA4B,GAAG,EAAnC;;AACA,+BAAQ6C,yBAAR,EAAmC,UAAC5C,2BAAD,EAA8BlH,QAA9B,EAA2C;AAC7EiH,MAAAA,4BAA4B,CAACjH,QAAD,CAA5B,GAAyC,EAAzC;;AACA,mCAAUkH,2BAAV,EAAuC,UAACC,yBAAD,EAA+B;AACrE,YAAIN,WAAW,CAACM,yBAAyB,CAACc,sBAA3B,CAAf,EAAmE;AAClE,cAAIb,eAAe,sBAAOP,WAAW,CAACM,yBAAyB,CAACc,sBAA3B,CAAlB,CAAnB;;AACA,cAAMjU,IAAI,GAAG2U,aAAa,CAACxB,yBAAyB,CAACc,sBAA3B,CAA1B;;AACA,cAAIjU,IAAI,IAAIA,IAAI,CAAC2U,aAAb,IAA8B3U,IAAI,CAAC2U,aAAL,CAAmBxH,QAArD,EAA+D;AAC9DiG,YAAAA,eAAe,CAACpT,IAAhB,CAAqBmN,QAArB,GAAgCnN,IAAI,CAAC2U,aAAL,CAAmBxH,QAAnB,CAA4B/I,GAA5B,CAAgC,UAAA8K,OAAO,EAAI;AAAA;;AAC1E,qBAAO;AACNC,gBAAAA,UAAU,oDACRgE,yBAAyB,CAACxR,YADlB,EACiCuN,OAAO,CAACC,UAAR,CAAmBiE,eAAe,CAACpT,IAAhB,CAAqB4V,UAAxC,CADjC,iCAERzC,yBAAyB,CAAC5G,aAFlB,EAEkC2C,OAAO,CAACC,UAAR,CAAmBgE,yBAAyB,CAAC5G,aAA7C,CAFlC;AADJ,eAAP;AAMA,aAP+B,CAAhC;AAQA;;AAED0G,UAAAA,4BAA4B,CAACjH,QAAD,CAA5B,CAAuC7M,IAAvC,CAA4C;AAC3CmN,YAAAA,UAAU,EAAE8G,eAD+B;AAE3CzR,YAAAA,YAAY,EAAEwR,yBAAyB,CAACxR,YAFG;AAG3C4K,YAAAA,aAAa,EAAE4G,yBAAyB,CAAC5G;AAHE,WAA5C;AAKA;AACD,OArBD;AAsBA,KAxBD;;AA0BA,WAAO0G,4BAAP;AACA,GA7BD,MA6BO;AACN,WAAO,IAAP;AACA;AACD,CAxCkE,CAApB,CA0C/C,UAACrU,KAAD,EAAQuV,gBAAR,EAA0BhI,WAA1B,EAAuCiI,mBAAvC;AAAA,SAA+DA,mBAA/D;AAAA,CA1C+C,CAAhD;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,aAAW,GAAGtR,uBAAc,CACjC,CACCE,gBADD,EAEC2R,SAAkB,CAACF,wBAFpB,CADiC;AAMjC;AACD;AACA;AACA;AACA;AACC,UAAC7B,WAAD,EAAcrC,aAAd,EAAgC;AAC/B,MAAIA,aAAa,IAAIqC,WAAjB,IAAgC,CAAC5U,6BAAU4U,WAAV,CAAjC,IAA2DA,WAAW,CAACrC,aAAD,CAA1E,EAA2F;AAC1F,WAAOqC,WAAW,CAACrC,aAAD,CAAlB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAjBgC,CAAlC;AAqBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM6C,8BAA4B,GAAGtQ,uBAAc,CAClD,CACCE,gBADD,EAEC2R,SAAkB,CAACxC,kCAFpB,EAGCwC,SAAkB,CAAC3C,uCAHpB,CADkD;AAOlD;AACD;AACA;AACA;AACA;AACC,UAACY,WAAD,EAAcS,WAAd,EAA2B3B,gBAA3B,EAAgD;AAC/C,MAAI2B,WAAJ,EAAiB;AAChB,QAAIC,cAAc,GAAG,EAArB;;AACA,+BAAQD,WAAR,EAAqB,UAACrO,IAAD,EAAO+G,QAAP,EAAoB;AACxC,UAAIwH,OAAO,GAAG,EAAd;;AACA,+BAAMvO,IAAN,EAAY,UAAA5F,GAAG,EAAI;AAClB,YAAIA,GAAG,IAAIwT,WAAP,IAAsB,CAAC5U,6BAAU4U,WAAV,CAAvB,IAAiDA,WAAW,CAACxT,GAAD,CAA5D,IAAqE,CAACpB,6BAAU0T,gBAAV,CAAtE,IAAqGA,gBAAgB,CAAC3F,QAAD,CAAzH,EAAqI;AACpIwH,UAAAA,OAAO,CAACrU,IAAR,mCAAiB0T,WAAW,CAACxT,GAAD,CAA5B;AAAmCiW,YAAAA,qBAAqB,EAAE1X,0BAAO+T,gBAAgB,CAAC3F,QAAD,CAAvB,EAAmC,UAAAjF,CAAC;AAAA,qBAAIA,CAAC,CAACkN,sBAAF,KAA6B5U,GAAjC;AAAA,aAApC,KAA6E;AAAvI;AACA,SAFD,MAEO;AACNmU,UAAAA,OAAO,CAACrU,IAAR,CAAa,IAAb;AACA;AACD,OAND;;AAOAoU,MAAAA,cAAc,CAACvH,QAAD,CAAd,GAA2BwH,OAA3B;AACA,KAVD;;AAWA,WAAOD,cAAP;AACA,GAdD,MAcO;AACN,WAAO,IAAP;AACA;AACD,CA9BiD,CAAnD;AAiCA,kBAAe;AACd3Q,EAAAA,WAAW,EAAXA,aADc;AAEd2S,EAAAA,sBAAsB,EAAtBA,sBAFc;AAGdM,EAAAA,uCAAuC,EAAvCA,uCAHc;AAMdxB,EAAAA,WAAW,EAAXA,aANc;AAOd/P,EAAAA,qBAAqB,EAArBA,uBAPc;AAQd+O,EAAAA,4BAA4B,EAA5BA,8BARc;AASdvO,EAAAA,QAAQ,EAARA,UATc;AAUdK,EAAAA,SAAS,EAATA;AAVc,CAAf;;AC7KA,IAAM4Q,MAAM,GAAG,SAATA,MAAS,CAAAnX,KAAK;AAAA,SAAIA,KAAK,CAACyJ,GAAN,CAAUhJ,GAAd;AAAA,CAApB;;AACA,IAAM2W,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAApX,KAAK;AAAA,SAAIA,KAAK,CAACyJ,GAAN,CAAUmF,aAAd;AAAA,CAAtC;;AACA,IAAMyI,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAArX,KAAK;AAAA,SAAIA,KAAK,CAACyJ,GAAN,CAAU6N,kBAAd;AAAA,CAA3C;;AAEA,IAAMC,gBAAgB,GAAGpT,uBAAc,CACtC,CACCiT,wBADD,EAEC,UAACpX,KAAD,EAAQwX,IAAR;AAAA,SAAiBA,IAAjB;AAAA,CAFD,CADsC,EAKtC,UAAC5I,aAAD,EAAgB4I,IAAhB;AAAA,SAAyB5P,yBAAMgH,aAAN,EAAqB4I,IAArB,EAA2B,IAA3B,CAAzB;AAAA,CALsC,CAAvC;AAQA,IAAMC,qBAAqB,GAAGtT,uBAAc,CAC3C,CACCkT,6BADD,EAEC,UAACrX,KAAD,EAAQwX,IAAR;AAAA,SAAiBA,IAAjB;AAAA,CAFD,CAD2C,EAK3C,UAACF,kBAAD,EAAqBE,IAArB;AAAA,SAA8B5P,yBAAM0P,kBAAN,EAA0BE,IAA1B,EAAgC,IAAhC,CAA9B;AAAA,CAL2C,CAA5C;AAQA,kBAAe;AACdL,EAAAA,MAAM,EAANA,MADc;AAEdI,EAAAA,gBAAgB,EAAhBA,gBAFc;AAGdH,EAAAA,wBAAwB,EAAxBA,wBAHc;AAIdK,EAAAA,qBAAqB,EAArBA,qBAJc;AAKdJ,EAAAA,6BAA6B,EAA7BA;AALc,CAAf;;ACjBA,IAAMrT,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACgP,MAAV;AAAA,CAAzB;;AAEA,IAAM1K,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AAEA,IAAM0T,gBAAgB,GAAGjQ,wBAAuB,CAACvB,UAAD,CAAhD;AAEA,IAAMyR,kBAAkB,GAAG5P,wBAAuB,CAAC,UAACtH,GAAD,EAAS;AAAA;;AAC3D,MAAMmN,KAAK,GAAG8J,gBAAgB,CAACjX,GAAD,CAA9B;AACA,SAAO,CAAAmN,KAAK,SAAL,IAAAA,KAAK,WAAL,2BAAAA,KAAK,CAAExM,IAAP,4DAAagO,UAAb,KAA2B,IAAlC;AACA,CAHiD,CAAlD;AAKA,IAAMwI,oBAAoB,GAAGjZ,wCAAoB,CAChD,CACC0F,gBADD,EAEC,UAACrE,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAFD,CADgD,EAKhD,UAACyB,MAAD,EAASzB,WAAT,EAAyB;AACxB,MAAIyB,MAAM,IAAI,CAAC3P,6BAAU2P,MAAV,CAAX,IAAgCzB,WAApC,EAAiD;AAChD,QAAIsK,gBAAgB,GAAG,EAAvB;AACAtK,IAAAA,WAAW,CAAClN,OAAZ,CAAoB,UAAAuM,KAAK,EAAI;AAC5B,UAAIA,KAAK,CAACkL,QAAV,EAAoB;AACnBD,QAAAA,gBAAgB,CAACjL,KAAK,CAACnM,GAAP,CAAhB,GAA8BuO,MAAM,CAACpC,KAAK,CAACkL,QAAP,CAApC;AACA;AACD,KAJD;AAMA,WAAOD,gBAAP;AACA,GATD,MASO;AACN,WAAO,IAAP;AACA;AACD,CAlB+C,CAApB,CAmB3B,UAAC7X,KAAD,EAAQmN,UAAR,EAAoBqI,mBAApB;AAAA,SAA4CA,mBAA5C;AAAA,CAnB2B,CAA7B;AAqBA,aAAe;AACdlR,EAAAA,MAAM,EAANA,QADc;AAEdD,EAAAA,cAAc,EAAdA,gBAFc;AAGd6B,EAAAA,QAAQ,EAARA,UAHc;AAIdyR,EAAAA,kBAAkB,EAAlBA,kBAJc;AAKdhS,EAAAA,UAAU,EAAE6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CALE;AAOd4T,EAAAA,oBAAoB,EAApBA,oBAPc;AAQd5T,EAAAA,WAAW,EAAXA;AARc,CAAf;;AClCA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAAC8N,UAAV;AAAA,CAAzB;;AACA,IAAMzI,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMM,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AAEA,IAAM+T,wBAAwB,GAAG5T,uBAAc,CAC9C,CACCE,gBADD,EAEC2T,MAAc,CAAC3T,cAFhB,CAD8C,EAK9C,UAACyJ,UAAD,EAAamK,SAAb,EAA2B;AAC1B,MAAInK,UAAJ,EAAgB;AACf,QAAImK,SAAJ,EAAe;AACd,UAAIC,oBAAoB,GAAG,EAA3B;;AACA,iCAAQpK,UAAR,EAAoB,UAACqK,SAAD,EAAY1X,GAAZ,EAAoB;AAAA;;AACvC,YAAMqX,QAAQ,sBAAGK,SAAS,CAAC/W,IAAb,oDAAG,gBAAgB0W,QAAjC;;AACA,YAAIA,QAAQ,IAAIG,SAAS,CAACH,QAAD,CAAzB,EAAqC;AAAA;;AACpC,cAAMM,cAAc,4BAAGH,SAAS,CAACH,QAAD,CAAT,CAAoB1W,IAAvB,oFAAG,sBAA0BgO,UAA7B,qFAAG,uBAAsCiJ,KAAzC,qFAAG,uBAA8C,CAA9C,EAAiDrJ,MAApD,2DAAG,uBAA0D,CAA1D,CAAvB,CADoC;;AAEpC,cAAIoJ,cAAJ,EAAoB;AACnBF,YAAAA,oBAAoB,CAACzX,GAAD,CAApB,qCACI0X,SADJ;AAEC/W,cAAAA,IAAI,oCACA+W,SAAS,CAAC/W,IADV;AAEHwM,gBAAAA,KAAK,EAAEwK;AAFJ;AAFL;AAOA,WARD,MAQO;AACNF,YAAAA,oBAAoB,CAACzX,GAAD,CAApB,GAA4B0X,SAA5B;AACA;AACD,SAbD,MAaO;AACND,UAAAA,oBAAoB,CAACzX,GAAD,CAApB,GAA4B0X,SAA5B;AACA;AACD,OAlBD;;AAoBA,aAAOD,oBAAP;AACA,KAvBD,MAuBO;AACN,aAAOpK,UAAP;AACA;AACD,GA3BD,MA4BK;AACJ,WAAO,IAAP;AACA;AACD,CArC6C,CAA/C;AAwCA,IAAM4J,kBAAgB,GAAGjQ,wBAAuB,CAAC,UAACzH,KAAD,EAAQS,GAAR;AAAA,SAAgBT,KAAK,CAAC8N,UAAN,CAAiB7J,KAAjB,CAAuBxD,GAAvB,CAAhB;AAAA,CAAD,CAAhD;AAEA,IAAM6X,oCAAoC,GAAGvQ,wBAAuB,CACnE,UAACwQ,kBAAD,EAAwB;AACvB,MAAI7I,mBAAmB,GAAG,EAA1B;;AACA,6BAAQ6I,kBAAR,EAA4B,UAACrX,KAAD,EAAQT,GAAR,EAAgB;AAC3C,QAAI0X,SAAS,GAAGT,kBAAgB,CAACjX,GAAD,CAAhC;AACA,QAAIkP,aAAa,GAAGwI,SAAH,aAAGA,SAAH,uBAAGA,SAAS,CAAE/W,IAA/B;;AAEA,QAAIuO,aAAJ,EAAmB;AAClB,UAAM/B,KAAK,GAAG+B,aAAa,CAAC/B,KAA5B;AACA,UAAMmC,YAAY,GAAGJ,aAAa,CAACI,YAAd,IAA8BnC,KAAnD;AACA,UAAMgC,KAAK,GAAGD,aAAa,CAACC,KAA5B;AACA,UAAMC,YAAY,GAAGF,aAAa,CAACE,YAAd,IAA8BD,KAAnD;;AAEA,UAAID,aAAa,CAACG,iBAAlB,EAAqC;AACpCJ,QAAAA,mBAAmB,CAACjP,GAAD,CAAnB,GAA2B;AAAC4F,UAAAA,IAAI,EAAEsJ,aAAa,CAACG,iBAAd,CAAgCzJ;AAAvC,SAA3B;;AACA,YAAIuH,KAAJ,EAAW;AACV8B,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBmN,KAAzB,GAAiCA,KAAjC;AACA8B,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBsP,YAAzB,GAAwCA,YAAxC;AACA,SAHD,MAGO;AACNL,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBmN,KAAzB,GAAiC;AAChCoC,YAAAA,YAAY,EAAEJ,KADkB;AAEhCK,YAAAA,YAAY,EAAE;AAFkB,WAAjC;AAIAP,UAAAA,mBAAmB,CAACjP,GAAD,CAAnB,CAAyBsP,YAAzB,GAAwC;AACvCC,YAAAA,YAAY,EAAEH,YADyB;AAEvCI,YAAAA,YAAY,EAAE;AAFyB,WAAxC;AAIA;AACD,OArBiB;;AAwBlB;AACD,GA7BD;;AA+BA,SAAOP,mBAAP;AACA,CAnCkE,CAApE;AAsCA,iBAAe;AACdvK,EAAAA,YAAY,EAAZA,cADc;AAEdE,EAAAA,SAAS,EAATA,WAFc;AAGdf,EAAAA,MAAM,EAANA,QAHc;AAIdD,EAAAA,cAAc,EAAdA,gBAJc;AAMd0T,EAAAA,wBAAwB,EAAxBA,wBANc;AAQdO,EAAAA,oCAAoC,EAApCA;AARc,CAAf;;ACpFA,IAAMtU,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACmJ,OAAV;AAAA,CAAzB;;AAEA,IAAM7E,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMgB,sBAAoB,GAAGwH,eAAM,CAACxH,oBAAP,CAA4BhB,aAA5B,CAA7B;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMoB,eAAa,GAAGoH,eAAM,CAACpH,aAAP,CAAqBpB,aAArB,CAAtB;AACA,IAAMsB,iBAAe,GAAGkH,eAAM,CAAClH,eAAP,CAAuBtB,aAAvB,CAAxB;AAEA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AAEA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AACA,IAAM2B,YAAU,GAAG6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAAnB;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAEA,IAAMwU,2BAA2B,GAAG7Z,wCAAoB,CACvD,CAAC8Z,SAA2B,CAAC/C,oBAA7B,CADuD,EAEvD,UAAChD,iBAAD,EAAuB;AACtB,MAAIA,iBAAJ,EAAuB;AACtB,WAAOxH,yBAAMwH,iBAAN,EAAyB,UAAAJ,QAAQ;AAAA,aAAIA,QAAQ,CAAC3P,SAAb;AAAA,KAAjC,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CARsD,CAApB,CASlC,UAAC3C,KAAD,EAAQnB,MAAR,EAAgBqR,QAAhB,EAA6B;AAC9B,SAAOhR,IAAI,CAACC,SAAL,CAAeN,MAAf,IAAyB,GAAzB,GAA+BK,IAAI,CAACC,SAAL,CAAe+Q,QAAf,CAAtC;AACA,CAXmC,CAApC;AAaA;AACA;AACA;;AACA,IAAMwI,uBAAuB,GAAG/Z,wCAAoB,CACnD,CACC0F,gBADD,EAEC,UAACrE,KAAD,EAAQ6F,KAAR;AAAA,SAAkBA,KAAlB;AAAA,CAFD,EAGC,UAAC7F,KAAD,EAAQ6F,KAAR,EAAeE,GAAf;AAAA,SAAuBA,GAAvB;AAAA,CAHD,CADmD,EAMnD,UAACoD,OAAD,EAAUtD,KAAV,EAAiBE,GAAjB,EAAyB;AACxB,MAAIoD,OAAO,IAAItD,KAAX,IAAoBE,GAAxB,EAA6B;AAC5B,WAAO3B,4BAAS+E,OAAT,EAAkB,UAAC1G,MAAD,EAAY;AACpC,UAAMkW,WAAW,GAAGlW,MAAM,CAACrB,IAAP,IAAeqB,MAAM,CAACrB,IAAP,CAAYyE,KAA/C;AACA,UAAM+S,SAAS,GAAGnW,MAAM,CAACrB,IAAP,IAAeqB,MAAM,CAACrB,IAAP,CAAY2E,GAA7C;;AAEA,UAAI4S,WAAW,IAAIC,SAAnB,EAA8B;AAC7B,eAAOC,0BAAM,CAACF,WAAD,CAAN,CAAoBG,SAApB,CAA8BjT,KAA9B,EAAqCE,GAArC,EAA0C,IAA1C,EAAgD,IAAhD,KACH8S,0BAAM,CAACD,SAAD,CAAN,CAAkBE,SAAlB,CAA4BjT,KAA5B,EAAmCE,GAAnC,EAAwC,IAAxC,EAA8C,IAA9C,CADJ;AAEA,OAHD,MAGO,IAAI4S,WAAJ,EAAiB;AACvB,eAAOE,0BAAM,CAACF,WAAD,CAAN,CAAoBG,SAApB,CAA8BjT,KAA9B,EAAqCE,GAArC,EAA0C,IAA1C,EAAgD,IAAhD,CAAP;AACA,OAFM,MAEA,IAAI6S,SAAJ,EAAe;AACrB,eAAOC,0BAAM,CAACD,SAAD,CAAN,CAAkBE,SAAlB,CAA4BjT,KAA5B,EAAmCE,GAAnC,EAAwC,IAAxC,EAA8C,IAA9C,CAAP;AACA,OAFM,MAEA;AACN,eAAO,IAAP;AACA;AACD,KAdM,CAAP;AAeA,GAhBD,MAgBO;AACN,WAAOoD,OAAP;AACA;AACD,CA1BkD,CAApB,CA2B9B,UAACnJ,KAAD,EAAQ6F,KAAR,EAAeE,GAAf;AAAA,mBAA0BF,KAA1B,cAAmCE,GAAnC;AAAA,CA3B8B,CAAhC;AA6BA,IAAMgT,oCAAoC,GAAGpa,wCAAoB,CAChE,CACC0F,gBADD,EAECyP,gBAAgB,CAACjB,wCAFlB,EAGC,UAAC7S,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAHD,CADgE,EAMhE,UAACpE,OAAD,EAAU6P,6CAAV,EAAyDzL,WAAzD,EAAyE;AACxE,MAAIpE,OAAO,IAAI,CAAC9J,6BAAU8J,OAAV,CAAZ,IAAkC6P,6CAAlC,IAAmF,CAAC3Z,6BAAU2Z,6CAAV,CAApF,IAAgJzL,WAApJ,EAAiK;AAChK,QAAM0L,iBAAiB,GAAG,EAA1B;;AACA,uCAAmDvY,MAAM,CAACC,OAAP,CAAeqY,6CAAf,CAAnD,qCAAkH;AAAA;AAAA,UAAtG9V,gBAAsG;AAAA,UAApF0P,gBAAoF;;AACjHqG,MAAAA,iBAAiB,CAAC/V,gBAAD,CAAjB,GAAsC0P,gBAAgB,CAACpN,GAAjB,CAAqB,UAAA0T,eAAe,EAAI;AAC7E,YAAG/P,OAAO,CAAC+P,eAAe,CAAC9X,IAAhB,CAAqBuB,SAAtB,CAAV,EAA4C;AAC3C,iBAAOwG,OAAO,CAAC+P,eAAe,CAAC9X,IAAhB,CAAqBuB,SAAtB,CAAd;AACA;AACD,OAJqC,CAAtC;AAKAsW,MAAAA,iBAAiB,CAAC/V,gBAAD,CAAjB,CAAoCrE,MAApC,CAA2C,UAAAW,CAAC;AAAA,eAAIA,CAAJ;AAAA,OAA5C,EANiH;AAOjH;;AACD,WAAOyZ,iBAAP;AACA,GAXD,MAWO;AACN,WAAO,IAAP;AACA;AACD,CArB+D,CAApB,CAsB3C,UAACjZ,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAW,CAAC/H,GAAZ,CAAgB,UAAAyL,CAAC;AAAA,WAAIA,CAAC,CAACpS,MAAF,IAAYoS,CAAC,CAACpS,MAAF,CAASqE,gBAAzB;AAAA,GAAjB,EAA4DgO,IAA5D,CAAiE,GAAjE,CAAxB;AAAA,CAtB2C,CAA7C;AAwBA,IAAMuD,8BAA4B,GAAG9V,wCAAoB,CACxD,CACC0F,gBADD,EAECyP,gBAAgB,CAAChB,gCAFlB,EAGC,UAAC9S,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAxB;AAAA,CAHD,CADwD,EAMxD,UAACpE,OAAD,EAAUgQ,qCAAV,EAAiD5L,WAAjD,EAAiE;AAChE,MAAIpE,OAAO,IAAI,CAAC9J,6BAAU8J,OAAV,CAAZ,IAAkCgQ,qCAAlC,IAA2E,CAAC9Z,6BAAU8Z,qCAAV,CAA5E,IAAgI5L,WAApI,EAAiJ;AAChJ,QAAM0L,iBAAiB,GAAG,EAA1B;;AACA,yCAA2CvY,MAAM,CAACC,OAAP,CAAewY,qCAAf,CAA3C,wCAAkG;AAAA;AAAA,UAAtF/L,QAAsF;AAAA,UAA5EwF,gBAA4E;;AACjGqG,MAAAA,iBAAiB,CAAC7L,QAAD,CAAjB,GAA8BwF,gBAAgB,CAACpN,GAAjB,CAAqB,UAAA0T,eAAe,EAAI;AACrE,YAAG/P,OAAO,CAAC+P,eAAe,CAACvW,SAAjB,CAAV,EAAuC;AACtC,iBAAOwG,OAAO,CAAC+P,eAAe,CAACvW,SAAjB,CAAd;AACA;AACD,OAJ6B,CAA9B;AAKAsW,MAAAA,iBAAiB,CAAC7L,QAAD,CAAjB,CAA4BvO,MAA5B,CAAmC,UAAAW,CAAC;AAAA,eAAIA,CAAJ;AAAA,OAApC,EANiG;AAOjG;;AACD,WAAOyZ,iBAAP;AACA,GAXD,MAWO;AACN,WAAO,IAAP;AACA;AACD,CArBuD,CAApB,CAsBnC,UAACjZ,KAAD,EAAQuN,WAAR;AAAA,SAAwBA,WAAW,CAAC/H,GAAZ,CAAgB,UAAAyL,CAAC;AAAA,WAAIA,CAAC,CAACxQ,GAAN;AAAA,GAAjB,EAA4ByQ,IAA5B,CAAiC,GAAjC,CAAxB;AAAA,CAtBmC,CAArC;AAwBA,cAAe;AACd7L,EAAAA,SAAS,EAATA,WADc;AAEdF,EAAAA,YAAY,EAAZA,cAFc;AAGdC,EAAAA,aAAa,EAAbA,eAHc;AAIdE,EAAAA,eAAe,EAAfA,iBAJc;AAKdhB,EAAAA,MAAM,EAANA,QALc;AAMdD,EAAAA,cAAc,EAAdA,gBANc;AAOdW,EAAAA,oBAAoB,EAApBA,sBAPc;AASdkB,EAAAA,QAAQ,EAARA,UATc;AAUdK,EAAAA,SAAS,EAATA,WAVc;AAWdmS,EAAAA,uBAAuB,EAAvBA,uBAXc;AAadlS,EAAAA,YAAY,EAAZA,cAbc;AAcdC,EAAAA,wBAAwB,EAAxBA,0BAdc;AAgBdY,EAAAA,kBAAkB,EAAlBA,oBAhBc;AAiBd0R,EAAAA,oCAAoC,EAApCA,oCAjBc;AAkBdtE,EAAAA,4BAA4B,EAA5BA,8BAlBc;AAmBd9O,EAAAA,UAAU,EAAVA,YAnBc;AAoBd6S,EAAAA,2BAA2B,EAA3BA,2BApBc;AAqBd3R,EAAAA,wBAAwB,EAAxBA,0BArBc;AAuBd7C,EAAAA,WAAW,EAAXA,aAvBc;AAyBd;AACAoV,EAAAA,eAAe,EAAE/T,WA1BH;AA2BdgU,EAAAA,UAAU,EAAE/U;AA3BE,CAAf;;ACrGA,IAAMgV,cAAc,GAAG;AACtBC,EAAAA,MAAM,EAAE;AACPC,IAAAA,GAAG,EAAE,SADE;AAEPC,IAAAA,GAAG,EAAE;AAFE,GADc;AAKtBC,EAAAA,QAAQ,EAAE,QALY;AAMtBC,EAAAA,IAAI,EAAE,CANgB;AAOtBC,EAAAA,IAAI,EAAE,CAPgB;AAQtBC,EAAAA,OAAO,EAAE;AARa,CAAvB;AAWA,IAAMC,YAAY,GAAG;AAACR,EAAAA,cAAc,EAAdA;AAAD,CAArB;AAEA,IAAIS,uBAAuB,GAAG,IAAIrN,kBAAJ,CAAc,EAAd,CAA9B;AACA,IAAIsN,cAAc,GAAG,IAAItN,kBAAJ,CAAc,EAAd,CAArB;AAEA;;AACA,IAAM1I,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACia,eAAV;AAAA,CAAzB;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAla,KAAK;AAAA,SAAIA,KAAK,CAACia,eAAN,CAAsBE,IAA1B;AAAA,CAA7B;;AACA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAApa,KAAK;AAAA,SAAIA,KAAK,CAACia,eAAN,CAAsBI,IAA1B;AAAA,CAAhC;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAta,KAAK;AAAA,SAAIA,KAAK,CAACia,eAAN,CAAsBM,YAA1B;AAAA,CAA7B;;AACA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAxa,KAAK;AAAA,SAAIA,KAAK,CAACia,eAAN,CAAsBQ,YAA1B;AAAA,CAA7B;;AAEA,IAAMC,YAAY,GAAGvW,uBAAc,CAC/B,CACI+V,eADJ,EAEIM,eAFJ,CAD+B,EAK/B,UAACL,IAAD,EAAOrW,SAAP,EAAqB;AACjB,MAAIqW,IAAI,IAAI,CAAC9a,6BAAU8a,IAAV,CAAT,IAA4BrW,SAA5B,IAAyCqW,IAAI,CAACrW,SAAD,CAAjD,EAA8D;AAC1D,WAAOqW,IAAI,CAACrW,SAAD,CAAX;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAX8B,CAAnC;AAcA,IAAM6W,OAAO,GAAGxW,uBAAc,CAC7B,CAAC+V,eAAD,CAD6B,EAE7B,UAACC,IAAD,EAAU;AACT,MAAIA,IAAI,IAAI,CAAC9a,6BAAU8a,IAAV,CAAb,EAA8B;AAC7B,WAAOzZ,MAAM,CAAC6D,MAAP,CAAc4V,IAAd,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR4B,CAA9B;AAWA,IAAMS,UAAU,GAAGzW,uBAAc,CAChC,CAACiW,kBAAD,CADgC,EAEhC,UAACC,IAAD,EAAU;AACT,MAAIA,IAAI,IAAI,CAAChb,6BAAUgb,IAAV,CAAb,EAA8B;AAC7B,WAAO3Z,MAAM,CAAC6D,MAAP,CAAc8V,IAAd,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR+B,CAAjC;AAWA;AACA;AACA;AACA;;AACA,IAAMQ,WAAW,GAAGlc,wCAAoB,CACvC,CAACub,eAAD,EACA,UAACla,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CADA,CADuC,EAGvC,UAAC0Z,IAAD,EAAO1Z,GAAP,EAAe;AACd,MAAI0Z,IAAI,IAAI,CAAC9a,6BAAU8a,IAAV,CAAT,IAA4B1Z,GAAhC,EAAqC;AACpC,WAAO0Z,IAAI,CAAC1Z,GAAD,CAAJ,GAAY0Z,IAAI,CAAC1Z,GAAD,CAAhB,GAAwB,IAA/B;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CATsC,CAApB,CAUlB,UAACT,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAVkB,CAApB;AAaA,IAAMqa,oBAAoB,GAAG3W,uBAAc,CAC1C,CAAC0W,WAAD,CAD0C,EAE1C,UAACrV,GAAD,EAAS;AACR,SAAOA,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAAS2N,MAA5B,IAAsC,IAA7C;AACA,CAJyC,CAA3C;AASA;AACA;AACA;AACA;;AACA,IAAMgM,cAAc,GAAG5W,uBAAc,CACpC,CAACiW,kBAAD,EACA,UAACpa,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CADA,CADoC,EAGpC,UAAC4Z,IAAD,EAAO5Z,GAAP,EAAe;AACd,MAAI4Z,IAAI,IAAI,CAAChb,6BAAUgb,IAAV,CAAT,IAA4B5Z,GAAhC,EAAqC;AACpC,WAAO4Z,IAAI,CAAC5Z,GAAD,CAAJ,GAAY4Z,IAAI,CAAC5Z,GAAD,CAAhB,GAAwB,IAA/B;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CATmC,CAArC;AAYA;AACA;AACA;AACA;;AACA,IAAMua,iBAAiB,GAAG7W,uBAAc,CACvC,CAACyW,UAAD,EACA,UAAC5a,KAAD,EAAQib,MAAR;AAAA,SAAoBA,MAApB;AAAA,CADA,CADuC,EAGvC,UAACZ,IAAD,EAAOY,MAAP,EAAkB;AACjB,MAAIZ,IAAI,IAAI,CAAChb,6BAAUgb,IAAV,CAAT,IAA4BY,MAAhC,EAAwC;AACvC,QAAIC,SAAS,GAAG,IAAhB;AACAb,IAAAA,IAAI,CAACha,OAAL,CAAa,UAAC8a,GAAD,EAAS;AACrB,UAAIA,GAAG,CAAChB,IAAJ,IAAYjI,8BAAWiJ,GAAG,CAAChB,IAAf,EAAqBc,MAArB,CAAhB,EAA8C;AAC7CC,QAAAA,SAAS,GAAGC,GAAZ;AACA;AACD,KAJD;AAKA,WAAOD,SAAP;AACA,GARD,MAQO;AACN,WAAO,IAAP;AACA;AACD,CAfsC,CAAxC;AAkBA;AACA;AACA;AACA;;AACA,IAAME,gBAAgB,GAAGjX,uBAAc,CACtC,CAAC4W,cAAD,CADsC,EAEtC,UAACI,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAAChB,IAAX,IAAmBgB,GAAG,CAAChB,IAAJ,CAASra,MAAhC,EAAwC;AACvC,WAAOqb,GAAG,CAAChB,IAAX;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CARqC,CAAvC;AAWA;AACA;AACA;AACA;;AACA,IAAMkB,kCAAkC,GAAGlX,uBAAc,CACxD,CACC0W,WADD,CADwD,EAIxD,UAACrV,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAASka,eAAhC,EAAiD;AAChD,WAAO9V,GAAG,CAACpE,IAAJ,CAASka,eAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAVuD,CAAzD;AAaA;AACA;AACA;AACA;;AACA,IAAMC,yBAAyB,GAAGpX,uBAAc,CAC/C,CACC0W,WADD,CAD+C,EAI/C,UAACrV,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAAS2N,MAAhC,EAAwC;AACvC,WAAOvJ,GAAG,CAACpE,IAAJ,CAAS2N,MAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAV8C,CAAhD;AAaA;AACA;AACA;AACA;;AACA,IAAMyM,+BAA+B,GAAGrX,uBAAc,CACrD,CACC0W,WADD,CADqD,EAIrD,UAACrV,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAASqa,iBAAhC,EAAmD;AAClD,WAAOjW,GAAG,CAACpE,IAAJ,CAASqa,iBAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAVoD,CAAtD;AAaA;AACA;AACA;AACA;;AACA,IAAMC,4BAA4B,GAAGvX,uBAAc,CAClD,CACC0W,WADD,CADkD,EAIlD,UAACrV,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAASO,cAAhC,EAAgD;AAC/C,WAAO6D,GAAG,CAACpE,IAAJ,CAASO,cAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAViD,CAAnD;AAaA;AACA;AACA;AACA;;AACA,IAAMga,qCAAqC,GAAGxX,uBAAc,CAC3D,CACC6W,iBADD,CAD2D,EAI3D,UAACG,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAAC/Z,IAAX,IAAmB+Z,GAAG,CAAC/Z,IAAJ,CAASka,eAAhC,EAAiD;AAChD,WAAOH,GAAG,CAAC/Z,IAAJ,CAASka,eAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAV0D,CAA5D;AAaA;AACA;AACA;AACA;;AACA,IAAMM,4BAA4B,GAAGzX,uBAAc,CAClD,CACC6W,iBADD,CADkD,EAIlD,UAACG,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAAC/Z,IAAX,IAAmB+Z,GAAG,CAAC/Z,IAAJ,CAAS2N,MAAhC,EAAwC;AACvC,WAAOoM,GAAG,CAAC/Z,IAAJ,CAAS2N,MAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAViD,CAAnD;AAaA;AACA;AACA;AACA;;AACA,IAAM8M,kCAAkC,GAAG1X,uBAAc,CACxD,CACC6W,iBADD,CADwD,EAIxD,UAACG,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAAC/Z,IAAX,IAAmB+Z,GAAG,CAAC/Z,IAAJ,CAASqa,iBAAhC,EAAmD;AAClD,WAAON,GAAG,CAAC/Z,IAAJ,CAASqa,iBAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAVuD,CAAzD;AAaA;AACA;AACA;AACA;;AACA,IAAMK,+BAA+B,GAAG3X,uBAAc,CACrD,CACC6W,iBADD,CADqD,EAIrD,UAACG,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAAC/Z,IAAX,IAAmB+Z,GAAG,CAAC/Z,IAAJ,CAASO,cAAhC,EAAgD;AAC/C,WAAOwZ,GAAG,CAAC/Z,IAAJ,CAASO,cAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAVoD,CAAtD;AAaA;AACA;AACA;AACA;;AACA,IAAMoa,4BAA4B,GAAG5X,uBAAc,CAClD,CACC4W,cADD,CADkD,EAIlD,UAACI,GAAD,EAAS;AACR,MAAIA,GAAG,IAAIA,GAAG,CAAC/Z,IAAX,IAAmB+Z,GAAG,CAAC/Z,IAAJ,CAAS2N,MAAhC,EAAwC;AACvC,WAAOoM,GAAG,CAAC/Z,IAAJ,CAAS2N,MAAhB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAViD,CAAnD;AAaA;AACA;AACA;AACA;AACA;;AACA,IAAMiN,8BAA8B,GAAG7X,uBAAc,CACpD,CAACoX,yBAAD,EAA4B,UAACvb,KAAD,EAAQib,MAAR,EAAgB7N,QAAhB;AAAA,SAA6BA,QAA7B;AAAA,CAA5B,CADoD,EAEpD,UAAC2B,MAAD,EAAS3B,QAAT,EAAsB;AACrB,MAAI2B,MAAM,IAAI3B,QAAd,EAAwB;AACvB,WAAO2B,MAAM,CAACkN,IAAP,CAAY,UAAAhL,CAAC;AAAA,aAAIA,CAAC,CAACxQ,GAAF,KAAU2M,QAAd;AAAA,KAAb,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CARmD,CAArD;AAeA;;AAEA;AACA;AACA;AACA;;AACA,IAAM8O,yBAAyB,GAAGvd,wCAAoB,CACrD,CACC+c,4BADD,EAECI,+BAFD,CADqD,EAKrD,UAACK,SAAD,EAAYC,SAAZ,EAA0B;AACzB,SAAO,CAACA,SAAS,IAAID,SAAd,uCAAgCC,SAAhC,GAA8CD,SAA9C,CAAP;AACA,CAPoD,CAApB,CAQhC,UAACnc,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CARgC,CAAlC;AAUA;AACA;AACA;AACA;;AACA,IAAMoB,+BAA+B,GAAG1d,wCAAoB,CAC3D,CACC0c,kCADD,EAECM,qCAFD,CAD2D,EAK3D,UAACW,kBAAD,EAAqBC,kBAArB,EAA4C;AAC3C,SAAOD,kBAAkB,IAAIC,kBAA7B;AACA,CAP0D,CAApB,CASvC,UAACvc,KAAD,EAAQib,MAAR;AAAA,mBAAsBA,MAAtB;AAAA,CATuC,CAAxC;AAaA;AACA;AACA;AACA;AACA;;AACA,IAAMuB,sBAAsB,GAAG7d,wCAAoB,CAClD,CACC4c,yBADD,EAECK,4BAFD,EAGCJ,+BAHD,EAICK,kCAJD,EAKCK,yBALD,CADkD,EAQlD,UAACO,SAAD,EAAYC,SAAZ,EAAuBC,oBAAvB,EAA6CC,oBAA7C,EAAmEC,iBAAnE,EAAyF;AACxF,MAAIJ,SAAS,IAAIC,SAAjB,EAA4B;AAC3B,QAAI3N,MAAM,gCAAQ2N,SAAS,IAAI,EAArB,sBAA8BD,SAAS,IAAI,EAA3C,EAAV;AACA,QAAInZ,SAAS,GAAG,EAAhB;;AACA,QAAIsZ,oBAAJ,EAA0B;AACzBtZ,MAAAA,SAAS,GAAGsZ,oBAAZ;AACA;;AACDtZ,IAAAA,SAAS,qCAAOA,SAAP,GAAqBqZ,oBAArB,CAAT;AAEA5N,IAAAA,MAAM,GAAGA,MAAM,CAACvJ,GAAP,CAAW,UAAAoH,KAAK,EAAI;AAC5B,UAAIkQ,sBAAsB,GAAGlQ,KAAK,CAAC6O,iBAAN,qCAA8BnY,SAA9B,GAA4CsJ,KAAK,CAAC6O,iBAAlD,IAAuEnY,SAApG;AACA,UAAIyZ,mBAAmB,GAAGnQ,KAAK,CAACjL,cAAN,qCAA2Bkb,iBAA3B,GAAiDjQ,KAAK,CAACjL,cAAvD,IAAyEkb,iBAAnG;AAEA,+CAAWjQ,KAAX;AAAkB6O,QAAAA,iBAAiB,EAAEqB,sBAArC;AAA6Dnb,QAAAA,cAAc,EAAEob;AAA7E;AACA,KALQ,CAAT,CAR2B;;AAgB3B,WAAOC,4BAASjO,MAAT,EAAiB,KAAjB,CAAP;AACA,GAjBD,MAiBO;AACN,WAAO,IAAP;AACA;AACD,CA7BiD,CAApB,CA8B7B,UAAC/O,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CA9B6B,CAA/B;AAiCA;AACA;AACA;AACA;;AACA,IAAMgC,yBAAyB,GAAG9Y,uBAAc,CAC/C,CACCkY,+BADD,EAECG,sBAFD,CAD+C,EAK/C,UAAClB,eAAD,EAAkBvM,MAAlB,EAA6B;AAC5B,MAAIA,MAAM,IAAIuM,eAAd,EAA+B;AAC9BvM,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;AAEA,QAAIuM,eAAJ,EAAqB;AACpB;AACAA,MAAAA,eAAe,qCAAOA,eAAP;AAAwB7a,QAAAA,GAAG,EAAE;AAA7B,QAAf;AACA,cAAQ6a,eAAR,4BAA4BvM,MAA5B;AACA;;AAED,WAAOA,MAAP;AACA,GAVD,MAUO;AACN,WAAO,IAAP;AACA;AACD,CAnB8C,CAAhD;AAsBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMmO,qBAAqB,GAAG/Y,uBAAc,CAC3C,CACCqW,eADD,EAECO,cAFD,CAD2C,EAK3C,UAACE,MAAD,EAASE,GAAT,EAAiB;AAChB,MAAIA,GAAJ,EAAS;AACR,QAAIgC,WAAW,GAAGjL,8BAAWiJ,GAAG,CAAChB,IAAf,EAAqBc,MAArB,CAAlB;;AACA,WAAOE,GAAG,CAACV,YAAJ,IAAqB0C,WAAW,IAAIlC,MAApC,IAA+C,IAAtD;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAZ0C,CAA5C;AAeA;AACA;AACA;AACA;;AACA,IAAMmC,OAAO,GAAGze,wCAAoB,CACnC,CACCkc,WADD,EAECG,iBAFD,CADmC,EAKnC,UAACxV,GAAD,EAAM2V,GAAN,EAAc;AACb,MAAI3V,GAAJ,EAAS;AACR,QAAI2V,GAAJ,EAAS;AACR,UAAIkC,OAAO,GAAG7X,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAASkc,IAAnC,CADQ;;AAIR,UAAInC,GAAG,CAACoC,IAAJ,IAAY,CAACle,6BAAU8b,GAAG,CAACoC,IAAd,CAAjB,EAAsC;AACrCF,QAAAA,OAAO,GAAGG,4BAASH,OAAT,EAAkB,UAACI,SAAD,EAAYC,OAAZ,EAAwB;AACnD,iBAAOvC,GAAG,CAACoC,IAAJ,CAASG,OAAT,CAAP;AACA,SAFS,CAAV;AAGA;;AAED,UAAIC,UAAU,GAAGxC,GAAG,CAAC/Z,IAAJ,IAAY+Z,GAAG,CAAC/Z,IAAJ,CAASkc,IAAtC;AACA,UAAIA,IAAI,GAAGM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,YAAY,CAACR,cAAtC,EAAsDqE,UAAtD,EAAkEN,OAAlE,CAAX;AACA,aAAO,CAAChe,6BAAUie,IAAV,CAAD,GAAmBA,IAAnB,GAA0B,IAAjC;AACA,KAbD,MAaO;AACN,UAAIA,KAAI,GAAG9X,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAASkc,IAAhC;;AACA,aAAOM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,YAAY,CAACR,cAAtC,EAAsDgE,KAAtD,CAAP;AACA;AACD,GAlBD,MAkBO;AACN,WAAO,IAAP;AACA;AACD,CA3BkC,CAApB,CA4Bd,UAACtd,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CA5Bc,CAAhB;AA8BA;AACA;AACA;AACA;;AACA,IAAM6C,aAAa,GAAGnf,wCAAoB,CACzC,CACCkc,WADD,EAECG,iBAFD,CADyC,EAKzC,UAACxV,GAAD,EAAM2V,GAAN,EAAc;AACb,MAAI3V,GAAJ,EAAS;AACR,QAAI2V,GAAJ,EAAS;AAAA;;AACR,UAAI4C,aAAa,gBAAGvY,GAAG,CAACpE,IAAP,8CAAG,UAAU4c,UAA9B;AACA,UAAIC,gBAAgB,gBAAG9C,GAAG,CAAC/Z,IAAP,8CAAG,UAAU4c,UAAjC;AACA,UAAIA,UAAU,GAAGJ,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyBI,gBAAzB,EAA2CF,aAA3C,CAAjB;AACA,aAAO,CAAC1e,6BAAU2e,UAAV,CAAD,GAAyBA,UAAzB,GAAsC,IAA7C;AACA,KALD,MAKO;AAAA;;AACN,2BAAOxY,GAAG,CAACpE,IAAX,+CAAO,WAAU4c,UAAjB;AACA;AACD,GATD,MASO;AACN,WAAO,IAAP;AACA;AACD,CAlBwC,CAApB,CAmBpB,UAAChe,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAnBoB,CAAtB;AAqBA;AACA;AACA;AACA;;AACA,IAAMiD,aAAa,GAAG/Z,uBAAc,CACnC,CACC4W,cADD,CADmC,EAInC,UAACI,GAAD,EAAS;AACR,MAAIA,GAAJ,EAAS;AACR,QAAIgD,OAAO,GAAGhD,GAAG,CAAC/Z,IAAJ,IAAY+Z,GAAG,CAAC/Z,IAAJ,CAASkc,IAAnC;AACA,WAAOM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,YAAY,CAACR,cAAtC,EAAsD6E,OAAtD,CAAP;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAXkC,CAApC;AAcA;AACA;AACA;AACA;;AACA,IAAMC,mBAAmB,GAAGja,uBAAc,CACzC,CACC4W,cADD,CADyC,EAIzC,UAACI,GAAD,EAAS;AAAA;;AACR,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAE/Z,IAAL,0DAAW4c,UAAX,KAAyB,IAAhC;AACA,CANwC,CAA1C;AASA,IAAMK,sBAAsB,GAAGla,uBAAc,CAC5C,CACC+Y,qBADD,EAECnC,cAFD,EAGCb,eAHD,CAD4C,EAM5C,UAACe,MAAD,EAASE,GAAT,EAAchB,IAAd,EAAuB;AACtB,MAAI3U,GAAG,GAAG2U,IAAI,CAACc,MAAD,CAAd;;AAEA,MAAIzV,GAAJ,EAAS;AACR,QAAI2V,GAAJ,EAAS;AACR,UAAIkC,OAAO,GAAG7X,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAASkc,IAAnC,CADQ;;AAIR,UAAInC,GAAG,CAACoC,IAAJ,IAAY,CAACle,6BAAU8b,GAAG,CAACoC,IAAd,CAAjB,EAAsC;AACrCF,QAAAA,OAAO,GAAGG,4BAASH,OAAT,EAAkB,UAACI,SAAD,EAAYC,OAAZ,EAAwB;AACnD,iBAAOvC,GAAG,CAACoC,IAAJ,CAASG,OAAT,CAAP;AACA,SAFS,CAAV;AAGA;;AAED,UAAIC,UAAU,GAAGxC,GAAG,CAAC/Z,IAAJ,IAAY+Z,GAAG,CAAC/Z,IAAJ,CAASkc,IAAtC;AACA,UAAIA,IAAI,GAAGM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,YAAY,CAACR,cAAtC,EAAsDqE,UAAtD,EAAkEN,OAAlE,CAAX;AACA,aAAO,CAAChe,6BAAUie,IAAV,CAAD,GAAmBA,IAAnB,GAA0B,IAAjC;AACA,KAbD,MAaO;AACN,UAAIA,MAAI,GAAG9X,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAASkc,IAAhC;;AACA,aAAOM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,YAAY,CAACR,cAAtC,EAAsDgE,MAAtD,CAAP;AACA;AACD,GAlBD,MAkBO;AACN,WAAO,IAAP;AACA;AACD,CA9B2C,CAA7C;AAkCA;AAEA;;AACA,IAAMgB,kBAAkB,GAAG,SAArBA,kBAAqB,CAACte,KAAD,EAAQmN,UAAR,EAAuB;AACjD,MAAIA,UAAJ,EAAgB;AACf,QAAIA,UAAU,CAACiB,IAAf,EAAqB;AACpB;AACA,aAAOjB,UAAP;AACA,KAHD,MAGO;AACN,UAAIC,QAAQ,GAAG,wBAAf,CADM;;AAGN,UAAImI,gBAAgB,GAAGgJ,UAAU,CAACtR,6BAAX,CAAyCjN,KAAzC,EAAgDd,IAAI,CAACC,SAAL,CAAegO,UAAf,CAAhD,EAA4EC,QAA5E,CAAvB;AACA,UAAIoR,qBAAqB,GAAGC,kBAA2B,CAAC5K,mCAA5B,CAAgE7T,KAAhE,EAAuEuV,gBAAvE,CAA5B;;AAEA,UAAIiJ,qBAAqB,IAAIA,qBAAqB,CAACpR,QAAD,CAAlD,EAA8D;AAE7D;AACA,YAAI8C,QAAQ,GAAGhR,IAAI,CAACC,SAAL,CAAeoW,gBAAf,CAAf;AACA,YAAIpF,KAAK,GAAG4J,uBAAuB,CAAC3J,SAAxB,CAAkCF,QAAlC,CAAZ;AACA,YAAIwO,gBAAgB,GAAGF,qBAAqB,CAACpR,QAAD,CAA5C;;AAEA,YAAI+C,KAAK,IAAIA,KAAK,CAACoF,gBAAN,KAA2BA,gBAApC,IAAwDpF,KAAK,CAACuO,gBAAN,KAA2BA,gBAAvF,EAAyG;AACxG,iBAAOvO,KAAK,CAACsM,SAAb;AACA,SAFD,MAEO;AACN,cAAIA,SAAS,GAAIvR,yBAAMsT,qBAAqB,CAACpR,QAAD,CAA3B,EAAuC,UAAC2J,uBAAD,EAA0BhY,KAA1B;AAAA,mBAAoCwf,UAAU,CAAC9Q,4BAAX,CAAwCL,QAAxC,EAAkD2J,uBAAuB,CAACrJ,UAA1E,EAAsFqJ,uBAAuB,CAACpJ,aAA9G,EAA6H5O,KAA7H,CAApC;AAAA,WAAvC,CAAjB;;AAEAgb,UAAAA,uBAAuB,CAACnJ,WAAxB,CAAoC;AACnCV,YAAAA,QAAQ,EAARA,QADmC;AAEnCqF,YAAAA,gBAAgB,EAAhBA,gBAFmC;AAGnCmJ,YAAAA,gBAAgB,EAAhBA,gBAHmC;AAInCjC,YAAAA,SAAS,EAATA;AAJmC,WAApC;AAOA,iBAAOA,SAAP;AACA;AACD,OArBD,MAsBK;AACJ,eAAO,IAAP;AACA;AACD;AACD,GApCD,MAoCO;AACN,WAAO,IAAP;AACA;AACD,CAxCD;;AA2CA;AACA;AACA;AACA;AACA;;;AACA,IAAMkC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC3e,KAAD,EAAQib,MAAR,EAAmB;AAChD,MAAI9N,UAAU,GAAGkP,+BAA+B,CAACrc,KAAD,EAAQib,MAAR,CAAhD;AACA,SAAOqD,kBAAkB,CAACte,KAAD,EAAQmN,UAAR,CAAzB;AACA,CAHD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMyR,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC5e,KAAD,EAAQmN,UAAR,EAAoBqR,qBAApB,EAA2CK,8BAA3C,EAA2EhH,gBAA3E,EAA6F/J,UAA7F,EAAyGkD,wBAAzG,EAAmIiI,iBAAnI,EAAyJ;AAClL,MAAI7L,QAAQ,GAAGD,UAAU,CAAC1M,GAA1B;AACA,MAAIwT,WAAW,GAAGuK,qBAAqB,CAACpR,QAAD,CAAvC;AACA,MAAIS,oBAAoB,GAAGgR,8BAA8B,IAAIA,8BAA8B,CAACzR,QAAD,CAA3F;AACA,MAAIQ,KAAK,GAAGiK,gBAAgB,IAAIA,gBAAgB,CAACzK,QAAD,CAAhD;AACA,MAAIpK,aAAa,GAAGgO,wBAAwB,IAAIA,wBAAwB,CAAC5D,QAAD,CAAxE;AACA,MAAI3K,MAAM,GAAGwW,iBAAiB,IAAIA,iBAAiB,CAAC7L,QAAD,CAAnD;AACA,MAAIR,KAAK,GAAG,IAAZ;;AACA,MAAIqH,WAAW,IAAIA,WAAW,CAACnU,MAA/B,EAAuC;AACtCmU,IAAAA,WAAW,CAAC5T,OAAZ,CAAoB,UAAC0W,uBAAD,EAA0BhY,KAA1B,EAAoC;AACvD,UAAM2O,UAAU,GAAGqJ,uBAAuB,IAAIA,uBAAuB,CAACrJ,UAAtE;AACA,UAAMC,aAAa,GAAGoJ,uBAAuB,IAAIA,uBAAuB,CAACpJ,aAAzE,CAFuD;;AAKvD,UAAImR,UAAU,GAAGC,WAAY,CAAC5H,MAAb,CAAoBnX,KAApB,CAAjB;;AACA,UAAI8e,UAAU,KAAK,eAAnB,EAAoC;AACnC,YAAME,uBAAuB,GAAGC,WAAS,CAACxH,qBAAV,CAAgCzX,KAAhC,EAAuC,yBAAvC,CAAhC;AACA,YAAMkf,mBAAmB,GAAGD,WAAS,CAACxH,qBAAV,CAAgCzX,KAAhC,EAAuC,qBAAvC,CAA5B;AACA,YAAMmf,mBAAmB,GAAGF,WAAS,CAACxH,qBAAV,CAAgCzX,KAAhC,EAAuC,qBAAvC,CAA5B;;AAEA,YAAI0N,UAAU,IAAIA,UAAU,CAACtM,IAAzB,IAAiCsM,UAAU,CAACtM,IAAX,CAAgBkN,SAAjD,KAA+DZ,UAAU,CAACtM,IAAX,CAAgBgN,IAAhB,KAAyB,QAAzB,IAAqCV,UAAU,CAACtM,IAAX,CAAgBgN,IAAhB,KAAyB,QAA7H,CAAJ,EAA4I;AAC3IxB,UAAAA,KAAK,GAAG;AACPnM,YAAAA,GAAG,EAAE2M,QAAQ,GAAG,GAAX,GAAiBM,UAAU,CAACjN,GAD1B;AAEP2M,YAAAA,QAAQ,EAAEA,QAFH;AAGPgB,YAAAA,IAAI,EAAE,KAHC;AAIPJ,YAAAA,OAAO,EAAE;AACRS,cAAAA,GAAG,EAAEuQ,uBAAuB,GAAG,KAA1B,GAAkCxH,SAAA,CAAU0H,mBAAV,EAA+BC,mBAA/B,CAD/B;AAERxQ,cAAAA,MAAM,EAAE;AACPI,gBAAAA,MAAM,EAAErB,UAAU,CAACtM,IAAX,CAAgBkN;AADjB;AAFA;AAJF,WAAR;AAWA,SAZD,MAYO;AACN1B,UAAAA,KAAK,GAAG2R,UAAU,CAAC9Q,4BAAX,CAAwCL,QAAxC,EAAkDM,UAAlD,EAA8DC,aAA9D,EAA6E5O,KAA7E,CAAR;AACA;AACD,OApBD,MAoBO,IAAI2O,UAAU,IAAIA,UAAU,CAACtM,IAA7B,EAAmC;AACzCwL,QAAAA,KAAK,GAAG2R,UAAU,CAAC9Q,4BAAX,CAAwCL,QAAxC,EAAkDM,UAAlD,EAA8DC,aAA9D,EAA6E5O,KAA7E,EAAoFoO,UAApF,EAAgGS,KAAhG,EAAuGC,oBAAvG,EAA6HC,UAA7H,EAAyI9K,aAAzI,EAAwJP,MAAxJ,CAAR;AACA;AACD,KA7BD;AA8BA;;AACD,SAAOmK,KAAP;AACA,CAzCD;;AA4CA;AACA;AACA;AACA;AACA;;;AACA,IAAMwS,SAAS,GAAG,SAAZA,SAAY,CAACpf,KAAD,EAAQuN,WAAR,EAAwB;AACzC;AACA,MAAMiI,mBAAmB,GAAGtW,IAAI,CAACC,SAAL,CAAeof,UAAU,CAAC1N,6BAAX,CAAyCtD,WAAzC,CAAf,CAA5B;AACA,MAAIgI,gBAAgB,GAAGgJ,UAAU,CAACjR,mBAAX,CAA+BtN,KAA/B,EAAsCwV,mBAAtC,CAAvB;;AAEA,MAAID,gBAAgB,IAAIA,gBAAgB,CAACzV,MAAzC,EAAiD;AAChD,QAAI0e,qBAAqB,GAAGC,kBAA2B,CAAC5K,mCAA5B,CAAgE7T,KAAhE,EAAuEuV,gBAAvE,CAA5B;AACA,QAAIvE,wBAAwB,GAAGqO,cAAuB,CAACtO,qCAAxB,CAA8D/Q,KAA9D,EAAqEuV,gBAArE,CAA/B;AACA,QAAIsJ,8BAA8B,GAAGS,WAA6B,CAACrI,uCAA9B,CAAsEjX,KAAtE,EAA6EuV,gBAA7E,EAA+FhI,WAA/F,EAA4GiI,mBAA5G,CAArC;AACA,QAAIqC,gBAAgB,GAAG0H,MAAe,CAAC3H,oBAAhB,CAAqC5X,KAArC,EAA4CuN,WAA5C,EAAyDiI,mBAAzD,CAAvB;AACA,QAAI1H,UAAU,GAAG0R,UAAmB,CAACzH,wBAApB,CAA6C/X,KAA7C,CAAjB;AACA,QAAIiZ,iBAAiB,GAAGwG,OAAgB,CAAChL,4BAAjB,CAA8CzU,KAA9C,EAAqDuV,gBAArD,CAAxB;AAEA,QAAIrF,QAAQ,GAAGhR,IAAI,CAACC,SAAL,CAAeoW,gBAAf,CAAf;AACA,QAAIpF,KAAK,GAAG6J,cAAc,CAAC5J,SAAf,CAAyBF,QAAzB,CAAZ;;AACA,QAAIC,KAAK,IACLA,KAAK,CAACoF,gBAAN,KAA2BA,gBAD3B,IAEApF,KAAK,CAACqO,qBAAN,KAAgCA,qBAFhC,IAGArO,KAAK,CAACa,wBAAN,KAAmCA,wBAHnC,IAIAb,KAAK,CAAC0H,gBAAN,KAA2BA,gBAJ3B,IAKA1H,KAAK,CAAC0O,8BAAN,KAAyCA,8BALzC,IAMA1O,KAAK,CAACrC,UAAN,KAAqBA,UANrB,IAOAqC,KAAK,CAAC8I,iBAAN,KAA4BA,iBAPhC,EAQE;AACD,aAAO9I,KAAK,CAACsM,SAAb;AACA,KAVD,MAUO;AACN,UAAMA,SAAS,GAAG,EAAlB;AACAlP,MAAAA,WAAW,CAAClN,OAAZ,CAAoB,UAAC8M,UAAD,EAAgB;AACnC,YAAIA,UAAU,CAACjK,gBAAX,IAA+Bsb,qBAA/B,IAAwD,CAACnf,6BAAUmf,qBAAV,CAA7D,EAA+F;AAC9F,cAAM5R,KAAK,GAAGgS,iBAAiB,CAAC5e,KAAD,EAAQmN,UAAR,EAAoBqR,qBAApB,EAA2CK,8BAA3C,EAA2EhH,gBAA3E,EAA6F/J,UAA7F,EAAyGkD,wBAAzG,EAAmIiI,iBAAnI,CAA/B;;AACA,cAAGrM,KAAH,EAAU;AACT6P,YAAAA,SAAS,CAAClc,IAAV,CAAeqM,KAAf;AACA;AACD,SALD,MAKO,IAAGO,UAAU,CAACiB,IAAd,EAAoB;AAAA;;AAC1B,cAAMxB,MAAK,GAAG,uBAAAO,UAAU,CAACa,OAAX,oEAAoBQ,QAApB,qCACVrB,UADU;AAEba,YAAAA,OAAO,oCACHb,UAAU,CAACa,OADR;AAENQ,cAAAA,QAAQ,EAAE+P,UAAU,CAACrP,gBAAX,CAA4BpB,UAA5B,EAAwCX,UAAU,CAACa,OAAX,CAAmBQ,QAA3D;AAFJ;AAFM,eAMVrB,UANJ;;AAOAsP,UAAAA,SAAS,CAAClc,IAAV,CAAeqM,MAAf;AACA;AACD,OAhBD;AAkBAoN,MAAAA,cAAc,CAACpJ,WAAf,CAA2B;AAC1BV,QAAAA,QAAQ,EAARA,QAD0B;AAE1BqF,QAAAA,gBAAgB,EAAhBA,gBAF0B;AAG1BiJ,QAAAA,qBAAqB,EAArBA,qBAH0B;AAI1BxN,QAAAA,wBAAwB,EAAxBA,wBAJ0B;AAK1B6N,QAAAA,8BAA8B,EAA9BA,8BAL0B;AAM1BpC,QAAAA,SAAS,EAATA,SAN0B;AAO1B5E,QAAAA,gBAAgB,EAAhBA,gBAP0B;AAQ1B/J,QAAAA,UAAU,EAAVA,UAR0B;AAS1BmL,QAAAA,iBAAiB,EAAjBA;AAT0B,OAA3B;AAYA,aAAOwD,SAAP;AACA;AACD,GAtDD,MAsDO;AACN,WAAO,IAAP;AACA;AACD,CA9DD;;AAiEA;AACA;AACA;AACA;AACA;;;AACA,IAAMiD,YAAY,GAAG,SAAfA,YAAe,CAAC1f,KAAD,EAAQib,MAAR,EAAmB;AACvC,MAAI1N,WAAW,GAAGiP,sBAAsB,CAACxc,KAAD,EAAQib,MAAR,CAAxC;AACA,SAAOmE,SAAS,CAACpf,KAAD,EAAQuN,WAAR,CAAhB;AACA,CAHD;AAcA;AACA;AACA;;;AAEA,IAAMoS,2BAA2B,GAAGxb,uBAAc,CACjD,CACCwW,OADD,EAEC,UAAC3a,KAAD,EAAQ4f,QAAR;AAAA,SAAqBA,QAArB;AAAA,CAFD,CADiD,EAKjD,UAACzF,IAAD,EAAOyF,QAAP,EAAoB;AACnB,MAAIzF,IAAI,IAAIyF,QAAZ,EAAsB;AACrB,QAAIxM,QAAQ,GAAInB,4BAASkI,IAAT,EAAe,UAAC3U,GAAD,EAAS;AACvC,UAAIA,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAASqa,iBAAzB,EAA4C;AAC3C,eAAOoE,6BAAUra,GAAG,CAACpE,IAAJ,CAASqa,iBAAnB,EAAsCmE,QAAtC,CAAP;AACA,OAFD,MAEO;AACN,eAAO,KAAP;AACA;AACD,KANe,CAAhB;;AAOA,QAAIxM,QAAQ,IAAIA,QAAQ,CAACtT,MAAzB,EAAiC;AAChC,aAAOsT,QAAQ,CAAC,CAAD,CAAf,CADgC;AAEhC,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAbD,MAaO;AACN,WAAO,IAAP;AACA;AACD,CAtBgD,CAAlD;AAyBA;AACA;AACA;AACA;;AACA,IAAM0M,uBAAuB,GAAG3b,uBAAc,CAC7C,CAAC0W,WAAD,EACCG,iBADD,CAD6C,EAG7C,UAACxV,GAAD,EAAM2V,GAAN,EAAc;AACb,MAAI3V,GAAJ,EAAS;AACR,QAAI2V,GAAJ,EAAS;AACR,UAAI4E,YAAY,GAAGva,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAAS4e,kBAAxC;AACA,UAAIC,eAAe,GAAG9E,GAAG,CAAC/Z,IAAJ,IAAY+Z,GAAG,CAAC/Z,IAAJ,CAAS4e,kBAA3C;;AACA,UAAIE,SAAS,qCAAOD,eAAP,GAA2BF,YAA3B,CAAb;;AACA,aAAO,CAAC1gB,6BAAU6gB,SAAV,CAAD,GAAwBA,SAAxB,GAAoC,IAA3C;AACA,KALD,MAKO;AACN,UAAIA,UAAS,GAAG1a,GAAG,CAACpE,IAAJ,IAAYoE,GAAG,CAACpE,IAAJ,CAAS4e,kBAArC;;AACA,aAAOE,UAAS,IAAI,CAAC7gB,6BAAU6gB,UAAV,CAAd,GAAqCA,UAArC,GAAiD,IAAxD;AACA;AACD,GAVD,MAUO;AACN,WAAO,IAAP;AACA;AACD,CAjB4C,CAA9C;AAoBA,IAAMC,kCAAkC,GAAGhc,uBAAc,CACxD,CACC4W,cADD,CADwD,EAIxD,UAACI,GAAD,EAAS;AACR,MAAIA,GAAJ,EAAS;AACR,WAAOA,GAAG,CAAC/Z,IAAJ,IAAY+Z,GAAG,CAAC/Z,IAAJ,CAAS4e,kBAArB,IAA2C7E,GAAG,CAAC/Z,IAAJ,CAAS4e,kBAAT,CAA4BI,KAA9E;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAVuD,CAAzD;AAeA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMC,oBAAoB,GAAGlc,uBAAc,CAC1C,CACCsa,kBAA2B,CAAChK,4BAD7B,EAEC6L,WAAsB,CAAC7L,4BAFxB,EAGCsK,WAAY,CAAC1H,6BAHd,EAIC,UAACrX,KAAD,EAAQ+O,MAAR;AAAA,SAAoBA,MAApB;AAAA,CAJD,CAD0C;AAO1C;AACD;AACA;AACA;AACA;AACC,UAACwR,qBAAD,EAAwBC,uBAAxB,EAAgDC,WAAhD,EAA6D1R,MAA7D,EAAwE;AACvE;AACA,MAAIwR,qBAAqB,IAAIC,uBAAzB,IAAoDzR,MAAxD,EAAgE;AAC/D,WAAOA,MAAM,CAACvJ,GAAP,CAAW,UAACoH,KAAD;AAAA,aAAW8T,qBAAqB,CAACD,WAAD,EAAc7T,KAAd,EAAqB2T,qBAAqB,CAAC3T,KAAK,CAACxL,IAAN,CAAWX,GAAZ,CAA1C,EAA4D+f,uBAAuB,CAAC5T,KAAK,CAACxL,IAAN,CAAWX,GAAZ,CAAnF,CAAhC;AAAA,KAAX,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAnByC,CAA3C;AAsBA;AACA;AACA;AACA;;AACA,IAAMkgB,0CAA0C,GAAGxc,uBAAc,CAChE,CACC0W,WADD,EAECG,iBAFD,EAGC9N,eAAe,CAACtH,gBAHjB,CADgE,EAMhE,UAACJ,GAAD,EAAM2V,GAAN,EAAWzZ,UAAX,EAA0B;AACzB,MAAIsB,aAAa,GAAG,IAApB;AACA,MAAInE,MAAM,GAAG;AACZwD,IAAAA,KAAK,EAAE,IADK;AAEZI,IAAAA,MAAM,EAAE,IAFI;AAGZ,YAAM,IAHM;AAIZwH,IAAAA,QAAQ,EAAE;AAJE,GAAb;;AAMA,MAAIzE,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAASka,eAAhC,EAAiD;AAChDtY,IAAAA,aAAa,GAAGwC,GAAG,CAACpE,IAAJ,CAASka,eAAzB;AACA,GAFD,MAEO,IAAIH,GAAG,IAAIA,GAAG,CAAC/Z,IAAX,IAAmB+Z,GAAG,CAAC/Z,IAAJ,CAASka,eAAhC,EAAiD;AACvDtY,IAAAA,aAAa,GAAGmY,GAAG,CAAC/Z,IAAJ,CAASka,eAAzB;AACA;;AAED,MAAItY,aAAJ,EAAmB;AAClB,WAAO4d,2BAA2B,mCAAK/hB,MAAL;AAAamE,MAAAA,aAAa,EAAEA,aAAa,CAACA,aAA1C;AAAyDvC,MAAAA,GAAG,EAAEuC,aAAa,CAACvC;AAA5E,QAAkFiB,UAAlF,CAAlC;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAzB+D,CAAjE;AA4BA;AACA;AACA;AACA;;AACA,IAAMmf,iCAAiC,GAAG1c,uBAAc,CACvD,CACC0W,WADD,EAECG,iBAFD,EAGC9N,eAAe,CAACtH,gBAHjB,EAIC,UAAC5F,KAAD,EAAQib,MAAR,EAAgB6F,qBAAhB;AAAA,SAA0CA,qBAA1C;AAAA,CAJD,CADuD,EAOvD,UAACtb,GAAD,EAAMub,MAAN,EAAcrf,UAAd,EAA0Bof,qBAA1B,EAAoD;AACnD,MAAIpE,SAAS,GAAIqE,MAAM,IAAIA,MAAM,CAAC3f,IAAjB,IAAyB2f,MAAM,CAAC3f,IAAP,CAAY2N,MAAtC,IAAiD,IAAjE;AACA,MAAI0N,SAAS,GAAIjX,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAAS2N,MAA7B,IAAwC,IAAxD;;AAEA,MAAIvJ,GAAG,KAAKiX,SAAS,IAAIC,SAAlB,CAAP,EAAqC;AACpC,QAAI3N,MAAM,gCAAQ2N,SAAS,IAAI,EAArB,sBAA8BD,SAAS,IAAI,EAA3C,EAAV;AACA,QAAInZ,SAAS,GAAG,EAAhB;;AACA,QAAIyd,MAAJ,EAAY;AACX,UAAIC,CAAC,GAAGD,MAAM,CAAC3f,IAAP,CAAYqa,iBAApB;AACAnY,MAAAA,SAAS,qCAAOA,SAAP,GAAqByd,MAAM,CAAC3f,IAAP,CAAYqa,iBAAjC,CAAT;AACA;;AACDnY,IAAAA,SAAS,qCAAOA,SAAP,GAAqBkC,GAAG,CAACpE,IAAJ,CAASqa,iBAA9B,CAAT;AAEA1M,IAAAA,MAAM,GAAGA,MAAM,CAACvJ,GAAP,CAAW,UAAAoH,KAAK,EAAI;AAC5B,aAAOgU,2BAA2B,mCAAKtd,SAAL,GAAmBsJ,KAAnB,GAA2BlL,UAA3B,EAAuCof,qBAAvC,CAAlC;AACA,KAFQ,CAAT;AAIA,WAAO/R,MAAP;AACA,GAdD,MAcO;AACN,WAAO,IAAP;AACA;AACD,CA5BsD,CAAxD;AAgCA;AACA;AACA;AACA;;AACA,IAAMkS,oCAAoC,GAAG9c,uBAAc,CAC1D,CACC0c,iCADD,EAECF,0CAFD,CAD0D,EAK1D,UAACpT,WAAD,EAAc2T,oBAAd,EAAuC;AACtC,MAAMC,mBAAmB,GAAGD,oBAAoB,GAAG,CAACE,aAAa,CAACF,oBAAD,CAAd,CAAH,GAA2C,EAA3F;AACA,MAAMG,UAAU,GAAG9T,WAAW,GAAGA,WAAW,CAAC/H,GAAZ,CAAgB4b,aAAhB,CAAH,GAAoC,EAAlE;AACA,oBAAWE,KAAX,qBAAoBD,UAApB,SAAmCF,mBAAnC;AACA,CATyD,CAA3D;AAYA;AACA;AACA;AACA;AACA;;AACA,IAAMI,6BAA6B,GAAGpd,uBAAc,CACnD,CACC+V,eADD,EAECkB,gBAFD,CADmD,EAKnD,UAACjB,IAAD,EAAOqH,cAAP,EAA0B;AACzB,MAAIrH,IAAI,IAAI,CAAC9a,6BAAU8a,IAAV,CAAT,IAA4BqH,cAA5B,IAA8C,CAACniB,6BAAUmiB,cAAV,CAAnD,EAA8E;AAC7E,WAAOA,cAAc,CAAChc,GAAf,CAAmB,UAAAic,CAAC;AAAA,aAAItH,IAAI,CAACsH,CAAD,CAAR;AAAA,KAApB,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAXkD,CAApD;AAeA,IAAMC,oCAAoC,GAAGvd,uBAAc,CAC1D,CACC4W,cADD,EAECwG,6BAFD,EAGCrU,eAAe,CAACtH,gBAHjB,CAD0D,EAM1D,UAACmb,MAAD,EAAS5G,IAAT,EAAezY,UAAf,EAA8B;AAC7B,MAAMigB,eAAe,GAAG,EAAxB;AACA,MAAIjF,SAAS,GAAIqE,MAAM,IAAIA,MAAM,CAAC3f,IAAjB,IAAyB2f,MAAM,CAAC3f,IAAP,CAAY2N,MAAtC,IAAiD,IAAjE;;AAEA,MAAIoL,IAAJ,EAAU;AACTA,IAAAA,IAAI,CAAC9Z,OAAL,CAAa,UAACmF,GAAD,EAAS;AACrB,UAAIiX,SAAS,GAAIjX,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAAS2N,MAA7B,IAAwC,IAAxD;;AACA,UAAIvJ,GAAG,KAAKiX,SAAS,IAAIC,SAAlB,CAAP,EAAqC;AACpC,YAAI3N,MAAM,gCAAQ2N,SAAS,IAAI,EAArB,sBAA8BD,SAAS,IAAI,EAA3C,EAAV;AACA,YAAInZ,SAAS,GAAG,EAAhB;;AACA,YAAIyd,MAAJ,EAAY;AACX,cAAIC,CAAC,GAAGD,MAAM,CAAC3f,IAAP,CAAYqa,iBAApB;AACAnY,UAAAA,SAAS,qCAAOA,SAAP,GAAqByd,MAAM,CAAC3f,IAAP,CAAYqa,iBAAjC,CAAT;AACA;;AACDnY,QAAAA,SAAS,qCAAOA,SAAP,GAAqBkC,GAAG,CAACpE,IAAJ,CAASqa,iBAA9B,CAAT,CAPoC;AAUpC;;AACA,YAAMmG,WAAW,GAAG;AACnB1f,UAAAA,KAAK,EAAE,IADY;AAEnBW,UAAAA,SAAS,EAAE,IAFQ;AAGnBJ,UAAAA,MAAM,EAAE;AAHW,SAApB;AAMAsM,QAAAA,MAAM,GAAGA,MAAM,CAACvJ,GAAP,CAAW,UAAAoH,KAAK,EAAI;AAC5B,iBAAOgU,2BAA2B,mCAAKtd,SAAL,GAAmBsJ,KAAnB,GAA2BlL,UAA3B,EAAuCkgB,WAAvC,CAAlC;AACA,SAFQ,CAAT;AAIAD,QAAAA,eAAe,CAACnc,GAAG,CAAC/E,GAAL,CAAf,GAA2BsO,MAA3B;AACA;AAED,KA1BD;AA2BA;;AAED,SAAO4S,eAAP;AACA,CAzCyD,CAA3D;;AA8CA,IAAMP,aAAa,GAAG,SAAhBA,aAAgB,CAACxU,KAAD;AAAA,SAAY;AAAC/N,IAAAA,MAAM,EAAE+N,KAAK,CAAC9G,YAAf;AAA6B1E,IAAAA,IAAI,EAAEwL,KAAK,CAACA;AAAzC,GAAZ;AAAA,CAAtB;;AAEA,IAAM8T,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACD,WAAD,EAAc7T,KAAd,EAAqBiV,sBAArB,EAA6CC,wBAA7C,EAA0E;AACvG;AACA,MAAIC,WAAW,GAAG,IAAlB;;AACA,MAAIF,sBAAJ,EAA4B;AAC3B;AACA;AACA;AACA,KAACA,sBAAsB,CAAC,CAAD,CAAvB,EAA4BxhB,OAA5B,CAAoC,UAAA8O,MAAM,EAAI;AAC7C,UAAI1O,GAAG,aAAMmM,KAAK,CAACxL,IAAN,CAAWX,GAAjB,CAAP;AACA,UAAIuhB,eAAe,GAAG;AACrBC,QAAAA,eAAe,YAAKxB,WAAW,CAACzB,uBAAjB,gBAA8CyB,WAAW,CAACvB,mBAA1D,cAAiFuB,WAAW,CAACtB,mBAA7F,CADM;AAErB+C,QAAAA,eAAe,YAAKzB,WAAW,CAAC0B,uBAAjB,gBAA8C1B,WAAW,CAAC2B,mBAA1D,cAAiF3B,WAAW,CAAC4B,mBAA7F;AAFM,OAAtB;;AAKA,UAAIlT,MAAJ,EAAY;AACX1O,QAAAA,GAAG,eAAQ0O,MAAM,CAAC1O,GAAf,CAAH;AACAshB,QAAAA,WAAW,qCACP5S,MAAM,CAAC/N,IADA;AAEVuR,UAAAA,oBAAoB,EAAExD,MAAM,CAAC1O,GAFnB;AAGV6hB,UAAAA,oBAAoB,EAAEnT,MAAM,CAAC0F,mBAHnB;AAIVpU,UAAAA,GAAG,EAAHA,GAJU;AAKVuhB,UAAAA,eAAe,EAAfA;AALU,UAAX;AAOA,OATD,MASO;AACND,QAAAA,WAAW,GAAG;AACbthB,UAAAA,GAAG,EAAHA,GADa;AAEbuhB,UAAAA,eAAe,EAAfA;AAFa,SAAd;AAIA;AACD,KAtBD;AAuBA,GA9BsG;;;AAiCvG,MAAIF,wBAAwB,IAAIC,WAAhC,EAA6C;AAC5CD,IAAAA,wBAAwB,CAACzhB,OAAzB,CAAiC,UAAA8O,MAAM,EAAI;AAC1C,UAAIA,MAAJ,EAAY;AACX,YAAMoT,yBAAyB,GAAGpT,MAAM,CAACuH,qBAAP,IAAgCvH,MAAM,CAACuH,qBAAP,CAA6BxT,gBAA/F;;AACA,YAAGqf,yBAAH,EAA8B;AAC7BR,UAAAA,WAAW,CAACS,sBAAZ,GAAqCrT,MAAM,CAACuH,qBAA5C;AACA;AACD;AACD,KAPD;AAQA;;AACD,SAAOqL,WAAP;AACA,CA5CD;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASnB,2BAAT,CAAqChU,KAArC,EAA4ClL,UAA5C,EAAwDkgB,WAAxD,EAAqE;AACpE,MAAI/iB,MAAM,GAAG,EAAb;AACA,MAAI8C,cAAc,GAAG,EAArB;AACA,MAAImE,YAAY,GAAG,EAAnB;;AAEA,MAAI8G,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,OAArB,CAAb,EAA2C;AAC1CjC,IAAAA,MAAM,CAACuD,QAAP,GAAkBwK,KAAK,CAAC1K,KAAxB;AACA,GAFD,MAEO,IAAG,CAAC0f,WAAD,IAAiBA,WAAW,IAAIA,WAAW,CAAC1f,KAA/C,EAAuD;AAC7DP,IAAAA,cAAc,CAACO,KAAf,GAAuB,IAAvB;;AACA,QAAIR,UAAU,IAAIA,UAAU,CAACS,cAA7B,EAA6C;AAC5C2D,MAAAA,YAAY,CAAC1D,QAAb,GAAwBV,UAAU,CAACS,cAAnC;AACA;AACD;;AACD,MAAIyK,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,OAArB,CAAb,EAA2C;AAC1CjC,IAAAA,MAAM,CAAC0D,QAAP,GAAkBqK,KAAK,CAACvK,KAAxB;AACA,GAFD,MAEO,IAAG,CAACuf,WAAD,IAAiBA,WAAW,IAAIA,WAAW,CAACvf,KAA/C,EAAuD;AAC7DV,IAAAA,cAAc,CAACU,KAAf,GAAuB,IAAvB;;AACA,QAAIX,UAAU,IAAIA,UAAU,CAACY,cAA7B,EAA6C;AAC5CwD,MAAAA,YAAY,CAACvD,QAAb,GAAwBb,UAAU,CAACY,cAAnC;AACA;AACD;;AACD,MAAIsK,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,QAArB,CAAb,EAA4C;AAC3CjC,IAAAA,MAAM,CAAC8D,SAAP,GAAmBiK,KAAK,CAACnK,MAAzB;AACA,GAFD,MAEO,IAAG,CAACmf,WAAD,IAAiBA,WAAW,IAAIA,WAAW,CAACnf,MAA/C,EAAwD;AAC9Dd,IAAAA,cAAc,CAACc,MAAf,GAAwB,IAAxB;;AACA,QAAIf,UAAU,IAAIA,UAAU,CAACgB,eAA7B,EAA8C;AAC7CoD,MAAAA,YAAY,CAACnD,SAAb,GAAyBjB,UAAU,CAACgB,eAApC;AACA;AACD;;AACD,MAAIkK,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,MAArB,CAAb,EAA0C;AACzCjC,IAAAA,MAAM,CAACoD,OAAP,GAAiB2K,KAAK,QAAtB;AACA,GAFD,MAEO,IAAG,CAACgV,WAAD,IAAiBA,WAAW,IAAIA,WAAW,QAA9C,EAAsD;AAC5DjgB,IAAAA,cAAc,QAAd,GAAsB,IAAtB;;AACA,QAAID,UAAU,IAAIA,UAAU,CAACM,aAA7B,EAA4C;AAC3C8D,MAAAA,YAAY,CAAC7D,OAAb,GAAuBP,UAAU,CAACM,aAAlC;AACA;AACD;;AACD,MAAI4K,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,UAArB,CAAb,EAA8C;AAC7CjC,IAAAA,MAAM,CAAC8E,WAAP,GAAqBiJ,KAAK,CAAC3C,QAA3B;AACA,GAFD,MAEO,IAAG,CAAC2X,WAAD,IAAiBA,WAAW,IAAIA,WAAW,CAAC3X,QAA/C,EAA0D;AAChEtI,IAAAA,cAAc,CAACsI,QAAf,GAA0B,IAA1B;;AACA,QAAIvI,UAAU,IAAIA,UAAU,CAACiI,iBAA7B,EAAgD;AAC/C7D,MAAAA,YAAY,CAACnC,WAAb,GAA2BjC,UAAU,CAACiI,iBAAtC;AACA;AACD;;AAED,MAAIiD,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,eAArB,CAAb,EAAmD;AAClDjC,IAAAA,MAAM,CAACqE,gBAAP,GAA0B0J,KAAK,CAAC5J,aAAhC;AACA;;AAED,MAAI4J,KAAK,IAAIA,KAAK,CAAC9L,cAAN,CAAqB,WAArB,CAAb,EAA+C;AAC9CjC,IAAAA,MAAM,CAACkE,YAAP,GAAsB6J,KAAK,CAAC/J,SAA5B;AACA,GAFD,MAEO,IAAG,CAAC+e,WAAD,IAAiBA,WAAW,IAAIA,WAAW,CAAC/e,SAA/C,EAA2D;AACjElB,IAAAA,cAAc,CAACkB,SAAf,GAA2B,IAA3B;;AACA,QAAInB,UAAU,IAAIA,UAAU,CAACoB,kBAA7B,EAAiD;AAChDgD,MAAAA,YAAY,CAAC/C,YAAb,GAA4BrB,UAAU,CAACoB,kBAAvC;AACA;AACD;;AAEDgD,EAAAA,YAAY,qCAAOjH,MAAP,GAAkBiH,YAAlB,CAAZ;AAEA,SAAO;AACN8G,IAAAA,KAAK,EAAEA,KAAK,GAAGA,KAAH,GAAW,IADjB;AAEN/N,IAAAA,MAAM,EAANA,MAFM;AAGN8C,IAAAA,cAAc,EAAdA,cAHM;AAINmE,IAAAA,YAAY,EAAZA;AAJM,GAAP;AAMA;;AAED,sBAAe;AACX4U,EAAAA,YAAY,EAAZA,YADW;AAEdF,EAAAA,eAAe,EAAfA,eAFc;AAGdF,EAAAA,eAAe,EAAfA,eAHc;AAId2C,EAAAA,yBAAyB,EAAzBA,yBAJc;AAMdqB,EAAAA,kBAAkB,EAAlBA,kBANc;AAOdK,EAAAA,qBAAqB,EAArBA,qBAPc;AAQdtC,EAAAA,+BAA+B,EAA/BA,+BARc;AAUdH,EAAAA,yBAAyB,EAAzBA,yBAVc;AAYdkD,EAAAA,SAAS,EAATA,SAZc;AAadM,EAAAA,YAAY,EAAZA,YAbc;AAcdlD,EAAAA,sBAAsB,EAAtBA,sBAdc;AAgBd3B,EAAAA,WAAW,EAAXA,WAhBc;AAiBdmB,EAAAA,8BAA8B,EAA9BA,8BAjBc;AAkBdlB,EAAAA,oBAAoB,EAApBA,oBAlBc;AAmBdZ,EAAAA,eAAe,EAAfA,eAnBc;AAqBdgD,EAAAA,qBAAqB,EAArBA,qBArBc;AAsBdmB,EAAAA,sBAAsB,EAAtBA,sBAtBc;AAuBdtD,EAAAA,cAAc,EAAdA,cAvBc;AAwBdC,EAAAA,iBAAiB,EAAjBA,iBAxBc;AAyBde,EAAAA,4BAA4B,EAA5BA,4BAzBc;AA0BdX,EAAAA,gBAAgB,EAAhBA,gBA1Bc;AA2Bd8C,EAAAA,aAAa,EAAbA,aA3Bc;AA4BdE,EAAAA,mBAAmB,EAAnBA,mBA5Bc;AA6BdxD,EAAAA,UAAU,EAAVA,UA7Bc;AA8BdR,EAAAA,kBAAkB,EAAlBA,kBA9Bc;AAgCdpW,EAAAA,WAAW,EAAXA,aAhCc;AAkCdoZ,EAAAA,OAAO,EAAPA,OAlCc;AAmCdU,EAAAA,aAAa,EAAbA,aAnCc;AAqCd;AACAmD,EAAAA,oCAAoC,EAApCA,oCAtCc;AAuCdN,EAAAA,0CAA0C,EAA1CA,0CAvCc;AAwCdC,EAAAA,2BAA2B,EAA3BA,2BAxCc;AAyCdP,EAAAA,oBAAoB,EAApBA,oBAzCc;AA0CdQ,EAAAA,iCAAiC,EAAjCA,iCA1Cc;AA2Cda,EAAAA,oCAAoC,EAApCA,oCA3Cc;AA4Cd/B,EAAAA,2BAA2B,EAA3BA,2BA5Cc;AA6CdQ,EAAAA,kCAAkC,EAAlCA,kCA7Cc;AA8CdL,EAAAA,uBAAuB,EAAvBA;AA9Cc,CAAf;;ACtnCA,IAAM9b,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACyiB,KAAN,CAAYC,cAAhB;AAAA,CAAzB;;AAEA,IAAMpe,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMgB,sBAAoB,GAAGwH,eAAM,CAACxH,oBAAP,CAA4BhB,aAA5B,CAA7B;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AAEA,kBAAe;AACdM,EAAAA,MAAM,EAANA,QADc;AAEdD,EAAAA,cAAc,EAAdA,gBAFc;AAGdW,EAAAA,oBAAoB,EAApBA,sBAHc;AAIdG,EAAAA,YAAY,EAAZA,cAJc;AAKdE,EAAAA,SAAS,EAATA,WALc;AAOdrB,EAAAA,WAAW,EAAXA;AAPc,CAAf;;ACRA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACyiB,KAAN,CAAYE,SAAhB;AAAA,CAAzB;;AAEA,IAAMre,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMgB,sBAAoB,GAAGwH,eAAM,CAACxH,oBAAP,CAA4BhB,aAA5B,CAA7B;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AAEA,kBAAe;AACdM,EAAAA,MAAM,EAANA,QADc;AAEdD,EAAAA,cAAc,EAAdA,gBAFc;AAGdW,EAAAA,oBAAoB,EAApBA,sBAHc;AAIdG,EAAAA,YAAY,EAAZA,cAJc;AAKdE,EAAAA,SAAS,EAATA,WALc;AAOdkB,EAAAA,SAAS,EAAEiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAPG;AAQdoC,EAAAA,iBAAiB,EAAEoG,eAAM,CAACpG,iBAAP,CAAyBpC,aAAzB,CARL;AAUdA,EAAAA,WAAW,EAAXA;AAVc,CAAf;;ACVA,YAAe;AACd0e,EAAAA,cAAc,EAAdA,WADc;AAEdC,EAAAA,SAAS,EAATA;AAFc,CAAf;;ACAA,IAAM3e,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACoJ,UAAV;AAAA,CAAzB;;AAEA,IAAMwZ,aAAa,GAAIpW,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAvB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AAEA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AAEA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAEA,IAAMuH,gBAAc,GAAGiB,eAAM,CAACjB,cAAP,CAAsBvH,aAAtB,CAAvB;AAEA,kBAAe;AACd4e,EAAAA,aAAa,EAAbA,aADc;AAGdvd,EAAAA,SAAS,EAATA,WAHc;AAIdF,EAAAA,YAAY,EAAZA,cAJc;AAMdd,EAAAA,cAAc,EAAdA,gBANc;AAQd6B,EAAAA,QAAQ,EAARA,UARc;AASdK,EAAAA,SAAS,EAATA,WATc;AAWdC,EAAAA,YAAY,EAAZA,cAXc;AAYdC,EAAAA,wBAAwB,EAAxBA,0BAZc;AAcdY,EAAAA,kBAAkB,EAAlBA,oBAdc;AAedR,EAAAA,wBAAwB,EAAxBA,0BAfc;AAiBd0E,EAAAA,cAAc,EAAdA,gBAjBc;AAkBdvH,EAAAA,WAAW,EAAXA;AAlBc,CAAf;;AChBA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAAC6iB,aAAV;AAAA,CAAzB;;AAEA,IAAMve,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMoB,eAAa,GAAGoH,eAAM,CAACpH,aAAP,CAAqBpB,aAArB,CAAtB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMuH,gBAAc,GAAGiB,eAAM,CAACjB,cAAP,CAAsBvH,aAAtB,CAAvB;AAEA,IAAM8e,WAAW,GAAG3e,uBAAc,CACjC,CAACG,QAAD,EAAS,UAACtE,KAAD,EAAQ+iB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAAT,CADiC,EAEjC,UAACF,aAAD,EAAgBE,MAAhB,EAA2B;AAC1B,MAAIF,aAAa,IAAIE,MAArB,EAA4B;AAC3B,QAAI,CAACnN,6BAAUmN,MAAV,CAAL,EAAwBA,MAAM,GAAG,CAACA,MAAD,CAAT;;AACxB,QAAI3P,QAAQ,GAAGnB,4BAAS4Q,aAAT,EAAwB,UAACG,YAAD,EAAkB;AACxD,aAAO9Q,8BAAW6Q,MAAX,EAAmBC,YAAY,CAAC5hB,IAAb,CAAkB6hB,KAArC,CAAP;AACA,KAFc,CAAf;;AAGA,WAAO7P,QAAQ,CAACtT,MAAT,GAAkBsT,QAAlB,GAA6B,IAApC;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAZgC,CAAlC;AAeA,IAAM8P,+BAA+B,GAAG/e,uBAAc,CACrD,CAAC2e,WAAD,CADqD,EAErD,UAACD,aAAD,EAAmB;AAClB,MAAIA,aAAa,IAAIA,aAAa,CAAC/iB,MAAnC,EAA0C;AACzC,QAAIqjB,gBAAgB,GAAGN,aAAa,CAACrd,GAAd,CAAkB,UAACwd,YAAD,EAAkB;AAC1D,aAAOA,YAAY,CAAC5hB,IAAb,CAAkBgI,UAAzB;AACA,KAFsB,CAAvB;;AAGA,QAAIga,mBAAmB,GAAGC,6BAAUxa,0BAAOC,6BAAUqa,gBAAV,CAAP,CAAV,CAA1B;;AACA,WAAOC,mBAAmB,CAACtjB,MAApB,GAA6BsjB,mBAA7B,GAAmD,IAA1D;AAEA,GAPD,MAOO;AACN,WAAO,IAAP;AACA;AACD,CAboD,CAAtD;AAgBA,kBAAe;AACd/d,EAAAA,SAAS,EAATA,WADc;AAEdD,EAAAA,aAAa,EAAbA,eAFc;AAGdke,EAAAA,gBAAgB,EAAEhf,QAHJ;AAKdwe,EAAAA,WAAW,EAAXA,WALc;AAMdvX,EAAAA,cAAc,EAAdA,gBANc;AAOd2X,EAAAA,+BAA+B,EAA/BA;AAPc,CAAf;;ACzCA,IAAMlf,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAACujB,mBAAjB;AAAA,CAApB;;AACA,IAAMlf,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAM0B,uBAAqB,GAAG8G,eAAM,CAAC9G,qBAAP,CAA6B1B,aAA7B,CAA9B;AAEA,kBAAe;AACdkC,EAAAA,QAAQ,EAARA,UADc;AAEdlC,EAAAA,WAAW,EAAXA,aAFc;AAGdK,EAAAA,cAAc,EAAdA,gBAHc;AAIdqB,EAAAA,qBAAqB,EAArBA;AAJc,CAAf;;ACLA,IAAM1B,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACgJ,KAAV;AAAA,CAAzB;;AAEA,IAAM1E,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMgB,sBAAoB,GAAGwH,eAAM,CAACxH,oBAAP,CAA4BhB,aAA5B,CAA7B;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMoB,eAAa,GAAGoH,eAAM,CAACpH,aAAP,CAAqBpB,aAArB,CAAtB;AACA,IAAMsB,iBAAe,GAAGkH,eAAM,CAAClH,eAAP,CAAuBtB,aAAvB,CAAxB;AAEA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AAEA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AACA,IAAM2B,YAAU,GAAG6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAAnB;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAGA,kBAAe;AACdqB,EAAAA,SAAS,EAATA,WADc;AAEdF,EAAAA,YAAY,EAAZA,cAFc;AAGdC,EAAAA,aAAa,EAAbA,eAHc;AAIdE,EAAAA,eAAe,EAAfA,iBAJc;AAKdhB,EAAAA,MAAM,EAANA,QALc;AAMdD,EAAAA,cAAc,EAAdA,gBANc;AAOdW,EAAAA,oBAAoB,EAApBA,sBAPc;AASduB,EAAAA,SAAS,EAATA,WATc;AAWdC,EAAAA,YAAY,EAAZA,cAXc;AAYdC,EAAAA,wBAAwB,EAAxBA,0BAZc;AAcdY,EAAAA,kBAAkB,EAAlBA,oBAdc;AAed1B,EAAAA,UAAU,EAAVA,YAfc;AAgBdkB,EAAAA,wBAAwB,EAAxBA,0BAhBc;AAkBd7C,EAAAA,WAAW,EAAXA;AAlBc,CAAf;;ACjBA;AACA,IAAMwf,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACxjB,KAAD;AAAA,SAAWA,KAAK,CAACyjB,MAAN,CAAaA,MAAxB;AAAA,CAA7B;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAC1jB,KAAD,EAAQS,GAAR;AAAA,SAAgBT,KAAK,CAACyjB,MAAN,CAAaA,MAAb,CAAoBhjB,GAApB,CAAhB;AAAA,CAAtB;;AACA,IAAMkjB,WAAW,GAAG,SAAdA,WAAc,CAAC3jB,KAAD,EAAQS,GAAR;AAAA,SAAgBT,KAAK,CAACyjB,MAAN,CAAapJ,IAAb,CAAkB5Z,GAAlB,CAAhB;AAAA,CAApB;;AAEA,IAAMmjB,yBAAyB,GAAGzf,uBAAc,CAC/C,CACCwf,WADD,EAECH,oBAFD,CAD+C,EAK/C,UAACrI,GAAD,EAAMsI,MAAN,EAAiB;AAChB,MAAItI,GAAG,IAAIA,GAAG,CAACsI,MAAX,IAAqBtI,GAAG,CAACsI,MAAJ,CAAW3jB,MAApC,EAA4C;AAC3C,QAAI+jB,SAAS,GAAE,EAAf;;AACA,8BAAO1I,GAAG,CAACsI,MAAX,EAAmB,UAAChjB,GAAD,EAAS;AAC3BojB,MAAAA,SAAS,CAACpjB,GAAD,CAAT,GAAiBgjB,MAAM,CAAChjB,GAAD,CAAvB;AACA,KAFD;;AAGA,WAAOojB,SAAP;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAf8C,CAAhD;;AAmBA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA9jB,KAAK,EAAI;AACtC,SAAO;AACNmC,IAAAA,cAAc,EAAEnC,KAAK,CAAC6D,MAAN,CAAaC,SADvB;AAENpB,IAAAA,eAAe,EAAE1C,KAAK,CAACmJ,OAAN,CAAcrF,SAFzB;AAGNlB,IAAAA,gBAAgB,EAAE5C,KAAK,CAACmJ,OAAN,CAAczH,UAH1B;AAINoB,IAAAA,kBAAkB,EAAE9C,KAAK,CAACoJ,UAAN,CAAiBtF;AAJ/B,GAAP;AAMA,CAPD;;AAUA,IAAMigB,qBAAqB,GAAGplB,wCAAoB,CACjD,CACC+kB,aADD,EAECI,qBAFD,EAGC,UAAC9jB,KAAD,EAAQgkB,KAAR,EAAelD,qBAAf;AAAA,SAAyCA,qBAAzC;AAAA,CAHD,CADiD,EAMjD,UAACkD,KAAD,EAAQtiB,UAAR,EAAoBof,qBAApB,EAA8C;AAC7C,MAAIkD,KAAK,IAAItiB,UAAb,EAAyB;AACxB,QAAIuiB,OAAO,GAAGC,gBAAgB,CAACF,KAAK,CAAC5iB,IAAP,EAAaM,UAAb,EAAyBof,qBAAzB,CAA9B;AACA,6CAAWkD,KAAX,GAAqBC,OAArB;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAbgD,CAApB,CAe7B,UAACjkB,KAAD,EAAQgkB,KAAR;AAAA,mBAAqBA,KAAK,IAAIA,KAAK,CAACvjB,GAApC;AAAA,CAf6B,CAA9B;AAkBA,IAAM0jB,eAAe,GAAGxlB,wCAAoB,CAC3C,CACC2hB,WAAsB,CAACrK,uBADxB,EAEC,UAACjW,KAAD,EAAQnB,MAAR,EAAgBulB,QAAhB;AAAA,SAA6BA,QAA7B;AAAA,CAFD,CAD2C,EAK3C,UAAChjB,IAAD,EAAOgjB,QAAP,EAAoB;AACnB,MAAIA,QAAQ,IAAIhjB,IAAhB,EAAsB;AACrB,WAAOA,IAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAX0C,CAApB,CAYtB,UAACpB,KAAD,EAAQnB,MAAR,EAAgBulB,QAAhB,EAA6B;AAAC,mBAAUllB,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAV,cAAoCulB,QAApC;AAA+C,CAZvD,CAAxB;AAcA,IAAMC,gBAAgB,GAAG1lB,wCAAoB,CAC5C,CACC2hB,WAAsB,CAAC7J,aADxB,EAEC,UAACzW,KAAD,EAAQnB,MAAR,EAAgBqR,QAAhB;AAAA,SAA6BA,QAA7B;AAAA,CAFD,CAD4C,EAK5C,UAAC9O,IAAD,EAAO8O,QAAP,EAAoB;AACnB,MAAIA,QAAQ,IAAI9O,IAAhB,EAAsB;AACrB,WAAOA,IAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAX2C,CAApB,CAYvB,UAACpB,KAAD,EAAQnB,MAAR,EAAgBqR,QAAhB,EAA6B;AAAC,mBAAUhR,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAV,cAAoCqR,QAApC;AAA+C,CAZtD,CAAzB;AAgBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,SAASgU,gBAAT,CAA0B9iB,IAA1B,EAAgCM,UAAhC,EAA4Cof,qBAA5C,EAAmE;AAClE,MAAIjiB,MAAM,GAAG,EAAb;AACA,MAAI8C,cAAc,GAAG,EAArB;AACA,MAAImE,YAAY,GAAG,EAAnB;;AAEA,MAAI1E,IAAI,IAAIA,IAAI,CAACN,cAAL,CAAoB,OAApB,CAAZ,EAAyC;AACxCjC,IAAAA,MAAM,CAACuD,QAAP,GAAkBhB,IAAI,CAACc,KAAvB;AACA,GAFD,MAEO,IAAI4e,qBAAqB,IAAIA,qBAAqB,CAAC5e,KAAnD,EAA0D;AAChEP,IAAAA,cAAc,CAACO,KAAf,GAAuB,IAAvB;;AACA,QAAIR,UAAU,IAAIA,UAAU,CAACS,cAA7B,EAA6C;AAC5C2D,MAAAA,YAAY,CAAC1D,QAAb,GAAwBV,UAAU,CAACS,cAAnC;AACA;AACD;;AAED,MAAIf,IAAI,IAAIA,IAAI,CAACN,cAAL,CAAoB,SAApB,CAAZ,EAA2C;AAC1C,QAAIM,IAAI,CAAC+H,OAAL,CAAarJ,MAAb,GAAsB,CAA1B,EAA6B;AAC5BjB,MAAAA,MAAM,CAAC8D,SAAP,GAAmB;AAAC,cAAIvB,IAAI,CAAC+H;AAAV,OAAnB;AACA,KAFD,MAEO;AACNtK,MAAAA,MAAM,CAAC8D,SAAP,GAAmBvB,IAAI,CAAC+H,OAAL,CAAa,CAAb,CAAnB;AACA;AACD,GAND,MAMO,IAAI2X,qBAAqB,IAAIA,qBAAqB,CAACre,MAAnD,EAA2D;AACjEd,IAAAA,cAAc,CAACc,MAAf,GAAwB,IAAxB;;AACA,QAAIf,UAAU,IAAIA,UAAU,CAACgB,eAA7B,EAA8C;AAC7CoD,MAAAA,YAAY,CAACnD,SAAb,GAAyBjB,UAAU,CAACgB,eAApC;AACA,KAFD,MAEO,IAAIhB,UAAU,IAAIA,UAAU,CAACkB,gBAA7B,EAA+C;AACrDkD,MAAAA,YAAY,CAACnD,SAAb,GAAyB;AAAC,cAAIjB,UAAU,CAACkB;AAAhB,OAAzB;AACA;AACD;;AAED,MAAIxB,IAAI,IAAIA,IAAI,CAACN,cAAL,CAAoB,YAApB,CAAZ,EAA8C;AAC7C,QAAIM,IAAI,CAACgI,UAAL,CAAgBtJ,MAAhB,GAAyB,CAA7B,EAAgC;AAC/BjB,MAAAA,MAAM,CAACkE,YAAP,GAAsB;AAAC,cAAI3B,IAAI,CAACgI;AAAV,OAAtB;AACA,KAFD,MAEO;AACNvK,MAAAA,MAAM,CAACkE,YAAP,GAAsB3B,IAAI,CAACgI,UAAL,CAAgB,CAAhB,CAAtB;AACA;AACD,GAND,MAMO,IAAI0X,qBAAqB,IAAIA,qBAAqB,CAACje,SAAnD,EAA8D;AACpElB,IAAAA,cAAc,CAACkB,SAAf,GAA2B,IAA3B;;AACA,QAAInB,UAAU,IAAIA,UAAU,CAACoB,kBAA7B,EAAiD;AAChDgD,MAAAA,YAAY,CAAC/C,YAAb,GAA4BrB,UAAU,CAACoB,kBAAvC;AACA,KAFD,MAEO,IAAIpB,UAAU,IAAIA,UAAU,CAACmI,mBAA7B,EAAkD;AACxD/D,MAAAA,YAAY,CAAC/C,YAAb,GAA4B;AAAC,cAAIrB,UAAU,CAACmI;AAAhB,OAA5B;AACA;AACD;;AAED,MAAIzI,IAAI,IAAIA,IAAI,CAACN,cAAL,CAAoB,eAApB,CAAZ,EAAiD;AAChDjC,IAAAA,MAAM,CAACqE,gBAAP,GAA0B9B,IAAI,CAAC4B,aAA/B;AACA;;AAED8C,EAAAA,YAAY,qCAAOjH,MAAP,GAAkBiH,YAAlB,CAAZ;AAEA,SAAO;AACNjH,IAAAA,MAAM,EAANA,MADM;AAEN8C,IAAAA,cAAc,EAAdA,cAFM;AAGNmE,IAAAA,YAAY,EAAZA;AAHM,GAAP;AAKA;;AAED,kBAAe;AACdie,EAAAA,qBAAqB,EAArBA,qBADc;AAEdH,EAAAA,yBAAyB,EAAzBA,yBAFc;AAGdO,EAAAA,eAAe,EAAfA,eAHc;AAIdE,EAAAA,gBAAgB,EAAhBA,gBAJc;AAKdV,EAAAA,WAAW,EAAXA;AALc,CAAf;;ACxJA,IAAM5f,aAAW,GAAG,SAAdA,WAAc,CAAC/D,KAAD;AAAA,SAAWA,KAAK,CAACskB,UAAjB;AAAA,CAApB;;AAEA,IAAMC,qBAAqB,GAAGpgB,uBAAc,CAC3C,CACCJ,aADD,EAEC,UAAC/D,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFD,CAD2C,EAK3C,UAAC6jB,UAAD,EAAa7jB,GAAb,EAAqB;AACpB,MAAI6jB,UAAU,IAAI7jB,GAAd,IAAqB6jB,UAAU,CAAC7jB,GAAD,CAAnC,EAA0C;AACzC,WAAO6jB,UAAU,CAAC7jB,GAAD,CAAjB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAX0C,CAA5C;AAcA,IAAM+jB,GAAG,GAAGrgB,uBAAc,CACzB,CACCogB,qBADD,EAEC,UAACvkB,KAAD,EAAQS,GAAR,EAAa+W,IAAb;AAAA,SAAsBA,IAAtB;AAAA,CAFD,CADyB,EAKzB,UAACiN,cAAD,EAAiBjN,IAAjB;AAAA,SAA0B5P,yBAAM6c,cAAN,EAAsBjN,IAAtB,EAA4B,IAA5B,CAA1B;AAAA,CALyB,CAA1B;AAQA,kBAAe;AACdgN,EAAAA,GAAG,EAAHA,GADc;AAEdD,EAAAA,qBAAqB,EAArBA,qBAFc;AAGdhZ,EAAAA,cAAc,EAAExH;AAHF,CAAf;;ACvBA,IAAMC,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAACoB,IAAN,CAAW2T,kBAAtB;AAAA,CAApB;;AAEA,IAAMrW,UAAQ,GAAG8N,eAAM,CAAC9N,QAAP,CAAgBsF,aAAhB,CAAjB;AACA,IAAM8D,oBAAkB,GAAG0E,eAAM,CAAC1E,kBAAP,CAA0B9D,aAA1B,CAA3B;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAM0T,kBAAgB,GAAGjQ,wBAAuB,CAAC,UAACzH,KAAD,EAAQS,GAAR,EAAgB;AAAA;;AAChE,SAAO,iBAAAuD,aAAW,CAAChE,KAAD,CAAX,oFAAoBiE,KAApB,0EAA4BxD,GAA5B,MAAoC,IAA3C;AACA,CAF+C,CAAhD;AAIA;AACA;AACA;AACA;AACA;;AACA,IAAM8F,WAAS,GAAGwB,wBAAuB,CAAC,UAAA1B,IAAI,EAAI;AACjD,SAAOA,IAAI,CAACb,GAAL,CAAS,UAAA/E,GAAG;AAAA,WAAIiX,kBAAgB,CAACjX,GAAD,CAApB;AAAA,GAAZ,CAAP;AACA,CAFwC,CAAzC;AAIA;AACA;AACA;AACA;AACA;;AACA,IAAMkF,YAAU,GAAGoC,wBAAuB,CAAC,UAAAlJ,MAAM,EAAI;AACpD,MAAME,KAAK,GAAG+I,oBAAkB,CAACjJ,MAAD,EAAS,IAAT,CAAhC;;AACA,MAAIE,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEA,KAAX,EAAkB;AACjB;AACA,QAAMsH,IAAI,GAAG4L,4BAASvR,MAAM,CAAC6D,MAAP,CAAcxF,KAAK,CAACA,KAApB,CAAT,EAAqC,UAAC0B,GAAD;AAAA,aAAS,OAAOA,GAAP,KAAe,QAAxB;AAAA,KAArC,CAAb;;AACA,QAAI4F,IAAJ,aAAIA,IAAJ,eAAIA,IAAI,CAAEvG,MAAV,EAAkB;AACjB,aAAOyG,WAAS,CAACF,IAAD,CAAhB;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GARD,MAQO;AACN,WAAO,IAAP;AACA;AACD,CAbyC,CAA1C;AAeA;AACA;AACA;AACA;AACA;;AACA,IAAMqe,kDAAkD,GAAG3c,wBAAuB,CAAC,UAAAlJ,MAAM,EAAI;AAC5F,MAAMwT,SAAS,GAAG1M,YAAU,CAAC9G,MAAD,CAA5B;;AACA,MAAIwT,SAAJ,EAAe;AACd,QAAMsS,KAAK,GAAG,EAAd;;AACA,iCAAUtS,SAAV,EAAqB,UAAAC,QAAQ,EAAI;AAChCqS,MAAAA,KAAK,CAACrS,QAAQ,CAAClR,IAAT,CAAciU,sBAAf,CAAL,GAA8C/C,QAAQ,CAAClR,IAAT,CAAc2B,YAA5D;AACA,KAFD;;AAGA,WAAO4hB,KAAP;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAXiF,CAAlF;AAaA,yBAAe;AACdD,EAAAA,kDAAkD,EAAlDA,kDADc;AAEXhmB,EAAAA,QAAQ,EAARA;AAFW,CAAf;;AC9DA,IAAMsF,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACoB,IAAN,CAAWyM,oBAAf;AAAA,CAAzB;;AAEA,IAAMnP,UAAQ,GAAG8N,eAAM,CAAC9N,QAAP,CAAgBsF,aAAhB,CAAjB;AACA,IAAM8D,oBAAkB,GAAG0E,eAAM,CAAC1E,kBAAP,CAA0B9D,aAA1B,CAA3B;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAM0T,kBAAgB,GAAGjQ,wBAAuB,CAAC,UAACzH,KAAD,EAAQS,GAAR,EAAgB;AAAA;;AAChE,SAAO,iBAAAuD,aAAW,CAAChE,KAAD,CAAX,oFAAoBiE,KAApB,0EAA4BxD,GAA5B,MAAoC,IAA3C;AACA,CAF+C,CAAhD;AAIA;AACA;AACA;AACA;AACA;;AACA,IAAM8F,WAAS,GAAGwB,wBAAuB,CAAC,UAAA1B,IAAI,EAAI;AACjD,SAAOA,IAAI,CAACb,GAAL,CAAS,UAAA/E,GAAG;AAAA,WAAIiX,kBAAgB,CAACjX,GAAD,CAApB;AAAA,GAAZ,CAAP;AACA,CAFwC,CAAzC;AAIA;AACA;AACA;AACA;AACA;;AACA,IAAMkF,YAAU,GAAGoC,wBAAuB,CAAC,UAAAlJ,MAAM,EAAI;AACpD,MAAME,KAAK,GAAG+I,oBAAkB,CAACjJ,MAAD,EAAS,IAAT,CAAhC;;AACA,MAAIE,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEA,KAAX,EAAkB;AACjB,QAAIsH,IAAI,GAAG3F,MAAM,CAAC6D,MAAP,CAAcxF,KAAK,CAACA,KAApB,CAAX;;AACA,QAAIsH,IAAJ,EAAU;AACT,aAAOE,WAAS,CAACF,IAAD,CAAhB;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAPD,MAOO;AACN,WAAO,IAAP;AACA;AACD,CAZyC,CAA1C;AAcA,2BAAe;AACdV,EAAAA,UAAU,EAAVA,YADc;AAEdjH,EAAAA,QAAQ,EAARA;AAFc,CAAf;;ACzCA,IAAMsF,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACoB,IAAN,CAAW2U,aAAf;AAAA,CAAzB;;AAEA,IAAMrX,UAAQ,GAAG8N,eAAM,CAAC3E,cAAP,CAAsB7D,aAAtB,CAAjB;AAEA,IAAM4gB,yBAAyB,GAAGnd,wBAAuB,CAAC,UAACzH,KAAD,EAAQgE,WAAR;AAAA,SAAwBA,WAAW,CAAChE,KAAD,CAAX,CAAmB6kB,cAA3C;AAAA,CAAD,CAAzD;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAMC,0BAA0B,GAAGrd,wBAAuB,CAAC,UAACzH,KAAD,EAAQS,GAAR,EAAgB;AAAA;;AAC1E,SAAO,iBAAAuD,aAAW,CAAChE,KAAD,CAAX,uFAAoB+kB,eAApB,gFAAsCtkB,GAAtC,MAA8C,IAArD;AACA,CAFyD,CAA1D;AAIA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMqH,oBAAkB,GAAGC,wBAAuB,CAAC,UAAClJ,MAAD,EAASC,KAAT,EAAmB;AACrE,MAAMF,OAAO,GAAGgmB,yBAAyB,CAAC5gB,aAAD,CAAzC;;AACA,MAAIpF,OAAJ,EAAa;AACZ,WAAOsG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAPiD,CAAlD;AASA;AACA;AACA;AACA;AACA;;AACA,IAAMkmB,uBAAuB,GAAGjd,wBAAuB,CAAC,UAACkd,cAAD,EAAoB;AAC3E,MAAIA,cAAJ,EAAoB;AACnB,QAAI7jB,IAAI,GAAG,EAAX;;AACA8jB,IAAAA,CAAC,CAAC7kB,OAAF,CAAU4kB,cAAV,EAA0B,UAAAxkB,GAAG,EAAI;AAChC,UAAM2I,UAAU,GAAG0b,0BAA0B,CAACrkB,GAAD,CAA7C;;AACA,UAAI2I,UAAU,IAAI,CAAC8b,CAAC,CAACC,OAAF,CAAU/b,UAAV,CAAnB,EAA0C;AACzChI,QAAAA,IAAI,CAACX,GAAD,CAAJ,GAAY2I,UAAZ;AACA;AACD,KALD;;AAOA,WAAO,CAAC8b,CAAC,CAACC,OAAF,CAAU/jB,IAAV,CAAD,GAAmBA,IAAnB,GAA0B,IAAjC;AACA,GAVD,MAUO;AACN,WAAO,IAAP;AACA;AACD,CAdsD,CAAvD;AAgBA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMgkB,0CAA0C,GAAGrd,wBAAuB,CAAC,UAACsd,uCAAD,EAA0C1U,UAA1C,EAAyD;AACnI,MAAI0U,uCAAuC,IAAI1U,UAA/C,EAA2D;AAC1D,QAAMsU,cAAc,GAAGvkB,MAAM,CAAC2F,IAAP,CAAYgf,uCAAZ,CAAvB;AACA,QAAMC,mBAAmB,GAAGN,uBAAuB,CAACC,cAAD,CAAnD;;AACA,QAAIK,mBAAJ,EAAyB;AACxB,UAAIlc,UAAU,GAAG,EAAjB;;AACA8b,MAAAA,CAAC,CAACK,KAAF,CAAQD,mBAAR,EAA6B,UAACrX,cAAD,EAAiB2D,aAAjB,EAAmC;AAC/D,YAAM1Q,KAAK,GAAG+M,cAAc,CAAC0C,UAAD,CAA5B;AACA,YAAM5N,YAAY,GAAGsiB,uCAAuC,CAACzT,aAAD,CAA5D;AACAxI,QAAAA,UAAU,CAACrG,YAAD,CAAV,GAA2B7B,KAA3B;AACA,OAJD;;AAMA,aAAO,CAACgkB,CAAC,CAACC,OAAF,CAAU/b,UAAV,CAAD,GAAyBA,UAAzB,GAAsC,IAA7C;AACA,KATD,MASO;AACN,aAAO,IAAP;AACA;AACD,GAfD,MAeO;AACN,WAAO,IAAP;AACA;AACD,CAnByE,CAA1E;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMoc,qCAAqC,GAAGzd,wBAAuB,CAAC,UAAClJ,MAAD,EAAS+B,KAAT,EAAgB6kB,IAAhB,EAAyB;AAC9F,MAAM1mB,KAAK,GAAG+I,oBAAkB,CAACjJ,MAAD,EAAS,IAAT,CAAhC;;AACA,MAAIE,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEA,KAAX,EAAkB;AAAA;;AACjB,QAAM2mB,2BAA2B,yBAAG3mB,KAAK,CAACA,KAAN,CAAY6B,KAAZ,CAAH,uDAAG,mBAAqB6kB,IAArB,CAApC;AACA,WAAOC,2BAA2B,IAAI,IAAtC;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CARoE,CAArE;AAWA,oBAAe;AACdhnB,EAAAA,QAAQ,EAARA,UADc;AAEdsmB,EAAAA,uBAAuB,EAAvBA,uBAFc;AAGdI,EAAAA,0CAA0C,EAA1CA,0CAHc;AAIdI,EAAAA,qCAAqC,EAArCA;AAJc,CAAf;;AClGA,IAAMxhB,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAACoB,IAAN,CAAWwR,gBAAtB;AAAA,CAApB;;AAEA,IAAMlU,UAAQ,GAAG8N,eAAM,CAAC9N,QAAP,CAAgBsF,aAAhB,CAAjB;AAEA,kBAAe;AACXtF,EAAAA,QAAQ,EAARA;AADW,CAAf;;ACAA,IAAMsF,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACoB,IAAN,CAAWkQ,kBAAf;AAAA,CAAzB;;AAEA,IAAM5S,UAAQ,GAAG8N,eAAM,CAAC9N,QAAP,CAAgBsF,aAAhB,CAAjB;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AAEA,IAAMwD,oBAAkB,GAAGC,wBAAuB,CAAC,UAACzH,KAAD,EAAQgE,WAAR;AAAA,SAAwBwI,eAAM,CAACvH,UAAP,CAAkBjB,WAAlB,EAA+BhE,KAA/B,CAAxB;AAAA,CAAD,CAAlD;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAM0X,kBAAgB,GAAGjQ,wBAAuB,CAAC,UAACzH,KAAD,EAAQS,GAAR,EAAgB;AAAA;;AAChE,SAAO,iBAAAuD,aAAW,CAAChE,KAAD,CAAX,oFAAoBiE,KAApB,0EAA4BxD,GAA5B,MAAoC,IAA3C;AACA,CAF+C,CAAhD;AAKA;AACA;AACA;AACA;AACA;;AACA,IAAM8F,WAAS,GAAGwB,wBAAuB,CAAC,UAAA1B,IAAI,EAAI;AACjD,SAAOA,IAAI,CAACb,GAAL,CAAS,UAAA/E,GAAG;AAAA,WAAIiX,kBAAgB,CAACjX,GAAD,CAApB;AAAA,GAAZ,CAAP;AACA,CAFwC,CAAzC;AAIA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMqH,oBAAkB,GAAGC,wBAAuB,CAAC,UAAClJ,MAAD,EAASC,KAAT,EAAmB;AACrE,MAAMF,OAAO,GAAG4I,oBAAkB,CAACxD,aAAD,CAAlC;;AACA,MAAIpF,OAAJ,EAAa;AACZ,WAAOsG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAPiD,CAAlD;AASA;AACA;AACA;AACA;AACA;;AACA,IAAM6G,YAAU,GAAGoC,wBAAuB,CAAC,UAAAlJ,MAAM,EAAI;AACpD,MAAME,KAAK,GAAG+I,oBAAkB,CAACjJ,MAAD,EAAS,IAAT,CAAhC;;AACA,MAAIE,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEA,KAAX,EAAkB;AACjB,QAAIsH,IAAI,GAAG3F,MAAM,CAAC6D,MAAP,CAAcxF,KAAK,CAACA,KAApB,CAAX;;AACA,QAAIsH,IAAJ,EAAU;AACT,aAAOE,WAAS,CAACF,IAAD,CAAhB;AACA,KAFD,MAEO;AACN,aAAO,IAAP;AACA;AACD,GAPD,MAOO;AACN,WAAO,IAAP;AACA;AACD,CAZyC,CAA1C;AAeA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMsf,kBAAkB,GAAGhnB,wCAAoB,CAAC,CAC/CD,UAD+C,EAE/C2F,gBAF+C,CAAD,EAI3C,UAACtF,KAAD,EAAQkV,WAAR,EAAwB;AACpB,MAAG,CAAC5U,6BAAUN,KAAV,CAAJ,EAAsB;AAC3B,QAAMkmB,cAAc,GAAGlmB,KAAK,CAACA,KAA7B;;AACA,QAAG,CAACM,6BAAU4lB,cAAV,CAAJ,EAA+B;AAC9B,UAAMW,mBAAmB,GAAG,EAA5B;;AACA,wCAA4BllB,MAAM,CAAC6D,MAAP,CAAc0gB,cAAd,CAA5B,oCAA2D;AAAtD,YAAMrT,aAAa,qBAAnB;AACJgU,QAAAA,mBAAmB,CAACrlB,IAApB,CAAyB0T,WAAW,CAACrC,aAAD,CAApC;AACA;;AAED,UAAGgU,mBAAmB,CAAC9lB,MAApB,GAA6B,CAAhC,EAAmC;AAClC,eAAO8lB,mBAAP;AACA,OAFD,MAEO;AACN,eAAO,IAAP;AACA;AACD,KAXD,MAWO;AACN,aAAO,IAAP;AACA;AACK,GAhBD,MAgBO;AACH,WAAO,IAAP;AACH;AACJ,CAxB0C,CAApB,CAyBzB,UAAC5lB,KAAD,EAAQnB,MAAR,EAAmB;AACpB,mBAAUK,IAAI,CAACC,SAAL,CAAeN,MAAf,CAAV;AACA,CA3B0B,CAA3B;AA8BA,yBAAe;AACd8G,EAAAA,UAAU,EAAVA,YADc;AAEdjH,EAAAA,QAAQ,EAARA,UAFc;AAGdinB,EAAAA,kBAAkB,EAAlBA;AAHc,CAAf;;ACnGA,IAAM3hB,aAAW,GAAG,SAAdA,WAAc,CAAChE,KAAD;AAAA,SAAWA,KAAK,CAACoB,IAAN,CAAWwS,WAAtB;AAAA,CAApB;;AAEA,IAAMlV,UAAQ,GAAG8N,eAAM,CAAC9N,QAAP,CAAgBsF,aAAhB,CAAjB;AAEA,IAAMwD,oBAAkB,GAAGC,wBAAuB,CAAC,UAACzH,KAAD,EAAQgE,WAAR;AAAA,SAAwBwI,eAAM,CAACvH,UAAP,CAAkBjB,WAAlB,EAA+BhE,KAA/B,CAAxB;AAAA,CAAD,CAAlD;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAM8kB,4BAA0B,GAAGrd,wBAAuB,CAAC,UAACzH,KAAD,EAAQS,GAAR,EAAgB;AAAA;;AAC1E,SAAO,iBAAAuD,aAAW,CAAChE,KAAD,CAAX,uFAAoB+kB,eAApB,gFAAsCtkB,GAAtC,MAA8C,IAArD;AACA,CAFyD,CAA1D;AAIA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMqH,oBAAkB,GAAGC,wBAAuB,CAAC,UAAClJ,MAAD,EAASC,KAAT,EAAmB;AACrE,MAAMF,OAAO,GAAG4I,oBAAkB,CAACxD,aAAD,CAAlC;;AACA,MAAIpF,OAAJ,EAAa;AACZ,WAAOsG,aAAa,CAACxG,QAAd,CAAuBE,OAAvB,EAAgCC,MAAhC,EAAwCC,KAAxC,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAPiD,CAAlD;AASA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM+mB,qBAAqB,GAAG9d,wBAAuB,CAAC,UAAClJ,MAAD,EAAS+B,KAAT,EAAgB6kB,IAAhB,EAAsB7T,aAAtB,EAAwC;AAC7F,MAAM7S,KAAK,GAAG+I,oBAAkB,CAACjJ,MAAD,EAAS,IAAT,CAAhC;;AACA,MAAIE,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEA,KAAX,EAAkB;AAAA;;AACjB,QAAM+mB,WAAW,yBAAG/mB,KAAK,CAACA,KAAN,CAAY6B,KAAZ,CAAH,gFAAG,mBAAqB6kB,IAArB,CAAH,0DAAG,sBAA6B7T,aAA7B,CAApB;AACA,WAAOkU,WAAW,SAAX,IAAAA,WAAW,WAAX,IAAAA,WAAW,CAAEhmB,MAAb,GAAsBgmB,WAAtB,GAAoC,IAA3C;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CARoD,CAArD;AAUA,kBAAe;AACdhB,EAAAA,0BAA0B,EAA1BA,4BADc;AAEdpmB,EAAAA,QAAQ,EAARA,UAFc;AAGdmnB,EAAAA,qBAAqB,EAArBA;AAHc,CAAf;;ACjDA;AACA;AACA;AACA;AACA;AACO,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACN,IAAD,EAAU;AAClC,MAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AACzB,WAAOA,IAAP;AACH,GAFD,MAEO;AACH,qBAAUA,IAAI,CAAC,CAAD,CAAd,cAAqBA,IAAI,CAAC,CAAD,CAAzB;AACH;AACJ,CANM;AAQP;AACA;AACA;AACA;AACA;;AACO,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAACP,IAAD,EAAU;AACpC,MAAG,OAAOA,IAAP,KAAgB,QAAnB,EAA6B;AAC5B,WAAOA,IAAI,CAACQ,KAAL,CAAW,GAAX,EAAgBzgB,GAAhB,CAAoB0gB,UAApB,CAAP;AACA,GAFD,MAEO,IAAGtQ,6BAAU6P,IAAV,CAAH,EAAmB;AACzB,WAAOA,IAAI,CAACjgB,GAAL,CAAS0gB,UAAT,CAAP;AACA,GAFM,MAEA;AACN,WAAO,IAAP;AACA;AACD,CARM;AAUP;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACpnB,KAAD,EAAQF,MAAR,EAAmB;AAC9C,MAAGE,KAAK,IAAIA,KAAK,CAACA,KAAf,IAAwBF,MAA3B,EAAmC;AAAA;;AAC/B,QAAG,gBAAAE,KAAK,CAACA,KAAN,sDAAcF,MAAM,CAAC+B,KAArB,KAA+B/B,MAA/B,IAAyCA,MAAM,CAACunB,KAAnD,EAA0D;AACtD,UAAMC,kBAAkB,GAAG1mB,4BAASZ,KAAK,CAACA,KAAN,CAAYF,MAAM,CAAC+B,KAAnB,CAAT,EAAoC,UAAChB,GAAD,EAAM0mB,QAAN,EAAgBC,OAAhB,EAA4B;AACvF;AACA,YAAGD,QAAH,EAAa;AACT,8CAAW1mB,GAAX,IAAgB2mB,OAAhB;AACH,SAFD,MAEO;AACH,iBAAO3mB,GAAP;AACH;AACJ,OAP0B,EAOxB,EAPwB,CAA3B;;AASA,UAAM4mB,YAAY,GAAG3nB,MAAM,CAACunB,KAAP,CAAavnB,MAAb,CAAoB,UAAA4mB,IAAI;AAAA,eAAI,CAACY,kBAAkB,CAAC9kB,QAAnB,CAA4BwkB,YAAY,CAACN,IAAD,CAAxC,CAAL;AAAA,OAAxB,CAArB;AACA,aAAOe,YAAP;AACH,KAZD,MAYO;AACH;AACA;AACA,aAAO3nB,MAAM,CAACunB,KAAP,CAAa5gB,GAAb,CAAiB,UAAAigB,IAAI;AAAA,eAAIM,YAAY,CAACN,IAAD,CAAhB;AAAA,OAArB,CAAP;AACH;AACJ,GAlBD,MAkBO;AACH,QAAG5mB,MAAH,aAAGA,MAAH,eAAGA,MAAM,CAAEunB,KAAX,EAAkB;AACd;AACA,aAAOvnB,MAAM,CAACunB,KAAP,CAAa5gB,GAAb,CAAiB,UAAAigB,IAAI;AAAA,eAAIM,YAAY,CAACN,IAAD,CAAhB;AAAA,OAArB,CAAP;AACH,KAHD,MAGO;AACH;AACA,aAAO,IAAP;AACH;AACJ;AAEJ,CA7BM;;ACxBP,IAAIgB,UAAU,GAAG,IAAI/Z,kBAAJ,CAAc,IAAd,CAAjB;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAMga,WAAW,GAAG3e,wBAAuB,CAAC,UAAC6J,aAAD,EAAgBjE,aAAhB,EAA+B0X,uCAA/B,EAA2E;AACtH,MAAMjkB,IAAI,GAAGwS,WAAW,CAACkR,0BAAZ,CAAuClT,aAAvC,CAAb;AACA,MAAI+U,yBAAyB,GAAG,IAAhC;;AAEA,MAAItB,uCAAJ,EAA6C;AAC5CsB,IAAAA,yBAAyB,GAAG5Q,aAAa,CAACiP,uBAAd,CAAsCtkB,MAAM,CAAC2F,IAAP,CAAYgf,uCAAZ,CAAtC,CAA5B;AACA;;AAED,MAAIjkB,IAAJ,EAAU;AACT,WAAO8J,yBAAM9J,IAAN,EAAY,UAACkP,OAAD,EAAU7P,GAAV,EAAkB;AACpC,UAAI8P,UAAU,uBACZ5C,aADY,EACIlN,GADJ,CAAd;;AAIA,UAAIkmB,yBAAJ,EAA+B;AAC9B,mCAAQA,yBAAR,EAAmC,UAACpY,QAAD,EAAW8G,sBAAX,EAAsC;AACxE,cAAMuR,cAAc,GAAGrY,QAAQ,CAAC9N,GAAD,CAA/B;;AACA,cAAImmB,cAAJ,EAAoB;AACnBrW,YAAAA,UAAU,CAAC8U,uCAAuC,CAAChQ,sBAAD,CAAxC,CAAV,GAA8EuR,cAA9E;AACA;AACD,SALD;AAMA;;AAED,aAAO;AACNxY,QAAAA,IAAI,EAAE,SADA;AAEN3N,QAAAA,GAAG,EAAHA,GAFM;AAGNomB,QAAAA,QAAQ,EAAEvW,OAAO,CAACuW,QAHZ;AAINtW,QAAAA,UAAU,EAAVA;AAJM,OAAP;AAMA,KApBM,CAAP;AAqBA,GAtBD,MAsBO;AACN,WAAO,IAAP;AACA;AACD,CAjC0C,CAA3C;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMuW,OAAO,GAAG/e,wBAAuB,CAAC,UAAC4K,oBAAD,EAAuBhF,aAAvB,EAAsC/M,KAAtC,EAA6C6kB,IAA7C,EAAmDsB,sBAAnD,EAA2EC,wBAA3E,EAAqG3B,uCAArG,EAA8IvN,QAA9I,EAA2J;AAClM;AACA,MAAMmP,wBAAwB,GAAGrT,WAAW,CAACkR,0BAAZ,CAAuCnS,oBAAvC,CAAjC;;AAEA,MAAIsU,wBAAJ,EAA8B;AAC7B,QAAMC,UAAU,GAAGnB,YAAY,CAACN,IAAD,CAA/B;AACA,QAAM0B,WAAW,GAAG;AACnBH,MAAAA,wBAAwB,EAAxBA,wBADmB;AAEnBD,MAAAA,sBAAsB,EAAtBA,sBAFmB;AAGnBnmB,MAAAA,KAAK,EAALA,KAHmB;AAInBmlB,MAAAA,YAAY,EAAEmB,UAJK;AAKnBvU,MAAAA,oBAAoB,EAApBA,oBALmB;AAMnBmF,MAAAA,QAAQ,EAARA;AANmB,KAApB;AAQA,QAAMsP,kBAAkB,GAAGxT,WAAW,CAACiS,qBAAZ,CAAkCkB,sBAAlC,EAA0DnmB,KAA1D,EAAiEsmB,UAAjE,EAA6EvU,oBAA7E,CAA3B;AACA,QAAM0U,2CAA2C,GAAGtR,aAAa,CAACyP,qCAAd,CAAoDwB,wBAApD,EAA8EpmB,KAA9E,EAAqFsmB,UAArF,CAApD;AACA,QAAMhX,QAAQ,GAAG/Q,6BAAS,CAAC;AAACgoB,MAAAA,WAAW,EAAXA,WAAD;AAAcC,MAAAA,kBAAkB,EAAlBA,kBAAd;AAAkCC,MAAAA,2CAA2C,EAA3CA;AAAlC,KAAD,CAA1B,CAZ6B;;AAa7B,QAAMlX,KAAK,GAAGsW,UAAU,CAACrW,SAAX,CAAqBF,QAArB,CAAd;;AACA,QAAIC,KAAJ,EAAW;AACV,aAAOA,KAAK,CAAC/O,IAAb;AACA,KAFD,MAEO;AACN,UAAIgmB,kBAAJ,aAAIA,kBAAJ,eAAIA,kBAAkB,CAAEtnB,MAAxB,EAAgC;AAC/B,YAAIyO,QAAQ,GAAG,EAAf;AAEA6Y,QAAAA,kBAAkB,CAAC/mB,OAAnB,CAA2B,UAAAI,GAAG,EAAI;AAAA;;AACjC,cAAI8P,UAAU,uBACZ5C,aADY,EACIlN,GADJ,CAAd,CADiC;;;AAMjC,cAAMomB,QAAQ,GAAG,0BAAAI,wBAAwB,CAACxmB,GAAD,CAAxB,gFAA+BomB,QAA/B,gCAA2CI,wBAAwB,CAACxmB,GAAD,CAAnE,2DAA2C,uBAA+B6mB,UAA/B,CAA0C1mB,KAA1C,CAA3C,CAAjB;;AAEA,cAAIykB,uCAAJ,EAA6C;AAC5C,gBAAMjc,UAAU,GAAG2M,aAAa,CAACqP,0CAAd,CAAyDC,uCAAzD,EAAkG5kB,GAAlG,CAAnB;;AACA,gBAAI2I,UAAJ,EAAgB;AACfmH,cAAAA,UAAU,qCAAOA,UAAP,GAAsBnH,UAAtB,CAAV;AACA;AACD;;AAED,cAAIyd,QAAJ,EAAc;AACbtY,YAAAA,QAAQ,CAAChO,IAAT,CAAc;AACb6N,cAAAA,IAAI,EAAE,SADO;AAEb3N,cAAAA,GAAG,EAAHA,GAFa;AAGbomB,cAAAA,QAAQ,EAARA,QAHa;AAIbtW,cAAAA,UAAU,EAAVA;AAJa,aAAd;AAMA;AACD,SAvBD;AAyBA,YAAMnP,IAAI,GAAG;AACZmN,UAAAA,QAAQ,EAAEA,QAAQ,CAACzO,MAAT,GAAkByO,QAAlB,GAA6B,IAD3B;AAEZkX,UAAAA,IAAI,EAAEyB,UAFM;AAGZtmB,UAAAA,KAAK,EAALA;AAHY,SAAb;AAMA6lB,QAAAA,UAAU,CAAC7V,WAAX,CAAuB;AACtBV,UAAAA,QAAQ,EAARA,QADsB;AAEtB9O,UAAAA,IAAI,EAAJA;AAFsB,SAAvB;AAKA,eAAOA,IAAP;AACA,OAxCD,MAwCO;AACN,eAAO,IAAP;AACA;AACD;AACD,GA7DD,MA6DO;AACN,WAAO,IAAP;AACA;AACD,CApEsC,CAAvC;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMmmB,QAAQ,GAAGxf,wBAAuB,CAAC,UAAC6J,aAAD,EAAgBjE,aAAhB,EAA+B/M,KAA/B,EAAsCwlB,KAAtC,EAA6CW,sBAA7C,EAAqEC,wBAArE,EAA+F3B,uCAA/F,EAAwIvN,QAAxI,EAAqJ;AAC7L,MAAIsO,KAAJ,aAAIA,KAAJ,eAAIA,KAAK,CAAEtmB,MAAX,EAAmB;AAClB,QAAI0nB,cAAc,GAAG,EAArB;;AACA,iCAAUpB,KAAV,EAAiB,UAAAX,IAAI,EAAI;AACxB,UAAMgC,aAAa,GAAGX,OAAO,CAAClV,aAAD,EAAgBjE,aAAhB,EAA+B/M,KAA/B,EAAsC6kB,IAAtC,EAA4CsB,sBAA5C,EAAoEC,wBAApE,EAA8F3B,uCAA9F,EAAuIvN,QAAvI,CAA7B;;AACA,UAAI2P,aAAJ,EAAmB;AAClBD,QAAAA,cAAc,CAACjnB,IAAf,CAAoBknB,aAApB;AACA;AACD,KALD;;AAOA,WAAOD,cAAc,CAAC1nB,MAAf,GAAwB0nB,cAAxB,GAAyC,IAAhD;AACA,GAVD,MAUO;AACN,WAAO,IAAP;AACA;AACD,CAduC,CAAxC;AAgBA,WAAe;AACdd,EAAAA,WAAW,EAAXA,WADc;AAEda,EAAAA,QAAQ,EAARA,QAFc;AAIXxR,EAAAA,aAAa,EAAbA,aAJW;AAKXlI,EAAAA,oBAAoB,EAApBA,oBALW;AAMXkH,EAAAA,kBAAkB,EAAlBA,kBANW;AAOXnB,EAAAA,WAAW,EAAXA,WAPW;AAQXtC,EAAAA,kBAAkB,EAAlBA,kBARW;AASXsB,EAAAA,gBAAgB,EAAhBA;AATW,CAAf;;ACnKA,IAAM8U,WAAW,GAAG,SAAdA,WAAc,CAAA1nB,KAAK;AAAA,SAAIA,KAAK,CAAC2nB,YAAN,CAAmBC,QAAvB;AAAA,CAAzB;;AACA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAA7nB,KAAK;AAAA,SAAIA,KAAK,CAAC2nB,YAAN,CAAmBG,UAAvB;AAAA,CAA3B;;AACA,IAAM5hB,UAAQ,GAAG,SAAXA,QAAW,CAAAlG,KAAK;AAAA,SAAIA,KAAK,CAAC2nB,YAAN,CAAmB1jB,KAAvB;AAAA,CAAtB;;AAEA,IAAM8jB,eAAe,GAAG,SAAlBA,eAAkB,CAAA/nB,KAAK;AAAA,SAAIA,KAAK,CAACgoB,GAAN,CAAUlkB,SAAd;AAAA,CAA7B;;AACA,IAAMmkB,iBAAiB,GAAG,SAApBA,iBAAoB,CAAAjoB,KAAK;AAAA,SAAIA,KAAK,CAACkJ,MAAN,CAAapF,SAAjB;AAAA,CAA/B;;AACA,IAAMokB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAloB,KAAK;AAAA,SAAIA,KAAK,CAACuJ,QAAN,CAAe4e,qBAAf,CAAqCnmB,aAAzC;AAAA,CAAlC;;AAEA,IAAMomB,gBAAgB,GAAGjkB,uBAAc,CACtC,CAACujB,WAAD,EAAcK,eAAd,CADsC,EAEtC,UAACH,QAAD,EAAWS,YAAX,EAA4B;AAC3B,SAAOT,QAAQ,CAACS,YAAD,CAAf;AACA,CAJqC,CAAvC;AAOA,IAAMC,kBAAkB,GAAGnkB,uBAAc,CACxC,CAAC0jB,aAAD,EAAgBI,iBAAhB,CADwC,EAExC,UAACH,UAAD,EAAaxlB,cAAb,EAAgC;AAC/B,SAAOwlB,UAAU,CAACxlB,cAAD,CAAjB;AACA,CAJuC,CAAzC;AAOA,IAAMimB,oBAAoB,GAAGpkB,uBAAc,CAC1C,CAAC+B,UAAD,EAAWgiB,oBAAX,CAD0C,EAE1C,UAACjkB,KAAD,EAAQukB,iBAAR,EAA8B;AAC7B,SAAOvkB,KAAK,CAAC,aAAaukB,iBAAd,CAAZ;AACA,CAJyC,CAA3C;AAOA,kBAAe;AACdJ,EAAAA,gBAAgB,EAAEA,gBADJ;AAEdE,EAAAA,kBAAkB,EAAEA,kBAFN;AAGdC,EAAAA,oBAAoB,EAApBA;AAHc,CAAf;;AC9BA,IAAMvkB,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACyoB,UAAV;AAAA,CAAzB;;AAEA,IAAMnkB,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMgB,sBAAoB,GAAGwH,eAAM,CAACxH,oBAAP,CAA4BhB,aAA5B,CAA7B;AAEA,IAAMyB,kBAAgB,GAAG+G,eAAM,CAAC/G,gBAAP,CAAwBzB,aAAxB,CAAzB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AAEA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAGA,iBAAe;AACdM,EAAAA,MAAM,EAANA,QADc;AAEdD,EAAAA,cAAc,EAAdA,gBAFc;AAGdW,EAAAA,oBAAoB,EAApBA,sBAHc;AAKdS,EAAAA,gBAAgB,EAAhBA,kBALc;AAOde,EAAAA,YAAY,EAAZA,cAPc;AAQdC,EAAAA,wBAAwB,EAAxBA,0BARc;AAUdY,EAAAA,kBAAkB,EAAlBA,oBAVc;AAWdR,EAAAA,wBAAwB,EAAxBA,0BAXc;AAYd7C,EAAAA,WAAW,EAAXA;AAZc,CAAf;;ACVA;;AAEA;AACA;AACA;;AACA,IAAM0kB,yBAAyB,GAAG/pB,wCAAoB,CAClD,CACI,UAAC2c,eAAD;AAAA,SAAqBA,eAArB;AAAA,CADJ,CADkD,EAIlD,UAACA,eAAD,EAAqB;AACjB,MAAIA,eAAJ,EAAqB;AACjB,6CAAWA,eAAX;AAA4B7a,MAAAA,GAAG,EAAE;AAAjC;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAViD,CAApB,CAWhC,UAAA6a,eAAe;AAAA,SAAIpc,IAAI,CAACC,SAAL,CAAemc,eAAf,CAAJ;AAAA,CAXiB,CAAlC;AAcA;AACA;AACA;;AACA,IAAMqN,8BAA8B,GAAGhqB,wCAAoB,CACvD,CACI,UAAC2c,eAAD;AAAA,SAAqBoN,yBAAyB,CAACpN,eAAD,CAA9C;AAAA,CADJ,EAEI,UAACA,eAAD,EAAkBvM,MAAlB;AAAA,SAA6BA,MAA7B;AAAA,CAFJ,CADuD,EAKvD,UAACuM,eAAD,EAAkBvM,MAAlB,EAA6B;AAAA;;AACzB,MAAI6Z,WAAW,GAAG,EAAlB;;AAEA,MAAI7Z,MAAJ,EAAY;AACR6Z,IAAAA,WAAW,GAAG7Z,MAAM,IAAI,EAAxB;AACH;;AAED,MAAIuM,eAAJ,EAAqB;AACjBsN,IAAAA,WAAW,IAAItN,eAAJ,4BAAwBsN,WAAxB,EAAX;AACH;;AAED,SAAO,gBAAAA,WAAW,UAAX,4CAAa9oB,MAAb,GAAsB8oB,WAAtB,GAAoC,IAA3C;AACH,CAjBsD,CAApB,CAkBrC,UAACtN,eAAD,EAAkBvM,MAAlB;AAAA,mBAAgC7P,IAAI,CAACC,SAAL,CAAemc,eAAf,CAAhC,cAAmEpc,IAAI,CAACC,SAAL,CAAe4P,MAAf,CAAnE;AAAA,CAlBqC,CAAvC;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM8Z,+CAA+C,GAAG,SAAlDA,+CAAkD,CAAC9Z,MAAD,EAAS0M,iBAAT,EAA4B9Z,cAA5B,EAA+C;AACnG,SAAOoN,MAAM,CAACvJ,GAAP,CAAW,UAAAoH,KAAK,EAAI;AACvB,QAAIkQ,sBAAsB,GAAIlQ,KAAK,CAAC6O,iBAAN,IAA2BA,iBAA5B,qCAAqDA,iBAArD,GAA2E7O,KAAK,CAAC6O,iBAAjF,IAAuGA,iBAAiB,IAAI7O,KAAK,CAAC6O,iBAA3B,IAAgD,IAApL;AACA,QAAIsB,mBAAmB,GAAInQ,KAAK,CAACjL,cAAN,IAAwBA,cAAzB,qCAA+CA,cAA/C,GAAkEiL,KAAK,CAACjL,cAAxE,IAA2FA,cAAc,IAAIiL,KAAK,CAACjL,cAAxB,IAA0C,IAA/J;AAEA,6CAAWiL,KAAX;AAAkB6O,MAAAA,iBAAiB,EAAEqB,sBAArC;AAA6Dnb,MAAAA,cAAc,EAAEob;AAA7E;AACH,GALM,CAAP;AAMH,CAPD;AASA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMK,SAAO,GAAG,SAAVA,OAAU,CAAC5X,GAAD,EAAM2V,GAAN,EAAc;AAC1B,MAAI3V,GAAJ,EAAS;AACL,QAAI2V,GAAJ,EAAS;AAAA;;AACL,UAAIkC,OAAO,gBAAG7X,GAAG,CAACpE,IAAP,8CAAG,UAAUkc,IAAxB,CADK;;AAIL,UAAInC,GAAG,CAACoC,IAAJ,IAAY,CAACle,6BAAU8b,GAAG,CAACoC,IAAd,CAAjB,EAAsC;AAClCF,QAAAA,OAAO,GAAGG,4BAASH,OAAT,EAAkB,UAACI,SAAD,EAAYC,OAAZ,EAAwB;AAChD,iBAAOvC,GAAG,CAACoC,IAAJ,CAASG,OAAT,CAAP;AACH,SAFS,CAAV;AAGH;;AAED,UAAIC,UAAU,gBAAGxC,GAAG,CAAC/Z,IAAP,8CAAG,UAAUkc,IAA3B;AACA,UAAIA,IAAI,GAAGM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,oBAAY,CAACR,cAAtC,EAAsDqE,UAAtD,EAAkEN,OAAlE,CAAX;AACA,aAAO,CAAChe,6BAAUie,IAAV,CAAD,GAAmBA,IAAnB,GAA0B,IAAjC;AACH,KAbD,MAaO;AAAA;;AACH,UAAIA,KAAI,iBAAG9X,GAAG,CAACpE,IAAP,+CAAG,WAAUkc,IAArB;;AACA,aAAOM,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,oBAAY,CAACR,cAAtC,EAAsDgE,KAAtD,CAAP;AACH;AACJ,GAlBD,MAkBO;AACH,WAAO,IAAP;AACH;AACJ,CAtBD;AAwBA;AACA;AACA;;;AACA,IAAMwL,YAAY,GAAGnqB,wCAAoB,CACrC,CACI,UAACoqB,QAAD;AAAA,SAAcA,QAAd;AAAA,CADJ,EAEI,UAACA,QAAD,EAAWC,SAAX;AAAA,SAAyBA,SAAzB;AAAA,CAFJ,EAGI,UAACD,QAAD,EAAWC,SAAX,EAAsBtP,QAAtB;AAAA,SAAmCA,QAAnC;AAAA,CAHJ,CADqC,EAMrC,UAACqP,QAAD,EAAWC,SAAX,EAAsBtP,QAAtB,EAAmC;AAC/B,MAAMuP,aAAa,GAAGrL,YAAQ,CAACN,IAAT,CAAc4L,mBAAd,CAAkCH,QAAlC,EAA4CC,SAA5C,CAAtB;AACN,MAAMG,aAAa,GAAGvL,YAAQ,CAACN,IAAT,CAAc8L,2BAAd,CAA0CL,QAA1C,EAAoDC,SAApD,EAA+DtP,QAA/D,CAAtB;AACM,SAAO2P,gBAAI,CAACC,kBAAL,CAAwBH,aAAxB,EAAuCF,aAAvC,CAAP;AACH,CAVoC,CAApB,CAWnB,UAACF,QAAD,EAAWC,SAAX,EAAsBtP,QAAtB;AAAA,mBAAsCqP,QAAtC,SAAiDC,SAAjD,SAA6DtP,QAA7D;AAAA,CAXmB,CAArB;AAaA;AACA;AACA;AACA;;AACA,IAAM6N,UAAQ,GAAG5oB,wCAAoB,CACjC,CACI,UAACoqB,QAAD;AAAA,SAAcA,QAAd;AAAA,CADJ,EAEI,UAACA,QAAD,EAAWC,SAAX;AAAA,SAAyBA,SAAzB;AAAA,CAFJ,EAGI,UAACD,QAAD,EAAWC,SAAX,EAAsBzP,MAAtB;AAAA,SAAiCA,MAAjC;AAAA,CAHJ,EAII,UAACwP,QAAD,EAAWC,SAAX,EAAsBzP,MAAtB,EAA8BG,QAA9B;AAAA,SAA2CA,QAA3C;AAAA,CAJJ,CADiC,EAOjC,UAACqP,QAAD,EAAWC,SAAX,EAAsBzP,MAAtB,EAA8BG,QAA9B,EAA2C;AAC7C,MAAMyP,aAAa,GAAGvL,YAAQ,CAACN,IAAT,CAAc8L,2BAAd,CAA0CL,QAA1C,EAAoDC,SAApD,EAA+DtP,QAA/D,CAAtB;AACA,MAAM6P,MAAM,GAAG,CAAChQ,MAAM,CAACE,GAAR,EAAaF,MAAM,CAACC,GAApB,CAAf;AACM,MAAMgQ,QAAQ,GAAGH,gBAAI,CAACI,WAAL,CAAiBV,QAAjB,EAA2BC,SAA3B,EAAsCG,aAAtC,EAAqDI,MAArD,EAA6D,IAA7D,CAAjB;AACA,SAAOC,QAAQ,CAACE,IAAT,CAAc,CAAd,CAAP;AACH,CAZgC,CAApB,CAaf,UAACX,QAAD,EAAWC,SAAX,EAAsBzP,MAAtB,EAA8BG,QAA9B;AAAA,mBAA8CqP,QAA9C,SAAyDC,SAAzD,SAAqEzP,MAAM,CAACE,GAA5E,SAAkFF,MAAM,CAACC,GAAzF,SAA+FE,QAA/F;AAAA,CAbe,CAAjB;AAeA,sBAAe;AACXgP,EAAAA,yBAAyB,EAAzBA,yBADW;AAEXnB,EAAAA,QAAQ,EAARA,UAFW;AAGXnK,EAAAA,OAAO,EAAPA,SAHW;AAIX0L,EAAAA,YAAY,EAAZA,YAJW;AAKXH,EAAAA,8BAA8B,EAA9BA,8BALW;AAMdE,EAAAA,+CAA+C,EAA/CA;AANc,CAAf;;AC9GA,IAAMrO,iBAAe,GAAG,SAAlBA,eAAkB,CAAAxa,KAAK;AAAA,SAAIA,KAAK,CAACma,IAAN,CAAWM,YAAf;AAAA,CAA7B;;AACA,IAAMP,iBAAe,GAAG,SAAlBA,eAAkB,CAAAla,KAAK;AAAA,SAAIA,KAAK,CAACma,IAAN,CAAWA,IAAf;AAAA,CAA7B;;AACA,IAAMC,oBAAkB,GAAG,SAArBA,kBAAqB,CAAApa,KAAK;AAAA,SAAIA,KAAK,CAACma,IAAN,CAAWE,IAAf;AAAA,CAAhC;AAEA;AACA;AACA;AACA;;;AACA,IAAMQ,aAAW,GAAG1W,uBAAc,CAC9B,CACI+V,iBADJ,EAEI,UAACla,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFJ,CAD8B,EAK9B,UAAC0Z,IAAD,EAAO1Z,GAAP,EAAe;AACX,SAAO,CAAA0Z,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAG1Z,GAAH,CAAJ,KAAe,IAAtB;AACH,CAP6B,CAAlC;AAUA;AACA;AACA;;AACA,IAAMma,YAAU,GAAGzW,uBAAc,CAC7B,CAACiW,oBAAD,CAD6B,EAE7B,UAACC,IAAD,EAAU;AACN,MAAIA,IAAI,IAAI,CAAChb,6BAAUgb,IAAV,CAAb,EAA8B;AAC1B,WAAO3Z,MAAM,CAAC6D,MAAP,CAAc8V,IAAd,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAR4B,CAAjC;AAWA;AACA;AACA;AACA;;AACA,IAAMU,gBAAc,GAAG5W,uBAAc,CACjC,CACIiW,oBADJ,EAEI,UAACpa,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFJ,CADiC,EAKjC,UAAC4Z,IAAD,EAAO5Z,GAAP,EAAe;AACX,SAAO,CAAA4Z,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAG5Z,GAAH,CAAJ,KAAe,IAAtB;AACH,CAPgC,CAArC;AAUA;AACA;AACA;AACA;;AACA,IAAMua,mBAAiB,GAAG7W,uBAAc,CACpC,CACIyW,YADJ,EAEI,UAAC5a,KAAD,EAAQib,MAAR;AAAA,SAAoBA,MAApB;AAAA,CAFJ,CADoC,EAKpC,UAACZ,IAAD,EAAOY,MAAP,EAAkB;AACd,MAAIZ,IAAI,IAAI,CAAChb,6BAAUgb,IAAV,CAAT,IAA4BY,MAAhC,EAAwC;AACpC,WAAOjc,0BAAOqb,IAAP,EAAa,UAACc,GAAD;AAAA,aAASA,GAAG,CAAChB,IAAJ,IAAYjI,8BAAWiJ,GAAG,CAAChB,IAAf,EAAqBc,MAArB,CAArB;AAAA,KAAb,KAAmE,IAA1E;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAXmC,CAAxC;AAcA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMiC,uBAAqB,GAAG/Y,uBAAc,CACxC,CACIqW,iBADJ,EAEIO,gBAFJ,CADwC,EAKxC,UAACE,MAAD,EAASE,GAAT,EAAiB;AACb,MAAIA,GAAJ,EAAS;AACL,QAAIgC,WAAW,GAAGjL,8BAAWiJ,GAAG,CAAChB,IAAf,EAAqBc,MAArB,CAAlB;;AACA,WAAOE,GAAG,CAACV,YAAJ,IAAqB0C,WAAW,IAAIlC,MAApC,IAA+C,IAAtD;AACH,GAHD,MAGO;AACH,WAAO,IAAP;AACH;AACJ,CAZuC,CAA5C;AAeA;AACA;AACA;AACA;;AACA,IAAMoD,wBAAsB,GAAG1f,wCAAoB,CAC/C,CACIue,uBADJ,EAEInC,gBAFJ,EAGIb,iBAHJ,CAD+C,EAM/C,UAACe,MAAD,EAASE,GAAT,EAAchB,IAAd,EAAuB;AACnB,MAAI3U,GAAG,GAAG2U,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAGc,MAAH,CAAd;;AACA,MAAIzV,GAAJ,EAAS;AACL,WAAOmkB,eAAe,CAACvM,OAAhB,CAAwB5X,GAAxB,EAA6B2V,GAA7B,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAb8C,CAApB,CAc7B,UAACnb,KAAD,EAAQ4pB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAd6B,CAA/B;AAgBA;AACA;AACA;AACA;;AACA,IAAMC,eAAe,GAAGlrB,wCAAoB,CACxC,CACIkc,aADJ,EAEIG,mBAFJ,CADwC,EAK3C2O,eAAe,CAACvM,OAL2B,CAApB,CAMtB,UAACpd,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CANsB,CAAxB;AAQA,IAAM6O,uBAAuB,GAAGriB,wBAAuB,CAACoiB,eAAD,CAAvD;AAEA;AACA;AACA;AACA;;AACA,IAAME,mBAAmB,GAAGprB,wCAAoB,CAC5C,CACIkc,aADJ,CAD4C,EAI/C,UAACrV,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,yBAAAA,GAAG,CAAEpE,IAAL,wDAAW4oB,QAAX,KAAuB,IAA9B;AACA,CAN2C,CAApB,CAO1B,UAAChqB,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAP0B,CAA5B;AASA,IAAMgP,2BAA2B,GAAGxiB,wBAAuB,CAACsiB,mBAAD,CAA3D;AAEA;AACA;AACA;AACA;;AACA,IAAMG,qBAAqB,GAAGvrB,wCAAoB,CAC9C,CACIkc,aADJ,EAEIG,mBAFJ,CAD8C,EAK9C,UAACxV,GAAD,EAAM2V,GAAN,EAAc;AACV,MAAI3V,GAAJ,EAAS;AACL,QAAI2V,GAAJ,EAAS;AAAA;;AACL,UAAI4C,aAAa,iBAAGvY,GAAG,CAACpE,IAAP,+CAAG,WAAU4c,UAA9B;AACA,UAAIC,gBAAgB,gBAAG9C,GAAG,CAAC/Z,IAAP,8CAAG,UAAU4c,UAAjC;AACA,aAAOD,aAAa,IAAIE,gBAAjB,IAAqC,IAA5C;AACH,KAJD,MAIO;AAAA;;AACH,aAAO,eAAAzY,GAAG,CAACpE,IAAJ,0DAAU4c,UAAV,KAAwB,IAA/B;AACH;AACJ,GARD,MAQO;AACH,WAAO,IAAP;AACH;AACJ,CAjB6C,CAApB,CAkB5B,UAAChe,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAlB4B,CAA9B;AAoBA;AACA;AACA;AACA;;AACA,IAAMG,kBAAgB,GAAGjX,uBAAc,CACnC,CAAC4W,gBAAD,CADmC,EAEnC,UAACI,GAAD,EAAS;AAAA;;AACL,SAAOA,GAAG,SAAH,IAAAA,GAAG,WAAH,iBAAAA,GAAG,CAAEhB,IAAL,gDAAWra,MAAX,GAAoBqb,GAAG,CAAChB,IAAxB,GAA+B,IAAtC;AACH,CAJkC,CAAvC;AAOA;AACA;AACA;AACA;;AACA,IAAMgQ,aAAa,GAAGhmB,uBAAc,CACnC,CACC+V,iBADD,EAECkB,kBAFD,CADmC,EAKnC,UAACjB,IAAD,EAAOiQ,OAAP,EAAmB;AAClB,MAAIjQ,IAAI,IAAIiQ,OAAJ,aAAIA,OAAJ,eAAIA,OAAO,CAAEtqB,MAArB,EAA6B;AAC5B,WAAOsqB,OAAO,CAAC5kB,GAAR,CAAY,UAAA/E,GAAG;AAAA,aAAI0Z,IAAI,CAAC1Z,GAAD,CAAR;AAAA,KAAf,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAXkC,CAApC;AAcA;AACA;AACA;AACA;;AACA,IAAMyd,eAAa,GAAG/Z,uBAAc,CAChC,CACI4W,gBADJ,CADgC,EAIhC,UAACI,GAAD,EAAS;AACL,MAAIA,GAAJ,EAAS;AAAA;;AACL,WAAOyC,YAAQ,CAACN,IAAT,CAAcO,UAAd,CAAyB/D,oBAAY,CAACR,cAAtC,gBAAsD6B,GAAG,CAAC/Z,IAA1D,+CAAsD,WAAUkc,IAAhE,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAV+B,CAApC;AAaA;AACA;AACA;AACA;;AACA,IAAMc,qBAAmB,GAAGja,uBAAc,CACtC,CACI4W,gBADJ,CADsC,EAItC,UAACI,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAE/Z,IAAL,0DAAW4c,UAAX,KAAyB,IAAhC;AACH,CANqC,CAA1C;AASA;AACA;AACA;AACA;;AACA,IAAM3C,oCAAkC,GAAGlX,uBAAc,CACrD,CACI0W,aADJ,CADqD,EAIrD,UAACrV,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEpE,IAAL,0DAAWka,eAAX,KAA8B,IAArC;AACH,CANoD,CAAzD;AASA;AACA;AACA;AACA;;AACA,IAAMC,2BAAyB,GAAGpX,uBAAc,CAC5C,CACI0W,aADJ,CAD4C,EAI5C,UAACrV,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEpE,IAAL,0DAAW2N,MAAX,KAAqB,IAA5B;AACH,CAN2C,CAAhD;AASA;AACA;AACA;AACA;;AACA,IAAM4M,uCAAqC,GAAGxX,uBAAc,CACxD,CACI6W,mBADJ,CADwD,EAIxD,UAACG,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAE/Z,IAAL,0DAAWka,eAAX,KAA8B,IAArC;AACH,CANuD,CAA5D;AASA;AACA;AACA;AACA;;AACA,IAAMM,8BAA4B,GAAGzX,uBAAc,CAC/C,CACI6W,mBADJ,CAD+C,EAI/C,UAACG,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAE/Z,IAAL,0DAAW2N,MAAX,KAAqB,IAA5B;AACH,CAN8C,CAAnD;AASA;AACA;AACA;AACA;;AACA,IAAMyM,iCAA+B,GAAGrX,uBAAc,CAClD,CACI0W,aADJ,CADkD,EAIlD,UAACrV,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEpE,IAAL,0DAAWqa,iBAAX,KAAgC,IAAvC;AACH,CANiD,CAAtD;AASA;AACA;AACA;AACA;;AACA,IAAMI,oCAAkC,GAAG1X,uBAAc,CACrD,CACI6W,mBADJ,CADqD,EAIrD,UAACG,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAE/Z,IAAL,0DAAWqa,iBAAX,KAAgC,IAAvC;AACH,CANoD,CAAzD;AASA;AACA;AACA;AACA;;AACA,IAAM4O,4BAA4B,GAAG1rB,wCAAoB,CACrD,CACI6c,iCADJ,EAEIK,oCAFJ,CADqD,EAKrD,UAACyO,YAAD,EAAeC,YAAf,EAAgC;AAC5B,MAAID,YAAY,IAAIC,YAApB,EAAkC;AAC9B,6CAAWA,YAAX,GAA4BD,YAA5B;AACH,GAFD,MAEO;AACH,WAAOC,YAAY,IAAID,YAAhB,IAAgC,IAAvC;AACH;AACJ,CAXoD,CAApB,CAYnC,UAACtqB,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAZmC,CAArC;AAeA;AACA;AACA;AACA;;AACA,IAAMS,8BAA4B,GAAGvX,uBAAc,CAC/C,CACI0W,aADJ,CAD+C,EAI/C,UAACrV,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAEpE,IAAL,0DAAWO,cAAX,KAA6B,IAApC;AACH,CAN8C,CAAnD;AASA;AACA;AACA;AACA;;AACA,IAAMma,iCAA+B,GAAG3X,uBAAc,CAClD,CACI6W,mBADJ,CADkD,EAIlD,UAACG,GAAD,EAAS;AAAA;;AACL,SAAO,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,0BAAAA,GAAG,CAAE/Z,IAAL,0DAAWO,cAAX,KAA6B,IAApC;AACH,CANiD,CAAtD;AASA;AACA;AACA;AACA;;AACA,IAAMua,2BAAyB,GAAGvd,wCAAoB,CAClD,CACI+c,8BADJ,EAEII,iCAFJ,CADkD,EAKlD,UAACK,SAAD,EAAYC,SAAZ,EAA0B;AACtB,MAAID,SAAS,IAAIC,SAAjB,EAA4B;AACxB,6CAAWD,SAAX,GAAyBC,SAAzB;AACH,GAFD,MAEO;AACH,WAAOA,SAAS,IAAID,SAAb,IAA0B,IAAjC;AACH;AACJ,CAXiD,CAApB,CAYhC,UAACnc,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAZgC,CAAlC;AAcA;AACA;AACA;AACA;;AACA,IAAMoB,iCAA+B,GAAG1d,wCAAoB,CACxD,CACI0c,oCADJ,EAEIM,uCAFJ,CADwD,EAKxD,UAACW,kBAAD,EAAqBC,kBAArB,EAA4C;AACxC,SAAOD,kBAAkB,IAAIC,kBAAtB,IAA4C,IAAnD;AACH,CAPuD,CAApB,CAQtC,UAACvc,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CARsC,CAAxC;AAUA,IAAMuP,uCAAuC,GAAG/iB,wBAAuB,CAAC4U,iCAAD,CAAvE;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAMoO,yCAAyC,GAAG9rB,wCAAoB,CAClE,CACIid,8BADJ,EAEIC,oCAFJ,EAGIC,iCAHJ,CADkE,EAMlE,UAACY,SAAD,EAAYjB,iBAAZ,EAA+BiP,oBAA/B,EAAwD;AACpD,MAAIhO,SAAJ,aAAIA,SAAJ,eAAIA,SAAS,CAAE5c,MAAf,EAAuB;AACnB,WAAO6pB,eAAe,CAACd,+CAAhB,CAAgEnM,SAAhE,EAA2EjB,iBAA3E,EAA8FiP,oBAA9F,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAZiE,CAApB,CAahD,UAAC1qB,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAbgD,CAAlD;AAeA;AACA;AACA;AACA;AACA;;AACA,IAAM0P,sCAAsC,GAAGhsB,wCAAoB,CAC/D,CACI4c,2BADJ,EAEI8O,4BAFJ,EAGInO,2BAHJ,CAD+D,EAM/D,UAACO,SAAD,EAAYhB,iBAAZ,EAA+BoB,iBAA/B,EAAqD;AACjD,MAAIJ,SAAJ,aAAIA,SAAJ,eAAIA,SAAS,CAAE3c,MAAf,EAAuB;AACnB,WAAO6pB,eAAe,CAACd,+CAAhB,CAAgEpM,SAAhE,EAA2EhB,iBAA3E,EAA8FoB,iBAA9F,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAZ8D,CAApB,CAa7C,UAAC7c,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAb6C,CAA/C;AAeA;AACA;AACA;AACA;AACA;;AACA,IAAMuB,wBAAsB,GAAG7d,wCAAoB,CAC/C,CACI8rB,yCADJ,EAEIE,sCAFJ,CAD+C,EAK/C,UAACjO,SAAD,EAAYD,SAAZ,EAA0B;AACtB,MAAIA,SAAS,IAAIC,SAAjB,EAA4B;AACxB,wCAAWA,SAAX,sBAAyBD,SAAzB;AACH,GAFD,MAEO,IAAIA,SAAJ,EAAe;AAClB,WAAOA,SAAP;AACH,GAFM,MAEA,IAAIC,SAAJ,EAAe;AAClB,WAAOA,SAAP;AACH,GAFM,MAEC;AACJ,WAAO,IAAP;AACH;AACJ,CAf8C,CAApB,CAgB7B,UAAC1c,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAhB6B,CAA/B;AAkBA,IAAM2P,8BAA8B,GAAGnjB,wBAAuB,CAAC+U,wBAAD,CAA9D;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMqO,gCAAgC,GAAG1mB,uBAAc,CACtD,CACCqY,wBADD,EAEC,UAACxc,KAAD,EAAQib,MAAR,EAAgB7N,QAAhB;AAAA,SAA6BA,QAA7B;AAAA,CAFD,CADsD,EAKtD,UAAC2B,MAAD,EAAS3B,QAAT,EAAsB;AACrB,MAAI2B,MAAJ,EAAY;AACX,QAAMnC,KAAK,GAAG5N,0BAAO+P,MAAP,EAAe,UAAAnC,KAAK;AAAA,aAAIA,KAAK,CAACnM,GAAN,KAAc2M,QAAlB;AAAA,KAApB,CAAd;;AACA,WAAOR,KAAK,IAAI,IAAhB;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAZqD,CAAvD;AAeA;AACA;AACA;AACA;;AACA,IAAMqQ,2BAAyB,GAAGte,wCAAoB,CAClD,CACI0d,iCADJ,EAEIG,wBAFJ,CADkD,EAKlD,UAAClB,eAAD,EAAkBvM,MAAlB,EAA6B;AACzB,MAAIA,MAAM,IAAIuM,eAAd,EAA+B;AAC3B,WAAOqO,eAAe,CAAChB,8BAAhB,CAA+CrN,eAA/C,EAAgEvM,MAAhE,CAAP;AACH,GAFD,MAEO;AACH,WAAO,IAAP;AACH;AACJ,CAXiD,CAApB,CAYhC,UAAC/O,KAAD,EAAQib,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAZgC,CAAlC;AAcA;AACA;AACA;;AACA,IAAM6P,uCAAuC,GAAG/iB,wBAAuB,CAAC,UAACoF,UAAD,EAAgB;AACvF,MAAIA,UAAJ,EAAgB;AACf;AACA,QAAMP,KAAK,GAAGO,UAAd,CAFe;;AAKf,QAAI4d,oBAAoB,GAAGne,KAAK,CAAC6O,iBAAN,sBAA8B7O,KAAK,CAAC6O,iBAApC,IAAyD,EAApF,CALe;;AAQf,QAAM5O,kBAAkB,GAAGL,eAAM,CAACpC,qCAAP,CAA6CwC,KAAK,CAACjL,cAAnD,CAA3B,CARe;;AAWf,QAAMqpB,kBAAkB,GAAG9lB,aAAa,CAAC/B,iBAAd,CAAgC4nB,oBAAhC,EAAsDle,kBAAtD,CAA3B,CAXe;;AAcf,QAAIoe,eAAe,GAAG/lB,aAAa,CAAC7B,uCAAd,CAAsD2nB,kBAAtD,CAAtB,CAde;;AAiBf,QAAIpe,KAAK,CAAC1J,gBAAV,EAA4B;AAC3B+nB,MAAAA,eAAe,CAAC/nB,gBAAhB,GAAmC0J,KAAK,CAAC1J,gBAAzC;AACA,KAFD,MAEO,IAAI0J,KAAK,CAACzC,gBAAV,EAA4B;AAClC8gB,MAAAA,eAAe,CAAC9gB,gBAAhB,GAAmCyC,KAAK,CAACzC,gBAAzC;AACA;;AACD,WAAO8gB,eAAP;AACA,GAvBD,MAuBO;AACN,WAAO,IAAP;AACA;AACD,CA3BsE,CAAvE;AA6BA;AACA;AACA;;AACA,IAAMC,yCAAyC,GAAGnjB,wBAAuB,CAAC,UAACoF,UAAD,EAAgB;AACtF,MAAMge,aAAa,GAAGL,uCAAuC,CAAC3d,UAAD,CAA7D;;AACA,MAAGge,aAAH,EAAkB;AACd,QAAM3d,eAAe,sBAAO2d,aAAP,CAArB;;AACA,QAAGhe,UAAU,CAAC2K,QAAd,EAAwB;AACpB;AACAtK,MAAAA,eAAe,CAACsK,QAAhB,GAA2B3K,UAAU,CAAC2K,QAAtC;AACH;;AACD,WAAOtK,eAAP;AACH,GAPD,MAOO;AACH,WAAO,IAAP;AACH;AACJ,CAZwE,CAAzE;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM4d,sCAAsC,GAAGrjB,wBAAuB,CAAC,UAACsjB,iBAAD,EAAoBle,UAApB,EAAgCC,QAAhC,EAA0CiY,uCAA1C,EAAmFpK,MAAnF,EAA2F8L,sBAA3F,EAAmHC,wBAAnH,EAAgJ;AAAA,8BACpHqE,iBADoH,aACpHA,iBADoH,uBACpHA,iBAAiB,CAAEjqB,IADiG;AAAA,MACjN8M,WADiN,yBACjNA,WADiN;AAAA,MACpMC,YADoM,yBACpMA,YADoM;AAAA,MACtLC,IADsL,yBACtLA,IADsL;AAAA,MAChLT,aADgL,yBAChLA,aADgL;AAAA,MACjK2d,kBADiK,yBACjKA,kBADiK;AAAA,MACzIC,iBADyI;;AAAA,MAEjN9qB,GAFiN,GAEvI0M,UAFuI,CAEjN1M,GAFiN;AAAA,MAE5M4O,IAF4M,GAEvIlC,UAFuI,CAE5MkC,IAF4M;AAAA,MAEtMG,OAFsM,GAEvIrC,UAFuI,CAEtMqC,OAFsM;AAAA,MAE7LsI,QAF6L,GAEvI3K,UAFuI,CAE7L2K,QAF6L;AAAA,MAEnL0T,YAFmL,GAEvIre,UAFuI,CAEnLqe,YAFmL;AAAA,MAE5JC,iBAF4J,GAEvIte,UAFuI,CAErKa,OAFqK;AAItNZ,EAAAA,QAAQ,GAAGA,QAAQ,IAAI3M,GAAvB,CAJsN;;AAOtN,MAAI+qB,YAAJ,EAAkB;AACjBpd,IAAAA,IAAI,GAAGod,YAAP;AACA;;AAED,MAAIxd,OAAO,qCAAOud,iBAAP,GAA6BE,iBAA7B,CAAX;;AAEA,MAAIrd,IAAI,KAAK,MAAb,EAAqB;AACpBJ,IAAAA,OAAO,CAACS,GAAR,GAAc8c,iBAAiB,CAAC9c,GAAlB,IAAyB8c,iBAAiB,CAAC7c,IAAlB,CAAuB,CAAvB,CAAvC;AACA,GAFD,MAEO,IAAIN,IAAI,KAAK,KAAb,EAAoB;AAAA,QACnBK,GADmB,GACoB8c,iBADpB,CACnB9c,GADmB;AAAA,QACdE,MADc,GACoB4c,iBADpB,CACd5c,MADc;AAAA,QACNC,aADM,GACoB2c,iBADpB,CACN3c,aADM;AAAA,QACYC,IADZ,4BACoB0c,iBADpB;;AAE1B,QAAMzc,UAAU,GAAGF,aAAa,IAAIA,aAAa,CAAC9N,cAAd,CAA6B,YAA7B,CAAjB,GAA8D8N,aAAa,CAACE,UAA5E,GAAyF,KAA5G;AAEAd,IAAAA,OAAO,GAAG;AACTW,MAAAA,MAAM,oCACFA,MADE;AAELI,QAAAA,MAAM,EAAEF,IAAI,CAACE,MAFR;AAGLC,QAAAA,MAAM,EAAEH,IAAI,CAACG;AAHR,QADG;AAMTF,MAAAA,UAAU,EAAVA,UANS;AAOTL,MAAAA,GAAG,EAAHA;AAPS,KAAV;AASA,GAbM,MAaA,IAAIL,IAAI,KAAK,QAAT,IAAqBA,IAAI,KAAK,cAAlC,EAAmD;AAAA;;AACzD,QAAIG,QAAJ;AAAA,QAAc6X,KAAK,GAAG,IAAtB;;AAEA,QAAIhY,IAAI,KAAK,QAAb,EAAuB;AACtBG,MAAAA,QAAQ,GAAGmd,IAAa,CAAChF,WAAd,CAA0B2E,iBAAiB,CAAC5qB,GAA5C,EAAiDkN,aAAjD,EAAgE0X,uCAAhE,CAAX;AACA,KAFD,MAEO,IAAIjX,IAAI,KAAK,cAAb,EAA6B;AACnC,UAAMkP,IAAI,GAAGwM,uBAAuB,CAAC7O,MAAD,CAApC;AACA,UAAM+O,QAAQ,GAAGC,2BAA2B,CAAChP,MAAD,CAA5C;AACA,UAAM0Q,QAAQ,GAAGhC,eAAe,CAACpC,QAAhB,CAAyByC,QAAQ,CAAC4B,KAAlC,EAAyC5B,QAAQ,CAAC6B,MAAlD,EAA0DvO,IAAI,CAAC/D,MAA/D,EAAuE+D,IAAI,CAAC5D,QAA5E,CAAjB;AACA,UAAM9Y,KAAK,GAAG+oB,eAAe,CAACb,YAAhB,CAA6BkB,QAAQ,CAAC4B,KAAtC,EAA6C5B,QAAQ,CAAC6B,MAAtD,EAA8DvO,IAAI,CAAC5D,QAAnE,CAAd;AACA0M,MAAAA,KAAK,GAAGsF,IAAa,CAACnE,QAAd,CAAuB8D,iBAAiB,CAAC5qB,GAAzC,EAA8CkN,aAA9C,EAA6D/M,KAA7D,EAAoE+qB,QAApE,EAA8E5E,sBAA9E,EAAsGC,wBAAtG,EAAgI3B,uCAAhI,EAAyKvN,QAAzK,CAAR;AACA;;AAED,QAAItJ,QAAQ,GAAG,IAAf;AACA,QAAIZ,KAAK,eAAGI,OAAH,6CAAG,SAASJ,KAArB;;AAEA,qBAAII,OAAJ,sCAAI,UAASQ,QAAb,EAAuB;AACtBA,MAAAA,QAAQ,GAAGgR,UAAmB,CAAClH,oCAApB,CAAyDtK,OAAO,CAACQ,QAAjE,CAAX;AACA;;AAED,QAAI,CAACZ,KAAD,IAAUkK,QAAd,EAAwB;AACvBlK,MAAAA,KAAK,GAAG2R,MAAe,CAAC5H,kBAAhB,CAAmCG,QAAnC,CAAR;AACA;;AAED9J,IAAAA,OAAO,iGACHA,OADG,GAEFQ,QAAQ,IAAI;AAACA,MAAAA,QAAQ,EAARA;AAAD,KAFV,GAGFZ,KAAK,IAAI;AAACA,MAAAA,KAAK,EAALA;AAAD,KAHP,GAIFW,QAAQ,IAAI;AAACA,MAAAA,QAAQ,EAARA;AAAD,KAJV,GAKF6X,KAAK,IAAI;AAACA,MAAAA,KAAK,EAALA;AAAD,KALP;AAMNzY,MAAAA,aAAa,EAAbA,aANM;AAON2d,MAAAA,kBAAkB,EAAlBA;AAPM,MAAP;AASA;;AAED,SAAO;AACN7qB,IAAAA,GAAG,EAAE2M,QAAQ,GAAG,GAAX,GAAiBie,iBAAiB,CAAC5qB,GADlC;AAEN2M,IAAAA,QAAQ,EAARA,QAFM;AAGNoC,IAAAA,OAAO,EAAEA,OAAO,IAAI,CAHd;AAINH,IAAAA,IAAI,EAAJA,IAJM;AAKNjB,IAAAA,IAAI,EAAJA,IALM;AAMNJ,IAAAA,OAAO,EAAPA;AANM,GAAP;AAQA,CAvEqE,CAAtE;AAyEA;AACA;AACA;AACA;AACA;;AACA,IAAM2Q,uBAAqB,GAAG5W,wBAAuB,CAAC,UAACkT,MAAD,EAAS9N,UAAT,EAAwB;AAC7E,MAAI,CAACA,UAAL,EAAiB;AAChBA,IAAAA,UAAU,GAAGqd,uCAAuC,CAACvP,MAAD,CAApD;AACA;;AAED,MAAI9N,UAAJ,EAAgB;AACf,QAAIA,UAAU,CAACiB,IAAf,EAAqB;AACpB,aAAOjB,UAAP;AACA,KAFD,MAEO;AACN,UAAMC,QAAQ,GAAG,wBAAjB;AACA,UAAMkE,kBAAkB,GAAGoa,IAAa,CAACpa,kBAAd,CAAiC3L,UAAjC,CAA4CwH,UAA5C,CAA3B;;AACA,UAAImE,kBAAJ,EAAwB;AACvB,eAAOA,kBAAkB,CAAC9L,GAAnB,CAAuB,UAAAkI,UAAU,EAAI;AAAA;;AAC3C,cAAMoe,cAAc,GAAGpe,UAAH,aAAGA,UAAH,2CAAGA,UAAU,CAAEtM,IAAf,qDAAG,iBAAkBgN,IAAzC,CAD2C;;AAI3C,cAAI0d,cAAc,KAAK,MAAnB,IAA6BA,cAAc,KAAK,KAApD,EAA2D;AAC1D,mBAAOV,sCAAsC,CAAC1d,UAAD,EAAaP,UAAb,EAAyBC,QAAzB,CAA7C;AACA,WAFD,MAEO;AACN,mBAAO,IAAP;AACA;AACD,SATM,CAAP;AAUA,OAXD,MAWO;AACN,eAAO,IAAP;AACA;AACD;AACD,GArBD,MAqBO;AACN,WAAO,IAAP;AACA;AACD,CA7BoD,CAArD;AA+BA;AACA;AACA;AACA;AACA;;AACA,IAAMsS,cAAY,GAAG3X,wBAAuB,CAAC,UAACkT,MAAD,EAAS1N,WAAT,EAAyB;AACrE,MAAI,CAACA,WAAL,EAAkB;AACjBA,IAAAA,WAAW,GAAGqd,8BAA8B,CAAC3P,MAAD,CAA5C;AACA;;AAED,MAAI1N,WAAJ,EAAiB;AAChB,QAAIqb,WAAW,GAAG,EAAlB;;AAEA,iCAAUrb,WAAV,EAAuB,UAAAJ,UAAU,EAAI;AACpC;AACA,UAAIA,UAAU,CAACiB,IAAf,EAAqB;AAAA;;AACpB,YAAIjB,UAAU,CAACiB,IAAX,KAAoB,QAApB,2BAAgCjB,UAAU,CAACa,OAA3C,gDAAgC,oBAAoBQ,QAAxD,EAAkE;AACjErB,UAAAA,UAAU,qCACNA,UADM;AAETa,YAAAA,OAAO,oCACHb,UAAU,CAACa,OADR;AAENQ,cAAAA,QAAQ,EAAEgR,UAAmB,CAAClH,oCAApB,CAAyDnL,UAAU,CAACa,OAAX,CAAmBQ,QAA5E;AAFJ;AAFE,YAAV;AAOA;;AAEDoa,QAAAA,WAAW,CAACroB,IAAZ,CAAiB4M,UAAjB;AACA,OAZD;AAAA,WAcK;AACJ,cAAM4Z,sBAAsB,GAAG+D,uCAAuC,CAAC3d,UAAD,CAAtE;AACA,cAAM6Z,wBAAwB,GAAGkE,yCAAyC,CAAC/d,UAAD,CAA1E;AACA,cAAMmE,kBAAkB,GAAGoa,IAAa,CAACpa,kBAAd,CAAiC3L,UAAjC,CAA4CohB,sBAA5C,CAA3B;AACA,cAAM1B,uCAAuC,GAAGqG,IAAa,CAAC3W,kBAAd,CAAiC2P,kDAAjC,CAAoFsC,wBAApF,CAAhD;;AACA,cAAI1V,kBAAJ,EAAwB;AACvB,yCAAUA,kBAAV,EAA8B,UAAA5D,UAAU,EAAI;AAC3Ckb,cAAAA,WAAW,CAACroB,IAAZ,CAAiB6qB,sCAAsC,CAAC1d,UAAD,EAAaP,UAAb,EAAyB,IAAzB,EAA+BkY,uCAA/B,EAAwEpK,MAAxE,EAAgF8L,sBAAhF,EAAwGC,wBAAxG,CAAvD;AACA,aAFD;AAGA;AACD;AACD,KA3BD;;AA6BA,WAAO4B,WAAW,CAAC9oB,MAAZ,GAAqB8oB,WAArB,GAAmC,IAA1C;AACA,GAjCD,MAiCO;AACN,WAAO,IAAP;AACA;AACD,CAzC2C,CAA5C;AA2CA,WAAe;AACX3L,EAAAA,yBAAyB,EAAzBA,2BADW;AAEXZ,EAAAA,+BAA+B,EAA/BA,iCAFW;AAGXH,EAAAA,yBAAyB,EAAzBA,2BAHW;AAId2O,EAAAA,gCAAgC,EAAhCA,gCAJc;AAKXrO,EAAAA,sBAAsB,EAAtBA,wBALW;AAMX6N,EAAAA,4BAA4B,EAA5BA,4BANW;AAQXhP,EAAAA,kCAAkC,EAAlCA,oCARW;AASXsD,EAAAA,qBAAqB,EAArBA,uBATW;AAUX9D,EAAAA,WAAW,EAAXA,aAVW;AAWXa,EAAAA,4BAA4B,EAA5BA,8BAXW;AAYXH,EAAAA,yBAAyB,EAAzBA,2BAZW;AAadmE,EAAAA,YAAY,EAAZA,cAbc;AAcXiL,EAAAA,sCAAsC,EAAtCA,sCAdW;AAeXnP,EAAAA,+BAA+B,EAA/BA,iCAfW;AAiBX0B,EAAAA,qBAAqB,EAArBA,uBAjBW;AAkBXmB,EAAAA,sBAAsB,EAAtBA,wBAlBW;AAmBX1C,EAAAA,qCAAqC,EAArCA,uCAnBW;AAoBXX,EAAAA,iBAAiB,EAAjBA,mBApBW;AAqBXD,EAAAA,cAAc,EAAdA,gBArBW;AAsBXe,EAAAA,+BAA+B,EAA/BA,iCAtBW;AAuBXF,EAAAA,4BAA4B,EAA5BA,8BAvBW;AAwBX6O,EAAAA,yCAAyC,EAAzCA,yCAxBW;AAyBX5O,EAAAA,kCAAkC,EAAlCA,oCAzBW;AA0BXT,EAAAA,gBAAgB,EAAhBA,kBA1BW;AA2BX+O,EAAAA,aAAa,EAAbA,aA3BW;AA4BXvP,EAAAA,UAAU,EAAVA,YA5BW;AA6BXsD,EAAAA,aAAa,EAAbA,eA7BW;AA8BXE,EAAAA,mBAAmB,EAAnBA,qBA9BW;AAgCXyL,EAAAA,eAAe,EAAfA,eAhCW;AAiCXE,EAAAA,mBAAmB,EAAnBA,mBAjCW;AAkCXG,EAAAA,qBAAqB,EAArBA;AAlCW,CAAf;;ACtsBA,IAAMlmB,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAAC6D,MAAV;AAAA,CAAzB;;AAEA,IAAMS,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AAEA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AACA,IAAMyB,kBAAgB,GAAG+G,eAAM,CAAC/G,gBAAP,CAAwBzB,aAAxB,CAAzB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AAEA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAEA,IAAM2B,YAAU,GAAG6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAAnB;AAEA,IAAMuH,gBAAc,GAAGiB,eAAM,CAACjB,cAAP,CAAsBvH,aAAtB,CAAvB;AAEA,IAAM+nB,2BAA2B,GAAG5nB,uBAAc,CACjD,CAACkB,WAAD,CADiD,EAEjD,UAACnD,KAAD,EAAW;AACV,SAAOA,KAAK,IAAIA,KAAK,CAACd,IAAf,IAAuBc,KAAK,CAACd,IAAN,CAAWwN,aAAlC,GAAkD1M,KAAK,CAACd,IAAN,CAAWwN,aAA7D,GAA6E,IAApF;AACA,CAJgD,CAAlD;AAOA,aAAe;AACdvJ,EAAAA,SAAS,EAATA,WADc;AAEdF,EAAAA,YAAY,EAAZA,cAFc;AAGd4mB,EAAAA,2BAA2B,EAA3BA,2BAHc;AAIdznB,EAAAA,MAAM,EAANA,QAJc;AAKdD,EAAAA,cAAc,EAAdA,gBALc;AAOdoB,EAAAA,gBAAgB,EAAhBA,kBAPc;AASde,EAAAA,YAAY,EAAZA,cATc;AAUdD,EAAAA,SAAS,EAATA,WAVc;AAWdE,EAAAA,wBAAwB,EAAxBA,0BAXc;AAadY,EAAAA,kBAAkB,EAAlBA,oBAbc;AAed1B,EAAAA,UAAU,EAAVA,YAfc;AAiBdkB,EAAAA,wBAAwB,EAAxBA,0BAjBc;AAmBd0E,EAAAA,cAAc,EAAdA,gBAnBc;AAoBdvH,EAAAA,WAAW,EAAXA,aApBc;AAsBd;AACAgoB,EAAAA,kBAAkB,EAAE3mB,WAvBN;AAwBd4mB,EAAAA,iBAAiB,EAAE9mB,cAxBL;AAyBd+mB,EAAAA,SAAS,EAAE5nB,QAzBG;AA0Bd6nB,EAAAA,YAAY,EAAEjmB;AA1BA,CAAf;;ACvBA,IAAMlC,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACkJ,MAAV;AAAA,CAAzB;;AAEA,IAAM5E,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMgB,sBAAoB,GAAGwH,eAAM,CAACxH,oBAAP,CAA4BhB,aAA5B,CAA7B;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMoB,eAAa,GAAGoH,eAAM,CAACpH,aAAP,CAAqBpB,aAArB,CAAtB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMooB,eAAe,GAAG5f,eAAM,CAAClH,eAAP,CAAuBtB,aAAvB,CAAxB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AAEA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;;AAGA,IAAMqoB,uBAAuB,GAAGloB,uBAAc,CAC7C,CAACG,QAAD,EAASgoB,MAAe,CAACL,iBAAzB,CAD6C,EAE7C,UAACxnB,MAAD,EAAStC,cAAT,EAA4B;AAC3B,SAAO8P,4BAASxN,MAAT,EAAiB,UAASjE,KAAT,EAAe;AACtC,WAAOA,KAAK,CAACY,IAAN,IAAeZ,KAAK,CAACY,IAAN,CAAWmrB,OAAX,KAAuBpqB,cAA7C;AACA,GAFM,CAAP;AAGA,CAN4C,CAA9C;AASA,IAAMqqB,aAAa,GAAGroB,uBAAc,CACnC,CACCkB,WADD,CADmC,EAInC,UAAChD,KAAD,EAAW;AACV,MAAIA,KAAK,IAAIA,KAAK,CAACjB,IAAf,IAAuBiB,KAAK,CAACjB,IAAN,CAAWqrB,IAAtC,EAA4C;AAC3C,WAAO7O,YAAQ,CAACN,IAAT,CAAcoP,sBAAd,CAAqCrqB,KAAK,CAACjB,IAAN,CAAWqrB,IAAhD,EAAsD,IAAtD,CAAP;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAVkC,CAApC;AAaA,aAAe;AACdE,EAAAA,SAAS,EAAEroB,QADG;AAEdA,EAAAA,MAAM,EAANA,QAFc;AAGdD,EAAAA,cAAc,EAAdA,gBAHc;AAIdW,EAAAA,oBAAoB,EAApBA,sBAJc;AAKdG,EAAAA,YAAY,EAAZA,cALc;AAMdC,EAAAA,aAAa,EAAbA,eANc;AAOdC,EAAAA,SAAS,EAATA,WAPc;AAQd+mB,EAAAA,eAAe,EAAfA,eARc;AASdI,EAAAA,aAAa,EAAbA,aATc;AAWdtmB,EAAAA,QAAQ,EAAEsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAXI;AAadwC,EAAAA,YAAY,EAAZA,cAbc;AAcdC,EAAAA,wBAAwB,EAAxBA,0BAdc;AAgBdY,EAAAA,kBAAkB,EAAlBA,oBAhBc;AAiBd1B,EAAAA,UAAU,EAAE6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAjBE;AAkBdqoB,EAAAA,uBAAuB,EAAvBA,uBAlBc;AAmBdxlB,EAAAA,wBAAwB,EAAxBA,0BAnBc;AAoBd7C,EAAAA,WAAW,EAAXA;AApBc,CAAf;;ACzCA,IAAMA,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACiJ,SAAN,CAAgBA,SAApB;AAAA,CAAzB;;AAEA,IAAM2jB,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAA5sB,KAAK;AAAA,SAAIA,KAAK,CAACiJ,SAAN,CAAgBA,SAAhB,CAA0B4jB,sBAA9B;AAAA,CAAtC;;AAEA,IAAMvoB,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMoB,eAAa,GAAGoH,eAAM,CAACpH,aAAP,CAAqBpB,aAArB,CAAtB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAM8oB,kBAAkB,GAAGtgB,eAAM,CAAClH,eAAP,CAAuBtB,aAAvB,CAA3B;AAEA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AAEA,IAAM+C,cAAY,GAAGyF,eAAM,CAACzF,YAAP,CAAoB/C,aAApB,CAArB;AACA,IAAMiD,sBAAoB,GAAGuF,eAAM,CAACvF,oBAAP,CAA4BjD,aAA5B,CAA7B;AACA,IAAMmD,gBAAc,GAAGqF,eAAM,CAACrF,cAAP,CAAsBnD,aAAtB,CAAvB;AAEA,IAAMsD,eAAa,GAAGkF,eAAM,CAAClF,aAAP,CAAqBtD,aAArB,CAAtB;AAEA;AACA;AACA;;AACA,IAAM+oB,4BAA4B,GAAG5oB,uBAAc,CAClD,CACC,UAACnE,KAAD,EAAQ2D,WAAR,EAAqBqpB,gBAArB,EAA0C;AAAC,SAAO;AAACrpB,IAAAA,WAAW,EAAEA,WAAd;AAA2BqpB,IAAAA,gBAAgB,EAAEA;AAA7C,GAAP;AAAsE,CADlH,CADkD,EAIlD,UAACC,YAAD,EAAeC,YAAf,EAAgC;AAC/B,MAAI/d,MAAM,GAAG,IAAb;;AACA,MAAI8d,YAAY,CAACtpB,WAAb,IAA4BupB,YAAY,CAACptB,MAA7C,EAAoD;AACnDqP,IAAAA,MAAM,GAAGnQ,0BAAOkuB,YAAP,EAAqB;AAAC,qBAAeD,YAAY,CAACtpB;AAA7B,KAArB,CAAT;AACA,GAFD,MAEO,IAAIspB,YAAY,CAACD,gBAAb,IAAiCE,YAAY,CAACptB,MAAlD,EAAyD;AAC/DqP,IAAAA,MAAM,GAAGnQ,0BAAOkuB,YAAP,EAAqB;AAAC,qBAAe;AAAhB,KAArB,CAAT;AACA;;AAED,SAAO/d,MAAM,GAAGA,MAAH,GAAY,IAAzB;AACA,CAbiD,CAAnD;AAgBA,yBAAe;AACd9J,EAAAA,SAAS,EAATA,WADc;AAEdF,EAAAA,YAAY,EAAZA,cAFc;AAGdC,EAAAA,aAAa,EAAbA,eAHc;AAId0nB,EAAAA,kBAAkB,EAAlBA,kBAJc;AAKdxoB,EAAAA,MAAM,EAANA,QALc;AAMdD,EAAAA,cAAc,EAAdA,gBANc;AAOd6B,EAAAA,QAAQ,EAARA,UAPc;AAQda,EAAAA,YAAY,EAAZA,cARc;AASdE,EAAAA,oBAAoB,EAApBA,sBATc;AAUdE,EAAAA,cAAc,EAAdA,gBAVc;AAWdG,EAAAA,aAAa,EAAbA,eAXc;AAadtD,EAAAA,WAAW,EAAXA,aAbc;AAcd4oB,EAAAA,wBAAwB,EAAxBA,wBAdc;AAedG,EAAAA,4BAA4B,EAA5BA;AAfc,CAAf;;ACpCA,IAAM/oB,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACiJ,SAAN,CAAgBD,KAApB;AAAA,CAAzB;;AAEA,IAAM1E,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMmB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAM+C,cAAY,GAAGyF,eAAM,CAACzF,YAAP,CAAoB/C,aAApB,CAArB;AACA,IAAMkD,iBAAe,GAAGsF,eAAM,CAACtF,eAAP,CAAuBlD,aAAvB,CAAxB;AAEA,IAAMmpB,yBAAyB,GAAGhpB,uBAAc,CAC/C,CAACkB,WAAD,CAD+C,EAE/C,UAAC+nB,UAAD,EAAgB;AACf,SAAOA,UAAU,IAAIA,UAAU,CAAChsB,IAAzB,IAAiCgsB,UAAU,CAAChsB,IAAX,CAAgBisB,eAAjD,GAAmED,UAAU,CAAChsB,IAAX,CAAgBisB,eAAnF,GAAqG,KAA5G;AACA,CAJ8C,CAAhD;AAOA;AACA;AACA;;AACA,IAAMC,yBAAyB,GAAGnpB,uBAAc,CAC/C,CAACkB,WAAD,CAD+C,EAE/C,UAAC+nB,UAAD,EAAgB;AACf,SAAQA,UAAU,IAAIA,UAAU,CAAChsB,IAAzB,IAAiCgsB,UAAU,CAAChsB,IAAX,CAAgB6H,SAAlD,GAA+DmkB,UAAU,CAAChsB,IAAX,CAAgB6H,SAA/E,GAA2F,IAAlG;AACA,CAJ8C,CAAhD;AAOA;AACA;AACA;;AACA,IAAMskB,+BAA+B,GAAGppB,uBAAc,CACrD,CAAC+C,iBAAD,CADqD,EAErD,UAACsmB,gBAAD,EAAsB;AACrB,SAAQA,gBAAgB,IAAIA,gBAAgB,CAACpsB,IAArC,IAA6CosB,gBAAgB,CAACpsB,IAAjB,CAAsB6H,SAApE,GAAiFukB,gBAAgB,CAACpsB,IAAjB,CAAsB6H,SAAvG,GAAmH,IAA1H;AACA,CAJoD,CAAtD;AAOA;AACA;AACA;;AACA,IAAMwkB,sBAAsB,GAAGtpB,uBAAc,CAC5C,CAACupB,kBAAkB,CAACrpB,cAApB,EAAoCipB,yBAApC,CAD4C,EAE5C,UAACrkB,SAAD,EAAY0kB,sBAAZ,EAAuC;AACtC,MAAI1kB,SAAS,IAAI,CAAC5J,6BAAU4J,SAAV,CAAd,IAAsC0kB,sBAA1C,EAAiE;AAChE,QAAIC,cAAc,GAAGtnB,0BAAO2C,SAAP,EAAkB0kB,sBAAlB,CAArB;;AACA,WAAOC,cAAc,IAAI,CAACvuB,6BAAUuuB,cAAV,CAAnB,GAA+CltB,MAAM,CAAC6D,MAAP,CAAcqpB,cAAd,CAA/C,GAA+E,IAAtF;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CAT2C,CAA7C;AAYA;AACA;AACA;;AACA,IAAMC,gCAAgC,GAAG1pB,uBAAc,CACtD,CAACkB,WAAD,EAAYqoB,kBAAkB,CAACpmB,aAA/B,CADsD,EAEtD,UAAC8lB,UAAD,EAAaU,mBAAb,EAAqC;AACpC,MAAIV,UAAU,IAAIA,UAAU,CAAChsB,IAAzB,IAAiCgsB,UAAU,CAAChsB,IAAX,CAAgB6H,SAAjD,IAA8D6kB,mBAAlE,EAAsF;AACrF,QAAIC,UAAU,GAAGC,kCAAeZ,UAAU,CAAChsB,IAAX,CAAgB6H,SAA/B,EAA0C6kB,mBAA1C,CAAjB;;AACA,WAAOC,UAAU,IAAIA,UAAU,CAACjuB,MAAzB,GAAkCiuB,UAAlC,GAA+C,IAAtD;AACA,GAHD,MAGO;AACN,WAAO,IAAP;AACA;AACD,CATqD,CAAvD;AAYA;AACA;AACA;;AACA,IAAME,4BAA4B,GAAG9pB,uBAAc,CAClD,CAACupB,kBAAkB,CAACzmB,oBAApB,EAA0CqmB,yBAA1C,EAAqEC,+BAArE,CADkD,EAElD,UAACW,eAAD,EAAkBP,sBAAlB,EAA0CQ,4BAA1C,EAA2E;AAC1E,MAAID,eAAe,IAAI,CAAC7uB,6BAAU6uB,eAAV,CAAxB,EAAmD;AAClD,QAAI7nB,IAAI,GAAG,EAAX;;AACA,QAAIsnB,sBAAsB,IAAIQ,4BAA9B,EAA2D;AAC1D9nB,MAAAA,IAAI,gCAAOsnB,sBAAP,sBAAkCQ,4BAAlC,EAAJ;AACA,KAFD,MAEO,IAAIR,sBAAsB,IAAI,CAACQ,4BAA/B,EAA4D;AAClE9nB,MAAAA,IAAI,GAAGsnB,sBAAP;AACA,KAFM,MAEA,IAAI,CAACA,sBAAD,IAA2BQ,4BAA/B,EAA4D;AAClE9nB,MAAAA,IAAI,GAAG8nB,4BAAP;AACA;;AAED,QAAIC,oBAAoB,GAAG9nB,0BAAO4nB,eAAP,EAAwB7nB,IAAxB,CAA3B;;AACA,WAAO+nB,oBAAoB,IAAI,CAAC/uB,6BAAU+uB,oBAAV,CAAzB,GAA2D1tB,MAAM,CAAC6D,MAAP,CAAc6pB,oBAAd,CAA3D,GAAiG,IAAxG;AACA,GAZD,MAYO;AACN,WAAO,IAAP;AACA;AACD,CAlBiD,CAAnD;AAqBA;AACA;AACA;AACA;;AACA,IAAMC,2BAA2B,GAAGlqB,uBAAc,CACjD,CAAC8pB,4BAAD,CADiD,EAEjD,UAACC,eAAD,EAAqB;AACpB,MAAIA,eAAe,IAAIA,eAAe,CAACpuB,MAAhB,KAA2B,CAAlD,EAAoD;AACnD,WAAOouB,eAAe,CAAC,CAAD,CAAtB;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CARgD,CAAlD;AAWA;AACA;AACA;;AACA,IAAMI,mBAAmB,GAAGnqB,uBAAc,CACzC,CAACG,QAAD,EAASiqB,MAAe,CAACppB,YAAzB,CADyC,EAEzC,UAAC6D,KAAD,EAAQ1G,cAAR,EAA2B;AAC1B,MAAI0G,KAAK,IAAIA,KAAK,CAAClJ,MAAf,IAAyBwC,cAA7B,EAA4C;AAC3C,WAAO2P,4BAASjJ,KAAT,EAAgB,UAACwlB,QAAD,EAAc;AACpC,aAAOtc,8BAAWsc,QAAQ,CAACptB,IAAT,CAAcqtB,SAAzB,EAAoCnsB,cAApC,CAAP;AACA,KAFM,CAAP;AAGA,GAJD,MAIO;AACN,WAAO,EAAP;AACA;AACD,CAVwC,CAA1C;AAaA,qBAAe;AACd+C,EAAAA,SAAS,EAATA,WADc;AAEdF,EAAAA,YAAY,EAAZA,cAFc;AAGdb,EAAAA,MAAM,EAANA,QAHc;AAId4B,EAAAA,QAAQ,EAARA,UAJc;AAKda,EAAAA,YAAY,EAAZA,cALc;AAOdomB,EAAAA,yBAAyB,EAAzBA,yBAPc;AAQduB,EAAAA,mBAAmB,EAAExnB,iBARP;AASdqmB,EAAAA,+BAA+B,EAA/BA,+BATc;AAUdD,EAAAA,yBAAyB,EAAzBA,yBAVc;AAWde,EAAAA,2BAA2B,EAA3BA,2BAXc;AAYdZ,EAAAA,sBAAsB,EAAtBA,sBAZc;AAadQ,EAAAA,4BAA4B,EAA5BA,4BAbc;AAcdJ,EAAAA,gCAAgC,EAAhCA,gCAdc;AAedS,EAAAA,mBAAmB,EAAnBA,mBAfc;AAiBdtqB,EAAAA,WAAW,EAAXA;AAjBc,CAAf;;AC9HA,gBAAe;AACdgF,EAAAA,KAAK,EAAE2lB,cADO;AAEd1lB,EAAAA,SAAS,EAAE2lB;AAFG,CAAf;;ACAA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAA7uB,KAAK;AAAA,SAAIA,KAAK,CAAC8uB,OAAN,CAAcA,OAAlB;AAAA,CAAnC;;AACA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA/uB,KAAK;AAAA,SAAIA,KAAK,CAAC8uB,OAAN,CAAczU,IAAlB;AAAA,CAAhC;AAEA;AACA;AACA;AACA;;;AACA,IAAMsJ,aAAW,GAAGxf,uBAAc,CACjC,CACC4qB,kBADD,EAEC,UAAC/uB,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFD,CADiC;AAKjC;AACD;AACA;AACA;AACA;AACC,UAAC4Z,IAAD,EAAO5Z,GAAP,EAAe;AACd,MAAI4Z,IAAI,IAAI,CAAChb,6BAAUgb,IAAV,CAAT,IAA4B5Z,GAA5B,IAAmC4Z,IAAI,CAAC5Z,GAAD,CAA3C,EAAkD;AACjD,WAAO4Z,IAAI,CAAC5Z,GAAD,CAAX;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAhBgC,CAAlC;AAmBA;AACA;AACA;AACA;;AACA,IAAMuuB,kBAAkB,GAAG7qB,uBAAc,CACxC,CACCwf,aADD,EAECkL,qBAFD,CADwC;AAKxC;AACD;AACA;AACA;AACA;AACC,UAAC1T,GAAD,EAAM2T,OAAN,EAAkB;AACjB,MAAI3T,GAAJ,EAAS;AACR,QAAI8T,UAAU,GAAG,EAAjB;;AACA,8BAAO9T,GAAG,CAAC+T,YAAX,EAAyB,UAACC,OAAD,EAAa;AACrCF,MAAAA,UAAU,CAACE,OAAD,CAAV,GAAsBL,OAAO,CAACK,OAAD,CAA7B;AACA,KAFD;;AAGA,WAAOF,UAAP;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CApBuC,CAAzC;AAuBA;AACA;AACA;AACA;;AACA,IAAMG,wBAAwB,GAAGjrB,uBAAc,CAC9C,CACC4qB,kBADD,EAEC,UAAC/uB,KAAD,EAAQqvB,aAAR;AAAA,SAA0BA,aAA1B;AAAA,CAFD,CAD8C;AAK9C;AACD;AACA;AACA;AACA;AACC,UAAChV,IAAD,EAAO8U,OAAP,EAAmB;AAClB,MAAIvF,MAAM,GAAG,IAAb;;AAEA,6BAAQvP,IAAR,EAAc,UAACnZ,KAAD,EAAQT,GAAR,EAAgB;AAC7B,QAAIyR,8BAAWhR,KAAK,CAACouB,cAAjB,EAAiCH,OAAjC,CAAJ,EAA+C;AAC9CvF,MAAAA,MAAM,GAAGnpB,GAAT;AACA;AACD,GAJD;;AAMA,SAAOmpB,MAAP;AACA,CApB6C,CAA/C;AAuBA;AACA;AACA;AACA;;AACA,IAAM2F,kBAAkB,GAAGprB,uBAAc,CACxC,CACC0qB,qBADD,EAEC,UAAC7uB,KAAD,EAAQmvB,OAAR;AAAA,SAAqBA,OAArB;AAAA,CAFD,CADwC;AAKxC;AACD;AACA;AACA;AACA;AACC,UAACL,OAAD,EAAUK,OAAV,EAAsB;AACrB,MAAIL,OAAO,IAAI,CAACzvB,6BAAUyvB,OAAV,CAAZ,IAAkCK,OAAlC,IAA6CL,OAAO,CAACK,OAAD,CAAxD,EAAmE;AAClE,WAAOL,OAAO,CAACK,OAAD,CAAd;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAhBuC,CAAzC;AAmBA,cAAe;AACdI,EAAAA,kBAAkB,EAAlBA,kBADc;AAEdP,EAAAA,kBAAkB,EAAlBA,kBAFc;AAGdrL,EAAAA,WAAW,EAAXA,aAHc;AAIdyL,EAAAA,wBAAwB,EAAxBA;AAJc,CAAf;;ACxGA,IAAMprB,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACwvB,SAAV;AAAA,CAAzB;;AAEA,IAAMlrB,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AAEA,gBAAe;AACdM,EAAAA,MAAM,EAANA;AADc,CAAf;;ACDA,IAAMN,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAACyvB,IAAV;AAAA,CAAzB;;AAEA,IAAMnrB,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AAEA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AAEA,IAAM2B,YAAU,GAAG6G,eAAM,CAAC7G,UAAP,CAAkB3B,aAAlB,CAAnB;AAEA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAGA,WAAe;AACdM,EAAAA,MAAM,EAANA,QADc;AAEdD,EAAAA,cAAc,EAAdA,gBAFc;AAGd6B,EAAAA,QAAQ,EAARA,UAHc;AAIdK,EAAAA,SAAS,EAATA,WAJc;AAMdC,EAAAA,YAAY,EAAZA,cANc;AAOdC,EAAAA,wBAAwB,EAAxBA,0BAPc;AASdY,EAAAA,kBAAkB,EAAlBA,oBATc;AAUd1B,EAAAA,UAAU,EAAVA,YAVc;AAWdkB,EAAAA,wBAAwB,EAAxBA,0BAXc;AAad7C,EAAAA,WAAW,EAAXA;AAbc,CAAf;;ACfA,IAAM0rB,gBAAgB,GAAG,UAAzB;;AAEA,IAAM1rB,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAAC2vB,KAAV;AAAA,CAAzB;;AACA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAA5vB,KAAK;AAAA,SAAIA,KAAK,CAAC2vB,KAAN,CAAYE,MAAhB;AAAA,CAA/B;;AAEA,IAAMvrB,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAM8rB,SAAS,GAAGtjB,eAAM,CAAClI,MAAP,CAAcsrB,iBAAd,CAAlB;AACA,IAAMzqB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMqB,WAAS,GAAGmH,eAAM,CAACnH,SAAP,CAAiBrB,aAAjB,CAAlB;AACA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;;AAEA,IAAM+rB,UAAU,GAAG,SAAbA,UAAa,CAAA/vB,KAAK;AAAA,SAAI,CAAC,CAACA,KAAK,CAAC2vB,KAAN,CAAY7rB,SAAlB;AAAA,CAAxB;;AACA,IAAMksB,OAAO,GAAG,SAAVA,OAAU,CAAAhwB,KAAK;AAAA,SAAIA,KAAK,CAAC2vB,KAAN,CAAYK,OAAhB;AAAA,CAArB;;AAGA,IAAMC,OAAO,GAAG9rB,uBAAc,CAC7B,CACCG,QADD,EAEC,UAACtE,KAAD,EAAQkwB,MAAR;AAAA,SAAmBA,MAAnB;AAAA,CAFD,CAD6B,EAK7B,UAACP,KAAD,EAAQO,MAAR,EAAmB;AAClB,MAAWA,MAAX,EAAmB;AAClB,WAAOP,KAAK,CAAC1T,IAAN,CAAW,UAAAkU,IAAI;AAAA,aAAIA,IAAI,CAACC,EAAL,KAAYF,MAAhB;AAAA,KAAf,CAAP;AACA;;AACD,SAAO,KAAP;AACA,CAV4B,CAA9B;AAaA,IAAMG,kBAAkB,GAAGlsB,uBAAc,CACxC,CAACkB,WAAD,CADwC,EAExC,UAAC8qB,IAAD,EAAU;AACT,MAAIA,IAAJ,EAAU;AACT,WAAOje,8BAAWie,IAAI,CAACN,MAAhB,EAAwB,CAAxB,CAAP;AACA;;AACD,SAAO,KAAP;AACA,CAPuC,CAAzC;AAUA,IAAMS,wBAAwB,GAAGnsB,uBAAc,CAC9C,CAACkB,WAAD,CAD8C,EAE9C,UAAC8qB,IAAD,EAAU;AACT,MAAIA,IAAI,IAAIA,IAAI,CAACzpB,WAAjB,EAA6B;AAC5B,WAAOypB,IAAI,CAACzpB,WAAZ;AACA,GAFD,MAEO;AACN,WAAO,IAAP;AACA;AACD,CAR6C,CAA/C;AAWA,IAAM6pB,yBAAyB,GAAGpsB,uBAAc,CAC/C,CAAC6rB,OAAD,EAAUK,kBAAV,CAD+C,EAE/C,UAACL,OAAD,EAAUK,kBAAV,EAAiC;AAChC,SAAOL,OAAO,IAAIK,kBAAlB;AACA,CAJ8C,CAAhD;AAOA,IAAMG,yBAAyB,GAAGrsB,uBAAc,CAC/C,CAACkB,WAAD,CAD+C,EAE/C,UAACsB,UAAD,EAAgB;AACf,MAAIA,UAAU,IAAIA,UAAU,CAACkpB,MAA7B,EAAqC;AACpC,WAAOlpB,UAAU,CAACkpB,MAAlB;AACA,GAFD,MAEO;AACN,WAAO,EAAP;AACA;AACD,CAR8C,CAAhD;AAWA,IAAMY,+BAA+B,GAAGtsB,uBAAc,CACrD,CACCmsB,wBADD,EAEC,UAACtwB,KAAD,EAAQoO,IAAR;AAAA,SAAiBA,IAAjB;AAAA,CAFD,EAGC,UAACpO,KAAD,EAAQoO,IAAR,EAAcsiB,QAAd;AAAA,SAA2BA,QAA3B;AAAA,CAHD,CADqD,EAMrD,UAAChqB,WAAD,EAAc0H,IAAd,EAAoD;AAAA,MAAhCsiB,QAAgC,uEAArBhB,gBAAqB;AACnD,SAAQthB,IAAI,IAAI1H,WAAR,IAAuBA,WAAW,CAACgqB,QAAD,CAAlC,IAAgDhqB,WAAW,CAACgqB,QAAD,CAAX,CAAsBtiB,IAAtB,CAAhD,IAA+E1H,WAAW,CAACgqB,QAAD,CAAX,CAAsBtiB,IAAtB,EAA4BuiB,MAAnH;AACA,CARoD,CAAtD;;AAWA,IAAMC,aAAa,GAAG,uBAAA5wB,KAAK,EAAI;AAC9B,MAAI4wB,aAAa,GAAG,KAApB;;AACA,MAAI5wB,KAAK,CAAC2vB,KAAN,IAAe3vB,KAAK,CAAC2vB,KAAN,CAAYvuB,IAA3B,IAAmCpB,KAAK,CAAC2vB,KAAN,CAAYvuB,IAAZ,CAAiBtB,MAAxD,EAAgE;AAC/D,QAAM+wB,WAAW,GAAG7wB,KAAK,CAAC2vB,KAAN,CAAYvuB,IAAZ,CAAiBvC,MAAjB,CAAwB,UAAAsxB,IAAI;AAAA,aAAIA,IAAI,CAAC1vB,GAAL,KAAaT,KAAK,CAAC2vB,KAAN,CAAY7rB,SAA7B;AAAA,KAA5B,CAApB;;AACA,QAAI+sB,WAAW,CAAC/wB,MAAZ,GAAqB,CAAzB,EAA4B;AAC3B+wB,MAAAA,WAAW,CAAC,CAAD,CAAX,CAAehB,MAAf,CAAsBxvB,OAAtB,CAA8B,UAAAywB,KAAK,EAAI;AACtC,YAAIA,KAAK,CAACzhB,IAAN,KAAe,8BAAnB,EAAmD;AAClDuhB,UAAAA,aAAa,GAAG,IAAhB;AACA;AACD,OAJD;AAKA;AACD;;AACD,SAAOA,aAAa,IAAI5wB,KAAK,CAAC2vB,KAAN,CAAYK,OAApC;AACA,CAbD;;AAeA,IAAMe,wCAAwC,GAAG5sB,uBAAc,CAC9D,CAACqsB,yBAAD,EAA4BQ,MAAc,CAACjF,2BAA3C,CAD8D,EAE9D,UAACkF,mBAAD,EAAsBC,wBAAtB,EAAmD;AAClD,MAAIhf,8BAAW+e,mBAAX,EAAgCC,wBAAwB,CAACC,sBAAzB,CAAgDtB,MAAhD,CAAuDuB,WAAvF,CAAJ,EAAyG;AACxG,WAAO,aAAP;AACA,GAFD,MAEO,IAAIlf,8BAAW+e,mBAAX,EAAgCC,wBAAwB,CAACC,sBAAzB,CAAgDtB,MAAhD,CAAuDwB,UAAvF,CAAJ,EAAwG;AAC9G,WAAO,YAAP;AACA,GAFM,MAEA,IAAInf,8BAAW+e,mBAAX,EAAgCC,wBAAwB,CAACC,sBAAzB,CAAgDtB,MAAhD,CAAuDyB,UAAvF,CAAJ,EAAwG;AAC9G,WAAO,YAAP;AACA,GAFM,MAEA,IAAIpf,8BAAW+e,mBAAX,EAAgCC,wBAAwB,CAACC,sBAAzB,CAAgDtB,MAAhD,CAAuD0B,SAAvF,CAAJ,EAAuG;AAC7G,WAAO,WAAP;AACA,GAFM,MAEA;AACN,WAAO,IAAP;AACA;AACD,CAd6D,CAA/D;AAkBA,YAAe;AACdjtB,EAAAA,MAAM,EAANA,QADc;AAGde,EAAAA,SAAS,EAATA,WAHc;AAIda,EAAAA,QAAQ,EAARA,UAJc;AAKd+pB,EAAAA,OAAO,EAAPA,OALc;AAOd9qB,EAAAA,YAAY,EAAEA,cAPA;AAQdqsB,EAAAA,aAAa,EAAEnsB,WARD;AASdmrB,EAAAA,yBAAyB,EAAEA,yBATb;AAUdiB,EAAAA,sBAAsB,EAAEjB,yBAVV;AAWdkB,EAAAA,QAAQ,EAAEptB,QAXI;AAYdwrB,EAAAA,SAAS,EAAEA,SAZG;AAad9rB,EAAAA,WAAW,EAAEA,aAbC;AAcd4rB,EAAAA,iBAAiB,EAAjBA,iBAdc;AAgBda,EAAAA,+BAA+B,EAA/BA,+BAhBc;AAkBdT,EAAAA,OAAO,EAAEA,OAlBK;AAmBdK,EAAAA,kBAAkB,EAAEA,kBAnBN;AAoBdE,EAAAA,yBAAyB,EAAEA,yBApBb;AAqBdR,EAAAA,UAAU,EAAEA,UArBE;AAsBda,EAAAA,aAAa,EAAEA,aAtBD;AAwBdG,EAAAA,wCAAwC,EAAEA;AAxB5B,CAAf;;AC5GA,IAAM/sB,aAAW,GAAG,SAAdA,WAAc,CAAAhE,KAAK;AAAA,SAAIA,KAAK,CAAC2xB,KAAV;AAAA,CAAzB;;AAEA,IAAMxsB,cAAY,GAAGqH,eAAM,CAACrH,YAAP,CAAoBnB,aAApB,CAArB;AACA,IAAMoB,eAAa,GAAGoH,eAAM,CAACpH,aAAP,CAAqBpB,aAArB,CAAtB;AAEA,IAAMM,QAAM,GAAGkI,eAAM,CAAClI,MAAP,CAAcN,aAAd,CAAf;AACA,IAAMK,gBAAc,GAAGmI,eAAM,CAACnI,cAAP,CAAsBL,aAAtB,CAAvB;AAEA,IAAMkC,UAAQ,GAAGsG,eAAM,CAACtG,QAAP,CAAgBlC,aAAhB,CAAjB;AACA,IAAMuC,WAAS,GAAGiG,eAAM,CAACjG,SAAP,CAAiBvC,aAAjB,CAAlB;AAEA,IAAMwC,cAAY,GAAGgG,eAAM,CAAChG,YAAP,CAAoBxC,aAApB,CAArB;AACA,IAAMqD,oBAAkB,GAAGmF,eAAM,CAACnF,kBAAP,CAA0BrD,aAA1B,CAA3B;AAEA,IAAMyC,0BAAwB,GAAG+F,eAAM,CAAC/F,wBAAP,CAAgCzC,aAAhC,CAAjC;AACA,IAAM6C,0BAAwB,GAAG2F,eAAM,CAAC3F,wBAAP,CAAgC7C,aAAhC,CAAjC;AAEA,IAAMuH,gBAAc,GAAGpH,uBAAc,CACpC,CACCytB,WAAmB,CAACrmB,cADrB,EAECsmB,WAAsB,CAACtmB,cAFxB,EAGCumB,WAAmB,CAACvmB,cAHrB,EAICwmB,MAAe,CAACxmB,cAJjB,CADoC,EAOpC,UAACnC,UAAD,EAAayZ,aAAb,EAA4ByB,UAA5B,EAAwCzgB,MAAxC,EAAmD;AAClD,SAAO;AACNuF,IAAAA,UAAU,EAAVA,UADM;AAENyZ,IAAAA,aAAa,EAAbA,aAFM;AAGNyB,IAAAA,UAAU,EAAVA,UAHM;AAINzgB,IAAAA,MAAM,EAANA;AAJM,GAAP;AAMA,CAdmC,CAArC;AAiBA,YAAe;AACdsB,EAAAA,YAAY,EAAZA,cADc;AAEdC,EAAAA,aAAa,EAAbA,eAFc;AAGdmB,EAAAA,SAAS,EAATA,WAHc;AAIdC,EAAAA,YAAY,EAAZA,cAJc;AAKda,EAAAA,kBAAkB,EAAlBA,oBALc;AAMd2qB,EAAAA,YAAY,EAAE9rB,UANA;AAQd5B,EAAAA,MAAM,EAANA,QARc;AASdD,EAAAA,cAAc,EAAdA,gBATc;AAWdoC,EAAAA,wBAAwB,EAAxBA,0BAXc;AAYdI,EAAAA,wBAAwB,EAAxBA,0BAZc;AAcd0E,EAAAA,cAAc,EAAdA,gBAdc;AAgBdvH,EAAAA,WAAW,EAAXA;AAhBc,CAAf;;ACzCA,IAAM+qB,oBAAkB,GAAG,SAArBA,kBAAqB,CAAA/uB,KAAK;AAAA,SAAIA,KAAK,CAACiyB,OAAN,CAAc5X,IAAlB;AAAA,CAAhC;;AACA,IAAM6X,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAlyB,KAAK;AAAA,SAAIA,KAAK,CAACiyB,OAAN,CAAcA,OAAlB;AAAA,CAAnC;;AAEA,IAAMtO,aAAW,GAAGxf,uBAAc,CACjC,CACC4qB,oBADD,EAEC,UAAC/uB,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFD,CADiC,EAKjC,UAAC4Z,IAAD,EAAO5Z,GAAP,EAAe;AACd,SAAO4Z,IAAI,IAAIA,IAAI,CAAC5Z,GAAD,CAAnB;AACA,CAPgC,CAAlC;AAUA,IAAM0xB,SAAS,GAAGhuB,uBAAc,CAC/B,CACC+tB,qBADD,EAEC,UAAClyB,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFD,CAD+B,EAK/B,UAACwxB,OAAD,EAAUxxB,GAAV,EAAkB;AACjB,SAAOwxB,OAAO,IAAIA,OAAO,CAACxxB,GAAD,CAAzB;AACA,CAP8B,CAAhC;AAUA,IAAM2xB,0BAA0B,GAAGjuB,uBAAc,CAChD,CACCwf,aADD,EAECuO,qBAFD,CADgD,EAKhD,UAAC/W,GAAD,EAAM8W,OAAN,EAAkB;AACjB,MAAI9W,GAAG,IAAIA,GAAG,CAACmU,cAAX,IAA6BnU,GAAG,CAACmU,cAAJ,CAAmBxvB,MAApD,EAA4D;AAC3D,QAAIuyB,UAAU,GAAG,EAAjB;;AACA,8BAAOlX,GAAG,CAACmU,cAAX,EAA2B,UAAC7uB,GAAD,EAAS;AACnC4xB,MAAAA,UAAU,CAAC5xB,GAAD,CAAV,GAAkBwxB,OAAO,CAACxxB,GAAD,CAAzB;AACA,KAFD;;AAGA,WAAO4xB,UAAP;AACA,GAND,MAMO;AACN,WAAO,IAAP;AACA;AACD,CAf+C,CAAjD;AAkBA,IAAMC,MAAM,GAAGnuB,uBAAc,CAC5B,CAACguB,SAAD,CAD4B,EAE5B,UAACI,MAAD,EAAY;AACX,SAAOA,MAAM,IAAIA,MAAM,CAACnxB,IAAjB,IAAyBmxB,MAAM,CAACnxB,IAAP,CAAYpB,KAAZ,KAAsB,MAAtD;AACA,CAJ2B,CAA7B;AAOA,cAAe;AACd2jB,EAAAA,WAAW,EAAXA,aADc;AAEdwO,EAAAA,SAAS,EAATA,SAFc;AAGdC,EAAAA,0BAA0B,EAA1BA,0BAHc;AAIdE,EAAAA,MAAM,EAANA;AAJc,CAAf;;ACfA,aAAe;AACd/lB,EAAAA,qBAAqB,EAAEA,qBADT;AAEX0N,EAAAA,eAAe,EAAEA,eAFN;AAGdxQ,EAAAA,GAAG,EAAE+oB,WAHS;AAId/P,EAAAA,KAAK,EAAEgQ,KAJO;AAKdtgB,EAAAA,aAAa,EAAE4B,aALD;AAMd3K,EAAAA,UAAU,EAAEspB,WANE;AAOd3c,EAAAA,aAAa,EAAEa,WAPD;AAQd/I,EAAAA,oBAAoB,EAAE8kB,WARR;AASdpP,EAAAA,mBAAmB,EAAEqP,WATP;AAUd7d,EAAAA,kBAAkB,EAAEiB,SAVN;AAWd6M,EAAAA,aAAa,EAAEgQ,WAXD;AAYd7pB,EAAAA,KAAK,EAAE8pB,WAZO;AAadrP,EAAAA,MAAM,EAAEsP,WAbM;AAcdzO,EAAAA,UAAU,EAAE0O,WAdE;AAed5xB,EAAAA,IAAI,EAAE6xB,IAfQ;AAgBdtL,EAAAA,YAAY,EAAEuL,WAhBA;AAiBd7pB,EAAAA,cAAc,EAAE8pB,cAjBF;AAkBd1K,EAAAA,UAAU,EAAE2K,UAlBE;AAmBXjZ,EAAAA,IAAI,EAAEkZ,IAnBK;AAoBdlqB,EAAAA,OAAO,EAAEmqB,OApBK;AAqBdpqB,EAAAA,MAAM,EAAEqqB,MArBM;AAsBdtqB,EAAAA,SAAS,EAAEuqB,SAtBG;AAuBd3vB,EAAAA,MAAM,EAAE4vB,MAvBM;AAwBd3E,EAAAA,OAAO,EAAE4E,OAxBK;AAyBd5lB,EAAAA,UAAU,EAAE6lB,UAzBE;AA0BdnE,EAAAA,SAAS,EAAEoE,SA1BG;AA2BdhgB,EAAAA,WAAW,EAAEI,WA3BC;AA4Bd1C,EAAAA,kBAAkB,EAAEuiB,kBA5BN;AA6BdjhB,EAAAA,gBAAgB,EAAEkB,gBA7BJ;AA8Bd9E,EAAAA,MAAM,EAAE8kB,MA9BM;AA+BdrE,EAAAA,IAAI,EAAEsE,IA/BQ;AAgCdpE,EAAAA,KAAK,EAAEqE,KAhCO;AAiCdrC,EAAAA,KAAK,EAAEsC,KAjCO;AAkCdhC,EAAAA,OAAO,EAAEiC;AAlCK,CAAf;;ACjCA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAn0B,KAAK;AAAA,SAAIA,KAAK,CAACo0B,SAAN,CAAgBC,MAApB;AAAA,CAAvB;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAt0B,KAAK;AAAA,SAAIA,KAAK,CAACo0B,SAAN,CAAgBG,MAApB;AAAA,CAAvB;;AACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAAAx0B,KAAK;AAAA,SAAIA,KAAK,CAACo0B,SAAN,CAAgBK,IAApB;AAAA,CAArB;;AAEA,IAAMC,qBAAqB,GAAG/1B,wCAAoB,CAC9C,CACIw1B,SADJ,EAEI,UAACn0B,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFJ,CAD8C,EAK9C,UAAC4zB,MAAD,EAAS5zB,GAAT,EAAiB;AACb,MAAI4zB,MAAM,IAAI5zB,GAAd,EAAmB;AACf,6CACO4zB,MAAM,CAAC5zB,GAAD,CADb;AAEI,cAAM;AAFV;AAIH,GALD,MAKO;AACH,WAAO,IAAP;AACH;AACJ,CAd6C,CAApB,CAe5B,UAACT,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAf4B,CAA9B;AAiBA,IAAMk0B,qBAAqB,GAAGh2B,wCAAoB,CAC9C,CACI21B,SADJ,EAEI,UAACt0B,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFJ,CAD8C,EAK9C,UAAC8zB,MAAD,EAAS9zB,GAAT,EAAiB;AACb,MAAI8zB,MAAM,IAAI9zB,GAAd,EAAmB;AACf,6CACO8zB,MAAM,CAAC9zB,GAAD,CADb;AAEI,cAAM;AAFV;AAIH,GALD,MAKO;AACH,WAAO,IAAP;AACH;AACJ,CAd6C,CAApB,CAe5B,UAACT,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAf4B,CAA9B;AAiBA,IAAMm0B,mBAAmB,GAAGj2B,wCAAoB,CAC5C,CACI61B,OADJ,EAEI,UAACx0B,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAFJ,CAD4C,EAK5C,UAACg0B,IAAD,EAAOh0B,GAAP,EAAe;AACX,MAAIg0B,IAAI,IAAIh0B,GAAZ,EAAiB;AACb,6CACOg0B,IAAI,CAACh0B,GAAD,CADX;AAEI,cAAM;AAFV;AAIH,GALD,MAKO;AACH,WAAO,IAAP;AACH;AACJ,CAd2C,CAApB,CAe1B,UAACT,KAAD,EAAQS,GAAR;AAAA,SAAgBA,GAAhB;AAAA,CAf0B,CAA5B;AAiBA,IAAMo0B,iBAAiB,GAAGl2B,wCAAoB,CAC1C,CACI,UAACqB,KAAD,EAAQ80B,SAAR;AAAA,SAAsBJ,qBAAqB,CAAC10B,KAAD,EAAQ80B,SAAR,CAA3C;AAAA,CADJ,EAEI,UAAC90B,KAAD,EAAQ80B,SAAR,EAAmBC,SAAnB;AAAA,SAAiCJ,qBAAqB,CAAC30B,KAAD,EAAQ+0B,SAAR,CAAtD;AAAA,CAFJ,EAGI,UAAC/0B,KAAD,EAAQ80B,SAAR,EAAmBC,SAAnB,EAA8BC,OAA9B;AAAA,SAA0CJ,mBAAmB,CAAC50B,KAAD,EAAQg1B,OAAR,CAA7D;AAAA,CAHJ,CAD0C,EAM1C,UAACC,eAAD,EAAkBC,cAAlB,EAAkCC,YAAlC,EAAmD;AAC/C,SAAO,CAACF,eAAD,EAAkBC,cAAlB,EAAkCC,YAAlC,CAAP;AACH,CARyC,CAApB,CASxB,UAACn1B,KAAD,EAAQ80B,SAAR,EAAmBC,SAAnB,EAA8BC,OAA9B;AAAA,mBAA6CF,SAA7C,cAA0DC,SAA1D,cAAuEC,OAAvE;AAAA,CATwB,CAA1B;AAWA,yBAAe;AACXZ,EAAAA,SAAS,EAAE;AACPM,IAAAA,qBAAqB,EAArBA,qBADO;AAEPC,IAAAA,qBAAqB,EAArBA,qBAFO;AAGPC,IAAAA,mBAAmB,EAAnBA,mBAHO;AAIPC,IAAAA,iBAAiB,EAAjBA;AAJO;AADA,CAAf;;ACnEA,SAASO,SAAT,CAAmBC,eAAnB,EAAoC1mB,MAApC,EAA4C2mB,cAA5C,EAA4DC,WAA5D,EAAyE;AACrEC,EAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAM;AACzB,QAAI,CAACD,WAAL,EAAkB;AACdA,MAAAA,WAAW,GAAG5mB,MAAM,CAACnJ,GAAP,CAAW,UAAAiwB,KAAK;AAAA,eAAI,IAAJ;AAAA,OAAhB,CAAd;AACH,KAHwB;;;AAMzB,QAAMC,WAAW,GAAGL,eAAe,MAAf,4BAAmB1mB,MAAnB,EAApB;AACAgnB,IAAAA,WAAM,CAACC,eAAP,CAAuBN,cAAvB,EAAuCI,WAAvC;AACAC,IAAAA,WAAM,CAACE,QAAP,CAAgBP,cAAhB,EAAgCI,WAAhC,EARyB;;AAWzBL,IAAAA,eAAe,MAAf,4BAAmBE,WAAnB,GAXyB;;AAczB,QAAMO,WAAW,GAAGT,eAAe,MAAf,4BAAmB1mB,MAAnB,EAApB;AACAgnB,IAAAA,WAAM,CAACI,KAAP,CAAaL,WAAb,EAA0BI,WAA1B;AACH,GAhBC,CAAF;AAiBH;;AAED,kBAAe;AACXV,EAAAA,SAAS,EAATA;AADW,CAAf;;ACjBAY,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AACvC,MAAMh2B,KAAK,GAAG;AACVo0B,IAAAA,SAAS,EAAE;AACPC,MAAAA,MAAM,EAAE;AACJ4B,QAAAA,OAAO,EAAE;AACL5mB,UAAAA,IAAI,EAAE;AADD,SADL;AAIJ6mB,QAAAA,MAAM,EAAE;AACJ7mB,UAAAA,IAAI,EAAE;AADF;AAJJ,OADD;AASPolB,MAAAA,IAAI,EAAE;AACF0B,QAAAA,KAAK,EAAE;AACH9mB,UAAAA,IAAI,EAAE;AADH,SADL;AAIF+mB,QAAAA,KAAK,EAAE;AACH/mB,UAAAA,IAAI,EAAE;AADH;AAJL,OATC;AAiBPklB,MAAAA,MAAM,EAAE;AACJ8B,QAAAA,KAAK,EAAE;AACHhnB,UAAAA,IAAI,EAAE;AADH,SADH;AAIJinB,QAAAA,IAAI,EAAE;AACFjnB,UAAAA,IAAI,EAAE;AADJ;AAJF;AAjBD,KADD;AA2BVknB,IAAAA,MAAM,EAAE;AACJC,MAAAA,OAAO,EAAE;AACLnnB,QAAAA,IAAI,EAAE;AADD;AADL;AA3BE,GAAd;AAkCA2mB,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC1C,QAAMV,cAAc,GAAG;AACnB,cAAM,kBADa;AAEnBjmB,MAAAA,IAAI,EAAE;AAFa,KAAvB;;AAKA,QAAMonB,YAAY,qCACXz2B,KADW;AAEdu2B,MAAAA,MAAM,oCACCv2B,KAAK,CAACu2B,MADP;AAEFG,QAAAA,MAAM,EAAE;AAFN;AAFQ,MAAlB;;AAQAlB,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAM;AACvC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAA7B,CAAmD10B,KAAnD,EAA0D,SAA1D,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAHC,CAAF;AAKAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsBwB,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAAnD,EAA0E,CAAC10B,KAAD,EAAQ,SAAR,CAA1E,EAA8Fs1B,cAA9F,EAA8G,CAACmB,YAAD,EAAe,QAAf,CAA9G;AAGAjB,IAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAM;AACnC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAA7B,CAAmD10B,KAAnD,EAA0D,SAA1D,CAAf;;AACA,UAAM82B,aAAa,qCACZ92B,KADY;AAEfo0B,QAAAA,SAAS,oCACFp0B,KAAK,CAACo0B,SADJ;AAELC,UAAAA,MAAM,oCACFr0B,KAAK,CAACo0B,SAAN,CAAgBC,MADd;AAEpB0C,YAAAA,OAAO,EAAE;AAFW;AAFD;AAFM,QAAnB;;AAWT,UAAMC,aAAa,GAAGJ,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAA7B,CAAmD10B,KAAnD,EAA0D,QAA1D,CAAtB;AACS,UAAMi3B,YAAY,GAAGL,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAA7B,CAAmDoC,aAAnD,EAAkE,SAAlE,CAArB;AAEAnB,MAAAA,WAAM,CAACE,QAAP,CAAgBc,MAAhB,EAAwBM,YAAxB;AACH,KAjBC,CAAF;AAmBNzB,IAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAM;AACtC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAA7B,CAAmD10B,KAAnD,EAA0D,SAA1D,CAAf;;AACA,UAAMy2B,YAAY,qCACdz2B,KADc;AAEjBu2B,QAAAA,MAAM,oCACFv2B,KAAK,CAACu2B,MADJ;AAELG,UAAAA,MAAM,EAAE;AAFH;AAFW,QAAlB;;AAQA,UAAMO,YAAY,GAAGL,kBAAkB,CAACxC,SAAnB,CAA6BM,qBAA7B,CAAmD+B,YAAnD,EAAiE,SAAjE,CAArB;AAEAd,MAAAA,WAAM,CAACI,KAAP,CAAaY,MAAb,EAAqBM,YAArB;AACA,KAbC,CAAF;AAcG,GAvDO,CAAR;AAyDAjB,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACtC,QAAMV,cAAc,GAAG,CAAC;AACpB,cAAM,kBADc;AAEpBjmB,MAAAA,IAAI,EAAE;AAFc,KAAD,EAGpB;AACC,cAAM,iBADP;AAECA,MAAAA,IAAI,EAAE;AAFP,KAHoB,EAMpB;AACC,cAAM,eADP;AAECA,MAAAA,IAAI,EAAE;AAFP,KANoB,CAAvB;AAWAmmB,IAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAM;AACzC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,OAAjE,EAA0E,OAA1E,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAHC,CAAF;AAKAE,IAAAA,EAAE,CAAC,wBAAD,EAA2B,YAAM;AAC/B,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,OAAjE,EAA0E,OAA1E,CAAf;AACA,UAAMk3B,OAAO,GAAGN,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,MAAjE,EAAyE,OAAzE,CAAhB;AACA,UAAMm3B,OAAO,GAAGP,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,OAAjE,EAA0E,OAA1E,CAAhB;AAEA21B,MAAAA,WAAM,CAACE,QAAP,CAAgBc,MAAhB,EAAwBO,OAAxB;AACAvB,MAAAA,WAAM,CAACI,KAAP,CAAaY,MAAb,EAAqBQ,OAArB;AACH,KAPC,CAAF;AASAN,IAAAA,WAAW,CAACzB,SAAZ,CAAsBwB,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAAnD,EAAsE,CAAC70B,KAAD,EAAQ,SAAR,EAAmB,OAAnB,EAA4B,OAA5B,CAAtE,EAA4Gs1B,cAA5G,EAA4H,CAACt1B,KAAD,EAAQ,SAAR,EAAmB,OAAnB,EAA4B,OAA5B,CAA5H;AAEAw1B,IAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAM;AACnC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,OAAjE,EAA0E,OAA1E,CAAf;;AACA,UAAMy2B,YAAY,qCACXz2B,KADW;AAEdu2B,QAAAA,MAAM,oCACCv2B,KAAK,CAACu2B,MADP;AAEFG,UAAAA,MAAM,EAAE;AAFN;AAFQ,QAAlB;;AAQA,UAAMO,YAAY,GAAGL,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C4B,YAA/C,EAA6D,SAA7D,EAAwE,OAAxE,EAAiF,OAAjF,CAArB;AAEAd,MAAAA,WAAM,CAACI,KAAP,CAAaY,MAAb,EAAqBM,YAArB;AACH,KAbC,CAAF;AAeAzB,IAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAM;AACrC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,OAAjE,EAA0E,OAA1E,CAAf;;AACA,UAAMy2B,YAAY,qCACXz2B,KADW;AAEdo0B,QAAAA,SAAS,oCACFp0B,KAAK,CAACo0B,SADJ;AAELgD,UAAAA,OAAO,EAAE;AAFJ;AAFK,QAAlB;;AAUA,UAAMH,YAAY,GAAGL,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C4B,YAA/C,EAA6D,SAA7D,EAAwE,OAAxE,EAAiF,OAAjF,CAArB;AAEAd,MAAAA,WAAM,CAACI,KAAP,CAAaY,MAAb,EAAqBM,YAArB;AACH,KAfC,CAAF;AAiBAzB,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAM;AACvC,UAAMmB,MAAM,GAAGC,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C70B,KAA/C,EAAsD,SAAtD,EAAiE,OAAjE,EAA0E,OAA1E,CAAf;;AACA,UAAMy2B,YAAY,qCACXz2B,KADW;AAEdo0B,QAAAA,SAAS,oCACFp0B,KAAK,CAACo0B,SADJ;AAELC,UAAAA,MAAM,oCACCr0B,KAAK,CAACo0B,SAAN,CAAgBC,MADjB;AAEFgD,YAAAA,KAAK,EAAE;AAFL;AAFD;AAFK,QAAlB;;AAWA,UAAMJ,YAAY,GAAGL,kBAAkB,CAACxC,SAAnB,CAA6BS,iBAA7B,CAA+C4B,YAA/C,EAA6D,SAA7D,EAAwE,OAAxE,EAAiF,OAAjF,CAArB;AAEAd,MAAAA,WAAM,CAACE,QAAP,CAAgBc,MAAhB,EAAwBM,YAAxB;AACH,KAhBC,CAAF;AAiBH,GA7EO,CAAR;AA8EH,CA1KO,CAAR;;ACHA,kBAAeK,cAAK,CAACC,aAAN,CAAoB;AAElCC,EAAAA,UAAU,EAAE,YAFsB;AAIlCC,EAAAA,OAAO,EAAE,SAJyB;AAKlCC,EAAAA,cAAc,EAAE,gBALkB;AAMlCC,EAAAA,WAAW,EAAE,aANqB;AAOlCC,EAAAA,WAAW,EAAE,aAPqB;AAQlCC,EAAAA,iBAAiB,EAAE,mBARe;AASlCC,EAAAA,oBAAoB,EAAE,sBATY;AAUlCC,EAAAA,0BAA0B,EAAE,4BAVM;AAYlCC,EAAAA,GAAG,EAAE;AACJC,IAAAA,OAAO,EAAE,IADL;AAEJC,IAAAA,YAAY,EAAE,IAFV;AAGJC,IAAAA,uBAAuB,EAAE,IAHrB;AAIJC,IAAAA,0BAA0B,EAAE,IAJxB;AAKJC,IAAAA,qBAAqB,EAAE;AALnB,GAZ6B;AAoBlCC,EAAAA,KAAK,EAAE;AACNC,IAAAA,gBAAgB,EAAE;AACjBC,MAAAA,GAAG,EAAE,IADY;AAEjBC,MAAAA,cAAc,EAAE,IAFC;AAGjBC,MAAAA,MAAM,EAAE;AACPC,QAAAA,KAAK,EAAE;AADA,OAHS;AAMjBC,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE,IADC;AAENK,QAAAA,SAAS,EAAE;AAFL,OANU;AAUjBC,MAAAA,IAAI,EAAE;AACLH,QAAAA,KAAK,EAAE,IADF;AAELI,QAAAA,OAAO,EAAE;AAFJ,OAVW;AAcjBC,MAAAA,cAAc,EAAE,IAdC;AAejBC,MAAAA,GAAG,EAAE;AACJC,QAAAA,OAAO,EAAE;AACRC,UAAAA,KAAK,EAAE,IADC;AAERC,UAAAA,QAAQ,EAAE;AAFF,SADL;AAKJC,QAAAA,IAAI,EAAE;AACLF,UAAAA,KAAK,EAAE,IADF;AAELC,UAAAA,QAAQ,EAAE;AAFL;AALF;AAfY,KADZ;AA2BNE,IAAAA,UAAU,EAAE;AACXd,MAAAA,GAAG,EAAE,IADM;AAEXC,MAAAA,cAAc,EAAE,IAFL;AAGXC,MAAAA,MAAM,EAAE;AACPC,QAAAA,KAAK,EAAE;AADA,OAHG;AAMXC,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE,IADC;AAENK,QAAAA,SAAS,EAAE;AAFL,OANI;AAUXC,MAAAA,IAAI,EAAE;AACLH,QAAAA,KAAK,EAAE,IADF;AAELI,QAAAA,OAAO,EAAE;AAFJ,OAVK;AAcXC,MAAAA,cAAc,EAAE,IAdL;AAeXC,MAAAA,GAAG,EAAE;AACJC,QAAAA,OAAO,EAAE;AACRC,UAAAA,KAAK,EAAE,IADC;AAERC,UAAAA,QAAQ,EAAE;AAFF,SADL;AAKJC,QAAAA,IAAI,EAAE;AACLF,UAAAA,KAAK,EAAE,IADF;AAELC,UAAAA,QAAQ,EAAE;AAFL;AALF;AAfM;AA3BN,GApB2B;AA2ElCG,EAAAA,cAAc,EAAE;AACff,IAAAA,GAAG,EAAE,IADU;AAEfC,IAAAA,cAAc,EAAE,IAFD;AAGfC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHO;AAMfC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KANQ;AAUfI,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERN,QAAAA,SAAS,EAAE,IAFH;AAGRO,QAAAA,QAAQ,EAAE;AAHF;AADL;AAVU,GA3EkB;AA8FlCI,EAAAA,oCAAoC,EAAE,sCA9FJ;AA+FlCC,EAAAA,uBAAuB,EAAE,yBA/FS;AAiGlCC,EAAAA,UAAU,EAAE;AACXlB,IAAAA,GAAG,EAAE,IADM;AAEXC,IAAAA,cAAc,EAAE,IAFL;AAGXkB,IAAAA,MAAM,EAAE,IAHG;AAIXC,IAAAA,YAAY,EAAE,IAJH;AAKXC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALG;AAUXtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVG;AAaXC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENyB,MAAAA,SAAS,EAAE,IAFL;AAGNpB,MAAAA,SAAS,EAAE,IAHL;AAINqB,MAAAA,WAAW,EAAE;AAJP,KAbI;AAmBXpB,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAnBK;AAuBXC,IAAAA,cAAc,EAAE,IAvBL;AAwBXmB,IAAAA,eAAe,EAAE,IAxBN;AAyBXlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL,OALF;AASJgB,MAAAA,aAAa,EAAE;AACdhB,QAAAA,QAAQ,EAAE;AADI;AATX;AAzBM,GAjGsB;AAyIlCiB,EAAAA,cAAc,EAAE;AACf7B,IAAAA,GAAG,EAAE,IADU;AAEfC,IAAAA,cAAc,EAAE,IAFD;AAGfC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHO;AAMfC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE;AADC,KANQ;AASfM,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KATS;AAafC,IAAAA,cAAc,EAAE,IAbD;AAcfmB,IAAAA,eAAe,EAAE,IAdF;AAeflB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAfU,GAzIkB;AAoKlCkB,EAAAA,KAAK,EAAE;AACN9B,IAAAA,GAAG,EAAE,IADC;AAENC,IAAAA,cAAc,EAAE,IAFV;AAGNkB,IAAAA,MAAM,EAAE,IAHF;AAINC,IAAAA,YAAY,EAAE,IAJR;AAKNC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALF;AAUNtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVF;AAaNC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE,IAFL;AAGNqB,MAAAA,WAAW,EAAE;AAHP,KAbD;AAkBNpB,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBA;AAsBNC,IAAAA,cAAc,EAAE,IAtBV;AAuBNmB,IAAAA,eAAe,EAAE,IAvBX;AAwBNlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAxBC,GApK2B;AAwMlCmB,EAAAA,2BAA2B,EAAE,6BAxMK;AAyMlCC,EAAAA,kBAAkB,EAAE,oBAzMc;AA2MlCC,EAAAA,MAAM,EAAE;AACPC,IAAAA,IAAI,EAAE;AACLC,MAAAA,iBAAiB,EAAE,IADd;AAELC,MAAAA,YAAY,EAAE;AAFT,KADC;AAKPf,IAAAA,MAAM,EAAE;AACPgB,MAAAA,sBAAsB,EAAE;AADjB;AALD,GA3M0B;AAqNlCC,EAAAA,UAAU,EAAE;AACXd,IAAAA,MAAM,EAAE,IADG;AAEXe,IAAAA,GAAG,EAAE;AAFM,GArNsB;AA0NlCC,EAAAA,MAAM,EAAE;AACPhB,IAAAA,MAAM,EAAE,IADD;AAEPiB,IAAAA,WAAW,EAAE;AAFN,GA1N0B;AA+N/BP,EAAAA,IAAI,EAAE;AACFQ,IAAAA,cAAc,EAAE;AACrB1C,MAAAA,GAAG,EAAE,IADgB;AAErB2C,MAAAA,cAAc,EAAE,IAFK;AAGrBnB,MAAAA,MAAM,EAAE,IAHa;AAIrBpB,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE,IADC;AAENsB,QAAAA,MAAM,EAAE;AAFF;AAJc,KADd;AAUFsB,IAAAA,sBAAsB,EAAE;AAC7B5C,MAAAA,GAAG,EAAE,IADwB;AAE7BI,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE;AADC;AAFsB,KAVtB;AAgBF6C,IAAAA,mBAAmB,EAAE;AAC1B7C,MAAAA,GAAG,EAAE,IADqB;AAE1BI,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE;AADC;AAFmB,KAhBnB;AAqBF8C,IAAAA,YAAY,EAAE;AACnB9C,MAAAA,GAAG,EAAE,IADc;AAEnB2C,MAAAA,cAAc,EAAE,IAFG;AAGnBvC,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE,IADC;AAENsB,QAAAA,MAAM,EAAE;AAFF;AAHY,KArBZ;AA6BFyB,IAAAA,oBAAoB,EAAE;AAC3B/C,MAAAA,GAAG,EAAE,IADsB;AAE3BI,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE;AADC;AAFoB,KA7BpB;AAmCFgD,IAAAA,iBAAiB,EAAE;AACxBhD,MAAAA,GAAG,EAAE,IADmB;AAExBI,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE;AADC;AAFiB;AAnCjB,GA/NyB;AA0QlCiD,EAAAA,gBAAgB,EAAE,kBA1QgB;AA2QlCC,EAAAA,wBAAwB,EAAE,0BA3QQ;AA4QlCC,EAAAA,wBAAwB,EAAE,0BA5QQ;AA6QlCC,EAAAA,8BAA8B,EAAE,gCA7QE;AA+QlCC,EAAAA,SAAS,EAAE;AACVrD,IAAAA,GAAG,EAAE,IADK;AAEVC,IAAAA,cAAc,EAAE,IAFN;AAGVG,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KAHG;AAOVG,IAAAA,cAAc,EAAE,IAPN;AAQVC,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AARK,GA/QuB;AAmSlC0C,EAAAA,UAAU,EAAE;AACXtD,IAAAA,GAAG,EAAE,IADM;AAEXC,IAAAA,cAAc,EAAE,IAFL;AAGXkB,IAAAA,MAAM,EAAE,IAHG;AAIXC,IAAAA,YAAY,EAAE,IAJH;AAKXC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALG;AAUXtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVG;AAaXC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbI;AAkBXC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBK;AAsBXC,IAAAA,cAAc,EAAE,IAtBL;AAuBXmB,IAAAA,eAAe,EAAE,IAvBN;AAwBXlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAxBM,GAnSsB;AAuUlC2C,EAAAA,+BAA+B,EAAE,iCAvUC;AAwUlCC,EAAAA,qCAAqC,EAAE,uCAxUL;AAyUlCC,EAAAA,+BAA+B,EAAE,iCAzUC;AA0UlCC,EAAAA,iCAAiC,EAAE,mCA1UD;AA2UlCC,EAAAA,uCAAuC,EAAE,yCA3UP;AA4UlCC,EAAAA,iCAAiC,EAAE,mCA5UD;AA6UlCC,EAAAA,+BAA+B,EAAE,iCA7UC;AA8UlCC,EAAAA,qCAAqC,EAAE,uCA9UL;AA+UlCC,EAAAA,+BAA+B,EAAE,iCA/UC;AAiVlCC,EAAAA,eAAe,EAAE;AAChBhE,IAAAA,GAAG,EAAE,IADW;AAEhBC,IAAAA,cAAc,EAAE,IAFA;AAGhBkB,IAAAA,MAAM,EAAE,IAHQ;AAIhBC,IAAAA,YAAY,EAAE,IAJE;AAKhBC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALQ;AAUhBtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVQ;AAahBC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbS;AAkBhBC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBU;AAsBhBC,IAAAA,cAAc,EAAE,IAtBA;AAuBhBmB,IAAAA,eAAe,EAAE,IAvBD;AAwBhBlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAxBW,GAjViB;AAqXlCqD,EAAAA,QAAQ,EAAE,UArXwB;AAsXlCC,EAAAA,WAAW,EAAE,aAtXqB;AAuXlCC,EAAAA,WAAW,EAAE,aAvXqB;AAwXlCC,EAAAA,oBAAoB,EAAE,sBAxXY;AAyXlCC,EAAAA,eAAe,EAAE,iBAzXiB;AA0XlCC,EAAAA,8BAA8B,EAAE,gCA1XE;AA4X/BC,EAAAA,IAAI,EAAE;AACLhC,IAAAA,GAAG,EAAE;AACEiC,MAAAA,kBAAkB,EAAE,IADtB;AAEPC,MAAAA,oBAAoB,EAAE,IAFf;AAGEC,MAAAA,IAAI,EAAE;AACFnC,QAAAA,GAAG,EAAE,IADH;AAEFf,QAAAA,MAAM,EAAE;AAFN;AAHR,KADA;AASFmD,IAAAA,GAAG,EAAE;AACPC,MAAAA,MAAM,EAAE;AACPC,QAAAA,aAAa,EAAE;AADR,OADD;AAIPC,MAAAA,QAAQ,EAAE;AACTvC,QAAAA,GAAG,EAAE;AADI,OAJH;AAODmC,MAAAA,IAAI,EAAE;AACFnC,QAAAA,GAAG,EAAE,IADH;AAEFf,QAAAA,MAAM,EAAE;AAFN;AAPL,KATH;AAqBFA,IAAAA,MAAM,EAAE;AArBN,GA5XyB;AAoZlCuD,EAAAA,gBAAgB,EAAE;AACjBtC,IAAAA,WAAW,EAAE,IADI;AAEjB+B,IAAAA,kBAAkB,EAAE,IAFH;AAGjBQ,IAAAA,kBAAkB,EAAE,IAHH;AAIjBC,IAAAA,SAAS,EAAE,IAJM;AAKjBC,IAAAA,YAAY,EAAE,IALG;AAMjBC,IAAAA,UAAU,EAAE,IANK;AAOjBC,IAAAA,SAAS,EAAE,IAPM;AAQjBC,IAAAA,QAAQ,EAAE,IARO;AASjBZ,IAAAA,oBAAoB,EAAE,IATL;AAUjBlC,IAAAA,GAAG,EAAE;AACJvC,MAAAA,GAAG,EAAE,IADD;AAEJyE,MAAAA,oBAAoB,EAAE,IAFlB;AAGKa,MAAAA,UAAU,EAAE,IAHjB;AAIJhE,MAAAA,MAAM,EAAE,IAJJ;AAKJiE,MAAAA,OAAO,EAAE,IALL;AAMJC,MAAAA,QAAQ,EAAE,IANN;AAOJC,MAAAA,UAAU,EAAE,IAPR;AAQJC,MAAAA,oBAAoB,EAAE;AAAE;AACvBnD,QAAAA,GAAG,EAAE,IADgB;AAErBf,QAAAA,MAAM,EAAE;AAFa,OARlB;AAYJkD,MAAAA,IAAI,EAAE;AACLnC,QAAAA,GAAG,EAAE,IADA;AAELf,QAAAA,MAAM,EAAE;AAFH,OAZF;AAgBJgD,MAAAA,kBAAkB,EAAE,IAhBhB;AAiBJmB,MAAAA,QAAQ,EAAE;AAjBN,KAVY;AA6BjBhB,IAAAA,GAAG,EAAE;AACJ3E,MAAAA,GAAG,EAAE,IADD;AAEJ4E,MAAAA,MAAM,EAAE;AACPrC,QAAAA,GAAG,EAAE;AACJqD,UAAAA,oBAAoB,EAAE,IADlB;AAEJC,UAAAA,SAAS,EAAE,IAFP;AAGWC,UAAAA,KAAK,EAAE;AAHlB,SADE;AAMPnF,QAAAA,KAAK,EAAE;AACNkF,UAAAA,SAAS,EAAE;AADL;AANA,OAFJ;AAYJvE,MAAAA,MAAM,EAAE,IAZJ;AAaJyE,MAAAA,QAAQ,EAAE,IAbN;AAcJC,MAAAA,QAAQ,EAAE,IAdN;AAeJN,MAAAA,oBAAoB,EAAE;AAAE;AACvBnD,QAAAA,GAAG,EAAE,IADgB;AAErBf,QAAAA,MAAM,EAAE;AAFa,OAflB;AAmBJkD,MAAAA,IAAI,EAAE;AACLnC,QAAAA,GAAG,EAAE,IADA;AAELf,QAAAA,MAAM,EAAE;AAFH;AAnBF,KA7BY;AAqDXA,IAAAA,MAAM,EAAE,IArDG;AAuDX;AACNoD,IAAAA,MAAM,EAAE;AACPqB,MAAAA,UAAU,EAAE,IADL;AAEPC,MAAAA,aAAa,EAAE,IAFR;AAGPC,MAAAA,KAAK,EAAE;AACNnG,QAAAA,GAAG,EAAE,IADC;AAEMoG,QAAAA,UAAU,EAAE,IAFlB;AAGN9E,QAAAA,MAAM,EAAE,IAHF;AAINiB,QAAAA,GAAG,EAAE,IAJC;AAKNf,QAAAA,MAAM,EAAE,IALF;AAMN6E,QAAAA,SAAS,EAAE;AANL,OAHA;AAWP9D,MAAAA,GAAG,EAAE;AAXE;AAxDS,GApZgB;AA2dlC+D,EAAAA,OAAO,EAAE;AACRtG,IAAAA,GAAG,EAAE,IADG;AAERC,IAAAA,cAAc,EAAE,IAFR;AAGRkB,IAAAA,MAAM,EAAE,IAHA;AAIRC,IAAAA,YAAY,EAAE,IAJN;AAKRC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALA;AAURtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVA;AAaRC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE,IAFL;AAGNqB,MAAAA,WAAW,EAAE;AAHP,KAbC;AAkBRpB,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBE;AAsBRC,IAAAA,cAAc,EAAE,IAtBR;AAuBRmB,IAAAA,eAAe,EAAE,IAvBT;AAwBRlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAxBG,GA3dyB;AA+flC2F,EAAAA,UAAU,EAAE,YA/fsB;AAggBlCC,EAAAA,uBAAuB,EAAE,yBAhgBS;AAkgBlCC,EAAAA,MAAM,EAAE;AACPzG,IAAAA,GAAG,EAAE,IADE;AAEPC,IAAAA,cAAc,EAAE,IAFT;AAGPkB,IAAAA,MAAM,EAAE,IAHD;AAIPC,IAAAA,YAAY,EAAE,IAJP;AAKPC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALD;AAUPtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVD;AAaPC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbA;AAkBPC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBC;AAsBPC,IAAAA,cAAc,EAAE,IAtBT;AAuBPmB,IAAAA,eAAe,EAAE,IAvBV;AAwBPlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAxBE,GAlgB0B;AAsiBlC8F,EAAAA,gBAAgB,EAAE,kBAtiBgB;AAwiBlCC,EAAAA,SAAS,EAAE;AACV3G,IAAAA,GAAG,EAAE,IADK;AAEVC,IAAAA,cAAc,EAAE;AAFN,GAxiBuB;AA6iBlC2G,EAAAA,aAAa,EAAE,eA7iBmB;AA8iBlCC,EAAAA,uBAAuB,EAAE,yBA9iBS;AA+iBlCC,EAAAA,uBAAuB,EAAE,yBA/iBS;AAgjBlCC,EAAAA,gCAAgC,EAAE,kCAhjBA;AAijBlCC,EAAAA,oBAAoB,EAAE,sBAjjBY;AAkjBlCC,EAAAA,0BAA0B,EAAE,4BAljBM;AAmjBlCC,EAAAA,sCAAsC,EAAE,wCAnjBN;AAojBlCC,EAAAA,mBAAmB,EAAE,qBApjBa;AAqjBlCC,EAAAA,sBAAsB,EAAE,wBArjBU;AAsjBlCC,EAAAA,0BAA0B,EAAE,4BAtjBM;AAujBlCC,EAAAA,gBAAgB,EAAE,kBAvjBgB;AAwjBlCC,EAAAA,iBAAiB,EAAE,mBAxjBe;AAyjBlCC,EAAAA,iBAAiB,EAAE,mBAzjBe;AA0jBlCC,EAAAA,uBAAuB,EAAE,yBA1jBS;AA2jBlCC,EAAAA,uBAAuB,EAAE,yBA3jBS;AA4jBlCC,EAAAA,uBAAuB,EAAE,yBA5jBS;AA6jBlCC,EAAAA,6BAA6B,EAAE,+BA7jBG;AA8jBlCC,EAAAA,sBAAsB,EAAE,wBA9jBU;AA+jBlCC,EAAAA,6BAA6B,EAAE,+BA/jBG;AAgkBlCC,EAAAA,6BAA6B,EAAE,+BAhkBG;AAikBlCC,EAAAA,oCAAoC,EAAE,sCAjkBJ;AAkkBlCC,EAAAA,sCAAsC,EAAE,uCAlkBN;AAokBlCC,EAAAA,qCAAqC,EAAE,uCApkBL;AAqkBlCC,EAAAA,qCAAqC,EAAE,uCArkBL;AAskBlCC,EAAAA,mCAAmC,EAAE,qCAtkBH;AAwkBlCC,EAAAA,kCAAkC,EAAE,oCAxkBF;AAykBlCC,EAAAA,kCAAkC,EAAE,oCAzkBF;AA0kBlCC,EAAAA,gCAAgC,EAAE,kCA1kBA;AA2kBlCC,EAAAA,kCAAkC,EAAE,oCA3kBF;AA4kBlCC,EAAAA,kCAAkC,EAAE,oCA5kBF;AA6kBlCC,EAAAA,gCAAgC,EAAE,kCA7kBA;AA8kBlCC,EAAAA,kCAAkC,EAAE,oCA9kBF;AA+kBlCC,EAAAA,kCAAkC,EAAE,oCA/kBF;AAglBlCC,EAAAA,gCAAgC,EAAE,kCAhlBA;AAklBlCC,EAAAA,MAAM,EAAE;AACP9I,IAAAA,GAAG,EAAE,IADE;AAEPC,IAAAA,cAAc,EAAE,IAFT;AAGPkB,IAAAA,MAAM,EAAE,IAHD;AAIPC,IAAAA,YAAY,EAAE,IAJP;AAKPC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALD;AAUPtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVD;AAaPC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbA;AAkBPC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBC;AAsBPC,IAAAA,cAAc,EAAE,IAtBT;AAuBPC,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAvBE,GAllB0B;AAqnBlCmI,EAAAA,OAAO,EAAE;AACR/I,IAAAA,GAAG,EAAE,IADG;AAERgJ,IAAAA,KAAK,EAAE,IAFC;AAGRC,IAAAA,IAAI,EAAE,IAHE;AAIR3H,IAAAA,MAAM,EAAE,IAJA;AAKR4H,IAAAA,UAAU,EAAE,IALJ;AAMRC,IAAAA,OAAO,EAAE,IAND;AAORC,IAAAA,IAAI,EAAE;AACLpJ,MAAAA,GAAG,EAAE,IADA;AAELsB,MAAAA,MAAM,EAAE;AAFH,KAPE;AAWR+H,IAAAA,WAAW,EAAE,IAXL;AAYR7H,IAAAA,MAAM,EAAE;AAZA,GArnByB;AAooBlC8H,EAAAA,UAAU,EAAE;AACXtJ,IAAAA,GAAG,EAAE,IADM;AAEXC,IAAAA,cAAc,EAAE,IAFL;AAGXO,IAAAA,cAAc,EAAE,IAHL;AAIX+B,IAAAA,GAAG,EAAE;AACJgH,MAAAA,mBAAmB,EAAE;AACpB1I,QAAAA,IAAI,EAAE;AADc;AADjB,KAJM;AASLF,IAAAA,KAAK,EAAE;AACT4I,MAAAA,mBAAmB,EAAE;AADZ;AATF,GApoBsB;AAkpBlCC,EAAAA,sBAAsB,EAAE;AACvBxJ,IAAAA,GAAG,EAAE,IADkB;AAEvBsB,IAAAA,MAAM,EAAE,IAFe;AAGvBd,IAAAA,cAAc,EAAE,IAHO;AAIvBiJ,IAAAA,gBAAgB,EAAE;AAJK,GAlpBU;AAypBlCzG,EAAAA,iBAAiB,EAAE;AAClBhD,IAAAA,GAAG,EAAE,IADa;AAElBC,IAAAA,cAAc,EAAE,IAFE;AAGlBC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHU;AAMlBC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KANW;AAUlBI,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERN,QAAAA,SAAS,EAAE,IAFH;AAGRO,QAAAA,QAAQ,EAAE;AAHF;AADL;AAVa,GAzpBe;AA4qBlCkC,EAAAA,YAAY,EAAE;AACb9C,IAAAA,GAAG,EAAE,IADQ;AAEbC,IAAAA,cAAc,EAAE,IAFH;AAGbC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHK;AAMbC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KANM;AAWbI,IAAAA,GAAG,EAAE;AACJT,MAAAA,GAAG,EAAE,IADD;AAEJC,MAAAA,cAAc,EAAE,IAFZ;AAGJS,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OAHL;AAOJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AAPF;AAXQ,GA5qBoB;AAqsBlCmC,EAAAA,oBAAoB,EAAE;AACrB/C,IAAAA,GAAG,EAAE,IADgB;AAErBC,IAAAA,cAAc,EAAE,IAFK;AAGrBC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHa;AAMrBM,IAAAA,GAAG,EAAE;AACJT,MAAAA,GAAG,EAAE,IADD;AAEJC,MAAAA,cAAc,EAAE,IAFZ;AAGJS,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OAHL;AAOJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL,OAPF;AAWJgB,MAAAA,aAAa,EAAE;AACdhB,QAAAA,QAAQ,EAAE;AADI;AAXX,KANgB;AAwBrB8I,IAAAA,MAAM,EAAE;AACP1J,MAAAA,GAAG,EAAE,IADE;AAEPyB,MAAAA,SAAS,EAAE,IAFJ;AAGPxB,MAAAA,cAAc,EAAE,IAHT;AAIPC,MAAAA,MAAM,EAAE;AACPC,QAAAA,KAAK,EAAE;AADA,OAJD;AAOPC,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE,IADC;AAEN0B,QAAAA,WAAW,EAAE,IAFP;AAGNrB,QAAAA,SAAS,EAAE,IAHL;AAINoB,QAAAA,SAAS,EAAE;AAJL,OAPA;AAaPnB,MAAAA,IAAI,EAAE;AACLH,QAAAA,KAAK,EAAE,IADF;AAELI,QAAAA,OAAO,EAAE;AAFJ,OAbC;AAiBPE,MAAAA,GAAG,EAAE;AACJC,QAAAA,OAAO,EAAE;AACRC,UAAAA,KAAK,EAAE,IADC;AAERC,UAAAA,QAAQ,EAAE;AAFF,SADL;AAKJC,QAAAA,IAAI,EAAE;AACLF,UAAAA,KAAK,EAAE,IADF;AAELC,UAAAA,QAAQ,EAAE;AAFL,SALF;AASJgB,QAAAA,aAAa,EAAE;AACdhB,UAAAA,QAAQ,EAAE;AADI;AATX;AAjBE;AAxBa,GArsBY;AA8vBlCgC,EAAAA,sBAAsB,EAAE;AACvB5C,IAAAA,GAAG,EAAE,IADkB;AAEvBC,IAAAA,cAAc,EAAE,IAFO;AAGvBC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHe;AAMvBM,IAAAA,GAAG,EAAE;AACJT,MAAAA,GAAG,EAAE,IADD;AAEJC,MAAAA,cAAc,EAAE,IAFZ;AAGJS,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OAHL;AAOJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL,OAPF;AAWJgB,MAAAA,aAAa,EAAE;AACdhB,QAAAA,QAAQ,EAAE;AADI;AAXX;AANkB,GA9vBU;AAoxBlC8B,EAAAA,cAAc,EAAE;AACf1C,IAAAA,GAAG,EAAE,IADU;AAEfyB,IAAAA,SAAS,EAAE,IAFI;AAGfxB,IAAAA,cAAc,EAAE,IAHD;AAIfC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAJO;AAOfC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE,IAFL;AAGNoB,MAAAA,SAAS,EAAE;AAHL,KAPQ;AAYfhB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJgB,MAAAA,aAAa,EAAE;AACdhB,QAAAA,QAAQ,EAAE;AADI;AALX;AAZU,GApxBkB;AA0yBlC+I,EAAAA,oBAAoB,EAAE;AACrB3J,IAAAA,GAAG,EAAE,IADgB;AAErByB,IAAAA,SAAS,EAAE,IAFU;AAGrBxB,IAAAA,cAAc,EAAE,IAHK;AAIrBC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAJa;AAOrBC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE,IAFL;AAGNoB,MAAAA,SAAS,EAAE;AAHL,KAPc;AAYrBhB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJgB,MAAAA,aAAa,EAAE;AACdhB,QAAAA,QAAQ,EAAE;AADI;AALX;AAZgB,GA1yBY;AAg0BlCiC,EAAAA,mBAAmB,EAAE;AACpB7C,IAAAA,GAAG,EAAE,IADe;AAEpBC,IAAAA,cAAc,EAAE,IAFI;AAGpBC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHY;AAMpBC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KANa;AAUpBI,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERN,QAAAA,SAAS,EAAE,IAFH;AAGRO,QAAAA,QAAQ,EAAE;AAHF;AADL;AAVe,GAh0Ba;AAm1BlCgJ,EAAAA,wCAAwC,EAAE,0CAn1BR;AAo1BlCC,EAAAA,0CAA0C,EAAE,4CAp1BV;AAq1BlCC,EAAAA,4BAA4B,EAAE,8BAr1BI;AAs1BlCC,EAAAA,4BAA4B,EAAE,8BAt1BI;AAu1BlCC,EAAAA,qCAAqC,EAAE,uCAv1BL;AAw1BlCC,EAAAA,kCAAkC,EAAE,oCAx1BF;AA01BlCC,EAAAA,wBAAwB,EAAE,0BA11BQ;AA21BlCC,EAAAA,4CAA4C,EAAE,8CA31BZ;AA41BlCC,EAAAA,iDAAiD,EAAE,mDA51BjB;AA61BlCC,EAAAA,uDAAuD,EAAE,yDA71BvB;AA81BlCC,EAAAA,kDAAkD,EAAE,oDA91BlB;AA+1BlCC,EAAAA,wDAAwD,EAAE,0DA/1BxB;AAg2BlCC,EAAAA,2CAA2C,EAAE,6CAh2BX;AAi2BlCC,EAAAA,+CAA+C,EAAE,iDAj2Bf;AAm2BlCC,EAAAA,MAAM,EAAE;AACP1K,IAAAA,GAAG,EAAE,IADE;AAEPC,IAAAA,cAAc,EAAE,IAFT;AAGPC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHD;AAMPC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KANA;AAUPI,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERN,QAAAA,SAAS,EAAE,IAFH;AAGRO,QAAAA,QAAQ,EAAE;AAHF,OADL;AAMJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AANF;AAVE,GAn2B0B;AA03BlC+J,EAAAA,aAAa,EAAE,eA13BmB;AA23BlCC,EAAAA,gBAAgB,EAAE,kBA33BgB;AA83BlCC,EAAAA,IAAI,EAAE;AACL7K,IAAAA,GAAG,EAAE,IADA;AAELC,IAAAA,cAAc,EAAE,IAFX;AAGLkB,IAAAA,MAAM,EAAE,IAHH;AAILC,IAAAA,YAAY,EAAE,IAJT;AAKLC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALH;AAULtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVH;AAaLC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbF;AAkBLC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBD;AAsBLE,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAtBA,GA93B4B;AAg6BlCkK,EAAAA,MAAM,EAAE;AACP9K,IAAAA,GAAG,EAAE,IADE;AAEPC,IAAAA,cAAc,EAAE,IAFT;AAGPC,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAHD;AAMPC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KANA;AAUPC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAVC;AAcPC,IAAAA,cAAc,EAAE,IAdT;AAePmB,IAAAA,eAAe,EAAE,IAfV;AAgBPlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAhBE,GAh6B0B;AA47BlCmK,EAAAA,KAAK,EAAE;AACN/K,IAAAA,GAAG,EAAE,IADC;AAENC,IAAAA,cAAc,EAAE,IAFV;AAGN+K,IAAAA,MAAM,EAAE;AACPhL,MAAAA,GAAG,EAAE,IADE;AAEPC,MAAAA,cAAc,EAAE,IAFT;AAGPG,MAAAA,KAAK,EAAE;AACNJ,QAAAA,GAAG,EAAE,IADC;AAENK,QAAAA,SAAS,EAAE;AAFL,OAHA;AAOPI,MAAAA,GAAG,EAAE;AACJC,QAAAA,OAAO,EAAE;AACRC,UAAAA,KAAK,EAAE,IADC;AAERC,UAAAA,QAAQ,EAAE;AAFF,SADL;AAKJC,QAAAA,IAAI,EAAE;AACLF,UAAAA,KAAK,EAAE,IADF;AAELC,UAAAA,QAAQ,EAAE;AAFL;AALF;AAPE,KAHF;AAqBNJ,IAAAA,cAAc,EAAE,IArBV;AAsBNyK,IAAAA,OAAO,EAAE;AACR1K,MAAAA,OAAO,EAAE;AADD,KAtBH;AAyBN2K,IAAAA,KAAK,EAAE;AACN3K,MAAAA,OAAO,EAAE;AADH,KAzBD;AA4BNH,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KA5BD;AAgCNI,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAhCC,GA57B2B;AAw+BlC;AACAuK,EAAAA,WAAW,EAAE;AACZnL,IAAAA,GAAG,EAAE,IADO;AAEZC,IAAAA,cAAc,EAAE;AAFJ,GAz+BqB;AA8+BlCmL,EAAAA,SAAS,EAAE,WA9+BuB;AA++BlCC,EAAAA,kBAAkB,EAAE,oBA/+Bc;AAg/BlCC,EAAAA,wBAAwB,EAAE,0BAh/BQ;AAi/BlCC,EAAAA,0BAA0B,EAAE,4BAj/BM;AAk/BlCC,EAAAA,gCAAgC,EAAE,kCAl/BA;AAm/BlCC,EAAAA,mBAAmB,EAAE,qBAn/Ba;AAo/BlCC,EAAAA,yBAAyB,EAAE,2BAp/BO;AAq/BlCC,EAAAA,oBAAoB,EAAE,sBAr/BY;AAs/BlCC,EAAAA,0BAA0B,EAAE,4BAt/BM;AAu/BlCC,EAAAA,YAAY,EAAE,cAv/BoB;AAy/BlCC,EAAAA,WAAW,EAAE;AACZ9L,IAAAA,GAAG,EAAE,IADO;AAEZC,IAAAA,cAAc,EAAE,IAFJ;AAGZkB,IAAAA,MAAM,EAAE,IAHI;AAIZC,IAAAA,YAAY,EAAE,IAJF;AAKZC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALI;AAUZtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVI;AAaZC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbK;AAkBZC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBM;AAsBZE,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAtBO,GAz/BqB;AA2hClCmL,EAAAA,KAAK,EAAE;AACN/L,IAAAA,GAAG,EAAE,IADC;AAENC,IAAAA,cAAc,EAAE,IAFV;AAGNkB,IAAAA,MAAM,EAAE,IAHF;AAINC,IAAAA,YAAY,EAAE,IAJR;AAKNC,IAAAA,MAAM,EAAE;AACPC,MAAAA,MAAM,EAAE,IADD;AAEPC,MAAAA,eAAe,EAAE,IAFV;AAGPC,MAAAA,MAAM,EAAE;AAHD,KALF;AAUNtB,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE;AADA,KAVF;AAaNC,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAEN0B,MAAAA,WAAW,EAAE,IAFP;AAGNrB,MAAAA,SAAS,EAAE;AAHL,KAbD;AAkBNC,IAAAA,IAAI,EAAE;AACLH,MAAAA,KAAK,EAAE,IADF;AAELI,MAAAA,OAAO,EAAE;AAFJ,KAlBA;AAsBNC,IAAAA,cAAc,EAAE,IAtBV;AAuBNmB,IAAAA,eAAe,EAAE,IAvBX;AAwBNlB,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AAxBC,GA3hC2B;AA+jClCoL,EAAAA,cAAc,EAAE;AACfhM,IAAAA,GAAG,EAAE,IADU;AAEfC,IAAAA,cAAc,EAAE,IAFD;AAGfG,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KAHQ;AAOfG,IAAAA,cAAc,EAAE,IAPD;AAQfC,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AARU,GA/jCkB;AAmlClCqL,EAAAA,UAAU,EAAE;AACXjM,IAAAA,GAAG,EAAE,IADM;AAEXC,IAAAA,cAAc,EAAE,IAFL;AAGXG,IAAAA,KAAK,EAAE;AACNJ,MAAAA,GAAG,EAAE,IADC;AAENK,MAAAA,SAAS,EAAE;AAFL,KAHI;AAOXG,IAAAA,cAAc,EAAE,IAPL;AAQXC,IAAAA,GAAG,EAAE;AACJC,MAAAA,OAAO,EAAE;AACRC,QAAAA,KAAK,EAAE,IADC;AAERC,QAAAA,QAAQ,EAAE;AAFF,OADL;AAKJC,MAAAA,IAAI,EAAE;AACLF,QAAAA,KAAK,EAAE,IADF;AAELC,QAAAA,QAAQ,EAAE;AAFL;AALF;AARM,GAnlCsB;AAumClCsL,EAAAA,OAAO,EAAE;AACRlM,IAAAA,GAAG,EAAE,IADG;AAERiJ,IAAAA,IAAI,EAAE,IAFE;AAGR3H,IAAAA,MAAM,EAAE,IAHA;AAIR8H,IAAAA,IAAI,EAAE;AACLpJ,MAAAA,GAAG,EAAE,IADA;AAELsB,MAAAA,MAAM,EAAE;AAFH,KAJE;AAQR6K,IAAAA,GAAG,EAAE,IARG;AASR3K,IAAAA,MAAM,EAAE;AATA,GAvmCyB;AAmnClC4K,EAAAA,cAAc,EAAE,gBAnnCkB;AAonClCC,EAAAA,qBAAqB,EAAE,uBApnCW;AAqnClCC,EAAAA,+BAA+B,EAAE,iCArnCC;AAsnClCC,EAAAA,iCAAiC,EAAE,mCAtnCD;AAunClCC,EAAAA,kCAAkC,EAAE,oCAvnCF;AAwnClCC,EAAAA,wCAAwC,EAAE,0CAxnCR;AAynClCC,EAAAA,sCAAsC,EAAE,wCAznCN;AA0nClCC,EAAAA,qBAAqB,EAAE,uBA1nCW;AA2nClCC,EAAAA,4BAA4B,EAAE,8BA3nCI;AA4nClCC,EAAAA,0BAA0B,EAAE,4BA5nCM;AA6nClCC,EAAAA,iCAAiC,EAAE,mCA7nCD;AA8nClCC,EAAAA,0BAA0B,EAAE,4BA9nCM;AA+nClCC,EAAAA,kCAAkC,EAAE,oCA/nCF;AAioClCC,EAAAA,mBAAmB,EAAE,qBAjoCa;AAkoClCC,EAAAA,qBAAqB,EAAE,uBAloCW;AAmoClCC,EAAAA,0BAA0B,EAAE,4BAnoCM;AAooClCC,EAAAA,oCAAoC,EAAE;AApoCJ,CAApB,CAAf;;ACGA,IAAMC,GAAG,GAAG,CAAZ;AAEA;AACA;AACA;AACA;AACA;;AACA,IAAIC,KAAK,GAAGC,yBAAZ;AAEA;AACA;AACA;;AACO,SAASC,QAAT,CAAkBD,MAAlB,EAA0B;AAChCD,EAAAA,KAAK,GAAGC,MAAR;AACA;AAED;AACA;AACA;;AACO,SAASE,UAAT,GAAsB;AAC5BH,EAAAA,KAAK,GAAGC,yBAAR;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACe,SAASG,OAAT,CAAkBzlB,WAAlB,EAA+B0lB,OAA/B,EAAwCC,MAAxC,EAAgDC,KAAhD,EAAuDC,OAAvD,EAAgEC,GAAhE,EAAqE;AACnF,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,GAAN;AACxB,MAAIp3B,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkER,OAAlE,CAAnD;;AACA,MAAIE,KAAJ,EAAW;AACV53B,IAAAA,GAAG,IAAI,MAAMm4B,+BAAW,CAACznC,SAAZ,CAAsBknC,KAAtB,CAAb;AACA;;AAED,SAAOP,KAAK,CAACr3B,GAAD,EAAM;AACjB23B,IAAAA,MAAM,EAAEA,MADS;AAEjBS,IAAAA,WAAW,EAAE,SAFI;AAGjBC,IAAAA,OAAO,EAAE;AACR,sBAAgB,kBADR;AAER,gBAAU;AAFF,KAHQ;AAOjBC,IAAAA,IAAI,EAAET,OAAO,GAAGpnC,IAAI,CAACC,SAAL,CAAemnC,OAAf,CAAH,GAA6B;AAPzB,GAAN,CAAL,CAQJU,IARI,CASN,UAAAC,QAAQ,EAAI;AACX,QAAIC,WAAW,GAAGD,QAAQ,CAACH,OAAT,CAAiBtiB,GAAjB,CAAqB,cAArB,CAAlB;;AACA,QAAIyiB,QAAQ,CAACE,EAAT,IAAeD,WAAf,IAA+BA,WAAW,CAACE,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAAhF,EAAoF;AACnF,aAAOH,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAAD,IAAI,EAAI;AACnC,YAAIA,IAAI,CAAC3lC,IAAT,EAAe;AACd,iBAAO2lC,IAAP;AACA,SAFD,MAEO;AACN,gBAAM,IAAIO,KAAJ,CAAU,kBAAV,CAAN;AACA;AACD,OANM,CAAP;AAOA,KARD,MAQO;AACN,YAAM,IAAIA,KAAJ,CAAU,gBAAV,CAAN;AACA;AACD,GAtBK,EAuBN,UAAAC,KAAK,EAAI;AACR,QAAIhB,GAAG,GAAG,CAAV,EAAa;AACZL,MAAAA,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuBC,MAAvB,EAA+BC,KAA/B,EAAsCC,OAAtC,EAA+CC,GAAG,GAAG,CAArD,CAAP;AACA,KAFD,MAEO;AACN,YAAMgB,KAAN;AACA;AACD,GA7BK,CAAP;AA+BA;;AC9DD,IAAMC,qBAAqB,GAAG,UAA9B;;AAsBA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWC,YAAX,EAAyBvmC,IAAzB,EAAkC;AACnD,SAAO,UAACwmC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAM1B,OAAO,GAAG,kBAAkBwB,YAAlC;AACA,QAAMrB,OAAO,GAAG;AACfllC,MAAAA,IAAI,sBACFsmC,QADE,EACStmC,IADT;AADW,KAAhB;AAKA,WAAO8kC,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,QAAvB,EAAiC,IAAjC,EAAuCG,OAAvC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtFE,QAAAA,QAAQ,CAACK,kBAAkB,CAACF,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,IAAIJ,KAAJ,CAAU,SAAV,CAA5B,CAAnB,CAAR;AACA,OAFD,MAEO;AACN,YAAMY,YAAY,GAAGH,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAArB;;AACA,YAAIQ,YAAY,CAACpoC,MAAb,GAAsB,CAA1B,EAA6B;AAC5B,iBAAOioC,MAAP;AACA,SAFD,MAEO;AACNI,UAAAA,OAAO,CAACC,IAAR,+BAAoCV,QAApC;AACA;AACD;AACD,KAZK,WAaC,UAAAH,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,KAfK,CAAP;AAgBA,GAxBD;AAyBA,CA1BD;;AA4BA,IAAMc,SAAS,GAAG,SAAZA,SAAY,CAACrkC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAAqCX,YAArC,EAAmDY,UAAnD,EAAkE;AACnF,SAAO,UAACX,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAM1B,OAAO,GAAG,kBAAkBwB,YAAlC;AACA,QAAMrB,OAAO,GAAG;AACfllC,MAAAA,IAAI,sBACFsmC,QADE,EACSa,UADT;AADW,KAAhB;AAKA,WAAOrC,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,KAAvB,EAA8B,IAA9B,EAAoCG,OAApC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtFE,QAAAA,QAAQ,CAACK,kBAAkB,CAACF,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,IAAIJ,KAAJ,CAAU,SAAV,CAA5B,CAAnB,CAAR;AACA,OAFD,MAEO;AACNM,QAAAA,QAAQ,CAACY,cAAc,CAACxkC,WAAD,EAAcskC,WAAd,EAA2BP,MAA3B,EAAmCL,QAAnC,EAA6CC,YAA7C,CAAf,CAAR;AACA;AACD,KAPK,WAQC,UAAAJ,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,KAVK,CAAP;AAWA,GAnBD;AAoBA,CArBD;;AAuBA,IAAMkB,YAAY,GAAG,SAAfA,YAAe,CAACzkC,WAAD,EAAcskC,WAAd,EAA8B;AAClD,SAAO,UAAC1jC,QAAD,EAAWnE,GAAX,EAAgBS,KAAhB,EAA0B;AAChC,WAAO,UAAC0mC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,UAAI,CAAC7jC,WAAL,EAAkB;AACjB,eAAO4jC,QAAQ,CAACK,kBAAkB,CAAC,gEAAD,CAAnB,CAAf;AACA;;AACD,UAAI,CAACK,WAAL,EAAkB;AACjB,eAAOV,QAAQ,CAACK,kBAAkB,CAAC,gEAAD,CAAnB,CAAf;AACA;;AACD,UAAI,CAACrjC,QAAL,EAAe;AACd,eAAOgjC,QAAQ,CAACK,kBAAkB,CAAC,oDAAD,CAAnB,CAAf;AACA;;AACD,UAAI,CAACxnC,GAAL,EAAU;AACT,eAAOmnC,QAAQ,CAACK,kBAAkB,CAAC,uDAAD,CAAnB,CAAf;AACA;;AAED,UAAIS,aAAa,GAAGx7B,eAAe,CAAChH,QAAhB,CAAyBlC,WAAzB,EAAsC6jC,QAAQ,EAA9C,EAAkDjjC,QAAlD,CAApB,CAd8B;AAiB9B;;AACA,UAAI8jC,aAAa,KAAKxnC,KAAK,KAAKwnC,aAAa,CAACtnC,IAAd,CAAmBX,GAAnB,CAAV,IAAqCH,6BAAQooC,aAAa,CAACtnC,IAAd,CAAmBX,GAAnB,CAAR,EAAiCS,KAAjC,CAA1C,CAAjB,EAAoG;AACnG0mC,QAAAA,QAAQ,CAACe,8BAA8B,CAACL,WAAD,EAAc1jC,QAAd,EAAwBnE,GAAxB,CAA/B,CAAR;AACA,OAFD,MAEO;AACNmnC,QAAAA,QAAQ,CAACgB,kBAAkB,CAACN,WAAD,EAAc,CAAC;AAAC7nC,UAAAA,GAAG,EAAEmE,QAAN;AAAgBxD,UAAAA,IAAI,sBAAIX,GAAJ,EAAUS,KAAV;AAApB,SAAD,CAAd,CAAnB,CAAR;AACA;AACD,KAvBD;AAwBA,GAzBD;AA0BA,CA3BD;;AA6BA,IAAM2nC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACP,WAAD,EAAiB;AACjD,SAAO,UAAC1jC,QAAD,EAAWnE,GAAX,EAAmB;AACzB,WAAOmnC,QAAQ,CAACe,8BAA8B,CAACL,WAAD,EAAc1jC,QAAd,EAAwBnE,GAAxB,CAA/B,CAAf;AACA,GAFD;AAGA,CAJD;;AAMA,IAAMqoC,UAAU,GAAG,SAAbA,UAAa,CAAC9kC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAA8E;AAAA,MAAzCX,YAAyC,uEAA1BH,qBAA0B;AAChG,SAAO,UAACxmC,IAAD,EAAU;AAChB,WAAO,UAAC4mC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,UAAI,CAAC7mC,IAAL,EAAW;AACV,eAAO4mC,QAAQ,CAACK,kBAAkB,CAAC,uDAAD,CAAnB,CAAf;AACA;;AAED,UAAI,CAACjnC,IAAI,CAACP,GAAV,EAAe;AACd,eAAOmnC,QAAQ,CAACK,kBAAkB,CAAC,2DAAD,CAAnB,CAAf;AACA,OAP6B;AAS9B;;;AACA,aAAOL,QAAQ,CAACH,SAAS,CAACC,QAAD,EAAWC,YAAX,EAAyB,CAAC;AAAClnC,QAAAA,GAAG,EAAEO,IAAI,CAACP;AAAX,OAAD,CAAzB,CAAV,CAAR,CAA+DumC,IAA/D,CAAoE,UAACe,MAAD,EAAY;AACtF,YAAM3mC,IAAI,GAAG2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAb;AACA,YAAMqB,WAAW,GAAG3nC,IAAI,CAACoE,GAAL,CAAS,UAAAwjC,CAAC;AAAA,iBAAIA,CAAC,CAACvoC,GAAN;AAAA,SAAV,CAApB,CAFsF;;AAKtF,YAAGH,6BAAQyoC,WAAR,EAAqB,CAAC/nC,IAAI,CAACP,GAAN,CAArB,CAAH,EAAqC;AACpC;AACA,cAAMwoC,UAAU,GAAGpwB,0BAAM,CAAC,IAAIqwB,IAAJ,GAAWC,WAAX,EAAD,CAAN,CAAiCC,GAAjC,GAAuCC,MAAvC,EAAnB;AACAN,UAAAA,WAAW,CAAC1oC,OAAZ,CAAoB,UAACI,GAAD,EAAS;AAC5BmnC,YAAAA,QAAQ,CAAC0B,mBAAmB,CAAChB,WAAD,EAAc7nC,GAAd,EAAmBwoC,UAAnB,CAApB,CAAR;AACA,WAFD,EAHoC;;AAQpCrB,UAAAA,QAAQ,CAAC2B,uCAAuC,CAAC7B,QAAD,EAAWqB,WAAX,CAAxC,CAAR,CARoC;AAWpC;;AACA,cAAM/oC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,cAAMjpC,OAAO,GAAGsO,eAAe,CAAC3E,wBAAhB,CAAyCvE,WAAzC,EAAsDhE,KAAtD,EAA6DgB,IAA7D,KAAsE,EAAtF;;AACA,cAAG,CAAC3B,6BAAUT,OAAV,CAAJ,EAAwB;AACvBA,YAAAA,OAAO,CAACyB,OAAR,CAAgB,UAAAtB,KAAK,EAAI;AACxB,kBAAGA,KAAH,EAAU;AACT;AACA6oC,gBAAAA,QAAQ,CAAC4B,gBAAgB,CAAClB,WAAD,EAAcvpC,KAAK,CAACF,MAApB,EAA4BE,KAAK,CAACD,KAAlC,CAAjB,CAAR,CAFS;;AAIT8oC,gBAAAA,QAAQ,CAAC6B,cAAY,CAACzlC,WAAD,EAAc0jC,QAAd,EAAwB3oC,KAAK,CAACF,MAA9B,EAAsCE,KAAK,CAACD,KAA5C,EAAmDwpC,WAAnD,EAAgEX,YAAhE,CAAb,CAAR;AACA;AACD,aAPD;AAQA;AACD,SAxBD,MAwBO;AACN;AACA,iBAAOC,QAAQ,CAACK,kBAAkB,CAAC,uEAAD,CAAnB,CAAf;AACA;AACD,OAjCM,CAAP;AAkCA,KA5CD;AA6CA,GA9CD;AA+CA,CAhDD;;AAkDA,IAAMyB,UAAU,GAAG,SAAbA,UAAa,CAAC1lC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAA8E;AAAA,MAAzCX,YAAyC,uEAA1BH,qBAA0B;AAChG,SAAO,UAAC/mC,GAAD,EAAS;AACf,WAAO,UAACmnC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,UAAI,CAAC7jC,WAAL,EAAkB;AACjB,eAAO4jC,QAAQ,CAACK,kBAAkB,CAAC,8DAAD,CAAnB,CAAf;AACA;;AACD,UAAI,CAACP,QAAL,EAAe;AACd,eAAOE,QAAQ,CAACK,kBAAkB,CAAC,2DAAD,CAAnB,CAAf;AACA;;AACD,UAAI,CAACK,WAAL,EAAkB;AACjB,eAAOV,QAAQ,CAACK,kBAAkB,CAAC,8DAAD,CAAnB,CAAf;AACA;;AACD,UAAI,CAACxnC,GAAL,EAAU;AACT,eAAOmnC,QAAQ,CAACK,kBAAkB,CAAC,kDAAD,CAAnB,CAAf;AACA;;AACD,UAAIjoC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,UAAI8B,KAAK,GAAGz8B,eAAe,CAAChH,QAAhB,CAAyBlC,WAAzB,EAAsChE,KAAtC,EAA6CS,GAA7C,CAAZ;AACA,UAAI8G,MAAM,GAAG2F,eAAe,CAAC/F,cAAhB,CAA+BnD,WAA/B,EAA4ChE,KAA5C,EAAmDS,GAAnD,CAAb;;AAEA,UAAIkpC,KAAJ,EAAW;AACV;AACA,eAAO/B,QAAQ,CAACS,SAAS,CAACrkC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAAqCX,YAArC,EAAmD,CAACpgC,MAAD,CAAnD,CAAV,CAAf;AACA,OAHD,MAGO;AACN;AACA;AACA;AACD,KAxBD;AAyBA,GA1BD;AA2BA,CA5BD;;AA8BA,IAAMqiC,OAAO,GAAG,SAAVA,OAAU,CAAC5lC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAA8E;AAAA,MAAzCX,YAAyC,uEAA1BH,qBAA0B;AAC7F,SAAO,UAACnhC,IAAD,EAAOwjC,WAAP,EAAuB;AAC7B,WAAO,UAAAjC,QAAQ,EAAI;AAClBA,MAAAA,QAAQ,CAACkC,qBAAqB,CAACxB,WAAD,EAAcuB,WAAd,EAA2BxjC,IAA3B,CAAtB,CAAR;AACA,aAAOuhC,QAAQ,CAACmC,UAAU,CAAC/lC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAAqCjiC,IAArC,EAA2CshC,YAA3C,CAAX,CAAf;AACA,KAHD;AAIA,GALD;AAMA,CAPD;;AASA,IAAMqC,UAAU,GAAG,SAAbA,UAAa,CAAChmC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAA8E;AAAA,MAAzCX,YAAyC,uEAA1BH,qBAA0B;AAChG,SAAO,UAAC7lC,cAAD,EAAiB9C,MAAjB,EAAyBC,KAAzB,EAAgC+G,KAAhC,EAAuC/F,MAAvC,EAA+C+pC,WAA/C,EAA+D;AACrE,WAAO,UAACjC,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,MAAAA,QAAQ,CAACqC,wBAAwB,CAAC3B,WAAD,EAAcuB,WAAd,EAA2BloC,cAA3B,EAA2C9C,MAA3C,EAAmDC,KAAnD,EAA0D+G,KAA1D,EAAiE/F,MAAjE,CAAzB,CAAR;AACA,UAAIE,KAAK,GAAG6nC,QAAQ,EAApB;AACA,UAAIjmC,UAAU,GAAGsD,aAAa,CAACzD,YAAd,CAA2B;AAC3CK,QAAAA,oBAAoB,EAAE9B,KAAK,CAACyJ,GAAN,CAAUhJ,GADW;AAE3CqC,QAAAA,kBAAkB,EAAEoK,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAACoJ,UAAV;AAAA,SAAlC,EAAwDpJ,KAAxD,CAFuB;AAG3CmC,QAAAA,cAAc,EAAE+K,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAAC6D,MAAV;AAAA,SAAlC,EAAoD7D,KAApD,CAH2B;AAI3C0C,QAAAA,eAAe,EAAEwK,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAACmJ,OAAV;AAAA,SAAlC,EAAqDnJ,KAArD,CAJ0B;AAK3C4C,QAAAA,gBAAgB,EAAEsK,eAAe,CAAC9H,aAAhB,CAA8B,UAAApF,KAAK;AAAA,iBAAIA,KAAK,CAACmJ,OAAV;AAAA,SAAnC,EAAsDnJ,KAAtD,CALyB;AAM3CsC,QAAAA,cAAc,EAAE4K,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAACkJ,MAAV;AAAA,SAAlC,EAAoDlJ,KAApD,CAN2B;AAO3CwC,QAAAA,eAAe,EAAE0K,eAAe,CAAC9H,aAAhB,CAA8B,UAAApF,KAAK;AAAA,iBAAIA,KAAK,CAACkJ,MAAV;AAAA,SAAnC,EAAqDlJ,KAArD;AAP0B,OAA3B,EAQd2B,cARc,EAQE9C,MARF,CAAjB;AASA,aAAO+oC,QAAQ,CAACsC,aAAa,CAAClmC,WAAD,EAAc0jC,QAAd,EAAwB9lC,UAAxB,EAAoC9C,KAApC,EAA2C+G,KAA3C,EAAkD/F,MAAlD,EAA0DwoC,WAA1D,EAAuEX,YAAvE,CAAd,CAAf;AACA,KAbD;AAcA,GAfD;AAgBA,CAjBD;;AAmBA,IAAMwC,eAAe,GAAG,SAAlBA,eAAkB,CAACzC,QAAD,EAAWY,WAAX,EAAiE;AAAA,MAAzCX,YAAyC,uEAA1BH,qBAA0B;AACxF,SAAO,UAAC7lC,cAAD,EAAiB9C,MAAjB,EAAyBC,KAAzB,EAAgC+qC,WAAhC,EAA6CppC,GAA7C,EAAkD2pC,gBAAlD,EAAuE;AAC7E,WAAO,UAACxC,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,MAAAA,QAAQ,CAACyC,6BAA6B,CAAC/B,WAAD,EAAcuB,WAAd,EAA2BloC,cAA3B,EAA2C9C,MAA3C,EAAmDC,KAAnD,CAA9B,CAAR;AACA,UAAIkB,KAAK,GAAG6nC,QAAQ,EAApB;AACA,UAAIjmC,UAAU,GAAGsD,aAAa,CAACzD,YAAd,CAA2B;AAC3CK,QAAAA,oBAAoB,EAAE9B,KAAK,CAACyJ,GAAN,CAAUhJ,GADW;AAE3C0B,QAAAA,cAAc,EAAE+K,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAAC6D,MAAV;AAAA,SAAlC,EAAoD7D,KAApD,CAF2B;AAG3C0C,QAAAA,eAAe,EAAEwK,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAACmJ,OAAV;AAAA,SAAlC,EAAqDnJ,KAArD,CAH0B;AAI3C4C,QAAAA,gBAAgB,EAAEsK,eAAe,CAAC9H,aAAhB,CAA8B,UAAApF,KAAK;AAAA,iBAAIA,KAAK,CAACmJ,OAAV;AAAA,SAAnC,EAAsDnJ,KAAtD,CAJyB;AAK3CsC,QAAAA,cAAc,EAAE4K,eAAe,CAAC/H,YAAhB,CAA6B,UAAAnF,KAAK;AAAA,iBAAIA,KAAK,CAACkJ,MAAV;AAAA,SAAlC,EAAoDlJ,KAApD,CAL2B;AAM3CwC,QAAAA,eAAe,EAAE0K,eAAe,CAAC9H,aAAhB,CAA8B,UAAApF,KAAK;AAAA,iBAAIA,KAAK,CAACkJ,MAAV;AAAA,SAAnC,EAAqDlJ,KAArD;AAN0B,OAA3B,EAOd2B,cAPc,EAOE9C,MAPF,CAAjB;AAQA,aAAO+oC,QAAQ,CAAC0C,kBAAkB,CAAC5C,QAAD,EAAW9lC,UAAX,EAAuB9C,KAAvB,EAA8BwpC,WAA9B,EAA2CX,YAA3C,EAAyDlnC,GAAzD,EAA8D2pC,gBAA9D,CAAnB,CAAf;AACA,KAZD;AAaA,GAdD;AAeA,CAhBD;;AAkBA,IAAMG,iCAAiC,GAAG,SAApCA,iCAAoC,CAACjC,WAAD,EAAckC,SAAd,EAA4B;AACrE,SAAO,UAAA/pC,GAAG,EAAI;AACb,WAAO,UAAAmnC,QAAQ,EAAI;AAClBA,MAAAA,QAAQ,CAAC6C,kBAAkB,CAACnC,WAAD,EAAc7nC,GAAd,CAAnB,CAAR;AACAmnC,MAAAA,QAAQ,CAAC8C,0BAA0B,CAACF,SAAD,CAA3B,CAAR;AACA,KAHD;AAIA,GALD;AAMA,CAPD;;AASA,IAAMG,kCAAkC,GAAG,SAArCA,kCAAqC,CAACrC,WAAD,EAAckC,SAAd,EAA4B;AACtE,SAAO,UAAAnkC,IAAI,EAAI;AACd,WAAO,UAAAuhC,QAAQ,EAAI;AAClBA,MAAAA,QAAQ,CAACgD,mBAAmB,CAACtC,WAAD,EAAcjiC,IAAd,CAApB,CAAR;AACAuhC,MAAAA,QAAQ,CAAC8C,0BAA0B,CAACF,SAAD,CAA3B,CAAR;AACA,KAHD;AAIA,GALD;AAMA,CAPD;AAQA;AACA;AACA;;;AACA,SAASf,cAAT,CAAsBzlC,WAAtB,EAAmC0jC,QAAnC,EAA6C7oC,MAA7C,EAAqDC,KAArD,EAA4DwpC,WAA5D,EAA+G;AAAA,MAAtCX,YAAsC,uEAAvBH,qBAAuB;AAC9G,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAIgD,YAAY,GAAG39B,eAAe,CAACnC,eAAhB,CAAgC/G,WAAhC,EAA6ChE,KAA7C,EAAoDnB,MAApD,EAA4DC,KAA5D,CAAnB;;AACA,QAAI+rC,YAAJ,EAAiB;AAChB,gCAAOA,YAAY,CAAChgC,IAApB,EAA0B,UAACD,GAAD,EAAS;AAClCg9B,QAAAA,QAAQ,CAACsC,aAAa,CAAClmC,WAAD,EAAc0jC,QAAd,EAAwBmD,YAAY,CAAChsC,MAArC,EAA6CgsC,YAAY,CAAC/rC,KAA1D,EAAiE8L,GAAG,CAAC/E,KAArE,EAA4E+E,GAAG,CAAC9K,MAAhF,EAAwFwoC,WAAxF,EAAqGX,YAArG,CAAd,CAAR;AACA,OAFD;AAGA;AACD,GARD;AASA;;AAED,SAASmD,cAAT,CAAwBxC,WAAxB,EAAqCP,MAArC,EAA6CL,QAA7C,EAAuD7oC,MAAvD,EAA+DC,KAA/D,EAAsE+G,KAAtE,EAA6E;AAC3E,SAAO,UAAA+hC,QAAQ,EAAI;AAClB;AACA,QAAIG,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,EAAsB5nC,MAA1B,EAAiC;AAChC8nC,MAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,EAAcP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAd,EAAqC7oC,MAArC,CAAV,CAAR;AACA,KAJiB;;;AAOlB+oC,IAAAA,QAAQ,CAACoD,cAAc,CAAC1C,WAAD,EAAczpC,MAAd,EAAsBC,KAAtB,EAA6BipC,MAAM,CAACkD,KAApC,EAA2CplC,KAA3C,EAAkDkiC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAlD,EAAyEK,MAAM,CAACmD,OAAP,IAAkBnD,MAAM,CAACmD,OAAP,CAAexD,QAAf,CAA3F,CAAf,CAAR;AACA,GARD;AASD;;AAED,SAASyD,mBAAT,CAA6B7C,WAA7B,EAA0CP,MAA1C,EAAkDL,QAAlD,EAA4D7oC,MAA5D,EAAoEC,KAApE,EAA2E2B,GAA3E,EAAgF;AAC9E,SAAO,UAAAmnC,QAAQ,EAAI;AAClB;AACA,QAAIG,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,EAAsB5nC,MAA1B,EAAiC;AAChC8nC,MAAAA,QAAQ,CAACwD,cAAc,CAAC9C,WAAD,EAAcP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAd,EAAqCjnC,GAArC,CAAf,CAAR;AACA,KAJiB;;;AAOlBmnC,IAAAA,QAAQ,CAACyD,mBAAmB,CAAC/C,WAAD,EAAczpC,MAAd,EAAsBC,KAAtB,EAA6BipC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAA7B,EAAoDjnC,GAApD,CAApB,CAAR;AACA,GARD;AASD;;AAED,SAAS6qC,cAAT,CAAwBnF,OAAxB,EAAiCC,MAAjC,EAAyCC,KAAzC,EAAgDC,OAAhD,EAAyDiF,aAAzD,EAAwEC,WAAxE,EAAqF;AACpF,SAAO,UAAC5D,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AAEA3B,IAAAA,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuBC,MAAvB,EAA+BC,KAA/B,EAAsCC,OAAtC,CAAP,CACEU,IADF,CACO,UAAAe,MAAM,EAAI;AACfH,MAAAA,QAAQ,CAAC2D,aAAa,CAACxD,MAAM,CAAC3mC,IAAR,CAAd,CAAR;AACA,KAHF,WAIQ,UAAAmmC,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAAC4D,WAAW,CAACjE,KAAD,CAAZ,CAAR;AACA,KANF;AAOA,GAVD;AAWA;;AAED,SAAS5W,MAAT,CAAgB3sB,WAAhB,EAA6B0jC,QAA7B,EAAuCY,WAAvC,EAA0F;AAAA,MAAtCX,YAAsC,uEAAvBH,qBAAuB;AACzF,SAAO,UAAC/mC,GAAD,EAAMsJ,MAAN,EAAiB;AACvB,WAAO,UAAC69B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,UAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,UAAM1B,OAAO,GAAG3uB,wBAAI,CAACtG,IAAL,CAAU,cAAV,EAA0By2B,YAA1B,CAAhB;AACA,UAAMlnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;AAEA,UAAI+B,cAAc,GAAG,IAArB;;AACA,UAAIgI,MAAJ,EAAY;AACXhI,QAAAA,cAAc,GAAGgI,MAAjB;AACA,OAFD,MAEO;AACN,YAAI0hC,aAAa,GAAG3D,MAAM,CAACr+B,GAAP,CAAW0N,MAAX,CAAkBnX,KAAlB,CAApB;;AACA,YAAIyrC,aAAJ,EAAmB;AAClB1pC,UAAAA,cAAc,GAAG0pC,aAAjB;AACA;AACD;;AAED,UAAMnF,OAAO,GAAGoF,gBAAgB,CAAChE,QAAD,EAAWjnC,GAAX,EAAgBsB,cAAhB,CAAhC;AACA,aAAOmkC,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CAAqDU,IAArD,CAA0D,UAAAe,MAAM,EAAI;AAC1E,YAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtFE,UAAAA,QAAQ,CAACK,kBAAkB,CAACF,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,IAAIJ,KAAJ,CAAU,SAAV,CAA5B,CAAnB,CAAR;AACA,SAFD,MAEO;AACN,cAAMqE,KAAK,GAAG5D,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAd;AACAE,UAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,EAAcqD,KAAd,CAAV,CAAR;AAEA,cAAI/sC,OAAO,GAAG,EAAd;AACA+sC,UAAAA,KAAK,CAACtrC,OAAN,CAAc,UAAAW,IAAI,EAAI;AACrBpC,YAAAA,OAAO,GAAGA,OAAO,CAACgtC,MAAR,CAAe1+B,eAAe,CAAC3E,wBAAhB,CAAyCvE,WAAzC,EAAsD6jC,QAAQ,EAA9D,EAAkE7mC,IAAlE,CAAf,KAA2F,EAArG;AACA,WAFD;AAIA,cAAIzB,aAAa,GAAG2F,aAAa,CAAC9F,gBAAd,CAA+BR,OAA/B,CAApB;;AACA,cAAG,CAACS,6BAAUE,aAAV,CAAJ,EAA8B;AAC7BA,YAAAA,aAAa,CAACc,OAAd,CAAsB,UAAAtB,KAAK,EAAI;AAC9B,kBAAGA,KAAH,EAAU;AACT;AACA6oC,gBAAAA,QAAQ,CAAC4B,gBAAgB,CAAClB,WAAD,EAAcvpC,KAAK,CAACF,MAApB,EAA4BE,KAAK,CAACD,KAAlC,CAAjB,CAAR,CAFS;;AAIT8oC,gBAAAA,QAAQ,CAAC6B,cAAY,CAACzlC,WAAD,EAAc0jC,QAAd,EAAwB3oC,KAAK,CAACF,MAA9B,EAAsCE,KAAK,CAACD,KAA5C,EAAmDwpC,WAAnD,EAAgEX,YAAhE,CAAb,CAAR;AACA;AACD,aAPD;AAQA;AACD;AACD,OAxBM,WAyBA,UAAAJ,KAAK,EAAI;AACfK,QAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,OA3BM,CAAP;AA4BA,KA5CD;AA6CA,GA9CD;AA+CA;;AAED,SAASsE,OAAT,CAAiBnE,QAAjB,EAA2BY,WAA3B,EAA8E;AAAA,MAAtCX,YAAsC,uEAAvBH,qBAAuB;AAC7E,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAMiE,SAAS,GAAGrrB,WAAW,CAACsrB,eAAZ,IAA+BC,sBAAc,CAACD,eAAhE;AACA,QAAM5F,OAAO,GAAG8F,UAAU,CAACtE,YAAD,EAAeD,QAAf,CAA1B;AACA,QAAIpB,OAAO,GAAG;AACb4F,MAAAA,KAAK,EAAEJ;AADM,KAAd;AAGA,WAAO5F,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtFE,QAAAA,QAAQ,CAACK,kBAAkB,CAACF,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,IAAIJ,KAAJ,CAAU,SAAV,CAA5B,CAAnB,CAAR;AACA,OAFD,MAEO;AACN,YAAIS,MAAM,CAACkD,KAAP,IAAgBa,SAApB,EAA+B;AAC9B;AACAlE,UAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,EAAcP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAd,CAAV,CAAR;AACA,SAHD,MAGO;AACN;AACA,cAAIyE,QAAQ,GAAG,EAAf;AACA,cAAIC,kBAAkB,GAAGpmC,IAAI,CAACqmC,IAAL,CAAU,CAACtE,MAAM,CAACkD,KAAP,GAAea,SAAhB,IAA6BA,SAAvC,CAAzB;;AACA,eAAK,IAAItsC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4sC,kBAApB,EAAwC5sC,CAAC,EAAzC,EAA6C;AAC5C,gBAAI8sC,WAAW,GAAG;AACjBC,cAAAA,MAAM,EAAE,CAAC/sC,CAAC,GAAG,CAAL,IAAUssC,SADD;AAEjBI,cAAAA,KAAK,EAAEJ;AAFU,aAAlB;AAIAK,YAAAA,QAAQ,CAAC5rC,IAAT,CAAc2lC,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCmG,WAArC,CAArB,EAL4C;AAM5C;;AACDE,UAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ,EAAsBnF,IAAtB,CAA2B,UAAA0F,OAAO,EAAI;AACrC,gBAAIC,aAAa,GAAG7jC,6BAAU4jC,OAAO,CAAClnC,GAAR,CAAY,UAAAonC,GAAG;AAAA,qBAAIA,GAAG,CAACxrC,IAAJ,CAASsmC,QAAT,CAAJ;AAAA,aAAf,CAAV,CAApB;;AACAE,YAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,+BAAkBP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAlB,sBAA4CiF,aAA5C,GAAV,CAAR;AACA,WAHD;AAIA;AACD;AAED,KA1BK,WA2BC,UAAApF,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,KA7BK,CAAP;AA8BA,GArCD;AAsCA;;AAED,SAASwC,UAAT,CAAoB/lC,WAApB,EAAiC0jC,QAAjC,EAA2CY,WAA3C,EAAwDjiC,IAAxD,EAAmG;AAAA,MAArCshC,YAAqC,uEAAtBH,qBAAsB;AAClG,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,QAAMiE,SAAS,GAAGhE,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,iBAAxC,KAA8DgsC,sBAAc,CAACD,eAA/F;AAEA,QAAIc,UAAU,GAAG3/B,eAAe,CAACzE,aAAhB,CAA8BzE,WAA9B,EAA2ChE,KAA3C,EAAkDqG,IAAlD,CAAjB;AACA,QAAI8lC,QAAQ,GAAG,EAAf;;AAEA,QAAIU,UAAJ,EAAe;AACdA,MAAAA,UAAU,GAAGC,2BAAQD,UAAR,EAAoBf,SAApB,CAAb;;AACA,gCAAOe,UAAP,EAAmB,UAAAE,cAAc,EAAI;AACpCZ,QAAAA,QAAQ,CAAC5rC,IAAT,CAAcqnC,QAAQ,CAACoF,YAAY,CAACtF,QAAD,EAAWY,WAAX,EAAwByE,cAAxB,EAAwCpF,YAAxC,CAAb,CAAtB;AACA,OAFD;AAGA;;AAED,WAAO6E,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAP;AACA,GAfD;AAgBA;;AAED,SAASjC,aAAT,CAAuBlmC,WAAvB,EAAoC0jC,QAApC,EAA8C7oC,MAA9C,EAAsDC,KAAtD,EAA6D+G,KAA7D,EAAoE/F,MAApE,EAA4EwoC,WAA5E,EAA8H;AAAA,MAArCX,YAAqC,uEAAtBH,qBAAsB;AAC7H,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;AACA,QAAM8rC,SAAS,GAAGrrB,WAAW,CAACsrB,eAAZ,IAA+BC,sBAAc,CAACD,eAAhE;AACA,QAAId,KAAK,GAAG/9B,eAAe,CAAC5E,aAAhB,CAA8BtE,WAA9B,EAA2ChE,KAA3C,EAAkDnB,MAAlD,EAA0DC,KAA1D,CAAZ;AACA,QAAIoB,SAAS,GAAGgN,eAAe,CAAClF,iBAAhB,CAAkChE,WAAlC,EAA+ChE,KAA/C,EAAsDnB,MAAtD,EAA8DC,KAA9D,CAAhB;;AAEA,QAAImsC,KAAK,IAAI,IAAb,EAAkB;AACjB;AAEA,UAAMgC,SAAS,GAAG//B,eAAe,CAACjF,YAAhB,CAA6BjE,WAA7B,EAA0ChE,KAA1C,EAAiDnB,MAAjD,EAAyDC,KAAzD,EAAgE+G,KAAhE,EAAuE/F,MAAvE,KAAkF,EAApG;;AACA,UAAMotC,KAAK,GAAGJ,2BAAQpsC,MAAM,CAAC6D,MAAP,CAAc0oC,SAAd,CAAR,EAAkCnB,SAAlC,CAAd;;AACA,UAAMK,QAAQ,GAAGe,KAAK,CAAC1nC,GAAN,CAAU,UAAC6C,IAAD,EAAO7I,CAAP,EAAa;AACvC,YAAM2tC,UAAU,GAAG9kC,IAAI,CAACxJ,MAAL,CAAY,UAAAuuC,CAAC;AAAA,iBAAIA,CAAC,IAAI,IAAT;AAAA,SAAb,CAAnB;;AACA,YAAID,UAAU,CAACrtC,MAAX,KAAsBuI,IAAI,CAACvI,MAA/B,EAAuC;AACtC,iBADsC;AAEtC;;AAED,YAAMutC,cAAc,GAAGF,UAAU,CAACrtC,MAAX,qCAAwBjB,MAAxB;AAAgC4B,UAAAA,GAAG,EAAE;AAACe,YAAAA,KAAK,EAAE2rC;AAAR;AAArC,aAA4DtuC,MAAnF;AAEA,eAAO+oC,QAAQ,CAAC0F,eAAe,CAAC5F,QAAD,EAAW2F,cAAX,EAA2BvuC,KAA3B,EAAkC+G,KAAK,GAAIrG,CAAC,GAAGssC,SAA/C,EAA2D5rC,SAA3D,EAAsEooC,WAAtE,EAAmFX,YAAnF,CAAhB,CAAR,UACC,UAAC4F,GAAD,EAAS;AACf,cAAIA,GAAG,CAACC,OAAJ,KAAgB,gBAApB,EAAqC;AACpC5F,YAAAA,QAAQ,CAAC6B,cAAY,CAACzlC,WAAD,EAAc0jC,QAAd,EAAwB7oC,MAAxB,EAAgCC,KAAhC,EAAuCwpC,WAAvC,EAAoDX,YAApD,CAAb,CAAR;AACA;AACD,SALK,CAAP;AAMA,OAdgB,CAAjB;AAgBA,aAAO6E,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAP;AAEA,KAvBD,MAuBO;AACN;AAEA,aAAOvE,QAAQ,CAAC0F,eAAe,CAAC5F,QAAD,EAAW7oC,MAAX,EAAmBC,KAAnB,EAA0B+G,KAA1B,EAAiC3F,SAAjC,EAA4CooC,WAA5C,EAAyDX,YAAzD,CAAhB,CAAR,CAAgGX,IAAhG,CAAqG,UAACC,QAAD,EAAc;AACzH;AACA,YAAIA,QAAQ,IAAIA,QAAQ,CAACuG,OAArB,IAAgCvG,QAAQ,CAACwG,OAAT,KAAqB,KAAzD,EAA+D,CAA/D,MAEO;AACN;AACA,cAAI3tC,MAAM,GAAGgsC,SAAb,EAAwB;AACvB,mBAAOlE,QAAQ,CAACsC,aAAa,CAAClmC,WAAD,EAAc0jC,QAAd,EAAwB7oC,MAAxB,EAAgCC,KAAhC,EAAuC+G,KAAK,GAAGimC,SAA/C,EAA0DhsC,MAAM,GAAGgsC,SAAnE,EAA8ExD,WAA9E,EAA2FX,YAA3F,CAAd,CAAf;AACA,WAJK;;AAKN;AACD,OAVM,WAUE,UAAC4F,GAAD,EAAO;AACf,YAAIA,GAAG,CAACC,OAAJ,KAAgB,gBAApB,EAAqC;AACpC5F,UAAAA,QAAQ,CAAC6B,cAAY,CAACzlC,WAAD,EAAc0jC,QAAd,EAAwB7oC,MAAxB,EAAgCC,KAAhC,EAAuCwpC,WAAvC,EAAoDX,YAApD,CAAb,CAAR;AACA,SAFD,MAEO;AACN,gBAAM,IAAIL,KAAJ,mCAAqCiG,GAArC,EAAN;AACA;AACD,OAhBM,CAAP;AAiBA;AACD,GAnDD;AAoDA;;AAED,SAASjD,kBAAT,CAA4B5C,QAA5B,EAAsC7oC,MAAtC,EAA8CC,KAA9C,EAAqDwpC,WAArD,EAA+H;AAAA,MAA7DX,YAA6D,uEAA9CH,qBAA8C;AAAA,MAAvB/mC,GAAuB;AAAA,MAAlB2pC,gBAAkB;AAC9H,SAAO,UAACxC,QAAD,EAAc;AACpB,WAAOA,QAAQ,CAAC8F,gBAAgB,CAAChG,QAAD,EAAW7oC,MAAX,EAAmBC,KAAnB,EAA0BwpC,WAA1B,EAAuCX,YAAvC,EAAqDlnC,GAArD,EAA0D2pC,gBAA1D,CAAjB,CAAR,CAAsGpD,IAAtG,CAA2G,UAACC,QAAD,EAAc;AAE9H,KAFK,WAEG,UAACsG,GAAD,EAAO;AACf,YAAM,IAAIjG,KAAJ,mCAAqCiG,GAArC,EAAN;AACD,KAJM,CAAP;AAKA,GAND;AAOA;;AAED,SAASP,YAAT,CAAsBtF,QAAtB,EAAgCY,WAAhC,EAA6CjiC,IAA7C,EAAyF;AAAA,MAAtCshC,YAAsC,uEAAvBH,qBAAuB;AACxF,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAM1B,OAAO,GAAG8F,UAAU,CAACtE,YAAD,EAAeD,QAAf,CAA1B;AAEA,QAAIpB,OAAO,GAAG;AACbznC,MAAAA,MAAM,EAAE;AACP4B,QAAAA,GAAG,EAAE;AACJ,gBAAI4F;AADA;AADE;AADK,KAAd;AAOA,WAAO6/B,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtF,cAAM,IAAIJ,KAAJ,CAAUS,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,SAArC,CAAN;AACA,OAFD,MAEO;AACNE,QAAAA,QAAQ,CAAC+F,WAAW,CAACrF,WAAD,EAAcP,MAAd,EAAsBL,QAAtB,EAAgCrhC,IAAhC,CAAZ,CAAR;AACA;AACD,KAPK,WAQC,UAAAkhC,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,aAAOA,KAAP;AACA,KAXK,CAAP;AAYA,GAvBD;AAwBA;;AAED,SAAS+F,eAAT,CAAyB5F,QAAzB,EAAmC7oC,MAAnC,EAA2CC,KAA3C,EAAkD+G,KAAlD,EAAyD3F,SAAzD,EAAoEooC,WAApE,EAAuH;AAAA,MAAtCX,YAAsC,uEAAvBH,qBAAuB;AACtH,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAMiE,SAAS,GAAGrrB,WAAW,CAACsrB,eAAZ,IAA+BC,sBAAc,CAACD,eAAhE;AACA,QAAM5F,OAAO,GAAG8F,UAAU,CAACtE,YAAD,EAAeD,QAAf,CAA1B;AAEA,QAAIpB,OAAO,GAAG;AACbznC,MAAAA,MAAM,EAAEA,MAAM,uBAAQA,MAAR,CADD;AAEb0tC,MAAAA,MAAM,EAAE1mC,KAAK,GAAE,CAFF;AAGb/G,MAAAA,KAAK,EAAEA,KAHM;AAIbotC,MAAAA,KAAK,EAAEJ;AAJM,KAAd;AAMA,WAAO5F,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtF,cAAM,IAAIJ,KAAJ,CAAUS,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,SAArC,CAAN;AACA,OAFD,MAEO,IAAIK,MAAM,CAACmD,OAAP,IAAkBnD,MAAM,CAACmD,OAAP,CAAexD,QAAf,CAAlB,IAA8C7uB,0BAAM,CAACkvB,MAAM,CAACmD,OAAP,CAAexD,QAAf,CAAD,CAAN,CAAiCkG,OAAjC,CAAyC1tC,SAAzC,CAAlD,EAAuG;AAC7G,cAAM,IAAIonC,KAAJ,CAAU,gBAAV,CAAN;AACA,OAFM,MAEA;AACNM,QAAAA,QAAQ,CAACkD,cAAc,CAACxC,WAAD,EAAcP,MAAd,EAAsBL,QAAtB,EAAgC7oC,MAAhC,EAAwCC,KAAxC,EAA+C+G,KAA/C,CAAf,CAAR;AACA;AACD,KATK,WAUC,UAAA0hC,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,aAAOA,KAAP,CAFe;AAGf,KAbK,CAAP;AAcA,GAzBD;AA0BA;;AAED,SAASmG,gBAAT,CAA0BhG,QAA1B,EAAoC7oC,MAApC,EAA4CC,KAA5C,EAAmDwpC,WAAnD,EAA6H;AAAA,MAA7DX,YAA6D,uEAA9CH,qBAA8C;AAAA,MAAvB/mC,GAAuB;AAAA,MAAlB2pC,gBAAkB;AAC5H,SAAO,UAACxC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAM1B,OAAO,GAAG8F,UAAU,CAACtE,YAAD,EAAeD,QAAf,CAA1B;AAEA,QAAIpB,OAAO,GAAG;AACbznC,MAAAA,MAAM,qBAAMA,MAAN,CADO;AAEbC,MAAAA,KAAK,EAAEA;AAFM,KAAd;;AAKA,QAAIsrC,gBAAJ,EAAsB;AACrB9D,MAAAA,OAAO,qCAAOA,OAAP,GAAmB8D,gBAAnB,CAAP;AACA;;AAED,WAAOlE,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtF,cAAM,IAAIJ,KAAJ,CAAUS,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,SAArC,CAAN;AACA,OAFD,MAEO;AACNE,QAAAA,QAAQ,CAACuD,mBAAmB,CAAC7C,WAAD,EAAcP,MAAd,EAAsBL,QAAtB,EAAgC7oC,MAAhC,EAAwCC,KAAxC,EAA+C2B,GAA/C,CAApB,CAAR;AACA;AACD,KAPK,WAQC,UAAA8mC,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,aAAOA,KAAP;AACA,KAXK,CAAP;AAYA,GAzBD;AA0BA;;AAED,SAASsG,YAAT,CAAsBnG,QAAtB,EAAgCY,WAAhC,EAA6CzpC,MAA7C,EAA2F;AAAA,MAAtC8oC,YAAsC,uEAAvBH,qBAAuB;AAC1F,SAAO,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAMiE,SAAS,GAAGrrB,WAAW,CAACsrB,eAAZ,IAA+BC,sBAAc,CAACD,eAAhE;AACA,QAAM5F,OAAO,GAAG8F,UAAU,CAACtE,YAAD,EAAeD,QAAf,CAA1B;AACA,QAAMpB,OAAO,GAAG;AACfznC,MAAAA,MAAM,EAAEA,MADO;AAEfqtC,MAAAA,KAAK,EAAEJ;AAFQ,KAAhB;AAIA,WAAO5F,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAcN,QAAd,CAAjB,IAA4CK,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAhE,EAAuF;AACtFE,QAAAA,QAAQ,CAACK,kBAAkB,CAACF,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,IAAIJ,KAAJ,CAAU,SAAV,CAA5B,CAAnB,CAAR;AACA,OAFD,MAEO;AACN,YAAIS,MAAM,CAACkD,KAAP,IAAgBa,SAApB,EAA+B;AAC9B;AACA,iBAAOlE,QAAQ,CAACmD,SAAS,CAACzC,WAAD,EAAcP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAd,CAAV,CAAf;AACA,SAHD,MAGO;AACN;AACA,cAAIyE,QAAQ,GAAG,EAAf;AACA,cAAIC,kBAAkB,GAAGpmC,IAAI,CAACqmC,IAAL,CAAU,CAACtE,MAAM,CAACkD,KAAP,GAAea,SAAhB,IAA6BA,SAAvC,CAAzB;;AACA,eAAK,IAAItsC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4sC,kBAApB,EAAwC5sC,CAAC,EAAzC,EAA6C;AAC5C,gBAAI8sC,WAAW,GAAG;AACjBztC,cAAAA,MAAM,EAAEA,MADS;AAEjB0tC,cAAAA,MAAM,EAAE,CAAC/sC,CAAC,GAAG,CAAL,IAAUssC,SAFD;AAGjBI,cAAAA,KAAK,EAAEJ;AAHU,aAAlB;AAKAK,YAAAA,QAAQ,CAAC5rC,IAAT,CAAc2lC,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCmG,WAArC,CAArB,EAN4C;AAO5C;;AACD,iBAAOE,OAAO,CAACC,GAAR,CAAYN,QAAZ,EAAsBnF,IAAtB,CAA2B,UAAA0F,OAAO,EAAI;AAC5C,gBAAIC,aAAa,GAAG7jC,6BAAU4jC,OAAO,CAAClnC,GAAR,CAAY,UAAAonC,GAAG;AAAA,qBAAIA,GAAG,CAACxrC,IAAJ,CAASsmC,QAAT,CAAJ;AAAA,aAAf,CAAV,CAApB;;AACAE,YAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,+BAAkBP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAlB,sBAA4CiF,aAA5C,GAAV,CAAR;AACA,WAHM,CAAP;AAIA;AACD;AAED,KA3BK,WA4BC,UAAApF,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACK,kBAAkB,CAACV,KAAD,CAAnB,CAAR;AACA,KA9BK,CAAP;AA+BA,GAvCD;AAwCA;;AAED,SAASiB,cAAT,CAAwBxkC,WAAxB,EAAqCskC,WAArC,EAAkDP,MAAlD,EAA0DL,QAA1D,EAAoEC,YAApE,EAAkF;AACjF,SAAO,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIzmC,IAAI,GAAG2mC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAX;;AACA,QAAItmC,IAAI,CAACtB,MAAT,EAAgB;AACf,UAAIguC,YAAY,GAAG5gC,eAAe,CAAC7I,cAAhB,CAA+BL,WAA/B,EAA4C6jC,QAAQ,EAApD,CAAnB;AACAD,MAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,EAAclnC,IAAd,CAAV,CAAR;AACA,UAAImnC,UAAU,GAAGr7B,eAAe,CAACjG,oBAAhB,CAAqCjD,WAArC,EAAkD6jC,QAAQ,EAA1D,CAAjB;AAGA,UAAIjpC,OAAO,GAAG,EAAd;AACAwC,MAAAA,IAAI,CAACf,OAAL,CAAa,UAAAG,KAAK,EAAI;AACrB,YAAIutC,QAAQ,GAAGD,YAAY,CAACttC,KAAK,CAACC,GAAP,CAA3B;AACA,YAAI8G,MAAM,GAAGghC,UAAU,CAAC/nC,KAAK,CAACC,GAAP,CAAV,CAAsBW,IAAnC;;AACA,mCAAQmG,MAAR,EAAgB,UAACrG,KAAD,EAAQT,GAAR,EAAgB;AAC/B,cAAID,KAAK,CAACY,IAAN,CAAWX,GAAX,MAAoBS,KAAxB,EAA+B;AAC9B0mC,YAAAA,QAAQ,CAACe,8BAA8B,CAACL,WAAD,EAAc9nC,KAAK,CAACC,GAApB,EAAyBA,GAAzB,CAA/B,CAAR;AACA,WAFD,MAEO,IAAIa,8BAAWJ,KAAX,CAAJ,EAAuB;AAC7B,gBAAIhC,IAAI,CAACC,SAAL,CAAe+B,KAAf,MAA0BhC,IAAI,CAACC,SAAL,CAAeqB,KAAK,CAACY,IAAN,CAAWX,GAAX,CAAf,CAA9B,EAA+D;AAC9DmnC,cAAAA,QAAQ,CAACe,8BAA8B,CAACL,WAAD,EAAc9nC,KAAK,CAACC,GAApB,EAAyBA,GAAzB,CAA/B,CAAR;AACA,aAFD,MAEO,IAAImV,6BAAU1U,KAAV,KAAoB7B,6BAAU6B,KAAV,CAAxB,EAA0C;AAChD,kBAAI7B,6BAAUmB,KAAK,CAACY,IAAN,CAAWX,GAAX,CAAV,KAA+BD,KAAK,CAACY,IAAN,IAAc,CAACZ,KAAK,CAACY,IAAN,CAAWX,GAAX,CAAlD,EAAoE;AACnEmnC,gBAAAA,QAAQ,CAACe,8BAA8B,CAACL,WAAD,EAAc9nC,KAAK,CAACC,GAApB,EAAyBA,GAAzB,CAA/B,CAAR;AACA;AACD;AACD;AACD,SAZD;;AAcA7B,QAAAA,OAAO,GAAGA,OAAO,CAACgtC,MAAR,CAAe1+B,eAAe,CAAC3E,wBAAhB,CAAyCvE,WAAzC,EAAsD6jC,QAAQ,MAAM,EAApE,EAAwErnC,KAAxE,CAAf,CAAV;AACA5B,QAAAA,OAAO,GAAGA,OAAO,CAACgtC,MAAR,CAAe1+B,eAAe,CAAC3E,wBAAhB,CAAyCvE,WAAzC,EAAsD6jC,QAAQ,MAAM,EAApE,EAAwEkG,QAAxE,CAAf,CAAV;AACA,OAnBD;AAqBA,UAAIxuC,aAAa,GAAG2F,aAAa,CAAC9F,gBAAd,CAA+BR,OAA/B,CAApB;;AACA,UAAG,CAACS,6BAAUE,aAAV,CAAJ,EAA8B;AAC7BA,QAAAA,aAAa,CAACc,OAAd,CAAsB,UAAAtB,KAAK,EAAI;AAC9B,cAAGA,KAAH,EAAU;AACT;AACA6oC,YAAAA,QAAQ,CAAC4B,gBAAgB,CAAClB,WAAD,EAAcvpC,KAAK,CAACF,MAApB,EAA4BE,KAAK,CAACD,KAAlC,CAAjB,CAAR,CAFS;;AAIT8oC,YAAAA,QAAQ,CAAC6B,cAAY,CAACzlC,WAAD,EAAc0jC,QAAd,EAAwB3oC,KAAK,CAACF,MAA9B,EAAsCE,KAAK,CAACD,KAA5C,EAAmDwpC,WAAnD,EAAgEX,YAAhE,CAAb,CAAR;AACA;AACD,SAPD;AAQA;AACD,KAvCD,MAuCO;AACNQ,MAAAA,OAAO,CAACC,IAAR,+BAAoCV,QAApC;AACA;AACD,GA5CD;AA6CA;;AAED,SAASiG,WAAT,CAAqBrF,WAArB,EAAkCP,MAAlC,EAA0CL,QAA1C,EAAoDrhC,IAApD,EAA0D;AACzD,SAAO,UAAAuhC,QAAQ,EAAI;AAClB;AACA,QAAIG,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,EAAsB5nC,MAA1B,EAAiC;AAChC8nC,MAAAA,QAAQ,CAACmD,SAAS,CAACzC,WAAD,EAAcP,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAd,CAAV,CAAR;AACA,KAJiB;;;AAOlB,gCAASrhC,IAAT,EAAe,UAAA5F,GAAG,EAAI;AACrB,aAAOzB,0BAAO+oC,MAAM,CAAC3mC,IAAP,CAAYsmC,QAAZ,CAAP,EAA8B;AAACjnC,QAAAA,GAAG,EAAHA;AAAD,OAA9B,CAAP;AACA,KAFD;;AAGA,QAAI4F,IAAI,CAACvG,MAAT,EAAiB;AAChB8nC,MAAAA,QAAQ,CAACoG,uBAAuB,CAAC1F,WAAD,EAAcjiC,IAAd,CAAxB,CAAR;AACA;AACD,GAbD;AAcA;;AAED,SAAS4nC,WAAT,CAAqBjqC,WAArB,EAAkC0jC,QAAlC,EAA4CY,WAA5C,EAA+F;AAAA,MAAtCX,YAAsC,uEAAvBH,qBAAuB;AAC9F,SAAO,YAAM;AACZ,WAAM,UAACI,QAAD,EAAWC,QAAX,EAAwB;AAC7BD,MAAAA,QAAQ,CAACsG,kBAAkB,CAAC5F,WAAD,CAAnB,CAAR;AAEA,UAAItoC,KAAK,GAAG6nC,QAAQ,EAApB;AAEA,UAAIsG,QAAQ,GAAGjhC,eAAe,CAACvE,WAAhB,CAA4B3E,WAA5B,EAAyChE,KAAzC,CAAf;AACA4nC,MAAAA,QAAQ,CAACmC,UAAU,CAAC/lC,WAAD,EAAc0jC,QAAd,EAAwBY,WAAxB,EAAqC6F,QAArC,EAA+CxG,YAA/C,CAAX,CAAR;AAEA,UAAIyG,cAAc,GAAGlhC,eAAe,CAAC7C,iBAAhB,CAAkCrG,WAAlC,EAA+ChE,KAA/C,CAArB;;AAEA,UAAMmsC,QAAQ,GAAGkC,6BAAUD,cAAV,EAA0B,UAACE,aAAD,EAAmB;AAC7D,iCAAMA,aAAa,CAACzjC,IAApB,EAA0B,UAACD,GAAD,EAAS;AAClC,iBAAOg9B,QAAQ,CAACsC,aAAa,CAAClmC,WAAD,EAAc0jC,QAAd,EAAwB4G,aAAa,CAACzvC,MAAtC,EAA8CyvC,aAAa,CAACxvC,KAA5D,EAAmE8L,GAAG,CAAC/E,KAAvE,EAA8E+E,GAAG,CAAC9K,MAAlF,EAA0FwoC,WAA1F,EAAuGX,YAAvG,CAAd,CAAf;AACA,SAFD;AAGA,OAJgB,CAAjB;;AAMA,aAAO6E,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAP;AACA,KAjBD;AAkBA,GAnBD;AAoBA;;AAED,SAASoC,+BAAT,CAAyCvqC,WAAzC,EAAsD0jC,QAAtD,EAAgEY,WAAhE,EAAmH;AAAA,MAAtCX,YAAsC,uEAAvBH,qBAAuB;AAClH,SAAO,UAAA7lC,cAAc,EAAI;AACxB,WAAO,UAACimC,QAAD,EAAWC,QAAX,EAAwB;AAE9B,UAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,UAAMp9B,WAAW,GAAGyC,eAAe,CAAC9B,2BAAhB,CAA4CpH,WAA5C,EAAyDhE,KAAzD,EAAgE2B,cAAhE,CAApB;;AAEA,UAAMwqC,QAAQ,GAAGkC,6BAAU5jC,WAAV,EAAuB,UAACC,SAAD,EAAe;AACtD,iCAAMA,SAAS,CAACG,IAAhB,EAAsB,UAACD,GAAD,EAAS;AAC9B,iBAAOg9B,QAAQ,CAACsC,aAAa,CAAClmC,WAAD,EAAc0jC,QAAd,EAAwBh9B,SAAS,CAAC7L,MAAlC,EAA0C6L,SAAS,CAAC5L,KAApD,EAA2D8L,GAAG,CAAC/E,KAA/D,EAAsE+E,GAAG,CAAC9K,MAA1E,EAAkFwoC,WAAlF,EAA+FX,YAA/F,CAAd,CAAf;AACA,SAFD;AAGA,OAJgB,CAAjB;;AAMA,aAAO6E,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAP;AACA,KAZD;AAaA,GAdD;AAeA;;AAED,SAASzB,0BAAT,CAAoCF,SAApC,EAAqF;AAAA,MAAtC7C,YAAsC,uEAAvBH,qBAAuB;AACnF,SAAO,UAAAI,QAAQ,EAAI;AAElB,QAAIjmC,cAAc,uBAChB6oC,SADgB,EACJ,IADI,CAAlB,CAFkB;;;AAOlB,6BAAMgE,MAAN,EAAc,UAAAC,OAAO,EAAI;AACxB,UAAIA,OAAO,CAAC3tC,cAAR,CAAuB,iCAAvB,CAAJ,EAA+D;AAC9D8mC,QAAAA,QAAQ,CAAC6G,OAAO,CAACF,+BAAR,CAAwC5sC,cAAxC,EAAwDgmC,YAAxD,CAAD,CAAR;AACA;AACD,KAJD;AAMA,GAbD;AAcD;;AAED,SAAS+G,sBAAT,CAAgCpG,WAAhC,EAA6C;AAC5C,SAAO,UAAClnC,IAAD,EAAU;AAChB,WAAO,UAAAwmC,QAAQ,EAAI;AAClB,UAAIxmC,IAAI,IAAIA,IAAI,CAAC0C,SAAjB,EAA4B;AAC3B8jC,QAAAA,QAAQ,CAAC6C,kBAAkB,CAACnC,WAAD,EAAclnC,IAAI,CAAC0C,SAAnB,CAAnB,CAAR;AACA,OAFD,MAEO,IAAI1C,IAAI,IAAIA,IAAI,CAACM,UAAjB,EAA6B;AACnCkmC,QAAAA,QAAQ,CAACgD,mBAAmB,CAACtC,WAAD,EAAclnC,IAAI,CAACM,UAAnB,CAApB,CAAR;AACA;AACD,KAND;AAOA,GARD;AASA;;;AAID,SAASitC,qBAAT,GAAiC;AAChC,SAAO;AACNvgC,IAAAA,IAAI,EAAEwgC,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBE;AADxB,GAAP;AAGA;;AAED,SAAS2O,uCAAT,CAAiD7B,QAAjD,EAA2DrhC,IAA3D,EAAiE;AAChE,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAACnU,MAAZ,CAAmBZ,MAAnB,CAA0BgB,sBAD1B;AAEN6M,IAAAA,QAAQ,EAARA,QAFM;AAGNrhC,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA;;AAED,SAAS4hC,kBAAT,CAA4B4G,CAA5B,EAA+B;AAC9B1G,EAAAA,OAAO,CAACZ,KAAR,CAAc,sBAAd,EAAsCsH,CAAtC;AACA,SAAO;AAACzgC,IAAAA,IAAI,EAAE;AAAP,GAAP;AACA;;;AAID,IAAM0gC,OAAO,GAAG,SAAVA,OAAU,CAACC,MAAD,EAAY;AAC3B,SAAO,UAACzG,WAAD,EAAiB;AACvB,WAAO,YAAa;AAAA,wCAAT0G,IAAS;AAATA,QAAAA,IAAS;AAAA;;AACnB,aAAO,UAAApH,QAAQ,EAAI;AAClBA,QAAAA,QAAQ,CAACmH,MAAM,MAAN,UAAOzG,WAAP,SAAuB0G,IAAvB,EAAD,CAAR;AACA,OAFD;AAGA,KAJD;AAKA,GAND;AAOA,CARD;;AAUA,SAASD,MAAT,CAAgBzG,WAAhB,EAA6Bl6B,IAA7B,EAAmCk4B,OAAnC,EAA4C;AAC3Cl4B,EAAAA,IAAI,GAAGA,IAAI,CAAC6X,KAAL,CAAW,GAAX,CAAP;;AACA,4BAAO7X,IAAP,EAAa,UAAA6gC,WAAW,EAAI;AAC3B,QAAI,CAAC3G,WAAW,CAACxnC,cAAZ,CAA2BmuC,WAA3B,CAAL,EAA8C;AAC7C9G,MAAAA,OAAO,CAACZ,KAAR,CAAc,gDAAd,EAAgEn5B,IAAhE,EAAsEk4B,OAAtE;AACA,YAAM,IAAIgB,KAAJ,CAAU,gDAAV,CAAN;AACA;;AACDgB,IAAAA,WAAW,GAAGA,WAAW,CAAC2G,WAAD,CAAzB;AACA,GAND;;AAOA,MAAI,OAAO3G,WAAP,KAAuB,QAA3B,EAAqC,MAAM,IAAIhB,KAAJ,CAAU,+CAAV,CAAN;AACrC,2CAAWhB,OAAX;AAAoBl4B,IAAAA,IAAI,EAAEk6B;AAA1B;AACA;;AAED,SAASyC,SAAT,CAAmBzC,WAAnB,EAAgClnC,IAAhC,EAAsCvC,MAAtC,EAA8C;AAC7C,MAAI,CAAC+W,6BAAUxU,IAAV,CAAL,EAAsBA,IAAI,GAAG,CAACA,IAAD,CAAP;AACtB,SAAO2tC,MAAM,CAACzG,WAAD,EAAc,KAAd,EAAqB;AAAClnC,IAAAA,IAAI,EAAJA,IAAD;AAAOvC,IAAAA,MAAM,EAANA;AAAP,GAArB,CAAb;AACA;;AAED,SAASusC,cAAT,CAAwB9C,WAAxB,EAAqClnC,IAArC,EAA2CX,GAA3C,EAAgD;AAC/C,MAAI,CAACmV,6BAAUxU,IAAV,CAAL,EAAsBA,IAAI,GAAG,CAACA,IAAD,CAAP;AACtB,MAAMklC,OAAO,GAAG;AACfllC,IAAAA,IAAI,EAAJA,IADe;AAEfX,IAAAA,GAAG,EAAHA,GAFe;;AAAA,GAAhB;AAIA,SAAOsuC,MAAM,CAACzG,WAAD,EAAc,WAAd,EAA2BhC,OAA3B,CAAb;AACA;;AAED,SAAS0H,uBAAT,CAAiC1F,WAAjC,EAA8CjiC,IAA9C,EAAoD;AACnD,MAAI,CAACuP,6BAAUvP,IAAV,CAAL,EAAsBA,IAAI,GAAG,CAACA,IAAD,CAAP;AACtB,SAAO0oC,MAAM,CAACzG,WAAD,EAAc,gBAAd,EAAgC;AAACjiC,IAAAA,IAAI,EAAJA;AAAD,GAAhC,CAAb;AACA;;AAED,SAAS2kC,cAAT,CAAwB1C,WAAxB,EAAqCzpC,MAArC,EAA6CC,KAA7C,EAAoD6F,KAApD,EAA2DkB,KAA3D,EAAkEzE,IAAlE,EAAwElB,SAAxE,EAAmF;AAClF,SAAO6uC,MAAM,CAACzG,WAAD,EAAc,WAAd,EAA2B;AAACzpC,IAAAA,MAAM,EAANA,MAAD;AAASC,IAAAA,KAAK,EAALA,KAAT;AAAgB6F,IAAAA,KAAK,EAALA,KAAhB;AAAuBkB,IAAAA,KAAK,EAALA,KAAvB;AAA8BzE,IAAAA,IAAI,EAAJA,IAA9B;AAAoClB,IAAAA,SAAS,EAATA;AAApC,GAA3B,CAAb;AACA;;AAED,SAASmrC,mBAAT,CAA6B/C,WAA7B,EAA0CzpC,MAA1C,EAAkDC,KAAlD,EAAyDsC,IAAzD,EAA+DX,GAA/D,EAAoE;AACnE,SAAOsuC,MAAM,CAACzG,WAAD,EAAc,iBAAd,EAAiC;AAACzpC,IAAAA,MAAM,EAANA,MAAD;AAASC,IAAAA,KAAK,EAALA,KAAT;AAAgBsC,IAAAA,IAAI,EAAJA,IAAhB;AAAsBX,IAAAA,GAAG,EAAHA;AAAtB,GAAjC,CAAb;AACA;AAED;AACA;AACA;;;AACA,SAAS+oC,gBAAT,CAA0BlB,WAA1B,EAAuCzpC,MAAvC,EAA+CC,KAA/C,EAAsD;AACrD,SAAOiwC,MAAM,CAACzG,WAAD,EAAc,mBAAd,EAAmC;AAACzpC,IAAAA,MAAM,EAANA,MAAD;AAASC,IAAAA,KAAK,EAALA;AAAT,GAAnC,CAAb;AACA;;AAED,IAAMwqC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAChB,WAAD,EAAc7nC,GAAd,EAAmByuC,IAAnB,EAA4B;AACvD,SAAOH,MAAM,CAACzG,WAAD,EAAc,cAAd,EAA8B;AAAC7nC,IAAAA,GAAG,EAAHA,GAAD;AAAMyuC,IAAAA,IAAI,EAAJA;AAAN,GAA9B,CAAb;AACA,CAFD;;AAIA,SAAShB,kBAAT,CAA4B5F,WAA5B,EAAyC;AACxC,SAAOyG,MAAM,CAACzG,WAAD,EAAc,iBAAd,CAAb;AACA;;AAMD,SAASmC,kBAAT,CAA4BnC,WAA5B,EAAyC7nC,GAAzC,EAA8C;AAC7C,SAAOsuC,MAAM,CAACzG,WAAD,EAAc,gBAAd,EAAgC;AAAC7nC,IAAAA,GAAG,EAAHA;AAAD,GAAhC,CAAb;AACA;;AAED,SAASmqC,mBAAT,CAA6BtC,WAA7B,EAA0CjiC,IAA1C,EAAgD;AAC/C,SAAO0oC,MAAM,CAACzG,WAAD,EAAc,iBAAd,EAAiC;AAACjiC,IAAAA,IAAI,EAAJA;AAAD,GAAjC,CAAb;AACA;;AAMD,SAASuiC,kBAAT,CAA4BN,WAA5B,EAAyClnC,IAAzC,EAA+C;AAC9C,SAAO2tC,MAAM,CAACzG,WAAD,EAAc,eAAd,EAA+B;AAAClnC,IAAAA,IAAI,EAAJA;AAAD,GAA/B,CAAb;AACA;;AAED,SAASunC,8BAAT,CAAwCL,WAAxC,EAAqD7nC,GAArD,EAA0D0uC,QAA1D,EAAoE;AACnE,SAAOJ,MAAM,CAACzG,WAAD,EAAc,wBAAd,EAAwC;AAAC7nC,IAAAA,GAAG,EAAHA,GAAD;AAAM0uC,IAAAA,QAAQ,EAARA;AAAN,GAAxC,CAAb;AACA;;AAED,SAASlF,wBAAT,CAAkC3B,WAAlC,EAA+CuB,WAA/C,EAA4DloC,cAA5D,EAA4E9C,MAA5E,EAAoFC,KAApF,EAA2F+G,KAA3F,EAAkG/F,MAAlG,EAA0G;AACzG,SAAOivC,MAAM,CAACzG,WAAD,EAAc,sBAAd,EAAsC;AAACuB,IAAAA,WAAW,EAAXA,WAAD;AAAcloC,IAAAA,cAAc,EAAdA,cAAd;AAA8B9C,IAAAA,MAAM,EAANA,MAA9B;AAAsCC,IAAAA,KAAK,EAALA,KAAtC;AAA6C+G,IAAAA,KAAK,EAALA,KAA7C;AAAoD/F,IAAAA,MAAM,EAANA;AAApD,GAAtC,CAAb;AACA;;AAED,SAASuqC,6BAAT,CAAuC/B,WAAvC,EAAoDuB,WAApD,EAAiEloC,cAAjE,EAAiF9C,MAAjF,EAAyFC,KAAzF,EAAgG;AAC/F,SAAOiwC,MAAM,CAACzG,WAAD,EAAc,4BAAd,EAA4C;AAACuB,IAAAA,WAAW,EAAXA,WAAD;AAAcloC,IAAAA,cAAc,EAAdA,cAAd;AAA8B9C,IAAAA,MAAM,EAANA,MAA9B;AAAsCC,IAAAA,KAAK,EAALA;AAAtC,GAA5C,CAAb;AACA;;AAED,SAASswC,qBAAT,CAA+B9G,WAA/B,EAA4CuB,WAA5C,EAAyD;AACxD,SAAOkF,MAAM,CAACzG,WAAD,EAAc,mBAAd,EAAmC;AAACuB,IAAAA,WAAW,EAAXA;AAAD,GAAnC,CAAb;AACA;;AAED,SAASwF,wBAAT,CAAkC/G,WAAlC,EAA+C;AAC9C,SAAOyG,MAAM,CAACzG,WAAD,EAAc,uBAAd,CAAb;AACA;;AAED,SAASgH,gBAAT,CAA0BhH,WAA1B,EAAuC;AACtC,SAAOyG,MAAM,CAACzG,WAAD,EAAc,aAAd,CAAb;AACA;;AAED,SAASiH,kBAAT,CAA4BjH,WAA5B,EAAyCuB,WAAzC,EAAsD;AACrD,SAAOkF,MAAM,CAACzG,WAAD,EAAc,gBAAd,EAAgC;AAACuB,IAAAA,WAAW,EAAXA;AAAD,GAAhC,CAAb;AACA;;AAED,SAASC,qBAAT,CAA+BxB,WAA/B,EAA4CuB,WAA5C,EAAyDxjC,IAAzD,EAA+D;AAC9D,SAAO0oC,MAAM,CAACzG,WAAD,EAAc,mBAAd,EAAmC;AAACuB,IAAAA,WAAW,EAAXA,WAAD;AAAcxjC,IAAAA,IAAI,EAAJA;AAAd,GAAnC,CAAb;AACA;;;AAGD,IAAM4lC,UAAU,GAAG,SAAbA,UAAa,GAAoD;AAAA,MAAnDtE,YAAmD,uEAApCH,qBAAoC;AAAA,MAAbE,QAAa;AACtE,SAAOlwB,wBAAI,CAACtG,IAAL,CAAU,cAAV,EAA0By2B,YAA1B,EAAwC,UAAxC,EAAoDD,QAApD,CAAP;AACA,CAFD;;AAIA,IAAMgE,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC8D,QAAD,EAAkD;AAAA,MAAvC/uC,GAAuC,uEAAjC62B,cAAK,CAACmY,IAAN,EAAiC;AAAA,MAAnB1tC,cAAmB;AAC1E,MAAMukC,OAAO,GAAG;AACf,YAAQ;AADO,GAAhB;AAIA,MAAI9lC,KAAK,GAAG;AAACC,IAAAA,GAAG,EAAHA,GAAD;AAAMW,IAAAA,IAAI,EAAE;AAAZ,GAAZ;;AACA,MAAIW,cAAJ,EAAoB;AACnBvB,IAAAA,KAAK,CAACY,IAAN,GAAa;AAACW,MAAAA,cAAc,EAAdA;AAAD,KAAb;AACA;;AAEDukC,EAAAA,OAAO,CAACllC,IAAR,CAAaouC,QAAb,IAAyB,CAAChvC,KAAD,CAAzB;AAEA,SAAO8lC,OAAP;AACA,CAbD;;;AAiBA,cAAe;AACdoJ,EAAAA,GAAG,EAAEZ,OAAO,CAAC/D,SAAD,CADE;AAEd4E,EAAAA,QAAQ,EAAEb,OAAO,CAAC1D,cAAD,CAFH;AAGdwE,EAAAA,aAAa,EAAEd,OAAO,CAACzD,mBAAD,CAHR;AAId0D,EAAAA,MAAM,EAANA,MAJc;AAKdc,EAAAA,QAAQ,EAAEf,OAAO,CAAC9D,cAAD,CALH;AAMd/C,EAAAA,kBAAkB,EAAlBA,kBANc;AAOdI,EAAAA,SAAS,EAATA,SAPc;AAQdyG,EAAAA,OAAO,EAAPA,OARc;AASdne,EAAAA,MAAM,EAANA,MATc;AAUd,YAAQmY,UAVM;AAWdgH,EAAAA,MAAM,EAAE/F,UAXM;AAYdG,EAAAA,aAAa,EAAbA,aAZc;AAadqE,EAAAA,+BAA+B,EAA/BA,+BAbc;AAcdxE,EAAAA,UAAU,EAAVA,UAdc;AAed8B,EAAAA,OAAO,EAAPA,OAfc;AAgBdgC,EAAAA,YAAY,EAAZA,YAhBc;AAiBd1D,EAAAA,eAAe,EAAfA,eAjBc;AAkBdmD,EAAAA,eAAe,EAAfA,eAlBc;AAmBdN,EAAAA,YAAY,EAAZA,YAnBc;AAoBd+C,EAAAA,YAAY,EAAEjB,OAAO,CAACrE,kBAAD,CApBP;AAqBdF,EAAAA,iCAAiC,EAAjCA,iCArBc;AAsBdI,EAAAA,kCAAkC,EAAlCA,kCAtBc;AAuBdqF,EAAAA,aAAa,EAAElB,OAAO,CAAClE,mBAAD,CAvBR;AAwBdpC,EAAAA,cAAc,EAAdA,cAxBc;AAyBdsC,EAAAA,cAAc,EAAdA,cAzBc;AA0Bd6C,EAAAA,WAAW,EAAXA,WA1Bc;AA2BdM,EAAAA,WAAW,EAAXA,WA3Bc;AA4BdpF,EAAAA,wBAAwB,EAAxBA,wBA5Bc;AA6Bd3C,EAAAA,OAAO,EAAEoF,cA7BK;AA8Bd5B,EAAAA,UAAU,EAAVA,UA9Bc;AA+BdgF,EAAAA,sBAAsB,EAAtBA,sBA/Bc;AAgCdjG,EAAAA,YAAY,EAAZA,YAhCc;AAiCdmB,EAAAA,OAAO,EAAPA,OAjCc;AAkCdqG,EAAAA,YAAY,EAAEnB,OAAO,CAACS,kBAAD,CAlCP;AAmCdvF,EAAAA,UAAU,EAAVA,UAnCc;AAoCdkG,EAAAA,UAAU,EAAEpB,OAAO,CAACtF,gBAAD,CApCL;AAsCd2G,EAAAA,kBAAkB,EAAElG,wBAtCN;AAuCdmG,EAAAA,eAAe,EAAEtB,OAAO,CAACM,qBAAD,CAvCV;AAwCdiB,EAAAA,kBAAkB,EAAEvB,OAAO,CAACO,wBAAD,CAxCb;AAyCdiB,EAAAA,UAAU,EAAExB,OAAO,CAACQ,gBAAD,CAzCL;AA0CdX,EAAAA,qBAAqB,EAArBA,qBA1Cc;AA2CdlE,EAAAA,kBAAkB,EAAlBA;AA3Cc,CAAf;AA+CA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;ACx8BA,IAAMiF,GAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACpS,eAAvB,CAAZ;AACA,IAAM7L,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAACz+B,cAAP,CAAsBrF,WAApC,EAAiD,gBAAjD,EAAmE4qC,WAAW,CAACpS,eAA/E,CAAf;AACA,IAAMsM,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAACz+B,cAAP,CAAsBrF,WAApC,EAAiD,gBAAjD,EAAmE4qC,WAAW,CAACpS,eAA/E,CAAnB;AACA,IAAMkN,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAACz+B,cAAP,CAAsBrF,WAAxC,EAAqD,gBAArD,EAAuE4qC,WAAW,CAACpS,eAAnF,CAAnB;AACA,IAAMiM,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAACz+B,cAAP,CAAsBrF,WAA1C,EAAuD4qC,WAAW,CAACpS,eAAnE,CAArB;AACA,IAAMoN,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACz+B,cAAP,CAAsBrF,WAArC,EAAkD,gBAAlD,EAAoE4qC,WAAW,CAACpS,eAAhF,CAAhB;AACA,IAAMyT,YAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACpS,eAAhC,CAArB;AACA,IAAMwN,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACz+B,cAAP,CAAsBrF,WAAxC,EAAqD,gBAArD,EAAuE4qC,WAAW,CAACpS,eAAnF,CAAnB;AACA,IAAM4T,eAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACpS,eAAnC,CAAxB;AACA,IAAM0T,UAAU,GAAG1jC,OAAM,CAAC0jC,UAAP,CAAkBtB,WAAW,CAACpS,eAA9B,CAAnB;AACA,IAAM+R,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAACz+B,cAAP,CAAsBrF,WAA7D,EAA0E,gBAA1E,EAA4F4qC,WAAW,CAACpS,eAAxG,CAAxC;;AAIA,2BAAe;AACdkT,EAAAA,GAAG,EAAHA,GADc;AAEdQ,EAAAA,UAAU,EAAVA,UAFc;AAGdvf,EAAAA,MAAM,EAANA,QAHc;AAId,YAAQmY,YAJM;AAKdyF,EAAAA,+BAA+B,EAA/BA,iCALc;AAOd7E,EAAAA,UAAU,EAAVA,YAPc;AASdqG,EAAAA,YAAY,EAAEvjC,OAAM,CAAC+9B,iCAAP,CAAyCqE,WAAW,CAACpS,eAArD,EAAsE,eAAtE,CATA;AAWdiM,EAAAA,YAAY,EAAZA,cAXc;AAYduB,EAAAA,UAAU,EAAVA,YAZc;AAadoG,EAAAA,eAAe,EAAfA,eAbc;AAcdxG,EAAAA,OAAO,EAAPA,SAdc;AAedqG,EAAAA,YAAY,EAAZA;AAfc,CAAf;;ACZA,IAAMF,YAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAACtW,KAAZ,CAAkBC,gBAAtC,CAArB;AACA,IAAMyR,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACrlB,KAAP,CAAaC,cAAb,CAA4B1e,WAA9C,EAA2D,gBAA3D,EAA6E4qC,WAAW,CAACtW,KAAZ,CAAkBC,gBAA/F,CAAnB;AACA,IAAMqR,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACrlB,KAAP,CAAaC,cAAb,CAA4B1e,WAA3C,EAAwD,gBAAxD,EAA0E4qC,WAAW,CAACtW,KAAZ,CAAkBC,gBAA5F,CAAhB;AACA,IAAM0V,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACrlB,KAAP,CAAaC,cAAb,CAA4B1e,WAA/C,oBAA8E4qC,WAAW,CAACtW,KAAZ,CAAkBC,gBAAhG,CAApB;AACA,IAAMgW,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAACrlB,KAAP,CAAaE,SAAb,CAAuB3e,WAA9D,EAA2E,gBAA3E,EAA6F4qC,WAAW,CAACtW,KAAZ,CAAkBC,gBAA/G,CAAxC;;AAIA,SAASgY,qBAAT,CAA+B1G,WAA/B,EAA4C;AAC3C,SAAO;AACNz7B,IAAAA,IAAI,EAAEwgC,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCU,GAAnC,CAAuCC,OAAvC,CAA+CC,KAD/C;AAEN0Q,IAAAA,WAAW,EAAXA;AAFM,GAAP;AAIA;;;AAID,gBAAe;AACd0E,EAAAA,+BAA+B,EAA/BA,iCADc;AAEdN,EAAAA,WAAW,EAAXA,aAFc;AAGd8B,EAAAA,YAAY,EAAZA,YAHc;AAId/F,EAAAA,UAAU,EAAVA,YAJc;AAKdoG,EAAAA,eAAe,EAAEG,qBALH;AAMd3G,EAAAA,OAAO,EAAPA;AANc,CAAf;;ACjBA,IAAMmG,cAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAACtW,KAAZ,CAAkBgB,UAAtC,CAArB;AACA,IAAM0Q,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACrlB,KAAP,CAAaE,SAAb,CAAuB3e,WAAzC,EAAsD,WAAtD,EAAmE4qC,WAAW,CAACtW,KAAZ,CAAkBgB,UAArF,CAAnB;AACA,IAAMsQ,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACrlB,KAAP,CAAaE,SAAb,CAAuB3e,WAAtC,EAAmD,WAAnD,EAAgE4qC,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlF,CAAhB;AACA,IAAM2U,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACrlB,KAAP,CAAaE,SAAb,CAAuB3e,WAA1C,eAAoE4qC,WAAW,CAACtW,KAAZ,CAAkBgB,UAAtF,CAApB;AACA,IAAMiV,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAACrlB,KAAP,CAAaE,SAAb,CAAuB3e,WAA9D,EAA2E,WAA3E,EAAwF4qC,WAAW,CAACtW,KAAZ,CAAkBgB,UAA1G,CAAxC;;AAIA,SAASiX,uBAAT,CAA+B1G,WAA/B,EAA4C;AAC3C,SAAO;AACNz7B,IAAAA,IAAI,EAAEwgC,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BL,GAA7B,CAAiCC,OAAjC,CAAyCC,KADzC;AAEN0Q,IAAAA,WAAW,EAAXA;AAFM,GAAP;AAIA;;;AAID,gBAAe;AACd0E,EAAAA,+BAA+B,EAA/BA,iCADc;AAEdN,EAAAA,WAAW,EAAXA,aAFc;AAGd8B,EAAAA,YAAY,EAAZA,cAHc;AAId/F,EAAAA,UAAU,EAAVA,YAJc;AAKdoG,EAAAA,eAAe,EAAEG,uBALH;AAMd3G,EAAAA,OAAO,EAAPA,SANc;AAOdqG,EAAAA,YAAY,EAAEzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACtW,KAAZ,CAAkBgB,UAAtC;AAPA,CAAf;;ACtBA,kBAAe;AACd5W,EAAAA,cAAc,EAAdA,SADc;AAEdC,EAAAA,SAAS,EAATA;AAFc,CAAf;;ACCA,IAAM+sB,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAAC9M,UAAvB,CAAZ;AACA,IAAMiO,cAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAAC9M,UAAhC,CAArB;AACA,IAAM0O,mBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAAC9M,UAA1C,CAA5B;;AAEA,IAAM2O,uCAAuC,GAAG,SAA1CA,uCAA0C,CAACC,aAAD,EAAmB;AAClE,SAAO,UAAC9I,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI8I,kBAAkB,GAAG7I,MAAM,CAACh6B,UAAP,CAAkB3I,YAAlB,CAA+B0iC,QAAQ,EAAvC,CAAzB;;AACA,QAAI8I,kBAAkB,IAAID,aAA1B,EAAyC;AACxC9I,MAAAA,QAAQ,CAACgJ,wBAAwB,CAACD,kBAAD,EAAqBD,aAArB,CAAzB,CAAR;AACA;AACD,GALD;AAMA,CAPD;;AASA,IAAMG,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACvzB,IAAD,EAAU;AAC1C,SAAO,UAACsqB,QAAD,EAAWC,QAAX,EAAwB;AAC3BD,IAAAA,QAAQ,CAAC4I,mBAAmB,CAAClzB,IAAD,CAApB,CAAR;;AACA,QAAIA,IAAI,CAAClc,IAAT,EAAe;AACXwmC,MAAAA,QAAQ,CAAC8H,KAAG,CAACpyB,IAAI,CAAClc,IAAN,CAAJ,CAAR;AACH;AACJ,GALD;AAMH,CAPD;;;AAUA,SAAS0vC,sBAAT,CAAgCrwC,GAAhC,EAAoC;AAChC,SAAO;AACH2N,IAAAA,IAAI,EAAEwgC,WAAW,CAAC9M,UAAZ,CAAuB3I,KAAvB,CAA6B4I,mBADhC;AAEHthC,IAAAA,GAAG,EAAHA;AAFG,GAAP;AAIH;;AAED,SAASmwC,wBAAT,CAAkCnwC,GAAlC,EAAuCqlB,WAAvC,EAAmD;AAC/C,SAAO;AACH1X,IAAAA,IAAI,EAAEwgC,WAAW,CAAC9M,UAAZ,CAAuB/G,GAAvB,CAA2BgH,mBAA3B,CAA+C1I,IADlD;AAEH54B,IAAAA,GAAG,EAAHA,GAFG;AAGHqlB,IAAAA,WAAW,EAAXA;AAHG,GAAP;AAKH;;AAED,uBAAe;AACd4pB,EAAAA,GAAG,EAAHA,KADc;AAEXoB,EAAAA,sBAAsB,EAAtBA,sBAFW;AAGdL,EAAAA,uCAAuC,EAAvCA,uCAHc;AAIdV,EAAAA,YAAY,EAAZA,cAJc;AAKdS,EAAAA,mBAAmB,EAAnBA,mBALc;AAMXK,EAAAA,2BAA2B,EAA3BA;AANW,CAAf;;AC9BA,IAAMjH,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACx2B,kBAAP,CAA0BC,MAA1B,CAAiCvN,WAAhD,EAA6D,SAA7D,EAAwE4qC,WAAW,CAACrT,oBAAZ,CAAiC2G,MAAzG,EAAiH,MAAjH,CAAhB;AACA,IAAM+N,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACrT,oBAAZ,CAAiC2G,MAArD,CAArB;AACA,IAAM8H,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACx2B,kBAAP,CAA0BC,MAA1B,CAAiCvN,WAAnD,EAAgE,SAAhE,EAA2E4qC,WAAW,CAACrT,oBAAZ,CAAiC2G,MAA5G,EAAoH,MAApH,CAAnB;AACA,IAAMiI,iBAAe,GAAG39B,OAAM,CAAC29B,eAAP,CAAuB,SAAvB,EAAkCyE,WAAW,CAACrT,oBAAZ,CAAiC2G,MAAnE,EAA2E,MAA3E,CAAxB;AACA,IAAMkO,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACrT,oBAAZ,CAAiC2G,MAAxD,CAAxB;AACA,IAAMgO,YAAU,GAAG1jC,OAAM,CAAC0jC,UAAP,CAAkBtB,WAAW,CAACrT,oBAAZ,CAAiC2G,MAAnD,CAAnB;AACA,IAAMyN,QAAQ,GAAGnjC,OAAM,CAACmjC,QAAP,CAAgBf,WAAW,CAACrT,oBAAZ,CAAiC2G,MAAjD,CAAjB;AACA,IAAM0N,aAAa,GAAGpjC,OAAM,CAACojC,aAAP,CAAqBhB,WAAW,CAACrT,oBAAZ,CAAiC2G,MAAtD,CAAtB;;AAKA,SAAS6O,aAAT,CAAuBlyC,MAAvB,EAA+BgrC,WAA/B,EAA4C;AAC3C,SAAO,UAACjC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIuC,gBAAgB,GAAG,EAAvB;AACA,QAAI4G,kBAAkB,GAAGlJ,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCowB,QAAQ,EAAzC,EAA6C,oBAA7C,CAAzB;;AAEA,QAAImJ,kBAAJ,EAAwB;AACvB5G,MAAAA,gBAAgB,CAAC6G,cAAjB,GAAkC;AACjCC,QAAAA,UAAU,EAAE;AACXC,UAAAA,IAAI,EAAEH;AADK,SADqB;AAIjCI,QAAAA,SAAS,EAAE;AAJsB,OAAlC;AAMA;;AAED,WAAOxJ,QAAQ,CAACuC,iBAAe,CAAC,IAAD,EAAOtrC,MAAP,EAAe,IAAf,EAAqBgrC,WAArB,EAAkC,sBAAlC,EAA0DO,gBAA1D,CAAhB,CAAf;AACA,GAdD;AAeA;;;AAID,oBAAe;AACduF,EAAAA,QAAQ,EAARA,QADc;AAEdC,EAAAA,aAAa,EAAbA,aAFc;AAIdmB,EAAAA,aAAa,EAAbA,aAJc;AAKdnH,EAAAA,OAAO,EAAPA,SALc;AAMdqG,EAAAA,YAAY,EAAZA,cANc;AAOdjG,EAAAA,UAAU,EAAVA,YAPc;AAQdoG,EAAAA,eAAe,EAAfA,iBARc;AASdF,EAAAA,UAAU,EAAVA;AATc,CAAf;;ACrCA,IAAMtG,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACx2B,kBAAP,CAA0BtN,WAAzC,EAAsD,SAAtD,EAAiE4qC,WAAW,CAACrT,oBAA7E,EAAmG,aAAnG,CAAhB;AACA,IAAM0U,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACrT,oBAAhC,CAArB;AACA,IAAMmU,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACrT,oBAAvB,CAAZ;;AAIA,+BAAe;AACdhqB,EAAAA,MAAM,EAAE8/B,aADM;AAGd3B,EAAAA,GAAG,EAAHA,KAHc;AAId9F,EAAAA,OAAO,EAAPA,SAJc;AAKdqG,EAAAA,YAAY,EAAZA;AALc,CAAf;;ACJA,IAAME,kBAAkB,GAAG,SAArBA,kBAAqB,CAACtG,WAAD,EAAcloC,cAAd,EAA8B9C,MAA9B,EAAsCC,KAAtC,EAA6C+G,KAA7C,EAAoD/F,MAApD;AAAA,SAA+D0M,OAAM,CAAC2jC,kBAAP,CAA0BvB,WAAW,CAACpT,iBAAtC,EAAyDqO,WAAzD,EAAsEloC,cAAtE,EAAsF9C,MAAtF,EAA8FC,KAA9F,EAAqG+G,KAArG,EAA4G/F,MAA5G,CAA/D;AAAA,CAA3B;;AACA,IAAMoqC,eAAa,GAAG,SAAhBA,aAAgB,CAACrrC,MAAD,EAASC,KAAT,EAAgB+G,KAAhB,EAAuB/F,MAAvB;AAAA,SAAkC0M,OAAM,CAAC09B,aAAP,CAAqBpC,MAAM,CAACl1B,gBAAP,CAAwB5O,WAA7C,EAA0D,SAA1D,EAAqEnF,MAArE,EAA6EC,KAA7E,EAAoF+G,KAApF,EAA2F/F,MAA3F,EAAmG8uC,WAAW,CAACpT,iBAA/G,EAAkI,WAAlI,CAAlC;AAAA,CAAtB;;AACA,IAAMkU,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACpT,iBAAvB,CAAZ;AACA,IAAM6U,kBAAkB,GAAG7jC,OAAM,CAAC6jC,kBAAP,CAA0BzB,WAAW,CAACpT,iBAAtC,CAA3B;;AAEA,SAAS8V,kCAAT,CAA4CzyC,MAA5C,EAAoDC,KAApD,EAA2D+G,KAA3D,EAAkE/F,MAAlE,EAA0E+pC,WAA1E,EAAuF0H,WAAvF,EAAoG;AAChG,SAAO,UAAC3J,QAAD,EAAWC,QAAX,EAAwB;AAC3BD,IAAAA,QAAQ,CAACp7B,OAAM,CAAC09B,aAAP,CAAqBpC,MAAM,CAACl1B,gBAAP,CAAwB5O,WAA7C,EAA0D,SAA1D,EAAqEnF,MAArE,EAA6EC,KAA7E,EAAoF+G,KAApF,EAA2F/F,MAA3F,EAAmG8uC,WAAW,CAACpT,iBAA/G,EAAkI,WAAlI,CAAD,CAAR,CAAyJwL,IAAzJ,CAA8J,YAAM;AAChK,UAAIt0B,iBAAiB,GAAGo1B,MAAM,CAACl1B,gBAAP,CAAwBL,eAAxB,CAAwCs1B,QAAQ,EAAhD,EAAoDhpC,MAApD,CAAxB;;AAEA,UAAI6T,iBAAJ,EAAuB;AACnB,YAAIuS,cAAc,GAAG/Z,yBAAMwH,iBAAN,EAAyB,UAAAJ,QAAQ;AAAA,iBAAIA,QAAQ,CAACK,oBAAb;AAAA,SAAjC,CAArB;;AACA,YAAI6+B,qBAAqB,GAAG3oC,0BAAOoc,cAAP,CAA5B;AAEA;AACA;;;AACA,YAAIusB,qBAAJ,EAA2B;AACvB5J,UAAAA,QAAQ,CAAC6J,wBAAwB,CAAC7H,OAAzB,CAAiC4H,qBAAjC,EAAwD3H,WAAxD,CAAD,CAAR,CAA+E7C,IAA/E,CAAoF,YAAM;AAEzF,WAFD;AAGH;AACJ;AACJ,KAfD,WAeS,UAACuG,GAAD,EAAS;AACd3F,MAAAA,QAAQ,CAACp7B,OAAM,CAACy7B,kBAAP,CAA0BsF,GAA1B,CAAD,CAAR;AACH,KAjBD;AAkBH,GAnBD;AAoBH;;AAED,SAASgB,iCAAT,CAAyC5sC,cAAzC,EAAyD;AACrD,SAAO,UAACimC,QAAD,EAAWC,QAAX,EAAwB;AAE3B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAIp9B,WAAW,GAAGyC,eAAe,CAAC9B,2BAAhB,CAA4C08B,MAAM,CAACl1B,gBAAP,CAAwB5O,WAApE,EAAiFhE,KAAjF,EAAwF2B,cAAxF,CAAlB,CAH2B;;AAM3B,8BAAO8I,WAAP,EAAoB,UAACC,SAAD,EAAe;AAC/B,gCAAOA,SAAS,CAACG,IAAjB,EAAuB,UAACD,GAAD,EAAS;AAC5Bg9B,QAAAA,QAAQ,CAAC0J,kCAAkC,CAAC5mC,SAAS,CAAC7L,MAAX,EAAmB6L,SAAS,CAAC5L,KAA7B,EAAoC8L,GAAG,CAAC/E,KAAxC,EAA+C+E,GAAG,CAAC9K,MAAnD,CAAnC,CAAR;AACH,OAFD;AAGH,KAJD;AAMH,GAZD;AAaH;;;AAKD,6BAAe;AACX4vC,EAAAA,GAAG,EAAHA,KADW;AAEXS,EAAAA,kBAAkB,EAAlBA,kBAFW;AAGXE,EAAAA,kBAAkB,EAAlBA,kBAHW;AAIXnG,EAAAA,aAAa,EAAbA,eAJW;AAMXqE,EAAAA,+BAA+B,EAA/BA;AANW,CAAf;;AClDA,IAAM4B,oBAAkB,GAAG,SAArBA,kBAAqB,CAACtG,WAAD,EAAcloC,cAAd,EAA8B9C,MAA9B,EAAsCC,KAAtC,EAA6C+G,KAA7C,EAAoD/F,MAApD;AAAA,SAA+D0M,OAAM,CAAC2jC,kBAAP,CAA0BvB,WAAW,CAACrV,cAAtC,EAAsDsQ,WAAtD,EAAmEloC,cAAnE,EAAmF9C,MAAnF,EAA2FC,KAA3F,EAAkG+G,KAAlG,EAAyG/F,MAAzG,CAA/D;AAAA,CAA3B;;AACA,IAAMoqC,eAAa,GAAG,SAAhBA,aAAgB,CAACrrC,MAAD,EAASC,KAAT,EAAgB+G,KAAhB,EAAuB/F,MAAvB;AAAA,SAAkC0M,OAAM,CAAC09B,aAAP,CAAqBpC,MAAM,CAAC31B,aAAP,CAAqBnO,WAA1C,EAAuD,MAAvD,EAA+DnF,MAA/D,EAAuEC,KAAvE,EAA8E+G,KAA9E,EAAqF/F,MAArF,EAA6F8uC,WAAW,CAACrV,cAAzG,EAAyH,WAAzH,CAAlC;AAAA,CAAtB;;AACA,IAAMmW,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACrV,cAAvB,CAAZ;AACA,IAAM8W,oBAAkB,GAAG7jC,OAAM,CAAC6jC,kBAAP,CAA0BzB,WAAW,CAACrV,cAAtC,CAA3B;;AAKA,0BAAe;AACdmW,EAAAA,GAAG,EAAHA,KADc;AAEdS,EAAAA,kBAAkB,EAAlBA,oBAFc;AAGdE,EAAAA,kBAAkB,EAAlBA,oBAHc;AAIdnG,EAAAA,aAAa,EAAbA;AAJc,CAAf;;ACRA,IAAMF,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACl0B,WAAP,CAAmB5P,WAArC,EAAkD,SAAlD,EAA6D4qC,WAAW,CAACtT,YAAzE,EAAuF,MAAvF,CAAnB;AAIA;;AAEA,wBAAe;AACd0O,EAAAA,UAAU,EAAVA;AADc,CAAf;;ACPA,IAAMrZ,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAAC1+B,UAAP,CAAkBpF,WAAhC,EAA6C,YAA7C,EAA2D4qC,WAAW,CAAClV,UAAvE,CAAf;AACA,IAAMuU,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAAC1+B,UAAP,CAAkBpF,WAArC,gBAAgE4qC,WAAW,CAAClV,UAA5E,CAApB;AACA,IAAMoP,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAAC1+B,UAAP,CAAkBpF,WAAhC,EAA6C,YAA7C,EAA2D4qC,WAAW,CAAClV,UAAvE,CAAnB;AACA,IAAMgQ,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAAC1+B,UAAP,CAAkBpF,WAApC,EAAiD,YAAjD,EAA+D4qC,WAAW,CAAClV,UAA3E,CAAnB;AACA,IAAM+O,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAAC1+B,UAAP,CAAkBpF,WAAtC,EAAmD4qC,WAAW,CAAClV,UAA/D,CAArB;AACA,IAAMsQ,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC1+B,UAAP,CAAkBpF,WAApC,EAAiD,YAAjD,EAA+D4qC,WAAW,CAAClV,UAA3E,CAAnB;AACA,IAAM0W,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAAClV,UAAnC,CAAxB;AACA,IAAMkQ,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAAC1+B,UAAP,CAAkBpF,WAAjC,EAA8C,YAA9C,EAA4D4qC,WAAW,CAAClV,UAAxE,CAAhB;AACA,IAAMuW,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAAClV,UAAhC,CAArB;AACA,IAAM6U,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAAC1+B,UAAP,CAAkBpF,WAAzD,EAAsE,YAAtE,EAAoF4qC,WAAW,CAAClV,UAAhG,CAAxC;AACA,IAAM8W,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAAClV,UAA1C,CAA5B;AACA,IAAMyQ,iBAAe,GAAG39B,OAAM,CAAC29B,eAAP,CAAuB,YAAvB,EAAqCyE,WAAW,CAAClV,UAAjD,EAA6D,MAA7D,CAAxB;AAEA,IAAM6Q,mCAAiC,GAAG/9B,OAAM,CAAC+9B,iCAAP,CAAyCqE,WAAW,CAAClV,UAArD,EAAiE,WAAjE,CAA1C;;AAEA,SAASqW,cAAT,CAAsBtvC,GAAtB,EAA2B;AAC1B,SAAO,UAAAmnC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC2C,mCAAiC,CAAC9pC,GAAD,CAAlC,CAAR;AACA,GAFD;AAGA;;AAED,SAASixC,iBAAT,CAA2B7yC,MAA3B,EAAmCgrC,WAAnC,EAAgD;AAC/C,SAAO,UAACjC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,WAAOD,QAAQ,CAACuC,iBAAe,CAAC,IAAD,EAAOtrC,MAAP,EAAe,IAAf,EAAqBgrC,WAArB,EAAkC,wBAAlC,CAAhB,CAAf;AACA,GAFD;AAGA;;;AAID,gBAAe;AACdlZ,EAAAA,MAAM,EAANA,QADc;AAEd,YAAQmY,YAFM;AAGdyF,EAAAA,+BAA+B,EAA/BA,iCAHc;AAIdiC,EAAAA,mBAAmB,EAAnBA,qBAJc;AAMdvC,EAAAA,WAAW,EAAXA,aANc;AAQdvE,EAAAA,UAAU,EAAVA,YARc;AASdqG,EAAAA,YAAY,EAAZA,cATc;AAWdtH,EAAAA,YAAY,EAAZA,cAXc;AAYduB,EAAAA,UAAU,EAAVA,YAZc;AAadoG,EAAAA,eAAe,EAAfA,iBAbc;AAcdxG,EAAAA,OAAO,EAAPA,SAdc;AAedqG,EAAAA,YAAY,EAAZA,cAfc;AAgBd9F,EAAAA,eAAe,EAAfA,iBAhBc;AAkBduH,EAAAA,iBAAiB,EAAjBA;AAlBc,CAAf;;AC5BA,IAAM1H,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC/xB,aAAP,CAAqB/R,WAAvC,EAAoD,WAApD,EAAiE4qC,WAAW,CAAC1T,cAA7E,EAA6F,MAA7F,CAAnB;AACA,IAAMkV,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAAC1T,cAAnC,CAAxB;AACA,IAAMiP,iBAAe,GAAG39B,OAAM,CAAC29B,eAAP,CAAuB,WAAvB,EAAoCyE,WAAW,CAAC1T,cAAhD,EAAgE,MAAhE,CAAxB;;AAEA,SAASyW,gBAAT,CAA0B9yC,MAA1B,EAAkCgrC,WAAlC,EAA+C;AAC9C,SAAO,UAACjC,QAAD;AAAA,WAAcA,QAAQ,CAACuC,iBAAe,CAAC,IAAD,EAAOtrC,MAAP,EAAe,IAAf,EAAqBgrC,WAArB,EAAkC,wBAAlC,CAAhB,CAAtB;AAAA,GAAP;AACA;;;AAID,gBAAe;AACXG,EAAAA,UAAU,EAAVA,YADW;AAEXoG,EAAAA,eAAe,EAAfA,iBAFW;AAGXuB,EAAAA,gBAAgB,EAAhBA;AAHW,CAAf;;ACXA,IAAMvB,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACzM,oBAAnC,CAAxB;AACA,IAAMgI,iBAAe,GAAG39B,OAAM,CAAC29B,eAAP,CAAuB,WAAvB,EAAoCyE,WAAW,CAACzM,oBAAhD,EAAsE,WAAtE,CAAxB;;AAEA,SAASwP,kBAAT,CAA0B9yC,MAA1B,EAAkCgrC,WAAlC,EAA+C;AAC9C,SAAO,UAACjC,QAAD;AAAA,WAAcA,QAAQ,CAACuC,iBAAe,CAAC,IAAD,EAAOtrC,MAAP,EAAe,IAAf,EAAqBgrC,WAArB,EAAkC,wBAAlC,CAAhB,CAAtB;AAAA,GAAP;AACA;;;AAID,gBAAe;AACXuG,EAAAA,eAAe,EAAfA,iBADW;AAEXuB,EAAAA,gBAAgB,EAAhBA;AAFW,CAAf;;ACRA,IAAM/H,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACj6B,oBAAP,CAA4B7J,WAA3C,EAAwD,WAAxD,EAAqE4qC,WAAW,CAACxT,sBAAjF,EAAyG,aAAzG,CAAhB;AACA,IAAM6U,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACxT,sBAAhC,CAArB;;AAGA,gBAAe;AACXwO,EAAAA,OAAO,EAAPA,SADW;AAEXqG,EAAAA,YAAY,EAAZA;AAFW,CAAf;;ACGA,IAAME,oBAAkB,GAAG,SAArBA,kBAAqB,CAACtG,WAAD,EAAcloC,cAAd,EAA8B9C,MAA9B,EAAsCC,KAAtC,EAA6C+G,KAA7C,EAAoD/F,MAApD;AAAA,SAA+D0M,OAAM,CAAC2jC,kBAAP,CAA0BvB,WAAW,CAACvT,mBAAtC,EAA2DwO,WAA3D,EAAwEloC,cAAxE,EAAwF9C,MAAxF,EAAgGC,KAAhG,EAAuG+G,KAAvG,EAA8G/F,MAA9G,CAA/D;AAAA,CAA3B;;AACA,IAAMkqC,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC/yB,kBAAP,CAA0B/Q,WAA5C,EAAyD,WAAzD,EAAsE4qC,WAAW,CAACvT,mBAAlF,EAAuG,WAAvG,CAAnB;AACA,IAAMgV,oBAAkB,GAAG7jC,OAAM,CAAC6jC,kBAAP,CAA0BzB,WAAW,CAACvT,mBAAtC,CAA3B;;AACA,IAAM6O,eAAa,GAAG,SAAhBA,aAAgB,CAACrrC,MAAD,EAASC,KAAT,EAAgB+G,KAAhB,EAAuB/F,MAAvB;AAAA,SAAkC0M,OAAM,CAAC09B,aAAP,CAAqBpC,MAAM,CAAC/yB,kBAAP,CAA0B/Q,WAA/C,EAA4D,WAA5D,EAAyEnF,MAAzE,EAAiFC,KAAjF,EAAwF+G,KAAxF,EAA+F/F,MAA/F,EAAuG8uC,WAAW,CAACvT,mBAAnH,EAAwI,WAAxI,CAAlC;AAAA,CAAtB;;;AAIA,SAASuW,qBAAT,CAA+B/yC,MAA/B,EAAuCC,KAAvC,EAA8C+G,KAA9C,EAAqD/F,MAArD,EAA6D+pC,WAA7D,EAA0E0H,WAA1E,EAAuF;AACnF,SAAO,UAAC3J,QAAD,EAAWC,QAAX,EAAwB;AAC3BD,IAAAA,QAAQ,CAACp7B,OAAM,CAAC09B,aAAP,CAAqBpC,MAAM,CAAC/yB,kBAAP,CAA0B/Q,WAA/C,EAA4D,WAA5D,EAAyEnF,MAAzE,EAAiFC,KAAjF,EAAwF+G,KAAxF,EAA+F/F,MAA/F,EAAuG8uC,WAAW,CAACvT,mBAAnH,EAAwI,WAAxI,CAAD,CAAR,CAA+J2L,IAA/J,CAAoK,YAAM;AACzK,UAAIt0B,iBAAiB,GAAGo1B,MAAM,CAAC/yB,kBAAP,CAA0BW,oBAA1B,CAA+CmyB,QAAQ,EAAvD,EAA2DhpC,MAA3D,CAAxB;;AAEA,UAAI6T,iBAAJ,EAAuB;AACtB,YAAIuS,cAAc,GAAG/Z,yBAAMwH,iBAAN,EAAyB,UAAAJ,QAAQ;AAAA,iBAAIA,QAAQ,CAAC+C,sBAAb;AAAA,SAAjC,CAArB;;AACN,YAAIJ,aAAa,GAAG/J,yBAAMwH,iBAAN,EAAyB,UAAAJ,QAAQ;AAAA,iBAAIA,QAAQ,CAACvP,YAAb;AAAA,SAAjC,CAApB;;AAEA,YAAI8uC,cAAc,GAAG,IAArB;AACA,YAAIC,uBAAuB,GAAG,EAA9B;AAEAp/B,QAAAA,iBAAiB,CAAClN,GAAlB,CAAsB,UAAA8M,QAAQ,EAAI;AACjCu/B,UAAAA,cAAc,GAAGv/B,QAAQ,CAAC3E,aAA1B,CADiC;;AAEjCmkC,UAAAA,uBAAuB,CAACvxC,IAAxB,CAA6B+R,QAAQ,CAAC+C,sBAAtC;AACA,SAHD;;AAKA,YAAI08B,4BAA4B,GAAGlpC,0BAAOipC,uBAAP,CAAnC;;AAEA,YAAIE,mBAAmB,GAAG;AACzBrkC,UAAAA,aAAa,EAAEkkC,cADU;AAEzBx8B,UAAAA,sBAAsB,EAAE;AAAC,kBAAI08B;AAAL;AAFC,SAA1B;AAKA,YAAIE,gBAAgB,GAAG;AACtBC,UAAAA,UAAU,EAAEC,mBAAU,CAACC,mBADD;AAEtB/8B,UAAAA,sBAAsB,EAAE;AAAC,kBAAI08B;AAAL;AAFF,SAAvB;AAMA;;AACA,YAAI98B,aAAa,IAAIA,aAAa,CAACnV,MAAnC,EAA2C;AAC1C,cAAIuyC,UAAU,GAAGxpC,0BAAOoM,aAAP,CAAjB;;AACA2yB,UAAAA,QAAQ,CAAC0K,SAAgB,CAAC1I,OAAjB,CAAyByI,UAAzB,EAAqCxI,WAArC,CAAD,CAAR;AACA;AAED;;;AACAjC,QAAAA,QAAQ,CAAC2K,SAA2B,CAAC3I,OAA5B,CAAoC3kB,cAApC,EAAoD4kB,WAApD,CAAD,CAAR;AAEA;;AACA;;AACA,YAAI2I,wBAAwB,GAAG1K,MAAM,CAACvkB,mBAAP,CAA2B7d,qBAA3B,CAAiDmiC,QAAQ,EAAzD,EAA6DoK,gBAA7D,EAA+E,IAA/E,CAA/B;;AACA,YAAI,CAACV,WAAD,IAAgB,CAACiB,wBAArB,EAA+C;AAC9C5K,UAAAA,QAAQ,CAAC6K,SAAiB,CAACd,gBAAlB,CAAmCM,gBAAnC,EAAqDpI,WAArD,CAAD,CAAR;AACA;AAED;;;AACA,YAAI6I,cAAc,GAAG5K,MAAM,CAAC/xB,aAAP,CAAqBrQ,qBAArB,CAA2CmiC,QAAQ,EAAnD,EAAuDmK,mBAAvD,EAA4E,IAA5E,CAArB;;AACA,YAAI,CAACU,cAAL,EAAqB;AACpB9K,UAAAA,QAAQ,CAAC+K,SAAoB,CAAChB,gBAArB,CAAsCK,mBAAtC,EAA2DnI,WAA3D,CAAD,CAAR;AACA;AACD;AACK,KAlDD,WAkDS,UAAC0D,GAAD,EAAS;AACjB3F,MAAAA,QAAQ,CAACp7B,OAAM,CAACy7B,kBAAP,CAA0BsF,GAA1B,CAAD,CAAR;AACA,KApDD;AAqDH,GAtDD;AAuDH;;AAED,SAASgB,iCAAT,CAAyC5sC,cAAzC,EAAyD;AACrD,SAAO,UAACimC,QAAD,EAAWC,QAAX,EAAwB;AAE3B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAIp9B,WAAW,GAAGyC,eAAe,CAAC9B,2BAAhB,CAA4C08B,MAAM,CAAC/yB,kBAAP,CAA0B/Q,WAAtE,EAAmFhE,KAAnF,EAA0F2B,cAA1F,CAAlB,CAH2B;;AAM3B,8BAAO8I,WAAP,EAAoB,UAACC,SAAD,EAAe;AAC/B,gCAAOA,SAAS,CAACG,IAAjB,EAAuB,UAACD,GAAD,EAAS;AAC5Bg9B,QAAAA,QAAQ,CAACgK,qBAAqB,CAAClnC,SAAS,CAAC7L,MAAX,EAAmB6L,SAAS,CAAC5L,KAA7B,EAAoC8L,GAAG,CAAC/E,KAAxC,EAA+C+E,GAAG,CAAC9K,MAAnD,CAAtB,CAAR,CAD4B;AAG/B,OAHD;AAIH,KALD;AAOH,GAbD;AAcH;;;AAKD,gBAAe;AACdkqC,EAAAA,UAAU,EAAVA,YADc;AAEdqG,EAAAA,kBAAkB,EAAlBA,oBAFc;AAGXF,EAAAA,kBAAkB,EAAlBA,oBAHW;AAIXjG,EAAAA,aAAa,EAAbA,eAJW;AAKXqE,EAAAA,+BAA+B,EAA/BA,iCALW;AAOX;AACAqD,EAAAA,qBAAqB,EAArBA;AARW,CAAf;;AC3FA,IAAMlC,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAAC1L,MAAvB,CAAZ;AACA,IAAM8G,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC94B,MAAP,CAAchL,WAAhC,EAA6C,QAA7C,EAAuD4qC,WAAW,CAAC1L,MAAnE,CAAnB;AACA,IAAM0G,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAAC94B,MAAP,CAAchL,WAA7B,EAA0C,QAA1C,EAAoD4qC,WAAW,CAAC1L,MAAhE,CAAhB;AACA,IAAM+M,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAAC1L,MAAhC,CAArB;AACA,IAAMsN,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAAC1L,MAA1C,CAA5B;AAIA;;AACA,IAAM2N,6BAA2B,GAAG,SAA9BA,2BAA8B,CAACvzB,IAAD,EAAU;AAC1C,SAAO,UAACsqB,QAAD,EAAWC,QAAX,EAAwB;AAC3BD,IAAAA,QAAQ,CAAC4I,qBAAmB,CAAClzB,IAAD,CAApB,CAAR;;AACA,QAAIA,IAAI,CAAClc,IAAT,EAAe;AACXwmC,MAAAA,QAAQ,CAAC8H,KAAG,CAACpyB,IAAI,CAAClc,IAAN,CAAJ,CAAR;AACH;AACJ,GALD;AAMH,CAPD;;AASA,oBAAe;AACdsuC,EAAAA,GAAG,EAAHA,KADc;AAEd1F,EAAAA,UAAU,EAAVA,YAFc;AAGdJ,EAAAA,OAAO,EAAPA,SAHc;AAIdqG,EAAAA,YAAY,EAAZA,cAJc;AAKdO,EAAAA,mBAAmB,EAAnBA,qBALc;AAMXK,EAAAA,2BAA2B,EAA3BA;AANW,CAAf;;ICJO5I,uBAAsB2K,QAAtB3K;AAEP,IAAMqI,UAAU,GAAGsC,OAAa,CAACtC,UAAd,CAAyB1B,WAAW,CAAC7R,IAArC,CAAnB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA,IAAM8V,eAAe,GAAG,SAAlBA,eAAkB,CAAC53B,MAAD,EAAY;AACnC,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG63B,QAAH,EAAa;AACZ,UAAMr4B,YAAY,GAAGqtB,MAAM,CAAC7tB,eAAP,CAAuBO,eAAvB,CAAuCxa,KAAvC,CAArB;;AACA,UAAGib,MAAM,KAAKR,YAAd,EAA4B;AAC3BmtB,QAAAA,QAAQ,CAACmL,qBAAqB,CAAC93B,MAAD,CAAtB,CAAR;;AACA,YAAM+3B,WAAW,GAAGlL,MAAM,CAAC7tB,eAAP,CAAuBe,iBAAvB,CAAyChb,KAAzC,EAAgDib,MAAhD,CAApB;;AACA,YAAG+3B,WAAH,EAAgB;AACfpL,UAAAA,QAAQ,CAACqL,eAAe,CAACD,WAAW,CAACvyC,GAAb,CAAhB,CAAR;AACA;AACD;AACD,KATD,MASO;AACN,aAAOmnC,QAAQ,CAACK,oBAAkB,8BAAuBhtB,MAAvB,wDAAnB,CAAf;AACA;AACD,GAfD;AAgBA,CAjBD;;AAmBA,IAAMi4B,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACj4B,MAAD,EAAY;AACzC,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI1sB,GAAG,GAAG2sB,MAAM,CAAC7tB,eAAP,CAAuBe,iBAAvB,CAAyC6sB,QAAQ,EAAjD,EAAqD5sB,MAArD,CAAV;;AACA,QAAIE,GAAJ,EAAS;AACRysB,MAAAA,QAAQ,CAACuL,2BAA2B,CAACh4B,GAAG,CAAC1a,GAAL,EAAUwa,MAAV,CAA5B,CAAR;AACA;AACD,GALD;AAMA,CAPD;;AASA,IAAMg4B,eAAe,GAAG,SAAlBA,eAAkB,CAACrpB,MAAD,EAAY;AACnC,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAGwpB,QAAH,EAAa;AACZ,UAAM74B,YAAY,GAAGutB,MAAM,CAAC7tB,eAAP,CAAuBK,eAAvB,CAAuCta,KAAvC,CAArB;;AACA,UAAG4pB,MAAM,KAAKrP,YAAd,EAA4B;AAC3B,eAAOqtB,QAAQ,CAACyL,qBAAqB,CAACzpB,MAAD,CAAtB,CAAf;AACA;AACD,KALD,MAKO;AACN,aAAOge,QAAQ,CAACK,oBAAkB,8BAAuBre,MAAvB,wDAAnB,CAAf;AACA;AACD,GAXD;AAYA,CAbD;;AAeA,IAAM0pB,MAAM,GAAG,SAATA,MAAS,CAACn4B,GAAD,EAAS;AACvB,SAAO,UAACysB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,QAAMje,MAAM,GAAGzO,GAAG,CAAC1a,GAAnB;;AACA,QAAG,CAACmpB,MAAJ,EAAY;AACX,aAAOge,QAAQ,CAACK,oBAAkB,oCAA6B9sB,GAA7B,EAAnB,CAAf;AACA,KAFD,MAEO;AACN,UAAMi4B,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,UAAGwpB,QAAH,EAAa;AACZ,eAAOxL,QAAQ,CAACK,oBAAkB,kCAA2Bre,MAA3B,8BAAqDwpB,QAArD,EAAnB,CAAf;AACA,OAFD,MAEO;AACNxL,QAAAA,QAAQ,CAAC2L,YAAY,CAACp4B,GAAD,CAAb,CAAR,CADM;;AAGN,YAAMZ,YAAY,GAAGutB,MAAM,CAAC7tB,eAAP,CAAuBK,eAAvB,CAAuCta,KAAvC,CAArB;;AACA,YAAG,CAACua,YAAJ,EAAkB;AACjBqtB,UAAAA,QAAQ,CAACyL,qBAAqB,CAACzpB,MAAD,CAAtB,CAAR;AACA;AACD;AACD;AAED,GAnBD;AAoBA,CArBD;AAuBA;AACA;AACA;AACA;;;AACA,IAAM4pB,eAAe,GAAG,SAAlBA,eAAkB,CAACC,gBAAD,EAAmBrpB,OAAnB,EAA4BtJ,qBAA5B,EAAsD;AAC7E,SAAO,UAAC8mB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB,CAD8B;;AAG9B,QAAM6L,cAAc,GAAG5L,MAAM,CAACrf,UAAP,CAAkBhjB,gBAAlB,CAAmCzF,KAAnC,EAA0CyzC,gBAA1C,EAA4D,IAA5D,CAAvB;;AAEA,QAAGC,cAAH,EAAmB;AAClB;AACA;AACA,UAAMC,UAAU,GAAGD,cAAc,CAACA,cAAc,CAAC5zC,MAAf,GAAwB,CAAzB,CAAjC,CAHkB;;AAMlB,UAAG6zC,UAAU,IAAIA,UAAU,CAACvyC,IAAzB,IAAiCuyC,UAAU,CAACvyC,IAAX,CAAgBwyC,SAAjD,IAA8DD,UAAU,CAACvyC,IAAX,CAAgBwyC,SAAhB,CAA0B9zC,MAA1B,GAAmC,CAApG,EAAuG;AACtG,YAAM+zC,kBAAkB,GAAGF,UAAU,CAACvyC,IAAX,CAAgBwyC,SAA3C;AACAhM,QAAAA,QAAQ,CAACkM,aAAa,CAACD,kBAAD,EAAqB,QAArB,EAA+BzpB,OAA/B,EAAwCtJ,qBAAxC,CAAd,CAAR;AACA8mB,QAAAA,QAAQ,CAACkM,aAAa,CAACD,kBAAD,EAAqB,kBAArB,EAAyCzpB,OAAzC,EAAkDtJ,qBAAlD,CAAd,CAAR;AACA;AACD;AACD,GAjBD;AAkBA,CAnBD;;AAqBA,IAAMgzB,aAAa,GAAG,SAAhBA,aAAgB,CAACC,UAAD,EAAaC,kBAAb,EAAiC5pB,OAAjC,EAA0CtJ,qBAA1C,EAAoE;AACzF,SAAO,UAAC8mB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB,CAD8B;;AAI9B,QAAMoM,SAAS,GAAGC,kBAAS,CAACC,gBAAV,CAA2BJ,UAAU,CAAC,CAAD,CAAV,CAAcC,kBAAd,CAA3B,CAAlB;AACA,QAAMI,aAAa,GAAGH,SAAS,CAACp1C,MAAV,CAAiB,UAACoS,CAAD;AAAA,aAAOA,CAAC,CAACojC,OAAT;AAAA,KAAjB,CAAtB,CAL8B;;AAO9B,QAAMC,iBAAiB,GAAGF,aAAa,CAAC5uC,GAAd,CAAkB,UAAAyL,CAAC;AAAA,aAAIA,CAAC,CAACxQ,GAAN;AAAA,KAAnB,CAA1B;;AAGA,QAAG2pB,OAAH,EAAY;AACXA,MAAAA,OAAO,CAAC/pB,OAAR,CAAgB,UAAC4a,MAAD,EAAY;AAE3B;AACA,YAAM1N,WAAW,GAAGu6B,MAAM,CAAC7tB,eAAP,CAAuB4G,iCAAvB,CAAyD7gB,KAAzD,EAAgEib,MAAhE,EAAwE6F,qBAAxE,CAApB,CAH2B;;;AAM3B,YAAMyzB,qBAAqB,GAAGhnC,WAAW,GAAG+mC,iBAAiB,CAACz1C,MAAlB,CAAyB,UAAC21C,EAAD;AAAA,iBAAQ,CAACjnC,WAAW,CAACknC,IAAZ,CAAiB,UAAAC,EAAE;AAAA,mBAAIA,EAAE,CAAC9nC,KAAH,IAAY8nC,EAAE,CAAC9nC,KAAH,CAAS5J,aAAT,KAA2BwxC,EAA3C;AAAA,WAAnB,CAAT;AAAA,SAAzB,CAAH,GAA0GF,iBAAnJ;AACAC,QAAAA,qBAAqB,CAACl0C,OAAtB,CAA8B,UAAC+M,QAAD,EAAc;AAC3C,cAAMunC,MAAM,GAAGT,kBAAS,CAACU,cAAV,CAAyBb,UAAU,CAAC,CAAD,CAAnC,EAAwC3mC,QAAxC,CAAf;AACA,cAAMR,KAAK,GAAG;AAAC5J,YAAAA,aAAa,EAAEoK;AAAhB,WAAd;;AAEA,kBAAQ4mC,kBAAR;AACC,iBAAK,kBAAL;AACC,qBAAOpM,QAAQ,CAACiN,qBAAqB,CAAC55B,MAAD,EAASrO,KAAT,CAAtB,CAAf;;AACD,iBAAK,QAAL;AACC,qBAAOg7B,QAAQ,CAACkN,QAAQ,CAAC75B,MAAD,EAASrO,KAAT,EAAgB+nC,MAAhB,EAAwB7zB,qBAAxB,CAAT,CAAf;;AACD;AACC,qBAAO8mB,QAAQ,CAACkN,QAAQ,CAAC75B,MAAD,EAASrO,KAAT,EAAgB+nC,MAAhB,EAAwB7zB,qBAAxB,CAAT,CAAf;AANF;AAQA,SAZD;AAaA,OApBD;AAqBA;AACD,GAjCD;AAkCA,CAnCD;;AAqCA,IAAMi0B,SAAS,GAAG,SAAZA,SAAY,CAACnrB,MAAD,EAAY;AAC7B,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,mCAA4Bre,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAOge,QAAQ,CAACoN,eAAe,CAACprB,MAAD,CAAhB,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMqrB,WAAW,GAAG,SAAdA,WAAc,CAACrrB,MAAD,EAAS3O,MAAT,EAAoB;AACvC,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,mCAA4Bre,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN;AACA,UAAIwpB,QAAQ,CAACj5B,IAAT,IAAiBi5B,QAAQ,CAACj5B,IAAT,CAAc5Y,QAAd,CAAuB0Z,MAAvB,CAArB,EAAqD;AACpD,eAAO2sB,QAAQ,CAACK,oBAAkB,eAAQre,MAAR,mCAAuC3O,MAAvC,OAAnB,CAAf;AACA,OAFD,MAEO;AACN2sB,QAAAA,QAAQ,CAACsN,iBAAiB,CAACtrB,MAAD,EAAS3O,MAAT,CAAlB,CAAR,CADM;;AAGN,YAAMR,YAAY,GAAGqtB,MAAM,CAAC7tB,eAAP,CAAuBiD,qBAAvB,CAA6Cld,KAA7C,EAAoD4pB,MAApD,CAArB;;AACA,YAAG,CAACnP,YAAJ,EAAkB;AACjBmtB,UAAAA,QAAQ,CAACsL,qBAAqB,CAACj4B,MAAD,CAAtB,CAAR;AACA;AAED;AACD;AACD,GAnBD;AAoBA,CArBD;;AAuBA,IAAMk6B,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACvrB,MAAD,EAAS3O,MAAT,EAAoB;AAC/C,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,mCAA4Bre,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN;AACA,UAAIwpB,QAAQ,CAACj5B,IAAT,IAAiBi5B,QAAQ,CAACj5B,IAAT,CAAc5Y,QAAd,CAAuB0Z,MAAvB,CAArB,EAAqD;AACpD,YAAMR,YAAY,GAAGqtB,MAAM,CAAC7tB,eAAP,CAAuBiD,qBAAvB,CAA6Cld,KAA7C,EAAoD4pB,MAApD,CAArB;;AACAge,QAAAA,QAAQ,CAACwN,yBAAyB,CAACxrB,MAAD,EAAS3O,MAAT,CAA1B,CAAR;;AAEA,YAAIR,YAAY,KAAKQ,MAArB,EAA6B;AAC5B,cAAMo6B,aAAa,GAAGvN,MAAM,CAAC7tB,eAAP,CAAuBmB,gBAAvB,CAAwCysB,QAAQ,EAAhD,EAAoDje,MAApD,CAAtB;;AACA,cAAIyrB,aAAJ,EAAmB;AAClBzN,YAAAA,QAAQ,CAACuL,2BAA2B,CAACvpB,MAAD,EAASyrB,aAAa,CAAC,CAAD,CAAtB,CAA5B,CAAR;AACA;AACD;AACD,OAVD,MAUO;AACN,eAAOzN,QAAQ,CAACK,oBAAkB,eAAQre,MAAR,kCAAsC3O,MAAtC,OAAnB,CAAf;AACA;AACD;AACD,GArBD;AAsBA,CAvBD;;AAyBA,IAAMq6B,UAAU,GAAG,SAAbA,UAAa,CAAC1rB,MAAD,EAAStM,IAAT,EAAkB;AACpC,SAAO,UAACsqB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,mCAA4Bre,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAOge,QAAQ,CAAC2N,gBAAgB,CAAC3rB,MAAD,EAAStM,IAAT,CAAjB,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMk4B,UAAU,GAAG,SAAbA,UAAa,CAAC5rB,MAAD,EAASrM,IAAT,EAAkB;AACpC,SAAO,UAACqqB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,mCAA4Bre,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAOge,QAAQ,CAAC6N,gBAAgB,CAAC7rB,MAAD,EAASrM,IAAT,CAAjB,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMm4B,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC9rB,MAAD,EAAY;AACvC,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAI8N,OAAO,GAAG7N,MAAM,CAAC7tB,eAAP,CAAuBmB,gBAAvB,CAAwCpb,KAAxC,EAA+C4pB,MAA/C,CAAd;;AACA,QAAIzP,IAAI,GAAG2tB,MAAM,CAAC7tB,eAAP,CAAuBC,eAAvB,CAAuCla,KAAvC,CAAX;;AACA,QAAImJ,OAAO,GAAG2+B,MAAM,CAAC3+B,OAAP,CAAe9E,cAAf,CAA8BrE,KAA9B,CAAd;;AACA,QAAI21C,OAAO,IAAIx7B,IAAX,IAAmBhR,OAAvB,EAAgC;AAC/B,UAAIysC,eAAe,GAAGD,OAAO,CAACnwC,GAAR,CAAY,UAAAyV,MAAM,EAAI;AAC3C,YAAIzV,GAAG,GAAGwN,+BAAYmH,IAAI,CAACc,MAAD,CAAhB,CAAV;;AACA,YAAItY,SAAS,GAAG6C,GAAG,IAAIA,GAAG,CAACpE,IAAX,IAAmBoE,GAAG,CAACpE,IAAJ,CAASqa,iBAA5B,IAAiDjW,GAAG,CAACpE,IAAJ,CAASqa,iBAAT,CAA2BhZ,MAA5F;;AACA,YAAIE,SAAS,IAAIwG,OAAO,CAACxG,SAAD,CAAxB,EAAqC;AACpC6C,UAAAA,GAAG,CAACpE,IAAJ,CAASqa,iBAAT,CAA2BhZ,MAA3B,GAAoC0G,OAAO,CAACxG,SAAD,CAAP,CAAmBvB,IAAnB,CAAwBqB,MAAxB,IAAkC0G,OAAO,CAACxG,SAAD,CAAP,CAAmBvB,IAAnB,CAAwBkO,WAA9F;AACA;;AACD,eAAO9J,GAAP;AACA,OAPqB,CAAtB;;AASA,UAAIowC,eAAe,IAAIA,eAAe,CAAC91C,MAAvC,EAA+C;AAC9C,YAAI+1C,sBAAsB,GAAGC,6BAAUF,eAAV,EAA2B,CAAC,+BAAD,CAA3B,EAA8D,CAAC,KAAD,CAA9D,CAA7B;;AACA,YAAIG,cAAc,GAAGF,sBAAsB,CAACrwC,GAAvB,CAA2B,UAAAA,GAAG;AAAA,iBAAIA,GAAG,CAAC/E,GAAR;AAAA,SAA9B,CAArB;AACAmnC,QAAAA,QAAQ,CAACoO,gBAAgB,CAACpsB,MAAD,EAASmsB,cAAT,CAAjB,CAAR;AACA;AACD;AACD,GArBD;AAsBA,CAvBD;;AAyBA,IAAME,MAAM,GAAG,SAATA,MAAS,CAACzwC,GAAD,EAAS;AACvB,SAAO,UAACoiC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAGriC,GAAG,IAAI,CAACA,GAAG,CAAC/E,GAAf,EAAoB;AACnB,aAAOmnC,QAAQ,CAACK,oBAAkB,oCAA6BziC,GAA7B,EAAnB,CAAf;AACA,KAFD,MAEO;AACN,UAAMxF,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,UAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0CwF,GAAG,CAAC/E,GAA9C,CAAjB;;AAEA,UAAIqyC,QAAJ,EAAc;AACb,eAAOlL,QAAQ,CAACK,oBAAkB,kCAA2BziC,GAAG,CAAC/E,GAA/B,8BAAsDqyC,QAAtD,EAAnB,CAAf;AACA,OAFD,MAEO;AACN,eAAOlL,QAAQ,CAACsO,YAAY,CAAC1wC,GAAD,CAAb,CAAf;AACA;AACD;AACD,GAbD;AAcA,CAfD;;AAiBA,IAAM2wC,eAAe,GAAG,SAAlBA,eAAkB,CAACxzC,SAAD,EAAYinB,MAAZ,EAAuB;AAC9C,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAIriC,GAAG,GAAGsiC,MAAM,CAAC7tB,eAAP,CAAuB0F,2BAAvB,CAAmD3f,KAAnD,EAA0D;AAACyC,MAAAA,MAAM,EAAEE;AAAT,KAA1D,CAAV;;AAEA,QAAI,CAAC6C,GAAL,EAAU;AACT,UAAIyV,MAAM,GAAGqc,cAAK,CAACmY,IAAN,EAAb;AACAjqC,MAAAA,GAAG,GAAG;AACL/E,QAAAA,GAAG,EAAEwa,MADA;AAEL7Z,QAAAA,IAAI,EAAE;AACLqa,UAAAA,iBAAiB,EAAE;AAClBhZ,YAAAA,MAAM,EAAEE;AADU;AADd;AAFD,OAAN;AAQAilC,MAAAA,QAAQ,CAACqO,MAAM,CAACzwC,GAAD,CAAP,CAAR;AACA;;AAEDoiC,IAAAA,QAAQ,CAACqN,WAAW,CAACrrB,MAAD,EAASpkB,GAAG,CAAC/E,GAAb,CAAZ,CAAR;AACAmnC,IAAAA,QAAQ,CAAC8N,mBAAmB,CAAC9rB,MAAD,CAApB,CAAR;AACA,GAnBD;AAoBA,CArBD;;AAuBA,IAAMwsB,SAAS,GAAG,SAAZA,SAAY,CAACn7B,MAAD,EAAY;AAC7B,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,UAAMo7B,OAAO,GAAGvO,MAAM,CAAC7tB,eAAP,CAAuBW,UAAvB,CAAkC5a,KAAlC,CAAhB;;AACA,UAAIq2C,OAAJ,EAAa;AACZ,kCAAOA,OAAP,EAAgB,UAAAt1B,MAAM,EAAI;AACzB,cAAMu1B,YAAY,GAAGpkC,8BAAW6O,MAAM,CAAC5G,IAAlB,EAAwBc,MAAxB,CAArB;;AACA,cAAIq7B,YAAJ,EAAkB;AACjB1O,YAAAA,QAAQ,CAACuN,mBAAmB,CAACp0B,MAAM,CAACtgB,GAAR,EAAawa,MAAb,CAApB,CAAR;AACA;AACD,SALD;AAMA;;AACD2sB,MAAAA,QAAQ,CAAC2O,eAAe,CAACt7B,MAAD,CAAhB,CAAR;AACA;AACD,GAjBD;AAkBA,CAnBD;;AAqBA,IAAMu7B,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC7zC,SAAD,EAAYinB,MAAZ,EAAuB;AACjD,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMriC,GAAG,GAAGsiC,MAAM,CAAC7tB,eAAP,CAAuB0F,2BAAvB,CAAmD3f,KAAnD,EAA0D;AAACyC,MAAAA,MAAM,EAAEE;AAAT,KAA1D,CAAZ;;AACA,QAAG,CAAC6C,GAAJ,EAAS;AACRoiC,MAAAA,QAAQ,CAACK,oBAAkB,mCAA4BtlC,SAA5B,OAAnB,CAAR;AACA,KAFD,MAEO;AACNilC,MAAAA,QAAQ,CAACwO,SAAS,CAAC5wC,GAAG,CAAC/E,GAAL,CAAV,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMg2C,UAAU,GAAG,SAAbA,UAAa,CAACx7B,MAAD,EAAS5L,IAAT,EAAkB;AACpC,SAAO,UAACu4B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAO2sB,QAAQ,CAAC8O,gBAAgB,CAACz7B,MAAD,EAAS5L,IAAT,CAAjB,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMsnC,UAAU,GAAG,SAAbA,UAAa,CAAC17B,MAAD,EAAS7Z,IAAT,EAAkB;AACpC,SAAO,UAACwmC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAO2sB,QAAQ,CAACgP,gBAAgB,CAAC37B,MAAD,EAAS7Z,IAAT,CAAjB,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMy1C,UAAU,GAAG,SAAbA,UAAa,CAAC57B,MAAD,EAASqC,IAAT,EAAkB;AACpC,SAAO,UAACsqB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAO2sB,QAAQ,CAACkP,gBAAgB,CAAC77B,MAAD,EAASqC,IAAT,CAAjB,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMw3B,QAAQ,GAAG,SAAXA,QAAW,CAAC75B,MAAD,EAASrO,KAAT,EAAgB7N,KAAhB,EAAuB+hB,qBAAvB,EAAiD;AACjE,SAAO,UAAC8mB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAI,CAACj7B,KAAK,CAACnM,GAAX,EAAe;AACdmM,MAAAA,KAAK,CAACnM,GAAN,GAAY62B,cAAK,CAACmY,IAAN,EAAZ;AACA;;AACD,QAAMqD,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAACmP,cAAc,CAAC97B,MAAD,EAASrO,KAAT,EAAgB7N,KAAhB,CAAf,CAAR;AACA6oC,MAAAA,QAAQ,CAACh9B,GAAG,CAACqQ,MAAD,EAAS6F,qBAAT,CAAJ,CAAR;AACA;AACD,GAZD;AAaA,CAdD;;AAgBA,IAAMk2B,SAAS,GAAG,SAAZA,SAAY,CAAC/7B,MAAD,EAASlM,MAAT,EAAoB;AACrC,SAAO,UAAC64B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAOlM,MAAM,CAACvJ,GAAP,CAAW,UAAAoH,KAAK;AAAA,eAAIg7B,QAAQ,CAACkN,QAAQ,CAAC75B,MAAD,EAASrO,KAAT,CAAT,CAAZ;AAAA,OAAhB,CAAP;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMqqC,WAAW,GAAG,SAAdA,WAAc,CAACh8B,MAAD,EAAS7N,QAAT,EAAsB;AACzC,SAAO,UAACw6B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAG,CAACz6B,QAAJ,EAAc;AACb,aAAOw6B,QAAQ,CAACK,oBAAkB,wBAAnB,CAAf;AACA,KAFD,MAEO;AACN,UAAMjoC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,UAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,UAAG,CAAC63B,QAAJ,EAAc;AACb,eAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,OAFD,MAEO;AACN;AACA,YAAMrO,KAAK,GAAGk7B,MAAM,CAAC7tB,eAAP,CAAuB+B,8BAAvB,CAAsDhc,KAAtD,EAA6Dib,MAA7D,EAAqE7N,QAArE,CAAd;;AACA,YAAGR,KAAH,EAAU;AACT,iBAAOg7B,QAAQ,CAACsP,iBAAiB,CAACj8B,MAAD,EAAS7N,QAAT,CAAlB,CAAf;AACA,SAFD,MAEO;AACN,iBAAOw6B,QAAQ,CAACK,oBAAkB,qBAAc76B,QAAd,+BAA2C6N,MAA3C,OAAnB,CAAf;AACA;AACD;AACD;AACD,GAlBD;AAmBA,CApBD;;AAsBA,IAAMk8B,YAAY,GAAG,SAAfA,YAAe,CAACl8B,MAAD,EAASm8B,UAAT,EAAwB;AAC5C,SAAO,UAACxP,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAOm8B,UAAU,CAAC5xC,GAAX,CAAe,UAAA4H,QAAQ;AAAA,eAAIw6B,QAAQ,CAACqP,WAAW,CAACh8B,MAAD,EAAS7N,QAAT,CAAZ,CAAZ;AAAA,OAAvB,CAAP;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMiqC,aAAa,GAAG,SAAhBA,aAAgB,CAACp8B,MAAD,EAAS7N,QAAT,EAAmBrO,KAAnB,EAA6B;AAClD,SAAO,UAAC6oC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAAC0P,mBAAmB,CAACr8B,MAAD,EAAS7N,QAAT,EAAmBrO,KAAnB,CAApB,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMw4C,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACt8B,MAAD,EAAS7N,QAAT,EAAmBoqC,kBAAnB,EAA0C;AAC5E,SAAO,UAAC5P,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAM4P,QAAQ,GAAG3P,MAAM,CAAC7tB,eAAP,CAAuB+B,8BAAvB,CAAsDhc,KAAtD,EAA6Dib,MAA7D,EAAqE7N,QAArE,CAAjB;;AACA,QAAIqqC,QAAJ,EAAc;AACb,UAAMC,QAAQ,GAAGD,QAAQ,IAAIA,QAAQ,CAACzpC,OAArB,IAAgCypC,QAAQ,CAACzpC,OAAT,CAAiB2pC,OAAjD,IAA4DF,QAAQ,CAACzpC,OAAT,CAAiB2pC,OAAjB,CAAyBtxC,IAAtG;;AAEA,UAAIqxC,QAAJ,EAAc;AACb,YAAME,cAAc,GAAG14C,IAAI,CAACC,SAAL,CAAe6M,4BAAS0rC,QAAT,CAAf,CAAvB;AACA,YAAMG,cAAc,GAAG34C,IAAI,CAACC,SAAL,CAAe6M,4BAASwrC,kBAAT,CAAf,CAAvB;;AACA,YAAII,cAAc,KAAKC,cAAvB,EAAuC;AACtCjQ,UAAAA,QAAQ,CAACkQ,mCAAmC,CAAC78B,MAAD,EAAS7N,QAAT,EAAmBoqC,kBAAnB,CAApC,CAAR;AACA;AACD,OAND,MAMO;AACN5P,QAAAA,QAAQ,CAACkQ,mCAAmC,CAAC78B,MAAD,EAAS7N,QAAT,EAAmBoqC,kBAAnB,CAApC,CAAR;AACA;AACD,KAZD;AAAA,SAeK;AACJ,YAAIr8B,GAAG,GAAG2sB,MAAM,CAAC7tB,eAAP,CAAuBe,iBAAvB,CAAyChb,KAAzC,EAAgDib,MAAhD,CAAV;AAOA;AACD,GA3BD;AA4BA,CA7BD;;;AAgCA,IAAM88B,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAC98B,MAAD,EAAS7N,QAAT,EAAmB4qC,mBAAnB,EAA2C;AAC9E,SAAO,UAACpQ,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAM4P,QAAQ,GAAG3P,MAAM,CAAC7tB,eAAP,CAAuB+B,8BAAvB,CAAsDhc,KAAtD,EAA6Dib,MAA7D,EAAqE7N,QAArE,CAAjB;;AACA,QAAMujC,kBAAkB,GAAG7I,MAAM,CAACh6B,UAAP,CAAkB3I,YAAlB,CAA+BnF,KAA/B,CAA3B;AACA,QAAMi4C,YAAY,GAAGtH,kBAAkB,IAAIrZ,cAAK,CAACmY,IAAN,EAA3C,CAJ8B;;AAO9B,QAAI,CAACkB,kBAAL,EAAyB;AACxB,UAAMuH,gBAAgB,GAAG;AACxBz3C,QAAAA,GAAG,EAAEw3C,YADmB;AAExB72C,QAAAA,IAAI,EAAE;AACL+2C,UAAAA,MAAM,EAAE,SADH;AAEL;AACAroC,UAAAA,iBAAiB,EAAE;AAClBzJ,YAAAA,IAAI,EAAE2xC;AADY;AAHd;AAFkB,OAAzB;AAUApQ,MAAAA,QAAQ,CAACwQ,gBAAgB,CAAC1I,GAAjB,CAAqB,CAACwI,gBAAD,CAArB,CAAD,CAAR;AACAtQ,MAAAA,QAAQ,CAACwQ,gBAAgB,CAACrI,YAAjB,CAA8BkI,YAA9B,CAAD,CAAR;AACA,KAbD,MAaO;AACNrQ,MAAAA,QAAQ,CAACwQ,gBAAgB,CAAC3H,uCAAjB,CAAyDuH,mBAAzD,CAAD,CAAR;AACA,KAtB6B;AAyB9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,GAtCD;AAuCA,CAxCD;AA0CA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMK,WAAW,GAAG,SAAdA,WAAc,CAACp9B,MAAD,EAAS7N,QAAT,EAAmBR,KAAnB,EAA6B;AAChD,SAAO,UAACg7B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN;AACA,UAAMq9B,WAAW,GAAGxQ,MAAM,CAAC7tB,eAAP,CAAuB+B,8BAAvB,CAAsDhc,KAAtD,EAA6Dib,MAA7D,EAAqE7N,QAArE,CAApB;;AACA,UAAGkrC,WAAH,EAAgB;AACf1Q,QAAAA,QAAQ,CAAC2Q,iBAAiB,CAACt9B,MAAD,EAAS7N,QAAT,EAAmBR,KAAnB,CAAlB,CAAR;AACA,OAFD,MAEO;AACN,eAAOg7B,QAAQ,CAACK,oBAAkB,qBAAc76B,QAAd,+BAA2C6N,MAA3C,OAAnB,CAAf;AACA;AACD;AACD,GAdD;AAeA,CAhBD;;AAkBA,IAAMu9B,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACv9B,MAAD,EAAS7N,QAAT,EAAmBQ,KAAnB,EAA6B;AAClD,SAAO,UAACg6B,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACV,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACH,KAFD,MAEO;AACH;AACA,UAAMq9B,WAAW,GAAGxQ,MAAM,CAAC7tB,eAAP,CAAuB+B,8BAAvB,CAAsDhc,KAAtD,EAA6Dib,MAA7D,EAAqE7N,QAArE,CAApB;;AACA,UAAGkrC,WAAH,EAAgB;AACZ1Q,QAAAA,QAAQ,CAAC6Q,sBAAsB,CAACx9B,MAAD,EAAS7N,QAAT,EAAmBQ,KAAnB,CAAvB,CAAR;AACH,OAFD,MAEO;AACH,eAAOg6B,QAAQ,CAACK,oBAAkB,qBAAc76B,QAAd,+BAA2C6N,MAA3C,OAAnB,CAAf;AACH;AACJ;AACJ,GAdD;AAeH,CAhBD;AAmBA;AACA;AACA;AACA;AACA;;;AACA,IAAMy9B,cAAc,GAAG,SAAjBA,cAAiB,CAACz9B,MAAD,EAAS7N,QAAT,EAAmBR,KAAnB,EAA6B;AACnD,SAAO,UAACg7B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN;AACA,UAAMq9B,WAAW,GAAGxQ,MAAM,CAAC7tB,eAAP,CAAuB+B,8BAAvB,CAAsDhc,KAAtD,EAA6Dib,MAA7D,EAAqE7N,QAArE,CAApB;;AACA,UAAGkrC,WAAH,EAAgB;AACf1Q,QAAAA,QAAQ,CAAC+Q,oBAAoB,CAAC19B,MAAD,EAAS7N,QAAT,EAAmBR,KAAnB,CAArB,CAAR;AACA,OAFD,MAEO;AACN,eAAOg7B,QAAQ,CAACK,oBAAkB,qBAAc76B,QAAd,+BAA2C6N,MAA3C,OAAnB,CAAf;AACA;AACD;AACD,GAdD;AAeA,CAhBD;;AAkBA,IAAM29B,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC39B,MAAD,EAASnU,MAAT,EAAoB;AAC/C,SAAO,UAAC8gC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI1sB,GAAG,GAAG2sB,MAAM,CAAC7tB,eAAP,CAAuBe,iBAAvB,CAAyC6sB,QAAQ,EAAjD,EAAqD5sB,MAArD,CAAV;;AACA,QAAI49B,MAAM,GAAG,IAAb;AACA,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAI39B,GAAG,IAAIA,GAAG,CAACoC,IAAf,EAAqB;AACpB;AACAs7B,MAAAA,MAAM,GAAGz0C,4BAAS0C,MAAT,EAAiB,UAACiyC,SAAD,EAAYC,SAAZ,EAA0B;AACnD,eAAO79B,GAAG,CAACoC,IAAJ,CAASy7B,SAAT,CAAP;AACA,OAFQ,CAAT;AAIAF,MAAAA,MAAM,GAAGt7B,4BAAS1W,MAAT,EAAiB,UAACiyC,SAAD,EAAYC,SAAZ,EAA0B;AACnD,eAAO79B,GAAG,CAACoC,IAAJ,CAASy7B,SAAT,CAAP;AACA,OAFQ,CAAT;AAGA,KATD,MASO;AACNF,MAAAA,MAAM,GAAGhyC,MAAT;AACA;;AAED,QAAI+xC,MAAM,IAAI,CAACx5C,6BAAUw5C,MAAV,CAAf,EAAkC;AACjC;AACAA,MAAAA,MAAM,GAAGj7B,YAAQ,CAACN,IAAT,CAAc27B,mBAAd,CAAkCJ,MAAlC,CAAT,CAFiC;;AAGjCjR,MAAAA,QAAQ,CAACsR,mBAAmB,CAAC/9B,GAAG,CAAC1a,GAAL,EAAUo4C,MAAV,CAApB,CAAR;AACA;;AAED,QAAIC,MAAM,IAAI,CAACz5C,6BAAUy5C,MAAV,CAAf,EAAkC;AACjC;AACAA,MAAAA,MAAM,GAAGl7B,YAAQ,CAACN,IAAT,CAAc27B,mBAAd,CAAkCH,MAAlC,CAAT,CAFiC;;AAGjClR,MAAAA,QAAQ,CAACuR,mBAAmB,CAACl+B,MAAD,EAAS69B,MAAT,CAApB,CAAR;AACA;AACD,GA7BD;AA8BA,CA/BD;;AAiCA,IAAMM,aAAa,GAAG,SAAhBA,aAAgB,CAACxvB,MAAD,EAAS9iB,MAAT,EAAoB;AACzC,SAAO,UAAC8gC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIptB,YAAY,GAAGqtB,MAAM,CAAC7tB,eAAP,CAAuBiD,qBAAvB,CAA6C2qB,QAAQ,EAArD,EAAyDje,MAAzD,CAAnB;;AACAge,IAAAA,QAAQ,CAACgR,mBAAmB,CAACn+B,YAAD,EAAe3T,MAAf,CAApB,CAAR;AACA,GAHD;AAIA,CALD;;AAOA,IAAMuyC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACp+B,MAAD,EAAY;AACpC,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMvqB,IAAI,GAAGwqB,MAAM,CAAC7tB,eAAP,CAAuBmD,OAAvB,CAA+ByqB,QAAQ,EAAvC,EAA2C5sB,MAA3C,CAAb;;AACA2C,IAAAA,YAAQ,CAAC07B,YAAT,CAAsBh8B,IAAI,CAACzD,OAA3B,EAAoC,UAAAA,OAAO;AAAA,aAAI+tB,QAAQ,CAACgR,mBAAmB,CAAC39B,MAAD,EAAS;AAACpB,QAAAA,OAAO,EAAPA;AAAD,OAAT,CAApB,CAAZ;AAAA,KAA3C;AACA,GAHD;AAIA,CALD;;AAOA,IAAM0/B,WAAW,GAAG,SAAdA,WAAc,CAACt+B,MAAD,EAAS/Y,KAAT,EAAmB;AACtC,SAAO,UAAC0lC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAAC4R,iBAAiB,CAACv+B,MAAD,EAAS/Y,KAAT,CAAlB,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMu3C,cAAc,GAAG,SAAjBA,cAAiB,CAACx+B,MAAD,EAAShR,QAAT,EAAsB;AAC5C,SAAO,UAAC29B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAAC8R,oBAAoB,CAACz+B,MAAD,EAAShR,QAAT,CAArB,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAM0vC,YAAY,GAAG,SAAfA,YAAe,CAAC1+B,MAAD,EAASxY,MAAT,EAAoB;AACxC,SAAO,UAACmlC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAACgS,kBAAkB,CAAC3+B,MAAD,EAASxY,MAAT,CAAnB,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMo3C,WAAW,GAAG,SAAdA,WAAc,CAAC5+B,MAAD,EAAS5Y,KAAT,EAAmB;AACtC,SAAO,UAACulC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAACkS,iBAAiB,CAAC7+B,MAAD,EAAS5Y,KAAT,CAAlB,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAM03C,UAAU,GAAG,SAAbA,UAAa,CAAC9+B,MAAD,EAAShZ,OAAT,EAAqB;AACvC,SAAO,UAAC2lC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAACoS,gBAAgB,CAAC/+B,MAAD,EAAShZ,OAAT,CAAjB,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAM4yC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC55B,MAAD,EAASK,eAAT,EAA6B;AAC1D,SAAO,UAACssB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAIvsB,eAAe,IAAI,CAACA,eAAe,CAAC7a,GAAxC,EAA4C;AAC3C6a,MAAAA,eAAe,CAAC7a,GAAhB,GAAsB62B,cAAK,CAACmY,IAAN,EAAtB;AACA;;AACD,QAAMqD,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAACqS,2BAA2B,CAACh/B,MAAD,EAASK,eAAT,CAA5B,CAAR;AACAssB,MAAAA,QAAQ,CAACsS,cAAc,CAACj/B,MAAD,CAAf,CAAR;AACA;AACD,GAZD;AAaA,CAdD;AAeA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMk/B,YAAY,GAAG,SAAfA,YAAe,CAACl/B,MAAD,EAASlM,MAAT,EAAoB;AACxC,SAAO,UAAC64B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN2sB,MAAAA,QAAQ,CAACwS,kBAAkB,CAACn/B,MAAD,EAASlM,MAAT,CAAnB,CAAR;AACA64B,MAAAA,QAAQ,CAACh9B,GAAG,CAACqQ,MAAD,CAAJ,CAAR;AACA;AACD,GATD;AAUA,CAXD;;AAaA,IAAMo/B,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACzwB,MAAD,EAAStO,eAAT,EAA6B;AAC1D,SAAO,UAACssB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,uCAAgCre,MAAhC,OAAnB,CAAf;AACA,KAFD,MAEO;AACNge,MAAAA,QAAQ,CAAC0S,2BAA2B,CAAC1wB,MAAD,EAAStO,eAAT,CAA5B,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMi/B,YAAY,GAAG,SAAfA,YAAe,CAAC3wB,MAAD,EAAS7a,MAAT,EAAoB;AACrC,SAAO,UAAC64B,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACV,aAAOxL,QAAQ,CAACK,oBAAkB,uCAAgCre,MAAhC,OAAnB,CAAf;AACH,KAFD,MAEO;AACHge,MAAAA,QAAQ,CAAC4S,kBAAkB,CAAC5wB,MAAD,EAAS7a,MAAT,CAAnB,CAAR;AACH;AACJ,GARD;AASH,CAVD;;AAYA,SAASnE,GAAT,CAAaqQ,MAAb,EAAqBK,eAArB,EAAsCvM,MAAtC,EAA8C;AAC7C,SAAO,UAAC64B,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC6S,QAAQ,CAACx/B,MAAD,CAAT,CAAR;AACA,QAAIjb,KAAK,GAAG6nC,QAAQ,EAApB,CAF8B;;AAK9B,QAAIvsB,eAAe,IAAIvM,MAAvB,EAA+B;AAC9B,UAAIuM,eAAJ,EAAqB;AACpBA,QAAAA,eAAe,qCAAOA,eAAP;AAAwB7a,UAAAA,GAAG,EAAE;AAA7B,UAAf;AACAsO,QAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACAA,QAAAA,MAAM,IAAIuM,eAAJ,4BAAwBvM,MAAxB,EAAN;AACA;AACD,KAND,MAMO;AACNA,MAAAA,MAAM,GAAG+4B,MAAM,CAAC7tB,eAAP,CAAuBgD,yBAAvB,CAAiDjd,KAAjD,EAAwDib,MAAxD,CAAT;AACA;;AAED,QAAIvZ,UAAU,GAAGwL,eAAe,CAACtH,gBAAhB,CAAiC5F,KAAjC,CAAjB;;AAEA,QAAI+O,MAAJ,EAAY;AACX,UAAM86B,WAAW,iBAAU5uB,MAAV,CAAjB;AACAlM,MAAAA,MAAM,CAAC1O,OAAP,CAAe,UAAAuM,KAAK,EAAI;AACvB,YAAI/N,MAAM,sBAAO+N,KAAK,CAAC6O,iBAAb,CAAV;;AACA,YAAI7O,KAAK,CAAC1J,gBAAV,EAA4B;AAC3BrE,UAAAA,MAAM,CAACqE,gBAAP,GAA0B0J,KAAK,CAAC1J,gBAAhC;AACA0kC,UAAAA,QAAQ,CAAC8S,oBAAoB,CAAC9Q,OAArB,CAA6B,CAACh9B,KAAK,CAAC1J,gBAAP,CAA7B,EAAuD2mC,WAAvD,CAAD,CAAR;AACA,SAHD,MAGO,IAAIj9B,KAAK,CAACzC,gBAAV,EAA4B;AAClCtL,UAAAA,MAAM,CAACsL,gBAAP,GAA0ByC,KAAK,CAACzC,gBAAhC;AACAy9B,UAAAA,QAAQ,CAAC+S,WAAW,CAACj4B,cAAZ,CAA2BknB,OAA3B,CAAmC,CAACh9B,KAAK,CAACzC,gBAAP,CAAnC,EAA6D0/B,WAA7D,CAAD,CAAR;AACA;;AAED,YAAIloC,cAAc,GAAGiL,KAAK,CAACjL,cAAN,IAAwB,IAA7C;AACA,YAAImE,YAAY,GAAGZ,aAAa,CAACzD,YAAd,CAA2BC,UAA3B,EAAuCC,cAAvC,EAAuD9C,MAAvD,CAAnB;AAGA;;AACA,YAAI+N,KAAK,CAAC1J,gBAAN,IAA0B0J,KAAK,CAACzC,gBAAhC,IAAoDrE,YAAY,CAAC5C,gBAArE,EAAuF;AACtF,cAAI6rC,MAAJ,EAAY6L,MAAZ;;AACA,cAAIhuC,KAAK,CAAC1J,gBAAN,IAA0B4C,YAAY,CAAC5C,gBAA3C,EAA6D;AAC5D6rC,YAAAA,MAAM,GAAG8L,sBAAT;AACAD,YAAAA,MAAM,GAAG9S,MAAM,CAACl1B,gBAAhB;AACA,WAHD,MAGO,IAAIhG,KAAK,CAACzC,gBAAV,EAA4B;AAClC4kC,YAAAA,MAAM,GAAG+L,mBAAT;AACAF,YAAAA,MAAM,GAAG9S,MAAM,CAAC31B,aAAhB;AACA;;AACDy1B,UAAAA,QAAQ,CAACmH,MAAM,CAACoB,kBAAP,CAA0BtG,WAA1B,EAAuCloC,cAAvC,EAAuD9C,MAAvD,EAA+D,IAA/D,EAAqE,CAArE,EAAwE,IAAxE,CAAD,CAAR;AACA+oC,UAAAA,QAAQ,CAACmH,MAAM,CAAC7E,aAAP,CAAqBpkC,YAArB,EAAmC,IAAnC,EAAyC,CAAzC,EAA4C,IAA5C,CAAD,CAAR,CAA4DkhC,IAA5D,CAAiE,YAAM;AACtE;AACA,gBAAM30B,SAAS,GAAGuoC,MAAM,CAACroC,eAAP,CAAuBs1B,QAAQ,EAA/B,EAAmC/hC,YAAnC,CAAlB;;AACA,gBAAIuM,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,kBAAMi7C,cAAc,GAAG1oC,SAAS,CAAC7M,GAAV,CAAc,UAAA8M,QAAQ,EAAI;AAChD,uBAAO;AACNK,kBAAAA,oBAAoB,EAAEL,QAAQ,CAACK,oBADzB;AAENhF,kBAAAA,aAAa,EAAE2E,QAAQ,CAAC3E;AAFlB,iBAAP;AAIA,eALsB,CAAvB;;AAMA,kBAAMqtC,sBAAsB,GAAGnyC,0BAAOkyC,cAAc,CAACv1C,GAAf,CAAmB,UAAA3G,MAAM;AAAA,uBAAIA,MAAM,CAAC8T,oBAAX;AAAA,eAAzB,CAAP,CAA/B;;AAEAi1B,cAAAA,QAAQ,CAAC6J,wBAAwB,CAAC7H,OAAzB,CAAiCoR,sBAAjC,EAAyDnR,WAAzD,CAAD,CAAR,CAAgF7C,IAAhF,CAAqF,YAAM;AAC1F,oBAAM/yB,WAAW,GAAG6zB,MAAM,CAACx2B,kBAAP,CAA0B/K,SAA1B,CAAoCshC,QAAQ,EAA5C,EAAgDmT,sBAAhD,CAApB;;AACA,oBAAI/mC,WAAJ,EAAiB;AAChBA,kBAAAA,WAAW,CAAC5T,OAAZ,CAAoB,UAAAqN,UAAU,EAAI;AAEjC;AACA,wBAAIA,UAAU,IAAIA,UAAU,CAACtM,IAAzB,IAAiCsM,UAAU,CAACtM,IAAX,CAAgBgN,IAAhB,KAAyB,QAA9D,EAAwE;AACvE,0BAAM+c,aAAa,GAAGnsB,0BAAO+7C,cAAP,EAAuB;AAACpoC,wBAAAA,oBAAoB,EAAEjF,UAAU,CAACjN;AAAlC,uBAAvB,CAAtB;;AACAmnC,sBAAAA,QAAQ,CAACqT,iBAAiB,CAACjR,UAAlB,CAA6B,IAA7B,EAAmC7e,aAAnC,EAAkD,IAAlD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D0e,WAA9D,CAAD,CAAR;AACA;AACD,mBAPD;AAQA;AACD,eAZD;AAaA;AACD,WA1BD;AA2BA,SApDsB;AAwDvB;AACA;;;AACA,YAAIj9B,KAAK,CAACqI,aAAV,EAAyB;AACxB2yB,UAAAA,QAAQ,CAACsT,SAAgB,CAACtR,OAAjB,CAAyBh9B,KAAK,CAACqI,aAA/B,EAA8C40B,WAA9C,CAAD,CAAR;;AAEA,cAAIr8B,eAAe,qCACfZ,KAAK,CAACuuC,0BADS;AAElBp4C,YAAAA,YAAY,EAAE;AACb,oBAAI6J,KAAK,CAACqI;AADG;AAFI,YAAnB;;AAOA,cAAIrI,KAAK,CAAC1J,gBAAV,EAA4B;AAC3BsK,YAAAA,eAAe,CAACtK,gBAAhB,GAAmC0J,KAAK,CAAC1J,gBAAzC;AACA,WAFD,MAEO,IAAI0J,KAAK,CAACzC,gBAAV,EAA4B;AAClCqD,YAAAA,eAAe,CAACrD,gBAAhB,GAAmCyC,KAAK,CAACzC,gBAAzC;AACA;;AAED,cAAIixC,uBAAuB,GAAGxuC,KAAK,CAACwuC,uBAAN,IAAiC,IAA/D;AACA,cAAIC,qBAAqB,GAAGn2C,aAAa,CAACzD,YAAd,CAA2BC,UAA3B,EAAuC05C,uBAAvC,EAAgE5tC,eAAhE,CAA5B;AAEAo6B,UAAAA,QAAQ,CAAC0T,SAAwB,CAACnL,kBAAzB,CAA6CtG,WAA7C,EAA0DuR,uBAA1D,EAAmF5tC,eAAnF,EAAoG,IAApG,EAA0G,CAA1G,EAA6G,IAA7G,CAAD,CAAR;AACAo6B,UAAAA,QAAQ,CAAC0T,SAAwB,CAACpR,aAAzB,CAAuCmR,qBAAvC,EAA8D,IAA9D,EAAoE,CAApE,EAAuE,IAAvE,CAAD,CAAR,CAAuFrU,IAAvF,CAA4F,YAAM;AACjG;AACA,gBAAM30B,SAAS,GAAGy1B,MAAM,CAAC/yB,kBAAP,CAA0BpP,UAA1B,CAAqCkiC,QAAQ,EAA7C,EAAiDuT,uBAAjD,EAA0E5tC,eAA1E,EAA2F,IAA3F,EAAiG,CAAjG,EAAoG,IAApG,CAAlB;;AACA,gBAAI6E,SAAS,IAAIA,SAAS,CAACvS,MAA3B,EAAmC;AAClC,kBAAMmkB,OAAO,GAAG5R,SAAS,CAAC7M,GAAV,CAAc,UAAA8M,QAAQ,EAAI;AAAC,uBAAO;AACjD+C,kBAAAA,sBAAsB,EAAE/C,QAAQ,CAAClR,IAAT,IAAiBkR,QAAQ,CAAClR,IAAT,CAAciU,sBADN;AAEjD1H,kBAAAA,aAAa,EAAE2E,QAAQ,CAAClR,IAAT,IAAiBkR,QAAQ,CAAClR,IAAT,CAAcuM;AAFG,iBAAP;AAGzC,eAHc,CAAhB;AAIA,kBAAM4tC,eAAe,GAAGt3B,OAAO,CAACze,GAAR,CAAY,UAAA3G,MAAM;AAAA,uBAAIA,MAAM,CAACwW,sBAAX;AAAA,eAAlB,CAAxB;AAEAuyB,cAAAA,QAAQ,CAAC4T,SAA0B,CAAC5R,OAA3B,CAAmC2R,eAAnC,EAAoD1R,WAApD,CAAD,CAAR,CAA2E7C,IAA3E,CAAgF,YAAM;AACrF,oBAAM/yB,WAAW,GAAG6zB,MAAM,CAACj6B,oBAAP,CAA4BtH,SAA5B,CAAsCshC,QAAQ,EAA9C,EAAkD0T,eAAlD,CAApB;;AACA,oBAAItnC,WAAJ,EAAiB;AAEhB,sBAAIgR,cAAc,GAAG,EAArB;AACAhR,kBAAAA,WAAW,CAAC5T,OAAZ,CAAoB,UAAAqN,UAAU,EAAI;AACjCuX,oBAAAA,cAAc,CAAC1kB,IAAf,CAAoBmN,UAAU,CAACjN,GAA/B;AACA,mBAFD,EAHgB;;AAQhB,sBAAM5B,OAAM,GAAG;AACdwW,oBAAAA,sBAAsB,EAAE;AACvB,4BAAI4P;AADmB,qBADV;AAIdtX,oBAAAA,aAAa,EAAE0E,SAAS,CAAC,CAAD,CAAT,CAAajR,IAAb,CAAkBuM;AAJnB,mBAAf;AAMAi6B,kBAAAA,QAAQ,CAAC6T,SAAmB,CAACzR,UAApB,CAA+B,IAA/B,EAAqCnrC,OAArC,EAA6C,IAA7C,EAAmD,CAAnD,EAAsD,CAAtD,EAAyDgrC,WAAzD,CAAD,CAAR;AAEA;AACD,eAnBD;AAoBA;AACD,WA/BD;AAiCA;;AAED,YAAIj9B,KAAK,CAACkL,QAAV,EAAoB;AACnB8vB,UAAAA,QAAQ,CAAC8T,aAAY,CAAC9R,OAAb,CAAqB,CAACh9B,KAAK,CAACkL,QAAP,CAArB,EAAsC+xB,WAAtC,CAAD,CAAR;AACA;AACD,OApHD;AAqHA;AACD,GAzID;AA0IA;;AAED,SAAS4Q,QAAT,CAAkBx/B,MAAlB,EAA0B;AACzB,SAAO,UAAC2sB,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACgL,OAAa,CAACxC,eAAd,CAA8BxB,WAAW,CAACpT,iBAA1C,gBAAoEvgB,MAApE,EAAD,CAAR;AACA2sB,IAAAA,QAAQ,CAACgL,OAAa,CAAC3C,YAAd,CAA2BrB,WAAW,CAACrT,oBAAvC,gBAAoEtgB,MAApE,EAAD,CAAR;AACA2sB,IAAAA,QAAQ,CAACgL,OAAa,CAAC3C,YAAd,CAA2BrB,WAAW,CAACpS,eAAvC,gBAA+DvhB,MAA/D,EAAD,CAAR;AACA2sB,IAAAA,QAAQ,CAACgL,OAAa,CAAC3C,YAAd,CAA2BrB,WAAW,CAACtW,KAAZ,CAAkBC,gBAA7C,gBAAsEtd,MAAtE,EAAD,CAAR;AACA2sB,IAAAA,QAAQ,CAACgL,OAAa,CAAC3C,YAAd,CAA2BrB,WAAW,CAAC1L,MAAvC,gBAAsDjoB,MAAtD,EAAD,CAAR;AACA,GAND;AAOA;;AAED,SAASu1B,qBAAT,CAA6BpvC,IAA7B,EAAmC;AAClC,SAAO,UAAAwmC,QAAQ,EAAI;AAClB,QAAIxmC,IAAJ,EAAU;AACTwmC,MAAAA,QAAQ,CAAC+T,YAAY,CAACv6C,IAAD,CAAb,CAAR;AACA;AACD,GAJD;AAKA;;AAED,SAASw6C,SAAT,CAAmBC,WAAnB,EAAgC;AAC/B,SAAO,UAACjU,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIgU,WAAW,IAAIA,WAAW,CAAC/7C,MAA/B,EAAuC;AACtC8d,MAAAA,YAAQ,CAACk+B,0BAAT,CAAoCD,WAApC,EAAiD7U,IAAjD,CAAsD,UAAA+U,QAAQ,EAAI;AACjE,YAAIA,QAAJ,EAAc;AACb,cAAI9gC,MAAM,GAAG6sB,MAAM,CAAC7tB,eAAP,CAAuBO,eAAvB,CAAuCqtB,QAAQ,EAA/C,CAAb;;AACAD,UAAAA,QAAQ,CAACgR,mBAAmB,CAAC39B,MAAD,EAAS8gC,QAAT,CAApB,CAAR,CAFa;;AAKb,cAAIC,eAAe,GAAG;AACrB57B,YAAAA,KAAK,EAAE27B,QAAQ,CAACriC,QADK;AAErBuiC,YAAAA,cAAc,EAAE;AACfC,cAAAA,QAAQ,EAAEH,QAAQ,CAACxiC,MAAT,CAAgBC,GADX;AAEf2iC,cAAAA,SAAS,EAAEJ,QAAQ,CAACxiC,MAAT,CAAgBE;AAFZ;AAFK,WAAtB;AAOAmuB,UAAAA,QAAQ,CAACwU,mCAAmC,CAACnhC,MAAD,EAAQ+gC,eAAR,CAApC,CAAR,CAZa;AAab;AACD,OAfD;AAgBA;AACD,GAnBD;AAoBA;AAED;AACA;AACA;;;AAEA,SAAS9B,cAAT,CAAwBj/B,MAAxB,EAAgC6F,qBAAhC,EAAuD;AACtD,SAAO,UAAC8mB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;;AACA,QAAI94B,MAAM,GAAG+4B,MAAM,CAAC7tB,eAAP,CAAuB4G,iCAAvB,CAAyD7gB,KAAzD,EAAgEib,MAAhE,EAAwE6F,qBAAxE,CAAb;;AACA,QAAIxF,eAAe,GAAGwsB,MAAM,CAAC7tB,eAAP,CAAuB0G,0CAAvB,CAAkE3gB,KAAlE,EAAyEib,MAAzE,CAAtB;;AACA,QAAI2N,WAAW,GAAG,EAAlB;;AAEA,QAAItN,eAAJ,EAAqB;AACpBsN,MAAAA,WAAW,CAACroB,IAAZ,CAAiB+a,eAAjB;AACA;;AAED,QAAIvM,MAAJ,EAAY;AACX6Z,MAAAA,WAAW,GAAGA,WAAW,CAACgjB,MAAZ,CAAmB78B,MAAnB,CAAd;AACA;;AAED,QAAI6Z,WAAW,CAAC9oB,MAAhB,EAAwB;AACvB,UAAM+pC,WAAW,iBAAU5uB,MAAV,CAAjB;AAEA2N,MAAAA,WAAW,CAACvoB,OAAZ,CAAoB,UAAA4jB,OAAO,EAAI;AAE9B;AACA,YAAM8C,sBAAsB,GAAG/T,+BAAYiR,OAAO,CAACne,YAApB,CAA/B;;AACA,YAAMu2C,8BAA8B,GAAErpC,+BAAYiR,OAAO,CAACtiB,cAApB,CAAtC;;AAEA,YAAIolB,sBAAsB,CAACpkB,SAA3B,EAAsC;AACrC,iBAAOokB,sBAAsB,CAACpkB,SAA9B;AACA;;AAED,YAAIokB,sBAAsB,CAAChkB,YAA3B,EAAyC;AACxC,iBAAOgkB,sBAAsB,CAAChkB,YAA9B;AACA;;AAED,YAAIs5C,8BAA8B,CAACx5C,SAAnC,EAA8C;AAC7C,iBAAOw5C,8BAA8B,CAACx5C,SAAtC;AACA;;AAGD+kC,QAAAA,QAAQ,CAACiT,sBAAsB,CAAC1K,kBAAvB,CAA2CtG,WAA3C,EAAwDwS,8BAAxD,EAAwFt1B,sBAAxF,EAAgH,IAAhH,EAAsH,CAAtH,EAAyH,IAAzH,CAAD,CAAR;AACA6gB,QAAAA,QAAQ,CAACiT,sBAAsB,CAAC3Q,aAAvB,CAAqCnjB,sBAArC,EAA6D,IAA7D,EAAmE,CAAnE,EAAsE,IAAtE,CAAD,CAAR,CACEigB,IADF,CACO,YAAM;AACX,cAAIgU,sBAAsB,GAAGlT,MAAM,CAACl1B,gBAAP,CAAwBK,yBAAxB,CAAkD40B,QAAQ,EAA1D,EAA8D9gB,sBAA9D,CAA7B;;AACA,cAAIi0B,sBAAsB,IAAIA,sBAAsB,CAACl7C,MAArD,EAA6D;AAE5D8nC,YAAAA,QAAQ,CAAC6J,wBAAwB,CAAC7H,OAAzB,CAAiC,CAACoR,sBAAsB,CAAC,CAAD,CAAvB,CAAjC,EAA8DnR,WAA9D,CAAD,CAAR,CAAqF7C,IAArF,CAA0F,YAAM;AAC/F,kBAAIt5B,UAAU,GAAGo6B,MAAM,CAACx2B,kBAAP,CAA0B/K,SAA1B,CAAoCshC,QAAQ,EAA5C,EAAgDmT,sBAAhD,CAAjB,CAD+F;AAG/F;;AACA,kBAAGttC,UAAU,IAAIA,UAAU,CAAC,CAAD,CAAxB,IAA+BA,UAAU,CAAC,CAAD,CAAV,CAActM,IAAd,CAAmBgN,IAAnB,KAA4B,QAA9D,EAAwE;AACvE,oBAAIkD,kBAAkB,GAAGw2B,MAAM,CAACl1B,gBAAP,CAAwBL,eAAxB,CAAwCs1B,QAAQ,EAAhD,EAAoD9gB,sBAApD,CAAzB;AAEA,oBAAMoE,aAAa,GAAG;AACrBxY,kBAAAA,oBAAoB,EAAEjF,UAAU,CAAC,CAAD,CAAV,CAAcjN,GADf;AAErBkN,kBAAAA,aAAa,EAAE2D,kBAAkB,CAAC,CAAD,CAAlB,CAAsB3D;AAFhB,iBAAtB;AAKA,oBAAMiG,WAAW,GAAGk0B,MAAM,CAACx2B,kBAAP,CAA0BC,MAA1B,CAAiC7L,qBAAjC,CAAuDmiC,QAAQ,EAA/D,EAAmE1c,aAAnE,EAAkF,IAAlF,CAApB,CARuE;;AAUvE,oBAAG,CAACvX,WAAJ,EAAiB;AAChBg0B,kBAAAA,QAAQ,CAAC6J,wBAAwB,CAAClgC,MAAzB,CAAgCw/B,aAAhC,CAA8C5lB,aAA9C,EAA6D0e,WAA7D,CAAD,CAAR;AACA;;AACD,oBAAMr8B,eAAe,GAAGwF,+BAAYiR,OAAO,CAACne,YAApB,CAAxB;;AAEA8hC,gBAAAA,QAAQ,CAAC0T,SAAwB,CAACnL,kBAAzB,CAA6CtG,WAA7C,EAA0D5lB,OAAO,CAACtiB,cAAlE,EAAkF6L,eAAlF,EAAmG,IAAnG,EAAyG,CAAzG,EAA4G,IAA5G,CAAD,CAAR;AACAo6B,gBAAAA,QAAQ,CAAC0T,SAAwB,CAAC1J,qBAAzB,CAA+CpkC,eAA/C,EAAgE,IAAhE,EAAsE,CAAtE,EAAyE,IAAzE,EAA+Eq8B,WAA/E,CAAD,CAAR;AACA;AAED,aAvBD;AAwBA;AACD,SA9BF,WA+BQ,UAAC0D,GAAD,EAAS;AACf3F,UAAAA,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiCsF,GAAjC,CAAD,CAAR;AACA,SAjCF,EApB8B;AAwD9B,OAxDD;AAyDA;AACD,GA3ED;AA4EA;;AAED,IAAM+O,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACrhC,MAAD,EAAY;AACvC,SAAO,UAAC2sB,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACgL,OAAa,CAACxC,eAAd,CAA8BxB,WAAW,CAACpT,iBAA1C,gBAAoEvgB,MAApE,EAAD,CAAR;AACA,GAFD;AAGA,CAJD;;AAMA,IAAMshC,2CAA2C,GAAG,SAA9CA,2CAA8C,CAACC,kBAAD,EAAwB;AAC3E,MAAIA,kBAAkB,CAAC3iC,OAAnB,IAA8B2iC,kBAAkB,CAAC3iC,OAAnB,GAA6B,GAA/D,EAAoE;AACnE2iC,IAAAA,kBAAkB,CAAC3iC,OAAnB,GAA6B2iC,kBAAkB,CAAC3iC,OAAnB,GAA6B,GAA1D;AACA;;AAED,MAAI2iC,kBAAkB,CAAC3iC,OAAnB,IAA8B2iC,kBAAkB,CAAC3iC,OAAnB,GAA6B,CAAC,GAAhE,EAAqE;AACpE2iC,IAAAA,kBAAkB,CAAC3iC,OAAnB,GAA6B2iC,kBAAkB,CAAC3iC,OAAnB,GAA6B,GAA1D;AACA;;AAED,MAAI2iC,kBAAkB,CAAC7iC,IAAnB,IAA2B6iC,kBAAkB,CAAC7iC,IAAnB,GAA0B,CAAzD,EAA4D;AAC3D6iC,IAAAA,kBAAkB,CAAC7iC,IAAnB,GAA0B,CAA1B;AACA;;AAED,MAAI6iC,kBAAkB,CAAC7iC,IAAnB,IAA2B6iC,kBAAkB,CAAC7iC,IAAnB,GAA0B,EAAzD,EAA6D;AAC5D6iC,IAAAA,kBAAkB,CAAC7iC,IAAnB,GAA0B,EAA1B;AACA;;AACD,SAAO6iC,kBAAP;AACA,CAjBD;;AAmBA,IAAMC,mCAAmC,GAAG,SAAtCA,mCAAsC,CAACxhC,MAAD,EAAS+E,kBAAT,EAAgC;AAC3E,SAAO,UAAC4nB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMiL,QAAQ,GAAGhL,MAAM,CAAC7tB,eAAP,CAAuBY,WAAvB,CAAmC7a,KAAnC,EAA0Cib,MAA1C,CAAjB;;AACA,QAAG,CAAC63B,QAAJ,EAAc;AACb,aAAOlL,QAAQ,CAACK,oBAAkB,mCAA4BhtB,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAO2sB,QAAQ,CAAC8U,yCAAyC,CAACzhC,MAAD,EAAS+E,kBAAT,CAA1C,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAM28B,mCAAmC,GAAG,SAAtCA,mCAAsC,CAAC/yB,MAAD,EAAS5J,kBAAT,EAAgC;AAC3E,SAAO,UAAC4nB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;;AACA,QAAMuL,QAAQ,GAAGtL,MAAM,CAAC7tB,eAAP,CAAuBc,cAAvB,CAAsC/a,KAAtC,EAA6C4pB,MAA7C,CAAjB;;AACA,QAAG,CAACwpB,QAAJ,EAAc;AACb,aAAOxL,QAAQ,CAACK,oBAAkB,mCAA4Bre,MAA5B,OAAnB,CAAf;AACA,KAFD,MAEO;AACN,aAAOge,QAAQ,CAACgV,yCAAyC,CAAChzB,MAAD,EAAS5J,kBAAT,CAA1C,CAAf;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAMo8B,mCAAmC,GAAG,SAAtCA,mCAAsC,CAACnhC,MAAD,EAAS4hC,OAAT,EAAqB;AAChE,SAAO,UAACjV,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI1sB,GAAG,GAAG2sB,MAAM,CAAC7tB,eAAP,CAAuBe,iBAAvB,CAAyC6sB,QAAQ,EAAjD,EAAqD5sB,MAArD,CAAV;;AACA,QAAI49B,MAAM,GAAG,EAAb;AACA,QAAIC,MAAM,GAAG,EAAb;;AAEA,QAAI39B,GAAG,IAAIA,GAAG,CAACoC,IAAf,EAAqB;AACpBs7B,MAAAA,MAAM,GAAGz0C,4BAASy4C,OAAT,EAAkB,UAAC9D,SAAD,EAAYC,SAAZ,EAA0B;AACpD,YAAIA,SAAS,KAAK,gBAAlB,EAAoC;AACnC,iBAAO79B,GAAG,CAACoC,IAAJ,CAAS,UAAT,CAAP;AACA,SAFD,MAEO;AACN,iBAAOpC,GAAG,CAACoC,IAAJ,CAASy7B,SAAT,CAAP;AACA;AACD,OANQ,CAAT;AAQAF,MAAAA,MAAM,GAAGt7B,4BAASq/B,OAAT,EAAkB,UAAC9D,SAAD,EAAYC,SAAZ,EAA0B;AACpD,YAAIA,SAAS,KAAK,gBAAlB,EAAoC;AACnC,iBAAO79B,GAAG,CAACoC,IAAJ,CAAS,UAAT,CAAP;AACA,SAFD,MAEO;AACN,iBAAOpC,GAAG,CAACoC,IAAJ,CAASy7B,SAAT,CAAP;AACA;AACD,OANQ,CAAT;AAOA,KAhBD,MAgBO;AACNF,MAAAA,MAAM,GAAG+D,OAAT;AACA;;AAED,QAAIhE,MAAM,IAAI,CAACx5C,6BAAUw5C,MAAV,CAAf,EAAkC;AACjC;AACAA,MAAAA,MAAM,GAAG0D,2CAA2C,CAAC1D,MAAD,CAApD,CAFiC;;AAGjCjR,MAAAA,QAAQ,CAACkV,4CAA4C,CAAC3hC,GAAG,CAAC1a,GAAL,EAAUo4C,MAAV,CAA7C,CAAR;AACA;;AAED,QAAIC,MAAM,IAAI,CAACz5C,6BAAUy5C,MAAV,CAAf,EAAkC;AACjC;AACAA,MAAAA,MAAM,GAAGyD,2CAA2C,CAACzD,MAAD,CAApD,CAFiC;;AAGjClR,MAAAA,QAAQ,CAACmV,4CAA4C,CAAC9hC,MAAD,EAAS69B,MAAT,CAA7C,CAAR;AACA;AACD,GApCD;AAqCA,CAtCD;;AAwCA,IAAMkE,yCAAyC,GAAG,SAA5CA,yCAA4C,CAAC/hC,MAAD,EAASgiC,gBAAT,EAA8B;AAC/E,SAAO,UAACrV,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM9nB,YAAY,GAAG+nB,MAAM,CAAC7tB,eAAP,CAAuB6F,uBAAvB,CAA+C+nB,QAAQ,EAAvD,EAA2D5sB,MAA3D,CAArB;;AAEA,QAAIiiC,gBAAgB,GAAG,GAAvB;;AACA,QAAIl3C,IAAI,CAACm3C,GAAL,CAASp9B,YAAY,CAAClG,OAAtB,IAAiC,EAArC,EAAyC;AACxCqjC,MAAAA,gBAAgB,GAAG,GAAnB;AACA,KAFD,MAEO,IAAIl3C,IAAI,CAACm3C,GAAL,CAASp9B,YAAY,CAAClG,OAAtB,IAAiC,GAArC,EAA0C;AAChDqjC,MAAAA,gBAAgB,GAAG,GAAnB;AACA,KAR6B;;;AAU9B,QAAIn9B,YAAY,CAAClG,OAAb,GAAuB,CAAvB,IAA4BkG,YAAY,CAAClG,OAAb,GAAuB,GAAnD,IAA0DkG,YAAY,CAAClG,OAAb,GAAuB,CAAvB,IAA4BkG,YAAY,CAAClG,OAAb,GAAuB,CAAC,GAAlH,EAAuH;AACtHqjC,MAAAA,gBAAgB,GAAG,CAACA,gBAApB;AACA;;AACDA,IAAAA,gBAAgB,GAAGD,gBAAgB,IAAIC,gBAAvC;AAEAE,IAAAA,UAAU,CAAC,YAAM;AAChB,UAAIC,YAAJ;;AACA,UAAIr3C,IAAI,CAACm3C,GAAL,CAASp9B,YAAY,CAAClG,OAAtB,IAAiC7T,IAAI,CAACm3C,GAAL,CAASD,gBAAT,CAArC,EAAiE;AAChEG,QAAAA,YAAY,GAAGt9B,YAAY,CAAClG,OAAb,GAAuBqjC,gBAAtC;AACAtV,QAAAA,QAAQ,CAACwU,mCAAmC,CAACnhC,MAAD,EAAS;AAACpB,UAAAA,OAAO,EAAEwjC;AAAV,SAAT,CAApC,CAAR;AACAzV,QAAAA,QAAQ,CAACoV,yCAAyC,CAAC/hC,MAAD,EAASiiC,gBAAT,CAA1C,CAAR;AACA,OAJD,MAIO;AACNG,QAAAA,YAAY,GAAG,CAAf;AACAzV,QAAAA,QAAQ,CAACwU,mCAAmC,CAACnhC,MAAD,EAAS;AAACpB,UAAAA,OAAO,EAAEwjC;AAAV,SAAT,CAApC,CAAR;AACA;AACD,KAVS,EAUP,EAVO,CAAV;AAYA,GA3BD;AA4BA,CA7BD;AAkCA;AACA;AACA;;;AAEA,IAAMtK,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAC93B,MAAD,EAAY;AACzC,SAAO;AACN7M,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BP,kBAD7B;AAEN/hB,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAMk4B,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACvpB,MAAD,EAAS3O,MAAT,EAAoB;AACvD,SAAO;AACN7M,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCiC,kBADjC;AAEN/hB,IAAAA,MAAM,EAANA,MAFM;AAGN2O,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMypB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACzpB,MAAD,EAAY;AACzC,SAAO;AACNxb,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BC,kBAD7B;AAEN5T,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAM2pB,YAAY,GAAG,SAAfA,YAAe,CAACp4B,GAAD,EAAS;AAC7B,SAAO;AACN/M,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCvC,GADjC;AAENrd,IAAAA,GAAG,EAAHA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAM65B,eAAe,GAAG,SAAlBA,eAAkB,CAACprB,MAAD,EAAY;AACnC,SAAO;AACNxb,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCjB,MADjC;AAENlQ,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAMsrB,iBAAiB,GAAG,SAApBA,iBAAoB,CAACtrB,MAAD,EAAS3O,MAAT,EAAoB;AAC7C,SAAO;AACN7M,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCgD,OADjC;AAENnU,IAAAA,MAAM,EAANA,MAFM;AAGN3O,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMm6B,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACxrB,MAAD,EAAS3O,MAAT,EAAoB;AACrD,SAAO;AACN7M,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCkD,UADjC;AAENrU,IAAAA,MAAM,EAANA,MAFM;AAGN3O,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMs6B,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC3rB,MAAD,EAAStM,IAAT,EAAkB;AAC1C,SAAO;AACNlP,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCmC,IAAjC,CAAsCnC,GADtC;AAENnR,IAAAA,MAAM,EAANA,MAFM;AAGNtM,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM47B,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACtvB,MAAD,EAAS9iB,MAAT,EAAoB;AAC/C,SAAO;AACNsH,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCmC,IAAjC,CAAsClD,MADtC;AAENpQ,IAAAA,MAAM,EAANA,MAFM;AAGN9iB,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM2uC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC7rB,MAAD,EAASrM,IAAT,EAAkB;AAC1C,SAAO;AACNnP,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCoD,QADjC;AAENvU,IAAAA,MAAM,EAANA,MAFM;AAGNrM,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMy4B,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACpsB,MAAD,EAASzP,IAAT,EAAkB;AAC1C,SAAO;AACN/L,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCiD,QADjC;AAENpU,IAAAA,MAAM,EAANA,MAFM;AAGNzP,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM+7B,YAAY,GAAG,SAAfA,YAAe,CAAC1wC,GAAD,EAAS;AAC7B,SAAO;AACN4I,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiC3E,GADjC;AAENhzB,IAAAA,GAAG,EAAHA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAM+wC,eAAe,GAAG,SAAlBA,eAAkB,CAACt7B,MAAD,EAAY;AACnC,SAAO;AACN7M,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCrD,MADjC;AAEN7e,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAMy7B,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACz7B,MAAD,EAAS5L,IAAT,EAAkB;AAC1C,SAAO;AACNjB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCoB,QADjC;AAENtjB,IAAAA,MAAM,EAANA,MAFM;AAGN5L,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMunC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC37B,MAAD,EAAS7Z,IAAT,EAAkB;AAC1C,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCqB,QADjC;AAENvjB,IAAAA,MAAM,EAANA,MAFM;AAGN7Z,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM01C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC77B,MAAD,EAASqC,IAAT,EAAkB;AAC1C,SAAO;AACNlP,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCD,IAAjC,CAAsCnC,GADtC;AAEN9f,IAAAA,MAAM,EAANA,MAFM;AAGNqC,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM67B,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACl+B,MAAD,EAASnU,MAAT,EAAoB;AAC/C,SAAO;AACNsH,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCD,IAAjC,CAAsClD,MADtC;AAEN/e,IAAAA,MAAM,EAANA,MAFM;AAGNnU,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AASA,IAAMiwC,cAAc,GAAG,SAAjBA,cAAiB,CAAC97B,MAAD,EAASrO,KAAT,EAAgB7N,KAAhB,EAA0B;AAChD,SAAO;AACNqP,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BH,MAA7B,CAAoCuB,KAApC,CAA0CnG,GAD1C;AAENvd,IAAAA,MAAM,EAANA,MAFM;AAGNrO,IAAAA,KAAK,EAALA,KAHM;AAIN7N,IAAAA,KAAK,EAALA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAMm4C,iBAAiB,GAAG,SAApBA,iBAAoB,CAACj8B,MAAD,EAAS7N,QAAT,EAAsB;AAC/C,SAAO;AACNgB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BH,MAA7B,CAAoCuB,KAApC,CAA0C7E,MAD1C;AAEN7e,IAAAA,MAAM,EAANA,MAFM;AAGN7N,IAAAA,QAAQ,EAARA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMkqC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACr8B,MAAD,EAAS7N,QAAT,EAAmBrO,KAAnB,EAA6B;AACxD,SAAO;AACNqP,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BH,MAA7B,CAAoCuB,KAApC,CAA0CE,SAD1C;AAEN5jB,IAAAA,MAAM,EAANA,MAFM;AAGN7N,IAAAA,QAAQ,EAARA,QAHM;AAINrO,IAAAA,KAAK,EAALA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAM45C,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC19B,MAAD,EAAS7N,QAAT,EAAmBR,KAAnB,EAA6B;AACzD,SAAO;AACNwB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BH,MAA7B,CAAoCuB,KAApC,CAA0C3E,MAD1C;AAEN/e,IAAAA,MAAM,EAANA,MAFM;AAGN7N,IAAAA,QAAQ,EAARA,QAHM;AAINR,IAAAA,KAAK,EAALA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAM2rC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACt9B,MAAD,EAAS7N,QAAT,EAAmBR,KAAnB,EAA6B;AACtD,SAAO;AACNwB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BH,MAA7B,CAAoCuB,KAApC,CAA0C5D,GAD1C;AAEN9f,IAAAA,MAAM,EAANA,MAFM;AAGN7N,IAAAA,QAAQ,EAARA,QAHM;AAINR,IAAAA,KAAK,EAALA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAM6rC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACx9B,MAAD,EAAS7N,QAAT,EAAmBQ,KAAnB,EAA6B;AACxD,SAAO;AACHQ,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCC,MAAjC,CAAwCrC,GAAxC,CAA4CuD,KAD/C;AAEHrjB,IAAAA,MAAM,EAANA,MAFG;AAGH7N,IAAAA,QAAQ,EAARA,QAHG;AAIHQ,IAAAA,KAAK,EAALA;AAJG,GAAP;AAMH,CAPD;;AASA,IAAMkqC,mCAAmC,GAAG,SAAtCA,mCAAsC,CAAC78B,MAAD,EAAS7N,QAAT,EAAmBoqC,kBAAnB,EAA0C;AACrF,SAAO;AACNppC,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCC,MAAjC,CAAwCrC,GAAxC,CAA4CqD,oBAD5C;AAENnjB,IAAAA,MAAM,EAANA,MAFM;AAGN7N,IAAAA,QAAQ,EAARA,QAHM;AAINoqC,IAAAA,kBAAkB,EAAlBA;AAJM,GAAP;AAMA,CAPD;;AA0BA,IAAMyC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACh/B,MAAD,EAASK,eAAT,EAA6B;AAChE,SAAO;AACNlN,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BN,oBAD7B;AAENhiB,IAAAA,MAAM,EAANA,MAFM;AAGNK,IAAAA,eAAe,EAAfA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMg/B,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAC1wB,MAAD,EAAStO,eAAT,EAA6B;AAChE,SAAO;AACNlN,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCkC,oBADjC;AAENrT,IAAAA,MAAM,EAANA,MAFM;AAGNtO,IAAAA,eAAe,EAAfA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMk/B,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC5wB,MAAD,EAAS7a,MAAT,EAAoB;AAC3C,SAAO;AACHX,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiC+C,UADpC;AAEHlU,IAAAA,MAAM,EAANA,MAFG;AAGH7a,IAAAA,MAAM,EAANA;AAHG,GAAP;AAKH,CAND;;AAQA,IAAMqrC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACn/B,MAAD,EAASlM,MAAT,EAAoB;AAC9C,SAAO;AACNX,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BH,MAA7B,CAAoCrC,GADpC;AAEN9f,IAAAA,MAAM,EAANA,MAFM;AAGNlM,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMirC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC/+B,MAAD,EAAShZ,OAAT,EAAqB;AAC7C,SAAO;AACNmM,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BM,QAD7B;AAEN5iB,IAAAA,MAAM,EAANA,MAFM;AAGN,YAAMhZ;AAHA,GAAP;AAKA,CAND;;AAQA,IAAMu3C,iBAAiB,GAAG,SAApBA,iBAAoB,CAACv+B,MAAD,EAAS/Y,KAAT,EAAmB;AAC5C,SAAO;AACNkM,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BE,SAD7B;AAENxiB,IAAAA,MAAM,EAANA,MAFM;AAGN/Y,IAAAA,KAAK,EAALA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMw3C,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACz+B,MAAD,EAAShR,QAAT,EAAsB;AAClD,SAAO;AACNmE,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BG,YAD7B;AAENziB,IAAAA,MAAM,EAANA,MAFM;AAGNhR,IAAAA,QAAQ,EAARA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM6vC,iBAAiB,GAAG,SAApBA,iBAAoB,CAAC7+B,MAAD,EAAS5Y,KAAT,EAAmB;AAC5C,SAAO;AACN+L,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BK,SAD7B;AAEN3iB,IAAAA,MAAM,EAANA,MAFM;AAGN5Y,IAAAA,KAAK,EAALA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMu3C,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC3+B,MAAD,EAASxY,MAAT,EAAoB;AAC9C,SAAO;AACN2L,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BI,UAD7B;AAEN1iB,IAAAA,MAAM,EAANA,MAFM;AAGNxY,IAAAA,MAAM,EAANA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMk5C,YAAY,GAAG,SAAfA,YAAe,CAACv6C,IAAD,EAAU;AAC9B,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BvD,MAD7B;AAEN54B,IAAAA,IAAI,EAAJA;AAFM,GAAP;AAIA,CALD;AAOA;AACA;AACA;;;AAEA,IAAMw7C,yCAAyC,GAAG,SAA5CA,yCAA4C,CAAChzB,MAAD,EAAS5J,kBAAT,EAAgC;AACjF,SAAO;AACN5R,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCmD,oBAAjC,CAAsDnD,GADtD;AAENnR,IAAAA,MAAM,EAANA,MAFM;AAGN5J,IAAAA,kBAAkB,EAAlBA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM88B,4CAA4C,GAAG,SAA/CA,4CAA+C,CAAClzB,MAAD,EAAS5J,kBAAT,EAAgC;AACpF,SAAO;AACN5R,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BxC,GAA7B,CAAiCmD,oBAAjC,CAAsDlE,MADtD;AAENpQ,IAAAA,MAAM,EAANA,MAFM;AAGN5J,IAAAA,kBAAkB,EAAlBA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM08B,yCAAyC,GAAG,SAA5CA,yCAA4C,CAACzhC,MAAD,EAAS+E,kBAAT,EAAgC;AACjF,SAAO;AACN5R,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCe,oBAAjC,CAAsDnD,GADtD;AAEN9f,IAAAA,MAAM,EAANA,MAFM;AAGN+E,IAAAA,kBAAkB,EAAlBA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAM+8B,4CAA4C,GAAG,SAA/CA,4CAA+C,CAAC9hC,MAAD,EAAS+E,kBAAT,EAAgC;AACpF,SAAO;AACN5R,IAAAA,IAAI,EAAEwgC,WAAW,CAACrR,gBAAZ,CAA6BJ,GAA7B,CAAiCe,oBAAjC,CAAsDlE,MADtD;AAEN/e,IAAAA,MAAM,EAANA,MAFM;AAGN+E,IAAAA,kBAAkB,EAAlBA;AAHM,GAAP;AAKA,CAND;AAUA;;;AACA,iBAAe;AACd80B,EAAAA,QAAQ,EAARA,QADc;AAEdkC,EAAAA,SAAS,EAATA,SAFc;AAGdxD,EAAAA,eAAe,EAAfA,eAHc;AAGG;AACjByC,EAAAA,MAAM,EAANA,MAJc;AAKdE,EAAAA,eAAe,EAAfA,eALc;AAMdlB,EAAAA,WAAW,EAAXA,WANc;AAOd3B,EAAAA,MAAM,EAANA,MAPc;AASdsI,EAAAA,SAAS,EAATA,SATc;AAWd3E,EAAAA,WAAW,EAAXA,WAXc;AAYdE,EAAAA,YAAY,EAAZA,YAZc;AAadf,EAAAA,SAAS,EAATA,SAbc;AAcdI,EAAAA,kBAAkB,EAAlBA,kBAdc;AAedrB,EAAAA,mBAAmB,EAAnBA,mBAfc;AAgBdJ,EAAAA,SAAS,EAATA,SAhBc;AAkBdsE,EAAAA,gBAAgB,EAAhBA,gBAlBc;AAoBdxG,EAAAA,eAAe,EAAfA,eApBc;AAqBdI,EAAAA,eAAe,EAAfA,eArBc;AAsBdsE,EAAAA,0BAA0B,EAA1BA,0BAtBc;AAuBdQ,EAAAA,2BAA2B,EAA3BA,2BAvBc;AAwBdV,EAAAA,aAAa,EAAbA,aAxBc;AA0BdxC,EAAAA,qBAAqB,EAArBA,qBA1Bc;AA2BdkF,EAAAA,UAAU,EAAVA,UA3Bc;AA4BdpD,EAAAA,UAAU,EAAVA,UA5Bc;AA6Bd0B,EAAAA,WAAW,EAAXA,WA7Bc;AA8BXG,EAAAA,gBAAgB,EAAhBA,gBA9BW;AA+Bd2B,EAAAA,YAAY,EAAZA,YA/Bc;AAgCd1D,EAAAA,UAAU,EAAVA,UAhCc;AAiCdkD,EAAAA,YAAY,EAAZA,YAjCc;AAkCdE,EAAAA,WAAW,EAAXA,WAlCc;AAmCdJ,EAAAA,cAAc,EAAdA,cAnCc;AAoCdF,EAAAA,WAAW,EAAXA,WApCc;AAqCd1C,EAAAA,UAAU,EAAVA,UArCc;AAuCd3D,EAAAA,qBAAqB,EAArBA,qBAvCc;AAwCdmH,EAAAA,qBAAqB,EAArBA,qBAxCc;AAyCXE,EAAAA,YAAY,EAAZA,YAzCW;AA0Cd/E,EAAAA,UAAU,EAAVA,UA1Cc;AA2CdF,EAAAA,UAAU,EAAVA,UA3Cc;AA6CdhF,EAAAA,UAAU,EAAVA,UA7Cc;AA+CdoI,EAAAA,cAAc,EAAdA,cA/Cc;AAgDdlI,EAAAA,mBAAmB,EAAnBA,qBAhDc;AAiDdoI,EAAAA,mBAAmB,EAAnBA,mBAjDc;AAkDdQ,EAAAA,aAAa,EAAbA,aAlDc;AAoDdxuC,EAAAA,GAAG,EAAHA,GApDc;AAqDd6vC,EAAAA,QAAQ,EAARA,QArDc;AAwDd;AACAuC,EAAAA,yCAAyC,EAAzCA,yCAzDc;AA0DdP,EAAAA,mCAAmC,EAAnCA,mCA1Dc;AA2DdE,EAAAA,mCAAmC,EAAnCA,mCA3Dc;AA4DdP,EAAAA,mCAAmC,EAAnCA,mCA5Dc;AA6DdlC,EAAAA,cAAc,EAAdA,cA7Dc;AA8DdoC,EAAAA,mBAAmB,EAAnBA;AA9Dc,CAAf;;ACt8CA,IAAM5M,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAAC5M,sBAAvB,CAAZ;AACA,IAAM+N,cAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAAC5M,sBAAhC,CAArB;;AAEA,SAASsb,oBAAT,GAAgC;AAC/B,SAAO,UAAC1V,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI/jC,SAAS,GAAGgkC,MAAM,CAACv7B,qBAAP,CAA6BpH,YAA7B,CAA0C0iC,QAAQ,EAAlD,CAAhB;;AAEA,QAAI/jC,SAAJ,EAAe;AACd8jC,MAAAA,QAAQ,CAACmI,cAAY,CAAC,IAAD,CAAb,CAAR;AACAnI,MAAAA,QAAQ,CAAC2V,YAAY,CAAC,CAACz5C,SAAD,CAAD,CAAb,CAAR;AACA;AACD,GAPD;AAQA;;AAED,SAAS05C,qBAAT,CAA+BnuC,IAA/B,EAAqC9K,MAArC,EAA6Cke,KAA7C,EAAoD;AACnD,SAAO,UAACmlB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI76B,MAAM,GAAG86B,MAAM,CAACv7B,qBAAP,CAA6BlH,SAA7B,CAAuCwiC,QAAQ,EAA/C,CAAb;;AACA,QAAIzmC,IAAI,GAAG;AAACiO,MAAAA,IAAI,EAAJA,IAAD;AAAO9K,MAAAA,MAAM,EAANA,MAAP;AAAeke,MAAAA,KAAK,EAALA;AAAf,KAAX;;AAEA,QAAIzV,MAAJ,EAAY;AACX,UAAIywC,OAAO,qCAAOzwC,MAAP;AAAe5L,QAAAA,IAAI,oCAAM4L,MAAM,CAAC5L,IAAb,GAAsBA,IAAtB;AAAnB,QAAX;;AACAwmC,MAAAA,QAAQ,CAAC8H,KAAG,CAAC+N,OAAD,CAAJ,CAAR;AACA,KAHD,MAGO;AACN7V,MAAAA,QAAQ,CAACjX,QAAM,CAACvvB,IAAD,CAAP,CAAR;AACA;AACD,GAVD;AAWA;;AAED,SAASuvB,QAAT,CAAgBvvB,IAAhB,EAAqB;AACpB,SAAO,UAACwmC,QAAD,EAAc;AACpB,QAAIzvB,SAAS,GAAG;AACf1X,MAAAA,GAAG,EAAE62B,cAAK,CAACmY,IAAN,EADU;AAEfruC,MAAAA,IAAI,EAAJA;AAFe,KAAhB;AAKAwmC,IAAAA,QAAQ,CAAC8H,KAAG,CAAC,CAACv3B,SAAD,CAAD,CAAJ,CAAR;AACAyvB,IAAAA,QAAQ,CAACmI,cAAY,CAAC53B,SAAS,CAAC1X,GAAX,CAAb,CAAR;AACA,GARD;AASA;;AAED,SAAS+vC,qBAAT,CAA6BpvC,IAA7B,EAAmC;AAClC,SAAO,UAAAwmC,QAAQ,EAAI;AAClB,QAAIxmC,IAAJ,EAAU;AACTwmC,MAAAA,QAAQ,CAAC+T,cAAY,CAACv6C,IAAD,CAAb,CAAR;AACA;AACD,GAJD;AAKA;;;AAGD,SAASm8C,YAAT,CAAsBl3C,IAAtB,EAA2B;AAC1B,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5M,sBAAZ,CAAmClI,MADnC;AAENzzB,IAAAA,IAAI,EAAJA;AAFM,GAAP;AAIA;;AAED,IAAMs1C,cAAY,GAAG,SAAfA,YAAe,CAACv6C,IAAD,EAAU;AAC9B,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5M,sBAAZ,CAAmCC,gBADnC;AAEN7gC,IAAAA,IAAI,EAAJA;AAFM,GAAP;AAIA,CALD;;AAOA,8BAAe;AACdk8C,EAAAA,oBAAoB,EAApBA,oBADc;AAEdE,EAAAA,qBAAqB,EAArBA,qBAFc;AAGdhN,EAAAA,mBAAmB,EAAnBA;AAHc,CAAf;;AC7DA,IAAMkN,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC/B,SAAO,UAAC9V,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAM1B,OAAO,GAAG,mDAAhB;AACA,QAAIpkC,cAAc,GAAG47C,WAAS,CAACxmC,MAAV,CAAiB0wB,QAAQ,EAAzB,CAArB;AACA,QAAMvB,OAAO,GAAG;AACfznC,MAAAA,MAAM,EAAE;AACPkD,QAAAA,cAAc,EAAdA;AADO;AADO,KAAhB;AAKA,WAAOmkC,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAP,IAAiBD,MAAM,CAACC,MAAP,CAAc4V,cAA/B,IAAiD7V,MAAM,CAAC3mC,IAAP,IAAe,CAAC2mC,MAAM,CAAC3mC,IAAP,CAAYw8C,cAAjF,EAAiG;AAChGhW,QAAAA,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiCF,MAAM,CAACC,MAAP,CAAc4V,cAAd,IAAgC,IAAItW,KAAJ,CAAU,SAAV,CAAjE,CAAD,CAAR;AACA,OAFD,MAEO,IAAIS,MAAM,CAAC3mC,IAAP,CAAYw8C,cAAZ,CAA2B99C,MAA3B,IAAqCioC,MAAM,CAAC3mC,IAAP,CAAYw8C,cAAZ,CAA2B,CAA3B,EAA8Bx8C,IAAnE,IAA2E2mC,MAAM,CAAC3mC,IAAP,CAAYw8C,cAAZ,CAA2B,CAA3B,EAA8Bx8C,IAA9B,CAAmCA,IAAlH,EAAwH;AAC9HwmC,QAAAA,QAAQ,CAACiW,0BAA0B,CAAC9V,MAAM,CAAC3mC,IAAP,CAAYw8C,cAAZ,CAA2B,CAA3B,EAA8Bx8C,IAA9B,CAAmCA,IAApC,CAA3B,CAAR;AACA,OAFM,MAEA;AACNwmC,QAAAA,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiC,IAAIX,KAAJ,CAAU,qBAAV,CAAjC,CAAD,CAAR;AACA;AACD,KATK,WAUC,UAAAC,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiCV,KAAjC,CAAD,CAAR;AACA,KAZK,CAAP;AAaA,GAtBD;AAuBA,CAxBD;;;AA2BA,IAAMuW,YAAY,GAAG,SAAfA,YAAe,CAACr9C,GAAD,EAAS;AAC7B,SAAO;AACN2N,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5W,GAAZ,CAAgBC,OADhB;AAENx3B,IAAAA,GAAG,EAAHA;AAFM,GAAP;AAIA,CALD;;AAMA,IAAMs9C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACtvC,GAAD,EAAS;AACjC,SAAO;AACNL,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5W,GAAZ,CAAgBE,YADhB;AAENzpB,IAAAA,GAAG,EAAHA;AAFM,GAAP;AAIA,CALD;;AAMA,IAAMuvC,2BAA2B,GAAG,SAA9BA,2BAA8B,CAACxmC,IAAD,EAAOtW,KAAP,EAAiB;AACpD,SAAO;AACNkN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5W,GAAZ,CAAgBG,uBADhB;AAEN3gB,IAAAA,IAAI,EAAJA,IAFM;AAGNtW,IAAAA,KAAK,EAALA;AAHM,GAAP;AAKA,CAND;;AAOA,IAAM+8C,8BAA8B,GAAG,SAAjCA,8BAAiC,CAACn3C,MAAD,EAAY;AAClD,SAAO;AACNsH,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5W,GAAZ,CAAgBI,0BADhB;AAENtxB,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAMA,IAAM+2C,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACjvC,aAAD,EAAmB;AACrD,SAAO;AACNR,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5W,GAAZ,CAAgBK,qBADhB;AAENzpB,IAAAA,aAAa,EAAbA;AAFM,GAAP;AAIA,CALD;;;AASA,gBAAe;AACd8gC,EAAAA,GAAG,EAAEmO,0BADS;AAEdj0B,EAAAA,MAAM,EAAEk0B,YAFM;AAGdI,EAAAA,wBAAwB,EAAED,8BAHZ;AAIdE,EAAAA,UAAU,EAAEJ,gBAJE;AAKdK,EAAAA,qBAAqB,EAAEJ,2BALT;AAMdN,EAAAA,iBAAiB,EAAjBA;AANc,CAAf;;AC9DA,IAAM1N,aAAa,GAAGxjC,OAAM,CAACwjC,aAAP,CAAqBpB,WAAW,CAACvU,cAAjC,CAAtB;;AAIA,gBAAe;AACd2V,EAAAA,aAAa,EAAbA;AADc,CAAf;;ACLA,IAAMN,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACtU,KAAvB,CAAZ;AACA,IAAM3J,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAAC9+B,KAAP,CAAahF,WAA3B,EAAwC,OAAxC,EAAiD4qC,WAAW,CAACtU,KAA7D,CAAf;AACA,IAAMwO,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAAC9+B,KAAP,CAAahF,WAA3B,EAAwC,OAAxC,EAAiD4qC,WAAW,CAACtU,KAA7D,CAAnB;AACA,IAAMoP,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAAC9+B,KAAP,CAAahF,WAA/B,EAA4C,OAA5C,EAAqD4qC,WAAW,CAACtU,KAAjE,CAAnB;AACA,IAAMmO,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAAC9+B,KAAP,CAAahF,WAAjC,EAA8C4qC,WAAW,CAACtU,KAA1D,CAArB;AACA,IAAMkW,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAACtU,KAA1C,CAA5B;AACA,IAAMsP,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAAC9+B,KAAP,CAAahF,WAA5B,EAAyC,OAAzC,EAAkD4qC,WAAW,CAACtU,KAA9D,CAAhB;AACA,IAAM2V,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACtU,KAAhC,CAArB;AACA,IAAM0P,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC9+B,KAAP,CAAahF,WAA/B,EAA4C,OAA5C,EAAqD4qC,WAAW,CAACtU,KAAjE,CAAnB;AACA,IAAM8V,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACtU,KAAnC,CAAxB;AACA,IAAM2T,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAAC9+B,KAAP,CAAahF,WAAhC,WAAsD4qC,WAAW,CAACtU,KAAlE,CAApB;AACA,IAAMiQ,mCAAiC,GAAG/9B,OAAM,CAAC+9B,iCAAP,CAAyCqE,WAAW,CAACtU,KAArD,EAA4D,MAA5D,CAA1C;AACA,IAAMqQ,oCAAkC,GAAGn+B,OAAM,CAACm+B,kCAAP,CAA0CiE,WAAW,CAACtU,KAAtD,EAA6D,MAA7D,CAA3C;AACA,IAAMiU,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAAC9+B,KAAP,CAAahF,WAApD,EAAiE,OAAjE,EAA0E4qC,WAAW,CAACtU,KAAtF,CAAxC;;AAEA,SAASyV,cAAT,CAAsBtvC,GAAtB,EAA2B;AAC1B,SAAO,UAAAmnC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC2C,mCAAiC,CAAC9pC,GAAD,CAAlC,CAAR;AACA,GAFD;AAGA;;AAED,SAASuvC,eAAT,CAAuB3pC,IAAvB,EAA6B;AAC5B,SAAO,UAAAuhC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC+C,oCAAkC,CAACtkC,IAAD,CAAnC,CAAR;AACA,GAFD;AAGA;AAID;;;AAEA,gBAAe;AACdqpC,EAAAA,GAAG,EAAHA,KADc;AAEd/e,EAAAA,MAAM,EAANA,QAFc;AAGd,YAAQmY,YAHM;AAIdyF,EAAAA,+BAA+B,EAA/BA,iCAJc;AAMdN,EAAAA,WAAW,EAAXA,aANc;AAQdvE,EAAAA,UAAU,EAAVA,YARc;AASdqG,EAAAA,YAAY,EAAZA,cATc;AAUdC,EAAAA,aAAa,EAAbA,eAVc;AAYdvH,EAAAA,YAAY,EAAZA,cAZc;AAad+H,EAAAA,mBAAmB,EAAnBA,qBAbc;AAcdxG,EAAAA,UAAU,EAAVA,YAdc;AAedoG,EAAAA,eAAe,EAAfA,iBAfc;AAgBdxG,EAAAA,OAAO,EAAPA,SAhBc;AAiBdqG,EAAAA,YAAY,EAAZA;AAjBc,CAAf;;AChCA,IAAMK,YAAU,GAAGsC,OAAa,CAACtC,UAAd,CAAyB1B,WAAW,CAAC5T,MAArC,CAAnB;;AAEA,IAAMpwB,KAAG,GAAG,SAANA,GAAM,CAACwZ,QAAD,EAAWtD,qBAAX,EAAqC;AAChD,SAAO,UAAC8mB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7jB,KAAK,GAAG8jB,MAAM,CAACrkB,MAAP,CAAcM,qBAAd,CAAoC8jB,QAAQ,EAA5C,EAAgDzjB,QAAhD,EAA0DtD,qBAA1D,CAAZ;AACA,QAAI+oB,WAAW,GAAG,WAAWzlB,QAA7B;;AAEA,QAAIJ,KAAJ,EAAW;AACV4jB,MAAAA,QAAQ,CAAC0T,SAAwB,CAACnL,kBAAzB,CAA6CtG,WAA7C,EAA0D7lB,KAAK,CAACriB,cAAhE,EAAgFqiB,KAAK,CAACle,YAAtF,EAAoG,IAApG,EAA0G,CAA1G,EAA6G,IAA7G,CAAD,CAAR;AACA8hC,MAAAA,QAAQ,CAAC0T,SAAwB,CAAC1J,qBAAzB,CAA+C5tB,KAAK,CAACle,YAArD,EAAmE,IAAnE,EAAyE,CAAzE,EAA4E,IAA5E,EAAkF+jC,WAAlF,CAAD,CAAR;AACA;AACD,GARD;AASA,CAVD;;AAYA,IAAM4Q,UAAQ,GAAG,SAAXA,QAAW,CAACr2B,QAAD,EAAc;AAC9B,SAAO,UAACwjB,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACgL,OAAa,CAACxC,eAAd,CAA8BxB,WAAW,CAACvT,mBAA1C,kBAAwEjX,QAAxE,EAAD,CAAR;AACA,GAFD;AAGA,CAJD;;AAMA,IAAMosB,qBAAmB,GAAG,SAAtBA,mBAAsB,CAACpvC,IAAD,EAAU;AACrC,SAAO,UAAAwmC,QAAQ,EAAI;AAClB,QAAIxmC,IAAJ,EAAU;AACTwmC,MAAAA,QAAQ,CAAC+T,cAAY,CAACv6C,IAAD,CAAb,CAAR;AACA;AACD,GAJD;AAKA,CAND;;;AAUA,IAAMu6C,cAAY,GAAG,SAAfA,YAAe,CAACv6C,IAAD,EAAU;AAC9B,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5T,MAAZ,CAAmBhB,MADnB;AAEN54B,IAAAA,IAAI,EAAJA;AAFM,GAAP;AAIA,CALD;;AAOA,gBAAe;AACdovC,EAAAA,mBAAmB,EAAnBA,qBADc;AAEd5lC,EAAAA,GAAG,EAAHA,KAFc;AAGd6vC,EAAAA,QAAQ,EAARA,UAHc;AAIdnK,EAAAA,UAAU,EAAVA;AAJc,CAAf;;ACtCA;AACA,SAASxpC,MAAT,CAAgBu3C,SAAhB,EAA2Bj9C,IAA3B,EAAiC;AAChC,SAAO,UAAAwmC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC+T,cAAY,CAAC0C,SAAD,EAAYj9C,IAAZ,CAAb,CAAR;AACA,GAFD;AAGA;;AAED,SAASovC,qBAAT,CAA6BlsB,UAA7B,EAAyC;AACxC,SAAO,UAAAsjB,QAAQ,EAAI;AAClB,QAAItjB,UAAJ,EAAgB;AACf;AACA,iCAAQA,UAAR,EAAoB,UAACljB,IAAD,EAAOi9C,SAAP,EAAqB;AACxCzW,QAAAA,QAAQ,CAAC+T,cAAY,CAAC0C,SAAD,EAAYj9C,IAAZ,CAAb,CAAR;AACA,OAFD;AAGA;AACD,GAPD;AAQA;;;AAGD,SAASu6C,cAAT,CAAsB0C,SAAtB,EAAiCj9C,IAAjC,EAAuC;AACtC,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC9T,UAAZ,CAAuBd,MADvB;AAENqkB,IAAAA,SAAS,EAAEA,SAFL;AAGNv3C,IAAAA,MAAM,EAAE1F;AAHF,GAAP;AAKA;;AACD,SAASk9C,SAAT,CAAmBD,SAAnB,EAA8B7mC,IAA9B,EAAoCtW,KAApC,EAA2C;AAC1C,SAAO;AACNkN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC9T,UAAZ,CAAuBC,GADvB;AAENsjB,IAAAA,SAAS,EAATA,SAFM;AAGN7mC,IAAAA,IAAI,EAAJA,IAHM;AAINtW,IAAAA,KAAK,EAALA;AAJM,GAAP;AAMA;;;AAKD,gBAAe;AACd4F,EAAAA,MAAM,EAANA,MADc;AAEd0pC,EAAAA,mBAAmB,EAAnBA,qBAFc;AAGdr1B,EAAAA,GAAG,EAAEmjC;AAHS,CAAf;;ACvCA,IAAMhW,aAAW,GAAGsG,WAAW,CAAClU,IAAZ,CAAiBW,mBAArC;AAEA,IAAMqU,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWpH,aAAX,CAAZ;AACA,IAAMuH,QAAQ,GAAGrjC,OAAM,CAACqjC,QAAP,CAAgBvH,aAAhB,CAAjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASwC,gBAAT,CAAwB/1B,kBAAxB,EAA4ClW,MAA5C,EAAoDC,KAApD,EAA2D+G,KAA3D,EAAkEolC,KAAlE,EAAyE/qC,SAAzE,EAAoF;AAChF,SAAO,UAAA0nC,QAAQ,EAAI;AACf;AACA,QAAI7yB,kBAAkB,CAACjV,MAAvB,EAA+B;AAC3B8nC,MAAAA,QAAQ,CAAC8H,KAAG,CAAC36B,kBAAD,EAAqBlW,MAArB,CAAJ,CAAR;AACH,KAJc;;;AAOf+oC,IAAAA,QAAQ,CAACiI,QAAQ,CAAChxC,MAAD,EAASC,KAAT,EAAgBmsC,KAAhB,EAAuBplC,KAAvB,EAA8BkP,kBAA9B,EAAkD7U,SAAlD,CAAT,CAAR;AACH,GARD;AASH;AAID;;;AAEA,2BAAe;AACX4qC,EAAAA,cAAc,EAAdA;AADW,CAAf;;AC/BA,IAAMxC,aAAW,GAAGsG,WAAW,CAAClU,IAAZ,CAAiBU,sBAArC;AAEA,IAAMyU,UAAQ,GAAGrjC,OAAM,CAACqjC,QAAP,CAAgBvH,aAAhB,CAAjB;AACA,IAAMoH,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWpH,aAAX,CAAZ;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASwC,gBAAT,CAAwBj9B,oBAAxB,EAA8ChP,MAA9C,EAAsDC,KAAtD,EAA6D+G,KAA7D,EAAoEolC,KAApE,EAA2E/qC,SAA3E,EAAsF;AAClF,SAAO,UAAA0nC,QAAQ,EAAI;AACf;AACA,QAAI/5B,oBAAoB,CAAC/N,MAAzB,EAAiC;AAC7B8nC,MAAAA,QAAQ,CAAC8H,KAAG,CAAC7hC,oBAAD,EAAuBhP,MAAvB,CAAJ,CAAR;AACH,KAJc;;;AAOf+oC,IAAAA,QAAQ,CAACiI,UAAQ,CAAChxC,MAAD,EAASC,KAAT,EAAgBmsC,KAAhB,EAAuBplC,KAAvB,EAA8BgI,oBAA9B,EAAoD3N,SAApD,CAAT,CAAR;AACH,GARD;AASH;AAID;;;AAEA,6BAAe;AACdwvC,EAAAA,GAAG,EAAHA,KADc;AAEX5E,EAAAA,cAAc,EAAdA;AAFW,CAAf;;AC9BA,IAAMxC,aAAW,GAAGsG,WAAW,CAAClU,IAAZ,CAAiBQ,cAArC;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM4P,gBAAc,GAAG,SAAjBA,cAAiB,CAAC/0B,aAAD,EAAgBnC,WAAhB,EAA6B/U,MAA7B,EAAqCC,KAArC,EAA4CoB,SAA5C,EAA0D;AAC7E,SAAO,UAAA0nC,QAAQ,EAAI;AACrB,QAAI,CAACvoC,6BAAU0W,aAAV,CAAL,EAA+B;AAC9B6xB,MAAAA,QAAQ,CAAC2W,eAAe,CAAC1/C,MAAD,EAASC,KAAT,EAAgBiX,aAAhB,EAA+BnC,WAA/B,EAA4C1T,SAA5C,CAAhB,CAAR;AACA,KAFD,MAEO;AACN;AACA0nC,MAAAA,QAAQ,CAAC4W,iBAAiB,CAAC3/C,MAAD,EAASC,KAAT,EAAgBiX,aAAhB,EAA+BnC,WAA/B,EAA4C1T,SAA5C,CAAlB,CAAR;AACA;AACE,GAPD;AAQH,CATD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASq+C,eAAT,CAAyBpzB,aAAzB,EAAwCrsB,KAAxC,EAA+CiX,aAA/C,EAA8DnC,WAA9D,EAA2E1T,SAA3E,EAAsF;AACrF,SAAO,UAAC0nC,QAAD,EAAc;AACpB,QAAM6W,SAAS,GAAGC,YAAY,CAAC9qC,WAAD,EAAcmC,aAAd,CAA9B;;AAEA,oCAAoCrV,MAAM,CAAC2F,IAAP,CAAY0P,aAAZ,CAApC,kCAAgE;AAA5D,UAAMV,sBAAsB,mBAA5B;AACHuyB,MAAAA,QAAQ,CAAC+W,qBAAqB,CAACtpC,sBAAD,EAAyBU,aAAa,CAACV,sBAAD,CAAtC,EAAgE8V,aAAhE,EAA+ErsB,KAA/E,EAAsF,CAAC2/C,SAAD,CAAtF,EAAmGv+C,SAAnG,CAAtB,CAAR;AACA;AACD,GAND;AAOA;AAmBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASs+C,iBAAT,CAA2B3/C,MAA3B,EAAmCC,KAAnC,EAA0CiX,aAA1C,EAAyDnC,WAAzD,EAAsE1T,SAAtE,EAAiF;AAChF,MAAM0+C,iCAAiC,GAAGF,YAAY,CAAC9qC,WAAD,EAAcmC,aAAd,CAAtD;AACA,SAAO8oC,cAAc,CAAChgD,MAAD,EAASC,KAAT,EAAgB,CAAC8/C,iCAAD,CAAhB,EAAqD1+C,SAArD,CAArB;AACA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS4+C,eAAT,CAAyBjgD,MAAzB,EAAiCC,KAAjC,EAAwC8B,KAAxC,EAA+CwlB,KAA/C,EAAsD;AAClD,MAAMlmB,SAAS,GAAG,IAAlB,CADkD;;AAIlD,MAAM6+C,YAAY,GAAGp/C,4BAASymB,KAAT,EAAgB,UAACxmB,GAAD,EAAM6lB,IAAN,EAAe;AAChD,QAAMu5B,MAAM,GAAGj5B,YAAY,CAACN,IAAD,CAA3B;AACA7lB,IAAAA,GAAG,CAACo/C,MAAD,CAAH,GAAc,IAAd;AACA,WAAOp/C,GAAP;AACH,GAJoB,EAIlB,EAJkB,CAArB;;AAKA,MAAMb,KAAK,uBACN6B,KADM,EACEm+C,YADF,CAAX;;AAIH,SAAOF,cAAc,CAAChgD,MAAD,EAASC,KAAT,EAAgB,CAACC,KAAD,CAAhB,EAAyBmB,SAAzB,CAArB;AACA;;AAID;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASw+C,YAAT,CAAsB9qC,WAAtB,EAAmCmC,aAAnC,EAAkD;AACjD,MAAM6oC,iCAAiC,GAAG,EAA1C,CADiD;AAIjD;;AACA,sCAAiDl+C,MAAM,CAACC,OAAP,CAAeiT,WAAf,CAAjD,uCAA8E;AAAA;AAAA,QAAlEjB,oBAAkE;AAAA,QAA5CssC,UAA4C;;AAC7E;AACA,yCAA6Bv+C,MAAM,CAACC,OAAP,CAAes+C,UAAU,CAACC,YAA1B,CAA7B,wCAAsE;AAAA;AAAA,UAA1Dt+C,KAA0D;AAAA,UAAnDwlB,KAAmD;;AACrE,UAAG,CAACw4B,iCAAiC,CAACh+C,KAAD,CAArC,EAA8C;AAC7Cg+C,QAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,GAA2C,EAA3C;AACA,OAHoE;;;AAKrE,2CAA+BF,MAAM,CAACC,OAAP,CAAeylB,KAAf,CAA/B,wCAAsD;AAAA;AAAA,YAA1CX,IAA0C;AAAA,YAApCa,QAAoC;;AACrD;AACA;AACA;AACA,YAAG,CAACs4B,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,CAAD,IAAmDpmB,6BAAU0W,aAAV,CAAtD,EAA+E;AAC9E6oC,UAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,IAAiD,EAAjD;AACA;;AAED,YAAG,CAACpmB,6BAAU0W,aAAV,CAAJ,EAA8B;AAAA;AAAA;;AAAA;AAAA,gBAEjBV,sBAFiB;AAAA,gBAEO7E,mBAFP;;AAG5B;AAEA,gBAAM5R,OAAO,GAAG0nB,QAAQ,CAACznB,MAAT,CAAiB,UAAAgwC,CAAC;AAAA,qBAAInuC,MAAM,CAAC2F,IAAP,CAAYmK,mBAAZ,EAAiCjP,QAAjC,CAA0CstC,CAAC,CAACsQ,QAAF,EAA1C,CAAJ;AAAA,aAAlB,CAAhB,CAL4B;;AAQ5B,gBAAGP,iCAAH,aAAGA,iCAAH,wCAAGA,iCAAiC,CAAGh+C,KAAH,CAApC,4EAAG,sBAA6C6kB,IAA7C,CAAH,mDAAG,uBAAqDpQ,sBAArD,CAAH,EAAiF;AAChFupC,cAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,EAA+CpQ,sBAA/C,iCACIupC,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,EAA+CpQ,sBAA/C,CADJ,sBAEIzW,OAFJ;AAIA,aALD,MAKO;AACN;AACAggD,cAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,EAA+CpQ,sBAA/C,IAAyEzW,OAAzE;AACA;AAhB2B;;AAC7B;AACA,+CAA4D8B,MAAM,CAACC,OAAP,CAAeoV,aAAf,CAA5D,wCAA2F;AAAA;AAe1F;AACD;AACD;AACD;AACD;;AAED,SAAO6oC,iCAAP;AACA;;AAWD,SAASQ,iBAAT,CAA4BvgD,MAA5B,EAAoCC,KAApC,EAA2C;AAC1C,SAAO;AACAsP,IAAAA,IAAI,EAAEk6B,aAAW,CAAC1P,KAAZ,CAAkBkB,MADxB;AAEAj7B,IAAAA,MAAM,EAANA,MAFA;AAGAC,IAAAA,KAAK,EAALA;AAHA,GAAP;AAKA;;AAUD,SAAS6/C,qBAAT,CAA+BtpC,sBAA/B,EAAuDjU,IAAvD,EAA6D+pB,aAA7D,EAA4ErsB,KAA5E,EAAmF2/C,SAAnF,EAA8Fv+C,SAA9F,EAAyG;AACxG,SAAO;AACNkO,IAAAA,IAAI,EAAEk6B,aAAW,CAACnN,cADZ;AAEN9lB,IAAAA,sBAAsB,EAAtBA,sBAFM;AAGNjU,IAAAA,IAAI,EAAJA,IAHM;AAIN+pB,IAAAA,aAAa,EAAbA,aAJM;AAKNrsB,IAAAA,KAAK,EAALA,KALM;AAMN2/C,IAAAA,SAAS,EAATA,SANM;AAONv+C,IAAAA,SAAS,EAATA;AAPM,GAAP;AASA;;AAED,SAAS2+C,cAAT,CAAwBhgD,MAAxB,EAAgCC,KAAhC,EAAuCC,KAAvC,EAA8CmB,SAA9C,EAAyD;AACxD,SAAO;AACNkO,IAAAA,IAAI,EAAEk6B,aAAW,CAAC1P,KAAZ,CAAkBJ,GADlB;AAENrN,IAAAA,aAAa,EAAEtsB,MAFT;AAGNC,IAAAA,KAAK,EAALA,KAHM;AAIN2/C,IAAAA,SAAS,EAAE1/C,KAJL;AAKNmB,IAAAA,SAAS,EAATA;AALM,GAAP;AAOA;;;AAID,sBAAe;AACd4+C,EAAAA,eAAe,EAAfA,eADc;AAEdr/C,EAAAA,WAAW,EAAE2/C,iBAFC;AAGXtU,EAAAA,cAAc,EAAdA;AAHW,CAAf;;ACxMA,IAAMxC,aAAW,GAAGsG,WAAW,CAAClU,IAAZ,CAAiBc,iBAArC;AAEA,IAAMqU,UAAQ,GAAGrjC,OAAM,CAACqjC,QAAP,CAAgBvH,aAAhB,CAAjB;AACA,IAAMoH,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWpH,aAAX,CAAZ;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASwC,gBAAT,CAAwBl4B,gBAAxB,EAA0C/T,MAA1C,EAAkDC,KAAlD,EAAyD+G,KAAzD,EAAgEolC,KAAhE,EAAuEC,OAAvE,EAAgF;AAC5E,SAAO,UAAAtD,QAAQ,EAAI;AACf;AACA;AACA,QAAIh1B,gBAAgB,CAAC9S,MAArB,EAA6B;AACzB8nC,MAAAA,QAAQ,CAAC8H,KAAG,CAAC98B,gBAAD,EAAmB/T,MAAnB,CAAJ,CAAR;AACH,KALc;;;AAQf+oC,IAAAA,QAAQ,CAACiI,UAAQ,CAAChxC,MAAD,EAASC,KAAT,EAAgBmsC,KAAhB,EAAuBplC,KAAvB,EAA8B+M,gBAA9B,EAAgDs4B,OAAhD,CAAT,CAAR;AACH,GATD;AAUH;AAID;;;AAEA,gBAAe;AACXJ,EAAAA,cAAc,EAAdA;AADW,CAAf;;ACjCA,IAAMxC,aAAW,GAAGsG,WAAW,CAAClU,IAAZ,CAAiBa,oBAArC;AAEA,IAAMsU,UAAQ,GAAGrjC,OAAM,CAACqjC,QAAP,CAAgBvH,aAAhB,CAAjB;AACA,IAAMoH,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWpH,aAAX,CAAZ;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASwC,gBAAT,CAAwBx5B,kBAAxB,EAA4CzS,MAA5C,EAAoDC,KAApD,EAA2D+G,KAA3D,EAAkEolC,KAAlE,EAAyE/qC,SAAzE,EAAoF;AAChF,SAAO,UAAA0nC,QAAQ,EAAI;AACf;AACA;AACA,QAAIt2B,kBAAkB,CAACxR,MAAvB,EAA+B;AAC3B8nC,MAAAA,QAAQ,CAAC8H,KAAG,CAACp+B,kBAAD,EAAqBzS,MAArB,CAAJ,CAAR;AACH,KALc;;;AAQf+oC,IAAAA,QAAQ,CAACiI,UAAQ,CAAChxC,MAAD,EAASC,KAAT,EAAgBmsC,KAAhB,EAAuBplC,KAAvB,EAA8ByL,kBAA9B,EAAkDpR,SAAlD,CAAT,CAAR;AACH,GATD;AAUH;AAID;;;AAEA,gBAAe;AACdwvC,EAAAA,GAAG,EAAHA,KADc;AAEX5E,EAAAA,cAAc,EAAdA;AAFW,CAAf;;AC/BA,IAAMxC,aAAW,GAAGsG,WAAW,CAAClU,IAAZ,CAAiBY,YAArC;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMwP,gBAAc,GAAG,SAAjBA,cAAiB,CAACl3B,WAAD,EAAc/U,MAAd,EAAsBC,KAAtB,EAA6BoB,SAA7B,EAA2C;AAC9D,SAAO,UAAA0nC,QAAQ,EAAI;AACrB;AACA,QAAIh0B,WAAJ,EAAiB;AAChB,aAAOg0B,QAAQ,CAAC2W,iBAAe,CAAC3qC,WAAD,EAAc/U,MAAd,EAAsBC,KAAtB,EAA6BoB,SAA7B,CAAhB,CAAf;AACA,KAFD,MAEO;AACN;AACA,aAAO0nC,QAAQ,CAAC4W,mBAAiB,CAAC3/C,MAAD,EAASC,KAAT,EAAgB8U,WAAhB,EAA6B1T,SAA7B,CAAlB,CAAf;AACA;AACE,GARD;AASH,CAVD;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASq+C,iBAAT,CAAyBc,kCAAzB,EAA6Dl0B,aAA7D,EAA4ErsB,KAA5E,EAAmFoB,SAAnF,EAA8F;AAC7F,SAAO,UAAC0nC,QAAD,EAAc;AACpB,QAAMgX,iCAAiC,GAAGF,cAAY,CAACW,kCAAD,CAAtD,CADoB;;AAIpB,QAAMz+C,KAAK,GAAGF,MAAM,CAAC2F,IAAP,CAAYu4C,iCAAZ,EAA+C,CAA/C,CAAd;AAEA,QAAIU,0BAA0B,GAAG,EAAjC;;AACA,+BAAQD,kCAAR,EAA4C,UAACn+C,KAAD,EAAQyR,oBAAR,EAAiC;AAC5E2sC,MAAAA,0BAA0B,CAAC3sC,oBAAD,CAA1B,GAAmDzR,KAAK,CAACE,IAAzD;AACA,KAFD;;AAKAwmC,IAAAA,QAAQ,CAAC+W,uBAAqB,CAACW,0BAAD,EAA6B1+C,KAA7B,EAAoCuqB,aAApC,EAAmDrsB,KAAnD,EAA0D,CAAC8/C,iCAAD,CAA1D,EAA+F1+C,SAA/F,CAAtB,CAAR,CAZoB;AAgBpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAxBD;AAyBA;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASs+C,mBAAT,CAA2B3/C,MAA3B,EAAmCC,KAAnC,EAA0C8U,WAA1C,EAAuD1T,SAAvD,EAAkE;AACjE,MAAM0+C,iCAAiC,GAAGF,cAAY,CAAC9qC,WAAD,CAAtD;AACG,SAAOirC,gBAAc,CAAChgD,MAAD,EAASC,KAAT,EAAgB,CAAC8/C,iCAAD,CAAhB,EAAqD1+C,SAArD,CAArB;AACH;AAoBD;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS4+C,iBAAT,CAAyBjgD,MAAzB,EAAiCC,KAAjC,EAAwC8B,KAAxC,EAA+CwlB,KAA/C,EAAsD;AAClD,MAAMlmB,SAAS,GAAG,IAAlB,CADkD;;AAIlD,MAAM6+C,YAAY,GAAGp/C,4BAASymB,KAAT,EAAgB,UAACxmB,GAAD,EAAM6lB,IAAN,EAAe;AAChD,QAAMu5B,MAAM,GAAGj5B,YAAY,CAACN,IAAD,CAA3B;AACA7lB,IAAAA,GAAG,CAACo/C,MAAD,CAAH,GAAc,IAAd;AACA,WAAOp/C,GAAP;AACH,GAJoB,EAIlB,EAJkB,CAArB;;AAKA,MAAMb,KAAK,uBACN6B,KADM,EACEm+C,YADF,CAAX;;AAGA,SAAOF,gBAAc,CAAChgD,MAAD,EAASC,KAAT,EAAgB,CAACC,KAAD,CAAhB,EAAyBmB,SAAzB,CAArB;AACH;;AAID;AACA;AACA;AACA;AACA;;;AACA,SAASw+C,cAAT,CAAsBY,0BAAtB,EAAkD;AACjD,MAAMV,iCAAiC,GAAG,EAA1C;;AACA,sCAAkCl+C,MAAM,CAACC,OAAP,CAAe2+C,0BAAf,CAAlC,uCAA8E;AAAA;AAAA,QAAlEC,KAAkE;AAAA,QAA3DN,UAA2D;;AAC7E,yCAA6Bv+C,MAAM,CAACC,OAAP,CAAes+C,UAAU,CAACC,YAA1B,CAA7B,wCAAsE;AAAA;AAAA,UAA1Dt+C,KAA0D;AAAA,UAAnDwlB,KAAmD;;AACrE,UAAG,CAACw4B,iCAAiC,CAACh+C,KAAD,CAArC,EAA8C;AAC7Cg+C,QAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,GAA2C,EAA3C;AACA;;AACD,2CAA+BF,MAAM,CAACC,OAAP,CAAeylB,KAAf,CAA/B,wCAAsD;AAAA;;AAAA;AAAA,YAA1CX,IAA0C;AAAA,YAApCa,QAAoC;;AACrD;AACA,YAAGs4B,iCAAH,aAAGA,iCAAH,wCAAGA,iCAAiC,CAAGh+C,KAAH,CAApC,kDAAG,sBAA6C6kB,IAA7C,CAAH,EAAuD;AACtDm5B,UAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,sCACIm5B,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,CADJ,2BAEE85B,KAFF,EAEUj5B,QAFV;AAIA,SALD,MAKO;AACN;AACAs4B,UAAAA,iCAAiC,CAACh+C,KAAD,CAAjC,CAAyC6kB,IAAzC,wBACE85B,KADF,EACUj5B,QADV;AAGA;AACD;AACD;AACD;;AAED,SAAOs4B,iCAAP;AACA;;;AAKD,SAASQ,mBAAT,CAA4BvgD,MAA5B,EAAoCC,KAApC,EAA2C;AAC1C,SAAO;AACAsP,IAAAA,IAAI,EAAEk6B,aAAW,CAAC1P,KAAZ,CAAkBkB,MADxB;AAEAj7B,IAAAA,MAAM,EAANA,MAFA;AAGAC,IAAAA,KAAK,EAALA;AAHA,GAAP;AAKA;;AAWD,SAAS6/C,uBAAT,CAA+Br5B,mBAA/B,EAAoD1kB,KAApD,EAA2DuqB,aAA3D,EAA0ErsB,KAA1E,EAAiF2/C,SAAjF,EAA4Fv+C,SAA5F,EAAuG;AACtG,SAAO;AACNkO,IAAAA,IAAI,EAAEk6B,aAAW,CAACnN,cADZ;AAEN7V,IAAAA,mBAAmB,EAAnBA,mBAFM;AAEe1kB,IAAAA,KAAK,EAALA,KAFf;AAEsBuqB,IAAAA,aAAa,EAAbA,aAFtB;AAEqCrsB,IAAAA,KAAK,EAALA,KAFrC;AAE4C2/C,IAAAA,SAAS,EAATA,SAF5C;AAEuDv+C,IAAAA,SAAS,EAATA;AAFvD,GAAP;AAIA;;AAED,SAAS2+C,gBAAT,CAAwBhgD,MAAxB,EAAgCC,KAAhC,EAAuCC,KAAvC,EAA8CmB,SAA9C,EAAyD;AACxD,SAAO;AACNkO,IAAAA,IAAI,EAAEk6B,aAAW,CAAC1P,KAAZ,CAAkBJ,GADlB;AAENrN,IAAAA,aAAa,EAAEtsB,MAFT;AAGNC,IAAAA,KAAK,EAALA,KAHM;AAIN2/C,IAAAA,SAAS,EAAE1/C,KAJL;AAKNmB,IAAAA,SAAS,EAATA;AALM,GAAP;AAOA;;;AAID,gBAAe;AACd4+C,EAAAA,eAAe,EAAfA,iBADc;AAEdr/C,EAAAA,WAAW,EAAE2/C,mBAFC;AAGXtU,EAAAA,cAAc,EAAdA;AAHW,CAAf;;AC7LA;AACA;AACA;AACO,IAAM0U,wBAAwB,GAAG,CAAC,QAAD,EAAW,cAAX,CAAjC;;ACWP,IAAMC,sBAAsB,GAAG;AAC3BlT,EAAAA,MAAM,EAAE,CADmB;AAE3BL,EAAAA,KAAK,EAAE;AAFoB,CAA/B;AAKA;AACA;AACA;AACA;AACA;;AACA,IAAMwT,WAAW,GAAG,SAAdA,WAAc,CAAC1/C,KAAD,EAAW;AAC3B,MAAMygB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;AACA,MAAM8rC,SAAS,GAAGrrB,WAAW,CAACsrB,eAAZ,IAA+BC,sBAAc,CAACD,eAAhE;AACA,SAAOD,SAAP;AACH,CAJD;;AAMA,IAAM6T,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,uBAAD,EAA0BC,qBAA1B,EAAiD/T,SAAjD,EAA+D;AACzF;AACA,MAAMgU,aAAa,GAAG95C,IAAI,CAACqG,GAAL,CAASuzC,uBAAT,EAAkCC,qBAAlC,CAAtB;;AACA,MAAGC,aAAa,KAAK,CAArB,EAAwB;AACpB,WAAO,CAAP;AACH,GAFD,MAEO;AACH,QAAM1T,kBAAkB,GAAGpmC,IAAI,CAACqmC,IAAL,CAAU,CAACyT,aAAa,GAAGhU,SAAjB,IAA8BA,SAAxC,CAA3B;AACA,WAAOM,kBAAP;AACH;AACJ,CATD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS2T,2BAAT,CAAqCC,YAArC,EAAmD70B,aAAnD,EAAkErT,QAAlE,EAA4EhZ,KAA5E,EAAmFmhD,mBAAnF,EAAwG5E,qBAAxG,EAA+HuE,uBAA/H,EAAwJC,qBAAxJ,EAAiN;AAAA,MAAlCK,2BAAkC,uEAAJ,EAAI;AAC7M,SAAO,UAACtY,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAMiE,SAAS,GAAG4T,WAAW,CAAC7X,QAAQ,EAAT,CAA7B,CAD2B;AAI3B;;AACA,QAAMr6B,eAAe,GAAG,IAAxB;AACA,QAAMyX,cAAc,GAAG,IAAvB;AACA,QAAMa,WAAW,GAAG,IAApB;AACA,QAAMqmB,QAAQ,GAAG,EAAjB,CAR2B;;AAW3B,QAAMgU,2BAA2B,GAAGR,qBAAqB,CAACC,uBAAD,EAA0BC,qBAA1B,EAAiD/T,SAAjD,CAAzD;AACA,QAAIsU,eAAe,GAAG,CAAtB;AACA,QAAMC,aAAa,GAAG,IAAtB;;AACA,SAAK,IAAI7gD,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI2gD,2BAArB,EAAkD3gD,CAAC,EAAnD,EAAuD;AACnD,UAAM6S,SAAS,GAAG;AACdk6B,QAAAA,MAAM,EAAG/sC,CAAD,GAAMssC,SADA;AAEdI,QAAAA,KAAK,EAAEJ;AAFO,OAAlB;AAKAsU,MAAAA,eAAe,GAAG5gD,CAAlB;AACA,UAAM0/C,YAAY,GAAG;AACjB94B,QAAAA,KAAK,EAAE,CAAC+E,aAAa,CAAC/E,KAAd,CAAoBg6B,eAApB,CAAD;AADU,OAArB;AAGAjU,MAAAA,QAAQ,CAAC5rC,IAAT,CAAcqnC,QAAQ,CAAC0F,iBAAe,CAACx1B,QAAD,EAAWzF,SAAX,EAAsByT,WAAtB,EAAmCo5B,YAAnC,EAAiD/zB,aAAjD,EAAgE3d,eAAhE,EAAiFwyC,YAAjF,EAA+FK,aAA/F,EAA8Gp7B,cAA9G,EAA8HnmB,KAA9H,EAAqImhD,mBAArI,EAA0J5E,qBAA1J,CAAhB,CAAtB;AACH,KAzB0B;AA4B3B;AACA;;;AACA,QAAMiF,uBAAuB,GAAGn1B,aAAa,CAAC/E,KAAd,CAAoBtmB,MAApD,CA9B2B;;AAiC3B,SAAK,IAAIN,EAAC,GAAI4gD,eAAe,GAAG,CAAhC,EAAoC5gD,EAAC,GAAG8gD,uBAAxC,EAAiE9gD,EAAC,EAAlE,EAAsE;AAClE,UAAM0/C,aAAY,GAAG;AACjB94B,QAAAA,KAAK,EAAE,CAAC+E,aAAa,CAAC/E,KAAd,CAAoB5mB,EAApB,CAAD;AADU,OAArB;AAIA,UAAM6S,UAAS,GAAG,EAAlB;AACA,UAAMkuC,sBAAsB,GAAG,KAA/B;AACApU,MAAAA,QAAQ,CAAC5rC,IAAT,CAAcqnC,QAAQ,CAAC0F,iBAAe,CAACx1B,QAAD,EAAWzF,UAAX,EAAsByT,WAAtB,EAAmCo5B,aAAnC,EAAiD/zB,aAAjD,EAAgE3d,eAAhE,EAAiFwyC,YAAjF,EAA+FO,sBAA/F,EAAuHt7B,cAAvH,EAAuInmB,KAAvI,EAA8ImhD,mBAA9I,EAAmK5E,qBAAnK,CAAhB,CAAtB;AACH;;AAED,WAAO7O,OAAO,CAACC,GAAR,CAAYN,QAAZ,EAAsBnF,IAAtB,CAA2B,YAAmB;AAAA,UAAlBC,QAAkB,uEAAP,EAAO;;AACjD;AACA;AACA;AACA;AACA,UAAMuZ,uBAAuB,GAAGt7B,CAAC,CAACu7B,WAAF,CAAcxZ,QAAQ,CAACzhC,GAAT,CAAa,UAAAkO,CAAC;AAAA;;AAAA,eAAIA,CAAJ,aAAIA,CAAJ,kCAAIA,CAAC,CAAEtS,IAAP,qEAAI,QAASkQ,kBAAb,0DAAI,sBAA6B9L,GAA7B,CAAiC,UAAAk7C,GAAG;AAAA,iBAAK;AAACtyC,YAAAA,IAAI,EAAEsyC,GAAG,CAACt/C,IAAJ,CAASgN,IAAhB;AAAsB3N,YAAAA,GAAG,EAAEigD,GAAG,CAACjgD;AAA/B,WAAL;AAAA,SAApC,CAAJ;AAAA,OAAd,CAAd,CAAhC;;AACA,UAAMkgD,uBAAuB,gCAAOH,uBAAP,sBAAmCN,2BAAnC,EAA7B;AACA,UAAMU,wBAAwB,GAAGD,uBAAuB,CAAC1/C,KAAxB,CAA8B,UAAA4/C,EAAE;AAAA,eAAI,CAACrB,wBAAwB,CAACj+C,QAAzB,CAAkCs/C,EAAE,CAACzyC,IAArC,CAAL;AAAA,OAAhC,CAAjC,CAPiD;AAUjD;;AACA,UAAGwyC,wBAAH,EAA6B;AACzB;AACAhZ,QAAAA,QAAQ,CAACh0B,SAAW,CAACnU,WAAZ,CAAwBwgD,mBAAxB,EAA6CnhD,KAA7C,CAAD,CAAR;AACA8oC,QAAAA,QAAQ,CAAC7xB,eAAa,CAACtW,WAAd,CAA0B47C,qBAA1B,EAAiDv8C,KAAjD,CAAD,CAAR;AACC;AACR,KAhBM,CAAP;AAiBH,GA5DD;AA6DH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASgiD,wBAAT,CAAkC31B,aAAlC,EAAiDrT,QAAjD,EAA2DhZ,KAA3D,EAAkEmhD,mBAAlE,EAAuF5E,qBAAvF,EAA8G;AAC1G,SAAO,UAACzT,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAMiE,SAAS,GAAG4T,WAAW,CAAC7X,QAAQ,EAAT,CAA7B;AAEA,QAAMx1B,SAAS,GAAG;AACd;AACA;AACAk6B,MAAAA,MAAM,EAAE,CAHM;AAIdL,MAAAA,KAAK,EAAEJ;AAJO,KAAlB,CAH2B;AAW3B;AACA;AAEA;;AACA,QAAMiV,kBAAkB,GAAGjZ,MAAM,CAAC1mC,IAAP,CAAY2U,aAAZ,CAA0BrX,QAA1B,CAAmCmpC,QAAQ,EAA3C,EAA+C,gBAA/C,EAAkEwT,qBAAlE,EAAyFv8C,KAAzF,KAAmG,EAA9H,CAf2B;;AAkB3B,QAAMkiD,yBAAyB,GAAG76B,eAAe,CAAC46B,kBAAD,EAAqB51B,aAArB,CAAf,IAAsD,EAAxF;AACA,QAAM81B,iCAAiC,GAAGD,yBAAyB,CAACx7C,GAA1B,CAA8BwgB,WAA9B,CAA1C,CAnB2B;;AAsB3B,QAAMjR,kBAAkB,GAAG+yB,MAAM,CAAC1mC,IAAP,CAAY2T,kBAAZ,CAA+BrW,QAA/B,CAAwCmpC,QAAQ,EAAhD,EAAqDwT,qBAArD,EAA4Ev8C,KAA5E,CAA3B;AACA,QAAM+O,oBAAoB,GAAGi6B,MAAM,CAAC1mC,IAAP,CAAYyM,oBAAZ,CAAiCnP,QAAjC,CAA0CmpC,QAAQ,EAAlD,EAAuDwT,qBAAvD,EAA8Ev8C,KAA9E,CAA7B;AACA,QAAIoiD,kBAAkB,GAAG,EAAE,CAACh8B,CAAC,CAACC,OAAF,CAAUpQ,kBAAV,CAAD,IAAkC,CAACmQ,CAAC,CAACC,OAAF,CAAUtX,oBAAV,CAArC,CAAzB,CAxB2B;;AA2B3B,QAAMmyC,YAAY,GAAG,KAArB,CA3B2B;;AA8B3B,QAAMxyC,eAAe,GAAG,IAAxB;AAEA,QAAMyX,cAAc,GAAG,IAAvB;AACA,QAAMa,WAAW,GAAG,IAApB,CAjC2B;;AAoC3B,QAAMq7B,6BAA6B,qCAC5Bh2B,aAD4B;AAE/B/E,MAAAA,KAAK,EAAE66B;AAFwB,MAAnC,CApC2B;;;AAyC3B,QAAGC,kBAAH,EAAuB;AACnB,UAAMhC,YAAY,GAAG,IAArB;AACA,UAAMmB,aAAa,GAAG,IAAtB,CAFmB;;AAInB,aAAOzY,QAAQ,CAAC0F,iBAAe,CAACx1B,QAAD,EAAWzF,SAAX,EAAsByT,WAAtB,EAAmCo5B,YAAnC,EAAiDiC,6BAAjD,EAAgF3zC,eAAhF,EAAiGwyC,YAAjG,EAA+GK,aAA/G,EAA8Hp7B,cAA9H,EAA8InmB,KAA9I,EAAqJmhD,mBAArJ,EAA0K5E,qBAA1K,CAAhB,CAAR,CAA0NrU,IAA1N,CAA+N,UAACC,QAAD,EAAc;AAAA;;AAChP,YAAGA,QAAQ,YAAYK,KAAvB,EAA8B;AAC1B;AAEH;;AAED,YAAMh2B,kBAAkB,GAAG,CAAA21B,QAAQ,SAAR,IAAAA,QAAQ,WAAR,8BAAAA,QAAQ,CAAE7lC,IAAV,kEAAgBkQ,kBAAhB,KAAsC,EAAjE;AACA,YAAM8vC,yBAAyB,GAAG9vC,kBAAkB,CAAC9L,GAAnB,CAAuB,UAAAk7C,GAAG;AAAA,iBAAK;AAACtyC,YAAAA,IAAI,EAAEsyC,GAAG,CAACt/C,IAAJ,CAASgN,IAAhB;AAAsB3N,YAAAA,GAAG,EAAEigD,GAAG,CAACjgD;AAA/B,WAAL;AAAA,SAA1B,CAAlC;AAEA,YAAMm/C,uBAAuB,GAAG3Y,QAAQ,CAACgE,KAAT,CAAel2B,kBAA/C;AACA,YAAM8qC,qBAAqB,GAAG5Y,QAAQ,CAACgE,KAAT,CAAer4B,gBAA7C;AACA,eAAOg1B,QAAQ,CAACmY,2BAA2B,CAACC,YAAD,EAAemB,6BAAf,EAA8CrpC,QAA9C,EAAwDhZ,KAAxD,EAA+DmhD,mBAA/D,EAAoF5E,qBAApF,EAA2GuE,uBAA3G,EAAoIC,qBAApI,EAA2JuB,yBAA3J,CAA5B,CAAf;AACH,OAZM,CAAP;AAaH,KAjBD,MAiBO;AACH,UAAMjV,QAAQ,GAAG,EAAjB;AACA,UAAMkU,cAAa,GAAG,KAAtB;;AAFG,iDAGgBW,yBAHhB;AAAA;;AAAA;AAGH,4DAA8C;AAAA,cAAnCv7B,IAAmC;AAC1C,cAAMy5B,cAAY,GAAG;AACjB94B,YAAAA,KAAK,EAAE,CAACX,IAAD;AADU,WAArB;AAIA0mB,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcqnC,QAAQ,CAAC0F,iBAAe,CAACx1B,QAAD,EAAWzF,SAAX,EAAsByT,WAAtB,EAAmCo5B,cAAnC,EAAiD/zB,aAAjD,EAAgE3d,eAAhE,EAAiFwyC,YAAjF,EAA+FK,cAA/F,EAA8Gp7B,cAA9G,EAA8HnmB,KAA9H,EAAqImhD,mBAArI,EAA0J5E,qBAA1J,CAAhB,CAAtB;AACH;AATE;AAAA;AAAA;AAAA;AAAA;;AAUH,aAAO7O,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAP;AACH;AACJ,GAtED;AAuEH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASkV,sBAAT,CAAgCl2B,aAAhC,EAA+CrT,QAA/C,EAAyDhZ,KAAzD,EAAgEmhD,mBAAhE,EAAqF5E,qBAArF,EAA4G;AACxG,SAAO,UAACzT,QAAD,EAAWC,QAAX,EAAwB;AAE3B;AACA;AACA;AAEA;AACA,QAAMyZ,gBAAgB,GAAGxZ,MAAM,CAAC1mC,IAAP,CAAYwS,WAAZ,CAAwBlV,QAAxB,CAAiCmpC,QAAQ,EAAzC,EAA8CoY,mBAA9C,EAAmEnhD,KAAnE,KAA6E,EAAtG,CAP2B;;AAU3B,QAAMyiD,uBAAuB,GAAGp7B,eAAe,CAACm7B,gBAAD,EAAmBn2B,aAAnB,CAAf,IAAoD,EAApF;AACA,QAAMghB,QAAQ,GAAG,EAAjB;;AAX2B,gDAYRoV,uBAZQ;AAAA;;AAAA;AAY3B,6DAA4C;AAAA,YAAjC97B,IAAiC;AACxC,YAAMy5B,YAAY,GAAG;AACjB94B,UAAAA,KAAK,EAAE,CAACX,IAAD;AADU,SAArB;AAIA,YAAMpT,SAAS,GAAG,EAAlB;AACA,YAAM7E,eAAe,GAAG,IAAxB;AACA,YAAMwyC,YAAY,GAAG,IAArB;AACA,YAAMK,aAAa,GAAG,KAAtB;AACA,YAAMp7B,cAAc,GAAG,IAAvB;AACA,YAAMa,WAAW,GAAG,IAApB;AACAqmB,QAAAA,QAAQ,CAAC5rC,IAAT,CAAcqnC,QAAQ,CAAC0F,iBAAe,CAACx1B,QAAD,EAAWzF,SAAX,EAAsByT,WAAtB,EAAmCo5B,YAAnC,EAAiD/zB,aAAjD,EAAgE3d,eAAhE,EAAiFwyC,YAAjF,EAA+FK,aAA/F,EAA8Gp7B,cAA9G,EAA8HnmB,KAA9H,EAAqImhD,mBAArI,EAA0J5E,qBAA1J,CAAhB,CAAtB;AACH;AAxB0B;AAAA;AAAA;AAAA;AAAA;;AAyB3B,WAAO7O,OAAO,CAACC,GAAR,CAAYN,QAAZ,CAAP;AACH,GA1BD;AA2BH;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASqV,sBAAT,CAAgCr2B,aAAhC,EAA+CrT,QAA/C,EAAyDhZ,KAAzD,EAAgEmhD,mBAAhE,EAAqF5E,qBAArF,EAA4G;AACxG,SAAO,UAACzT,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAMiE,SAAS,GAAG4T,WAAW,CAAC7X,QAAQ,EAAT,CAA7B;AAEA,QAAMx1B,SAAS,GAAG;AACd;AACA;AACAk6B,MAAAA,MAAM,EAAE,CAHM;AAIdL,MAAAA,KAAK,EAAEJ;AAJO,KAAlB,CAH2B;AAW3B;;AACA,QAAMt+B,eAAe,GAAG,IAAxB;AACA,QAAMwyC,YAAY,GAAG,IAArB;AACA,QAAMK,aAAa,GAAG,IAAtB;AACA,QAAMp7B,cAAc,GAAG,IAAvB;AACA,QAAMa,WAAW,GAAG,IAApB;AACA,QAAMo5B,YAAY,GAAG,IAArB;;AACA,QAAG/zB,aAAa,IAAI,CAACjG,CAAC,CAACC,OAAF,CAAUgG,aAAV,CAArB,EAA+C;AAC3C,aAAOyc,QAAQ,CAAC0F,iBAAe,CAACx1B,QAAD,EAAWzF,SAAX,EAAsByT,WAAtB,EAAmCo5B,YAAnC,EAAiD/zB,aAAjD,EAAgE3d,eAAhE,EAAiFwyC,YAAjF,EAA+FK,aAA/F,EAA8Gp7B,cAA9G,EAA8HnmB,KAA9H,EAAqImhD,mBAArI,EAA0J5E,qBAA1J,CAAhB,CAAR,CAA0MrU,IAA1M,CAA+M,UAACC,QAAD,EAAc;AAAA;;AAChO,YAAGA,QAAQ,YAAYK,KAAvB,EAA8B;AAC1B;AAEH;;AAED,YAAMsY,uBAAuB,GAAG3Y,QAAQ,CAACgE,KAAT,CAAel2B,kBAA/C;AACA,YAAM8qC,qBAAqB,GAAG5Y,QAAQ,CAACgE,KAAT,CAAer4B,gBAA7C;AAEA,YAAM6uC,kBAAkB,GAAG9B,qBAAqB,CAACC,uBAAD,EAA0BC,qBAA1B,EAAiD/T,SAAjD,CAAhD;AAEA,YAAMx6B,kBAAkB,GAAG,CAAA21B,QAAQ,SAAR,IAAAA,QAAQ,WAAR,+BAAAA,QAAQ,CAAE7lC,IAAV,oEAAgBkQ,kBAAhB,KAAsC,EAAjE;AACA,YAAM8vC,yBAAyB,GAAG9vC,kBAAkB,CAAC9L,GAAnB,CAAuB,UAAAk7C,GAAG;AAAA,iBAAK;AAACtyC,YAAAA,IAAI,EAAEsyC,GAAG,CAACt/C,IAAJ,CAASgN,IAAhB;AAAsB3N,YAAAA,GAAG,EAAEigD,GAAG,CAACjgD;AAA/B,WAAL;AAAA,SAA1B,CAAlC;AACA,YAAMmgD,wBAAwB,GAAGtvC,kBAAkB,CAACrQ,KAAnB,CAAyB,UAAA4/C,EAAE;AAAA;;AAAA,iBAAI,CAACrB,wBAAwB,CAACj+C,QAAzB,aAAkCs/C,EAAE,CAACz/C,IAArC,6CAAkC,SAASgN,IAA3C,CAAL;AAAA,SAA3B,CAAjC,CAbgO;AAgBhO;AACA;;AACA,YAAIqzC,kBAAkB,KAAK,CAAxB,IAA8Bb,wBAAjC,EAA2D;AACvD;AACAhZ,UAAAA,QAAQ,CAACh0B,SAAW,CAACnU,WAAZ,CAAwBwgD,mBAAxB,EAA6CnhD,KAA7C,CAAD,CAAR;AACA8oC,UAAAA,QAAQ,CAAC7xB,eAAa,CAACtW,WAAd,CAA0B47C,qBAA1B,EAAiDv8C,KAAjD,CAAD,CAAR;AACA;AACH,SALD,MAKO;AACH,iBAAO8oC,QAAQ,CAACmY,2BAA2B,CAACC,YAAD,EAAe70B,aAAf,EAA8BrT,QAA9B,EAAwChZ,KAAxC,EAA+CmhD,mBAA/C,EAAoE5E,qBAApE,EAA2FuE,uBAA3F,EAAoHC,qBAApH,EAA2IuB,yBAA3I,CAA5B,CAAf;AACH;AAEJ,OA3BM,WA2BE,UAAC7T,GAAD,EAAO;AACZ,YAAI,CAAAA,GAAG,SAAH,IAAAA,GAAG,WAAH,YAAAA,GAAG,CAAEC,OAAL,MAAiB,gBAArB,EAAsC;AAClC5F,UAAAA,QAAQ,CAAC6B,YAAY,CAACzlC,WAAD,EAAc0jC,QAAd,EAAwB7oC,MAAxB,EAAgCC,KAAhC,EAAuCwpC,WAAvC,EAAoDX,YAApD,CAAb,CAAR;AACH,SAFD,MAEO;AACH,gBAAM,IAAIL,KAAJ,gCAAkCiG,GAAlC,EAAN;AACH;AACJ,OAjCM,CAAP;AAkCH,KAnCD,MAmCO;AACH,aAAO3F,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiC,IAAIX,KAAJ,CAAU,wBAAV,CAAjC,CAAD,CAAf;AACH;AACJ,GAxDD;AAyDH;AAED;AACA;AACA;AACA;AACA;;;AACA,IAAMoa,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACX,kBAAD,EAAqB51B,aAArB,EAAuC;AACpE,MAAM61B,yBAAyB,GAAG76B,eAAe,CAAC46B,kBAAD,EAAqB51B,aAArB,CAAf,IAAsDA,aAAa,CAAC/E,KAAtG;AACA,SAAQ46B,yBAAyB,IAAIA,yBAAyB,CAAClhD,MAAvD,IAAiEkhD,yBAAyB,CAAClhD,MAA1B,GAAmC,CAArG,GAA0G,IAA1G,GAAiH,KAAxH;AACH,CAHD;AAKA;AACA;AACA;AACA;AACA;;;AACA,IAAM6hD,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACL,gBAAD,EAAmBn2B,aAAnB,EAAqC;AAC/D,MAAMo2B,uBAAuB,GAAGp7B,eAAe,CAACm7B,gBAAD,EAAmBn2B,aAAnB,CAAf,IAAoDA,aAAa,CAAC/E,KAAlG;AACA,SAAQm7B,uBAAuB,IAAIA,uBAAuB,CAACzhD,MAAnD,IAA6DyhD,uBAAuB,CAACzhD,MAAxB,GAAiC,CAA/F,GAAoG,IAApG,GAA2G,KAAlH;AACH,CAHD;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAM8hD,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAC5hD,KAAD,EAAQmK,gBAAR,EAA0BjH,gBAA1B,EAA4C+8C,mBAA5C,EAAiEnhD,KAAjE,EAA2E;AACzG,MAAI+iD,qBAAqB,GAAG,IAA5B;AACA,MAAIC,kBAAkB,GAAG,IAAzB;;AAEA,MAAG5+C,gBAAH,EAAqB;AACjB2+C,IAAAA,qBAAqB,GAAG/Z,MAAM,CAAC1mC,IAAP,CAAYwR,gBAAZ,CAA6BlU,QAA7B,CAAsCsB,KAAtC,EAA6CigD,mBAA7C,EAAkEnhD,KAAlE,CAAxB;AACH,GANwG;;AAazG,SAAO+iD,qBAAqB,KAAK,IAA1B,IAAkCC,kBAAkB,KAAK,IAAhE;AACH,CAdD;AAgBA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAShS,MAAT,CAAgBjxC,MAAhB,EAAwB;AACpB,SAAO,UAAC+oC,QAAD,EAAWC,QAAX,EAAwB;AAE3B;AAF2B,QAGpB/vB,QAHoB,GAGYjZ,MAHZ,CAGpBiZ,QAHoB;AAAA,QAGV1W,IAHU,GAGYvC,MAHZ,CAGVuC,IAHU;AAAA,QAGJ0E,YAHI,GAGYjH,MAHZ,CAGJiH,YAHI;AAAA,QAIpBqlB,aAJoB,GAIH/pB,IAJG,CAIpB+pB,aAJoB;AAAA,QAKpBhhB,gBALoB,GAKkBrE,YALlB,CAKpBqE,gBALoB;AAAA,QAKFjH,gBALE,GAKkB4C,YALlB,CAKF5C,gBALE;AAM3B,QAAM+8C,mBAAmB,GAAGn6C,YAA5B;;AACA,QAAMu1C,qBAAqB,qCAAOv1C,YAAP;AAAqBgS,MAAAA,QAAQ,EAARA;AAArB,MAA3B,CAP2B;;;AAU3B,QAAMhZ,KAAK,GAAG,IAAd;AAEA,QAAMwiD,gBAAgB,GAAGxZ,MAAM,CAAC1mC,IAAP,CAAYwS,WAAZ,CAAwBlV,QAAxB,CAAiCmpC,QAAQ,EAAzC,EAA8CoY,mBAA9C,EAAmEnhD,KAAnE,KAA6E,EAAtG;AACA,QAAMiiD,kBAAkB,GAAGjZ,MAAM,CAAC1mC,IAAP,CAAY2U,aAAZ,CAA0BrX,QAA1B,CAAmCmpC,QAAQ,EAA3C,EAA+C,gBAA/C,EAAiEwT,qBAAjE,EAAwFv8C,KAAxF,KAAkG,EAA7H;AACA,QAAMijD,qBAAqB,GAAGL,wBAAwB,CAACX,kBAAD,EAAqB51B,aAArB,CAAtD;AACA,QAAM62B,kBAAkB,GAAGL,qBAAqB,CAACL,gBAAD,EAAmBn2B,aAAnB,CAAhD;AACA,QAAM82B,+BAA+B,GAAGL,yBAAyB,CAAC/Z,QAAQ,EAAT,EAAa19B,gBAAb,EAA+BjH,gBAA/B,EAAiD+8C,mBAAjD,EAAsEnhD,KAAtE,CAAjE,CAhB2B;AAmB3B;AACA;;AACA,QAAG,CAACmjD,+BAAD,IAAoCD,kBAAvC,EAA2D;AACvD,aAAOpa,QAAQ,CAAC4Z,sBAAsB,CAACr2B,aAAD,EAAgBrT,QAAhB,EAA0BhZ,KAA1B,EAAiCmhD,mBAAjC,EAAsD5E,qBAAtD,CAAvB,CAAf;AACH;;AAED,QAAG2G,kBAAH,EAAuB;AACnB,aAAOpa,QAAQ,CAACyZ,sBAAsB,CAACl2B,aAAD,EAAgBrT,QAAhB,EAA0BhZ,KAA1B,EAAiCmhD,mBAAjC,EAAsD5E,qBAAtD,CAAvB,CAAf;AACH;;AAED,QAAG0G,qBAAH,EAA0B;AACtB,aAAOna,QAAQ,CAACkZ,wBAAwB,CAAC31B,aAAD,EAAgBrT,QAAhB,EAA0BhZ,KAA1B,EAAiCmhD,mBAAjC,EAAsD5E,qBAAtD,CAAzB,CAAf;AACH;AACJ,GAhCD;AAiCH;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS/N,iBAAT,CAAyBx1B,QAAzB,EAAmCzF,SAAnC,EAA8CyT,WAA9C,EAA2Do5B,YAA3D,EAAyE/zB,aAAzE,EAAwF3d,eAAxF,EAAyGwyC,YAAzG,EAAuHK,aAAvH,EAAsIp7B,cAAtI,EAAsJnmB,KAAtJ,EAA6JmhD,mBAA7J,EAAkL5E,qBAAlL,EAAyM;AACxM,SAAO,UAACzT,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAM1B,OAAO,GAAG,4BAAhB;;AAF8B,QAIjBh8B,gBAJiB,GAImC81C,mBAJnC,CAIjB91C,gBAJiB;AAAA,QAICjH,gBAJD,GAImC+8C,mBAJnC,CAIC/8C,gBAJD;AAAA,QAIsBI,SAJtB,4BAImC28C,mBAJnC;;AAKxB,QAAMiC,aAAa,GAAG7vC,SAAS,sBAAOA,SAAP,IAAoBotC,sBAAnD,CALwB;AASxB;AACA;AACA;;AACA,QAAGO,YAAH,EAAiB;AACb,UAAMmC,oBAAoB,GAAG,CAAAjD,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAE94B,KAAd,KAAuB+E,aAAa,CAAC/E,KAAlE;AACAwhB,MAAAA,QAAQ,CAACh0B,SAAW,CAACkrC,eAAZ,CAA4BmB,mBAA5B,EAAiDnhD,KAAjD,EAAwDqsB,aAAa,CAACvqB,KAAtE,EAA6EuhD,oBAA7E,CAAD,CAAR;AACH,KAfuB;AAmBxB;AACA;;;AACA,QAAMC,sBAAsB,GAAG,CAAAlD,YAAY,SAAZ,IAAAA,YAAY,WAAZ,YAAAA,YAAY,CAAE94B,KAAd,KAAuB+E,aAAa,CAAC/E,KAApE;AACAwhB,IAAAA,QAAQ,CAAC7xB,eAAa,CAAC+oC,eAAd,CAA8BzD,qBAA9B,EAAqDv8C,KAArD,EAA4DqsB,aAAa,CAACvqB,KAA1E,EAAiFwhD,sBAAjF,CAAD,CAAR,CAtBwB;;AA2B9B,QAAM9b,OAAO;AACHhjC,MAAAA,SAAS,EAATA;AADG,OAICJ,gBAAgB,IAAI;AAACA,MAAAA,gBAAgB,EAAhBA;AAAD,KAJrB,GAKCiH,gBAAgB,IAAI;AAACA,MAAAA,gBAAgB,EAAhBA;AAAD,KALrB,GAQC2N,QAAQ,IAAI;AAACA,MAAAA,QAAQ,EAARA;AAAD,KARb;AAUH;AACAzF,MAAAA,SAAS,EAAE6vC,aAXR;AAaH9gD,MAAAA,IAAI,kEAEI0kB,WAAW,IAAI;AAACA,QAAAA,WAAW,EAAXA;AAAD,OAFnB,GAQIo5B,YAAY,IAAI;AAACA,QAAAA,YAAY,EAAZA;AAAD,OARpB;AAUA;AACA/zB,QAAAA,aAAa,EAAbA;AAXA,SAqBI3d,eAAe,IAAI;AAACA,QAAAA,eAAe,EAAfA;AAAD,OArBvB;AAuBA;AACAqZ,QAAAA,QAAQ,EAAE,CAAC,CAACm5B,YAxBZ;AA0BA;AACA3tC,QAAAA,SAAS,EAAE,CAAC,CAACguC;AA3Bb,SA8BIp7B,cAAc,IAAI;AAACA,QAAAA,cAAc,EAAdA;AAAD,OA9BtB;AAbD,MAAb;;AA+CA,WAAOihB,OAAO,CAACzlB,WAAD,EAAc0lB,OAAd,EAAuB,MAAvB,EAA+B,IAA/B,EAAqCG,OAArC,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAX,EAAmB;AAClB,cAAM,IAAIV,KAAJ,CAAUS,MAAM,CAACC,MAAP,CAAcN,QAAd,KAA2B,SAArC,CAAN;AACA,OAFD,MAEO;AACS,YAAGK,MAAM,CAAC3mC,IAAV,EAAgB;AAC9B;AACA;AACA;AACA,cAAG,CAAC,CAACi/C,aAAF,IAAmBtY,MAAM,CAAC3mC,IAAP,CAAY2T,kBAA/B,IAAqD,CAACmQ,CAAC,CAACC,OAAF,CAAU4iB,MAAM,CAAC3mC,IAAP,CAAY2T,kBAAtB,CAAzD,EAAoG;AACnG,gBAAMm2B,OAAO,GAAG,IAAhB;AACAtD,YAAAA,QAAQ,CAAC7yB,oBAAkB,CAAC+1B,cAAnB,CAAkC/C,MAAM,CAAC3mC,IAAP,CAAY2T,kBAA9C,EAAkEsmC,qBAAlE,EAAyFv8C,KAAzF,EAAgGuT,SAAS,CAACk6B,MAA1G,EAAkHxE,MAAM,CAACkD,KAAP,CAAal2B,kBAA/H,EAAmJm2B,OAAnJ,CAAD,CAAR;AACA;;AAED,cAAG,CAAC,CAACmV,aAAF,IAAmBtY,MAAM,CAAC3mC,IAAP,CAAYyM,oBAA/B,IAAuD,CAACqX,CAAC,CAACC,OAAF,CAAU4iB,MAAM,CAAC3mC,IAAP,CAAYyM,oBAAtB,CAA3D,EAAwG;AACvG,gBAAMq9B,QAAO,GAAG,IAAhB;AACAtD,YAAAA,QAAQ,CAAC/5B,sBAAoB,CAACi9B,cAArB,CAAoC/C,MAAM,CAAC3mC,IAAP,CAAYyM,oBAAhD,EAAsEwtC,qBAAtE,EAA6Fv8C,KAA7F,EAAoGuT,SAAS,CAACk6B,MAA9G,EAAsHxE,MAAM,CAACkD,KAAP,CAAal2B,kBAAnI,EAAuJm2B,QAAvJ,CAAD,CAAR;AACA;;AAED,cAAGnD,MAAM,CAAC3mC,IAAP,CAAYwS,WAAZ,IAA2Bm0B,MAAM,CAAC3mC,IAAP,CAAY2U,aAA1C,EAAyD;AACxD,gBAAMm1B,SAAO,GAAG,IAAhB;AACAtD,YAAAA,QAAQ,CAAC7xB,eAAa,CAAC+0B,cAAd,CAA6B/C,MAAM,CAAC3mC,IAAP,CAAY2U,aAAzC,EAAwDgyB,MAAM,CAAC3mC,IAAP,CAAYwS,WAApE,EAAiFynC,qBAAjF,EAAwGv8C,KAAxG,EAA+GosC,SAA/G,CAAD,CAAR;AACA,WAjB6B;AAoBZ;AACA;;;AACA,cAAG,CAAC,CAACmV,aAAF,IAAmBtY,MAAM,CAAC3mC,IAAP,CAAYwR,gBAA/B,IAAmD,CAACsS,CAAC,CAACC,OAAF,CAAU4iB,MAAM,CAAC3mC,IAAP,CAAYwR,gBAAtB,CAAvD,EAAgG;AAC5F,gBAAMs4B,SAAO,GAAG,IAAhB;AACAtD,YAAAA,QAAQ,CAACh1B,SAAgB,CAACk4B,cAAjB,CAAgC/C,MAAM,CAAC3mC,IAAP,CAAYwR,gBAA5C,EAA8DqtC,mBAA9D,EAAmFnhD,KAAnF,EAA0FuT,SAAS,CAACk6B,MAApG,EAA4GxE,MAAM,CAACkD,KAAP,CAAar4B,gBAAzH,EAA2Is4B,SAA3I,CAAD,CAAR;AACH;;AAED,cAAG,CAAC,CAACmV,aAAF,IAAmBtY,MAAM,CAAC3mC,IAAP,CAAYkQ,kBAA/B,IAAqD,CAAC4T,CAAC,CAACC,OAAF,CAAU4iB,MAAM,CAAC3mC,IAAP,CAAYkQ,kBAAtB,CAAzD,EAAoG;AAChG,gBAAM45B,SAAO,GAAG,IAAhB;AACAtD,YAAAA,QAAQ,CAACt2B,SAAkB,CAACw5B,cAAnB,CAAkC/C,MAAM,CAAC3mC,IAAP,CAAYkQ,kBAA9C,EAAkE2uC,mBAAlE,EAAuFnhD,KAAvF,EAA8FuT,SAAS,CAACk6B,MAAxG,EAAgHxE,MAAM,CAACkD,KAAP,CAAar4B,gBAA7H,EAA+Is4B,SAA/I,CAAD,CAAR;AACH;;AAED,cAAG,CAAC,CAAC8U,YAAL,EAAmB;AACf;AACA;AACA,gBAAM9U,SAAO,GAAG,IAAhB;AACAtD,YAAAA,QAAQ,CAACh0B,SAAW,CAACk3B,cAAZ,CAA2B/C,MAAM,CAAC3mC,IAAP,CAAYwS,WAAvC,EAAoDqsC,mBAApD,EAAyEnhD,KAAzE,EAAgFosC,SAAhF,CAAD,CAAR;AACH;;AAED,iBAAOnD,MAAP;AACH,SAxCD,MAwCO;AACH,cAAMR,KAAK,GAAG,IAAID,KAAJ,CAAU,SAAV,CAAd;AACAM,UAAAA,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiCV,KAAjC,CAAD,CAAR;AACA,iBAAOA,KAAP;AACH;AAChB;AACD,KAnDK,WAoDC,UAAAA,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACgL,OAAa,CAAC3K,kBAAd,CAAiCV,KAAjC,CAAD,CAAR;AACA,aAAOA,KAAP,CAFe;AAGf,KAvDK,CAAP;AAwDA,GAlID;AAmIA;;AAED,kBAAe;AACXxxB,EAAAA,aAAa,EAAbA,eADW;AAEXlI,EAAAA,oBAAoB,EAApBA,sBAFW;AAGXkH,EAAAA,kBAAkB,EAAlBA,oBAHW;AAIXnB,EAAAA,WAAW,EAAXA,SAJW;AAKXtC,EAAAA,kBAAkB,EAAlBA,SALW;AAMXsB,EAAAA,gBAAgB,EAAhBA,SANW;AAQXk9B,EAAAA,MAAM,EAANA,MARW;AAQH;AACRuR,EAAAA,sBAAsB,EAAtBA,sBATW;AASa;AACxBG,EAAAA,sBAAsB,EAAtBA,sBAVW;;AAAA,CAAf;;ACjiBA,IAAM3b,KAAG,GAAG,CAAZ;;AAKA,SAASwc,eAAT,CAAyBr6B,GAAzB,EAA8Bs6B,QAA9B,EAAwC/b,GAAxC,EAA6C;AAC5C,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,QAAMpB,kBAAkB,GAAGqB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,oBAAxC,CAA3B;AACA,QAAM0mC,cAAc,GAAGoB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,gBAAxC,CAAvB;AACA,QAAM2mC,cAAc,GAAGmB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,gBAAxC,CAAvB;AACA,QAAMuiD,6BAA6B,GAAGza,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,+BAAxC,CAAtC;;AAEA,QAAI,CAACsB,8BAAW0mB,GAAX,CAAL,EAAsB;AACrBA,MAAAA,GAAG,GAAGhpB,0BAAO8oC,MAAM,CAAC9f,GAAP,CAAWw6B,OAAX,CAAmB3a,QAAQ,EAA3B,CAAP,EAAuC;AAACpnC,QAAAA,GAAG,EAAEunB;AAAN,OAAvC,CAAN;AACA;;AACD,QAAI,CAAC1mB,8BAAWghD,QAAX,CAAL,EAA2B;AAC1BA,MAAAA,QAAQ,GAAGtjD,0BAAO6oC,QAAQ,GAAG4a,SAAX,CAAqBrhD,IAA5B,EAAkC;AAACX,QAAAA,GAAG,EAAE6hD;AAAN,OAAlC,CAAX;AACA;;AAED1a,IAAAA,QAAQ,CAAC8a,uBAAuB,CAAC16B,GAAG,CAACvnB,GAAL,EAAU6hD,QAAQ,CAAC7hD,GAAnB,CAAxB,CAAR;AAEA,QAAIgO,GAAG,GAAGg4B,kBAAkB,GAAG,KAArB,GAA6BjvB,wBAAI,CAACtG,IAAL,CAAUw1B,cAAV,EAA0BC,cAA1B,EAA0C4b,6BAA1C,CAAvC;AACA,QAAIxb,IAAI,GAAG;AACV3lC,MAAAA,IAAI,EAAE;AACLylB,QAAAA,QAAQ,EAAEmB,GAAG,CAACnB,QADT;AAELvY,QAAAA,SAAS,EAAEg0C,QAAQ,CAACh0C;AAFf;AADI,KAAX;AAOA,WAAOw3B,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,MADS;AAEjBW,MAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe4nC,IAAf,CAFW;AAGjBD,MAAAA,OAAO,EAAE;AACR,wBAAgB;AADR;AAHQ,KAAN,CAAL,CAMJE,IANI,CAMC,UAAAC,QAAQ,EAAI;AACnBkB,MAAAA,OAAO,CAACwa,GAAR,CAAY,2BAAZ,EAAyC1b,QAAzC;;AACA,UAAIA,QAAQ,CAACE,EAAb,EAAiB;AAChBF,QAAAA,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AAC5B,cAAIA,IAAJ,EAAU;AACTwmC,YAAAA,QAAQ,CAACgb,4BAA4B,CAAC56B,GAAG,CAACvnB,GAAL,EAAU6hD,QAAQ,CAAC7hD,GAAnB,EAAwBW,IAAI,CAACyhD,KAA7B,CAA7B,CAAR;AACA,WAFD,MAEO;AACNjb,YAAAA,QAAQ,CAACkb,0BAA0B,CAAC96B,GAAG,CAACvnB,GAAL,EAAU6hD,QAAQ,CAAC7hD,GAAnB,EAAwB,kBAAxB,CAA3B,CAAR;AACA;AACD,SAND,WAMS,UAAS8sC,GAAT,EAAa;AACrB,cAAIhH,GAAG,GAAG,CAAV,EAAY;AACX8b,YAAAA,eAAe,CAACr6B,GAAD,EAAMs6B,QAAN,EAAgB/b,GAAG,GAAG,CAAtB,CAAf;AACA;AACD,SAVD;AAWA,OAZD,MAYO;AACNqB,QAAAA,QAAQ,CAACkb,0BAA0B,CAAC96B,GAAG,CAACvnB,GAAL,EAAU6hD,QAAQ,CAAC7hD,GAAnB,EAAwBwmC,QAAxB,CAA3B,CAAR;AACA;AACD,KAvBM,CAAP;AAyBA,GAjDD;AAkDA;;AAED,SAAS8b,iBAAT,CAA2B1gD,KAA3B,EAAkCigD,QAAlC,EAA4C/b,GAA5C,EAAiD;AAChD,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,QAAMpB,kBAAkB,GAAGqB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,oBAAxC,CAA3B;AACA,QAAM0mC,cAAc,GAAGoB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,gBAAxC,CAAvB;AACA,QAAM2mC,cAAc,GAAGmB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,gBAAxC,CAAvB;AACA,QAAMuiD,6BAA6B,GAAGza,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCzX,KAAjC,EAAwC,+BAAxC,CAAtC;;AAEA,QAAI,CAACsB,8BAAWe,KAAX,CAAL,EAAwB;AACvBA,MAAAA,KAAK,GAAGrD,0BAAO8oC,MAAM,CAAC5+B,MAAP,CAAcyjB,SAAd,CAAwBkb,QAAQ,EAAhC,CAAP,EAA4C;AAACpnC,QAAAA,GAAG,EAAE4B;AAAN,OAA5C,CAAR;AACA;;AACD,QAAI,CAACf,8BAAWghD,QAAX,CAAL,EAA2B;AAC1BA,MAAAA,QAAQ,GAAGtjD,0BAAO6oC,QAAQ,GAAG4a,SAAX,CAAqBrhD,IAA5B,EAAkC;AAACX,QAAAA,GAAG,EAAE6hD;AAAN,OAAlC,CAAX;AACA;;AAED1a,IAAAA,QAAQ,CAACob,yBAAyB,CAAC3gD,KAAK,CAAC5B,GAAP,EAAY6hD,QAAQ,CAAC7hD,GAArB,CAA1B,CAAR;AAEA,QAAIgO,GAAG,GAAGg4B,kBAAkB,GAAG,KAArB,GAA6BjvB,wBAAI,CAACtG,IAAL,CAAUw1B,cAAV,EAA0BC,cAA1B,EAA0C4b,6BAA1C,CAAvC;AACA,QAAIxb,IAAI,GAAG;AACV3lC,MAAAA,IAAI,EAAE;AACLylB,QAAAA,QAAQ,EAAExkB,KAAK,CAACwkB,QADX;AAELvY,QAAAA,SAAS,EAAEg0C,QAAQ,CAACh0C;AAFf;AADI,KAAX;AAOA,WAAOw3B,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,MADS;AAEjBW,MAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe4nC,IAAf,CAFW;AAGjBD,MAAAA,OAAO,EAAE;AACR,wBAAgB;AADR;AAHQ,KAAN,CAAL,CAMJE,IANI,CAMC,UAAAC,QAAQ,EAAI;AACnBkB,MAAAA,OAAO,CAACwa,GAAR,CAAY,2BAAZ,EAAyC1b,QAAzC;;AACA,UAAIA,QAAQ,CAACE,EAAb,EAAiB;AAChBF,QAAAA,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AAC5B,cAAIA,IAAJ,EAAU;AACTwmC,YAAAA,QAAQ,CAACqb,8BAA8B,CAAC5gD,KAAK,CAAC5B,GAAP,EAAY6hD,QAAQ,CAAC7hD,GAArB,EAA0BW,IAAI,CAACyhD,KAA/B,CAA/B,CAAR;AACA,WAFD,MAEO;AACNjb,YAAAA,QAAQ,CAACsb,4BAA4B,CAAC7gD,KAAK,CAAC5B,GAAP,EAAY6hD,QAAQ,CAAC7hD,GAArB,EAA0B,kBAA1B,CAA7B,CAAR;AACA;AACD,SAND,WAMS,UAAS8sC,GAAT,EAAa;AACrB,cAAIhH,GAAG,GAAG,CAAV,EAAY;AACXwc,YAAAA,iBAAiB,CAAC1gD,KAAD,EAAQigD,QAAR,EAAkB/b,GAAG,GAAG,CAAxB,CAAjB;AACA;AACD,SAVD;AAWA,OAZD,MAYO;AACNqB,QAAAA,QAAQ,CAACsb,4BAA4B,CAAC7gD,KAAK,CAAC5B,GAAP,EAAY6hD,QAAQ,CAAC7hD,GAArB,EAA0BwmC,QAA1B,CAA7B,CAAR;AACA;AACD,KAvBM,CAAP;AAwBA,GAhDD;AAiDA;;AAED,SAASkc,eAAT,CAAyB1iD,GAAzB,EAA8BomB,QAA9B,EAAwCy7B,QAAxC,EAAkD/b,GAAlD,EAAuD;AACtD,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;;AAEA,QAAI,CAACsB,8BAAWghD,QAAX,CAAL,EAA2B;AAC1BA,MAAAA,QAAQ,GAAGtjD,0BAAOgB,KAAK,CAACyiD,SAAN,CAAgBrhD,IAAvB,EAA6B;AAACX,QAAAA,GAAG,EAAE6hD;AAAN,OAA7B,CAAX;AACA;;AAED1a,IAAAA,QAAQ,CAACwb,4BAA4B,CAAC3iD,GAAD,EAAMomB,QAAN,EAAgBy7B,QAAQ,CAAC7hD,GAAzB,CAA7B,CAAR;AAEA,QAAIgO,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkElmB,WAAW,CAAC8hC,6BAA9E,CAAnD;AACA,QAAIxb,IAAI,GAAG;AACV3lC,MAAAA,IAAI,EAAE;AACLylB,QAAAA,QAAQ,EAAEA,QADL;AAELvY,QAAAA,SAAS,EAAEg0C,QAAQ,CAACh0C;AAFf;AADI,KAAX;AAOA,WAAOw3B,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,MADS;AAEjBW,MAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe4nC,IAAf,CAFW;AAGjBD,MAAAA,OAAO,EAAE;AACR,wBAAgB;AADR;AAHQ,KAAN,CAAL,CAMJE,IANI,CAMC,UAAAC,QAAQ,EAAI;AACnBkB,MAAAA,OAAO,CAACwa,GAAR,CAAY,2BAAZ,EAAyC1b,QAAzC;;AACA,UAAIA,QAAQ,CAACE,EAAb,EAAiB;AAChBF,QAAAA,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AAC5B,cAAIA,IAAJ,EAAU;AACTwmC,YAAAA,QAAQ,CAACyb,4BAA4B,CAAC5iD,GAAD,EAAMomB,QAAN,EAAgBy7B,QAAQ,CAAC7hD,GAAzB,EAA8BW,IAAI,CAACyhD,KAAnC,CAA7B,CAAR;AACA,WAFD,MAEO;AACNjb,YAAAA,QAAQ,CAAC0b,0BAA0B,CAAC7iD,GAAD,EAAMomB,QAAN,EAAgBy7B,QAAQ,CAAC7hD,GAAzB,EAA8B,kBAA9B,CAA3B,CAAR;AACA;AACD,SAND,WAMS,UAAS8sC,GAAT,EAAa;AACrB,cAAIhH,GAAG,GAAG,CAAV,EAAY;AACX4c,YAAAA,eAAe,CAAC1iD,GAAD,EAAMomB,QAAN,EAAgBy7B,QAAhB,EAA0B/b,GAAG,GAAG,CAAhC,CAAf;AACA;AACD,SAVD;AAWA,OAZD,MAYO;AACNqB,QAAAA,QAAQ,CAAC0b,0BAA0B,CAAC7iD,GAAD,EAAMomB,QAAN,EAAgBy7B,QAAQ,CAAC7hD,GAAzB,EAA8BwmC,QAA9B,CAA3B,CAAR;AACA;AACD,KAvBM,CAAP;AAwBA,GA1CD;AA2CA;;AAED,SAASsc,UAAT,CAAoBC,MAApB,EAA4B;AAC3B,SAAO,UAAC5b,QAAD,EAAWC,QAAX,EAAwB;AAE9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;;AACA,QAAI7f,GAAG,GAAGhpB,0BAAO8oC,MAAM,CAAC9f,GAAP,CAAWw6B,OAAX,CAAmBxiD,KAAnB,CAAP,EAAkC;AAACS,MAAAA,GAAG,EAAE+iD;AAAN,KAAlC,CAAV;;AACA,8BAAOxjD,KAAK,CAACyiD,SAAN,CAAgBrhD,IAAvB,EAA6B,UAAAkhD,QAAQ,EAAI;AACxC,UAAIA,QAAQ,CAACmB,QAAb,EAAuB7b,QAAQ,CAACya,eAAe,CAACr6B,GAAD,EAAMs6B,QAAN,CAAhB,CAAR;AACvB,KAFD;AAIA,GARD;AASA;;AAED,SAASoB,YAAT,CAAsBnhD,QAAtB,EAAgC;AAC/B,SAAO,UAACqlC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;;AACA,QAAIxlC,KAAK,GAAGrD,0BAAO8oC,MAAM,CAAC5+B,MAAP,CAAcyjB,SAAd,CAAwB3sB,KAAxB,CAAP,EAAuC;AAACS,MAAAA,GAAG,EAAE8B;AAAN,KAAvC,CAAZ;;AACA,QAAIF,KAAK,IAAIA,KAAK,CAACwkB,QAAnB,EAA4B;AAC3B,gCAAO7mB,KAAK,CAACyiD,SAAN,CAAgBrhD,IAAvB,EAA6B,UAAAkhD,QAAQ,EAAI;AACxC,YAAIA,QAAQ,CAACmB,QAAb,EAAuB7b,QAAQ,CAACmb,iBAAiB,CAAC1gD,KAAD,EAAQigD,QAAR,CAAlB,CAAR;AACvB,OAFD;AAGA;AACD,GARD;AASA;;AAED,SAASqB,UAAT,CAAoBljD,GAApB,EAAyBomB,QAAzB,EAAmC;AAClC,SAAO,UAAC+gB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAI94B,MAAM,GAAG+4B,MAAM,CAAC2a,SAAP,CAAiBmB,oBAAjB,CAAsC5jD,KAAtC,CAAb;;AACA,8BAAO+O,MAAP,EAAe,UAAAuzC,QAAQ,EAAI;AAC1B1a,MAAAA,QAAQ,CAACub,eAAe,CAAC1iD,GAAD,EAAMomB,QAAN,EAAgBy7B,QAAhB,CAAhB,CAAR;AACA,KAFD;AAGA,GAND;AAOA;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAGA,SAASI,uBAAT,CAAiCc,MAAjC,EAAyCp2C,QAAzC,EAAmD;AAClD,SAAO;AACNgB,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7S,+BADZ;AAENynB,IAAAA,MAAM,EAAEA,MAFF;AAGNp2C,IAAAA,QAAQ,EAAEA;AAHJ,GAAP;AAKA;;AAED,SAASw1C,4BAAT,CAAsCY,MAAtC,EAA8Cp2C,QAA9C,EAAwDjE,OAAxD,EAAiE;AAChE,SAAO;AACNiF,IAAAA,IAAI,EAAEwgC,WAAW,CAAC3S,+BADZ;AAENunB,IAAAA,MAAM,EAAEA,MAFF;AAGNp2C,IAAAA,QAAQ,EAAEA,QAHJ;AAINjE,IAAAA,OAAO,EAAEA;AAJH,GAAP;AAMA;;AAED,SAAS25C,0BAAT,CAAoCU,MAApC,EAA4Cp2C,QAA5C,EAAsDm6B,KAAtD,EAA6D;AAC5D,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5S,qCADZ;AAENwnB,IAAAA,MAAM,EAAEA,MAFF;AAGNp2C,IAAAA,QAAQ,EAAEA,QAHJ;AAINm6B,IAAAA,KAAK,EAAEA;AAJD,GAAP;AAMA;;AAED,SAASyb,yBAAT,CAAmCzgD,QAAnC,EAA6C6K,QAA7C,EAAuD;AACtD,SAAO;AACNgB,IAAAA,IAAI,EAAEwgC,WAAW,CAAC1S,iCADZ;AAEN35B,IAAAA,QAAQ,EAAEA,QAFJ;AAGN6K,IAAAA,QAAQ,EAAEA;AAHJ,GAAP;AAKA;;AAED,SAAS61C,8BAAT,CAAwC1gD,QAAxC,EAAkD6K,QAAlD,EAA4DjE,OAA5D,EAAqE;AACpE,SAAO;AACNiF,IAAAA,IAAI,EAAEwgC,WAAW,CAACxS,iCADZ;AAEN75B,IAAAA,QAAQ,EAAEA,QAFJ;AAGN6K,IAAAA,QAAQ,EAAEA,QAHJ;AAINjE,IAAAA,OAAO,EAAEA;AAJH,GAAP;AAMA;;AAED,SAAS+5C,4BAAT,CAAsC3gD,QAAtC,EAAgD6K,QAAhD,EAA0Dm6B,KAA1D,EAAiE;AAChE,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAACzS,uCADZ;AAEN55B,IAAAA,QAAQ,EAAEA,QAFJ;AAGN6K,IAAAA,QAAQ,EAAEA,QAHJ;AAINm6B,IAAAA,KAAK,EAAEA;AAJD,GAAP;AAMA;;AAED,SAAS6b,4BAAT,CAAsC3iD,GAAtC,EAA2ComB,QAA3C,EAAqDzZ,QAArD,EAA+D;AAC9D,SAAO;AACNgB,IAAAA,IAAI,EAAEwgC,WAAW,CAACvS,+BADZ;AAEN57B,IAAAA,GAAG,EAAEA,GAFC;AAGNomB,IAAAA,QAAQ,EAAEA,QAHJ;AAINzZ,IAAAA,QAAQ,EAAEA;AAJJ,GAAP;AAMA;;AAED,SAASi2C,4BAAT,CAAsC5iD,GAAtC,EAA2ComB,QAA3C,EAAqDzZ,QAArD,EAA+DjE,OAA/D,EAAwE;AACvE,SAAO;AACNiF,IAAAA,IAAI,EAAEwgC,WAAW,CAACrS,+BADZ;AAEN97B,IAAAA,GAAG,EAAEA,GAFC;AAGNomB,IAAAA,QAAQ,EAAEA,QAHJ;AAINzZ,IAAAA,QAAQ,EAAEA,QAJJ;AAKNjE,IAAAA,OAAO,EAAEA;AALH,GAAP;AAOA;;AAED,SAASm6C,0BAAT,CAAoC7iD,GAApC,EAAyComB,QAAzC,EAAmDzZ,QAAnD,EAA6Dm6B,KAA7D,EAAoE;AACnE,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAACtS,qCADZ;AAEN77B,IAAAA,GAAG,EAAEA,GAFC;AAGNomB,IAAAA,QAAQ,EAAEA,QAHJ;AAINzZ,IAAAA,QAAQ,EAAEA,QAJJ;AAKNm6B,IAAAA,KAAK,EAAEA;AALD,GAAP;AAOA;;;AAID,mBAAe;AACdgc,EAAAA,UAAU,EAAEA,UADE;AAEdG,EAAAA,YAAY,EAAEA,YAFA;AAGdC,EAAAA,UAAU,EAAVA;AAHc,CAAf;;ACpSA,IAAMhzB,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAACrf,UAAP,CAAkBzkB,WAAhC,EAA6C,YAA7C,EAA2D4qC,WAAW,CAACtK,WAAvE,EAAoF,cAApF,CAAf;AACA,IAAMwE,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAACrf,UAAP,CAAkBzkB,WAAhC,EAA6C,YAA7C,EAA2D4qC,WAAW,CAACtK,WAAvE,EAAoF,cAApF,CAAnB;AACA,IAAMoF,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAACrf,UAAP,CAAkBzkB,WAApC,EAAiD,YAAjD,EAA+D4qC,WAAW,CAACtK,WAA3E,EAAwF,cAAxF,CAAnB;AACA,IAAMmE,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAACrf,UAAP,CAAkBzkB,WAAtC,EAAmD4qC,WAAW,CAACtK,WAA/D,CAArB;AACA,IAAMsF,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACrf,UAAP,CAAkBzkB,WAAjC,EAA8C,YAA9C,EAA4D4qC,WAAW,CAACtK,WAAxE,EAAqF,cAArF,CAAhB;AACA,IAAM2L,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACtK,WAAhC,CAArB;AACA,IAAM8L,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACtK,WAAnC,CAAxB;AACA,IAAM0F,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACrf,UAAP,CAAkBzkB,WAApC,EAAiD,YAAjD,EAA+D4qC,WAAW,CAACtK,WAA3E,EAAwF,cAAxF,CAAnB;AACA,IAAM2J,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACrf,UAAP,CAAkBzkB,WAArC,EAAkD,YAAlD,EAAgE4qC,WAAW,CAACtK,WAA5E,EAAyF,cAAzF,CAApB;AACA,IAAMkM,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAACtK,WAA1C,CAA5B;;AAGA,SAASuf,UAAT,CAAoBhlD,MAApB,EAA4BgrC,WAA5B,EAAyC;AACxC,SAAO,UAACjC,QAAD,EAAc;AACpB,WAAOA,QAAQ,CAACoC,YAAU,CAAC,IAAD,EAAOnrC,MAAP,EAAe,IAAf,EAAqB,CAArB,EAAwB,GAAxB,EAA6BgrC,WAA7B,CAAX,CAAR,CAA8D7C,IAA9D,EAAP;AACA,GAFD;AAGA;;;AAID,mBAAe;AACdrW,EAAAA,MAAM,EAANA,QADc;AAEd,YAAQmY,YAFM;AAId+a,EAAAA,UAAU,EAAVA,UAJc;AAMd5V,EAAAA,WAAW,EAAXA,aANc;AAQdvE,EAAAA,UAAU,EAAVA,YARc;AAUdjB,EAAAA,YAAY,EAAZA,cAVc;AAWd+H,EAAAA,mBAAmB,EAAnBA,qBAXc;AAYdxG,EAAAA,UAAU,EAAVA,YAZc;AAadoG,EAAAA,eAAe,EAAfA,iBAbc;AAcdxG,EAAAA,OAAO,EAAPA,SAdc;AAedqG,EAAAA,YAAY,EAAZA;AAfc,CAAf;;ACZA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASrlC,KAAT,CAAaqQ,MAAb,EAAqBK,eAArB,EAAsCvM,MAAtC,EAA8Cga,QAA9C,EAAwDC,SAAxD,EAAmE;AAC/D,SAAO,UAAC4e,QAAD,EAAWC,QAAX,EAAwB;AAC3B;AACA,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACA,QAAMgC,WAAW,iBAAU5uB,MAAV,CAAjB;AACA,QAAMkQ,aAAa,GAAG,EAAtB;;AACA,QAAGpC,QAAQ,IAAIC,SAAf,EAA0B;AACtB,UAAM1L,IAAI,GAAGwqB,MAAM,CAAC3tB,IAAP,CAAY0P,eAAZ,CAA4B7pB,KAA5B,EAAmCib,MAAnC,CAAb;AACA,UAAMmL,KAAK,GAAG09B,eAAO,CAACv8B,QAAR,CAAiBwB,QAAjB,EAA2BC,SAA3B,EAAsC1L,IAAI,CAAC/D,MAA3C,EAAmD+D,IAAI,CAAC5D,QAAxD,CAAd;AACA,UAAM9Y,KAAK,GAAGkjD,eAAO,CAACh7B,YAAR,CAAqBC,QAArB,EAA+BC,SAA/B,EAA0C1L,IAAI,CAAC5D,QAA/C,CAAd;AACAyR,MAAAA,aAAa,CAAC/E,KAAd,GAAsBA,KAAtB;AACA+E,MAAAA,aAAa,CAACvqB,KAAd,GAAsBA,KAAtB;AACH,KAND,MAMO;AACH;AACA;AACH;;AAED,QAAMc,UAAU,GAAGwL,eAAe,CAACtH,gBAAhB,CAAiC5F,KAAjC,CAAnB,CAhB2B;;AAmB3B,QAAIsb,eAAe,IAAIvM,MAAvB,EAA+B;AAC3BA,MAAAA,MAAM,GAAG+0C,eAAO,CAACn7B,8BAAR,CAAuC5Z,MAAvC,EAA+CuM,eAA/C,CAAT;AACH,KAFD;AAAA,SAIK;AACDvM,QAAAA,MAAM,GAAG+4B,MAAM,CAAC3tB,IAAP,CAAY8C,yBAAZ,CAAsCjd,KAAtC,EAA6Cib,MAA7C,CAAT;AACH;;AAED,QAAIlM,MAAJ,EAAY;AACRA,MAAAA,MAAM,CAAC1O,OAAP,CAAe,UAAAuM,KAAK;AAAA;AAEhB;AACAwwC,UAAAA,UAAU,CAAC,YAAM;AAACxV,YAAAA,QAAQ,CAACmc,QAAQ,CAACla,WAAD,EAAcnoC,UAAd,EAA0BkL,KAA1B,EAAiCue,aAAjC,CAAT,CAAR;AAAkE,WAA1E,EAA4E,CAA5E;AAHM;AAAA,OAApB;AAKH;AACJ,GAlCD;AAmCH;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAAS44B,QAAT,CAAkBla,WAAlB,EAA+BnoC,UAA/B,EAA2CyL,UAA3C,EAAuDge,aAAvD,EAAsE;AAClE,SAAO,UAACyc,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB,CAD2B;;AAIjC,QAAI16B,UAAU,CAAC2K,QAAf,EAAyB;AACxB8vB,MAAAA,QAAQ,CAACoc,aAAa,CAACpa,OAAd,CAAsB,CAACz8B,UAAU,CAAC2K,QAAZ,CAAtB,EAA6C3K,UAAU,CAAC1M,GAAX,GAAiB,WAA9D,CAAD,CAAR;AACA,KANgC;;;AAS3B,QAAIsqB,oBAAoB,GAAG5d,UAAU,CAACsO,iBAAX,sBAAmCtO,UAAU,CAACsO,iBAA9C,IAAmE,EAA9F,CAT2B;;AAY3B,QAAItO,UAAU,CAACjK,gBAAf,EAAiC;AAC7B6nB,MAAAA,oBAAoB,CAAC7nB,gBAArB,GAAwCiK,UAAU,CAACjK,gBAAnD,CAD6B;AAGhC,KAHD,MAGO,IAAIiK,UAAU,CAAChD,gBAAf,EAAiC;AACpC4gB,MAAAA,oBAAoB,CAAC5gB,gBAArB,GAAwCgD,UAAU,CAAChD,gBAAnD,CADoC;AAGvC,KAlB0B;;;AAqB3B,QAAM0C,kBAAkB,GAAGM,UAAU,CAACxL,cAAX,GAA4BuL,eAAe,CAAClD,6BAAhB,CAA8ChK,KAA9C,EAAqDmN,UAAU,CAACxL,cAAhE,CAA5B,GAA8G,IAAzI,CArB2B;;AAwB3B,QAAMqpB,kBAAkB,GAAG9lB,aAAa,CAAC/B,iBAAd,CAAgC4nB,oBAAhC,EAAsDle,kBAAtD,CAA3B,CAxB2B;;AAAA,QA2BpB1C,gBA3BoB,GA2BgD6gB,kBA3BhD,CA2BpB7gB,gBA3BoB;AAAA,QA2BFjH,gBA3BE,GA2BgD8nB,kBA3BhD,CA2BF9nB,gBA3BE;AAAA,QA2BgBnB,cA3BhB,GA2BgDipB,kBA3BhD,CA2BgBjpB,cA3BhB;AAAA,QA2BmCuB,SA3BnC,4BA2BgD0nB,kBA3BhD;;;AA8B3B,QAAMznB,mBAAmB,GAAG2B,aAAa,CAAC7B,uCAAd,CAAsDC,SAAtD,CAA5B;;AACA,QAAIJ,gBAAgB,IAAIiH,gBAAxB,EAA0C;AACtC,UAAIrE,YAAY,GAAG,EAAnB;;AACA,UAAGqE,gBAAH,EAAqB;AACjBrE,QAAAA,YAAY,qCAAOvC,mBAAP;AAA4B4G,UAAAA,gBAAgB,EAAhBA;AAA5B,UAAZ;AACH;;AAED,UAAGjH,gBAAH,EAAqB;AACjB4C,QAAAA,YAAY,qCAAOvC,mBAAP;AAA4BL,UAAAA,gBAAgB,EAAhBA;AAA5B,UAAZ;AACH;;AAGD,UAAGA,gBAAH,EAAqB;AACjB,YAAMpE,KAAK,GAAG,IAAd;AACA,YAAMwS,kBAAkB,GAAGw2B,MAAM,CAAC1mC,IAAP,CAAYkQ,kBAAZ,CAA+BqU,kBAA/B,CAAkD3lB,KAAlD,EAAyD8F,YAAzD,EAAuEhH,KAAvE,CAA3B;AACA,YAAMmlD,iBAAiB,GAAG,CAAA3yC,kBAAkB,SAAlB,IAAAA,kBAAkB,WAAlB,YAAAA,kBAAkB,CAAEmjC,IAApB,CAAyB,UAAAppB,iBAAiB;AAAA;;AAAA,iBAAIm0B,wBAAwB,CAACj+C,QAAzB,CAAkC8pB,iBAAlC,aAAkCA,iBAAlC,gDAAkCA,iBAAiB,CAAEjqB,IAArD,0DAAkC,sBAAyBgN,IAA3D,CAAJ;AAAA,SAA1C,MAAmH,KAA7I,CAHiB;;AAKjB,YAAIkD,kBAAkB,IAAI,CAAC2yC,iBAA3B,EAA8C;AAC1C;AACH;AACJ,OAnBqC;;;AAqBtCrc,MAAAA,QAAQ,CAACsc,WAAW,CAACpU,MAAZ,CAAmB;AACxBh4B,QAAAA,QAAQ,EAAE3K,UAAU,CAAC2K,QAAX,IAAuB,IADT;AAExB1W,QAAAA,IAAI,EAAE;AACF+pB,UAAAA,aAAa,EAAbA;AADE,SAFkB;AAKxBrlB,QAAAA,YAAY,EAAZA;AALwB,OAAnB,CAAD,CAAR;AAOH;AACJ,GA5DD;AA6DH;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASiyC,6BAAT,CAAqC98B,MAArC,EAA6C7N,QAA7C,EAAuD4qC,mBAAvD,EAA4E;AAC3E,SAAO,UAACpQ,QAAD,EAAWC,QAAX,EAAwB;AAAA;;AACxB,QAAM7nC,KAAK,GAAG6nC,QAAQ,EAAtB;AACN,QAAMj7B,KAAK,GAAGk7B,MAAM,CAAC3tB,IAAP,CAAY0Q,gCAAZ,CAA6C7qB,KAA7C,EAAoDib,MAApD,EAA4D7N,QAA5D,CAAd;;AACA,QAAIR,KAAJ,aAAIA,KAAJ,iCAAIA,KAAK,CAAEoB,OAAX,2CAAI,eAAgBm2C,UAApB,EAAgC;AAAA;;AAC/B,UAAMxT,kBAAkB,GAAG7I,MAAM,CAACh6B,UAAP,CAAkB3I,YAAlB,CAA+BnF,KAA/B,CAA3B;;AACA,UAAI2wC,kBAAkB,6BAAI/jC,KAAK,CAACoB,OAAN,CAAcQ,QAAlB,kDAAI,sBAAwB1N,cAAxB,CAAuC6vC,kBAAvC,CAA1B,EAAsF;AACrF;AACA/I,QAAAA,QAAQ,CAACwQ,gBAAgB,CAAC3H,uCAAjB,CAAyDuH,mBAAzD,CAAD,CAAR;AACA;AAGD;AACD,GAZD;AAaA;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASoM,mBAAT,CAA6BnpC,MAA7B,EAAqC7N,QAArC,EAA+C0K,QAA/C,EAAyD;AACxD,SAAO,UAAC8vB,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACyc,yBAAyB,CAACppC,MAAD,EAAS7N,QAAT,EAAmB0K,QAAnB,CAA1B,CAAR;AACA,GAFD;AAGA;AAED;AACA;AACA;;;AACA,SAASo7B,uBAAT,CAA+Bj4B,MAA/B,EAAuC;AACnC,SAAO,UAAC2sB,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAI1sB,GAAG,GAAG2sB,MAAM,CAAC3tB,IAAP,CAAYa,iBAAZ,CAA8B6sB,QAAQ,EAAtC,EAA0C5sB,MAA1C,CAAV;;AACA,QAAIE,GAAJ,EAAS;AACLysB,MAAAA,QAAQ,CAACuL,6BAA2B,CAACh4B,GAAG,CAAC1a,GAAL,EAAUwa,MAAV,CAA5B,CAAR;AACH;AACJ,GALD;AAMH;AAED;AACA;AACA;AACA;;;AACA,SAASqpC,wBAAT,CAAkC16B,MAAlC,EAA0CtO,eAA1C,EAA2D;AAC1D,SAAO,UAACssB,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC2c,8BAA8B,CAAC36B,MAAD,EAAStO,eAAT,CAA/B,CAAR;AACA,QAAMnB,IAAI,GAAG2tB,MAAM,CAAC3tB,IAAP,CAAYgQ,aAAZ,CAA0B0d,QAAQ,EAAlC,EAAsCje,MAAtC,CAAb;;AACA,QAAIzP,IAAJ,EAAU;AACTA,MAAAA,IAAI,CAAC9Z,OAAL,CAAa,UAAAmF,GAAG,EAAI;AAAA;;AACnB;AACAoiC,QAAAA,QAAQ,CAACh9B,KAAG,CAACpF,GAAG,CAAC/E,GAAL,EAAU,IAAV,EAAgB,IAAhB,EAAsB+E,GAAtB,aAAsBA,GAAtB,oCAAsBA,GAAG,CAAEpE,IAA3B,oEAAsB,UAAW4oB,QAAjC,uDAAsB,mBAAqB4B,KAA3C,EAAkDpmB,GAAlD,aAAkDA,GAAlD,qCAAkDA,GAAG,CAAEpE,IAAvD,sEAAkD,WAAW4oB,QAA7D,wDAAkD,oBAAqB6B,MAAvE,CAAJ,CAAR;AACA,OAHD;AAIA;AACD,GATD;AAUA;AAED;AACA;AACA;;;AACA,SAAS24B,gBAAT,CAA0B56B,MAA1B,EAAkC;AACjC,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAM1tB,IAAI,GAAG2tB,MAAM,CAAC3tB,IAAP,CAAYgQ,aAAZ,CAA0B0d,QAAQ,EAAlC,EAAsCje,MAAtC,CAAb;;AACA,QAAIzP,IAAJ,EAAU;AACTA,MAAAA,IAAI,CAAC9Z,OAAL,CAAa,UAAAmF,GAAG,EAAI;AAAA;;AACnB;AACAoiC,QAAAA,QAAQ,CAACh9B,KAAG,CAACpF,GAAG,CAAC/E,GAAL,EAAU,IAAV,EAAgB,IAAhB,EAAsB+E,GAAtB,aAAsBA,GAAtB,qCAAsBA,GAAG,CAAEpE,IAA3B,sEAAsB,WAAW4oB,QAAjC,wDAAsB,oBAAqB4B,KAA3C,EAAkDpmB,GAAlD,aAAkDA,GAAlD,qCAAkDA,GAAG,CAAEpE,IAAvD,sEAAkD,WAAW4oB,QAA7D,wDAAkD,oBAAqB6B,MAAvE,CAAJ,CAAR;AACA,OAHD;AAIA;AACD,GARD;AASA;AAED;AACA;AACA;AACA;;;AACA,SAAS+sB,qBAAT,CAA6B39B,MAA7B,EAAqCnU,MAArC,EAA6C;AACzC,SAAO,UAAC8gC,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAI1sB,GAAG,GAAG2sB,MAAM,CAAC3tB,IAAP,CAAYa,iBAAZ,CAA8B6sB,QAAQ,EAAtC,EAA0C5sB,MAA1C,CAAV;AACA,QAAI49B,MAAJ,EAAYC,MAAZ;;AAEA,QAAI39B,GAAG,IAAIA,GAAG,CAACoC,IAAf,EAAqB;AACjB;AACAs7B,MAAAA,MAAM,GAAGz0C,4BAAS0C,MAAT,EAAiB,UAACiyC,SAAD,EAAYC,SAAZ,EAA0B;AAChD,eAAO79B,GAAG,CAACoC,IAAJ,CAASy7B,SAAT,CAAP;AACH,OAFQ,CAAT;AAIAF,MAAAA,MAAM,GAAGt7B,4BAAS1W,MAAT,EAAiB,UAACiyC,SAAD,EAAYC,SAAZ,EAA0B;AAChD,eAAO79B,GAAG,CAACoC,IAAJ,CAASy7B,SAAT,CAAP;AACH,OAFQ,CAAT;AAGH,KATD,MASO;AACHF,MAAAA,MAAM,GAAGhyC,MAAT;AACH;;AAED,QAAI+xC,MAAM,IAAI,CAACx5C,6BAAUw5C,MAAV,CAAf,EAAkC;AAC9B;AACAA,MAAAA,MAAM,GAAGj7B,YAAQ,CAACN,IAAT,CAAc27B,mBAAd,CAAkCJ,MAAlC,CAAT,CAF8B;;AAG9BjR,MAAAA,QAAQ,CAACsR,qBAAmB,CAAC/9B,GAAG,CAAC1a,GAAL,EAAUo4C,MAAV,CAApB,CAAR;AACH;;AAED,QAAIC,MAAM,IAAI,CAACz5C,6BAAUy5C,MAAV,CAAf,EAAkC;AAC9B;AACAA,MAAAA,MAAM,GAAGl7B,YAAQ,CAACN,IAAT,CAAc27B,mBAAd,CAAkCH,MAAlC,CAAT,CAF8B;;AAG9BlR,MAAAA,QAAQ,CAACuR,qBAAmB,CAACl+B,MAAD,EAAS69B,MAAT,CAApB,CAAR;AACH;AACJ,GA5BD;AA6BH;AAED;AACA;AACA;AACA;;;AACA,SAASM,eAAT,CAAuBxvB,MAAvB,EAA+B9iB,MAA/B,EAAuC;AACnC,SAAO,UAAC8gC,QAAD,EAAWC,QAAX,EAAwB;AAC3B,QAAIptB,YAAY,GAAGqtB,MAAM,CAAC3tB,IAAP,CAAY+C,qBAAZ,CAAkC2qB,QAAQ,EAA1C,EAA8Cje,MAA9C,CAAnB;AACAge,IAAAA,QAAQ,CAACgR,qBAAmB,CAACn+B,YAAD,EAAe3T,MAAf,CAApB,CAAR;AACH,GAHD;AAIH;AAED;AACA;AACA;AACA;;;AACA,SAAS0pC,qBAAT,CAA6BpvC,IAA7B,EAAmC;AAC/B,SAAO,UAAAwmC,QAAQ,EAAI;AACf,QAAIxmC,IAAJ,EAAU;AACNwmC,MAAAA,QAAQ,CAAC+T,cAAY,CAACv6C,IAAD,CAAb,CAAR;AACH;AACJ,GAJD;AAKH;AAGD;AACA;AACA;;;AAEA,IAAMijD,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACppC,MAAD,EAAS7N,QAAT,EAAmB0K,QAAnB,EAAgC;AACjE,SAAO;AACN1J,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiBI,GAAjB,CAAqBC,MAArB,CAA4BC,aAD5B;AAENpiB,IAAAA,MAAM,EAANA,MAFM;AAGN7N,IAAAA,QAAQ,EAARA,QAHM;AAIN0K,IAAAA,QAAQ,EAARA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAMq7B,6BAA2B,GAAG,SAA9BA,2BAA8B,CAACvpB,MAAD,EAAS3O,MAAT,EAAoB;AACpD,SAAO;AACH7M,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiBhC,GAAjB,CAAqBiC,kBADxB;AAEH/hB,IAAAA,MAAM,EAANA,MAFG;AAGH2O,IAAAA,MAAM,EAANA;AAHG,GAAP;AAKH,CAND;;AAQA,IAAM26B,8BAA8B,GAAG,SAAjCA,8BAAiC,CAAC36B,MAAD,EAAStO,eAAT,EAA6B;AACnE,SAAO;AACNlN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiBhC,GAAjB,CAAqBkC,oBADrB;AAENrT,IAAAA,MAAM,EAANA,MAFM;AAGNtO,IAAAA,eAAe,EAAfA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMmpC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACxpC,MAAD,EAAS2Q,KAAT,EAAgBC,MAAhB,EAA2B;AACvD,SAAO;AACNzd,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiBI,GAAjB,CAAqBG,QAArB,CAA8BvC,GAD9B;AAEN9f,IAAAA,MAAM,EAANA,MAFM;AAGN2Q,IAAAA,KAAK,EAALA,KAHM;AAINC,IAAAA,MAAM,EAANA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAM8vB,cAAY,GAAG,SAAfA,YAAe,CAACv6C,IAAD,EAAU;AAC3B,SAAO;AACHgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiB/C,MADpB;AAEH54B,IAAAA,IAAI,EAAJA;AAFG,GAAP;AAIH,CALD;;AAQA,IAAM+3C,qBAAmB,GAAG,SAAtBA,mBAAsB,CAACl+B,MAAD,EAASnU,MAAT,EAAoB;AAC5C,SAAO;AACHsH,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiBI,GAAjB,CAAqBD,IAArB,CAA0BlD,MAD7B;AAEH/e,IAAAA,MAAM,EAANA,MAFG;AAGHnU,IAAAA,MAAM,EAANA;AAHG,GAAP;AAKH,CAND;;AASA,IAAMoyC,qBAAmB,GAAG,SAAtBA,mBAAsB,CAACtvB,MAAD,EAAS9iB,MAAT,EAAoB;AAC5C,SAAO;AACHsH,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7R,IAAZ,CAAiBhC,GAAjB,CAAqBmC,IAArB,CAA0BlD,MAD7B;AAEHpQ,IAAAA,MAAM,EAANA,MAFG;AAGH9iB,IAAAA,MAAM,EAANA;AAHG,GAAP;AAKH,CAND;;;AAUA,aAAe;AACd09C,EAAAA,gBAAgB,EAAhBA,gBADc;AAEdzM,EAAAA,2BAA2B,EAA3BA,6BAFc;AAGdqM,EAAAA,mBAAmB,EAAnBA,mBAHc;AAIXlR,EAAAA,qBAAqB,EAArBA,uBAJW;AAKdoR,EAAAA,wBAAwB,EAAxBA,wBALc;AAMdI,EAAAA,cAAc,EAAED,oBANF;AAOX7L,EAAAA,mBAAmB,EAAnBA,qBAPW;AAQXQ,EAAAA,aAAa,EAAbA,eARW;AASX5I,EAAAA,mBAAmB,EAAnBA,qBATW;AAUX5lC,EAAAA,GAAG,EAAHA;AAVW,CAAf;;ACzUA,IAAM8kC,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAAC9P,OAAvB,CAAZ;AACA,IAAMnO,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAAC3+B,OAAP,CAAenF,WAA7B,EAA0C,SAA1C,EAAqD4qC,WAAW,CAAC9P,OAAjE,CAAf;AACA,IAAMgK,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAAC3+B,OAAP,CAAenF,WAA7B,EAA0C,SAA1C,EAAqD4qC,WAAW,CAAC9P,OAAjE,CAAnB;AACA,IAAM4K,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAAC3+B,OAAP,CAAenF,WAAjC,EAA8C,SAA9C,EAAyD4qC,WAAW,CAAC9P,OAArE,CAAnB;AACA,IAAM2J,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAAC3+B,OAAP,CAAenF,WAAnC,EAAgD4qC,WAAW,CAAC9P,OAA5D,CAArB;AACA,IAAM0R,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAAC9P,OAA1C,CAA5B;AACA,IAAM8K,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAAC3+B,OAAP,CAAenF,WAA9B,EAA2C,SAA3C,EAAsD4qC,WAAW,CAAC9P,OAAlE,CAAhB;AACA,IAAMmR,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAAC9P,OAAhC,CAArB;AACA,IAAMkL,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC3+B,OAAP,CAAenF,WAAjC,EAA8C,SAA9C,EAAyD4qC,WAAW,CAAC9P,OAArE,CAAnB;AACA,IAAMsR,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAAC9P,OAAnC,CAAxB;AACA,IAAMmP,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAAC3+B,OAAP,CAAenF,WAAlC,aAA0D4qC,WAAW,CAAC9P,OAAtE,CAApB;AACA,IAAMyL,mCAAiC,GAAG/9B,OAAM,CAAC+9B,iCAAP,CAAyCqE,WAAW,CAAC9P,OAArD,EAA8D,QAA9D,CAA1C;AACA,IAAM6L,oCAAkC,GAAGn+B,OAAM,CAACm+B,kCAAP,CAA0CiE,WAAW,CAAC9P,OAAtD,EAA+D,QAA/D,CAA3C;AACA,IAAMyP,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAAC3+B,OAAP,CAAenF,WAAtD,EAAmE,SAAnE,EAA8E4qC,WAAW,CAAC9P,OAA1F,CAAxC;;AAEA,SAASiR,cAAT,CAAsBtvC,GAAtB,EAA2B;AAC1B,SAAO,UAAAmnC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC2C,mCAAiC,CAAC9pC,GAAD,CAAlC,CAAR;AACA,GAFD;AAGA;;AAED,SAASuvC,eAAT,CAAuB3pC,IAAvB,EAA6B;AAC5B,SAAO,UAAAuhC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC+C,oCAAkC,CAACtkC,IAAD,CAAnC,CAAR;AACA,GAFD;AAGA;AAID;;;AAEA,oBAAe;AACdqpC,EAAAA,GAAG,EAAHA,KADc;AAEd/e,EAAAA,MAAM,EAANA,QAFc;AAGd,YAAQmY,YAHM;AAIdyF,EAAAA,+BAA+B,EAA/BA,iCAJc;AAMdN,EAAAA,WAAW,EAAXA,aANc;AAQdvE,EAAAA,UAAU,EAAVA,YARc;AASdqG,EAAAA,YAAY,EAAZA,cATc;AAUdC,EAAAA,aAAa,EAAbA,eAVc;AAYdvH,EAAAA,YAAY,EAAZA,cAZc;AAad+H,EAAAA,mBAAmB,EAAnBA,qBAbc;AAcdxG,EAAAA,UAAU,EAAVA,YAdc;AAedoG,EAAAA,eAAe,EAAfA,iBAfc;AAgBdxG,EAAAA,OAAO,EAAPA,SAhBc;AAiBdqG,EAAAA,YAAY,EAAZA;AAjBc,CAAf;;AC7BA,IAAMP,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAAC3P,MAAvB,CAAZ;AACA,IAAMtO,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAAC5+B,MAAP,CAAclF,WAA5B,EAAyC,QAAzC,EAAmD4qC,WAAW,CAAC3P,MAA/D,CAAf;AACA,IAAM6J,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAAC5+B,MAAP,CAAclF,WAA5B,EAAyC,QAAzC,EAAmD4qC,WAAW,CAAC3P,MAA/D,CAAnB;AACA,IAAMyK,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAAC5+B,MAAP,CAAclF,WAAhC,EAA6C,QAA7C,EAAuD4qC,WAAW,CAAC3P,MAAnE,CAAnB;AACA,IAAM8Q,cAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAAC3P,MAAhC,CAArB;AACA,IAAM+Q,eAAa,GAAGxjC,OAAM,CAACwjC,aAAP,CAAqBpB,WAAW,CAAC3P,MAAjC,CAAtB;AACA,IAAMwJ,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAAC5+B,MAAP,CAAclF,WAAlC,EAA+C4qC,WAAW,CAAC3P,MAA3D,CAArB;AACA,IAAMuR,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAAC3P,MAA1C,CAA5B;AACA,IAAM+K,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAAC5+B,MAAP,CAAclF,WAAhC,EAA6C,QAA7C,EAAuD4qC,WAAW,CAAC3P,MAAnE,CAAnB;AACA,IAAMmR,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAAC3P,MAAnC,CAAxB;AACA,IAAM2K,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAAC5+B,MAAP,CAAclF,WAA7B,EAA0C,QAA1C,EAAoD4qC,WAAW,CAAC3P,MAAhE,CAAhB;AACA,IAAMgR,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAAC3P,MAAhC,CAArB;AACA,IAAMgP,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAAC5+B,MAAP,CAAclF,WAAjC,YAAwD4qC,WAAW,CAAC3P,MAApE,CAApB;AACA,IAAMsP,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAAC5+B,MAAP,CAAclF,WAArD,EAAkE,QAAlE,EAA4E4qC,WAAW,CAAC3P,MAAxF,CAAxC;;AAIA,mBAAe;AACdyQ,EAAAA,GAAG,EAAHA,KADc;AAEd/e,EAAAA,MAAM,EAANA,QAFc;AAGd,YAAQmY,YAHM;AAIdyF,EAAAA,+BAA+B,EAA/BA,iCAJc;AAKdN,EAAAA,WAAW,EAAXA,aALc;AAOdvE,EAAAA,UAAU,EAAVA,YAPc;AAQdqG,EAAAA,YAAY,EAAZA,cARc;AASdC,EAAAA,aAAa,EAAbA,eATc;AAWdvH,EAAAA,YAAY,EAAZA,cAXc;AAYd+H,EAAAA,mBAAmB,EAAnBA,qBAZc;AAadxG,EAAAA,UAAU,EAAVA,YAbc;AAcdoG,EAAAA,eAAe,EAAfA,iBAdc;AAedxG,EAAAA,OAAO,EAAPA,SAfc;AAgBdqG,EAAAA,YAAY,EAAZA;AAhBc,CAAf;;ACXA,IAAI0U,gBAAgB,GAAG,EAAvB;AAEA,IAAM9e,KAAG,GAAG,CAAZ;;AAIA,IAAM6J,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACzP,SAAvB,CAAZ;AACA,IAAMqR,qBAAmB,GAAGhkC,OAAM,CAACkiC,sBAAP,CAA8BE,WAAW,CAACzP,SAA1C,CAA5B;;AAGA,SAASylB,iBAAT,CAA2BnkD,GAA3B,EAAgCuN,OAAhC,EAAwC;AACvC,SAAO,UAAC45B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIla,sBAAsB,GAAGma,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBskB,yBAAvB,CAAiDua,QAAQ,EAAzD,CAA7B;AACA,QAAI1Z,4BAA4B,GAAG2Z,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBukB,+BAAvB,CAAuDsa,QAAQ,EAA/D,CAAnC;AACA,QAAIgd,mBAAmB,GAAG12B,4BAA4B,gCAAOA,4BAAP,GAAwC,CAAC1tB,GAAD,CAAxC,IACpDktB,sBAAsB,gCAAOA,sBAAP,GAAkC,CAACltB,GAAD,CAAlC,IAA2C,CAACA,GAAD,CADnE;AAEAmnC,IAAAA,QAAQ,CAACkd,2BAA2B,CAAC;AAAErkD,MAAAA,GAAG,EAAEA;AAAP,OAAeuN,OAAf,EAAD,CAA5B,CAAR;AACA45B,IAAAA,QAAQ,CAACmd,sBAAsB,CAAC,WAAD,EAAcF,mBAAd,CAAvB,CAAR;AACA,GAPD;AAQA;AAED;AACA;AACA;;;AACA,SAASG,+BAAT,GAA2C;AAC1C,SAAO,UAACpd,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIla,sBAAsB,GAAGma,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBskB,yBAAvB,CAAiDua,QAAQ,EAAzD,CAA7B;AACA,QAAI1Z,4BAA4B,GAAG2Z,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBukB,+BAAvB,CAAuDsa,QAAQ,EAA/D,CAAnC;AACA,QAAIxhC,IAAI,GAAG,EAAX;;AACA,QAAIsnB,sBAAJ,EAA2B;AAC1BtnB,MAAAA,IAAI,gCAAOA,IAAP,sBAAgBsnB,sBAAhB,EAAJ;AACA;;AACD,QAAIQ,4BAAJ,EAAiC;AAChC9nB,MAAAA,IAAI,gCAAOA,IAAP,sBAAgB8nB,4BAAhB,EAAJ;AACA;;AACDyZ,IAAAA,QAAQ,CAACqd,2BAA2B,CAAC5+C,IAAD,CAA5B,CAAR;AACA,GAXD;AAYA;;AAED,SAAS0+C,sBAAT,CAAgCtkD,GAAhC,EAAqCS,KAArC,EAA4C;AAC3C,SAAO,UAAC0mC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAI7lC,aAAa,GAAG8lC,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB7D,YAAvB,CAAoCnF,KAApC,CAApB;AACA,QAAIotB,UAAU,GAAG0a,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB3D,SAAvB,CAAiCrF,KAAjC,CAAjB;AACA,QAAIklD,SAAS,GAAG,KAAhB;;AAEA,QAAI93B,UAAU,IAAIA,UAAU,CAAChsB,IAA7B,EAAkC;AACjC,UAAI,CAACX,GAAG,KAAK,UAAR,IAAsBA,GAAG,KAAK,WAA/B,KAA+C2sB,UAAU,CAAChsB,IAAX,CAAgBX,GAAhB,CAAnD,EAAwE;AACvE,YAAI0kD,GAAG,GAAGnyC,+BAAYoa,UAAU,CAAChsB,IAAX,CAAgBX,GAAhB,CAAZ,CAAV;;AACAykD,QAAAA,SAAS,GAAGhmD,IAAI,CAACC,SAAL,CAAe+B,KAAf,MAA0BhC,IAAI,CAACC,SAAL,CAAegmD,GAAf,CAAtC;AACA;;AAED,UAAID,SAAS,IAAKhkD,KAAK,KAAKksB,UAAU,CAAChsB,IAAX,CAAgBX,GAAhB,CAAxB,IAAkD,CAAC2sB,UAAU,CAAChsB,IAAX,CAAgBX,GAAhB,CAAD,IAAyBS,KAAK,CAACpB,MAAN,KAAiB,CAAhG,EAAmG;AAClG8nC,QAAAA,QAAQ,CAACwd,kCAAkC,CAACpjD,aAAD,EAAgBvB,GAAhB,CAAnC,CAAR;AACA,OAFD,MAEO;AACNmnC,QAAAA,QAAQ,CAACyd,uBAAuB,CAAC,CAAC;AAAC5kD,UAAAA,GAAG,EAAEuB,aAAN;AAAqBZ,UAAAA,IAAI,sBAAIX,GAAJ,EAAUS,KAAV;AAAzB,SAAD,CAAD,CAAxB,CAAR;AACA;AACD,KAXD,MAWO;AACN0mC,MAAAA,QAAQ,CAACyd,uBAAuB,CAAC,CAAC;AAAC5kD,QAAAA,GAAG,EAAEuB,aAAN;AAAqBZ,QAAAA,IAAI,sBAAIX,GAAJ,EAAUS,KAAV;AAAzB,OAAD,CAAD,CAAxB,CAAR;AACA;AACD,GApBD;AAqBA;;;AAGD,SAASokD,4BAAT,CAAuC3hD,WAAvC,EAAoD;AACnD,SAAQ,UAACikC,QAAD,EAAWC,QAAX,EAAwB;AAC/B,QAAIza,UAAU,GAAG0a,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB3D,SAAvB,CAAiCwiC,QAAQ,EAAzC,CAAjB;;AAEA,QAAIza,UAAU,IAAIA,UAAU,CAAChsB,IAAzB,IAAiCgsB,UAAU,CAAChsB,IAAX,CAAgB6H,SAArD,EAA+D;AAC9D,UAAIs8C,gBAAgB,GAAGC,6BAAUp4B,UAAU,CAAChsB,IAAX,CAAgB6H,SAA1B,EAAqCtF,WAArC,CAAvB;;AACA,UAAI8hD,WAAW,qCAAOr4B,UAAP;AAAmBhsB,QAAAA,IAAI,oCAAMgsB,UAAU,CAAChsB,IAAjB;AAAuB6H,UAAAA,SAAS,EAAEs8C;AAAlC;AAAvB,QAAf;;AAEA3d,MAAAA,QAAQ,CAAC8d,oBAAoB,CAAC/hD,WAAD,CAArB,CAAR;AACAikC,MAAAA,QAAQ,CAAC+d,cAAc,CAAC,CAACF,WAAD,CAAD,EAAe,EAAf,CAAf,CAAR;AACA;AACD,GAVD;AAWA;;AAED,SAASG,kCAAT,CAA6CjiD,WAA7C,EAA0D;AACzD,SAAQ,UAACikC,QAAD,EAAWC,QAAX,EAAwB;AAC/B,QAAIra,gBAAgB,GAAGsa,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB0lB,mBAAvB,CAA2CmZ,QAAQ,EAAnD,CAAvB;;AAEA,QAAIra,gBAAgB,IAAIA,gBAAgB,CAACpsB,IAArC,IAA6CosB,gBAAgB,CAACpsB,IAAjB,CAAsB6H,SAAvE,EAAiF;AAChF,UAAIs8C,gBAAgB,GAAGC,6BAAUh4B,gBAAgB,CAACpsB,IAAjB,CAAsB6H,SAAhC,EAA2CtF,WAA3C,CAAvB;;AACAikC,MAAAA,QAAQ,CAACmd,sBAAsB,CAAC,WAAD,EAAcQ,gBAAd,CAAvB,CAAR;AACA;AACD,GAPD;AAQA;;AAED,SAASM,oBAAT,CAA8BliD,WAA9B,EAA2ClD,GAA3C,EAAgDS,KAAhD,EAAuD;AACtD,SAAO,UAAC0mC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAI59B,QAAQ,GAAG69B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2B/C,QAA3B,CAAoClG,KAApC,EAA2C2D,WAA3C,CAAf;AACA,QAAI3B,aAAa,GAAG8lC,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB7D,YAAvB,CAAoCnF,KAApC,CAApB;AACA,QAAI2tB,sBAAsB,GAAGma,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBskB,yBAAvB,CAAiDttB,KAAjD,CAA7B;AACA,QAAImuB,4BAA4B,GAAG2Z,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBukB,+BAAvB,CAAuDvtB,KAAvD,CAAnC;AAEA,QAAI6kD,mBAAmB,GAAG,EAA1B;;AACA,QAAIl3B,sBAAJ,EAA2B;AAC1Bk3B,MAAAA,mBAAmB,GAAGiB,2BAAQjB,mBAAR,EAA6Bl3B,sBAA7B,CAAtB;AACA;;AACD,QAAIQ,4BAAJ,EAAiC;AAChC02B,MAAAA,mBAAmB,GAAGiB,2BAAQjB,mBAAR,EAA6B12B,4BAA7B,CAAtB;AACA,KAb6B;;;AAgB9B,QAAIlkB,QAAQ,KAAK/I,KAAK,KAAK+I,QAAQ,CAAC7I,IAAT,CAAcX,GAAd,CAAV,IAAiC,CAACwJ,QAAQ,CAAC7I,IAAT,CAAcX,GAAd,CAAD,IAAuBS,KAAK,CAACpB,MAAN,KAAiB,CAA9E,CAAZ,EAA8F;AAC7F8nC,MAAAA,QAAQ,CAACme,sCAAsC,CAACpiD,WAAD,EAAclD,GAAd,CAAvC,CAAR;AACA,KAFD,MAEO;AACNmnC,MAAAA,QAAQ,CAACyd,uBAAuB,CAAC,CAAC;AAAC5kD,QAAAA,GAAG,EAAEuB,aAAN;AAAqBZ,QAAAA,IAAI,EAAE;AAAC6H,UAAAA,SAAS,EAAE47C;AAAZ;AAA3B,OAAD,CAAD,CAAxB,CAAR;AACAjd,MAAAA,QAAQ,CAACkd,2BAA2B,CAAC,CAAC;AAACrkD,QAAAA,GAAG,EAAEkD,WAAN;AAAmBvC,QAAAA,IAAI,sBAAIX,GAAJ,EAAUS,KAAV;AAAvB,OAAD,CAAD,CAA5B,CAAR;AACA;AACD,GAtBD;AAuBA;;AAED,SAAS8kD,aAAT,CAAuBvlD,GAAvB,EAA4B;AAC3B,SAAO,UAACmnC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIoe,YAAY,GAAGne,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB7D,YAAvB,CAAoC0iC,QAAQ,EAA5C,CAAnB;AACAD,IAAAA,QAAQ,CAACse,mBAAmB,CAACzlD,GAAD,CAApB,CAAR;;AACA,QAAIA,GAAJ,EAAQ;AACP,UAAIwI,SAAS,GAAG6+B,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBskB,yBAAvB,CAAiDua,QAAQ,EAAzD,CAAhB;;AACA,UAAIpnC,GAAG,KAAKwlD,YAAZ,EAAyB;AACxBre,QAAAA,QAAQ,CAACgD,qBAAmB,CAAC3hC,SAAD,CAApB,CAAR;AACA;AACD,KALD,MAKO;AACN2+B,MAAAA,QAAQ,CAACgD,qBAAmB,CAAC,IAAD,CAApB,CAAR;AACA;AACD,GAXD;AAYA;;AAED,SAASub,iBAAT,CAA2B1lD,GAA3B,EAA+B;AAC9B,SAAO,UAACmnC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIj+B,kBAAkB,GAAGk+B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2B7D,aAA3B,CAAyCyiC,QAAQ,EAAjD,CAAzB;;AACA,QAAIue,WAAW,GAAGN,2BAAQl8C,kBAAR,EAA4B,CAACnJ,GAAD,CAA5B,CAAlB;;AACAmnC,IAAAA,QAAQ,CAACgD,qBAAmB,CAACwb,WAAD,CAApB,CAAR;AACA,GAJD;AAKA;;AAED,SAASV,oBAAT,CAA8BjlD,GAA9B,EAAkC;AACjC,SAAO,UAACmnC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIj+B,kBAAkB,GAAGk+B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2B7D,aAA3B,CAAyCyiC,QAAQ,EAAjD,CAAzB;;AACA,QAAIue,WAAW,GAAGZ,6BAAU57C,kBAAV,EAA8BnJ,GAA9B,CAAlB;;AACAmnC,IAAAA,QAAQ,CAACgD,qBAAmB,CAACwb,WAAD,CAApB,CAAR;AACA,GAJD;AAKA;;AAED,SAASC,qBAAT,CAA+BjlD,IAA/B,EAAoC;AACnC,SAAO,UAACwmC,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAACoe,aAAa,CAAC5kD,IAAI,CAAC4H,KAAL,CAAWlF,SAAZ,CAAd,CAAR;AACA8jC,IAAAA,QAAQ,CAAC0e,IAAI,CAACllD,IAAI,CAAC4H,KAAL,CAAWlF,SAAZ,CAAL,CAAR;AAEA8jC,IAAAA,QAAQ,CAACgD,qBAAmB,CAACxpC,IAAI,CAAC6H,SAAL,CAAevH,UAAhB,CAApB,CAAR;AACAkmC,IAAAA,QAAQ,CAAC2e,+BAA+B,CAACnlD,IAAI,CAAC6H,SAAL,CAAe4jB,sBAAhB,CAAhC,CAAR;AACA,GAND;AAOA;;AAED,SAAS25B,WAAT,CAAqBplD,IAArB,EAA0B;AACzB,SAAO,UAAAwmC,QAAQ,EAAI;AAClBA,IAAAA,QAAQ,CAAC6e,iBAAiB,CAACrlD,IAAD,CAAlB,CAAR;AACA,GAFD;AAGA;;AAED,SAASslD,WAAT,CAAqBrgD,IAArB,EAA0B;AACzB,SAAO,UAACuhC,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC+e,iBAAiB,CAACtgD,IAAD,CAAlB,CAAR;AACA,GAFD;AAGA;;AAED,SAASigD,IAAT,CAAcrkD,OAAd,EAAuB;AACtB,SAAO,UAAC2lC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;;AACA,QAAIA,KAAK,CAACiJ,SAAN,CAAgB29C,OAApB,EAA6B,CAA7B,MAEO;AACNhf,MAAAA,QAAQ,CAACif,iBAAiB,CAAC5kD,OAAD,CAAlB,CAAR;AACA,UAAIokC,KAAK,GAAG;AACXygB,QAAAA,gBAAgB,EAAE7kD;AADP,OAAZ;AAGA2lC,MAAAA,QAAQ,CAACp7B,OAAM,CAAC05B,OAAP,CAAezlB,WAAf,EAA4B,iCAA5B,EAA+D,KAA/D,EAAsE4lB,KAAtE,EAA6E,IAA7E,EAAmF0gB,WAAnF,EAAgGC,eAAhG,CAAD,CAAR;AACA;AACD,GAZD;AAaA;;AAED,SAASD,WAAT,CAAqB3lD,IAArB,EAA2B;AAC1B;AACAA,EAAAA,IAAI,GAAGA,IAAI,CAAC6H,SAAL,GAAiB7H,IAAI,CAAC6H,SAAtB,GAAkC7H,IAAzC;AAEA,SAAO,UAAAwmC,QAAQ,EAAI;AAClB,QAAIxmC,IAAJ,EAAS;AACRA,MAAAA,IAAI,GAAG8J,yBAAM9J,IAAN,EAAY,gBAAoB;AAAA,YAAlBgvB,EAAkB,QAAlBA,EAAkB;AAAA,YAAX5vB,KAAW;;AACtC,iDAAWA,KAAX;AAAkBC,UAAAA,GAAG,EAAE2vB;AAAvB;AACA,OAFM,CAAP;AAGAwX,MAAAA,QAAQ,CAACqf,iBAAiB,CAAC7lD,IAAD,CAAlB,CAAR;AACAwmC,MAAAA,QAAQ,CAACsf,4BAA4B,EAA7B,CAAR;AACA,KAND,MAMO;AACN/e,MAAAA,OAAO,CAACZ,KAAR,CAAc,oDAAd,EADM;AAGN;AACD,GAXD;AAYA;;AAED,SAAS2f,4BAAT,GAAuC;AACtC,SAAO,UAACtf,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIza,UAAU,GAAG0a,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB3D,SAAvB,CAAiCwiC,QAAQ,EAAzC,CAAjB;;AACA,QAAIza,UAAJ,EAAe;AACd,UAAIq4B,WAAW,qCAAOr4B,UAAP;AAAmBhsB,QAAAA,IAAI,oCAAMgsB,UAAU,CAAChsB,IAAjB;AAAuBisB,UAAAA,eAAe,EAAE;AAAxC;AAAvB,QAAf;;AACAua,MAAAA,QAAQ,CAAC4e,WAAW,CAAC,CAACf,WAAD,CAAD,CAAZ,CAAR;AACA7d,MAAAA,QAAQ,CAACuf,UAAU,CAACC,mBAAX,EAAD,CAAR;AACA;AACD,GAPD;AAQA;;AAED,SAASC,SAAT,CAAmB9gB,GAAnB,EAAwB;AACvB,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAE9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;;AACA,QAAIA,KAAK,CAACiJ,SAAN,CAAgB29C,OAApB,EAA6B,CAA7B,MAEO;AACNhf,MAAAA,QAAQ,CAAC0f,sBAAsB,EAAvB,CAAR;AAEA,UAAIhlD,cAAc,GAAGwlC,MAAM,CAAC5+B,MAAP,CAAc/D,YAAd,CAA2BnF,KAA3B,CAArB;;AAEA,UAAIsC,cAAJ,EAAoB;AAEnB,YAAImM,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,sCAAlE,CAAnD;AACA,YAAIN,KAAK,GAAGO,+BAAW,CAACznC,SAAZ,CAAsB;AACjCooD,UAAAA,QAAQ,EAAEjlD;AADuB,SAAtB,CAAZ;;AAGA,YAAI+jC,KAAJ,EAAW;AACV53B,UAAAA,GAAG,IAAI,MAAM43B,KAAb;AACA;;AAED,eAAOP,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,UAAAA,MAAM,EAAE,KADS;AAEjBS,UAAAA,WAAW,EAAE,SAFI;AAGjBC,UAAAA,OAAO,EAAE;AACR,4BAAgB,kBADR;AAER,sBAAU;AAFF;AAHQ,SAAN,CAAL,CAOJE,IAPI,CAQN,UAAAC,QAAQ,EAAI;AACXkB,UAAAA,OAAO,CAACwa,GAAR,CAAY,oCAAZ,EAAkD1b,QAAlD;AACA,cAAIC,WAAW,GAAGD,QAAQ,CAACH,OAAT,CAAiBtiB,GAAjB,CAAqB,cAArB,CAAlB;;AACA,cAAIyiB,QAAQ,CAACE,EAAT,IAAeD,WAAf,IAA+BA,WAAW,CAACE,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAAhF,EAAoF;AACnF,mBAAOH,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AACnC,kBAAIA,IAAI,CAACA,IAAL,IAAaA,IAAI,CAACA,IAAL,CAAUomD,cAA3B,EAA2C;AAC1C5f,gBAAAA,QAAQ,CAAC6f,gBAAgB,CAACrmD,IAAI,CAACA,IAAL,CAAUomD,cAAX,CAAjB,CAAR;AACA,eAFD,MAEO;AACN5f,gBAAAA,QAAQ,CAAC8f,oBAAoB,CAAC,kBAAD,CAArB,CAAR;AACA;AACD,aANM,CAAP;AAOA,WARD,MAQO;AACN9f,YAAAA,QAAQ,CAAC8f,oBAAoB,CAACzgB,QAAD,CAArB,CAAR;AACA;AACD,SAtBK,EAuBN,UAAAM,KAAK,EAAI;AACRY,UAAAA,OAAO,CAACwa,GAAR,CAAY,gCAAZ,EAA8Cpb,KAA9C;;AACA,cAAIhB,GAAG,GAAG,CAAV,EAAa;AACZqB,YAAAA,QAAQ,CAACyf,SAAS,CAAC9gB,GAAG,GAAG,CAAP,CAAV,CAAR;AACA,WAFD,MAEO;AACNqB,YAAAA,QAAQ,CAAC8f,oBAAoB,CAAC,qDAAD,CAArB,CAAR;AACA;AACD,SA9BK,CAAP;AAiCA,OA3CD,MA2CO;AACN9f,QAAAA,QAAQ,CAAC8f,oBAAoB,CAAC,+CAAD,CAArB,CAAR;AACA;AAED;AAED,GA5DD;AA6DA;;AAED,SAASD,gBAAT,CAA0BhjD,MAA1B,EAAkC;AACjC,SAAO,UAAAmjC,QAAQ,EAAI;AAClBnjC,IAAAA,MAAM,GAAGyG,yBAAMzG,MAAN,EAAc,iBAA0B;AAAA,UAAxB2rB,EAAwB,SAAxBA,EAAwB;AAAA,UAApBhvB,IAAoB,SAApBA,IAAoB;AAAA,UAAXZ,KAAW;;AAAA,UAC3CmnD,YAD2C,GACbvmD,IADa,CAC3CumD,YAD2C;AAAA,UAC1BC,SAD0B,4BACbxmD,IADa;;AAEhD,+CAAWZ,KAAX;AAAkBC,QAAAA,GAAG,EAAE2vB,EAAvB;AAA2BhvB,QAAAA,IAAI,oCAAMwmD,SAAN;AAAiB/gC,UAAAA,QAAQ,EAAE3nB,IAAI,CAACmO,KAAL,CAAWu6C,SAAS,CAAC/gC,QAArB,CAA3B;AAA2D5d,UAAAA,SAAS,EAAE0+C;AAAtE;AAA/B;AACA,KAHQ,CAAT;AAIA/f,IAAAA,QAAQ,CAACigB,sBAAsB,CAACpjD,MAAD,CAAvB,CAAR;AACA,GAND;AAOA;;AAED,SAASqjD,cAAT,GAA0B;AACzB,SAAO,UAAClgB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAI8B,KAAK,GAAG7B,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB3D,SAAvB,CAAiCrF,KAAjC,CAAZ;AACA,QAAIuH,MAAM,GAAGugC,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB0lB,mBAAvB,CAA2C1uB,KAA3C,CAAb;;AACA,QAAI+nD,eAAe,GAAG91C,4BAAS61B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2BlC,YAA3B,CAAwC/G,KAAxC,CAAT,EAAyD,UAAAiK,QAAQ,EAAI;AAC1F,UAAI5D,IAAI,GAAGkB,MAAM,IAAIA,MAAM,CAACnG,IAAjB,IAAyBmG,MAAM,CAACnG,IAAP,CAAY6H,SAArC,GAAiD1B,MAAM,CAACnG,IAAP,CAAY6H,SAA7D,GAAyE0gC,KAAK,CAACvoC,IAAN,CAAW6H,SAA/F;AACA,aAAOiJ,8BAAW7L,IAAX,EAAiB4D,QAAQ,CAACxJ,GAA1B,CAAP;AACA,KAHqB,CAAtB;;AAIA,QAAI6B,cAAc,GAAGwlC,MAAM,CAAC5+B,MAAP,CAAc/D,YAAd,CAA2BnF,KAA3B,CAArB;;AAEA,QAAI2pC,KAAJ,EAAW;AACV;AACA/B,MAAAA,QAAQ,CAAC+d,cAAc,CAACp+C,MAAM,GAAG,CAACA,MAAD,CAAH,GAAc,EAArB,EAAyBwgD,eAAzB,CAAf,CAAR;AACA,KAHD,MAGO;AACN;AACAngB,MAAAA,QAAQ,CAACogB,cAAc,CAACzgD,MAAM,GAAG,CAACA,MAAD,CAAH,GAAc,EAArB,EAAyBwgD,eAAzB,EAA0CzlD,cAA1C,CAAf,CAAR;AACA;AACD,GAjBD;AAkBA;;AAED,SAAS2lD,gBAAT,GAA4B;AAC3B,SAAO,UAACrgB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7nC,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAIza,UAAU,GAAG0a,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB3D,SAAvB,CAAiCrF,KAAjC,CAAjB;;AACA,QAAIotB,UAAJ,EAAe;AACdwa,MAAAA,QAAQ,CAACsgB,cAAc,CAAC,CAAC96B,UAAD,CAAD,CAAf,CAAR;AACA;AACD,GAND;AAOA;;AAED,SAAS46B,cAAT,CAAwBh/C,KAAxB,EAA+BC,SAA/B,EAA0C1G,QAA1C,EAAoDgkC,GAApD,EAAyD;AACxD,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAACugB,2BAA2B,CAACj9C,yBAAMlC,KAAN,EAAa,KAAb,CAAD,CAA5B,CAAR;AAEA,QAAMyX,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAIp5B,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,uBAAlE,CAAnD;AAEA,QAAIL,OAAO,GAAG;AACbllC,MAAAA,IAAI,EAAE;AACLomD,QAAAA,cAAc,EAAEt8C,yBAAMlC,KAAN,EAAa,UAAAxI,KAAK,EAAI;AACrC,cAAI4nD,QAAQ,qCAAO5nD,KAAK,CAACY,IAAb;AAAmBumD,YAAAA,YAAY,EAAEnnD,KAAK,CAACY,IAAN,CAAW6H;AAA5C,YAAZ;;AACA,iBAAOm/C,QAAQ,CAACn/C,SAAhB;AACA,iBAAO;AACNwmC,YAAAA,IAAI,EAAEjvC,KAAK,CAACC,GADN;AAENW,YAAAA,IAAI,oCAAMgnD,QAAN;AAAgB35B,cAAAA,SAAS,EAAE,CAAClsB,QAAD;AAA3B;AAFE,WAAP;AAIA,SAPe,CADX;AASL0G,QAAAA,SAAS,EAAEiC,yBAAMjC,SAAN,EAAiB,UAAAzI,KAAK,EAAI;AACpC,cAAIysB,YAAY,sBAAOzsB,KAAK,CAACY,IAAb,CAAhB;;AACA,iBAAO6rB,YAAY,CAAC,MAAD,CAAnB;AAEA,iBAAO;AACNwiB,YAAAA,IAAI,EAAEjvC,KAAK,CAACC,GADN;AAENW,YAAAA,IAAI,qBAAM6rB,YAAN;AAFE,WAAP;AAIA,SARU;AATN;AADO,KAAd;AAsBA,WAAO6Y,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,MADS;AAEjBS,MAAAA,WAAW,EAAE,SAFI;AAGjBC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,kBAAU;AAFF,OAHQ;AAOjBC,MAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAemnC,OAAf;AAPW,KAAN,CAAL,CAQJU,IARI,CASN,UAAAC,QAAQ,EAAI;AACXkB,MAAAA,OAAO,CAACwa,GAAR,CAAY,qCAAZ,EAAmD1b,QAAnD;AACA,UAAIC,WAAW,GAAGD,QAAQ,CAACH,OAAT,CAAiBtiB,GAAjB,CAAqB,cAArB,CAAlB;;AACA,UAAIyiB,QAAQ,CAACE,EAAT,IAAeD,WAAf,IAA+BA,WAAW,CAACE,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAAhF,EAAoF;AACnF,eAAOH,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AACnC,cAAIA,IAAI,CAACA,IAAT,EAAe;AACdwmC,YAAAA,QAAQ,CAACygB,qBAAqB,CAACjnD,IAAI,CAACA,IAAN,CAAtB,CAAR;AAEA,gBAAIknD,qBAAqB,GAAG,EAA5B;;AAEA,sCAAOlnD,IAAI,CAACA,IAAL,CAAU6H,SAAjB,EAA4B,UAAAs/C,eAAe,EAAI;AAC9C,kBAAIC,gBAAgB,GAAGxpD,0BAAOiK,SAAP,EAAkB;AAACxI,gBAAAA,GAAG,EAAE8nD,eAAe,CAAC9Y;AAAtB,eAAlB,CAAvB;;AACA,kBAAI+Y,gBAAJ,EAAsB;AACrBF,gBAAAA,qBAAqB,CAAC/nD,IAAtB,CACC;AACCE,kBAAAA,GAAG,EAAE8nD,eAAe,CAACn4B,EADtB;AAEChvB,kBAAAA,IAAI,EAAEonD,gBAAgB,CAACpnD;AAFxB,iBADD;AAMA;AACD,aAVD;;AAYAwmC,YAAAA,QAAQ,CAAC6gB,sBAAsB,CAACH,qBAAD,CAAvB,CAAR;AACA,WAlBD,MAkBO;AACN1gB,YAAAA,QAAQ,CAAC8gB,yBAAyB,CAAC,kBAAD,CAA1B,CAAR;AACA;AACD,SAtBM,CAAP;AAuBA,OAxBD,MAwBO;AACN9gB,QAAAA,QAAQ,CAAC8gB,yBAAyB,CAACzhB,QAAD,CAA1B,CAAR;AACA;AACD,KAvCK,EAwCN,UAAAM,KAAK,EAAI;AACRY,MAAAA,OAAO,CAACwa,GAAR,CAAY,iCAAZ,EAA+Cpb,KAA/C;;AACA,UAAIhB,GAAG,GAAG,CAAV,EAAa;AACZqB,QAAAA,QAAQ,CAACogB,cAAc,CAACh/C,KAAD,EAAQC,SAAR,EAAmB1G,QAAnB,EAA6BgkC,GAAG,GAAG,CAAnC,CAAf,CAAR;AACA,OAFD,MAEO;AACNqB,QAAAA,QAAQ,CAAC8gB,yBAAyB,CAAC,wDAAD,CAA1B,CAAR;AACA;AACD,KA/CK,CAAP;AAiDA,GA7ED;AA8EA;;AAED,SAAS/C,cAAT,CAAwB9I,OAAxB,EAAiCkL,eAAjC,EAAkDxhB,GAAlD,EAAuD;AACtD,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC+gB,2BAA2B,CAACz9C,yBAAM2xC,OAAN,EAAe,KAAf,CAAD,CAA5B,CAAR;AAEA,QAAI78C,KAAK,GAAG6nC,QAAQ,EAApB;AACA,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCrX,KAAzC,CAApB;AAEA,QAAIyO,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,uBAAlE,CAAnD;AAEA,QAAIL,OAAO,GAAG;AACbllC,MAAAA,IAAI,EAAE;AACLomD,QAAAA,cAAc,EAAEt8C,yBAAM2xC,OAAN,EAAe,UAAAr8C,KAAK,EAAI;AACvC,cAAI4nD,QAAQ,qCAAO5nD,KAAK,CAACY,IAAb;AAAmBumD,YAAAA,YAAY,EAAEnnD,KAAK,CAACY,IAAN,CAAW6H;AAA5C,YAAZ;;AACA,iBAAOm/C,QAAQ,CAACn/C,SAAhB;;AACA,cAAIm/C,QAAQ,CAAC/6B,eAAb,EAA6B;AAC5B,mBAAO+6B,QAAQ,CAAC/6B,eAAhB;AACA;;AACD,iBAAO;AACN+C,YAAAA,EAAE,EAAE5vB,KAAK,CAACC,GADJ;AAENW,YAAAA,IAAI,EAAEgnD;AAFA,WAAP;AAIA,SAVe,CADX;AAYLn/C,QAAAA,SAAS,EAAEiC,yBAAM68C,eAAN,EAAuB,UAAAvnD,KAAK,EAAI;AAC1C,cAAIyJ,QAAQ,GAAG;AACd7I,YAAAA,IAAI,qBAAMZ,KAAK,CAACY,IAAZ;AADU,WAAf;;AAGA,cAAI,OAAOZ,KAAK,CAACC,GAAb,KAAqB,QAAzB,EAAkC;AACjCwJ,YAAAA,QAAQ,CAACmmB,EAAT,GAAc5vB,KAAK,CAACC,GAApB;AACA,WAFD,MAEO;AACNwJ,YAAAA,QAAQ,CAACwlC,IAAT,GAAgBjvC,KAAK,CAACC,GAAtB;AACA;;AAED,iBAAOwJ,QAAQ,CAAC7I,IAAT,CAAc,MAAd,CAAP;AAEA,iBAAO6I,QAAP;AACA,SAbU;AAZN;AADO,KAAd;AA8BA,WAAO67B,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,KADS;AAEjBS,MAAAA,WAAW,EAAE,SAFI;AAGjBC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,kBAAU;AAFF,OAHQ;AAOjBC,MAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAemnC,OAAf;AAPW,KAAN,CAAL,CAQJU,IARI,CASN,UAAAC,QAAQ,EAAI;AACX,UAAIC,WAAW,GAAGD,QAAQ,CAACH,OAAT,CAAiBtiB,GAAjB,CAAqB,cAArB,CAAlB;;AACA,UAAIyiB,QAAQ,CAACE,EAAT,IAAeD,WAAf,IAA+BA,WAAW,CAACE,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAAhF,EAAoF;AACnF,eAAOH,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AACnC,cAAIA,IAAI,CAACA,IAAT,EAAe;AACdwmC,YAAAA,QAAQ,CAACghB,qBAAqB,CAACxnD,IAAI,CAACA,IAAN,CAAtB,CAAR;AAEA,gBAAIknD,qBAAqB,GAAG,EAA5B;AACA,gBAAIO,mBAAmB,GAAG,EAA1B;;AAEA,sCAAOznD,IAAI,CAACA,IAAL,CAAU6H,SAAjB,EAA4B,UAAAs/C,eAAe,EAAI;AAC9C,kBAAIC,gBAAgB,GAAGxpD,0BAAO+oD,eAAP,EAAwB;AAACtnD,gBAAAA,GAAG,EAAE8nD,eAAe,CAAC9Y,IAAhB,IAAwB8Y,eAAe,CAACn4B;AAA9C,eAAxB,CAAvB;;AACA,kBAAIo4B,gBAAgB,IAAIA,gBAAgB,CAACpnD,IAAjB,CAAsB0nD,IAA9C,EAAoD;AACnDR,gBAAAA,qBAAqB,CAAC/nD,IAAtB,CACC;AACCE,kBAAAA,GAAG,EAAE8nD,eAAe,CAACn4B,EADtB;AAEChvB,kBAAAA,IAAI,EAAEonD,gBAAgB,CAACpnD;AAFxB,iBADD;AAMA,eAPD,MAOO,IAAGonD,gBAAgB,IAAIA,gBAAgB,CAACO,kBAAxC,EAA4D;AAClE,oBAAIC,gBAAgB,GAAGlhB,MAAM,CAACx2B,kBAAP,CAA0B23C,aAA1B,CAAwCphB,QAAQ,EAAhD,EAAoD2gB,gBAAgB,CAACO,kBAArE,CAAvB;AACAF,gBAAAA,mBAAmB,CAACtoD,IAApB,CACC;AACCE,kBAAAA,GAAG,EAAE8nD,eAAe,CAACn4B,EADtB;AAEC9hB,kBAAAA,SAAS,EAAE06C,gBAAgB,CAAC5nD,IAAjB,CAAsB8nD,UAFlC;AAGC9nD,kBAAAA,IAAI,EAAEonD,gBAAgB,CAACpnD;AAHxB,iBADD;AAOA;AACD,aAnBD;;AAqBA,gBAAGknD,qBAAqB,CAACxoD,MAAzB,EAAiC;AAChC8nC,cAAAA,QAAQ,CAAC6gB,sBAAsB,CAACH,qBAAD,CAAvB,CAAR;AACA;;AACD,gBAAGO,mBAAmB,CAAC/oD,MAAvB,EAA+B;AAC9B8nC,cAAAA,QAAQ,CAACuhB,+CAA+C,CAACj+C,yBAAM29C,mBAAN,EAA2B,UAAAO,kBAAkB,EAAI;AACzG,uBAAO;AACNC,kBAAAA,WAAW,EAAED,kBAAkB,CAAC3oD,GAD1B;AAEN6oD,kBAAAA,QAAQ,EAAExhB,MAAM,CAACjkC,MAAP,CAAcooB,iBAAd,CAAgCjsB,KAAhC,CAFJ;AAGNunD,kBAAAA,QAAQ,EAAEzf,MAAM,CAAC5+B,MAAP,CAAc/D,YAAd,CAA2BnF,KAA3B,CAHJ;AAINupD,kBAAAA,UAAU,EAAEH,kBAAkB,CAAC96C;AAJzB,iBAAP;AAMA,eAPwD,CAAD,CAAhD,CAAR;AAQA;AACD,WAxCD,MAwCO;AACNs5B,YAAAA,QAAQ,CAAC4hB,yBAAyB,CAAC,kBAAD,CAA1B,CAAR;AACA;AACD,SA5CM,CAAP;AA6CA,OA9CD,MA8CO;AACN5hB,QAAAA,QAAQ,CAAC4hB,yBAAyB,CAACviB,QAAD,CAA1B,CAAR;AACA;AACD,KA5DK,EA6DN,UAAAM,KAAK,EAAI;AACRY,MAAAA,OAAO,CAACwa,GAAR,CAAY,iCAAZ,EAA+Cpb,KAA/C;;AACA,UAAIhB,GAAG,GAAG,CAAV,EAAa;AACZqB,QAAAA,QAAQ,CAAC+d,cAAc,CAAC9I,OAAD,EAAUkL,eAAV,EAA2BxhB,GAAG,GAAG,CAAjC,CAAf,CAAR;AACA,OAFD,MAEO;AACNqB,QAAAA,QAAQ,CAAC4hB,yBAAyB,CAAC,qDAAD,CAA1B,CAAR;AACA;AACD,KApEK,CAAP;AAsEA,GA5GD;AA6GA;;AAED,SAAStB,cAAT,CAAwBl/C,KAAxB,EAA+Bu9B,GAA/B,EAAoC;AACnC,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC6hB,2BAA2B,CAACv+C,yBAAMlC,KAAN,EAAa,KAAb,CAAD,CAA5B,CAAR;AACA,QAAMyX,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AAEA,QAAIp5B,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,uBAAlE,CAAnD;AAEA,QAAIL,OAAO,GAAG;AACbllC,MAAAA,IAAI,EAAE;AACLomD,QAAAA,cAAc,EAAEt8C,yBAAMlC,KAAN,EAAa,UAAAxI,KAAK,EAAI;AACrC,iBAAO;AACN4vB,YAAAA,EAAE,EAAE5vB,KAAK,CAACC;AADJ,WAAP;AAGA,SAJe;AADX;AADO,KAAd;AAUA,WAAOqlC,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,QADS;AAEjBS,MAAAA,WAAW,EAAE,SAFI;AAGjBC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,kBAAU;AAFF,OAHQ;AAOjBC,MAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAemnC,OAAf;AAPW,KAAN,CAAL,CAQJU,IARI,CASN,UAAAC,QAAQ,EAAI;AACXkB,MAAAA,OAAO,CAACwa,GAAR,CAAY,oCAAZ,EAAkD1b,QAAlD;AACA,UAAIC,WAAW,GAAGD,QAAQ,CAACH,OAAT,CAAiBtiB,GAAjB,CAAqB,cAArB,CAAlB;;AACA,UAAIyiB,QAAQ,CAACE,EAAT,IAAeD,WAAf,IAA+BA,WAAW,CAACE,OAAZ,CAAoB,kBAApB,MAA4C,CAAC,CAAhF,EAAoF;AACnF,eAAOH,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AACnC,cAAIA,IAAI,IAAIA,IAAI,CAACA,IAAb,IAAqBA,IAAI,CAACA,IAAL,CAAUomD,cAAnC,EAAmD;AAClD,gBAAI/jD,QAAQ,GAAG,EAAf;AACArC,YAAAA,IAAI,CAACA,IAAL,CAAUomD,cAAV,CAAyBhiD,GAAzB,CAA6B,UAAAkkD,YAAY,EAAI;AAC5C,kBAAIA,YAAY,CAACC,OAAjB,EAAyB;AACxBlmD,gBAAAA,QAAQ,CAAClD,IAAT,CAAcmpD,YAAY,CAACt5B,EAA3B;AACA;AACD,aAJD;AAKAwX,YAAAA,QAAQ,CAAC8e,WAAW,CAACjjD,QAAD,CAAZ,CAAR;AACA,WARD,MAQO;AACNmkC,YAAAA,QAAQ,CAACgiB,mBAAmB,CAAC,uCAAD,CAApB,CAAR;AACA;AACD,SAZM,CAAP;AAaA,OAdD,MAcO;AACNhiB,QAAAA,QAAQ,CAACgiB,mBAAmB,CAAC3iB,QAAD,CAApB,CAAR;AACA;AACD,KA7BK,EA8BN,UAAAM,KAAK,EAAI;AACRY,MAAAA,OAAO,CAACwa,GAAR,CAAY,iCAAZ,EAA+Cpb,KAA/C;;AACA,UAAIhB,GAAG,GAAG,CAAV,EAAa;AACZqB,QAAAA,QAAQ,CAACsgB,cAAc,CAACl/C,KAAD,EAAQu9B,GAAG,GAAG,CAAd,CAAf,CAAR;AACA,OAFD,MAEO;AACNqB,QAAAA,QAAQ,CAACgiB,mBAAmB,CAAC,qDAAD,CAApB,CAAR;AACA;AACD,KArCK,CAAP;AAuCA,GAvDD;AAwDA;;AAED,SAASA,mBAAT,CAA6Bpc,OAA7B,EAAqC;AACpC,SAAO,UAAC5F,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACiiB,yBAAyB,CAACrc,OAAD,CAA1B,CAAR;AACA,GAFD;AAGA;;AAED,SAASib,sBAAT,CAAgCx/C,SAAhC,EAA2C;AAC1C,SAAO,UAAC2+B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAIp5B,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,8BAAlE,CAAnD;AAEA,QAAIwF,QAAQ,GAAG,EAAf;AACA,QAAIzoC,YAAY,GAAG,EAAnB;AACAuF,IAAAA,SAAS,CAAC5I,OAAV,CAAkB,UAAC4J,QAAD,EAAc;AAC/B,UAAGA,QAAQ,IAAIA,QAAQ,CAAC7I,IAArB,IAA6B6I,QAAQ,CAAC7I,IAAT,CAAc0nD,IAA9C,EAAoD;AACnDlhB,QAAAA,QAAQ,CAACkiB,gCAAgC,CAAC7/C,QAAQ,CAACxJ,GAAV,CAAjC,CAAR;AACAiD,QAAAA,YAAY,CAACnD,IAAb,CAAkB0J,QAAQ,CAACxJ,GAA3B;AACA,YAAIspD,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,QAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBhgD,QAAQ,CAAC7I,IAAT,CAAc0nD,IAAtC;AACA3c,QAAAA,QAAQ,CAAC5rC,IAAT,CACCulC,yBAAK,CACJr3B,GADI,EAEJ;AACC23B,UAAAA,MAAM,EAAE,MADT;AAECS,UAAAA,WAAW,EAAE,SAFd;AAGCE,UAAAA,IAAI,EAAEgjB;AAHP,SAFI,CAAL,CAOE/iB,IAPF,CAOO,UAACC,QAAD;AAAA,iBAAcA,QAAQ,CAACI,IAAT,EAAd;AAAA,SAPP,EAOsC,UAAAE,KAAK,EAAI;AAACK,UAAAA,QAAQ,CAACsiB,8BAA8B,CAACjgD,QAAQ,CAACxJ,GAAV,EAAe8mC,KAAf,CAA/B,CAAR;AAA+D,SAP/G,EAQEP,IARF,CAQO,UAACC,QAAD,EAAc;AACnB,iBAAO;AACNtjC,YAAAA,WAAW,EAAEsG,QAAQ,CAACxJ,GADhB;AAEN0pD,YAAAA,SAAS,EAAEljB,QAAQ,CAAC7lC,IAAT,CAAc+oD;AAFnB,WAAP;AAIA,SAbF,WAaU,UAAA5iB,KAAK,EAAI;AAACK,UAAAA,QAAQ,CAACsiB,8BAA8B,CAACjgD,QAAQ,CAACxJ,GAAV,EAAe8mC,KAAf,CAA/B,CAAR;AAA+D,SAbnF,CADD;AAgBA;AACD,KAvBD;;AAyBA,QAAG4E,QAAQ,CAACrsC,MAAZ,EAAoB;AACnB,aAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA,UAAC0F,OAAD,EAAa;AAClB9E,QAAAA,QAAQ,CAACwiB,kDAAkD,CAAC1d,OAAD,CAAnD,CAAR;AACA,OAHK,WAGG,UAAAnF,KAAK,EAAI;AAACK,QAAAA,QAAQ,CAACyiB,+BAA+B,CAAC3mD,YAAD,EAAe6jC,KAAf,CAAhC,CAAR;AAAgE,OAH7E,CAAP;AAIA;AACD,GArCD;AAsCA;;AAED,SAAS+iB,oBAAT,CAA8B7a,IAA9B,EAAoC;AACnC,MAAIkV,gBAAgB,CAAC7jD,cAAjB,CAAgC2uC,IAAhC,CAAJ,EAA2C;AAC1C8a,IAAAA,aAAa,CAAC5F,gBAAgB,CAAClV,IAAD,CAAjB,CAAb;AACA;AACD;;AAED,SAAS0Z,+CAAT,CAAyDqB,SAAzD,EAAoE;AACnE,SAAO,UAAC5iB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA2iB,IAAAA,SAAS,GAAG50C,6BAAU40C,SAAV,IAAuBA,SAAvB,GAAmC,CAACA,SAAD,CAA/C;AAEAA,IAAAA,SAAS,CAACnqD,OAAV,CAAkB,UAACoqD,OAAD,EAAa;AAC9B,UAAGA,OAAO,CAACpB,WAAX,EAAwB;AACvBzhB,QAAAA,QAAQ,CAACkiB,gCAAgC,CAACW,OAAO,CAACpB,WAAT,CAAjC,CAAR;AACA;AACD,KAJD;AAMAqB,IAAAA,gCAAgC,CAACF,SAAD,CAAhC,CACExjB,IADF,CACO,UAACD,IAAD,EAAU;AACf,UAAI4jB,OAAO,GAAG,SAAVA,OAAU,GAAM;AACnBC,QAAAA,2BAA2B,CAAC7jB,IAAD,EAAOtmB,WAAP,CAA3B,CACEumB,IADF,CACO,UAAC0F,OAAD,EAAa;AAClB,iBAAOme,kCAAkC,CAACne,OAAD,EAAU9E,QAAV,CAAzC;AACA,SAHF,EAIEZ,IAJF,CAIO,UAAC8jB,MAAD,EAAY;AACjB,cAAGA,MAAH,EAAW;AACV1N,YAAAA,UAAU,CAAC,YAAM;AAChBuN,cAAAA,OAAO;AACP,aAFS,EAEP,IAFO,CAAV;AAGA;AACD,SAVF,WAWQ,UAACpjB,KAAD,EAAW;AACjBY,UAAAA,OAAO,CAACwa,GAAR,0DAAqEpb,KAArE;AACA,SAbF;AAcA,OAfD;;AAgBAojB,MAAAA,OAAO;AACP,KAnBF;AAoBA,GA9BD;AA+BA;;AAED,SAASE,kCAAT,CAA4Cne,OAA5C,EAAqD9E,QAArD,EAA+D;AAC9D,SAAO4E,OAAO,CAACue,OAAR,GACL/jB,IADK,CACA,YAAM;AACX,QAAIgkB,OAAO,GAAG,KAAd;AAEAte,IAAAA,OAAO,CAACtrC,IAAR,CAAaf,OAAb,CAAqB,UAAC4qD,UAAD,EAAgB;AACpC,UAAIA,UAAU,CAACC,MAAX,KAAsB,SAA1B,EAAqC;AACpCF,QAAAA,OAAO,GAAG,IAAV;AACA;AACD,KAJD;;AAMA,QAAI,CAACA,OAAL,EAAc;AACb,UAAIG,cAAc,GAAG,EAArB;AACAze,MAAAA,OAAO,CAACtrC,IAAR,CAAaf,OAAb,CAAqB,UAAC4qD,UAAD,EAAgB;AACpC,YAAIA,UAAU,CAACC,MAAX,KAAsB,MAAtB,IAAgCD,UAAU,CAAC,mBAAD,CAA9C,EAAqE;AACpE,oCAAOA,UAAU,CAAC,mBAAD,CAAjB,EAAwC,UAAC34C,QAAD,EAAc;AACrD64C,YAAAA,cAAc,CAAC5qD,IAAf,CAAoB+R,QAAQ,CAAClR,IAAT,CAAcgqD,cAAlC;AACA,WAFD;;AAGAxjB,UAAAA,QAAQ,CAACiT,sBAAsB,CAACwQ,oBAAvB,CAA4CJ,UAAU,CAAC,mBAAD,CAAtD,CAAD,CAAR;AACArjB,UAAAA,QAAQ,CAAC0jB,gCAAgC,CAACL,UAAU,CAAC7pD,IAAX,CAAgBioD,WAAjB,CAAjC,CAAR;AACA;AACD,OARD;AASAzhB,MAAAA,QAAQ,CAAC6J,wBAAwB,CAAC5D,YAAzB,CAAsC;AAAC,cAAMsd;AAAP,OAAtC,CAAD,CAAR;AACA,KAZD,MAYO;AACN,aAAOH,OAAP;AACA;AACD,GAzBK,CAAP;AA0BA;;AAED,SAASJ,2BAAT,CAAqC7jB,IAArC,EAA2CtmB,WAA3C,EAAwD;AACvD,SAAOqlB,yBAAK,CACXrlB,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,2BAAlE,CAD9B,EAEX;AACCP,IAAAA,MAAM,EAAE,MADT;AAECS,IAAAA,WAAW,EAAE,SAFd;AAGCC,IAAAA,OAAO,EAAE;AACR,sBAAgB,kBADR;AAER,gBAAU;AAFF,KAHV;AAOCC,IAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAPP,GAFW,CAAL,CAWLC,IAXK,CAWA,UAACC,QAAD,EAAc;AACpB,QAAIA,QAAQ,CAACikB,MAAT,KAAoB,GAAxB,EAA6B;AAC5B,aAAOjkB,QAAQ,CAACI,IAAT,EAAP;AACA,KAFD,MAEO;AACN,YAAM,IAAIC,KAAJ,CAAU,cAAV,CAAN;AACA;AACD,GAjBM,CAAP;AAkBA;;AAED,SAASojB,gCAAT,CAA0CF,SAA1C,EAAqD;AACpD,SAAOhe,OAAO,CAACue,OAAR,GACL/jB,IADK,CACA,YAAM;AACX,WAAO;AACN5lC,MAAAA,IAAI,EAAE8J,yBAAMs/C,SAAN,EAAiB,UAACC,OAAD,EAAa;AACnC,eAAO;AACNhb,UAAAA,IAAI,EAAEnY,cAAK,CAACmY,IAAN,EADA;AAENruC,UAAAA,IAAI,EAAEqpD;AAFA,SAAP;AAIA,OALK;AADA,KAAP;AAQA,GAVK,CAAP;AAWA;;AAED,SAASL,kDAAT,CAA4DmB,OAA5D,EAAqE;AACpE,SAAO,UAAC3jB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAIp5B,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,kCAAlE,CAAnD;AACA,QAAI3mC,KAAK,GAAG6nC,QAAQ,EAApB;AAEA,QAAInkC,YAAY,GAAG,EAAnB;AACA6nD,IAAAA,OAAO,CAAClrD,OAAR,CAAgB,UAACmrD,MAAD,EAAY;AAC3B9nD,MAAAA,YAAY,CAACnD,IAAb,CAAkBirD,MAAM,CAAC7nD,WAAzB;AACA,UAAI8rC,IAAI,GAAGnY,cAAK,CAACmY,IAAN,EAAX;;AACA,UAAIgc,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC1B3lB,QAAAA,yBAAK,CAACr3B,GAAD,EAAM;AACV23B,UAAAA,MAAM,EAAE,MADE;AAEVS,UAAAA,WAAW,EAAE,SAFH;AAGVC,UAAAA,OAAO,EAAE;AACR,4BAAgB,kBADR;AAER,sBAAU;AAFF,WAHC;AAOVC,UAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,YAAAA,IAAI,EAAE;AACL+oD,cAAAA,SAAS,EAAEqB,MAAM,CAACrB,SADb;AAELuB,cAAAA,OAAO,EAAE5jB,MAAM,CAAC5+B,MAAP,CAAc/D,YAAd,CAA2BnF,KAA3B,CAFJ;AAGL2rD,cAAAA,OAAO,EAAE7jB,MAAM,CAACjkC,MAAP,CAAcooB,iBAAd,CAAgCjsB,KAAhC;AAHJ;AADc,WAAf;AAPI,SAAN,CAAL,CAcGgnC,IAdH,CAcQ,UAACC,QAAD,EAAc;AACrB,iBAAOA,QAAQ,CAACI,IAAT,GAAgBL,IAAhB,CAAqB,UAAA5lC,IAAI,EAAI;AACnC,gBAAG,CAAC6lC,QAAQ,CAACE,EAAV,IAAiB/lC,IAAI,CAACN,cAAL,CAAoB,SAApB,KAAkC,CAACM,IAAI,CAACqsC,OAA5D,EAAsE;AACrE6c,cAAAA,oBAAoB,CAAC7a,IAAD,CAApB;AACA7H,cAAAA,QAAQ,CAACyiB,+BAA+B,CAAC3mD,YAAD,EAAeujC,QAAQ,CAAC2kB,UAAxB,CAAhC,CAAR;AACA,aAHD,MAGO,IAAIxqD,IAAI,CAAC2mC,MAAT,EAAiB;AACvBuiB,cAAAA,oBAAoB,CAAC7a,IAAD,CAApB;AACA7H,cAAAA,QAAQ,CAACikB,2CAA2C,CAAC,CAAC;AACrDloD,gBAAAA,WAAW,EAAE6nD,MAAM,CAAC7nD,WADiC;AAErDmoD,gBAAAA,cAAc,EAAE5sD,IAAI,CAACmO,KAAL,CAAWjM,IAAI,CAAC2mC,MAAhB;AAFqC,eAAD,CAAD,CAA5C,CAAR;AAIA;AACD,WAXM,WAWE,UAAAR,KAAK,EAAI;AACjB+iB,YAAAA,oBAAoB,CAAC7a,IAAD,CAApB;AACA7H,YAAAA,QAAQ,CAACyiB,+BAA+B,CAAC3mD,YAAD,EAAe6jC,KAAf,CAAhC,CAAR;AACA,WAdM,CAAP;AAeA,SA9BD,WA8BS,UAAAA,KAAK,EAAI;AACjB+iB,UAAAA,oBAAoB,CAAC7a,IAAD,CAApB;AACA7H,UAAAA,QAAQ,CAACyiB,+BAA+B,CAAC3mD,YAAD,EAAe6jC,KAAf,CAAhC,CAAR;AACA,SAjCD;AAkCA,OAnCD;;AAqCAkkB,MAAAA,cAAc;AACd9G,MAAAA,gBAAgB,CAAClV,IAAD,CAAhB,GAAyBsc,WAAW,CAAC,YAAM;AAC1CN,QAAAA,cAAc;AACd,OAFmC,EAEjC,IAFiC,CAApC;AAGA,KA5CD;AA6CA,GAnDD;AAoDA;;AAGD,SAASI,2CAAT,CAAqDnf,OAArD,EAA8D;AAC7D,SAAO,UAAC9E,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACA,QAAIp5B,GAAG,GAAGgS,WAAW,CAACgmB,kBAAZ,GAAiC,KAAjC,GAAyCjvB,wBAAI,CAACtG,IAAL,CAAUuP,WAAW,CAACimB,cAAtB,EAAsCjmB,WAAW,CAACkmB,cAAlD,EAAkE,wBAAlE,CAAnD;AAEA,QAAIqlB,WAAW,GAAGlkB,MAAM,CAAC5+B,MAAP,CAAc7D,SAAd,CAAwBwiC,QAAQ,EAAhC,CAAlB;AAEA,QAAIvlC,cAAc,GAAG0pD,WAAW,GAAGA,WAAW,CAACvrD,GAAf,GAAqB,IAArD;AAEA,QAAIwrD,qBAAJ,EAA2BC,yBAA3B,EAAsDC,yBAAtD;AACA,QAAIv9C,aAAa,GAAGk5B,MAAM,CAACjkC,MAAP,CAAckoB,2BAAd,CAA0C8b,QAAQ,EAAlD,CAApB;;AACA,QAAIj5B,aAAa,CAACw9C,oBAAd,IAAsCx9C,aAAa,CAACw9C,oBAAd,CAAmCC,SAA7E,EAAuF;AACtF,UAAIA,SAAS,GAAGz9C,aAAa,CAACw9C,oBAAd,CAAmCC,SAAnD;AACAJ,MAAAA,qBAAqB,GAAGI,SAAS,CAACC,YAAlC;AACAJ,MAAAA,yBAAyB,GAAGG,SAAS,CAACE,GAAtC;AACAJ,MAAAA,yBAAyB,GAAGE,SAAS,CAACG,GAAtC;AACA,KALD,MAKO;AACNrkB,MAAAA,OAAO,CAACZ,KAAR,CAAc,+GAAd;AACA;;AAED,QAAIl1B,SAAS,GAAG,EAAhB;AACA,QAAI3O,YAAY,GAAG,EAAnB;AAEAgpC,IAAAA,OAAO,CAACrsC,OAAR,CAAgB,UAAC0nC,MAAD,EAAY;AAC3B,UAAGzlC,cAAc,IAAIylC,MAAM,CAACpkC,WAA5B,EAAyC;AACxCD,QAAAA,YAAY,CAACnD,IAAb,CAAkBwnC,MAAM,CAACpkC,WAAzB;AACA,YAAI8oD,YAAY,GAAG1kB,MAAM,CAAC+jB,cAAP,CAAsB,CAAtB,EAAyBW,YAA5C;AACA,YAAIC,aAAa,GAAG3kB,MAAM,CAAC+jB,cAAP,CAAsB,CAAtB,EAAyBY,aAA7C;AAEA,YAAIC,WAAW,GAAGF,YAAY,CAAC,CAAD,CAA9B;;AACA,YAAIG,SAAS,GAAG5tD,0BAAO0tD,aAAP,EAAsB;AAACG,UAAAA,SAAS,EAAE;AAAZ,SAAtB,CAAhB;;AACA,YAAIC,SAAS,GAAG9tD,0BAAO0tD,aAAP,EAAsB;AAACG,UAAAA,SAAS,EAAE;AAAZ,SAAtB,CAAhB;;AAEA,YAAGF,WAAW,IAAIC,SAAf,IAA4BE,SAA/B,EAA0C;AACzCz6C,UAAAA,SAAS,CAAC9R,IAAV,CACC;AACCa,YAAAA,IAAI,EAAE;AACLmmD,cAAAA,QAAQ,EAAEwF,MAAM,CAACzqD,cAAD,CADX;AAEL+mD,cAAAA,WAAW,EAAE0D,MAAM,CAAChlB,MAAM,CAACpkC,WAAR,CAFd;AAGLqpD,cAAAA,iBAAiB,EAAEf,qBAHd;AAILb,cAAAA,cAAc,EAAEuB,WAAW,CAACM;AAJvB;AADP,WADD;AAUA56C,UAAAA,SAAS,CAAC9R,IAAV,CACC;AACCa,YAAAA,IAAI,EAAE;AACLmmD,cAAAA,QAAQ,EAAEwF,MAAM,CAACzqD,cAAD,CADX;AAEL+mD,cAAAA,WAAW,EAAE0D,MAAM,CAAChlB,MAAM,CAACpkC,WAAR,CAFd;AAGLqpD,cAAAA,iBAAiB,EAAEd,yBAHd;AAILd,cAAAA,cAAc,EAAEwB,SAAS,CAACK;AAJrB;AADP,WADD;AAUA56C,UAAAA,SAAS,CAAC9R,IAAV,CACC;AACCa,YAAAA,IAAI,EAAE;AACLmmD,cAAAA,QAAQ,EAAEwF,MAAM,CAACzqD,cAAD,CADX;AAEL+mD,cAAAA,WAAW,EAAE0D,MAAM,CAAChlB,MAAM,CAACpkC,WAAR,CAFd;AAGLqpD,cAAAA,iBAAiB,EAAEb,yBAHd;AAILf,cAAAA,cAAc,EAAE0B,SAAS,CAACG;AAJrB;AADP,WADD;AAUA;AACD;AACD,KA3CD;;AA6CA,QAAG56C,SAAS,CAACvS,MAAb,EAAqB;AACpB,aAAOgmC,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,QAAAA,MAAM,EAAE,MADS;AAEjBS,QAAAA,WAAW,EAAE,SAFI;AAGjBC,QAAAA,OAAO,EAAE;AACR,0BAAgB,kBADR;AAER,oBAAU;AAFF,SAHQ;AAOjBC,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AAAC,kBAAQ;AAAC,uBAAWkT;AAAZ;AAAT,SAAf;AAPW,OAAN,CAAL,CAQJ20B,IARI,CAQC,UAACkmB,eAAD;AAAA,eAAqBA,eAAe,CAAC7lB,IAAhB,EAArB;AAAA,OARD,EASLL,IATK,CASA,UAACkmB,eAAD,EAAqB;AAC1B,YAAIA,eAAe,CAAC9rD,IAAhB,CAAqB+rD,OAAzB,EAAiC;AAChC;AACA,cAAIhC,cAAc,GAAG9nC,6BACpBnY,yBAAMgiD,eAAe,CAAC9rD,IAAhB,CAAqB+rD,OAA3B,EAAoC,UAACj0C,eAAD,EAAqB;AACxD,mBAAOA,eAAe,CAAC9X,IAAhB,CAAqBgqD,cAA5B;AACA,WAFD,CADoB,CAArB;;AAKAxjB,UAAAA,QAAQ,CAACiT,sBAAsB,CAACwQ,oBAAvB,CAA4C6B,eAAe,CAAC9rD,IAAhB,CAAqB+rD,OAAjE,CAAD,CAAR;AACAvlB,UAAAA,QAAQ,CAAC6J,wBAAwB,CAAC5D,YAAzB,CAAsC;AAAC,kBAAMsd;AAAP,WAAtC,CAAD,CAAR;AAEAvjB,UAAAA,QAAQ,CAACwlB,iCAAiC,CAAC1pD,YAAD,CAAlC,CAAR;AACA,SAXD,MAWO;AACNkkC,UAAAA,QAAQ,CAACyiB,+BAA+B,CAAC3mD,YAAD,EAAe,2BAAf,CAAhC,CAAR;AACA;AACD,OAxBK,WAwBG,UAAC6jC,KAAD,EAAW;AACnBK,QAAAA,QAAQ,CAACyiB,+BAA+B,CAAC3mD,YAAD,EAAe6jC,KAAf,CAAhC,CAAR;AACA,OA1BK,CAAP;AA2BA;AACD,GAhGD;AAiGA;;AAED,SAASuiB,gCAAT,CAA0CnmD,WAA1C,EAAsD;AACrD,SAAO,UAACikC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI59B,QAAQ,GAAG69B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2B/C,QAA3B,CAAoC2hC,QAAQ,EAA5C,EAAgDlkC,WAAhD,CAAf;;AACA,QAAIsG,QAAJ,EAAa;AACZ,UAAIwzC,OAAO,qCAAOxzC,QAAP;AAAiBojD,QAAAA,cAAc,EAAE;AAACC,UAAAA,OAAO,EAAE;AAAV;AAAjC,QAAX;;AACA1lB,MAAAA,QAAQ,CAAC2lB,sCAAsC,CAAC,CAAC9P,OAAD,CAAD,CAAvC,CAAR;AACA;AACD,GAND;AAOA;;AAED,SAAS2P,iCAAT,CAA2C1pD,YAA3C,EAAwD;AACvD,SAAO,UAACkkC,QAAD,EAAWC,QAAX,EAAwB;AAC9BnkC,IAAAA,YAAY,CAACrD,OAAb,CAAqB,UAAAI,GAAG,EAAI;AAC3BmnC,MAAAA,QAAQ,CAAC0jB,gCAAgC,CAAC7qD,GAAD,CAAjC,CAAR;AACA,KAFD;AAGA,GAJD;AAKA;;AAED,SAAS4pD,+BAAT,CAAyC3mD,YAAzC,EAAuD8pC,OAAvD,EAA+D;AAC9D,SAAO,UAAC5F,QAAD,EAAWC,QAAX,EAAwB;AAC9BnkC,IAAAA,YAAY,CAACrD,OAAb,CAAqB,UAAAI,GAAG,EAAI;AAC3BmnC,MAAAA,QAAQ,CAACsiB,8BAA8B,CAACzpD,GAAD,EAAM+sC,OAAN,CAA/B,CAAR;AACA,KAFD;AAGA,GAJD;AAKA;;AAED,SAAS8d,gCAAT,CAA0C3nD,WAA1C,EAAsD;AACrD,SAAO,UAACikC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI59B,QAAQ,GAAG69B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2B/C,QAA3B,CAAoC2hC,QAAQ,EAA5C,EAAgDlkC,WAAhD,CAAf;;AACA,QAAIsG,QAAJ,EAAa;AACZ,UAAIwzC,OAAO,qCAAOxzC,QAAP;AAAiBojD,QAAAA,cAAc,EAAE;AAACC,UAAAA,OAAO,EAAE,IAAV;AAAgBE,UAAAA,QAAQ,EAAE;AAA1B;AAAjC,QAAX;;AACA5lB,MAAAA,QAAQ,CAAC6lB,sCAAsC,CAAC,CAAChQ,OAAD,CAAD,CAAvC,CAAR;AACA;AACD,GAND;AAOA;;AAED,SAASyM,8BAAT,CAAwCvmD,WAAxC,EAAqD4jC,KAArD,EAA2D;AAC1D,SAAO,UAACK,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI59B,QAAQ,GAAG69B,MAAM,CAAC7+B,SAAP,CAAiBA,SAAjB,CAA2B/C,QAA3B,CAAoC2hC,QAAQ,EAA5C,EAAgDlkC,WAAhD,CAAf;;AACA,QAAIsG,QAAJ,EAAa;AACZ,UAAIwzC,OAAO,qCAAOxzC,QAAP;AAAiBojD,QAAAA,cAAc,EAAE;AAACC,UAAAA,OAAO,EAAE,IAAV;AAAgBE,UAAAA,QAAQ,EAAE,IAA1B;AAAgCjmB,UAAAA,KAAK,EAAE,IAAvC;AAA6CiG,UAAAA,OAAO,EAAEjG;AAAtD;AAAjC,QAAX;;AACAK,MAAAA,QAAQ,CAAC8lB,oCAAoC,CAAC,CAACjQ,OAAD,CAAD,CAArC,CAAR;AACAtV,MAAAA,OAAO,CAACZ,KAAR,CAAc,kDAAd,EAAkEA,KAAlE;AACA;AACD,GAPD;AAQA;;AAED,SAAS8gB,qBAAT,CAA+BjnD,IAA/B,EAAqC;AACpC,SAAO,UAACwmC,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAI7+B,KAAK,GAAG5H,IAAI,CAAComD,cAAjB;AACA,QAAIv+C,SAAS,GAAG7H,IAAI,CAAC6H,SAArB,CAF8B;;AAK9B2+B,IAAAA,QAAQ,CAAC6f,gBAAgB,CAACz+C,KAAD,CAAjB,CAAR;AACA4+B,IAAAA,QAAQ,CAAC+lB,yBAAyB,CAAC1kD,SAAD,CAA1B,CAAR,CAN8B;;AAS9B,QAAIjH,aAAa,GAAG8lC,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuB7D,YAAvB,CAAoC0iC,QAAQ,EAA5C,CAApB;;AACA,QAAI7lC,aAAJ,EAAmB;AAClB,UAAI4rD,iBAAiB,GAAG5uD,0BAAOgK,KAAP,EAAc;AAACymC,QAAAA,IAAI,EAAEztC;AAAP,OAAd,CAAxB;;AACA,UAAI4rD,iBAAJ,EAAuB;AACtBhmB,QAAAA,QAAQ,CAACse,mBAAmB,CAAC0H,iBAAiB,CAACx9B,EAAnB,CAApB,CAAR;AACA;AACD,KAf6B;;;AAiB9BwX,IAAAA,QAAQ,CAACimB,uBAAuB,CAAC3iD,yBAAMlC,KAAN,EAAa,MAAb,CAAD,CAAxB,CAAR;AACA,GAlBD;AAmBA;;AAED,SAAS4/C,qBAAT,CAA+BxnD,IAA/B,EAAqC;AACpC,SAAO,UAAAwmC,QAAQ,EAAI;AAClB,QAAI5+B,KAAK,GAAG5H,IAAI,CAAComD,cAAjB;AACA,QAAIv+C,SAAS,GAAG7H,IAAI,CAAC6H,SAArB;;AAEA,QAAIA,SAAS,CAACnJ,MAAd,EAAqB;AACpB;AACA8nC,MAAAA,QAAQ,CAACod,+BAA+B,EAAhC,CAAR,CAFoB;;AAIpBpd,MAAAA,QAAQ,CAACmf,WAAW,CAAC99C,SAAD,CAAZ,CAAR;AACA;;AAED2+B,IAAAA,QAAQ,CAAC6f,gBAAgB,CAACz+C,KAAD,CAAjB,CAAR;AACA4+B,IAAAA,QAAQ,CAACkmB,gCAAgC,EAAjC,CAAR;AACA,GAbD;AAcA;;AAED,SAASH,yBAAT,CAAmCvsD,IAAnC,EAAyC;AACxC,SAAO,UAACwmC,QAAD,EAAWC,QAAX,EAAwB;AAE9B;AACAD,IAAAA,QAAQ,CAACmf,WAAW,CAAC3lD,IAAD,CAAZ,CAAR,CAH8B;;AAM9B,QAAI2sD,WAAW,GAAGjmB,MAAM,CAAC7+B,SAAP,CAAiBD,KAAjB,CAAuBjC,YAAvB,CAAoC8gC,QAAQ,EAA5C,CAAlB;AACA,QAAIgV,OAAO,GAAG,EAAd;;AACA,8BAAOkR,WAAP,EAAoB,UAAAC,UAAU,EAAI;AACjC,UAAIC,gBAAJ;;AACA,UAAIC,YAAY,GAAGhjD,yBAAM8iD,UAAU,CAAC5sD,IAAX,CAAgB6H,SAAtB,EAAiC,UAAAtF,WAAW,EAAI;AAClE,YAAI4kD,eAAe,GAAGvpD,0BAAOoC,IAAP,EAAa;AAAC,kBAAQuC;AAAT,SAAb,CAAtB;;AACA,YAAI4kD,eAAJ,EAAqB;AACpB0F,UAAAA,gBAAgB,GAAG,IAAnB;AACA,iBAAO1F,eAAe,CAACn4B,EAAvB;AACA,SAHD,MAGO;AACN,iBAAOzsB,WAAP;AACA;AACD,OARkB,CAAnB;;AASA,UAAIsqD,gBAAJ,EAAsB;AACrBpR,QAAAA,OAAO,CAACt8C,IAAR,CAAa;AACZE,UAAAA,GAAG,EAAEutD,UAAU,CAACvtD,GADJ;AAEZW,UAAAA,IAAI,EAAE;AAAC,yBAAa8sD;AAAd;AAFM,SAAb;AAIA;AACD,KAjBD;;AAkBA,QAAIrR,OAAO,CAAC/8C,MAAZ,EAAoB;AACnB8nC,MAAAA,QAAQ,CAACyd,uBAAuB,CAACxI,OAAD,CAAxB,CAAR;AACA,KA5B6B;;;AA+B9BjV,IAAAA,QAAQ,CAACod,+BAA+B,EAAhC,CAAR;AACA,GAhCD;AAiCA;;;AAID,SAASmJ,eAAT,CAAyBlkD,QAAzB,EAAmC;AAClC,SAAO;AACNmE,IAAAA,IAAI,EAAEwgC,WAAW,CAACpP,oBADZ;AAENp+B,IAAAA,IAAI,EAAE6I;AAFA,GAAP;AAIA;;AAED,SAAS2gC,qBAAT,CAA6B3hC,SAA7B,EAAwC;AACvC,SAAO;AACNmF,IAAAA,IAAI,EAAEwgC,WAAW,CAACnP,0BADZ;AAENp5B,IAAAA,IAAI,EAAE4C;AAFA,GAAP;AAIA;;AAED,SAASi9C,mBAAT,CAA6BjkD,OAA7B,EAAsC;AACrC,SAAO;AACNmM,IAAAA,IAAI,EAAEwgC,WAAW,CAAC/O,0BADZ;AAENp/B,IAAAA,GAAG,EAAEwB;AAFC,GAAP;AAIA;;AAED,SAASskD,+BAAT,CAAyCv5C,MAAzC,EAAiD;AAChD,SAAO;AACNoB,IAAAA,IAAI,EAAEwgC,WAAW,CAAClP,sCADZ;AAEN1yB,IAAAA,MAAM,EAAEA;AAFF,GAAP;AAIA;;AAED,SAASy5C,iBAAT,CAA2BrlD,IAA3B,EAAiC;AAChC,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACvO,sBADZ;AAENj/B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASylD,iBAAT,CAA2B5kD,OAA3B,EAAoC;AACnC,SAAO;AACNmM,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7O,iBADZ;AAEN99B,IAAAA,OAAO,EAAEA;AAFH,GAAP;AAIA;;AAED,SAASglD,iBAAT,CAA2B7lD,IAA3B,EAAiC;AAChC,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5O,iBADZ;AAEN5+B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAAS4lD,eAAT,CAAyBzf,KAAzB,EAAgC;AAC/B,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAAC3O,uBADZ;AAENsH,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAIA;;AAED,SAAS+f,sBAAT,GAAkC;AACjC,SAAO;AACNl5C,IAAAA,IAAI,EAAEwgC,WAAW,CAAC1O;AADZ,GAAP;AAGA;;AAED,SAAS2nB,sBAAT,CAAgCzmD,IAAhC,EAAsC;AACrC,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACzO,uBADZ;AAEN/+B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASsmD,oBAAT,CAA8BngB,KAA9B,EAAqC;AACpC,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAACxO,6BADZ;AAENmH,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAIA;;AAED,SAAS8d,uBAAT,CAAiCjkD,IAAjC,EAAuC;AACtC,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACtO,6BADZ;AAENl/B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AACD,SAAS0jD,2BAAT,CAAqC1jD,IAArC,EAA2C;AAC1C,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACvP,uBADZ;AAENj+B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AACD,SAAS0sD,gCAAT,GAA4C;AAC3C,SAAO;AACN1/C,IAAAA,IAAI,EAAEwgC,WAAW,CAACpO;AADZ,GAAP;AAGA;;AACD,SAASmmB,iBAAT,CAA2BtgD,IAA3B,EAAiC;AAChC,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAAChP,sBADZ;AAENv5B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AACD,SAASwnD,uBAAT,CAAiCxnD,IAAjC,EAAuC;AACtC,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAACrO,6BADZ;AAENl6B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AACD,SAAS++C,kCAAT,CAA4CnjD,OAA5C,EAAqDktC,QAArD,EAA+D;AAC9D,SAAO;AACN/gC,IAAAA,IAAI,EAAEwgC,WAAW,CAACnO,sCADZ;AAENx+B,IAAAA,OAAO,EAAEA,OAFH;AAGNktC,IAAAA,QAAQ,EAAEA;AAHJ,GAAP;AAKA;;AACD,SAAS8V,2BAAT,CAAqC5+C,IAArC,EAA2C;AAC1C,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAACtP,uBADZ;AAENj5B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAAS0/C,sCAAT,CAAgDpiD,WAAhD,EAA6DwrC,QAA7D,EAAuE;AACtE,SAAO;AACN/gC,IAAAA,IAAI,EAAEwgC,WAAW,CAACrP,gCADZ;AAEN57B,IAAAA,WAAW,EAAEA,WAFP;AAGNwrC,IAAAA,QAAQ,EAAEA;AAHJ,GAAP;AAKA;;AAED,SAASgZ,2BAAT,CAAqC9hD,IAArC,EAA2C;AAC1C,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAAC/N,kCADZ;AAENx6B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASqiD,yBAAT,CAAmCnhB,KAAnC,EAA0C;AACzC,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAAC7N,gCADZ;AAENwG,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAIA;;AAED,SAASkiB,2BAAT,CAAqCpjD,IAArC,EAA2C;AAC1C,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5N,kCADZ;AAEN36B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASwjD,yBAAT,CAAmCtiB,KAAnC,EAA0C;AACzC,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAAC5N,kCADZ;AAENuG,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAIA;;AAED,SAASohB,2BAAT,CAAqCtiD,IAArC,EAA2C;AAC1C,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAACzN,kCADZ;AAEN96B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASmjD,yBAAT,CAAmCnjD,IAAnC,EAAyC;AACxC,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAACvN,gCADZ;AAENh7B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASknD,sCAAT,CAAgDnsD,IAAhD,EAAsD;AACrD,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAClO,qCADZ;AAENt/B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASqsD,sCAAT,CAAgDrsD,IAAhD,EAAsD;AACrD,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACjO,qCADZ;AAENv/B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASssD,oCAAT,CAA8CtsD,IAA9C,EAAoD;AACnD,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAChO,mCADZ;AAENx/B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;;AAID,kBAAe;AACdsuC,EAAAA,GAAG,EAAEA,KADS;AAEd0e,EAAAA,SAAS,EAAED,eAFG;AAGdE,EAAAA,sBAAsB,EAAEP,gCAHV;AAKdzH,EAAAA,qBAAqB,EAAEA,qBALT;AAMdiI,EAAAA,yBAAyB,EAAE/H,+BANb;AAQdJ,EAAAA,iBAAiB,EAAEA,iBARL;AASdT,EAAAA,oBAAoB,EAAEA,oBATR;AAWduC,EAAAA,gBAAgB,EAAEA,gBAXJ;AAYdH,EAAAA,cAAc,EAAEA,cAZF;AAad9B,EAAAA,aAAa,EAAEA,aAbD;AAedM,EAAAA,IAAI,EAAEA,IAfQ;AAgBde,EAAAA,SAAS,EAAEA,SAhBG;AAkBdzC,EAAAA,iBAAiB,EAAEA,iBAlBL;AAmBdI,EAAAA,+BAA+B,EAAEA,+BAnBnB;AAqBdM,EAAAA,4BAA4B,EAAEA,4BArBhB;AAsBdM,EAAAA,kCAAkC,EAAEA,kCAtBtB;AAwBdb,EAAAA,sBAAsB,EAAEA,sBAxBV;AAyBdc,EAAAA,oBAAoB,EAAEA,oBAzBR;AA0BdrV,EAAAA,mBAAmB,EAAnBA;AA1Bc,CAAf;;ACprCA;AAEA,IAAMd,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACtN,MAAvB,CAAZ;AACA,IAAM3Q,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAACjkC,MAAP,CAAcG,WAA5B,EAAyC,QAAzC,EAAmD4qC,WAAW,CAACtN,MAA/D,CAAf;AACA,IAAMwH,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAACjkC,MAAP,CAAcG,WAA5B,EAAyC,QAAzC,EAAmD4qC,WAAW,CAACtN,MAA/D,CAAnB;AACA,IAAMoI,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAACjkC,MAAP,CAAcG,WAAhC,EAA6C,QAA7C,EAAuD4qC,WAAW,CAACtN,MAAnE,CAAnB;AACA,IAAMmH,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAACjkC,MAAP,CAAcG,WAAlC,EAA+C4qC,WAAW,CAACtN,MAA3D,CAArB;AACA,IAAMsI,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACjkC,MAAP,CAAcG,WAA7B,EAA0C,QAA1C,EAAoD4qC,WAAW,CAACtN,MAAhE,CAAhB;AACA,IAAM2O,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACtN,MAAhC,CAArB;AACA,IAAM8O,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACtN,MAAnC,CAAxB;AACA,IAAM0I,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACjkC,MAAP,CAAcG,WAAhC,EAA6C,QAA7C,EAAuD4qC,WAAW,CAACtN,MAAnE,CAAnB;AACA,IAAM2M,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACjkC,MAAP,CAAcG,WAAjC,YAAwD4qC,WAAW,CAACtN,MAApE,CAApB;AACA,IAAMiJ,mCAAiC,GAAG/9B,OAAM,CAAC+9B,iCAAP,CAAyCqE,WAAW,CAACtN,MAArD,EAA6D,OAA7D,CAA1C;AACA,IAAMiN,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAACjkC,MAAP,CAAcG,WAArD,EAAkE,QAAlE,EAA4E4qC,WAAW,CAACtN,MAAxF,CAAxC;;AAEA,SAASyO,cAAT,CAAsBtvC,GAAtB,EAA2B;AAC1B,SAAO,UAACmnC,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC2C,mCAAiC,CAAC9pC,GAAD,CAAlC,CAAR,CAD8B;;AAI9B,QAAI8tD,WAAW,GAAGzmB,MAAM,CAACjkC,MAAP,CAAcwB,SAAd,CAAwBwiC,QAAQ,EAAhC,CAAlB;;AACA,QAAI0mB,WAAW,IAAIA,WAAW,CAACntD,IAA3B,IAAmCmtD,WAAW,CAACntD,IAAZ,CAAiBwN,aAApD,IAAqE2/C,WAAW,CAACntD,IAAZ,CAAiBwN,aAAjB,CAA+B4/C,oBAAxG,EAA8H;AAC7H5mB,MAAAA,QAAQ,CAAC6mB,SAAyB,CAAC7c,qBAA1B,CAAgD;AAACxvC,QAAAA,QAAQ,EAAE3B,GAAX;AAAgBsC,QAAAA,YAAY,EAAEwrD,WAAW,CAACntD,IAAZ,CAAiBwN,aAAjB,CAA+B4/C;AAA7D,OAAhD,EAAoI,IAApI,EAA0I,CAA1I,EAA6I,EAA7I,EAAiJ,+BAAjJ,EAAkL,IAAlL,CAAD,CAAR;AACA,KAP6B;;;AAU9B,QAAID,WAAW,IAAIA,WAAW,CAACntD,IAA3B,IAAmCmtD,WAAW,CAACntD,IAAZ,CAAiBwN,aAApD,IAAqE2/C,WAAW,CAACntD,IAAZ,CAAiBwN,aAAjB,CAA+B8/C,uBAAxG,EAAiI;AAChI9mB,MAAAA,QAAQ,CAAC6mB,SAAyB,CAAC7c,qBAA1B,CAAgD;AAACxvC,QAAAA,QAAQ,EAAE3B,GAAX;AAAgBsC,QAAAA,YAAY,EAAEwrD,WAAW,CAACntD,IAAZ,CAAiBwN,aAAjB,CAA+B8/C;AAA7D,OAAhD,EAAuI,IAAvI,EAA6I,CAA7I,EAAgJ,EAAhJ,EAAoJ,+BAApJ,EAAqL,IAArL,CAAD,CAAR;AACA;AACD,GAbD;AAcA;;AAED,SAASle,qBAAT,CAA6BpvC,IAA7B,EAAmC;AAClC,SAAO,UAAAwmC,QAAQ,EAAI;AAClB,QAAIxmC,IAAJ,EAAU;AACT,UAAIA,IAAI,IAAIA,IAAI,CAAC6C,KAAjB,EAAwB;AACvB2jC,QAAAA,QAAQ,CAAC8H,KAAG,CAACl5B,4BAASpV,IAAI,CAAC6C,KAAd,CAAD,CAAJ,CAAR;AACA;;AAED,UAAI7C,IAAI,IAAIA,IAAI,CAAC0C,SAAjB,EAA4B;AAC3B8jC,QAAAA,QAAQ,CAACmI,cAAY,CAAC3uC,IAAI,CAAC0C,SAAN,CAAb,CAAR;AACA;AACD;AACD,GAVD;AAWA;AAKD;;;AAEA,mBAAe;AACd4rC,EAAAA,GAAG,EAAHA,KADc;AAEd/e,EAAAA,MAAM,EAANA,QAFc;AAGd,YAAQmY,YAHM;AAIdyF,EAAAA,+BAA+B,EAA/BA,iCAJc;AAMdN,EAAAA,WAAW,EAAXA,aANc;AAQdvE,EAAAA,UAAU,EAAVA,YARc;AASdqG,EAAAA,YAAY,EAAZA,cATc;AAWdtH,EAAAA,YAAY,EAAZA,cAXc;AAYd+H,EAAAA,mBAAmB,EAAnBA,qBAZc;AAadxG,EAAAA,UAAU,EAAVA,YAbc;AAcdoG,EAAAA,eAAe,EAAfA,iBAdc;AAedxG,EAAAA,OAAO,EAAPA,SAfc;AAgBdqG,EAAAA,YAAY,EAAZA;AAhBc,CAAf;;ACvDA,IAAI0e,QAAQ,GAAG,EAAf;;AAGA,SAAS/9C,WAAT,CAAsBgZ,MAAtB,EAA8BuF,OAA9B,EAAuCvD,KAAvC,EAA8CgjC,cAA9C,EAA8DvQ,SAA9D,EAAyE3sC,KAAzE,EAAgF;AAC/E,SAAO,UAACk2B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIgnB,cAAc,GAAG/mB,MAAM,CAAChZ,OAAP,CAAeS,kBAAf,CAAkCsY,QAAQ,EAA1C,EAA8C1Y,OAA9C,CAArB;;AAEA,QAAI0/B,cAAJ,EAAoB;AACnB,UAAIF,QAAQ,CAACx/B,OAAD,CAAZ,EAAuB;AACtB2/B,QAAAA,YAAY,CAACH,QAAQ,CAACx/B,OAAD,CAAT,CAAZ;AACA;;AACDyY,MAAAA,QAAQ,CAAC+T,cAAY,CACpB/xB,MADoB,EAEpBuF,OAFoB,EAGpB;AACCvD,QAAAA,KAAK,EAALA,KADD;AAECgjC,QAAAA,cAAc,EAAdA,cAFD;AAGCG,QAAAA,YAAY,EAAE,SAHf;AAIC1Q,QAAAA,SAAS,EAATA,SAJD;AAKC3sC,QAAAA,KAAK,EAALA;AALD,OAHoB,CAAb,CAAR;AAWA,KAfD,MAeO;AACNk2B,MAAAA,QAAQ,CAACmD,WAAS,CACjBnhB,MADiB,EAEjBuF,OAFiB,EAGjB;AACCvD,QAAAA,KAAK,EAALA,KADD;AAECgjC,QAAAA,cAAc,EAAdA,cAFD;AAGCG,QAAAA,YAAY,EAAE,SAHf;AAIC1Q,QAAAA,SAAS,EAATA,SAJD;AAKC3sC,QAAAA,KAAK,EAALA;AALD,OAHiB,CAAV,CAAR;AAWA,KA9B6B;;;AAiC9B0rC,IAAAA,UAAU,CAAC,YAAM;AAChBxV,MAAAA,QAAQ,CAAConB,IAAI,CAACplC,MAAD,EAASuF,OAAT,CAAL,CAAR;AACA,KAFS,EAEP,CAFO,CAAV;AAGA,GApCD;AAqCA;;AAED,SAAS8/B,SAAT,CAAmBrlC,MAAnB,EAA2B;AAC1B,SAAO,UAACge,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIqnB,WAAW,GAAGpnB,MAAM,CAAChZ,OAAP,CAAenL,WAAf,CAA2BkkB,QAAQ,EAAnC,EAAuCje,MAAvC,CAAlB;;AACA,QAAI,CAACslC,WAAL,EAAkB;AACjBtnB,MAAAA,QAAQ,CAAC2L,cAAY,CAAC3pB,MAAD,CAAb,CAAR;AACA;AACD,GALD;AAMA;;AAED,SAASolC,IAAT,CAAcplC,MAAd,EAAsByF,aAAtB,EAAqC;AACpC,SAAO,UAACuY,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAIxY,aAAa,KAAK,MAAtB,EAA8B;AAC7BuY,MAAAA,QAAQ,CAACunB,UAAU,CAACvlC,MAAD,EAASyF,aAAT,CAAX,CAAR;AACA;;AACDuY,IAAAA,QAAQ,CAACwnB,gBAAgB,CAACxlC,MAAD,EAASyF,aAAT,CAAjB,CAAR;AACA,GALD;AAMA;;AAED,SAASggC,KAAT,CAAezlC,MAAf,EAAuByF,aAAvB,EAAsC;AACrC,SAAO,UAACuY,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC0nB,WAAW,CAAC1lC,MAAD,EAASyF,aAAT,CAAZ,CAAR;AACAuY,IAAAA,QAAQ,CAACwnB,gBAAgB,CAACxlC,MAAD,EAASyF,aAAT,CAAjB,CAAR;AAEAs/B,IAAAA,QAAQ,CAACt/B,aAAD,CAAR,GAA0B+tB,UAAU,CAAC,YAAM;AAC1CxV,MAAAA,QAAQ,CAAC2V,cAAY,CAAC3zB,MAAD,EAASyF,aAAT,CAAb,CAAR;AACA,KAFmC,EAEjC,GAFiC,CAApC;AAGA,GAPD;AAQA;;AAED,SAASkgC,uBAAT,CAAiC3lC,MAAjC,EAAyC;AACxC,SAAO,UAACge,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAAC4nB,6BAA6B,CAAC5lC,MAAD,CAA9B,CAAR;AACA,GAFD;AAGA;;AAED,SAAS6lC,OAAT,CAAiB7lC,MAAjB,EAAyByF,aAAzB,EAAwC;AACvC,SAAO,UAACuY,QAAD,EAAWC,QAAX,EAAwB;AAC9BD,IAAAA,QAAQ,CAAC8nB,aAAa,CAAC9lC,MAAD,EAASyF,aAAT,CAAd,CAAR;AACAuY,IAAAA,QAAQ,CAACwnB,gBAAgB,CAACxlC,MAAD,EAASyF,aAAT,CAAjB,CAAR;AACA,GAHD;AAIA;;AAED,SAASsgC,UAAT,CAAoB/lC,MAApB,EAA4ByF,aAA5B,EAA2C;AAC1C,SAAO,UAACuY,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACqnB,SAAS,CAACrlC,MAAD,CAAV,CAAR;AACAge,IAAAA,QAAQ,CAACwnB,gBAAgB,CAACxlC,MAAD,EAASyF,aAAT,CAAjB,CAAR;AACA,GAHD;AAIA;;;AAGD,IAAM0b,WAAS,GAAG,SAAZA,SAAY,CAACnhB,MAAD,EAASuF,OAAT,EAAkB/tB,IAAlB,EAA2B;AAC5C,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoB/I,GADpB;AAEN5O,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA,OAHM;AAIN/tB,IAAAA,IAAI,EAAJA;AAJM,GAAP;AAMA,CAPD;;AASA,IAAMmyC,cAAY,GAAG,SAAfA,YAAe,CAAC3pB,MAAD,EAAY;AAChC,SAAO;AACNxb,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBK,IAApB,CAAyBpJ,GADzB;AAEN5O,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAMulC,UAAU,GAAG,SAAbA,UAAa,CAACvlC,MAAD,EAASuF,OAAT,EAAqB;AACvC,SAAO;AACN/gB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBE,IADpB;AAEN7X,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMmgC,WAAW,GAAG,SAAdA,WAAc,CAAC1lC,MAAD,EAASuF,OAAT,EAAqB;AACxC,SAAO;AACN/gB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBC,KADpB;AAEN5X,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMouB,cAAY,GAAG,SAAfA,YAAe,CAAC3zB,MAAD,EAASuF,OAAT,EAAqB;AACzC,SAAO;AACN/gB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBzH,MADpB;AAENlQ,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMqgC,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAC5lC,MAAD,EAAY;AACjD,SAAO;AACNxb,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBG,UADpB;AAEN9X,IAAAA,MAAM,EAANA;AAFM,GAAP;AAIA,CALD;;AAOA,IAAM8lC,aAAa,GAAG,SAAhBA,aAAgB,CAAC9lC,MAAD,EAASuF,OAAT,EAAqB;AAC1C,SAAO;AACN/gB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBI,OADpB;AAEN/X,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMigC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACxlC,MAAD,EAASuF,OAAT,EAAqB;AAC7C,SAAO;AACN/gB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBM,WADpB;AAENjY,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMwsB,cAAY,GAAG,SAAfA,YAAe,CAAC/xB,MAAD,EAASuF,OAAT,EAAkB/tB,IAAlB,EAA2B;AAC/C,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACrN,OAAZ,CAAoBvH,MADpB;AAENpQ,IAAAA,MAAM,EAANA,MAFM;AAGNuF,IAAAA,OAAO,EAAPA,OAHM;AAIN/tB,IAAAA,IAAI,EAAJA;AAJM,GAAP;AAMA,CAPD;;;AAYA,gBAAe;AACdwP,EAAAA,WAAW,EAAXA,WADc;AAEd0iC,EAAAA,MAAM,EAAEC,cAFM;AAGd8b,EAAAA,KAAK,EAALA,KAHc;AAIdL,EAAAA,IAAI,EAAJA,IAJc;AAKdO,EAAAA,uBAAuB,EAAvBA,uBALc;AAMdE,EAAAA,OAAO,EAAPA,OANc;AAOdE,EAAAA,UAAU,EAAVA;AAPc,CAAf;;ACxKA;AACA,IAAMjgB,KAAG,GAAG,SAANA,GAAM,CAACtuC,IAAD,EAAU;AACrB,SAAO,UAACwmC,QAAD,EAAc;AACpB,QAAI,CAAChyB,6BAAUxU,IAAV,CAAL,EAAsBA,IAAI,GAAG,CAACA,IAAD,CAAP;AACtBwmC,IAAAA,QAAQ,CAACmD,WAAS,CAAC3pC,IAAD,CAAV,CAAR;AACA,GAHD;AAIA,CALD;;AAOA,IAAMwuD,MAAM,GAAG,SAATA,MAAS,CAACvpD,IAAD,EAAU;AACxB,SAAO,UAACuhC,QAAD,EAAc;AACpB,QAAI,CAAChyB,6BAAUvP,IAAV,CAAL,EAAsBA,IAAI,GAAG,CAACA,IAAD,CAAP;AAEtBuhC,IAAAA,QAAQ,CAAC2V,cAAY,CAACl3C,IAAD,CAAb,CAAR;AACA,GAJD;AAKA,CAND;;AAQA,IAAMwpD,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC/B,SAAO,UAACjoB,QAAD,EAAc;AACpBrV,IAAAA,MAAM,CAACu9B,MAAP,CAAcC,gBAAd,GAAiC/oB,IAAjC,CAAsC,UAAAxX,SAAS,EAAI;AAClDA,MAAAA,SAAS,CAACnvB,OAAV,CAAkB,UAAA2vD,QAAQ,EAAI;AACjBpoB,QAAAA,QAAQ,CAAC8H,KAAG,CAAC;AACxBjvC,UAAAA,GAAG,EAAEuvD,QAAQ,CAACvgB,IADU;AAExBruC,UAAAA,IAAI,EAAE;AACLiO,YAAAA,IAAI,EAAE2gD,QAAQ,CAAC3gD,IADV;AAELjB,YAAAA,IAAI,EAAE,KAFD;AAGLe,YAAAA,MAAM,EAAE6gD,QAAQ,CAAC7gD;AAHZ;AAFkB,SAAD,CAAJ,CAAR;AAQZ,OATD;AAUA,KAXD;AAYA,GAbD;AAcA,CAfD;;;AAkBA,SAAS47B,WAAT,CAAmB3pC,IAAnB,EAAwB;AACvB,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAACzL,aADZ;AAEN/hC,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;AAED,SAASm8C,cAAT,CAAsBl3C,IAAtB,EAA2B;AAC1B,SAAO;AACN+H,IAAAA,IAAI,EAAEwgC,WAAW,CAACxL,gBADZ;AAEN/8B,IAAAA,IAAI,EAAEA;AAFA,GAAP;AAIA;;;AAKD,kBAAe;AACdqpC,EAAAA,GAAG,EAAHA,KADc;AAEdkgB,EAAAA,MAAM,EAANA,MAFc;AAGdC,EAAAA,iBAAiB,EAAjBA;AAHc,CAAf;;AC/CA,IAAMl/B,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAACrY,IAAP,CAAYzrB,WAA1B,EAAuC,MAAvC,EAA+C4qC,WAAW,CAACvL,IAA3D,CAAf;AACA,IAAMyF,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAACrY,IAAP,CAAYzrB,WAA1B,EAAuC,MAAvC,EAA+C4qC,WAAW,CAACvL,IAA3D,CAAnB;AACA,IAAMqG,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAACrY,IAAP,CAAYzrB,WAA9B,EAA2C,MAA3C,EAAmD4qC,WAAW,CAACvL,IAA/D,CAAnB;AACA,IAAMoF,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAACrY,IAAP,CAAYzrB,WAAhC,EAA6C4qC,WAAW,CAACvL,IAAzD,CAArB;AACA,IAAMuG,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACrY,IAAP,CAAYzrB,WAA3B,EAAwC,MAAxC,EAAgD4qC,WAAW,CAACvL,IAA5D,CAAhB;AACA,IAAM4M,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACvL,IAAhC,CAArB;AACA,IAAM+M,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACvL,IAAnC,CAAxB;AACA,IAAM2G,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACrY,IAAP,CAAYzrB,WAA9B,EAA2C,MAA3C,EAAmD4qC,WAAW,CAACvL,IAA/D,CAAnB;AACA,IAAM4K,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACrY,IAAP,CAAYzrB,WAA/B,UAAoD4qC,WAAW,CAACvL,IAAhE,CAApB;AACA,IAAMkL,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAACrY,IAAP,CAAYzrB,WAAnD,EAAgE,MAAhE,EAAwE4qC,WAAW,CAACvL,IAApF,CAAxC;AAIA;;AAEA,aAAe;AACd1S,EAAAA,MAAM,EAANA,QADc;AAEd,YAAQmY,YAFM;AAGdyF,EAAAA,+BAA+B,EAA/BA,iCAHc;AAId7E,EAAAA,UAAU,EAAVA,YAJc;AAKdjB,EAAAA,YAAY,EAAZA,cALc;AAMdmB,EAAAA,OAAO,EAAPA,SANc;AAOdqG,EAAAA,YAAY,EAAZA,cAPc;AAQdhC,EAAAA,WAAW,EAAXA,aARc;AASdjE,EAAAA,UAAU,EAAVA,YATc;AAUdoG,EAAAA,eAAe,EAAfA;AAVc,CAAf;;ACRA,IAAMvK,KAAG,GAAG,CAAZ;;AAIA,IAAM6J,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACrL,KAAvB,CAAZ;AACA,IAAMwM,cAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAACrL,KAAhC,CAArB;;AACA,IAAM0K,aAAW,GAAG,SAAdA,WAAc;AAAA,SAAM,UAACrG,QAAD,EAAc;AACvCA,IAAAA,QAAQ,CAACp7B,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACnY,KAAP,CAAa3rB,WAAhC,EAA6C,OAA7C,EAAsD4qC,WAAW,CAACrL,KAAlE,EAAyE,MAAzE,GAAD,CAAR;AACAqE,IAAAA,QAAQ,CAACp7B,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACnY,KAAP,CAAaC,iBAAhC,EAAmD,QAAnD,EAA6Dgf,WAAW,CAACrL,KAAZ,CAAkBC,MAA/E,EAAuF,MAAvF,GAAD,CAAR;AACA,GAHmB;AAAA,CAApB;;AAIA,IAAMoG,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACnY,KAAP,CAAa3rB,WAA5B,EAAyC,OAAzC,EAAkD4qC,WAAW,CAACrL,KAA9D,EAAqE,MAArE,CAAhB;AACA,IAAM0M,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACrL,KAAhC,CAArB;AACA,IAAM0sB,eAAe,GAAGzjD,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACnY,KAAP,CAAa3rB,WAA/B,EAA4C,OAA5C,EAAqD4qC,WAAW,CAACrL,KAAjE,EAAwE,MAAxE,CAAxB;AACA,IAAM2sB,gBAAgB,GAAG1jD,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACnY,KAAP,CAAaC,iBAA/B,EAAkD,QAAlD,EAA4Dgf,WAAW,CAACrL,KAAZ,CAAkBC,MAA9E,EAAsF,MAAtF,CAAzB;;AAEA,SAAS2sB,OAAT,GAAmB;AAClB,SAAO,UAACvoB,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAACp7B,OAAM,CAACmiC,qBAAP,EAAD,CAAR;AACA/G,IAAAA,QAAQ,CAACwoB,kBAAkB,EAAnB,CAAR;AAEAxoB,IAAAA,QAAQ,CAACyoB,YAAY,CAACpiB,WAAb,EAAD,CAAR;AACArG,IAAAA,QAAQ,CAAC0oB,YAAY,CAACriB,WAAb,EAAD,CAAR;AACArG,IAAAA,QAAQ,CAAC2oB,aAAa,CAACtiB,WAAd,EAAD,CAAR;AACArG,IAAAA,QAAQ,CAACqG,aAAW,EAAZ,CAAR;AACA,GARD;AASA;;AAED,SAASuiB,QAAT,GAAoB;AACnB,SAAO,UAAC5oB,QAAD,EAAc;AACpBA,IAAAA,QAAQ,CAAC6oB,YAAY,EAAb,CAAR;AACA7oB,IAAAA,QAAQ,CAACmI,cAAY,CAAC,IAAD,CAAb,CAAR;AAEAnI,IAAAA,QAAQ,CAACyoB,YAAY,CAACpiB,WAAb,EAAD,CAAR;AACArG,IAAAA,QAAQ,CAAC0oB,YAAY,CAACriB,WAAb,EAAD,CAAR;AACArG,IAAAA,QAAQ,CAAC2oB,aAAa,CAACtiB,WAAd,EAAD,CAAR;AACArG,IAAAA,QAAQ,CAACqG,aAAW,EAAZ,CAAR;AACA,GARD;AASA;;AAED,SAASyiB,YAAT,CAAsBC,KAAtB,EAA6BC,QAA7B,EAAuC;AACtC,SAAO,UAAChpB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACAD,IAAAA,QAAQ,CAACipB,qBAAqB,EAAtB,CAAR;AAEA,QAAIvqB,OAAO,GAAG;AACbwqB,MAAAA,QAAQ,EAAEH,KADG;AAEbC,MAAAA,QAAQ,EAAEA;AAFG,KAAd;AAKA,WAAO1qB,OAAO,CAACzlB,WAAD,EAAc,yBAAd,EAAyC,MAAzC,EAAiD,IAAjD,EAAuD6lB,OAAvD,CAAP,CACLU,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAAC3mC,IAAP,CAAY8pD,MAAZ,KAAuB,IAA3B,EAAiC;AAChCtjB,QAAAA,QAAQ,CAACuoB,OAAO,EAAR,CAAR;AACA;AACD,KALK,WAMC,UAAA5oB,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACp7B,OAAM,CAACy7B,kBAAP,CAA0BV,KAA1B,CAAD,CAAR;AACA,aAAOA,KAAP;AACA,KATK,CAAP;AAUA,GAnBD;AAoBA;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAS6oB,kBAAT,GAA8B;AAC7B,SAAO,UAACxoB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpnB,WAAW,GAAGqnB,MAAM,CAACr+B,GAAP,CAAW4N,6BAAX,CAAyCwwB,QAAQ,EAAjD,CAApB;AACAD,IAAAA,QAAQ,CAACmpB,+BAA+B,EAAhC,CAAR;AAEA,WAAO7qB,OAAO,CAACzlB,WAAD,EAAa,2BAAb,EAA0C,KAA1C,EAAiD,IAAjD,EAAuD,IAAvD,CAAP,CACLumB,IADK,CACA,UAAAe,MAAM,EAAI;AACf,UAAIA,MAAM,CAACC,MAAX,EAAmB;AAAE;AACpB,cAAM,IAAIV,KAAJ,CAAUS,MAAM,CAACC,MAAjB,CAAN;AACA,OAFD,MAEO;AACN,YAAID,MAAM,CAACtnC,GAAP,KAAe,CAAnB,EAAsB;AACrB;AACAmnC,UAAAA,QAAQ,CAACopB,eAAe,CAACC,eAAe,CAAClpB,MAAM,CAAClY,MAAR,CAAhB,CAAhB,CAAR;AACA,SAHD,MAGO,IAAIkY,MAAM,CAACtnC,GAAX,EAAgB;AACtB;AACAmnC,UAAAA,QAAQ,CAACmI,cAAY,CAAChI,MAAM,CAACtnC,GAAR,CAAb,CAAR;AACAmnC,UAAAA,QAAQ,CAAC8H,KAAG,CAACwhB,aAAa,CAACnpB,MAAD,CAAd,CAAJ,CAAR;AACAH,UAAAA,QAAQ,CAACopB,eAAe,CAACC,eAAe,CAAClpB,MAAM,CAAClY,MAAR,CAAhB,CAAhB,CAAR;AACA;AACD;AACD,KAfK,WAgBC,UAAA0X,KAAK,EAAI;AACfK,MAAAA,QAAQ,CAACp7B,OAAM,CAACy7B,kBAAP,CAA0BV,KAA1B,CAAD,CAAR;AACA,aAAOA,KAAP;AACA,KAnBK,CAAP;AAqBA,GAzBD;AA0BA;;AAED,SAAS4pB,aAAT,CAAuB5qB,GAAvB,EAA4B;AAC3B,MAAIC,iCAAcD,GAAd,CAAJ,EAAwBA,GAAG,GAAGV,KAAN;AACxB,SAAO,UAAC+B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAMpB,kBAAkB,GAAGqB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCowB,QAAQ,EAAzC,EAA6C,oBAA7C,CAA3B;AACA,QAAMnB,cAAc,GAAGoB,MAAM,CAACr+B,GAAP,CAAWgO,qBAAX,CAAiCowB,QAAQ,EAAzC,EAA6C,gBAA7C,CAAvB;AACAD,IAAAA,QAAQ,CAACwpB,sBAAsB,EAAvB,CAAR;AAEA,QAAI3iD,GAAG,GAAGg4B,kBAAkB,GAAG,KAArB,GAA6BjvB,wBAAI,CAACtG,IAAL,CAAUw1B,cAAV,EAA0B,0BAA1B,CAAvC;AAEA,WAAOZ,yBAAK,CAACr3B,GAAD,EAAM;AACjB23B,MAAAA,MAAM,EAAE,MADS;AAEjBS,MAAAA,WAAW,EAAE,SAFI;AAGjBC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,kBAAU;AAFF;AAHQ,KAAN,CAAL,CAOJE,IAPI,CAQN,UAAAC,QAAQ,EAAI;AACXkB,MAAAA,OAAO,CAACwa,GAAR,CAAY,2BAAZ,EAAyC1b,QAAzC;;AACA,UAAIA,QAAQ,CAACE,EAAb,EAAiB;AAChB;AACAS,QAAAA,QAAQ,CAAC4oB,QAAQ,EAAT,CAAR;AACA,OAHD,MAGO;AACN5oB,QAAAA,QAAQ,CAACypB,2BAA2B,CAAC,yEAAD,CAA5B,CAAR;AACA;AACD,KAhBK,EAiBN,UAAA9pB,KAAK,EAAI;AACRY,MAAAA,OAAO,CAACwa,GAAR,CAAY,wBAAZ,EAAsCpb,KAAtC;;AACA,UAAIhB,GAAG,GAAG,CAAV,EAAa;AACZqB,QAAAA,QAAQ,CAACupB,aAAa,CAAC5qB,GAAG,GAAG,CAAP,CAAd,CAAR;AACA,OAFD,MAEO;AACNqB,QAAAA,QAAQ,CAACypB,2BAA2B,CAAC,yEAAD,CAA5B,CAAR;AACA;AACD,KAxBK,CAAP;AA0BA,GAjCD;AAkCA;;;AAID,SAASH,aAAT,CAAuB/gC,IAAvB,EAA6B;AAC5B,2CACIA,IADJ;AAEC;AACAzpB,IAAAA,WAAW,oCAAMypB,IAAI,CAACzpB,WAAX;AAAwBE,MAAAA,KAAK,EAAE;AAAC4d,QAAAA,GAAG,EAAE;AAAN;AAA/B,MAHZ;AAICqL,IAAAA,MAAM,EAAE3kB,yBAAMilB,IAAI,CAACN,MAAX,EAAmB,KAAnB;AAJT;AAOA;;;AAED,SAASohC,eAAT,CAAyBphC,MAAzB,EAAiC;AAChC,SAAOA,MAAM,CAACrqB,GAAP,CAAW,UAAAsrB,KAAK;AAAA,6CAASA,KAAT;AAAgBpqB,MAAAA,WAAW,EAAE;AAACE,QAAAA,KAAK,EAAE;AAAC4d,UAAAA,GAAG,EAAE;AAAN;AAAR;AAA7B;AAAA,GAAhB,CAAP;AACA;;;AAID,SAAS8sC,0BAAT,CAAoCznB,WAApC,EAAiD;AAChD,SAAO;AACNz7B,IAAAA,IAAI,EAAEwgC,WAAW,CAACrL,KAAZ,CAAkBtK,GAAlB,CAAsBC,OAAtB,CAA8BC,KAD9B;AAEN0Q,IAAAA,WAAW,EAAXA;AAFM,GAAP;AAIA;;AAED,SAAS0nB,2BAAT,CAAqC1nB,WAArC,EAAkD;AACjD,SAAO;AACNz7B,IAAAA,IAAI,EAAEwgC,WAAW,CAACrL,KAAZ,CAAkBC,MAAlB,CAAyBvK,GAAzB,CAA6BC,OAA7B,CAAqCC,KADrC;AAEN0Q,IAAAA,WAAW,EAAXA;AAFM,GAAP;AAIA;;AAED,SAASmnB,eAAT,CAAyBnhC,MAAzB,EAAiC;AAChC,SAAO;AACNzhB,IAAAA,IAAI,EAAEwgC,WAAW,CAACrL,KAAZ,CAAkBC,MAAlB,CAAyBhL,GADzB;AAENp3B,IAAAA,IAAI,EAAEyuB;AAFA,GAAP;AAIA;;AAED,SAASuhC,sBAAT,GAAkC;AACjC,SAAO;AACNhjD,IAAAA,IAAI,EAAEwgC,WAAW,CAACzK;AADZ,GAAP;AAGA;;AAED,SAASktB,2BAAT,CAAqC9pB,KAArC,EAA4C;AAC3C,SAAO;AACNn5B,IAAAA,IAAI,EAAEwgC,WAAW,CAACxK,0BADZ;AAENmD,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAIA;;AAeD,SAASspB,qBAAT,GAAiC;AAChC,SAAO;AACNziD,IAAAA,IAAI,EAAEwgC,WAAW,CAACrL,KAAZ,CAAkBG,KAAlB,CAAwB3K;AADxB,GAAP;AAGA;;AAED,SAASg4B,+BAAT,GAA2C;AAC1C,SAAO;AACN3iD,IAAAA,IAAI,EAAEwgC,WAAW,CAACrL,KAAZ,CAAkBE,OAAlB,CAA0B1K;AAD1B,GAAP;AAGA;;AAED,SAAS03B,YAAT,GAAwB;AACvB,SAAO;AACNriD,IAAAA,IAAI,EAAEwgC,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBC;AADxB,GAAP;AAGA;;;AAID,cAAe;AACd+U,EAAAA,GAAG,EAAHA,KADc;AAEd;AACA0gB,EAAAA,kBAAkB,EAAEA,kBAHN;AAIdM,EAAAA,YAAY,EAAEA,YAJA;AAKdS,EAAAA,aAAa,EAAEA,aALD;AAMdljB,EAAAA,WAAW,EAAXA,aANc;AAOdrE,EAAAA,OAAO,EAAPA,SAPc;AAQdqG,EAAAA,YAAY,EAAZA,cARc;AASdggB,EAAAA,eAAe,EAAfA,eATc;AAUdC,EAAAA,gBAAgB,EAAhBA,gBAVc;AAWdsB,EAAAA,oBAAoB,EAAEF,0BAXR;AAYdG,EAAAA,qBAAqB,EAAEF,2BAZT;;AAAA,CAAf;;AC9QA;AAEA,IAAM7hB,KAAG,GAAGljC,OAAM,CAACkjC,GAAP,CAAWd,WAAW,CAACrK,KAAvB,CAAZ;AACA,IAAMwL,cAAY,GAAGvjC,OAAM,CAACujC,YAAP,CAAoBnB,WAAW,CAACrK,KAAhC,CAArB;AACA,IAAMyL,eAAa,GAAGxjC,OAAM,CAACwjC,aAAP,CAAqBpB,WAAW,CAACrK,KAAjC,CAAtB;AACA,IAAM5T,QAAM,GAAGnkB,OAAM,CAACmkB,MAAP,CAAcmX,MAAM,CAACnW,KAAP,CAAa3tB,WAA3B,EAAwC,OAAxC,EAAiD4qC,WAAW,CAACrK,KAA7D,EAAoE,OAApE,CAAf;AACA,IAAMuE,YAAU,GAAGt8B,OAAM,UAAN,CAAcs7B,MAAM,CAACnW,KAAP,CAAa3tB,WAA3B,EAAwC,OAAxC,EAAiD4qC,WAAW,CAACrK,KAA7D,EAAoE,OAApE,CAAnB;AACA,IAAMmF,YAAU,GAAGl9B,OAAM,CAACk9B,UAAP,CAAkB5B,MAAM,CAACnW,KAAP,CAAa3tB,WAA/B,EAA4C,OAA5C,EAAqD4qC,WAAW,CAACrK,KAAjE,EAAwE,OAAxE,CAAnB;AACA,IAAMkE,cAAY,GAAGj8B,OAAM,CAACi8B,YAAP,CAAoBX,MAAM,CAACnW,KAAP,CAAa3tB,WAAjC,EAA8C4qC,WAAW,CAACrK,KAA1D,EAAiE,OAAjE,CAArB;AACA,IAAMqF,SAAO,GAAGp9B,OAAM,CAACo9B,OAAP,CAAe9B,MAAM,CAACnW,KAAP,CAAa3tB,WAA5B,EAAyC,OAAzC,EAAkD4qC,WAAW,CAACrK,KAA9D,EAAqE,OAArE,CAAhB;AACA,IAAM0L,cAAY,GAAGzjC,OAAM,CAACyjC,YAAP,CAAoBrB,WAAW,CAACrK,KAAhC,CAArB;AACA,IAAM6L,iBAAe,GAAG5jC,OAAM,CAAC4jC,eAAP,CAAuBxB,WAAW,CAACrK,KAAnC,CAAxB;AACA,IAAMyF,YAAU,GAAGx9B,OAAM,CAACw9B,UAAP,CAAkBlC,MAAM,CAACnW,KAAP,CAAa3tB,WAA/B,EAA4C,OAA5C,EAAqD4qC,WAAW,CAACrK,KAAjE,EAAwE,OAAxE,CAAnB;AACA,IAAM0J,aAAW,GAAGzhC,OAAM,CAACyhC,WAAP,CAAmBnG,MAAM,CAACnW,KAAP,CAAa3tB,WAAhC,WAAsD4qC,WAAW,CAACrK,KAAlE,EAAyE,OAAzE,CAApB;AACA,IAAMgK,iCAA+B,GAAG/hC,OAAM,CAAC+hC,+BAAP,CAAuCzG,MAAM,CAACnW,KAAP,CAAa3tB,WAApD,EAAiE,OAAjE,EAA0E4qC,WAAW,CAACrK,KAAtF,EAA6F,OAA7F,CAAxC;;AAGA,IAAMmtB,KAAK,GAAG,SAARA,KAAQ,CAACjxD,GAAD,EAAMguC,SAAN,EAAkB;AAC/B,SAAO,UAAC7G,QAAD,EAAWC,QAAX,EAAwB;AAC9B,WAAOD,QAAQ,CAACp7B,OAAM,CAACu9B,UAAP,CAAkBjC,MAAM,CAACnW,KAAP,CAAa3tB,WAA/B,EAA4C,OAA5C,EAAqD4qC,WAAW,CAACrK,KAAjE,EAAwE,CAAC9jC,GAAD,CAAxE,EAA+E,OAA/E,CAAD,CAAR,CAAkGumC,IAAlG,CAAuG,YAAM;AACnH,UAAI5lC,IAAI,GAAG0mC,MAAM,CAACnW,KAAP,CAAanrB,YAAb,CAA0BqhC,QAAQ,EAAlC,EAAsCpnC,GAAtC,CAAX;;AACA,UAAIW,IAAI,IAAIA,IAAI,CAACpB,KAAjB,EAAwB;AAEvB,YAAI2xD,cAAc,GAAG,EAArB;;AACA,kCAAOljB,SAAP,EAAgB,UAACmjB,YAAD,EAAenxD,GAAf,EAAuB;AACtC,cAAImxD,YAAY,CAAC9wD,cAAb,CAA4B,qBAA5B,KAAsDM,IAAI,CAACpB,KAAL,CAAWS,GAAX,CAA1D,EAA2E;AAC1EkxD,YAAAA,cAAc,CAACpxD,IAAf,CAAoBqxD,YAAY,CAACphB,mBAAb,CAAiCpvC,IAAI,CAACpB,KAAL,CAAWS,GAAX,CAAjC,CAApB;AACA;AACD,SAJD;;AAMA,YAAIguC,SAAO,CAACllC,QAAZ,EAAsB;AACrB,oCAAOklC,SAAO,CAACllC,QAAf,EAAyB,UAACqoD,YAAD,EAAenxD,GAAf,EAAuB;AAC/C,gBAAImxD,YAAY,CAAC9wD,cAAb,CAA4B,qBAA5B,KAAsDM,IAAI,CAACpB,KAAL,CAAWS,GAAX,CAA1D,EAA2E;AAC1EkxD,cAAAA,cAAc,CAACpxD,IAAf,CAAoBqxD,YAAY,CAACphB,mBAAb,CAAiCpvC,IAAI,CAACpB,KAAL,CAAWS,GAAX,CAAjC,CAApB;AACA;AACD,WAJD;AAKA;;AACDmnC,QAAAA,QAAQ,CAAC+pB,cAAD,CAAR;AAGA,OAnBD,MAmBO;AACN/pB,QAAAA,QAAQ,CAACp7B,OAAM,CAACy7B,kBAAP,CAA0B,iEAAiExnC,GAA3F,CAAD,CAAR;AACA;AACD,KAxBM,WAwBE,UAAA8sC,GAAG,EAAI;AACf3F,MAAAA,QAAQ,CAACp7B,OAAM,CAACy7B,kBAAP,CAA0B,kBAAkBsF,GAA5C,CAAD,CAAR;AACA,KA1BM,CAAP;AA2BA,GA5BD;AA6BA,CA9BD;;;AAkCA,cAAe;AACdmC,EAAAA,GAAG,EAAHA,KADc;AAEdgiB,EAAAA,KAAK,EAALA,KAFc;AAGd3hB,EAAAA,YAAY,EAAZA,cAHc;AAIdC,EAAAA,aAAa,EAAbA,eAJc;AAKdrf,EAAAA,MAAM,EAANA,QALc;AAMd,YAAQmY,YANM;AAOdyF,EAAAA,+BAA+B,EAA/BA,iCAPc;AAQd7E,EAAAA,UAAU,EAAVA,YARc;AASdjB,EAAAA,YAAY,EAAZA,cATc;AAUdmB,EAAAA,OAAO,EAAPA,SAVc;AAWdqG,EAAAA,YAAY,EAAZA,cAXc;AAYdhC,EAAAA,WAAW,EAAXA,aAZc;AAadjE,EAAAA,UAAU,EAAVA,YAbc;AAcdoG,EAAAA,eAAe,EAAfA;AAdc,CAAf;;ACnDA;;AACA,SAASyhB,SAAT,CAAmBjoC,MAAnB,EAA2BkoC,SAA3B,EAAsCC,QAAtC,EAAgD1T,SAAhD,EAA2D3sC,KAA3D,EAAkE;AACjE,SAAO,UAACk2B,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAImqB,cAAc,GAAGlqB,MAAM,CAAC7V,OAAP,CAAeE,SAAf,CAAyB0V,QAAQ,EAAjC,EAAqCiqB,SAArC,CAArB;;AACA,QAAIE,cAAJ,EAAoB;AACnBpqB,MAAAA,QAAQ,CAACunB,YAAU,CAACvlC,MAAD,EAASkoC,SAAT,CAAX,CAAR;AACA,KAFD,MAEO;AACNlqB,MAAAA,QAAQ,CAACmD,WAAS,CACjBnhB,MADiB,EAEjBkoC,SAFiB,EAGjB,MAHiB,EAIjBC,QAJiB,EAKjB1T,SALiB,EAMjB3sC,KANiB,CAAV,CAAR;AAQA;AACD,GAdD;AAeA;;AAED,SAASugD,cAAT,CAAwBH,SAAxB,EAAmCC,QAAnC,EAA6C;AAC5C,SAAO,UAACnqB,QAAD,EAAWC,QAAX,EAAwB;AAC9B,QAAItV,MAAM,GAAGuV,MAAM,CAAC7V,OAAP,CAAeE,SAAf,CAAyB0V,QAAQ,EAAjC,EAAqCiqB,SAArC,CAAb;;AACA,QAAII,WAAW,qCAAO3/B,MAAM,CAACnxB,IAAd;AAAoB2wD,MAAAA,QAAQ,oCAAMx/B,MAAM,CAACnxB,IAAP,CAAY2wD,QAAlB,GAA+BA,QAA/B;AAA5B,MAAf;;AACAnqB,IAAAA,QAAQ,CAAC+T,cAAY,CAACmW,SAAD,EAAYI,WAAZ,CAAb,CAAR;AACA,GAJD;AAKA;;;AAID,IAAMnnB,WAAS,GAAG,SAAZA,SAAY,CAACnhB,MAAD,EAASkoC,SAAT,EAAoB9xD,KAApB,EAA2B+xD,QAA3B,EAAqC1T,SAArC,EAAgD3sC,KAAhD,EAA0D;AAC3E,SAAO;AACNtD,IAAAA,IAAI,EAAEwgC,WAAW,CAAClK,OAAZ,CAAoBlM,GADpB;AAEN5O,IAAAA,MAAM,EAANA,MAFM;AAGNkoC,IAAAA,SAAS,EAATA,SAHM;AAIN9xD,IAAAA,KAAK,EAALA,KAJM;AAKN+xD,IAAAA,QAAQ,EAARA,QALM;AAMN1T,IAAAA,SAAS,EAATA,SANM;AAON3sC,IAAAA,KAAK,EAALA;AAPM,GAAP;AASA,CAVD;;AAYA,IAAMy9C,YAAU,GAAG,SAAbA,UAAa,CAACvlC,MAAD,EAASkoC,SAAT,EAAuB;AACzC,SAAO;AACN1jD,IAAAA,IAAI,EAAEwgC,WAAW,CAAClK,OAAZ,CAAoBjD,IADpB;AAEN7X,IAAAA,MAAM,EAANA,MAFM;AAGNkoC,IAAAA,SAAS,EAATA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMvU,cAAY,GAAG,SAAfA,YAAe,CAAC3zB,MAAD,EAASkoC,SAAT,EAAuB;AAC3C,SAAO;AACN1jD,IAAAA,IAAI,EAAEwgC,WAAW,CAAClK,OAAZ,CAAoB5K,MADpB;AAENlQ,IAAAA,MAAM,EAANA,MAFM;AAGNkoC,IAAAA,SAAS,EAATA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAACvoC,MAAD,EAASkoC,SAAT,EAAuB;AAC9C,SAAO;AACN1jD,IAAAA,IAAI,EAAEwgC,WAAW,CAAClK,OAAZ,CAAoBC,GADpB;AAEN/a,IAAAA,MAAM,EAANA,MAFM;AAGNkoC,IAAAA,SAAS,EAATA;AAHM,GAAP;AAKA,CAND;;AAQA,IAAMnW,cAAY,GAAG,SAAfA,YAAe,CAACmW,SAAD,EAAY1wD,IAAZ,EAAqB;AACzC,SAAO;AACNgN,IAAAA,IAAI,EAAEwgC,WAAW,CAAClK,OAAZ,CAAoB1K,MADpB;AAEN83B,IAAAA,SAAS,EAATA,SAFM;AAGN1wD,IAAAA,IAAI,EAAJA;AAHM,GAAP;AAKA,CAND;;;AAUA,gBAAe;AACdywD,EAAAA,SAAS,EAATA,SADc;AAEdjC,EAAAA,MAAM,EAAErS,cAFM;AAGd6U,EAAAA,SAAS,EAAED,eAHG;AAIdF,EAAAA,cAAc,EAAdA;AAJc,CAAf;;AC7CA,aAAe;AACd1lD,EAAAA,qBAAqB,EAAEA,uBADT;AAEd9C,EAAAA,GAAG,EAAE+oB,SAFS;AAGd/P,EAAAA,KAAK,EAAEgQ,WAHO;AAIdtgB,EAAAA,aAAa,EAAE4B,mBAJD;AAKd3K,EAAAA,UAAU,EAAEspB,SALE;AAMd3c,EAAAA,aAAa,EAAEa,SAND;AAOd/I,EAAAA,oBAAoB,EAAE8kB,SAPR;AAQd5d,EAAAA,kBAAkB,EAAEiB,SARN;AASduN,EAAAA,mBAAmB,EAAEqP,SATP;AAUd/P,EAAAA,aAAa,EAAEgQ,SAVD;AAWd7pB,EAAAA,KAAK,EAAE8pB,SAXO;AAYdrP,EAAAA,MAAM,EAAEsP,SAZM;AAadzO,EAAAA,UAAU,EAAE0O,SAbE;AAcd5xB,EAAAA,IAAI,EAAE6xB,WAdQ;AAedtL,EAAAA,YAAY,EAAEuL,YAfA;AAgBd7pB,EAAAA,cAAc,EAAE8pB,oBAhBF;AAiBd1K,EAAAA,UAAU,EAAE2K,YAjBE;AAkBXjZ,EAAAA,IAAI,EAAEkZ,MAlBK;AAmBdpZ,EAAAA,eAAe,EAAEA,UAnBH;AAoBd9Q,EAAAA,OAAO,EAAEmqB,aApBK;AAqBdpqB,EAAAA,MAAM,EAAEqqB,YArBM;AAsBdtqB,EAAAA,SAAS,EAAEuqB,WAtBG;AAuBd3vB,EAAAA,MAAM,EAAE4vB,YAvBM;AAwBd3E,EAAAA,OAAO,EAAE4E,SAxBK;AAyBd5lB,EAAAA,UAAU,EAAE6lB,gBAzBE;AA0BdnE,EAAAA,SAAS,EAAEoE,WA1BG;AA2BdhgB,EAAAA,WAAW,EAAEI,iBA3BC;AA4Bd1C,EAAAA,kBAAkB,EAAEuiB,wBA5BN;AA6BdjhB,EAAAA,gBAAgB,EAAEkB,sBA7BJ;AA8Bd9E,EAAAA,MAAM,EAAE8kB,aA9BM;AA+BdrE,EAAAA,IAAI,EAAEsE,MA/BQ;AAgCdpE,EAAAA,KAAK,EAAEqE,OAhCO;AAiCdrC,EAAAA,KAAK,EAAEsC,OAjCO;AAkCdhC,EAAAA,OAAO,EAAEiC;AAlCK,CAAf;;AC9BA8B,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7C,OAAKq8B,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACV,GAFD;AAIA,MAAIqsB,iBAAiB,GAAG,EAAxB;;AACA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,MAAMwjB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBE,IAAAA,sBAAsB;AACtB,GAFQ,CAAT;AAIA/8B,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrBiZ,IAAAA,OAAO,CAACiB,GAAR,CAAY;AAAClX,MAAAA,GAAG,EAAE;AAAN,KAAZ,EAA0B,MAA1B,EAAkC,QAAlC,EAA4CoP,QAA5C;AACAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,KAAP;AAAchN,MAAAA,IAAI,EAAE,CAAC,MAAD,CAApB;AAA8BvC,MAAAA,MAAM,EAAE;AAAtC,KADyC,CAA1C;AAGA,GALC,CAAF;AAOA22B,EAAAA,EAAE,CAAC,UAAD,EAAa,YAAY;AAC1BiZ,IAAAA,OAAO,CAACkB,QAAR,CAAiB;AAAC1V,MAAAA,SAAS,EAAE;AAAZ,KAAjB,EAA2C,MAA3C,EAAmD,KAAnD,EAA0D2N,QAA1D;AACAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,WAAP;AAAoBhN,MAAAA,IAAI,EAAE,CAAC,MAAD,CAA1B;AAAoCX,MAAAA,GAAG,EAAE;AAAzC,KADyC,CAA1C;AAGA,GALC,CAAF;AAOA+0B,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BiZ,IAAAA,OAAO,CAACmB,aAAR,CAAsB;AAAChX,MAAAA,KAAK,EAAE;AAACqB,QAAAA,SAAS,EAAE;AAAZ;AAAR,KAAtB,EACC,QADD,EAEC,OAFD,EAGC,MAHD,EAIC,KAJD,EAKE2N,QALF;AAMAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,iBADP;AAEChN,MAAAA,IAAI,EAAE,MAFP;AAGCvC,MAAAA,MAAM,EAAE,QAHT;AAICC,MAAAA,KAAK,EAAE,OAJR;AAKC2B,MAAAA,GAAG,EAAE;AALN,KADyC,CAA1C;AASA,GAhBC,CAAF;AAkBAu1B,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,aADP;AAECi5B,MAAAA,WAAW,EAAE;AAACqqB,QAAAA,MAAM,EAAE;AAAT,OAFd;AAGCvkD,MAAAA,IAAI,EAAE,QAHP;AAICk4B,MAAAA,OAAO,EAAE;AAACssB,QAAAA,CAAC,EAAE;AAAJ,OAJV;AAKCC,MAAAA,cAAc,EAAE;AAACzkD,QAAAA,IAAI,EAAE,YAAP;AAAqBwkD,QAAAA,CAAC,EAAE;AAAxB;AALjB,KADa,EAQb;AACCvjD,MAAAA,IAAI,EAAE,cADP;AAECi5B,MAAAA,WAAW,EAAE;AAACwqB,QAAAA,KAAK,EAAE;AAACH,UAAAA,MAAM,EAAE;AAAT;AAAR,OAFd;AAGCvkD,MAAAA,IAAI,EAAE,cAHP;AAICk4B,MAAAA,OAAO,EAAE;AAACssB,QAAAA,CAAC,EAAE;AAAJ,OAJV;AAKCC,MAAAA,cAAc,EAAE;AAACzkD,QAAAA,IAAI,EAAE,kBAAP;AAA2BwkD,QAAAA,CAAC,EAAE;AAA9B;AALjB,KARa,CAAd;AAiBAF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6Y,OAAO,CAACM,MAAR,CAAegkB,IAAI,CAACzqB,WAApB,EAAiCyqB,IAAI,CAAC3kD,IAAtC,EAA4C2kD,IAAI,CAACzsB,OAAjD,CADD,EAECysB,IAAI,CAACF,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1BO,CAAR;AA4BAr9B,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,OAAO,CAACxG,kBAAR,CAA2B,IAAIX,KAAJ,EAA3B,CAAvB,EAAgE;AAC/Dl5B,MAAAA,IAAI,EAAE;AADyD,KAAhE;AAGA,GAJC,CAAF;AAMAonB,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzB,QAAMuZ,MAAM,GAAG,SAATA,MAAS;AAAA,wCAAIC,IAAJ;AAAIA,QAAAA,IAAJ;AAAA;;AAAA,aAAc;AAC5B5gC,QAAAA,IAAI,EAAE,QADsB;AAE5B4gC,QAAAA,IAAI,EAAJA;AAF4B,OAAd;AAAA,KAAf;;AAKAP,IAAAA,OAAO,CAACK,OAAR,CAAgBC,MAAhB,EAAwB;AAACvW,MAAAA,GAAG,EAAE;AAAN,KAAxB,EAAsC,MAAtC,EAA8CoP,QAA9C;AACAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,QAAP;AAAiB4gC,MAAAA,IAAI,EAAE,CAAC;AAACxW,QAAAA,GAAG,EAAE;AAAN,OAAD,EAAe,MAAf;AAAvB,KADyC,CAA1C;AAGA,GAVC,CAAF;AAYAhD,EAAAA,EAAE,CAAC,WAAD,EAAc,YAAY;AAC3B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC9xD,cAAAA,IAAI,EAAE;AAACiO,gBAAAA,IAAI,EAAE;AAAP;AAAP;AAAL,WADH;AAEJrI,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAAC9xD,cAAAA,IAAI,EAAE;AAACiO,gBAAAA,IAAI,EAAE;AAAP;AAAP;AAAL,WAFT;AAGJzQ,UAAAA,OAAO,EAAE,CAAC;AAACC,YAAAA,MAAM,EAAE;AAACwQ,cAAAA,IAAI,EAAE;AAAP;AAAT,WAAD,EAA0B;AAACxQ,YAAAA,MAAM,EAAE;AAACwQ,cAAAA,IAAI,EAAE;AAAP;AAAT,WAA1B;AAHL;AARkB,OAAP;AAAA,KAAjB;;AAcA22B,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAC7B2nB,MAAAA,WAAM,CAACw9B,WAAP,CAAmB,oCAAnB,EAAyDC,yBAAK,CAAC3kD,GAAD,CAA9D;AACHknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAACuuB,YAAAA,KAAK,EAAE,CAAC;AAAClvB,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAACiO,gBAAAA,IAAI,EAAE;AAAP;AAAlB,aAAD;AAAR;AADc,SAAf,CADyB;AAI/Bw3B,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA1BO,CAAR;AA4BA,WAAO0H,OAAO,CACZpG,SADK,CAEL2qB,WAFK,EAGL,OAHK,EAIL;AACCx6B,MAAAA,GAAG,EAAE,KADN;AAECwB,MAAAA,MAAM,EAAE,QAFT;AAGCpB,MAAAA,KAAK,EAAE;AAACsB,QAAAA,WAAW,EAAE;AAAd;AAHR,KAJK,EASL,MATK,EAUL,CACC;AACCz5B,MAAAA,GAAG,EAAE,IADN;AAECW,MAAAA,IAAI,EAAE;AACLiO,QAAAA,IAAI,EAAE;AADD;AAFP,KADD,CAVK,EAkBJu4B,QAlBI,EAkBMC,QAlBN,EAmBLb,IAnBK,CAmBA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KArBK,EAsBLb,IAtBK,CAsBA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AACLiO,YAAAA,IAAI,EAAE;AADD;AAFP,SADK;AAHP,OADyC,EAazC;AACCjB,QAAAA,IAAI,EAAE,aADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAEw0D;AALR,OAbyC,EAoBzC;AACCllD,QAAAA,IAAI,EAAE,aADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAEw0D;AALR,OApByC,CAA1C;AA4BA,KAnDK,CAAP;AAoDA,GAhGC,CAAF;AAkGA99B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxB,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJr0D,UAAAA,OAAO,EAAE,CAAC;AAACC,YAAAA,MAAM,EAAE;AAACkD,cAAAA,cAAc,EAAE;AAAjB;AAAT,WAAD;AADL;AARkB,OAAP;AAAA,KAAjB;;AAYAikC,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAC7B2nB,MAAAA,WAAM,CAACw9B,WAAP,CAAmB,oCAAnB,EAAyDC,yBAAK,CAAC3kD,GAAD,CAA9D;AACHknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAACuuB,YAAAA,KAAK,EAAE,CAAC;AAAClvB,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAACW,gBAAAA,cAAc,EAAE;AAAjB;AAAlB,aAAD;AAAR;AADc,SAAf,CADyB;AAI/B8kC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA1BO,CAAR;AA4BA,WAAO0H,OAAO,CACZ9d,MADK,CAELqiC,WAFK,EAGL,OAHK,EAIL;AAACx6B,MAAAA,GAAG,EAAE,KAAN;AAAaI,MAAAA,KAAK,EAAE;AAACsB,QAAAA,WAAW,EAAE;AAAd;AAApB,KAJK,EAKL,MALK,EAMJ,IANI,EAME,IANF,EAMQ0N,QANR,EAMkBC,QANlB,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AACLW,YAAAA,cAAc,EAAE;AADX;AAFP,SADK;AAHP,OADyC,EAazC;AACCqM,QAAAA,IAAI,EAAE,aADP;AAECvP,QAAAA,MAAM,EAAE;AACPkD,UAAAA,cAAc,EAAE;AADT,SAFT;AAKCjD,QAAAA,KAAK,EAAEw0D;AALR,OAbyC,CAA1C;AAqBA,KAhCK,CAAP;AAiCA,GA3EC,CAAF;AA6EA99B,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AARkB,OAAP;AAAA,KAAjB;;AAUA,QAAMrrB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;AACAyqB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AAEA,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KATD;;AAUA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAC7B2nB,MAAAA,WAAM,CAACw9B,WAAP,CAAmB,oCAAnB,EAAyDC,yBAAK,CAAC3kD,GAAD,CAA9D;AACHknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAACuuB,YAAAA,KAAK,EAAE,CAAC;AAAClvB,cAAAA,GAAG,EAAE;AAAN,aAAD;AAAR;AADc,SAAf,CADyB;AAI/BomC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA1BO,CAAR;AA4BA,WAAO0H,OAAO,UAAP,CAELukB,WAFK,EAGL,OAHK,EAIL;AAACp5B,MAAAA,YAAY,EAAE;AAAf,KAJK,EAKL,MALK,EAMJ;AAACn5B,MAAAA,GAAG,EAAE;AAAN,KANI,EAMSmnC,QANT,EAMmBC,QANnB,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjB,aAAOsrB,iBAAiB,CAAC,CAAD,CAAjB,CAAqB,MAArB,CAAP;AACA38B,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACC7xD,QAAAA,GAAG,EAAE,IADN;AAEC2N,QAAAA,IAAI,EAAE;AAFP,OADyC,EAKzC;AACCA,QAAAA,IAAI,EAAE,sCADP;AAECs5B,QAAAA,QAAQ,EAAE,OAFX;AAGCrhC,QAAAA,IAAI,EAAE,CAAC,IAAD;AAHP,OALyC,CAA1C;AAWA,KAvBK,CAAP;AAwBA,GA1EC,CAAF;AA4EAmvB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNsvD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AADE;AADH;AARkB,OAAP;AAAA,KAAjB;;AAcAulC,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAAC4B,YAAAA,GAAG,EAAE;AAAC,oBAAI,CAAC,IAAD;AAAL;AAAN;AADY,SAAf,CADyB;AAI/BomC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB;AAAC3pD,YAAAA,IAAI,EAAE;AAACuuB,cAAAA,KAAK,EAAE,CAAC;AAAClvB,gBAAAA,GAAG,EAAE;AAAN,eAAD;AAAR;AAAP,WAAhB,CAAP;AACA,SAJqB;AAKtBqmC,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA7BO,CAAR;AA+BA,WAAO0H,OAAO,CACZ1E,UADK,CAELipB,WAFK,EAGL,OAHK,EAIL;AAACx6B,MAAAA,GAAG,EAAE;AAAN,KAJK,EAKL,CAAC,IAAD,EAAO,IAAP,CALK,EAML,MANK,EAOJoP,QAPI,EAOMC,QAPN,EAQLb,IARK,CAQA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAVK,EAWLb,IAXK,CAWA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE;AADN,SADK;AAHP,OADyC,CAA1C;AAWA,KAvBK,CAAP;AAwBA,GAvEC,CAAF;AAyEAu1B,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrCR,IAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChC,UAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAApB;;AACA,UAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBp+B,UAAAA,GAAG,EAAE;AACJ6N,YAAAA,kBAAkB,EAAE;AACnBmvB,cAAAA,kBAAkB,EAAE,MADD;AAEnBC,cAAAA,cAAc,EAAE,WAFG;AAGnBC,cAAAA,cAAc,EAAE;AAHG;AADhB,WADkB;AAQvBssB,UAAAA,GAAG,EAAE;AACJr0D,YAAAA,OAAO,EAAE,CACR;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAICzE,cAAAA,SAAS,EAAE,YAJZ;AAKCnB,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB;AALR,aADQ;AADL;AARkB,SAAP;AAAA,OAAjB;;AAqBA0vC,MAAAA,OAAO,CACLvE,aADF,CAEE8oB,WAFF,EAGE,OAHF,EAIE;AAAC3jD,QAAAA,IAAI,EAAE;AAAP,OAJF,EAKE,KALF,EAME,CANF,EAOE,CAPF,EAQE,EARF,EASE,MATF,EAUGu4B,QAVH,EAUaC,QAVb,EAWEb,IAXF,CAWO,YAAY;AACjB,eAAOwrB,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAARA;AAAX,SAAD,CAAzB;AACA,OAbF,EAcEb,IAdF,CAcO,YAAY;AACjBrR,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,EAA1C;AACA,OAhBF;AAiBA,KAxCC,CAAF;AA0CA98B,IAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,UAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAApB;;AACA,UAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBp+B,UAAAA,GAAG,EAAE;AACJ6N,YAAAA,kBAAkB,EAAE;AACnBmvB,cAAAA,kBAAkB,EAAE,MADD;AAEnBC,cAAAA,cAAc,EAAE,WAFG;AAGnBC,cAAAA,cAAc,EAAE;AAHG;AADhB,WADkB;AAQvBssB,UAAAA,GAAG,EAAE;AACJr0D,YAAAA,OAAO,EAAE,CACR;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAICzE,cAAAA,SAAS,EAAE,YAJZ;AAKCnB,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AALR,aADQ;AADL;AARkB,SAAP;AAAA,OAAjB;;AAoBA,UAAM6oC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,YAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,cAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,cAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,YAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,iBAAOA,GAAP;AACA;;AAED0lB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,OAXD;;AAYA/I,MAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,QAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEMC,yBAAK,CAAC3kD,GAAD,CAFX;AAIAknB,QAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,UAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,YAAAA,MAAM,EAAE;AACPwQ,cAAAA,IAAI,EAAE,KADC;AAEP5O,cAAAA,GAAG,EAAE;AACJe,gBAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AADH;AAFE,aADY;AAOpB+qC,YAAAA,MAAM,EAAE,CAPY;AAQpBztC,YAAAA,KAAK,EAAE,KARa;AASpBotC,YAAAA,KAAK,EAAE;AATa,WAAf,CADyB;AAY/BrF,UAAAA,WAAW,EAAE,SAZkB;AAa/BC,UAAAA,OAAO,EAAE;AACRusB,YAAAA,MAAM,EAAE,kBADA;AAER,4BAAgB;AAFR,WAbsB;AAiB/BjtB,UAAAA,MAAM,EAAE;AAjBuB,SAAhC;AAoBA,YAAMW,IAAI,GAAG;AACZ3lC,UAAAA,IAAI,EAAE;AAACuuB,YAAAA,KAAK,EAAE;AAAC6jC,cAAAA,EAAE,EAAE,EAAL;AAASC,cAAAA,EAAE,EAAE;AAAb;AAAR,WADM;AAEZxoB,UAAAA,KAAK,EAAE,CAFK;AAGZC,UAAAA,OAAO,EAAE;AACRvb,YAAAA,KAAK,EAAE;AADC;AAHG,SAAb;AAQA,eAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,UAAAA,EAAE,EAAE,IADkB;AAEtBE,UAAAA,IAAI,EAAE,gBAAY;AACjB,mBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,WAJqB;AAKtBD,UAAAA,OAAO,EAAE;AACRtiB,YAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,qBAAO;AAAC,gCAAgB;AAAjB,gBAAqCA,IAArC,CAAP;AACA;AAHO,WALa;AAUtBjO,UAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,SAAhB,CAAP;AAYA,OA7CO,CAAR;AA+CA,aAAO0H,OAAO,CACZvE,aADK,CAEL8oB,WAFK,EAGL,OAHK,EAIL;AAAC3jD,QAAAA,IAAI,EAAE;AAAP,OAJK,EAKL,KALK,EAML,CANK,EAOL,CAPK,EAQL;AAACupB,QAAAA,KAAK,EAAE;AAACJ,UAAAA,GAAG,EAAE;AAAN;AAAR,OARK,EASL,MATK,EAUJoP,QAVI,EAUMC,QAVN,EAWLb,IAXK,CAWA,YAAY;AACjB,eAAOwrB,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAARA;AAAX,SAAD,CAAzB;AACA,OAbK,EAcLb,IAdK,CAcA,YAAY;AACjBrR,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,UAAAA,IAAI,EAAE,WADP;AAECvP,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE,KADC;AAEP5O,YAAAA,GAAG,EAAE;AAACe,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAR;AAFE,WAFT;AAMC1C,UAAAA,KAAK,EAAE,KANR;AAOC+G,UAAAA,KAAK,EAAE,CAPR;AAQCzE,UAAAA,IAAI,EAAE;AAACoyD,YAAAA,EAAE,EAAE,EAAL;AAASC,YAAAA,EAAE,EAAE;AAAb,WARP;AASCvzD,UAAAA,SAAS,EAAE,YATZ;AAUCyE,UAAAA,KAAK,EAAE;AAVR,SADyC,CAA1C;AAcA,OA7BK,CAAP;AA8BA,KA/GC,CAAF;AAiHA6wB,IAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChC,UAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAApB;;AACA,UAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBp+B,UAAAA,GAAG,EAAE;AACJ6N,YAAAA,kBAAkB,EAAE;AACnBmvB,cAAAA,kBAAkB,EAAE,MADD;AAEnBC,cAAAA,cAAc,EAAE,WAFG;AAGnBC,cAAAA,cAAc,EAAE;AAHG;AADhB,WADkB;AAQvBssB,UAAAA,GAAG,EAAE;AACJr0D,YAAAA,OAAO,EAAE;AADL;AARkB,SAAP;AAAA,OAAjB;;AAYA,UAAMgpC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,YAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,cAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,cAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,YAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,iBAAOA,GAAP;AACA;;AAED0lB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,OAXD;;AAYA/I,MAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,QAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEMC,yBAAK,CAAC3kD,GAAD,CAFX;AAIAknB,QAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,UAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,YAAAA,MAAM,EAAE;AACPwQ,cAAAA,IAAI,EAAE;AADC,aADY;AAIpBk9B,YAAAA,MAAM,EAAE,CAJY;AAKpBztC,YAAAA,KAAK,EAAE,KALa;AAMpBotC,YAAAA,KAAK,EAAE;AANa,WAAf,CADyB;AAS/BrF,UAAAA,WAAW,EAAE,SATkB;AAU/BC,UAAAA,OAAO,EAAE;AACRusB,YAAAA,MAAM,EAAE,kBADA;AAER,4BAAgB;AAFR,WAVsB;AAc/BjtB,UAAAA,MAAM,EAAE;AAduB,SAAhC;AAiBA,YAAMW,IAAI,GAAG;AACZ3lC,UAAAA,IAAI,EAAE;AAACuuB,YAAAA,KAAK,EAAE;AAACujC,cAAAA,EAAE,EAAE,EAAL;AAASK,cAAAA,EAAE,EAAE,EAAb;AAAiBC,cAAAA,EAAE,EAAE,EAArB;AAAyBC,cAAAA,EAAE,EAAE;AAA7B;AAAR,WADM;AAEZxoB,UAAAA,KAAK,EAAE,CAFK;AAGZC,UAAAA,OAAO,EAAE;AACRvb,YAAAA,KAAK,EAAE;AADC;AAHG,SAAb;AAQA,eAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,UAAAA,EAAE,EAAE,IADkB;AAEtBE,UAAAA,IAAI,EAAE,gBAAY;AACjB,mBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,WAJqB;AAKtBD,UAAAA,OAAO,EAAE;AACRtiB,YAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,qBAAO;AAAC,gCAAgB;AAAjB,gBAAqCA,IAArC,CAAP;AACA;AAHO,WALa;AAUtBjO,UAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,SAAhB,CAAP;AAYA,OA1CO,CAAR;AA4CA,aAAO0H,OAAO,CACZvE,aADK,CAEL8oB,WAFK,EAGL,OAHK,EAIL;AAAC3jD,QAAAA,IAAI,EAAE;AAAP,OAJK,EAKL,KALK,EAML,CANK,EAOL,CAPK,EAQL;AAACupB,QAAAA,KAAK,EAAE;AAACJ,UAAAA,GAAG,EAAE;AAAN;AAAR,OARK,EASL,MATK,EAUJoP,QAVI,EAUMC,QAVN,EAWLb,IAXK,CAWA,YAAY;AACjB,eAAOwrB,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAARA;AAAX,SAAD,CAAzB;AACA,OAbK,EAcLb,IAdK,CAcA,YAAY;AACjBrR,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,UAAAA,IAAI,EAAE,WADP;AAECvP,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WAFT;AAKCvQ,UAAAA,KAAK,EAAE,KALR;AAMC+G,UAAAA,KAAK,EAAE,CANR;AAOCzE,UAAAA,IAAI,EAAE;AAAC8xD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B,WAPP;AAQCvzD,UAAAA,SAAS,EAAE,YARZ;AASCyE,UAAAA,KAAK,EAAE;AATR,SADyC,CAA1C;AAaA,OA5BK,CAAP;AA6BA,KAnGC,CAAF;AAoGA,GAhQO,CAAR;AAkQA6wB,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AACjD,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJrqD,UAAAA,KAAK,EAAE;AACNhK,YAAAA,OAAO,EAAE,CACR,CACC;AACC+C,cAAAA,cAAc,EAAE;AAAC0N,gBAAAA,IAAI,EAAE;AAAP,eADjB;AAECxQ,cAAAA,MAAM,EAAE;AACPwQ,gBAAAA,IAAI,EAAE;AADC,eAFT;AAKCvQ,cAAAA,KAAK,EAAE,KALR;AAMC+G,cAAAA,KAAK,EAAE,CANR;AAOC/F,cAAAA,MAAM,EAAE;AAPT,aADD,CADQ;AADH;AADH;AARkB,OAAP;AAAA,KAAjB;;AA0BA,QAAM8nC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAR,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA,WAAO0H,OAAO,CACZF,+BADK,CAELykB,WAFK,EAGL,OAHK,EAIL;AAACp6B,MAAAA,KAAK,EAAE;AAACJ,QAAAA,GAAG,EAAE;AAAN;AAAR,KAJK,EAKL,MALK,EAMJ;AAACnpB,MAAAA,IAAI,EAAE;AAAP,KANI,EAMWu4B,QANX,EAMqBC,QANrB,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,WADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAxBK,CAAP;AAyBA,GA7GC,CAAF;AA+GA6wB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AADE;AADH;AARkB,OAAP;AAAA,KAAjB;;AAcAltB,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACP4B,YAAAA,GAAG,EAAE;AAAC,oBAAI,CAAC,IAAD,EAAO,IAAP;AAAL;AADE;AADY,SAAf,CADyB;AAM/BomC,QAAAA,WAAW,EAAE,SANkB;AAO/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAPsB;AAW/BjtB,QAAAA,MAAM,EAAE;AAXuB,OAAhC;AAcA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE,CAAC;AAAClvB,YAAAA,GAAG,EAAE;AAAN,WAAD;AAAR;AADM,OAAb;AAIA,aAAO+rC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAnCO,CAAR;AAqCA,WAAO0H,OAAO,CACZ1E,UADK,CAELipB,WAFK,EAGL,OAHK,EAIL;AAACv6B,MAAAA,cAAc,EAAE,gBAAjB;AAAmCD,MAAAA,GAAG,EAAE;AAAxC,KAJK,EAKL,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CALK,EAML,MANK,EAOJoP,QAPI,EAOMC,QAPN,EAQLb,IARK,CAQA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAVK,EAWLb,IAXK,CAWA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE;AADN,SADK;AAHP,OADyC,EAUzC;AACC2N,QAAAA,IAAI,EAAE,gBADP;AAEC/H,QAAAA,IAAI,EAAE,CAAC,IAAD;AAFP,OAVyC,CAA1C;AAeA,KA3BK,CAAP;AA4BA,GAjFC,CAAF;AAmFAmvB,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzB,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB;AADkB,OAAP;AAAA,KAAjB;;AASAX,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpB+sC,UAAAA,KAAK,EAAE;AADa,SAAf,CADyB;AAI/BrF,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KArCO,CAAR;AAuCA,WAAO0H,OAAO,CACZ5C,OADK,CAEL,OAFK,EAGL;AAACrT,MAAAA,GAAG,EAAE;AAAN,KAHK,EAIL,MAJK,EAKJoP,QALI,EAKMC,QALN,EAMLb,IANK,CAMA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KARK,EASLb,IATK,CASA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACC8xD,UAAAA,EAAE,EAAE,EADL;AAECK,UAAAA,EAAE,EAAE;AAFL,SADK;AAHP,OADyC,CAA1C;AAYA,KAtBK,CAAP;AAuBA,GAxEC,CAAF;AA0EA/9B,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB;AADkB,OAAP;AAAA,KAAjB;;AASAX,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpB68B,UAAAA,KAAK,EAAE;AAFa,SAAf,CADyB;AAK/BrF,QAAAA,WAAW,EAAE,SALkB;AAM/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SANsB;AAU/BjtB,QAAAA,MAAM,EAAE;AAVuB,OAAhC;AAaA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAtCO,CAAR;AAwCA,WAAO0H,OAAO,CACZZ,YADK,CAEL,OAFK,EAGL;AAACrV,MAAAA,GAAG,EAAE;AAAN,KAHK,EAIL;AAACnpB,MAAAA,IAAI,EAAE;AAAP,KAJK,EAKL,MALK,EAMJu4B,QANI,EAMMC,QANN,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACC8xD,UAAAA,EAAE,EAAE,EADL;AAECK,UAAAA,EAAE,EAAE;AAFL,SADK;AAHP,OADyC,CAA1C;AAYA,KAvBK,CAAP;AAwBA,GA1EC,CAAF;AA4EA/9B,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB9iC,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SARe;AASvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SATc;AAUvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ;AAVe,OAAP;AAAA,KAAjB;;AAYA,QAAM8jC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBvQ,UAAAA,KAAK,EAAE;AAFa,SAAf,CADyB;AAK/B+nC,QAAAA,WAAW,EAAE,SALkB;AAM/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SANsB;AAU/BjtB,QAAAA,MAAM,EAAE;AAVuB,OAAhC;AAaA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAtCO,CAAR;AAwCA,WAAO0H,OAAO,CACZtE,eADK,CAEL,OAFK,EAGL;AACClR,MAAAA,GAAG,EAAE;AAACmB,QAAAA,aAAa,EAAE;AAAChB,UAAAA,QAAQ,EAAE;AAAX;AAAhB,OADN;AAECR,MAAAA,KAAK,EAAE;AAACqB,QAAAA,SAAS,EAAE;AAAZ;AAFR,KAHK,EAOL,MAPK,EASL;AAAC5qB,MAAAA,IAAI,EAAE;AAAP,KATK,EAUL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAVK,EAWL,KAXK,EAYL,KAZK,EAaL,IAbK,EAcL,EAdK,EAeJu4B,QAfI,EAeMC,QAfN,EAgBLb,IAhBK,CAgBA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAlBK,EAmBLb,IAnBK,CAmBA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,UADP;AAECy7B,QAAAA,WAAW,EAAE,KAFd;AAGCloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAHjB;AAICxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAJT;AAKCvQ,QAAAA,KAAK,EAAE;AALR,OADyC,EAQzC;AACCsP,QAAAA,IAAI,EAAE,WADP;AAECvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAFT;AAGCvQ,QAAAA,KAAK,EAAE,KAHR;AAICsC,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SAJP;AAKC9yD,QAAAA,GAAG,EAAE;AALN,OARyC,CAA1C;AAgBA,KApCK,CAAP;AAqCA,GAtGC,CAAF;AAwGA+0B,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB;AADkB,OAAP;AAAA,KAAjB;;AASA,QAAMiB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,OAAO,CACZnB,eADK,CAEL,OAFK,EAGL;AAACj+B,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,YANK,EAOL;AAACupB,MAAAA,KAAK,EAAE;AAACJ,QAAAA,GAAG,EAAE;AAAN;AAAR,KAPK,EAQL,MARK,EASJoP,QATI,EASMC,QATN,EAULb,IAVK,CAUA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAZK,EAaLb,IAbK,CAaA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,WADP;AAECvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAFT;AAGCvQ,QAAAA,KAAK,EAAE,KAHR;AAIC6F,QAAAA,KAAK,EAAE,CAJR;AAKCkB,QAAAA,KAAK,EAAE,CALR;AAMCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SANP;AAOCrzD,QAAAA,SAAS,EAAE;AAPZ,OADyC,CAA1C;AAWA,KAzBK,CAAP;AA0BA,GA1FC,CAAF;AA4FAs1B,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB;AADkB,OAAP;AAAA,KAAjB;;AASA,QAAMiB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAAC4B,YAAAA,GAAG,EAAE;AAAC,oBAAI,CAAC,IAAD,EAAO,IAAP;AAAL;AAAN;AADY,SAAf,CADyB;AAI/BomC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE,CAAC;AAAClvB,YAAAA,GAAG,EAAE;AAAN,WAAD;AAAR;AADM,OAAb;AAIA,aAAO+rC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAjCO,CAAR;AAmCA,WAAO0H,OAAO,CACZzB,YADK,CAEL,OAFK,EAGL;AAACxU,MAAAA,GAAG,EAAE,KAAN;AAAaC,MAAAA,cAAc,EAAE;AAA7B,KAHK,EAIL,CAAC,IAAD,EAAO,IAAP,CAJK,EAKL,MALK,EAMJmP,QANI,EAMMC,QANN,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE,KAAP;AAAcvP,QAAAA,MAAM,EAAEy0D,SAAtB;AAAiClyD,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD;AAAvC,OADyC,EAEzC;AAAC4F,QAAAA,IAAI,EAAE,CAAC,IAAD,CAAP;AAAe+H,QAAAA,IAAI,EAAE;AAArB,OAFyC,CAA1C;AAIA,KAfK,CAAP;AAgBA,GAzEC,CAAF;AA2EAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,OAAO,CAACsB,YAAR,CAAqB;AAAC/W,MAAAA,cAAc,EAAE;AAAjB,KAArB,EAAyD,IAAzD,EACC4O,QADD;AAIAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,gBAAP;AAAyB3N,MAAAA,GAAG,EAAE;AAA9B,KADyC,CAA1C;AAGA,GARC,CAAF;AAUA+0B,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BiZ,IAAAA,OAAO,CAACuB,aAAR,CAAsB;AAAC7V,MAAAA,eAAe,EAAE;AAAlB,KAAtB,EAA4D,CAC3D,IAD2D,EAE3D,IAF2D,CAA5D,EAGGyN,QAHH;AAKAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,iBAAP;AAA0B/H,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAhC,KADyC,CAA1C;AAGA,GATC,CAAF;AAWA2vB,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtCR,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,UAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAApB;;AACA,UAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBorB,UAAAA,GAAG,EAAE;AADkB,SAAP;AAAA,OAAjB;;AAGA,UAAMlrB,MAAM,GAAG;AAAC3mC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAAR;AAAP,OAAf;AAEA8e,MAAAA,OAAO,CAACjG,cAAR,CACCwqB,WADD,EAEC,EAFD,EAGCjrB,MAHD,EAIC,OAJD,EAKC,MALD,EAMEH,QANF,EAMYC,QANZ;AAQAlS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,EAA1C;AACA,KAhBC,CAAF;AAkBA98B,IAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,UAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAApB;;AACA,UAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBorB,UAAAA,GAAG,EAAE;AACJjsD,YAAAA,WAAW,EAAE;AACZksD,cAAAA,EAAE,EAAE;AACHzyD,gBAAAA,GAAG,EAAE,IADF;AAEHW,gBAAAA,IAAI,EAAE;AACLsyD,kBAAAA,cAAc,EAAE,gBADX;AAELC,kBAAAA,iBAAiB,EAAE,mBAFd;AAGLC,kBAAAA,WAAW,EAAE;AAACC,oBAAAA,IAAI,EAAE;AAAP,mBAHR;AAILC,kBAAAA,cAAc,EAAE;AAACC,oBAAAA,OAAO,EAAE;AAAV,mBAJX;AAKLC,kBAAAA,WAAW,EAAE,CAAC,MAAD,CALR;AAMLC,kBAAAA,cAAc,EAAE,CAAC,SAAD;AANX;AAFH;AADQ;AADT;AADkB,SAAP;AAAA,OAAjB;;AAiBA,UAAMlsB,MAAM,GAAG;AACd3mC,QAAAA,IAAI,EAAE;AACLuuB,UAAAA,KAAK,EAAE,CACN;AACClvB,YAAAA,GAAG,EAAE,IADN;AAECW,YAAAA,IAAI,EAAE;AACLsyD,cAAAA,cAAc,EAAE,gBADX;AAELC,cAAAA,iBAAiB,EAAE,oBAFd;AAGLC,cAAAA,WAAW,EAAE;AAACC,gBAAAA,IAAI,EAAE;AAAP,eAHR;AAILC,cAAAA,cAAc,EAAE;AAACC,gBAAAA,OAAO,EAAE;AAAV,eAJX;AAKLC,cAAAA,WAAW,EAAE,CAAC,MAAD,CALR;AAMLC,cAAAA,cAAc,EAAE,CAAC,UAAD;AANX;AAFP,WADM;AADF;AADQ,OAAf;AAkBAxlB,MAAAA,OAAO,CAACjG,cAAR,CACCwqB,WADD,EAEC;AAACx6B,QAAAA,GAAG,EAAE,KAAN;AAAaqB,QAAAA,MAAM,EAAE;AAACE,UAAAA,eAAe,EAAE;AAAlB;AAArB,OAFD,EAGCgO,MAHD,EAIC,OAJD,EAKC,MALD,EAMEH,QANF,EAMYC,QANZ;AAQAlS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AACLsyD,YAAAA,cAAc,EAAE,gBADX;AAELC,YAAAA,iBAAiB,EAAE,oBAFd;AAGLC,YAAAA,WAAW,EAAE;AAACC,cAAAA,IAAI,EAAE;AAAP,aAHR;AAILC,YAAAA,cAAc,EAAE;AAACC,cAAAA,OAAO,EAAE;AAAV,aAJX;AAKLC,YAAAA,WAAW,EAAE,CAAC,MAAD,CALR;AAMLC,YAAAA,cAAc,EAAE,CAAC,UAAD;AANX;AAFP,SADK;AAHP,OADyC,EAkBzC;AACCxzD,QAAAA,GAAG,EAAE,IADN;AAEC0uC,QAAAA,QAAQ,EAAE,gBAFX;AAGC/gC,QAAAA,IAAI,EAAE;AAHP,OAlByC,EAuBzC;AAAC3N,QAAAA,GAAG,EAAE,IAAN;AAAY0uC,QAAAA,QAAQ,EAAE,aAAtB;AAAqC/gC,QAAAA,IAAI,EAAE;AAA3C,OAvByC,EAwBzC;AAAC3N,QAAAA,GAAG,EAAE,IAAN;AAAY0uC,QAAAA,QAAQ,EAAE,aAAtB;AAAqC/gC,QAAAA,IAAI,EAAE;AAA3C,OAxByC,CAA1C;AA0BA,KAvEC,CAAF;AAwEA,GA3FO,CAAR;AA6FAonB,EAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChCiZ,IAAAA,OAAO,CAAC3D,cAAR,CACC;AAACtS,MAAAA,GAAG,EAAE,KAAN;AAAaI,MAAAA,KAAK,EAAE;AAACJ,QAAAA,GAAG,EAAE;AAAN;AAApB,KADD,EAEC;AACCp3B,MAAAA,IAAI,EAAE;AAACuuB,QAAAA,KAAK,EAAE,CAAC;AAAClvB,UAAAA,GAAG,EAAE;AAAN,SAAD;AAAR,OADP;AAECwqC,MAAAA,KAAK,EAAE,CAFR;AAGCC,MAAAA,OAAO,EAAE;AACRvb,QAAAA,KAAK,EAAE;AADC;AAHV,KAFD,EASC,OATD,EAUC,KAVD,EAWC,KAXD,EAYC,CAZD,EAaEiY,QAbF;AAeAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,KADP;AAEChN,MAAAA,IAAI,EAAE,CAAC;AAACX,QAAAA,GAAG,EAAE;AAAN,OAAD,CAFP;AAGC5B,MAAAA,MAAM,EAAE;AAHT,KADyC,EAMzC;AACCuP,MAAAA,IAAI,EAAE,WADP;AAECzJ,MAAAA,KAAK,EAAE,CAFR;AAGCzE,MAAAA,SAAS,EAAE,YAHZ;AAICrB,MAAAA,MAAM,EAAE,KAJT;AAKCC,MAAAA,KAAK,EAAE,KALR;AAMC+G,MAAAA,KAAK,EAAE,CANR;AAOCzE,MAAAA,IAAI,EAAE,CAAC;AAACX,QAAAA,GAAG,EAAE;AAAN,OAAD;AAPP,KANyC,CAA1C;AAgBA,GAhCC,CAAF;AAkCA+0B,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BiZ,IAAAA,OAAO,CAACd,WAAR,CACC;AAACnV,MAAAA,GAAG,EAAE,KAAN;AAAaC,MAAAA,cAAc,EAAE;AAA7B,KADD,EAEC;AAACr3B,MAAAA,IAAI,EAAE;AAACuuB,QAAAA,KAAK,EAAE,CAAC;AAAClvB,UAAAA,GAAG,EAAE;AAAN,SAAD;AAAR;AAAP,KAFD,EAGC,OAHD,EAIC,CAAC,IAAD,EAAO,IAAP,CAJD,EAKEmnC,QALF;AAOAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,KAAP;AAAchN,MAAAA,IAAI,EAAE,CAAC;AAACX,QAAAA,GAAG,EAAE;AAAN,OAAD,CAApB;AAAmC5B,MAAAA,MAAM,EAAEy0D;AAA3C,KADyC,EAEzC;AAACllD,MAAAA,IAAI,EAAE,gBAAP;AAAyB/H,MAAAA,IAAI,EAAE,CAAC,IAAD;AAA/B,KAFyC,CAA1C;AAIA,GAZC,CAAF;AAcAmvB,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJrqD,UAAAA,KAAK,EAAE;AACNvC,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADA;AAENzH,YAAAA,OAAO,EAAE,CACR,CACC;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC+G,cAAAA,KAAK,EAAE,CAHR;AAIC/F,cAAAA,MAAM,EAAE;AAJT,aADD,CADQ;AAFH,WADH;AAcJmE,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aADE;AAEN8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAFE;AAdH;AARkB,OAAP;AAAA,KAAjB;;AA4BA,QAAMmnC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,OAAO,CACZR,WADK,CAEL+kB,WAFK,EAGL,OAHK,EAIL;AAACp6B,MAAAA,KAAK,EAAE;AAACC,QAAAA,SAAS,EAAE,WAAZ;AAAyBL,QAAAA,GAAG,EAAE;AAA9B;AAAR,KAJK,EAKL,MALK,IAMFoP,QANE,EAMQC,QANR,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE;AAAP,OADyC,EAEzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAFyC,CAA1C;AAYA,KAvBK,CAAP;AAwBA,GA5GC,CAAF;AA8GAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN;AAAL,WADH;AAEJuG,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFT;AARkB,OAAP;AAAA,KAAjB;;AAaA,QAAMtsB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAC7B2nB,MAAAA,WAAM,CAACw9B,WAAP,CAAmB,oCAAnB,EAAyDC,yBAAK,CAAC3kD,GAAD,CAA9D;AACHknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAACuuB,YAAAA,KAAK,EAAE,CAAC;AAAClvB,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB,aAAD;AAAR;AADc,SAAf,CADyB;AAI/BrtB,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE,CAAC;AAAClvB,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAAC8yD,cAAAA,IAAI,EAAE;AAAP;AAAlB,WAAD;AAAR,SADM;AAEZjpB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAlCO,CAAR;AAoCA,WAAO0H,OAAO,CACZ/E,UADK,CAELspB,WAFK,EAGL,OAHK,EAIL;AAACx6B,MAAAA,GAAG,EAAE,KAAN;AAAaqB,MAAAA,MAAM,EAAE;AAACE,QAAAA,eAAe,EAAE;AAAlB;AAArB,KAJK,EAKL,MALK,EAMJ,IANI,EAME6N,QANF,EAMYC,QANZ,EAOLb,IAPK,CAOA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,KADP;AAEChN,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAAC8yD,YAAAA,IAAI,EAAE;AAAP;AAAlB,SAAD,CAFP;AAGCr1D,QAAAA,MAAM,EAAEy0D;AAHT,OADyC,EAMzC;AAACllD,QAAAA,IAAI,EAAE,iBAAP;AAA0B3N,QAAAA,GAAG,EAAE,IAA/B;AAAqC0uC,QAAAA,QAAQ,EAAE;AAA/C,OANyC,CAA1C;AAQA,KAnBK,CAAP;AAoBA,GAnFC,CAAF;AAqFAnZ,EAAAA,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC9CR,IAAAA,EAAE,CAAC,WAAD,EAAc,YAAY;AAC3BiZ,MAAAA,OAAO,CAACC,sBAAR,CAA+B;AAAC1V,QAAAA,cAAc,EAAE;AAAjB,OAA/B,EAAmE;AAClEl1B,QAAAA,SAAS,EAAE;AADuD,OAAnE,EAEG8jC,QAFH;AAIAjS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAC7xD,QAAAA,GAAG,EAAE,IAAN;AAAY2N,QAAAA,IAAI,EAAE;AAAlB,OADyC,CAA1C;AAGA,KARC,CAAF;AAUAonB,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BiZ,MAAAA,OAAO,CAACC,sBAAR,CAA+B;AAC9BvU,QAAAA,eAAe,EAAE;AADa,OAA/B,EAEG;AACFz4B,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AADV,OAFH,EAIGkmC,QAJH;AAMAjS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACjsD,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAAP;AAAqB+H,QAAAA,IAAI,EAAE;AAA3B,OADyC,CAA1C;AAGA,KAVC,CAAF;AAWA,GAtBO,CAAR;AAwBAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN;AAAL,WADH;AAEJuG,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFT;AARkB,OAAP;AAAA,KAAjB;;AAaAzlB,IAAAA,OAAO,CAAChG,YAAR,CAAqBuqB,WAArB,EAAkC;AACjCn5B,MAAAA,MAAM,EAAE;AAACG,QAAAA,MAAM,EAAE;AAAT;AADyB,KAAlC,EAEG,OAFH,EAEY,IAFZ,EAEkB;AACjBv5B,MAAAA,GAAG,EAAE,IADY;AAEjBW,MAAAA,IAAI,EAAE;AAAC8yD,QAAAA,IAAI,EAAE;AAAP;AAFW,KAFlB,EAKGtsB,QALH,EAKaC,QALb;AAOAlS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,QADP;AAEChN,MAAAA,IAAI,EAAE,CACL;AACCX,QAAAA,GAAG,EAAE,OADN;AAECW,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAAC8yD,cAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFP,OADK;AAFP,KADyC,CAA1C;AAWA,GAjCC,CAAF;AAmCA1+B,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzB,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMrrB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA,QAAMlH,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBssB,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aAAL;AAAkB8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAAtB;AADH;AARkB,OAAP;AAAA,KAAjB;;AAaA,WAAOguC,OAAO,CACZ7E,OADK,CAELopB,WAFK,EAGL,OAHK,EAIL;AACC/5B,MAAAA,GAAG,EAAE;AAACI,QAAAA,IAAI,EAAE;AAACD,UAAAA,QAAQ,EAAE;AAAX;AAAP;AADN,KAJK,EAOL,MAPK,EASL,CAAC,IAAD,EAAO,IAAP,CATK,EAUL,KAVK,EAWJwO,QAXI,EAYLZ,IAZK,CAYA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAdK,EAeLb,IAfK,CAeA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,QAAAA,WAAW,EAAE,KAAd;AAAqBxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAA3B;AAAyC+H,QAAAA,IAAI,EAAE;AAA/C,OADyC,CAA1C;AAGA,KAnBK,CAAP;AAoBA,GA/CC,CAAF;AAiDAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,OAAO,CAACwB,YAAR,CAAqB;AAAChX,MAAAA,GAAG,EAAE;AAACI,QAAAA,IAAI,EAAE;AAACF,UAAAA,KAAK,EAAE;AAAR;AAAP;AAAN,KAArB,EAAsD,KAAtD,EAA6DyO,QAA7D;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,MAAAA,WAAW,EAAE,KAAd;AAAqBz7B,MAAAA,IAAI,EAAE;AAA3B,KADyC,CAA1C;AAGA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMw9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAApB;;AACA,QAAMprB,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ,SAXe;AAYvBmvD,QAAAA,GAAG,EAAE;AAZkB,OAAP;AAAA,KAAjB;;AAcA,QAAMrrB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,mDADD,EAEKC,yBAAK,CAAC3kD,GAAD,CAFV;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuuB,UAAAA,KAAK,EAAE;AAACujC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,OAAO,CACZzE,UADK,CAELgpB,WAFK,EAGL,OAHK,EAIL;AAAC/5B,MAAAA,GAAG,EAAE;AAACC,QAAAA,OAAO,EAAE;AAACE,UAAAA,QAAQ,EAAE;AAAX;AAAV,OAAN;AAAyCR,MAAAA,KAAK,EAAE;AAACJ,QAAAA,GAAG,EAAE;AAAN;AAAhD,KAJK,EAKL,MALK,EAOL;AAACnpB,MAAAA,IAAI,EAAE;AAAP,KAPK,EAQL;AAACA,MAAAA,IAAI,EAAE;AAAP,KARK,EASL,KATK,EAUL,CAVK,EAWL,CAXK,EAYL,KAZK,EAaJu4B,QAbI,EAaMC,QAbN,EAcLb,IAdK,CAcA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAhBK,EAiBLb,IAjBK,CAiBA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAtCK,CAAP;AAuCA,GA7GC,CAAF;AA+GAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BiZ,IAAAA,OAAO,CAACyB,UAAR,CAAmB;AAACtX,MAAAA,KAAK,EAAE;AAACsB,QAAAA,WAAW,EAAE;AAAd;AAAR,KAAnB,EAA0D,KAA1D,EAAiE,KAAjE,EACC0N,QADD;AAIAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzzD,MAAAA,MAAM,EAAE,KAAT;AAAgBC,MAAAA,KAAK,EAAE,KAAvB;AAA8BsP,MAAAA,IAAI,EAAE;AAApC,KADyC,CAA1C;AAGA,GARC,CAAF;AAUAonB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCG,IAAAA,WAAM,CAACC,eAAP,CACC6Y,OAAO,CAAC0B,kBAAR,CACC;AAAClX,MAAAA,GAAG,EAAE;AAACC,QAAAA,OAAO,EAAE;AAACE,UAAAA,QAAQ,EAAE;AAAX;AAAV;AAAN,KADD,EAEC,KAFD,EAGC;AAAC/pB,MAAAA,IAAI,EAAE;AAAP,KAHD,EAIC;AAACA,MAAAA,IAAI,EAAE;AAAP,KAJD,EAKC,KALD,EAMC,CAND,EAOC,CAPD,CADD,EAUC;AACCjB,MAAAA,IAAI,EAAE,UADP;AAECy7B,MAAAA,WAAW,EAAE,KAFd;AAGCloC,MAAAA,cAAc,EAAE;AAAC0N,QAAAA,IAAI,EAAE;AAAP,OAHjB;AAICxQ,MAAAA,MAAM,EAAE;AAACwQ,QAAAA,IAAI,EAAE;AAAP,OAJT;AAKCvQ,MAAAA,KAAK,EAAE,KALR;AAMC+G,MAAAA,KAAK,EAAE,CANR;AAOC/F,MAAAA,MAAM,EAAE;AAPT,KAVD;AAoBA,GArBC,CAAF;AAuBA01B,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCiZ,IAAAA,OAAO,CAAC2B,eAAR,CAAwB;AACvBnX,MAAAA,GAAG,EAAE;AAACC,QAAAA,OAAO,EAAE;AAACC,UAAAA,KAAK,EAAE;AAAR;AAAV;AADkB,KAAxB,EAEG,KAFH,EAEUyO,QAFV;AAIAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,MAAAA,WAAW,EAAE,KAAd;AAAqBz7B,MAAAA,IAAI,EAAE;AAA3B,KADyC,CAA1C;AAGA,GARC,CAAF;AAUAonB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCiZ,IAAAA,OAAO,CAAC4B,kBAAR,CAA2B;AAC1BpX,MAAAA,GAAG,EAAE;AAACC,QAAAA,OAAO,EAAE;AAACL,UAAAA,SAAS,EAAE;AAAZ;AAAV;AADqB,KAA3B,IAEK+O,QAFL;AAIAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CAAC;AAAClkD,MAAAA,IAAI,EAAE;AAAP,KAAD,CAA1C;AACA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BiZ,IAAAA,OAAO,CAAC6B,UAAR,CAAmB;AAACrV,MAAAA,WAAW,EAAE;AAAd,KAAnB,IAAmD2M,QAAnD;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CAAC;AAAClkD,MAAAA,IAAI,EAAE;AAAP,KAAD,CAA1C;AACA,GAJC,CAAF;AAMAonB,EAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACvCG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,OAAO,CAACE,qBAAR,EAAvB,EAAwD;AACvDvgC,MAAAA,IAAI,EAAE;AADiD,KAAxD;AAGA,GAJC,CAAF;AAMAonB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCiZ,IAAAA,OAAO,CAACsB,YAAR,CAAqB;AAAC/W,MAAAA,cAAc,EAAE;AAAjB,KAArB,EAAyD,IAAzD,EACC4O,QADD;AAIAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAC7xD,MAAAA,GAAG,EAAE,IAAN;AAAY2N,MAAAA,IAAI,EAAE;AAAlB,KADyC,CAA1C;AAGA,GARC,CAAF;AASA,CAx7DO,CAAR;;ACHA4nB,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7CA,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECzQ,MAAAA,OAAO,EAAE,EAFV;AAGCC,MAAAA,MAAM,EAAE,KAHT;AAICC,MAAAA,KAAK,EAAE,KAJR;AAKCw2B,MAAAA,cAAc,EAAE;AALjB,KADa,EAQb;AACCjmB,MAAAA,IAAI,EAAE,SADP;AAECzQ,MAAAA,OAAO,EAAE,CACR;AAACC,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OADQ,EAER;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAFQ,EAGR;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAHQ,EAIR;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAJQ,CAFV;AAQCD,MAAAA,MAAM,EAAE,KART;AASCC,MAAAA,KAAK,EAAE,KATR;AAUCw2B,MAAAA,cAAc,EAAE;AAACz2B,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB;AAVjB,KARa,CAAd;AAqBA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCkuB,aAAO,CAACplD,QAAR,CAAiBq0D,IAAI,CAACn0D,OAAtB,EAA+Bm0D,IAAI,CAACl0D,MAApC,EAA4Ck0D,IAAI,CAACj0D,KAAjD,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9BO,CAAR;AAgCAU,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AACxC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECzQ,MAAAA,OAAO,EAAE,EAFV;AAGC02B,MAAAA,cAAc,EAAE;AAHjB,KADa,EAMb;AACCjmB,MAAAA,IAAI,EAAE,gBADP;AAECzQ,MAAAA,OAAO,EAAE,CACR;AAACC,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OADQ,EAER;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAFQ,EAGR;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAHQ,EAIR;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAJQ,CAFV;AAQCw2B,MAAAA,cAAc,EAAE,CACf;AAACz2B,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OADe,EAEf;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAFe,EAGf;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAHe,EAIf;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAJe;AARjB,KANa,EAqBb;AACCuQ,MAAAA,IAAI,EAAE,oBADP;AAECzQ,MAAAA,OAAO,EAAE,CACR;AAACC,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OADQ,EAER;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAFQ,EAGR;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAHQ,EAIR;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAJQ;AAOR;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAPQ,EAQR;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OARQ,EASR;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OATQ,EAUR;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAVQ;AAaR;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE,MAAxB;AAAgC8zD,QAAAA,CAAC,EAAE;AAAnC,OAbQ,EAcR;AAAC/zD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE,MAAvB;AAA+B8zD,QAAAA,CAAC,EAAE;AAAlC,OAdQ,EAeR;AAAC/zD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE,KAAvB;AAA8B8zD,QAAAA,CAAC,EAAE;AAAjC,OAfQ,EAgBR;AAAC/zD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE,KAAxB;AAA+B8zD,QAAAA,CAAC,EAAE;AAAlC,OAhBQ,CAFV;AAoBCt9B,MAAAA,cAAc,EAAE,CACf;AAACz2B,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OADe,EAEf;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAFe,EAGf;AAACD,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB,OAHe,EAIf;AAACD,QAAAA,MAAM,EAAE,MAAT;AAAiBC,QAAAA,KAAK,EAAE;AAAxB,OAJe;AApBjB,KArBa,CAAd;AAkDA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCkuB,aAAO,CAAC1kD,gBAAR,CAAyB2zD,IAAI,CAACn0D,OAA9B,CADD,EAECm0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3DO,CAAR;AA6DAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECtQ,MAAAA,KAAK,EAAE;AACNF,QAAAA,MAAM,EAAE,KADF;AAENC,QAAAA,KAAK,EAAE;AAFD,OAFR;AAMCD,MAAAA,MAAM,EAAE,KANT;AAOCC,MAAAA,KAAK,EAAE,KAPR;AAQCw2B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,8BADP;AAECtQ,MAAAA,KAAK,EAAE;AACNF,QAAAA,MAAM,EAAE,KADF;AAENC,QAAAA,KAAK,EAAE,KAFD;AAGNq1D,QAAAA,QAAQ,EAAE;AAHJ,OAFR;AAOCt1D,MAAAA,MAAM,EAAE,KAPT;AAQCC,MAAAA,KAAK,EAAE,KARR;AASCw2B,MAAAA,cAAc,EAAE;AATjB,KAXa,EAsBb;AACCjmB,MAAAA,IAAI,EAAE,iBADP;AAECtQ,MAAAA,KAAK,EAAE;AACNF,QAAAA,MAAM,EAAE,KADF;AAENC,QAAAA,KAAK,EAAE;AAFD,OAFR;AAMCD,MAAAA,MAAM,EAAE,KANT;AAOCC,MAAAA,KAAK,EAAE,MAPR;AAQCw2B,MAAAA,cAAc,EAAE;AARjB,KAtBa,EAgCb;AACCjmB,MAAAA,IAAI,EAAE,kBADP;AAECtQ,MAAAA,KAAK,EAAE;AACNF,QAAAA,MAAM,EAAE,KADF;AAENC,QAAAA,KAAK,EAAE;AAFD,OAFR;AAMCD,MAAAA,MAAM,EAAE,MANT;AAOCC,MAAAA,KAAK,EAAE,KAPR;AAQCw2B,MAAAA,cAAc,EAAE;AARjB,KAhCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCrP,aAAO,CAAC7kD,oBAAR,CACC8zD,IAAI,CAACh0D,KADN,EAECg0D,IAAI,CAACl0D,MAFN,EAGCk0D,IAAI,CAACj0D,KAHN,CADD,EAMCi0D,IAAI,CAACz9B,cANN;AAQA,OATC,CAAF;AAUA,KAXD;AAYA,GAzDO,CAAR;AA2DAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECxQ,MAAAA,MAAM,EAAE,IAFT;AAGCmC,MAAAA,IAAI,EAAE;AACLI,QAAAA,IAAI,EAAE;AACLgzD,UAAAA,QAAQ,EAAE,MADL;AAELC,UAAAA,QAAQ,EAAE,gBAFL;AAGLC,UAAAA,MAAM,EAAE,KAHH;AAILC,UAAAA,SAAS,EAAE,MAJN;AAKLC,UAAAA,OAAO,EAAE;AALJ;AADD,OAHP;AAYCl/B,MAAAA,cAAc,EAAE;AAZjB,KADa,EAeb;AACCjmB,MAAAA,IAAI,EAAE,uBADP;AAECxQ,MAAAA,MAAM,EAAE;AACPu1D,QAAAA,QAAQ,EAAE,MADH;AAEPC,QAAAA,QAAQ,EAAE;AAACI,UAAAA,IAAI,EAAE;AAAP,SAFH;AAGPH,QAAAA,MAAM,EAAE;AAAC,gBAAI,CAAC,KAAD,EAAQ,KAAR,EAAe,OAAf;AAAL,SAHD;AAIPC,QAAAA,SAAS,EAAE;AAAC/yD,UAAAA,KAAK,EAAE,CAAC,SAAD,EAAY,SAAZ;AAAR,SAJJ;AAKPkzD,QAAAA,IAAI,EAAE;AALC,OAFT;AASC1zD,MAAAA,IAAI,EAAE;AACLI,QAAAA,IAAI,EAAE;AACLgzD,UAAAA,QAAQ,EAAE,MADL;AAELC,UAAAA,QAAQ,EAAE,gBAFL;AAGLC,UAAAA,MAAM,EAAE,KAHH;AAILC,UAAAA,SAAS,EAAE,MAJN;AAKLC,UAAAA,OAAO,EAAE;AALJ;AADD,OATP;AAkBCl/B,MAAAA,cAAc,EAAE;AAlBjB,KAfa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,wBADP;AAECxQ,MAAAA,MAAM,EAAE;AACPu1D,QAAAA,QAAQ,EAAE;AADH,OAFT;AAKCpzD,MAAAA,IAAI,EAAE;AACLI,QAAAA,IAAI,EAAE;AACLgzD,UAAAA,QAAQ,EAAE;AADL;AADD,OALP;AAUC9+B,MAAAA,cAAc,EAAE;AAVjB,KAnCa,EA+Cb;AACCjmB,MAAAA,IAAI,EAAE,sBADP;AAECxQ,MAAAA,MAAM,EAAE;AACPy1D,QAAAA,MAAM,EAAE;AAAC,gBAAI,CAAC,KAAD,EAAQ,KAAR,EAAe,OAAf;AAAL;AADD,OAFT;AAKCtzD,MAAAA,IAAI,EAAE;AACLI,QAAAA,IAAI,EAAE;AACLkzD,UAAAA,MAAM,EAAE;AADH;AADD,OALP;AAUCh/B,MAAAA,cAAc,EAAE;AAVjB,KA/Ca,EA2Db;AACCjmB,MAAAA,IAAI,EAAE,yBADP;AAECxQ,MAAAA,MAAM,EAAE;AACP01D,QAAAA,SAAS,EAAE;AAAC/yD,UAAAA,KAAK,EAAE,CAAC,SAAD,EAAY,SAAZ;AAAR;AADJ,OAFT;AAKCR,MAAAA,IAAI,EAAE;AACLI,QAAAA,IAAI,EAAE;AACLmzD,UAAAA,SAAS,EAAE;AADN;AADD,OALP;AAUCj/B,MAAAA,cAAc,EAAE;AAVjB,KA3Da,EAuEb;AACCjmB,MAAAA,IAAI,EAAE,wBADP;AAECxQ,MAAAA,MAAM,EAAE;AACP61D,QAAAA,IAAI,EAAE;AADC,OAFT;AAKC1zD,MAAAA,IAAI,EAAE;AACLI,QAAAA,IAAI,EAAE;AACLozD,UAAAA,OAAO,EAAE;AADJ;AADD,OALP;AAUCl/B,MAAAA,cAAc,EAAE;AAVjB,KAvEa,CAAd;AAqFAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCrP,aAAO,CAAC/iD,aAAR,CAAsBgyD,IAAI,CAACl0D,MAA3B,EAAmCk0D,IAAI,CAAC/xD,IAAxC,CADD,EAEC+xD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9FO,CAAR;AAgGAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAMp3B,OAAO,GAAG,CACf;AACCC,MAAAA,MAAM,EAAE,EADT;AAECC,MAAAA,KAAK,EAAE;AAFR,KADe,EAKf;AACCD,MAAAA,MAAM,EAAE;AACPk0D,QAAAA,IAAI,EAAE;AADC,OADT;AAICj0D,MAAAA,KAAK,EAAE;AAJR,KALe,CAAhB;AAaA02B,IAAAA,EAAE,CAAC,uDAAD,EAA0D,YAAY;AACvEG,MAAAA,WAAM,CAACC,eAAP,CACCkuB,aAAO,CAACrkD,WAAR,CAAoBb,OAApB,EAA6B,EAA7B,EAAiC,IAAjC,CADD,EAEC,CACC;AACCC,QAAAA,MAAM,EAAE;AACPk0D,UAAAA,IAAI,EAAE;AADC,SADT;AAICj0D,QAAAA,KAAK,EAAE;AAJR,OADD,CAFD;AAWA,KAZC,CAAF;AAcA02B,IAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AACjDG,MAAAA,WAAM,CAACI,KAAP,CACC+tB,aAAO,CAACrkD,WAAR,CAAoBb,OAApB,EAA6B,EAA7B,EAAiC,EAAjC,CADD,EAECA,OAFD;AAIA,KALC,CAAF;AAMA,GAlCO,CAAR;AAmCA,CA5RO,CAAR;;ACAAo3B,QAAQ,CAAC,yCAAD,EAA4C,YAAW;AAC3DR,EAAAA,EAAE,CAAC,iDAAD,EAAoD,YAAM;AACxD,QAAMlyB,SAAS,GAAG;AACdlB,MAAAA,QAAQ,EAAE,GADI;AAEdoB,MAAAA,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN,CAFG;AAGdG,MAAAA,WAAW,EAAE,GAHC;AAIdF,MAAAA,QAAQ,EAAE,CAAC,GAAD,EAAM,GAAN;AAJI,KAAlB;AAOA,QAAM6xB,cAAc,GAAG;AACnBlzB,MAAAA,QAAQ,EAAE,GADS;AAEnBG,MAAAA,QAAQ,EAAE;AACN,cAAI,CAAC,GAAD,EAAM,GAAN;AADE,OAFS;AAKnBoB,MAAAA,WAAW,EAAE,GALM;AAMnB1B,MAAAA,OAAO,EAAE;AACL,cAAI,CAAC,GAAD,EAAM,GAAN;AADC;AANU,KAAvB;AAWA,QAAM00B,MAAM,GAAGzxB,aAAa,CAAC7B,uCAAd,CAAsDC,SAAtD,CAAf;AACAqyB,IAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,GArBC,CAAF;AAuBAE,EAAAA,EAAE,CAAC,qCAAD,EAAwC,YAAM;AAC5C,QAAMmB,MAAM,GAAGzxB,aAAa,CAAC7B,uCAAd,CAAsD,IAAtD,CAAf;AACAsyB,IAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,GAHC,CAAF;AAIH,CA5BO,CAAR;;ACAAX,QAAQ,CAAC,mBAAD,EAAsB,YAAW;AACrC,MAAM4+B,OAAO,GAAG;AACZxyD,IAAAA,QAAQ,EAAE,GADE;AAEZoB,IAAAA,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN;AAFC,GAAhB;AAKA,MAAMwJ,MAAM,GAAG;AACXxJ,IAAAA,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN,CADA;AAEXG,IAAAA,WAAW,EAAE;AAFF,GAAf;AAKA6xB,EAAAA,EAAE,CAAC,iDAAD,EAAoD,YAAM;AACxD,QAAMF,cAAc,GAAG;AACnBlzB,MAAAA,QAAQ,EAAE,GADS;AAEnBoB,MAAAA,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN,CAFQ;AAGnBG,MAAAA,WAAW,EAAE;AAHM,KAAvB;AAKA,QAAMgzB,MAAM,GAAGzxB,aAAa,CAAC/B,iBAAd,CAAgCyxD,OAAhC,EAAyC5nD,MAAzC,CAAf;AACA2oB,IAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,GARC,CAAF;AAUAE,EAAAA,EAAE,CAAC,kEAAD,EAAqE,YAAM;AACzE,QAAMmB,MAAM,GAAGzxB,aAAa,CAAC/B,iBAAd,CAAgCyxD,OAAhC,EAAyC,IAAzC,CAAf;AACAj/B,IAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+Bi+B,OAA/B;AAEA,QAAM19B,OAAO,GAAGhyB,aAAa,CAAC/B,iBAAd,CAAgC,IAAhC,EAAsC6J,MAAtC,CAAhB;AACA2oB,IAAAA,WAAM,CAACC,eAAP,CAAuBsB,OAAvB,EAAgClqB,MAAhC;AACH,GANC,CAAF;AAQAwoB,EAAAA,EAAE,CAAC,gDAAD,EAAmD,YAAM;AACvD,QAAMmB,MAAM,GAAGzxB,aAAa,CAAC/B,iBAAd,CAAgC,IAAhC,EAAsC,IAAtC,CAAf;AACAwyB,IAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,GAHC,CAAF;AAIH,CAjCO,CAAR;;ACAO,IAAMk+B,qBAAqB,GAAG;AACpC/wD,EAAAA,SAAS,EAAE,IADyB;AAEpCG,EAAAA,KAAK,EAAE,IAF6B;AAGpCU,EAAAA,KAAK,EAAE,IAH6B;AAIpCqC,EAAAA,WAAW,EAAE,IAJuB;AAKpCpI,EAAAA,OAAO,EAAE,IAL2B;AAMpCgK,EAAAA,KAAK,EAAE;AACNhK,IAAAA,OAAO,EAAE,IADH;AAENyH,IAAAA,IAAI,EAAE;AAFA,GAN6B;AAUpCyuD,EAAAA,aAAa,EAAE,IAVqB;AAWpClO,EAAAA,OAAO,EAAE,KAX2B;AAYpCmO,EAAAA,WAAW,EAAE;AAZuB,CAA9B;AAeP,aAAe;AACdrlB,EAAAA,GAAG,EAAE,aAAC1vC,KAAD,EAAQ+uC,MAAR,EAAmB;AACvB,QAAIimB,OAAO,sBAAOh1D,KAAK,CAACiE,KAAb,CAAX;;AACA,QAAI8qC,MAAM,CAAC3tC,IAAP,IAAe2tC,MAAM,CAAC3tC,IAAP,CAAYtB,MAA/B,EAAuC;AACtCivC,MAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAAAG,KAAK,EAAI;AAC5Bw0D,QAAAA,OAAO,CAACx0D,KAAK,CAACC,GAAP,CAAP,qCAAyBu0D,OAAO,CAACx0D,KAAK,CAACC,GAAP,CAAhC,GAAgDD,KAAhD;AACA,eAAOw0D,OAAO,CAACx0D,KAAK,CAACC,GAAP,CAAP,CAAmBiI,QAA1B;AACA,eAAOssD,OAAO,CAACx0D,KAAK,CAACC,GAAP,CAAP,CAAmBw0D,UAA1B;AACA,OAJD;AAKA;;AACD,6CAAWj1D,KAAX;AAAkBiE,MAAAA,KAAK,EAAE+wD;AAAzB;AACA,GAXa;AAadrlB,EAAAA,QAAQ,EAAE,kBAAC3vC,KAAD,EAAQ+uC,MAAR,EAAmB;AAC5B,QAAIimB,OAAO,sBAAOh1D,KAAK,CAACiE,KAAb,CAAX;;AACA,QAAI8qC,MAAM,CAAC3tC,IAAP,IAAe2tC,MAAM,CAAC3tC,IAAP,CAAYtB,MAA/B,EAAuC;AACtCivC,MAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAAAG,KAAK,EAAI;AAC5Bw0D,QAAAA,OAAO,CAACx0D,KAAK,CAACuuC,MAAM,CAACtuC,GAAR,CAAN,CAAP,qCAAiCu0D,OAAO,CAACx0D,KAAK,CAACuuC,MAAM,CAACtuC,GAAR,CAAN,CAAxC,GAAgED,KAAhE;AACA,eAAOw0D,OAAO,CAACx0D,KAAK,CAACuuC,MAAM,CAACtuC,GAAR,CAAN,CAAP,CAA2BiI,QAAlC;AACA,eAAOssD,OAAO,CAACx0D,KAAK,CAACuuC,MAAM,CAACtuC,GAAR,CAAN,CAAP,CAA2Bw0D,UAAlC;AACA,OAJD;AAKA;;AACD,6CAAWj1D,KAAX;AAAkBiE,MAAAA,KAAK,EAAE+wD;AAAzB;AACA,GAvBa;AAyBdE,EAAAA,iBAAiB,EAAE,2BAACl1D,KAAD,EAAQ+uC,MAAR,EAAmB;AACrC,QAAIimB,OAAO,sBAAOh1D,KAAK,CAACiE,KAAb,CAAX;;AACA,QAAI8qC,MAAM,CAAC1oC,IAAP,IAAe0oC,MAAM,CAAC1oC,IAAP,CAAYvG,MAA/B,EAAuC;AACtCivC,MAAAA,MAAM,CAAC1oC,IAAP,CAAYhG,OAAZ,CAAoB,UAAAI,GAAG,EAAI;AAC1Bu0D,QAAAA,OAAO,CAACv0D,GAAD,CAAP,GAAe;AAACA,UAAAA,GAAG,EAAHA,GAAD;AAAMw0D,UAAAA,UAAU,EAAE;AAAlB,SAAf;AACA,OAFD;AAGA;;AACD,6CAAWj1D,KAAX;AAAkBiE,MAAAA,KAAK,EAAE+wD;AAAzB;AACA,GAjCa;AAmCdnlB,EAAAA,QAAQ,EAAE,kBAAC7vC,KAAD,EAAQ+uC,MAAR,EAAmB;AAC5B,QAAInwC,OAAO,GAAG,EAAd;AACA,QAAIwB,aAAa,GAAG,EAApB;;AAEA,QAAIJ,KAAK,CAACpB,OAAV,EAAkB;AACjBoB,MAAAA,KAAK,CAACpB,OAAN,CAAcyB,OAAd,CAAsB,UAAAtB,KAAK,EAAI;AAC9B,YAAIuB,6BAAUvB,KAAK,CAACF,MAAhB,EAAwBkwC,MAAM,CAAClwC,MAA/B,KAA0CyB,6BAAUvB,KAAK,CAACD,KAAhB,EAAuBiwC,MAAM,CAACjwC,KAA9B,CAA9C,EAAmF;AAClFsB,UAAAA,aAAa,GAAGrB,KAAhB;AACA,SAFD,MAEO;AACNH,UAAAA,OAAO,CAAC2B,IAAR,CAAaxB,KAAb;AACA;AACD,OAND;AAOA;;AAED,QAAIA,KAAJ;;AACA,QAAIgwC,MAAM,CAAC3tC,IAAP,CAAYtB,MAAhB,EAAuB;AACtBf,MAAAA,KAAK,sBAAOqB,aAAa,CAACrB,KAArB,CAAL;AACAgwC,MAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAACG,KAAD,EAAQhB,CAAR,EAAc;AACjCT,QAAAA,KAAK,CAACgwC,MAAM,CAAClpC,KAAP,GAAerG,CAAhB,CAAL,GAA0BgB,KAAK,CAACC,GAAhC;AACA,OAFD;AAGA;;AAEDL,IAAAA,aAAa,GAAG;AACfvB,MAAAA,MAAM,EAAEuB,aAAa,CAACvB,MAAd,IAAwBkwC,MAAM,CAAClwC,MADxB;AAEfC,MAAAA,KAAK,EAAEsB,aAAa,CAACtB,KAAd,IAAuBiwC,MAAM,CAACjwC,KAFtB;AAGf6F,MAAAA,KAAK,EAAEoqC,MAAM,CAACpqC,KAHC;AAIfzE,MAAAA,SAAS,EAAE6uC,MAAM,CAAC7uC,SAJH;AAKfnB,MAAAA,KAAK,EAAEA,KAAK,IAAIqB,aAAa,CAACrB;AALf,KAAhB;AAOAH,IAAAA,OAAO,CAAC2B,IAAR,CAAaH,aAAb;AAEA,6CAAWJ,KAAX;AAAkBpB,MAAAA,OAAO,EAAEA;AAA3B;AACA,GAnEa;AAqEdgxC,EAAAA,aAAa,EAAE,uBAAC5vC,KAAD,EAAQ+uC,MAAR,EAAmB;AACjC,QAAInwC,OAAO,GAAG,EAAd;AACA,QAAIwB,aAAa,GAAG,EAApB;;AAEA,QAAIJ,KAAK,CAACpB,OAAV,EAAkB;AACjBoB,MAAAA,KAAK,CAACpB,OAAN,CAAcyB,OAAd,CAAsB,UAAAtB,KAAK,EAAI;AAC9B,YAAIuB,6BAAUvB,KAAK,CAACF,MAAhB,EAAwBkwC,MAAM,CAAClwC,MAA/B,KAA0CyB,6BAAUvB,KAAK,CAACD,KAAhB,EAAuBiwC,MAAM,CAACjwC,KAA9B,CAA9C,EAAmF;AAClFsB,UAAAA,aAAa,GAAGrB,KAAhB;AACA,SAFD,MAEO;AACNH,UAAAA,OAAO,CAAC2B,IAAR,CAAaxB,KAAb;AACA;AACD,OAND;AAOA;;AAED,QAAIA,KAAJ;;AACA,QAAIgwC,MAAM,CAAC3tC,IAAP,CAAYtB,MAAhB,EAAuB;AACtBf,MAAAA,KAAK,sBAAOqB,aAAa,CAACrB,KAArB,CAAL;AACAgwC,MAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAACG,KAAD,EAAQhB,CAAR,EAAc;AACjCT,QAAAA,KAAK,CAACS,CAAD,CAAL,GAAWgB,KAAK,CAACuuC,MAAM,CAACtuC,GAAR,CAAhB;AACA,OAFD;AAGA;;AAEDL,IAAAA,aAAa,GAAG;AACfvB,MAAAA,MAAM,EAAEuB,aAAa,CAACvB,MAAd,IAAwBkwC,MAAM,CAAClwC,MADxB;AAEfC,MAAAA,KAAK,EAAEsB,aAAa,CAACtB,KAAd,IAAuBiwC,MAAM,CAACjwC,KAFtB;AAGfC,MAAAA,KAAK,EAAEA,KAAK,IAAIqB,aAAa,CAACrB;AAHf,KAAhB;AAKAH,IAAAA,OAAO,CAAC2B,IAAR,CAAaH,aAAb;AAEA,6CAAWJ,KAAX;AAAkBpB,MAAAA,OAAO,EAAEA;AAA3B;AACA,GAnGa;AAqGdu2D,EAAAA,kBAAkB,EAAE,4BAACn1D,KAAD,EAAQ+uC,MAAR,EAAmB;AACtC,QAAIqmB,MAAM,GAAG;AACZzzD,MAAAA,cAAc,EAAEotC,MAAM,CAACptC,cADX;AAEZ9C,MAAAA,MAAM,EAAEkwC,MAAM,CAAClwC,MAFH;AAGZC,MAAAA,KAAK,EAAEiwC,MAAM,CAACjwC,KAHF;AAIZ+G,MAAAA,KAAK,EAAEkpC,MAAM,CAAClpC,KAJF;AAKZ/F,MAAAA,MAAM,EAAEivC,MAAM,CAACjvC;AALH,KAAb;AAQA,QAAIu1D,WAAW,GAAG,KAAlB;;AACA,QAAIr1D,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,IAAuBoB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CAA3B,EAAoE;AACnEwrB,MAAAA,WAAW,GAAGr2D,0BAAOgB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CAAP,EAAgDurB,MAAhD,CAAd;AACA,KAZqC;;;AAetC,QAAI,CAACC,WAAL,EAAkB;AACjB,+CAAWr1D,KAAX;AACC4I,QAAAA,KAAK,oCACD5I,KAAK,CAAC4I,KADL;AAEJhK,UAAAA,OAAO,oCACHoB,KAAK,CAAC4I,KAAN,CAAYhK,OADT,2BAELmwC,MAAM,CAAClF,WAFF,EAGJ7pC,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,IAAuBoB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CAAxB,gCACK7pC,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CADL,IAC8CurB,MAD9C,KACwD,CAACA,MAAD,CAJnD;AAFH;AADN;AAYA,KAbD,MAaO;AACN,aAAOp1D,KAAP;AACA;AACD,GApIa;AAsIds1D,EAAAA,uBAAuB,EAAE,iCAACt1D,KAAD,EAAQ+uC,MAAR,EAAmB;AAC3C,QAAIqmB,MAAM,GAAG;AACZzzD,MAAAA,cAAc,EAAEotC,MAAM,CAACptC,cADX;AAEZ9C,MAAAA,MAAM,EAAEkwC,MAAM,CAAClwC,MAFH;AAGZC,MAAAA,KAAK,EAAEiwC,MAAM,CAACjwC;AAHF,KAAb;AAMA,QAAIu2D,WAAW,GAAG,KAAlB;;AACA,QAAIr1D,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,IAAuBoB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CAA3B,EAAoE;AACnEwrB,MAAAA,WAAW,GAAGr2D,0BAAOgB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CAAP,EAAgDurB,MAAhD,CAAd;AACA,KAV0C;;;AAa3C,QAAI,CAACC,WAAL,EAAkB;AACjB,+CAAWr1D,KAAX;AACC4I,QAAAA,KAAK,oCACD5I,KAAK,CAAC4I,KADL;AAEJhK,UAAAA,OAAO,oCACHoB,KAAK,CAAC4I,KAAN,CAAYhK,OADT,2BAELmwC,MAAM,CAAClF,WAFF,EAGJ7pC,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,IAAuBoB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CAAxB,gCACK7pC,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBmwC,MAAM,CAAClF,WAA3B,CADL,IAC8CurB,MAD9C,KACwD,CAACA,MAAD,CAJnD;AAFH;AADN;AAYA,KAbD,MAaO;AACN,aAAOp1D,KAAP;AACA;AACD,GAnKa;AAqKdowC,EAAAA,eAAe,EAAE,yBAACpwC,KAAD,EAAQ+uC,MAAR,EAAmB;AACnC,QAAI/uC,KAAK,CAAC4I,KAAN,IAAe5I,KAAK,CAAC4I,KAAN,CAAYhK,OAA3B,IAAsCoB,KAAK,CAAC4I,KAAN,CAAYhK,OAAZ,CAAoBkC,cAApB,CAAmCiuC,MAAM,CAAClF,WAA1C,CAA1C,EAAkG;AACjG,UAAIjrC,OAAO,sBAAOoB,KAAK,CAAC4I,KAAN,CAAYhK,OAAnB,CAAX;;AACA,aAAOA,OAAO,CAACmwC,MAAM,CAAClF,WAAR,CAAd;AACA,+CAAW7pC,KAAX;AAAkB4I,QAAAA,KAAK,oCAAM5I,KAAK,CAAC4I,KAAZ;AAAmBhK,UAAAA,OAAO,EAAES,6BAAUT,OAAV,IAAqB,IAArB,GAA4BA;AAAxD;AAAvB;AACA,KAJD,MAIO;AACN;AACA,aAAOoB,KAAP;AACA;AACD,GA9Ka;AAgLdqwC,EAAAA,kBAAkB,EAAE,4BAACrwC,KAAD,EAAQ+uC,MAAR,EAAmB;AACtC,QAAI/uC,KAAK,CAAC4I,KAAN,IAAe5I,KAAK,CAAC4I,KAAN,CAAYhK,OAA/B,EAAwC;AACvC,+CAAWoB,KAAX;AAAkB4I,QAAAA,KAAK,oCAAM5I,KAAK,CAAC4I,KAAZ;AAAmBhK,UAAAA,OAAO,EAAE;AAA5B;AAAvB;AACA,KAFD,MAEO;AACN;AACA,aAAOoB,KAAP;AACA;AACD,GAvLa;AAyLdu1D,EAAAA,eAAe,EAAE,yBAACv1D,KAAD,EAAQ+uC,MAAR,EAAmB;AACnC,6CACI/uC,KADJ;AAEC4I,MAAAA,KAAK,oCACD5I,KAAK,CAAC4I,KADL;AAEJvC,QAAAA,IAAI,oCACArG,KAAK,CAAC4I,KAAN,CAAYvC,IADZ,2BAEF0oC,MAAM,CAAClF,WAFL,EAEmB7pC,KAAK,CAAC4I,KAAN,CAAYvC,IAAZ,IAAoBrG,KAAK,CAAC4I,KAAN,CAAYvC,IAAZ,CAAiB0oC,MAAM,CAAClF,WAAxB,CAApB,GAA2Dic,2BAAQ9lD,KAAK,CAAC4I,KAAN,CAAYvC,IAAZ,CAAiB0oC,MAAM,CAAClF,WAAxB,CAAR,EAA8CkF,MAAM,CAAC1oC,IAArD,CAA3D,GAAwH0oC,MAAM,CAAC1oC,IAFlJ;AAFA;AAFN;AAUA,GApMa;AAsMd4pC,EAAAA,YAAY,EAAE,sBAACjwC,KAAD,EAAQ+uC,MAAR,EAAmB;AAChC,QAAI1oC,IAAI,sBAAOrG,KAAK,CAAC4I,KAAN,CAAYvC,IAAnB,CAAR;;AACA,WAAOA,IAAI,CAAC0oC,MAAM,CAAClF,WAAR,CAAX;AAEA,6CACI7pC,KADJ;AAEC4I,MAAAA,KAAK,oCACD5I,KAAK,CAAC4I,KADL;AAEJvC,QAAAA,IAAI,EAAEhH,6BAAUgH,IAAV,IAAkB,IAAlB,GAAyBA;AAF3B;AAFN;AAOA,GAjNa;AAmNdmvD,EAAAA,WAAW,EAAE,qBAACx1D,KAAD,EAAQ+uC,MAAR,EAAmB;AAC/B,QAAI/uC,KAAK,CAACiE,KAAN,IAAejE,KAAK,CAACiE,KAAN,CAAY8qC,MAAM,CAACtuC,GAAnB,CAAnB,EAA4C;AAC3C,UAAMwD,KAAK,sBAAOjE,KAAK,CAACiE,KAAb,CAAX;;AACAA,MAAAA,KAAK,CAAC8qC,MAAM,CAACtuC,GAAR,CAAL,CAAkBg1D,OAAlB,GAA4B,IAA5B;AAEA,+CACIz1D,KADJ;AAECiE,QAAAA,KAAK,EAALA;AAFD;AAIA,KARD,MAQO;AACN,aAAOjE,KAAP;AACA;AACD,GA/Na;AAiOd4vD,EAAAA,MAAM,EAAE,gBAAC5vD,KAAD,EAAQ+uC,MAAR,EAAmB;AAC1B,QAAIimB,OAAO,GAAGh1D,KAAK,CAACiE,KAAN,GAAckR,0BAAOnV,KAAK,CAACiE,KAAb,EAAoB8qC,MAAM,CAAC1oC,IAA3B,CAAd,GAAiD,IAA/D;AACA,6CAAWrG,KAAX;AAAkBiE,MAAAA,KAAK,EAAE+wD;AAAzB;AACA,GApOa;AAsOdU,EAAAA,YAAY,EAAE,sBAAC11D,KAAD,EAAQ+uC,MAAR,EAAmB;AAChC,QAAIimB,OAAO,GAAGh1D,KAAK,CAACgH,WAAN,GAAoBmO,0BAAOnV,KAAK,CAACgH,WAAb,EAA0B+nC,MAAM,CAAC1oC,IAAjC,CAApB,GAA6D,IAA3E;AACA,6CAAWrG,KAAX;AAAkBgH,MAAAA,WAAW,EAAEguD;AAA/B;AACA,GAzOa;AA2OdW,EAAAA,kBAAkB,EAAE,4BAAC31D,KAAD,EAAW;AAC9B,QAAIg1D,OAAO,GAAGh1D,KAAK,CAACgH,WAAN,GAAoBmO,0BAAOnV,KAAK,CAACgH,WAAb,EAA0BhH,KAAK,CAAC8D,SAAhC,CAApB,GAAiE,IAA/E;AACA,6CAAW9D,KAAX;AAAkBgH,MAAAA,WAAW,EAAEguD;AAA/B;AACA,GA9Oa;AAgPdY,EAAAA,oBAAoB,EAAE,8BAAC51D,KAAD,EAAQ+uC,MAAR,EAAmB;AACxC,QAAI8mB,kBAAkB,GAAG71D,KAAK,CAACgH,WAAN,IAAqBhH,KAAK,CAACgH,WAAN,CAAkB+nC,MAAM,CAACtuC,GAAzB,CAArB,IAAsDT,KAAK,CAACgH,WAAN,CAAkB+nC,MAAM,CAACtuC,GAAzB,EAA8BW,IAApF,GACxB+T,0BAAOnV,KAAK,CAACgH,WAAN,CAAkB+nC,MAAM,CAACtuC,GAAzB,EAA8BW,IAArC,EAA2C2tC,MAAM,CAACI,QAAlD,CADwB,GACsC,IAD/D;;AAIA,QAAI0mB,kBAAkB,IAAI,CAACx2D,6BAAUw2D,kBAAV,CAA3B,EAAyD;AACxD,+CACI71D,KADJ;AAECgH,QAAAA,WAAW,oCACPhH,KAAK,CAACgH,WADC,2BAET+nC,MAAM,CAACtuC,GAFE,oCAGNT,KAAK,CAACgH,WAAN,CAAkB+nC,MAAM,CAACtuC,GAAzB,CAHM;AAITW,UAAAA,IAAI,EAAEy0D;AAJG;AAFZ;AAUA,KAXD,MAWO,IAAIA,kBAAkB,IAAIx2D,6BAAUw2D,kBAAV,CAA1B,EAAyD;AAC/D,UAAIC,YAAY,sBAAO91D,KAAK,CAACgH,WAAb,CAAhB;;AACA,aAAO8uD,YAAY,CAAC/mB,MAAM,CAACtuC,GAAR,CAAnB;AAEA,+CAAWT,KAAX;AAAkBgH,QAAAA,WAAW,EAAE8uD;AAA/B;AACA,KALM,MAKA;AACN,aAAO91D,KAAP;AACA;AAED,GAzQa;AA2Qd;AACA+1D,EAAAA,0BAA0B,EAAE,oCAAC/1D,KAAD,EAAQ+uC,MAAR,EAAmB;AAC9C,QAAMinB,gBAAgB,GAAGjnB,MAAM,CAACrH,QAAP,CAAgBuuB,KAAhB,CAAsB,CAAtB,EAAyB,CAAC,CAA1B,CAAzB;AACA,QAAMC,WAAW,GAAGF,gBAAgB,GAAG,KAAvC;AACA,QAAMG,YAAY,GAAGH,gBAAgB,GAAG,MAAxC;;AAEA,QAAIztB,UAAU,sBAAOvoC,KAAK,CAACgH,WAAb,CAAd;;AACA,QAAI,CAAC3H,6BAAUkpC,UAAV,CAAL,EAA4B;AAC3B,UAAI6tB,aAAa,GAAG,EAApB;AACA,UAAIC,eAAe,GAAG,KAAtB;;AACA,iCAAQ9tB,UAAR,EAAoB,UAAC/nC,KAAD,EAAQC,GAAR,EAAgB;AACnC,YAAID,KAAK,CAACY,IAAN,IAAcZ,KAAK,CAACY,IAAN,CAAW80D,WAAX,CAAlB,EAA2C;AAC1C,cAAII,SAAS,GAAGpkD,8BAAW68B,MAAM,CAAC1oC,IAAlB,EAAwB7F,KAAK,CAACY,IAAN,CAAW80D,WAAX,CAAxB,CAAhB;;AACA,cAAII,SAAJ,EAAe;AACdF,YAAAA,aAAa,CAAC31D,GAAD,CAAb,qCAAyBD,KAAzB;AAAgCY,cAAAA,IAAI,oCAAMZ,KAAK,CAACY,IAAZ,2BAAmB80D,WAAnB,EAAiC,IAAjC;AAApC;AACAG,YAAAA,eAAe,GAAG,IAAlB;AACA,WAHD,MAGO;AACND,YAAAA,aAAa,CAAC31D,GAAD,CAAb,GAAqBD,KAArB;AACA;AACD,SARD,MAQO,IAAIA,KAAK,CAACY,IAAN,IAAcZ,KAAK,CAACY,IAAN,CAAW+0D,YAAX,CAAlB,EAA4C;AAClD,cAAII,WAAW,GAAGC,gCAAah2D,KAAK,CAACY,IAAN,CAAW+0D,YAAX,CAAb,EAAuCpnB,MAAM,CAAC1oC,IAA9C,CAAlB;;AACA,cAAIkwD,WAAW,CAACz2D,MAAZ,KAAuBU,KAAK,CAACY,IAAN,CAAW+0D,YAAX,CAA3B,EAAqD;AACpDC,YAAAA,aAAa,CAAC31D,GAAD,CAAb,qCAAyBD,KAAzB;AAAgCY,cAAAA,IAAI,oCAAMZ,KAAK,CAACY,IAAZ,2BAAmB+0D,YAAnB,EAAkCI,WAAlC;AAApC;AACAF,YAAAA,eAAe,GAAG,IAAlB;AACA,WAHD,MAGO;AACND,YAAAA,aAAa,CAAC31D,GAAD,CAAb,GAAqBD,KAArB;AACA;AAED,SATM,MASA;AACN41D,UAAAA,aAAa,CAAC31D,GAAD,CAAb,GAAqBD,KAArB;AACA;AACD,OArBD;;AAsBA,aAAO61D,eAAe,qCAAOr2D,KAAP;AAAcgH,QAAAA,WAAW,EAAEovD;AAA3B,WAA4Cp2D,KAAlE;AACA,KA1BD,MA0BO;AACN,aAAOA,KAAP;AACA;AACD,GA/Sa;AAiTdouD,EAAAA,SAAS,EAAE,mBAACpuD,KAAD,EAAQ+uC,MAAR,EAAmB;AAC7B,6CAAW/uC,KAAX;AAAkB8D,MAAAA,SAAS,EAAEirC,MAAM,CAACtuC,GAApC;AAAyCiB,MAAAA,UAAU,EAAE;AAArD;AACA,GAnTa;AAqTd+0D,EAAAA,iBAAiB,EAAE,2BAACz2D,KAAD,EAAQ+uC,MAAR,EAAmB;AACrC,6CAAW/uC,KAAX;AAAkB0B,MAAAA,UAAU,EAAEqtC,MAAM,CAAC1oC,IAArC;AAA2CvC,MAAAA,SAAS,EAAE;AAAtD;AACA,GAvTa;AAyTd2kC,EAAAA,YAAY,EAAE,sBAACzoC,KAAD,EAAQ+uC,MAAR,EAAmB;AAChC,QAAI2nB,aAAa,sBAAO12D,KAAK,CAACgH,WAAb,CAAjB;;AACA,QAAI+nC,MAAM,CAAC3tC,IAAP,IAAe2tC,MAAM,CAAC3tC,IAAP,CAAYtB,MAA/B,EAAuC;AACtCivC,MAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAAAG,KAAK,EAAI;AAC5B,YAAIk2D,aAAa,CAACl2D,KAAK,CAACC,GAAP,CAAjB,EAA6B;AAC5Bi2D,UAAAA,aAAa,CAACl2D,KAAK,CAACC,GAAP,CAAb,qCACIi2D,aAAa,CAACl2D,KAAK,CAACC,GAAP,CADjB;AAECW,YAAAA,IAAI,oCACAs1D,aAAa,CAACl2D,KAAK,CAACC,GAAP,CAAb,CAAyBW,IADzB,GAEAZ,KAAK,CAACY,IAFN;AAFL;AAOA,SARD,MAQO;AACNs1D,UAAAA,aAAa,CAACl2D,KAAK,CAACC,GAAP,CAAb,GAA2BD,KAA3B;AACA;AACD,OAZD;AAaA;;AACD,6CAAWR,KAAX;AAAkBgH,MAAAA,WAAW,EAAE0vD;AAA/B;AACA,GA3Ua;AA6UdC,EAAAA,YAAY,EAAE,sBAAC32D,KAAD,EAAQ+uC,MAAR,EAAmB;AAChC,QAAInwC,OAAO,GAAGsM,yBAAMlL,KAAK,CAACpB,OAAZ,EAAqB,UAAAG,KAAK,EAAI;AAC3C,+CAAWA,KAAX;AAAkBA,QAAAA,KAAK,EAAE,IAAzB;AAA+B4F,QAAAA,KAAK,EAAE,IAAtC;AAA4CzE,QAAAA,SAAS,EAAE,IAAvD;AAA6DwI,QAAAA,QAAQ,EAAE3J,KAAK,CAACA,KAA7E;AAAoF63D,QAAAA,aAAa,EAAE73D,KAAK,CAAC4F;AAAzG;AACA,KAFa,CAAd;;AAIA,6CACI3E,KADJ;AAECpB,MAAAA,OAAO,EAAEA,OAAO,CAACkB,MAAR,GAAiBlB,OAAjB,GAA2B;AAFrC;AAIA,GAtVa;;AAwVd;AACD;AACA;AACA;AACA;AACCsxC,EAAAA,UAAU,EAAE,oBAAClwC,KAAD,EAAQ+uC,MAAR,EAAmB;AAC9B,QAAMnwC,OAAO,GAAGoB,KAAK,CAACpB,OAAN,CAAc4G,GAAd,CAAkB,UAAAzG,KAAK,EAAI;AAC1C,UAAM83D,eAAe,GAAG3xD,aAAa,CAACjG,oBAAd,CAAmCF,KAAnC,EAA0CgwC,MAAM,CAAClwC,MAAjD,EAAyDkwC,MAAM,CAACjwC,KAAhE,CAAxB;;AACA,UAAG+3D,eAAH,EAAoB;AACnB93D,QAAAA,KAAK,CAAC2J,QAAN,GAAiB3J,KAAK,CAACA,KAAvB;AACAA,QAAAA,KAAK,CAAC63D,aAAN,GAAsB73D,KAAK,CAAC4F,KAA5B;AACA5F,QAAAA,KAAK,CAACA,KAAN,GAAc,IAAd;AACAA,QAAAA,KAAK,CAAC4F,KAAN,GAAc,IAAd;AACA5F,QAAAA,KAAK,CAACmB,SAAN,GAAkB,IAAlB;AACA;;AACD,aAAOnB,KAAP;AACA,KAVe,CAAhB;AAYA,6CACIiB,KADJ;AAECpB,MAAAA,OAAO,qBAAMA,OAAN;AAFR;AAIA,GA9Wa;AAgXdk4D,EAAAA,eAAe,EAAE,yBAAC92D,KAAD,EAAQ+uC,MAAR,EAAmB;AACnC,QAAI/uC,KAAK,CAACiE,KAAV,EAAgB;AACf,UAAIA,KAAK,GAAG,EAAZ;;AACA,gCAAOjE,KAAK,CAACiE,KAAb,EAAoB,UAACzD,KAAD,EAAQC,GAAR,EAAgB;AACnCwD,QAAAA,KAAK,CAACxD,GAAD,CAAL,qCACID,KADJ;AAECkI,UAAAA,QAAQ,EAAE;AAFX;AAIA,OALD;;AAMA,+CACI1I,KADJ;AAECiE,QAAAA,KAAK,EAALA;AAFD;AAIA,KAZD,MAYO;AACN,aAAOjE,KAAP;AACA;AACD,GAhYa;AAkYd+2D,EAAAA,eAAe,EAAE,yBAAC/2D,KAAD,EAAQ+uC,MAAR,EAAmB;AACnC,QAAI/uC,KAAK,CAACiE,KAAV,EAAgB;AACf,UAAIA,KAAK,GAAG,EAAZ;;AACA,gCAAOjE,KAAK,CAACiE,KAAb,EAAoB,UAACzD,KAAD,EAAQC,GAAR,EAAgB;AACnC,YAAGD,KAAK,CAACkG,WAAN,IAAqBlG,KAAK,CAACkG,WAAN,CAAkBE,KAAlB,CAAwB4d,GAAhD,EAAqD;AACpDvgB,UAAAA,KAAK,CAACxD,GAAD,CAAL,qCACID,KADJ;AAECkG,YAAAA,WAAW,EAAE;AACZE,cAAAA,KAAK,EAAEpG,KAAK,CAACkG,WAAN,CAAkBE;AADb;AAFd;AAMA;AACD,OATD;;AAUA,+CAAW5G,KAAX;AAAkBiE,QAAAA,KAAK,EAALA;AAAlB;AACA,KAbD,MAaO;AACN,aAAOjE,KAAP;AACA;AACD;AAnZa,CAAf;;ACbAg2B,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC9CA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE,EAHT;AAICzZ,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3tC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3tC,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AADC,OAHT;AAiBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAjBjB,KAba,CAAd;AAuCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACtnB,GAAT,CAAaqjB,IAAI,CAAC/yD,KAAlB,EAAyB+yD,IAAI,CAAChkB,MAA9B,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhDO,CAAR;AAkDAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE,EAHT;AAICzZ,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3tC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE,SADE;AAEPW,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECw2D,UAAAA,OAAO,EAAE,KAFV;AAGC5nD,UAAAA,IAAI,EAAE;AAHP,SADK,EAML;AACC5O,UAAAA,GAAG,EAAE,IADN;AAECw2D,UAAAA,OAAO,EAAE,KAFV;AAGC5nD,UAAAA,IAAI,EAAE,QAHP;AAIC3G,UAAAA,QAAQ,EAAE,IAJX;AAKCusD,UAAAA,UAAU,EAAE;AALb,SANK;AAFC,OAHT;AAoBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNizD,UAAAA,GAAG,EAAE;AAACz2D,YAAAA,GAAG,EAAE,IAAN;AAAYw2D,YAAAA,OAAO,EAAE,KAArB;AAA4B5nD,YAAAA,IAAI,EAAE;AAAlC,WADC;AAEN8nD,UAAAA,GAAG,EAAE;AAAC12D,YAAAA,GAAG,EAAE,IAAN;AAAYw2D,YAAAA,OAAO,EAAE,KAArB;AAA4B5nD,YAAAA,IAAI,EAAE;AAAlC;AAFC;AADQ;AApBjB,KAba,CAAd;AA0CAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACrnB,QAAT,CAAkBojB,IAAI,CAAC/yD,KAAvB,EAA8B+yD,IAAI,CAAChkB,MAAnC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnDO,CAAR;AAqDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE,EAHT;AAICzZ,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC1oC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC1oC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP,OAHT;AAICivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAJjB,KAba,CAAd;AA0BAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC9B,iBAAT,CAA2BnC,IAAI,CAAC/yD,KAAhC,EAAuC+yD,IAAI,CAAChkB,MAA5C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnCO,CAAR;AAqCAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACPlwC,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,KAAK,EAAE,KAFA;AAGPoB,QAAAA,SAAS,EAAE,WAHJ;AAIPyE,QAAAA,KAAK,EAAE,CAJA;AAKPvD,QAAAA,IAAI,EAAE;AALC,OAHT;AAUCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAVjB,KADa,EAuBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACPlwC,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,KAAK,EAAE,KAFA;AAGPoB,QAAAA,SAAS,EAAE,WAHJ;AAIPyE,QAAAA,KAAK,EAAE,CAJA;AAKPkB,QAAAA,KAAK,EAAE,CALA;AAMPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AANC,OAXT;AAmBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAnBjB,KAvBa,CAAd;AAwDA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACnnB,QAAT,CAAkBkjB,IAAI,CAAC/yD,KAAvB,EAA8B+yD,IAAI,CAAChkB,MAAnC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjEO,CAAR;AAmEAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACPlwC,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,KAAK,EAAE,KAFA;AAGP2B,QAAAA,GAAG,EAAE,SAHE;AAIPW,QAAAA,IAAI,EAAE;AAJC,OAHT;AASCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECE,UAAAA,KAAK,EAAE,KAFR;AAGCD,UAAAA,KAAK,EAAE;AAHR,SADQ;AADM;AATjB,KADa,EAoBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CACN;AAACk4D,YAAAA,OAAO,EAAE;AAAV,WADM,EAEN;AAACA,YAAAA,OAAO,EAAE;AAAV,WAFM,EAGN;AAACA,YAAAA,OAAO,EAAE;AAAV,WAHM;AAHR,SADQ;AADH,OAFR;AAeCloB,MAAAA,MAAM,EAAE;AACPlwC,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,KAAK,EAAE,KAFA;AAGP2B,QAAAA,GAAG,EAAE,SAHE;AAIPW,QAAAA,IAAI,EAAE,CAAC;AAAC61D,UAAAA,OAAO,EAAE;AAAV,SAAD,EAAkB;AAACA,UAAAA,OAAO,EAAE;AAAV,SAAlB;AAJC,OAfT;AAqBC3hC,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECE,UAAAA,KAAK,EAAE;AAAC,eAAG,IAAJ;AAAU,eAAG,IAAb;AAAmB,eAAG;AAACk4D,cAAAA,OAAO,EAAE;AAAV;AAAtB,WAFR;AAGCn4D,UAAAA,KAAK,EAAE;AAHR,SADQ;AADM;AArBjB,KApBa,CAAd;AAqDA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACpnB,aAAT,CAAuBmjB,IAAI,CAAC/yD,KAA5B,EAAmC+yD,IAAI,CAAChkB,MAAxC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9DO,CAAR;AAgEAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE,QADN;AAEPloC,QAAAA,cAAc,EAAE,KAFT;AAGP9C,QAAAA,MAAM,EAAE,GAHD;AAIPC,QAAAA,KAAK,EAAE,KAJA;AAKP+G,QAAAA,KAAK,EAAE,CALA;AAMP/F,QAAAA,MAAM,EAAE;AAND,OAjBT;AAyBCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AAzBjB,KADa,EA0Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE,QADN;AAEPloC,QAAAA,cAAc,EAAE,MAFT;AAGP9C,QAAAA,MAAM,EAAE,GAHD;AAIPC,QAAAA,KAAK,EAAE,KAJA;AAKP+G,QAAAA,KAAK,EAAE,CALA;AAMP/F,QAAAA,MAAM,EAAE;AAND,OAjBT;AAyBCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AAzBjB,KA1Ca,CAAd;AA4FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC7B,kBAAT,CAA4BpC,IAAI,CAAC/yD,KAAjC,EAAwC+yD,IAAI,CAAChkB,MAA7C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GArGO,CAAR;AAuGAU,EAAAA,QAAQ,CAAC,yBAAD,EAA4B,YAAY;AAC/C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADD,OAFR;AAeCiwC,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE,QADN;AAEPloC,QAAAA,cAAc,EAAE,KAFT;AAGP9C,QAAAA,MAAM,EAAE,GAHD;AAIPC,QAAAA,KAAK,EAAE;AAJA,OAfT;AAqBCw2B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADQ;AArBjB,KADa,EAoCb;AACCuQ,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADD,OAFR;AAeCiwC,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE,QADN;AAEPloC,QAAAA,cAAc,EAAE,MAFT;AAGP9C,QAAAA,MAAM,EAAE,GAHD;AAIPC,QAAAA,KAAK,EAAE;AAJA,OAfT;AAqBCw2B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO,EAMP;AACC6C,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aANO;AADA;AADH;AADQ;AArBjB,KApCa,CAAd;AA8EA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC1B,uBAAT,CAAiCvC,IAAI,CAAC/yD,KAAtC,EAA6C+yD,IAAI,CAAChkB,MAAlD,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvFO,CAAR;AAyFAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE;AADN,OALT;AAQCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AARjB,KADa,EAab;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE;AADN,OALT;AAQCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AARjB,KAba,CAAd;AA2BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC5mB,eAAT,CAAyB2iB,IAAI,CAAC/yD,KAA9B,EAAqC+yD,IAAI,CAAChkB,MAA1C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApCO,CAAR;AAsCAE,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpC,QAAMk9B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE,EALT;AAMCzZ,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAV;AADQ;AANjB,KADa,CAAd;AAYA8zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC3mB,kBAAT,CAA4B0iB,IAAI,CAAC/yD,KAAjC,EAAwC+yD,IAAI,CAAChkB,MAA7C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAnBC,CAAF;AAqBAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,iBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCmmC,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE,MADN;AAEPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OALT;AASCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AAAP;AADQ;AATjB,KADa,EAcb;AACCjoD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AADA;AADD,OAFR;AAOCvoB,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE,MADN;AAEPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAPT;AAWCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AAXjB,KAda,CAAd;AA+BA5E,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACzB,eAAT,CAAyBxC,IAAI,CAAC/yD,KAA9B,EAAqC+yD,IAAI,CAAChkB,MAA1C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAxCO,CAAR;AA0CAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE;AADN,OALT;AAQCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AARjB,KADa,EAab;AACCjoD,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAP;AAA2BC,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAlC;AAAP;AADD,OAFR;AAKCxoB,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE;AADN,OALT;AAQCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACkxD,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAR;AAAP;AADQ;AARjB,KAba,EAyBb;AACCloD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACPlF,QAAAA,WAAW,EAAE;AADN,OALT;AAQCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAAP;AADQ;AARjB,KAzBa,CAAd;AAsCAqsD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC/mB,YAAT,CAAsB8iB,IAAI,CAAC/yD,KAA3B,EAAkC+yD,IAAI,CAAChkB,MAAvC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA/CO,CAAR;AAiDAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AAACuzD,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AADD,OAFR;AAKC2B,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE;AADE,OALT;AAQC60B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACuzD,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AADQ;AARjB,KADa,EAab;AACC/9B,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AAACyzD,UAAAA,EAAE,EAAE;AAACtqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaoqB,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAjB;AAAyBqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAA9B;AADD,OAFR;AAKC2B,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE;AADE,OALT;AAQC60B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACyzD,UAAAA,EAAE,EAAE;AAACtqB,YAAAA,CAAC,EAAE,CAAJ;AAAOqoB,YAAAA,OAAO,EAAE;AAAhB,WAAL;AAA4B+B,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAhC;AAAwCqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAA7C;AADQ;AARjB,KAba,CAAd;AA2BAslB,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACxB,WAAT,CAAqBzC,IAAI,CAAC/yD,KAA1B,EAAiC+yD,IAAI,CAAChkB,MAAtC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApCO,CAAR;AAsCAU,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAR,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP1oC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AADC,OAHT;AAMCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACuvD,UAAAA,EAAE,EAAE;AAAL;AADQ;AANjB,KADa,EAWb;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAR,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP1oC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AADC,OAHT;AAMCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AADQ;AANjB,KAXa,CAAd;AAuBAyuD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACpH,MAAT,CAAgBmD,IAAI,CAAC/yD,KAArB,EAA4B+yD,IAAI,CAAChkB,MAAjC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GA9BO,CAAR;AAgCAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AAACgH,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAd,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP1oC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AADC,OAHT;AAMCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AAACwsD,UAAAA,EAAE,EAAE;AAAL;AADE;AANjB,KADa,EAWb;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AAACgH,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAd,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP1oC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AADC,OAHT;AAMCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AADE;AANjB,KAXa,CAAd;AAuBA0rD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACtB,YAAT,CAAsB3C,IAAI,CAAC/yD,KAA3B,EAAkC+yD,IAAI,CAAChkB,MAAvC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENkD,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAFP,OAFR;AAMCzkB,MAAAA,MAAM,EAAE,EANT;AAOCzZ,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfkD,QAAAA,WAAW,EAAE;AAACusD,UAAAA,EAAE,EAAE,CAAL;AAAQC,UAAAA,EAAE,EAAE;AAAZ;AAFE;AAPjB,KADa,EAab;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENkD,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE;AAAL;AAFP,OAFR;AAMCnkB,MAAAA,MAAM,EAAE,EANT;AAOCzZ,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfkD,QAAAA,WAAW,EAAE;AAFE;AAPjB,KAba,CAAd;AA2BA0rD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACrB,kBAAT,CAA4B5C,IAAI,CAAC/yD,KAAjC,EAAwC+yD,IAAI,CAAChkB,MAA7C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApCO,CAAR;AAsCAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAAP;AAFQ;AADP,OAFR;AAQC2tC,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE,IADE;AAEP0uC,QAAAA,QAAQ,EAAE;AAFH,OART;AAYC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAAP;AAFQ;AADE;AAZjB,KADa,EAoBb;AACCiO,MAAAA,IAAI,EAAE,uBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADP,OAFR;AAQC5oB,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE,IADE;AAEP0uC,QAAAA,QAAQ,EAAE;AAFH,OART;AAYC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADE;AAZjB,KApBa,EAuCb;AACCtoD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADP,OAFR;AAQC5oB,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE,IADE;AAEP0uC,QAAAA,QAAQ,EAAE;AAFH,OART;AAYC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACu2D,cAAAA,EAAE,EAAE;AAAL;AAAP;AAFQ;AADE;AAZjB,KAvCa,EA0Db;AACCtoD,MAAAA,IAAI,EAAE,uBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE,IADE;AAEP0uC,QAAAA,QAAQ,EAAE;AAFH,OART;AAYC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AADQ;AADE;AAZjB,KA1Da,CAAd;AA8EAjF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACpB,oBAAT,CAA8B7C,IAAI,CAAC/yD,KAAnC,EAA0C+yD,IAAI,CAAChkB,MAA/C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvFO,CAAR;AAyFAU,EAAAA,QAAQ,CAAC,4BAAD,EAA+B,YAAY;AAClD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,kBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WADQ;AAOZrE,UAAAA,EAAE,EAAE;AACHnyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,sBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WAPQ;AAaZpE,UAAAA,EAAE,EAAE;AACHpyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,wBADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD,EAAU,OAAV;AAFP;AADH,WAbQ;AAmBZpE,UAAAA,EAAE,EAAE;AACHryD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,4BADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD,EAAU,OAAV;AAFP;AADH;AAnBQ;AADP,OAFR;AA8BC9oB,MAAAA,MAAM,EAAE;AACPrH,QAAAA,QAAQ,EAAE,SADH;AAEPrhC,QAAAA,IAAI,EAAE,CAAC,KAAD,EAAQ,OAAR;AAFC,OA9BT;AAkCCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,kBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WADQ;AAOZrE,UAAAA,EAAE,EAAE;AACHnyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,sBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WAPQ;AAaZpE,UAAAA,EAAE,EAAE;AACHpyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,wBADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD;AAFP;AADH,WAbQ;AAmBZpE,UAAAA,EAAE,EAAE;AACHryD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,4BADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD,EAAU,OAAV;AAFP;AADH;AAnBQ;AADE;AAlCjB,KADa,CAAd;AAkEAnF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACjB,0BAAT,CACChD,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAAChkB,MAFN,CADD,EAKCgkB,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GA9EO,CAAR;AAgFAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACPtuC,QAAAA,GAAG,EAAE;AADE,OANT;AASC60B,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE;AAFG;AATjB,KADa,CAAd;AAgBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC5I,SAAT,CAAmB2E,IAAI,CAAC/yD,KAAxB,EAA+B+yD,IAAI,CAAChkB,MAApC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAzBO,CAAR;AA2BAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP1oC,QAAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT;AADC,OANT;AASCivB,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE,CAAC,MAAD,EAAS,MAAT;AAFG;AATjB,KADa,CAAd;AAiBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACP,iBAAT,CAA2B1D,IAAI,CAAC/yD,KAAhC,EAAuC+yD,IAAI,CAAChkB,MAA5C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAxBO,CAAR;AA0BAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3tC,QAAAA,IAAI,EAAE;AADC,OART;AAWCk0B,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADE;AAXjB,KADa,EAmBb;AACCvjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3tC,QAAAA,IAAI,EAAE,CACL;AAACX,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACwxD,YAAAA,CAAC,EAAE;AAAJ;AAAlB,SADK,EAEL;AAACnyD,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACwxD,YAAAA,CAAC,EAAE;AAAJ;AAAlB,SAFK;AADC,OART;AAcCt9B,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,EAAJ;AAAQkF,cAAAA,EAAE,EAAE;AAAZ;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFQ;AAGZY,UAAAA,EAAE,EAAE;AAAC/yD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAlB;AAHQ;AADE;AAdjB,KAnBa,CAAd;AA2CAF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACvuB,YAAT,CAAsBsqB,IAAI,CAAC/yD,KAA3B,EAAkC+yD,IAAI,CAAChkB,MAAvC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApDO,CAAR;AAsDAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE;AADH,OAFR;AAKCmwC,MAAAA,MAAM,EAAE,EALT;AAMCzZ,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE;AADM;AANjB,KADa,EAWb;AACCyQ,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ;AADH,OAFR;AAaC6uC,MAAAA,MAAM,EAAE,EAbT;AAcCzZ,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ;AADM;AAdjB,KAXa,CAAd;AAyCAlE,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACL,YAAT,CAAsB5D,IAAI,CAAC/yD,KAA3B,EAAkC+yD,IAAI,CAAChkB,MAAvC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlDO,CAAR;AAoDAU,EAAAA,QAAQ,CAAC,YAAD,EAAe,YAAY;AAClC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADH,OAFR;AAoBC6uC,MAAAA,MAAM,EAAE;AACPlwC,QAAAA,MAAM,EAAE,MADD;AAEPC,QAAAA,KAAK,EAAE;AAFA,OApBT;AAwBCw2B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADM;AAxBjB,KADa,EA4Cb;AACCmP,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADH,OAFR;AAoBC6uC,MAAAA,MAAM,EAAE;AACPlwC,QAAAA,MAAM,EAAE,KADD;AAEPC,QAAAA,KAAK,EAAE;AAFA,OApBT;AAwBCw2B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ,EAUR;AACC/3D,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SAVQ;AADM;AAxBjB,KA5Ca,CAAd;AA2FAwyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAAC9mB,UAAT,CAAoB6iB,IAAI,CAAC/yD,KAAzB,EAAgC+yD,IAAI,CAAChkB,MAArC,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApGO,CAAR;AAsGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE,EAHT;AAICzZ,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WADE;AAENW,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFE;AADD,OAFR;AAQC7jB,MAAAA,MAAM,EAAE,EART;AASCzZ,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB,WADE;AAEN6qD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB;AAFE;AADQ;AATjB,KAPa,CAAd;AAyBAgqD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACF,eAAT,CAAyB/D,IAAI,CAAC/yD,KAA9B,EAAqC+yD,IAAI,CAAChkB,MAA1C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlCO,CAAR;AAoCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAEN+uC,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFE;AAGNY,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAHE;AADD,OAFR;AASCuqB,MAAAA,MAAM,EAAE,EATT;AAUCzZ,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAENgvC,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAFE;AADQ;AAVjB,KADa,CAAd;AAoBAkuC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACCohC,MAAQ,CAACD,eAAT,CAAyBhE,IAAI,CAAC/yD,KAA9B,EAAqC+yD,IAAI,CAAChkB,MAA1C,CADD,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA7BO,CAAR;AA8BA,CApuCO,CAAR;;ACFAU,QAAQ,CAAC,yBAAD,EAA4B,YAAY;AAC/C,MAAMg9B,WAAW,GAAG,SAAdA,WAAc,CAAChzD,KAAD;AAAA,WAAWA,KAAK,CAACizD,GAAjB;AAAA,GAApB;;AAEAj9B,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM+hC,WAAW,GAAG,SAAdA,WAAc,CAACj0D,SAAD;AAAA,aAAgB;AACnCmvD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADH;AAMJ3xD,UAAAA,SAAS,EAATA;AANI;AAD8B,OAAhB;AAAA,KAApB;;AAWA0xB,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACt4C,SAAV,CAAoB2tD,WAApB,EAAiC+E,WAAW,CAAC,IAAD,CAA5C,CADD,EAEC;AAACC,QAAAA,CAAC,EAAE;AAAJ,OAFD;AAIA,KALC,CAAF;AAOAxiC,IAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,MAAAA,WAAM,CAACg/B,MAAP,CAAchX,eAAS,CAACt4C,SAAV,CAAoB2tD,WAApB,EAAiC+E,WAAW,CAAC,IAAD,CAA5C,CAAd;AACA,KAFC,CAAF;AAGA,GAtBO,CAAR;AAwBA/hC,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,4BADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADH;AAMJ/zD,UAAAA,UAAU,EAAE;AANR;AADC,OAFR;AAYC4zB,MAAAA,cAAc,EAAE;AAZjB,KADa,EAeb;AACCjmB,MAAAA,IAAI,EAAE,6BADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADH;AAMJ/zD,UAAAA,UAAU,EAAE;AANR;AADC,OAFR;AAYC4zB,MAAAA,cAAc,EAAE;AAZjB,KAfa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,wBADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE,EADH;AAEJvC,UAAAA,UAAU,EAAE,CAAC,IAAD;AAFR;AADC,OAFR;AAQC4zB,MAAAA,cAAc,EAAE;AARjB,KA7Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADH;AAMJ/zD,UAAAA,UAAU,EAAE,CAAC,IAAD;AANR;AADC,OAFR;AAYC4zB,MAAAA,cAAc,EAAE;AAZjB,KAvCa,EAqDb;AACCjmB,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADH;AAMJ/zD,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AANR;AADC,OAFR;AAYC4zB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD;AAZjB,KArDa,EAmEb;AACC3oD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADH;AAMJ/zD,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AANR;AADC,OAFR;AAYC4zB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAZjB,KAnEa,CAAd;AAmFAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACr4C,eAAV,CAA0B0tD,WAA1B,EAAuCD,IAAI,CAAC/yD,KAA5C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5FO,CAAR;AA8FAE,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMx1B,KAAK,GAAG;AAACizD,MAAAA,GAAG,EAAE;AAACnvD,QAAAA,SAAS,EAAE;AAAZ;AAAN,KAAd;AAEA6xB,IAAAA,WAAM,CAACw9B,WAAP,CAAmBxV,eAAS,CAACx4C,YAAV,CAAuB6tD,WAAvB,EAAoChzD,KAApC,CAAnB,EAA+D,GAA/D;AACA,GAJC,CAAF;AAMAw1B,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/B,QAAMx1B,KAAK,GAAG;AAACizD,MAAAA,GAAG,EAAE;AAACvxD,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAAN,KAAd;AAEAi0B,IAAAA,WAAM,CAACC,eAAP,CAAuB+nB,eAAS,CAACv4C,aAAV,CAAwB4tD,WAAxB,EAAqChzD,KAArC,CAAvB,EAAoE,CACnE,IADmE,EAEnE,IAFmE,CAApE;AAIA,GAPC,CAAF;AASAg2B,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AADH;AADC,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AADH;AADC,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADH;AADC,OAFR;AAWCngC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAXjB,KAnBa,CAAd;AAkCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACr5C,MAAV,CAAiB0uD,WAAjB,EAA8BD,IAAI,CAAC/yD,KAAnC,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AACxC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,gBADP;AAECrP,MAAAA,KAAK,EAAE,EAFR;AAGCs1B,MAAAA,cAAc,EAAE;AACfxrB,QAAAA,sBAAsB,EAAE,IADT;AAEfhH,QAAAA,kBAAkB,EAAE,IAFL;AAGf+G,QAAAA,mBAAmB,EAAE,IAHN;AAIf7H,QAAAA,aAAa,EAAE,IAJA;AAKf0H,QAAAA,cAAc,EAAE,IALD;AAMfzG,QAAAA,sBAAsB,EAAE,IANT;AAOfP,QAAAA,eAAe,EAAE,IAPF;AAQfE,QAAAA,gBAAgB,EAAE,IARH;AASfN,QAAAA,cAAc,EAAE,IATD;AAUfE,QAAAA,eAAe,EAAE,IAVF;AAWfmH,QAAAA,iBAAiB,EAAE,IAXJ;AAYfC,QAAAA,kBAAkB,EAAE,IAZL;AAafzH,QAAAA,cAAc,EAAE;AAbD;AAHjB,KADa,EAoBb;AACCkN,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN6D,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADF;AAENkF,QAAAA,KAAK,EAAE;AAAClF,UAAAA,SAAS,EAAE,UAAZ;AAAwBpC,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAApC,SAFD;AAGNuH,QAAAA,SAAS,EAAE;AAACnF,UAAAA,SAAS,EAAE;AAAZ,SAHL;AAINoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE,WAAZ;AAAyBpC,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAArC,SAJF;AAKNyH,QAAAA,OAAO,EAAE;AACRrF,UAAAA,SAAS,EAAE,YADH;AAERpC,UAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFJ,SALH;AASN0H,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE,eAAZ;AAA6BpC,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAzC,SATN;AAUN2H,QAAAA,cAAc,EAAE;AAACvF,UAAAA,SAAS,EAAE;AAAZ,SAVV;AAWNwF,QAAAA,iBAAiB,EAAE;AAACxF,UAAAA,SAAS,EAAE;AAAZ,SAXb;AAYNyF,QAAAA,QAAQ,EAAE;AAACC,UAAAA,IAAI,EAAE;AAAC1F,YAAAA,SAAS,EAAE;AAAZ;AAAP,SAZJ;AAaN2F,QAAAA,GAAG,EAAE;AAAChJ,UAAAA,GAAG,EAAE;AAAN;AAbC,OAFR;AAiBC60B,MAAAA,cAAc,EAAE;AACfxzB,QAAAA,oBAAoB,EAAE,SADP;AAEfgI,QAAAA,sBAAsB,EAAE,kBAFT;AAGfhH,QAAAA,kBAAkB,EAAE,eAHL;AAIf+G,QAAAA,mBAAmB,EAAE,CAAC,IAAD,EAAO,IAAP,CAJN;AAKf7H,QAAAA,aAAa,EAAE,UALA;AAMA0H,QAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP,CANhB;AAOfzG,QAAAA,sBAAsB,EAAE,mBAPT;AAQfP,QAAAA,eAAe,EAAE,YARF;AASfE,QAAAA,gBAAgB,EAAE,CAAC,KAAD,EAAQ,KAAR,CATH;AAUfN,QAAAA,cAAc,EAAE,WAVD;AAWfE,QAAAA,eAAe,EAAE,CAAC,IAAD,EAAO,IAAP,CAXF;AAYfmH,QAAAA,iBAAiB,EAAE,cAZJ;AAafC,QAAAA,kBAAkB,EAAE,IAbL;AAcfzH,QAAAA,cAAc,EAAE;AAdD;AAjBjB,KApBa,CAAd;AAwDAuwD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC/3C,gBAAV,CAA2BmtD,IAAI,CAAC/yD,KAAhC,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjEO,CAAR;AAmEAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AADH;AADC,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AADH;AADC,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADH;AADC,OAFR;AAWCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAXjB,KAnBa,CAAd;AAqCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACt5C,cAAV,CAAyB2uD,WAAzB,EAAsCD,IAAI,CAAC/yD,KAA3C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9CO,CAAR;AAgDAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE,EADC;AAENpvD,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAFF,OAFR;AAQCwxB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE;AAFL,SADC;AAKNiF,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AALF,OAFR;AAWCwxB,MAAAA,cAAc,EAAE;AAXjB,KAXa,EAwBb;AACCjmB,MAAAA,IAAI,EAAE,qBADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFL,SADC;AAaN8E,QAAAA,MAAM,EAAE;AAbF,OAFR;AAiBCyxB,MAAAA,cAAc,EAAE;AAjBjB,KAxBa,EA2Cb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFL,SADC;AAaN8E,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAbF,OAFR;AAmBCwxB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT,EAAiB;AAACv3D,QAAAA,GAAG,EAAE;AAAN,OAAjB,EAA8B,IAA9B;AAnBjB,KA3Ca,CAAd;AAiEA,QAAM3B,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC34C,oBAAV,CAA+BguD,WAA/B,EACCD,IAAI,CAAC/yD,KADN,EAEClB,KAFD,CADD,EAKCi0D,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GA/EO,CAAR;AAiFAU,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AACxC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE,EADH;AAEJrF,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFL;AADC,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC;AAAC70B,QAAAA,GAAG,EAAE;AAAN,OAAD,EAAc;AAACA,QAAAA,GAAG,EAAE;AAAN,OAAd,EAA2B;AAACA,QAAAA,GAAG,EAAE;AAAN,OAA3B,EAAwC,IAAxC;AAhBjB,KADa,EAmBb;AACC4O,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE;AAFL;AADC,OAFR;AAQC02B,MAAAA,cAAc,EAAE;AARjB,KAnBa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFL;AADC,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT,EAAiB;AAACv3D,QAAAA,GAAG,EAAE;AAAN,OAAjB,EAA8B,IAA9B;AAhBjB,KA7Ba,CAAd;AAgDA,QAAM5B,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACl4C,gBAAV,CAA2ButD,WAA3B,EACCD,IAAI,CAAC/yD,KADN,EAECnB,MAFD,EAGCC,KAHD,CADD,EAMCi0D,IAAI,CAACz9B,cANN;AAQA,OATC,CAAF;AAUA,KAXD;AAYA,GAhEO,CAAR;AAkEAU,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE,EADH;AAEJrF,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFL;AADC,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAhBjB,KADa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE;AAFL;AADC,OAFR;AAQC02B,MAAAA,cAAc,EAAE;AARjB,KAnBa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADH;AAEJp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFL;AADC,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAP,EAAe;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAf,EAAuB,IAAvB;AAhBjB,KA7Ba,CAAd;AAgDA,QAAMn5D,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACj4C,qBAAV,CAAgCstD,WAAhC,EACCD,IAAI,CAAC/yD,KADN,EAECnB,MAFD,EAGCC,KAHD,CADD,EAMCi0D,IAAI,CAACz9B,cANN;AAQA,OATC,CAAF;AAUA,KAXD;AAYA,GAhEO,CAAR;AAkEAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADH;AADC,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADH;AADC,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAEg+B;AARjB,KAXa,EAqBb;AACCjkD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADH;AADC,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AARjB,KArBa,CAAd;AAmCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACz3C,QAAV,CAAmB8sD,WAAnB,EAAgCD,IAAI,CAAC/yD,KAArC,EAA4C+yD,IAAI,CAACtyD,GAAjD,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5CO,CAAR;AA8CAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,IAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AARjB,KArBa,CAAd;AAoCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACv3C,iBAAV,CAA4B4sD,WAA5B,EACCD,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAAC1sD,IAFN,CADD,EAKC0sD,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GAhDO,CAAR;AAkDAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,IAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,EAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KArBa,EA+Bb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AADC,OAFR;AAKC5sD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CALP;AAMCivB,MAAAA,cAAc,EAAE;AANjB,KA/Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADH;AADC,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AARjB,KAvCa,CAAd;AAmDAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACp3C,SAAV,CAAoBysD,WAApB,EAAiCD,IAAI,CAAC/yD,KAAtC,EAA6C+yD,IAAI,CAAC1sD,IAAlD,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAb,aAAL;AAA2BmyD,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAA/B;AADH;AADC,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAb,aAAL;AAA2BmyD,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAA/B;AADH;AADC,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,CAAd;AAuBAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAACn3C,YAAV,CAAuBwsD,WAAvB,EAAoCD,IAAI,CAAC/yD,KAAzC,EAAgD+yD,IAAI,CAACtyD,GAArD,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZC,gBAAAA,UAAU,EAAE;AACX,4BAAQ;AADG;AADA;AADV;AADE;AADH;AADC,OAFR;AAeC2uB,MAAAA,cAAc,EAAE;AAfjB,KADa,EAkBb;AACCjmB,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZE,gBAAAA,KAAK,EAAE;AACN,4BAAQ;AADF;AADK;AADV;AADE;AADH;AADC,OAFR;AAeC0uB,MAAAA,cAAc,EAAE;AAfjB,KAlBa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AADC,OAFR;AAKC39B,MAAAA,cAAc,EAAE;AALjB,KAnCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAACl3C,wBAAV,CAAmCusD,WAAnC,EACCD,IAAI,CAAC/yD,KADN,EAEC,IAFD,CADD,EAKC+yD,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GAxDO,CAAR;AA0DAU,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZC,gBAAAA,UAAU,EAAE;AACXG,kBAAAA,MAAM,EAAE;AADG;AADA;AADV;AADE;AADH;AADC,OAFR;AAeCwuB,MAAAA,cAAc,EAAE;AAfjB,KADa,EAkBb;AACCjmB,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZE,gBAAAA,KAAK,EAAE;AACNE,kBAAAA,MAAM,EAAE;AADF;AADK;AADV;AADE;AADH;AADC,OAFR;AAeCwuB,MAAAA,cAAc,EAAE;AAfjB,KAlBa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AADC,OAFR;AAKC39B,MAAAA,cAAc,EAAE;AALjB,KAnCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAAC92C,wBAAV,CAAmCmsD,WAAnC,EACCD,IAAI,CAAC/yD,KADN,EAEC,IAFD,CADD,EAKC+yD,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GAxDO,CAAR;AA0DAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJnvD,UAAAA,SAAS,EAAE,IADP;AAEJkD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAAjB;AAFT;AADC,OAFR;AAQCj+B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJnvD,UAAAA,SAAS,EAAE,IADP;AAEJkD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAAjB;AAFT;AADC,OAFR;AAQCj+B,MAAAA,cAAc,EAAE;AARjB,KAXa,CAAd;AAuBAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAACz2C,eAAV,CAA0B8rD,WAA1B,EAAuCD,IAAI,CAAC/yD,KAA5C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AADT;AADC,OAFR;AAOCsuB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AADT;AADC,OAFR;AAOCsuB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAAjB;AADT;AADC,OAFR;AAOCj+B,MAAAA,cAAc,EAAE,CAAC,MAAD,EAAS,MAAT;AAPjB,KAnBa,CAAd;AA8BAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC52C,YAAV,CAAuBisD,WAAvB,EAAoCD,IAAI,CAAC/yD,KAAzC,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvCO,CAAR;AAyCAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AADT;AADC,OAFR;AAOCsuB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACktD,YAAAA,IAAI,EAAE;AAAP;AADT;AADC,OAFR;AAOC5+B,MAAAA,cAAc,EAAE;AAAC4+B,QAAAA,IAAI,EAAE;AAAP;AAPjB,KAVa,CAAd;AAqBAxB,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC12C,oBAAV,CAA+B+rD,WAA/B,EAA4CD,IAAI,CAAC/yD,KAAjD,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9BO,CAAR;AAgCAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAAjB;AADT;AADC,OAFR;AAOC9yD,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAAjB;AADT;AADC,OAFR;AAOC9yD,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAAjB;AADT;AADC,OAFR;AAOC9yD,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KArBa,CAAd;AAiCAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAACx2C,cAAV,CAAyB6rD,WAAzB,EAAsCD,IAAI,CAAC/yD,KAA3C,EAAkD+yD,IAAI,CAACtyD,GAAvD,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1CO,CAAR;AA4CAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADT;AADC,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADT;AADC,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADT;AADC,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KArBa,CAAd;AAiCAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAACt2C,kBAAV,CAA6B2rD,WAA7B,EACCD,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAACtyD,GAFN,CADD,EAKCsyD,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GA7CO,CAAR;AA+CAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AAACjsD,UAAAA,WAAW,EAAE;AAAd;AADC,OAFR;AAKCsuB,MAAAA,cAAc,EAAE;AALjB,KADa,EAQb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AAACjsD,UAAAA,WAAW,EAAE;AAAd;AADC,OAFR;AAKCsuB,MAAAA,cAAc,EAAE;AALjB,KARa,EAeb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJjsD,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aAAL;AAAmB8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAAvB;AADT;AADC,OAFR;AAOC60B,MAAAA,cAAc,EAAE,CAAC,KAAD,EAAQ,KAAR;AAPjB,KAfa,CAAd;AA0BAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACr2C,aAAV,CAAwB0rD,WAAxB,EAAqCD,IAAI,CAAC/yD,KAA1C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnCO,CAAR;AAqCAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJr0D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,MAAT;AAAiBC,YAAAA,KAAK,EAAE;AAAxB,WADQ,EAER;AAACD,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WAFQ,EAGR;AAACD,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WAHQ,EAIR;AAACD,YAAAA,MAAM,EAAE,MAAT;AAAiBC,YAAAA,KAAK,EAAE;AAAxB,WAJQ;AADL;AADC,OAFR;AAYCD,MAAAA,MAAM,EAAE,iBAZT;AAaCC,MAAAA,KAAK,EAAE,KAbR;AAcCw2B,MAAAA,cAAc,EAAE;AAdjB,KADa,EAiBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJr0D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,MAAT;AAAiBC,YAAAA,KAAK,EAAE;AAAxB,WADQ,EAER;AAACD,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WAFQ,EAGR;AAACD,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WAHQ,EAIR;AAACD,YAAAA,MAAM,EAAE,MAAT;AAAiBC,YAAAA,KAAK,EAAE;AAAxB,WAJQ;AADL;AADC,OAFR;AAYCD,MAAAA,MAAM,EAAE,KAZT;AAaCC,MAAAA,KAAK,EAAE,KAbR;AAcCw2B,MAAAA,cAAc,EAAE;AAACz2B,QAAAA,MAAM,EAAE,KAAT;AAAgBC,QAAAA,KAAK,EAAE;AAAvB;AAdjB,KAjBa,CAAd;AAmCA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACj/C,QAAV,CAAmBs0D,WAAnB,EACCD,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAACl0D,MAFN,EAGCk0D,IAAI,CAACj0D,KAHN,CADD,EAMCi0D,IAAI,CAACz9B,cANN;AAQA,OATC,CAAF;AAUA,KAXD;AAYA,GAhDO,CAAR;AAkDAE,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMx1B,KAAK,GAAG;AACbizD,MAAAA,GAAG,EAAE;AACJpvD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADJ;AAEJG,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE;AAAC8E,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAazE,UAAAA,EAAE,EAAE;AAACyE,YAAAA,CAAC,EAAE;AAAJ,WAAjB;AAAyBxE,UAAAA,EAAE,EAAE;AAACwE,YAAAA,CAAC,EAAE,CAAJ;AAAOvC,YAAAA,OAAO,EAAE;AAAhB;AAA7B,SAFH;AAGJ72D,QAAAA,OAAO,EAAE,CACR;AACC+C,UAAAA,cAAc,EAAE;AAACO,YAAAA,KAAK,EAAE;AAAR,WADjB;AAECrD,UAAAA,MAAM,EAAE;AAACuD,YAAAA,QAAQ,EAAE;AAAX,WAFT;AAGCtD,UAAAA,KAAK,EAAE,KAHR;AAIC6F,UAAAA,KAAK,EAAE,CAJR;AAKC5F,UAAAA,KAAK,EAAE,CACN,OADM,EAEN,QAFM,EAGN,OAHM,EAIN,QAJM,EAKN,OALM,EAMN,OANM,EAON,SAPM;AALR,SADQ;AAHL;AADQ,KAAd;AAuBA,QAAM4C,cAAc,GAAG;AAACO,MAAAA,KAAK,EAAE;AAAR,KAAvB;AACA,QAAMrD,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAM/F,MAAM,GAAG,CAAf;AAEA,QAAMw1B,cAAc,GAAG,CAAC;AAAC70B,MAAAA,GAAG,EAAE;AAAN,KAAD,EAAkB;AAACA,MAAAA,GAAG,EAAE;AAAN,KAAlB,CAAvB;AAEAk1B,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACh4C,UAAV,CAAqBqtD,WAArB,EACChzD,KADD,EAEC2B,cAFD,EAGC9C,MAHD,EAICC,KAJD,EAKC+G,KALD,EAMC/F,MAND,CADD,EASCw1B,cATD;AAWA,GA3CC,CAAF;AA6CAE,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAAC14C,UAAV,CAAqB,UAACjF,KAAD;AAAA,aAAWA,KAAK,CAACizD,GAAjB;AAAA,KAArB,EAA2C;AAC1CA,MAAAA,GAAG,EAAE;AAACr0D,QAAAA,OAAO,EAAE;AAAV;AADqC,KAA3C,CADD,EAIC,SAJD;AAMA,GAPC,CAAF;AASAo3B,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAMp3B,OAAO,GAAG,CACf;AAACC,MAAAA,MAAM,EAAE,MAAT;AAAiBC,MAAAA,KAAK,EAAE;AAAxB,KADe,EAEf;AAACD,MAAAA,MAAM,EAAE,KAAT;AAAgBC,MAAAA,KAAK,EAAE,MAAvB;AAA+BoB,MAAAA,SAAS,EAAE;AAA1C,KAFe,EAGf;AAACrB,MAAAA,MAAM,EAAE,KAAT;AAAgBC,MAAAA,KAAK,EAAE;AAAvB,KAHe,EAIf;AAACD,MAAAA,MAAM,EAAE,MAAT;AAAiBC,MAAAA,KAAK,EAAE;AAAxB,KAJe,CAAhB;AAMA,QAAMD,MAAM,GAAG,KAAf;AACA,QAAMmB,KAAK,GAAG;AAACizD,MAAAA,GAAG,EAAE;AAACr0D,QAAAA,OAAO,EAAPA;AAAD;AAAN,KAAd;AAEA42B,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC31C,iBAAV,CAA4BgrD,WAA5B,EAAyChzD,KAAzC,EAAgDnB,MAAhD,EAAwD,KAAxD,CADD,EAEC,IAFD;AAIA,KALC,CAAF;AAOA22B,IAAAA,EAAE,CAAC,WAAD,EAAc,YAAY;AAC3BG,MAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC31C,iBAAV,CAA4BgrD,WAA5B,EAAyChzD,KAAzC,EAAgDnB,MAAhD,EAAwD,MAAxD,CADD,EAEC,YAFD;AAIA,KALC,CAAF;AAMA,GAvBO,CAAR;AAyBA22B,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMx1B,KAAK,GAAG;AACbizD,MAAAA,GAAG,EAAE;AACJr0D,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CACN,OADM,EAEN,QAFM,EAGN,OAHM,EAIN,QAJM,EAKN,OALM,EAMN,OANM,EAON,SAPM;AAJR,SADQ;AADL;AADQ,KAAd;AAoBA,QAAMF,MAAM,GAAG,KAAf;AACA,QAAMC,KAAK,GAAG,KAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAM/F,MAAM,GAAG,CAAf;AAEA,QAAMw1B,cAAc,GAAG;AAAC,SAAG,QAAJ;AAAc,SAAG;AAAjB,KAAvB;AAEAK,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC11C,YAAV,CAAuB+qD,WAAvB,EACChzD,KADD,EAECnB,MAFD,EAGCC,KAHD,EAIC+G,KAJD,EAKC/F,MALD,CADD,EAQCw1B,cARD;AAUA,GAtCC,CAAF,CA7pC+C;AAssC/C;;AAEAE,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/B,QAAMx1B,KAAK,GAAG;AACbizD,MAAAA,GAAG,EAAE;AACJr0D,QAAAA,OAAO,EAAE,CACR;AAACC,UAAAA,MAAM,EAAE,MAAT;AAAiBC,UAAAA,KAAK,EAAE;AAAxB,SADQ,EAER;AAACD,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE;AAAvB,SAFQ,EAGR;AAACD,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8B6F,UAAAA,KAAK,EAAE;AAArC,SAHQ,EAIR;AAAC9F,UAAAA,MAAM,EAAE,MAAT;AAAiBC,UAAAA,KAAK,EAAE;AAAxB,SAJQ;AADL;AADQ,KAAd;AAUA,QAAMD,MAAM,GAAG,KAAf;AACA,QAAMC,KAAK,GAAG,KAAd;AAEA62B,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,eAAS,CAACr1C,aAAV,CAAwB0qD,WAAxB,EAAqChzD,KAArC,EAA4CnB,MAA5C,EAAoDC,KAApD,CADD,EAEC,CAFD;AAIA,GAlBC,CAAF;AAoBA02B,EAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AAC1C,QAAMx1B,KAAK,GAAG;AACbizD,MAAAA,GAAG,EAAE;AACJr0D,QAAAA,OAAO,EAAE,CACR;AAACC,UAAAA,MAAM,EAAE,MAAT;AAAiBC,UAAAA,KAAK,EAAE;AAAxB,SADQ,EAER;AAACD,UAAAA,MAAM,EAAE;AAACu1D,YAAAA,QAAQ,EAAE;AAAX,WAAT;AAA6Bt1D,UAAAA,KAAK,EAAE;AAApC,SAFQ,EAGR;AAACD,UAAAA,MAAM,EAAE;AAACu1D,YAAAA,QAAQ,EAAE;AAAX,WAAT;AAAgCt1D,UAAAA,KAAK,EAAE,KAAvC;AAA8C6F,UAAAA,KAAK,EAAE;AAArD,SAHQ,EAIR;AAAC9F,UAAAA,MAAM,EAAE;AAACu1D,YAAAA,QAAQ,EAAE;AAAX,WAAT;AAA6Bt1D,UAAAA,KAAK,EAAE;AAApC,SAJQ;AADL;AADQ,KAAd;AAUA,QAAMkC,IAAI,GAAG;AACZI,MAAAA,IAAI,EAAE;AACLgzD,QAAAA,QAAQ,EAAE;AADL;AADM,KAAb;AAMA,QAAM9+B,cAAc,GAAG,CACtB;AAACz2B,MAAAA,MAAM,EAAE;AAACu1D,QAAAA,QAAQ,EAAE;AAAX,OAAT;AAA6Bt1D,MAAAA,KAAK,EAAE;AAApC,KADsB,EAEtB;AAACD,MAAAA,MAAM,EAAE;AAACu1D,QAAAA,QAAQ,EAAE;AAAX,OAAT;AAA6Bt1D,MAAAA,KAAK,EAAE;AAApC,KAFsB,CAAvB;AAKA62B,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACp1C,wBAAV,CAAmCyqD,WAAnC,EAAgDhzD,KAAhD,EAAuDgB,IAAvD,CADD,EAECs0B,cAFD;AAIA,GA1BC,CAAF;AA4BAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAEChJ,MAAAA,IAAI,EAAE,EAFP;AAGCrG,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACN,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENW,YAAAA,EAAE,EAAE;AAACX,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNY,YAAAA,EAAE,EAAE;AAACZ,cAAAA,CAAC,EAAE,GAAJ;AAASlqD,cAAAA,QAAQ,EAAE;AAAnB;AAHE;AADH;AADC,OAHR;AAYC4sB,MAAAA,cAAc,EAAE;AAZjB,KADa,EAeb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAEChJ,MAAAA,IAAI,EAAE,IAFP;AAGCrG,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACN,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENW,YAAAA,EAAE,EAAE;AAACX,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNY,YAAAA,EAAE,EAAE;AAACZ,cAAAA,CAAC,EAAE,GAAJ;AAASlqD,cAAAA,QAAQ,EAAE;AAAnB;AAHE;AADH;AADC,OAHR;AAYC4sB,MAAAA,cAAc,EAAE;AAZjB,KAfa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,gBADP;AAEChJ,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAFP;AAGCrG,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AADH;AADC,OAHR;AAQCqxB,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP;AARjB,KA7Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAEChJ,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAFP;AAGCrG,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACN,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENW,YAAAA,EAAE,EAAE;AAACX,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNY,YAAAA,EAAE,EAAE;AAACZ,cAAAA,CAAC,EAAE,GAAJ;AAASlqD,cAAAA,QAAQ,EAAE;AAAnB;AAHE;AADH;AADC,OAHR;AAYC4sB,MAAAA,cAAc,EAAE;AAZjB,KAvCa,EAqDb;AACCjmB,MAAAA,IAAI,EAAE,yBADP;AAEChJ,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAFP;AAGCrG,MAAAA,KAAK,EAAE;AACNizD,QAAAA,GAAG,EAAE;AACJhvD,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACN,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENW,YAAAA,EAAE,EAAE;AAACX,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNY,YAAAA,EAAE,EAAE;AAACZ,cAAAA,CAAC,EAAE,GAAJ;AAASlqD,cAAAA,QAAQ,EAAE;AAAnB;AAHE;AADH;AADC,OAHR;AAYC4sB,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP;AAZjB,KArDa,CAAd;AAqEAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACl1C,aAAV,CAAwBuqD,WAAxB,EAAqCD,IAAI,CAAC/yD,KAA1C,EAAiD+yD,IAAI,CAAC1sD,IAAtD,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GA5EO,CAAR;AA8EAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAEC2jD,MAAAA,WAAW,EAAE,qBAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAFd;AAGCjzD,MAAAA,KAAK,EAAE;AAACizD,QAAAA,GAAG,EAAE;AAAN,OAHR;AAIC39B,MAAAA,cAAc,EAAE;AAJjB,KADa,EAOb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAEC2jD,MAAAA,WAAW,EAAE,qBAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAFd;AAGCjzD,MAAAA,KAAK,EAAE;AAACizD,QAAAA,GAAG,EAAE;AAACnvD,UAAAA,SAAS,EAAE;AAAZ;AAAN,OAHR;AAICwxB,MAAAA,cAAc,EAAE;AAACxxB,QAAAA,SAAS,EAAE;AAAZ;AAJjB,KAPa,EAab;AACCuL,MAAAA,IAAI,EAAE,aADP;AAEC2jD,MAAAA,WAAW,EAAE,qBAAChzD,KAAD;AAAA,eAAWA,KAAK,CAACizD,GAAjB;AAAA,OAFd;AAGCjzD,MAAAA,KAAK,EAAE;AAACizD,QAAAA,GAAG,EAAE;AAACvxD,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAAN,OAHR;AAIC4zB,MAAAA,cAAc,EAAE;AAAC5zB,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAJjB,KAba,CAAd;AAqBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACpyC,cAAV,CAAyBwnD,IAAI,CAACC,WAA9B,EAA2CD,IAAI,CAAC/yD,KAAhD,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9BO,CAAR;AAgCAE,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjC,QAAMx1B,KAAK,GAAG;AACb6D,MAAAA,MAAM,EAAE;AAACC,QAAAA,SAAS,EAAE;AAAZ,OADK;AAEbmvD,MAAAA,GAAG,EAAE;AACJrqD,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE,CACR,CACC;AACC+C,YAAAA,cAAc,EAAE;AAACO,cAAAA,KAAK,EAAE;AAAR,aADjB;AAECrD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aAFT;AAGCtD,YAAAA,KAAK,EAAE,KAHR;AAIC+G,YAAAA,KAAK,EAAE,CAJR;AAKC/F,YAAAA,MAAM,EAAE;AALT,WADD,CADQ;AADH;AADH;AAFQ,KAAd;AAkBA,QAAMjB,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA,QAAMw2B,cAAc,GAAG;AACtBz2B,MAAAA,MAAM,EAAE;AACPuD,QAAAA,QAAQ,EAAE;AADH,OADc;AAItBtD,MAAAA,KAAK,EAAE,KAJe;AAKtB+L,MAAAA,IAAI,EAAE,CAAC;AAAChF,QAAAA,KAAK,EAAE,CAAR;AAAW/F,QAAAA,MAAM,EAAE;AAAnB,OAAD;AALgB,KAAvB;AAQA61B,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC5yC,eAAV,CAA0BioD,WAA1B,EAAuChzD,KAAvC,EAA8CnB,MAA9C,EAAsDC,KAAtD,CADD,EAECw2B,cAFD;AAIA,GAlCC,CAAF;AAoCAE,EAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAY;AACnC,QAAMx1B,KAAK,GAAG;AACb6D,MAAAA,MAAM,EAAE;AAACC,QAAAA,SAAS,EAAE;AAAZ,OADK;AAEbmvD,MAAAA,GAAG,EAAE;AACJrqD,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE,CACR,CACC;AACC+C,YAAAA,cAAc,EAAE;AAACO,cAAAA,KAAK,EAAE;AAAR,aADjB;AAECrD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aAFT;AAGCtD,YAAAA,KAAK,EAAE,KAHR;AAIC+G,YAAAA,KAAK,EAAE,CAJR;AAKC/F,YAAAA,MAAM,EAAE;AALT,WADD,CADQ;AADH;AADH;AAFQ,KAAd;AAmBA,QAAMw1B,cAAc,GAAG,CACtB;AACCz2B,MAAAA,MAAM,EAAE;AACPuD,QAAAA,QAAQ,EAAE;AADH,OADT;AAICtD,MAAAA,KAAK,EAAE,KAJR;AAKC+L,MAAAA,IAAI,EAAE,CAAC;AAAChF,QAAAA,KAAK,EAAE,CAAR;AAAW/F,QAAAA,MAAM,EAAE;AAAnB,OAAD;AALP,KADsB,CAAvB;AAUA61B,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACtzC,iBAAV,CAA4B2oD,WAA5B,EAAyChzD,KAAzC,CADD,EAECs1B,cAFD;AAIA,GAlCC,CAAF;AAoCAE,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7B,QAAMx1B,KAAK,GAAG;AACbizD,MAAAA,GAAG,EAAE;AACJrqD,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAnB;AADA;AADH;AADQ,KAAd;AAOA,QAAMivB,cAAc,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAvB;AAEAK,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACh1C,WAAV,CAAsBqqD,WAAtB,EAAmChzD,KAAnC,CADD,EAECs1B,cAFD;AAIA,GAdC,CAAF;AAgBAE,EAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC7C,QAAMx1B,KAAK,GAAG;AACb6D,MAAAA,MAAM,EAAE;AAACC,QAAAA,SAAS,EAAE;AAAZ,OADK;AAEbmvD,MAAAA,GAAG,EAAE;AACJrqD,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE,CACR,CACC;AACC+C,YAAAA,cAAc,EAAE;AAACS,cAAAA,QAAQ,EAAE;AAAX,aADjB;AAECvD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aAFT;AAGCtD,YAAAA,KAAK,EAAE,KAHR;AAIC+G,YAAAA,KAAK,EAAE,CAJR;AAKC/F,YAAAA,MAAM,EAAE;AALT,WADD,CADQ;AADH;AADH;AAFQ,KAAd;AAkBA,QAAMjB,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA,QAAMw2B,cAAc,GAAG,CACtB;AACCz2B,MAAAA,MAAM,EAAE;AACPuD,QAAAA,QAAQ,EAAE;AADH,OADT;AAICtD,MAAAA,KAAK,EAAE,KAJR;AAKC+L,MAAAA,IAAI,EAAE,CACL;AACC/K,QAAAA,MAAM,EAAE,CADT;AAEC+F,QAAAA,KAAK,EAAE;AAFR,OADK;AALP,KADsB,CAAvB;AAeA8vB,IAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAACvyC,2BAAV,CAAsC4nD,WAAtC,EACChzD,KADD,EAECnB,MAFD,EAGCC,KAHD,CADD,EAMCw2B,cAND;AAQA,GA7CC,CAAF;AA+CAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECxD,MAAAA,SAAS,EAAE,EAFZ;AAGCypB,MAAAA,cAAc,EAAE;AAHjB,KADa,EAMb;AACCjmB,MAAAA,IAAI,EAAE,QADP;AAECxD,MAAAA,SAAS,EAAE,CACV;AACChG,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADU,CAFZ;AAQCw1B,MAAAA,cAAc,EAAE,CACf;AACCzvB,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADe;AARjB,KANa,EAqBb;AACCuP,MAAAA,IAAI,EAAE,0BADP;AAECxD,MAAAA,SAAS,EAAE,CACV;AACChG,QAAAA,KAAK,EAAE,EADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADU,EAKV;AACC+F,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OALU,EASV;AACC+F,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OATU,CAFZ;AAgBCw1B,MAAAA,cAAc,EAAE,CACf;AACCzvB,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADe,EAKf;AACC+F,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OALe,EASf;AACC+F,QAAAA,KAAK,EAAE,EADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OATe;AAhBjB,KArBa,EAoDb;AACCuP,MAAAA,IAAI,EAAE,sBADP;AAECxD,MAAAA,SAAS,EAAE,CACV;AACChG,QAAAA,KAAK,EAAE,EADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADU,EAKV;AACC+F,QAAAA,KAAK,EAAE,EADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OALU,EASV;AACC+F,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OATU,CAFZ;AAgBCw1B,MAAAA,cAAc,EAAE,CACf;AACCzvB,QAAAA,KAAK,EAAE,CADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADe;AAhBjB,KApDa,EA2Eb;AACCuP,MAAAA,IAAI,EAAE,OADP;AAECxD,MAAAA,SAAS,EAAE,CACV;AACChG,QAAAA,KAAK,EAAE,EADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OADU,EAKV;AACCuP,QAAAA,IAAI,EAAE;AADP,OALU,EAQV,IARU,EASV;AACCxJ,QAAAA,KAAK,EAAE,EADR;AAEC/F,QAAAA,MAAM,EAAE;AAFT,OATU,EAaV;AAAC+F,QAAAA,KAAK,EAAE,EAAR;AAAY/F,QAAAA,MAAM,EAAE;AAApB,OAbU,CAFZ;AAiBCw1B,MAAAA,cAAc,EAAE,CACf;AAACzvB,QAAAA,KAAK,EAAE,EAAR;AAAY/F,QAAAA,MAAM,EAAE;AAApB,OADe,EAEf;AAAC+F,QAAAA,KAAK,EAAE,EAAR;AAAY/F,QAAAA,MAAM,EAAE;AAApB,OAFe;AAjBjB,KA3Ea,CAAd;AAmGA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,eAAS,CAAC7yC,eAAV,CAA0BioD,IAAI,CAAClnD,SAA/B,CADD,EAECknD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5GO,CAAR;AA6GA,CA1lDO,CAAR;;ACAAU,QAAQ,CAAC,+BAAD,EAAkC,YAAW;AACjD,MAAMh2B,KAAK,GAAG;AACVyJ,IAAAA,GAAG,EAAE;AACDhJ,MAAAA,GAAG,EAAE;AADJ,KADK;AAIVoD,IAAAA,MAAM,EAAE;AACJC,MAAAA,SAAS,EAAE;AADP,KAJE;AAOVoF,IAAAA,MAAM,EAAE;AACJpF,MAAAA,SAAS,EAAE,IADP;AAEJpC,MAAAA,UAAU,EAAE,CAAC,QAAD,EAAW,QAAX;AAFR,KAPE;AAWVuH,IAAAA,SAAS,EAAE,EAXD;AAYVI,IAAAA,cAAc,EAAE;AACZvF,MAAAA,SAAS,EAAE;AADC;AAZN,GAAd;AAiBA0xB,EAAAA,EAAE,CAAC,2DAAD,EAA8D,YAAM;AAClE,QAAM7zB,cAAc,GAAG;AACnBO,MAAAA,KAAK,EAAE,IADY;AAEnBG,MAAAA,KAAK,EAAE,IAFY;AAGnB4H,MAAAA,QAAQ,EAAE,IAHS;AAInBjH,MAAAA,aAAa,EAAE;AAJI,KAAvB;AAOA,QAAMsyB,cAAc,GAAG;AACnBlzB,MAAAA,QAAQ,EAAE,QADS;AAEnBoB,MAAAA,SAAS,EAAE,CAAC,QAAD,EAAW,QAAX,CAFQ;AAGnBN,MAAAA,gBAAgB,EAAE;AAHC,KAAvB;AAKA,QAAMyzB,MAAM,GAAGzpB,eAAe,CAAClD,6BAAhB,CAA8ChK,KAA9C,EAAqD2B,cAArD,CAAf;AACAg0B,IAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,GAfC,CAAF;AAiBAE,EAAAA,EAAE,CAAC,8BAAD,EAAiC,YAAM;AACrC,QAAM7zB,cAAc,GAAG;AACnBO,MAAAA,KAAK,EAAE,IADY;AAEnBiI,MAAAA,gBAAgB,EAAE;AAFC,KAAvB;AAKA,QAAMmrB,cAAc,GAAG;AACnBlzB,MAAAA,QAAQ,EAAE;AADS,KAAvB;AAGA,QAAMu0B,MAAM,GAAGzpB,eAAe,CAAClD,6BAAhB,CAA8ChK,KAA9C,EAAqD2B,cAArD,CAAf;AACAg0B,IAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,GAXC,CAAF;AAaAE,EAAAA,EAAE,CAAC,yCAAD,EAA4C,YAAM;AAChD,QAAM7zB,cAAc,GAAG;AACnBwI,MAAAA,gBAAgB,EAAE;AADC,KAAvB;AAIA,QAAMwsB,MAAM,GAAGzpB,eAAe,CAAClD,6BAAhB,CAA8ChK,KAA9C,EAAqD2B,cAArD,CAAf;AACAg0B,IAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,GAPC,CAAF;AASAnB,EAAAA,EAAE,CAAC,gDAAD,EAAmD,YAAM;AACvD,QAAM7zB,cAAc,GAAG,IAAvB;AACA,QAAMg1B,MAAM,GAAGzpB,eAAe,CAAClD,6BAAhB,CAA8ChK,KAA9C,EAAqD2B,cAArD,CAAf;AACAg0B,IAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,GAJC,CAAF;AAKH,CA9DO,CAAR;;ACEAX,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,MAAIs8B,iBAAiB,GAAG,EAAxB;AAEA,OAAKD,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;AAKA98B,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrBG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAACiB,GAAR,CAAY;AAACkjB,MAAAA,CAAC,EAAE;AAAJ,KAAZ,CAAvB,EAA8C;AAC7CxkD,MAAAA,IAAI,EAAE,2BADuC;AAE7CQ,MAAAA,aAAa,EAAE;AAACgkD,QAAAA,CAAC,EAAE;AAAJ;AAF8B,KAA9C;AAIA,GALC,CAAF;AAOAp9B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxBG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAAC7kB,MAAR,CAAe,IAAf,CAAvB,EAA6C;AAC5Cxb,MAAAA,IAAI,EAAE,aADsC;AAE5C3N,MAAAA,GAAG,EAAE;AAFuC,KAA7C;AAIA,GALC,CAAF;AAOA+0B,EAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AAC1CG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAACyP,wBAAR,CAAiC,QAAjC,CAAvB,EAAmE;AAClE9vC,MAAAA,IAAI,EAAE,gCAD4D;AAElEtH,MAAAA,MAAM,EAAE;AAF0D,KAAnE;AAIA,GALC,CAAF;AAOA0uB,EAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AAC1CG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAACyP,wBAAR,CAAiC,QAAjC,CAAvB,EAAmE;AAClE9vC,MAAAA,IAAI,EAAE,gCAD4D;AAElEtH,MAAAA,MAAM,EAAE;AAF0D,KAAnE;AAIA,GALC,CAAF;AAOA0uB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAAC0P,UAAR,CAAmB,kBAAnB,CAAvB,EAA+D;AAC9D/vC,MAAAA,IAAI,EAAE,kBADwD;AAE9DK,MAAAA,GAAG,EAAE;AAFyD,KAA/D;AAIA,GALC,CAAF;AAOA+mB,EAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACvCG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAAC2P,qBAAR,CAA8B,KAA9B,EAAqC,KAArC,CAAvB,EAAoE;AACnEhwC,MAAAA,IAAI,EAAE,6BAD6D;AAEnEoJ,MAAAA,IAAI,EAAE,KAF6D;AAGnEtW,MAAAA,KAAK,EAAE;AAH4D,KAApE;AAKA,GANC,CAAF;AAQAs0B,EAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAY;AACnC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB;AADkB,OAAP;AAAA,KAAjB;;AASA,QAAMiB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,oEADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AADY,SAAf,CADyB;AAI/BgoC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACw8C,UAAAA,cAAc,EAAE,CAAC;AAACn9C,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAACA,cAAAA,IAAI,EAAE;AAAC62D,gBAAAA,EAAE,EAAE;AAAL;AAAP;AAAlB,WAAD;AAAjB,SADM;AAEZhtB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACR0S,UAAAA,cAAc,EAAE;AADR;AAHG,OAAb;AAQA,aAAOpR,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KArCO,CAAR;AAuCA,WAAO0H,SAAO,CACZiP,iBADK,GACe9V,QADf,EACyBC,QADzB,EAELb,IAFK,CAEA,YAAM;AACXrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,2BADP;AAECQ,QAAAA,aAAa,EAAE;AAACqpD,UAAAA,EAAE,EAAE;AAAL;AAFhB,OADyC,CAA1C;AAMA,KATK,CAAP;AAUA,GAvEC,CAAF;AAwEA,CA3HO,CAAR;;ACHA,IAAMC,aAAa,GAAG;AACrBz3D,EAAAA,GAAG,EAAE;AADgB,CAAtB;AAIA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAMmpB,MAAM,GAAG,SAATA,MAAS,CAAC5pB,KAAD,EAAQ+uC,MAAR,EAAmB;AACjC,2CACI/uC,KADJ;AACWS,IAAAA,GAAG,EAAEsuC,MAAM,CAACtuC;AADvB;AAGA,CAJD;;AAMA,IAAM09C,UAAU,GAAG,SAAbA,UAAa,CAACn+C,KAAD,EAAQ+uC,MAAR,EAAmB;AACrC,2CACI/uC,KADJ;AACWm4D,IAAAA,OAAO,EAAEppB,MAAM,CAACtgC;AAD3B;AAGA,CAJD;;AAMA,IAAM2vC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACp+C,KAAD,EAAQ+uC,MAAR,EAAmB;AAChD,MAAIv3B,IAAI,GAAGu3B,MAAM,CAACv3B,IAAP,CAAYyO,KAAZ,CAAkB,GAAlB,CAAX;AACA,2CAAWjmB,KAAX;AAAkBsX,IAAAA,kBAAkB,EAAE8gD,SAAS,CAACp4D,KAAK,CAACsX,kBAAP,EAA2BE,IAA3B,EAAiCu3B,MAAM,CAAC7tC,KAAxC;AAA/C;AACA,CAHD;;AAKA,IAAMg9C,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACl+C,KAAD,EAAQ+uC,MAAR,EAAmB;AACnD,2CAAW/uC,KAAX;AAAkBsX,IAAAA,kBAAkB,EAAEtX,KAAK,CAACsX,kBAAN,qCAA+BtX,KAAK,CAACsX,kBAArC,GAA4Dy3B,MAAM,CAACjoC,MAAnE,IAA6EioC,MAAM,CAACjoC;AAA1H;AACA,CAFD;;AAIA,SAASsxD,SAAT,CAAmBp4D,KAAnB,EAA0BwX,IAA1B,EAAgCtW,KAAhC,EAAuC;AACtC,MAAIm3D,aAAa,sBAAO7gD,IAAP,CAAjB;;AACA,MAAI8gD,UAAU,GAAGD,aAAa,CAACE,KAAd,EAAjB;;AACA,MAAIF,aAAa,CAACv4D,MAAlB,EAA0B;AACzB,6CAAWE,KAAX,2BAAmBs4D,UAAnB,EAAgCF,SAAS,CAACp4D,KAAK,CAACs4D,UAAD,CAAN,EAAoBD,aAApB,EAAmCn3D,KAAnC,CAAzC;AACA,GAFD,MAEO;AACN,6CAAWlB,KAAX,2BAAmBs4D,UAAnB,EAAgCp3D,KAAhC;AACA;AACD;;AAED,IAAMs3D,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACx4D,KAAD,EAAQ+uC,MAAR,EAAmB;AAC/C,2CAAW/uC,KAAX;AAAkB4O,IAAAA,aAAa,EAAEmgC,MAAM,CAACngC;AAAxC;AACA,CAFD;;AAIA,eAAe,YAAmC;AAAA,MAAlC5O,KAAkC,uEAA1Bk4D,aAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAAC5W,GAAZ,CAAgBE,YAArB;AACC,aAAOimB,UAAU,CAACn+C,KAAD,EAAQ+uC,MAAR,CAAjB;;AACD,SAAKH,WAAW,CAAC5W,GAAZ,CAAgBC,OAArB;AACC,aAAOrO,MAAM,CAAC5pB,KAAD,EAAQ+uC,MAAR,CAAb;;AACD,SAAKH,WAAW,CAAC5W,GAAZ,CAAgBG,uBAArB;AACC,aAAOimB,qBAAqB,CAACp+C,KAAD,EAAQ+uC,MAAR,CAA5B;;AACD,SAAKH,WAAW,CAAC5W,GAAZ,CAAgBI,0BAArB;AACC,aAAO8lB,wBAAwB,CAACl+C,KAAD,EAAQ+uC,MAAR,CAA/B;;AACD,SAAKH,WAAW,CAAC5W,GAAZ,CAAgBK,qBAArB;AACC,aAAOmgC,oBAAoB,CAACx4D,KAAD,EAAQ+uC,MAAR,CAA3B;;AACD;AACC,aAAO/uC,KAAP;AAZF;AAcA,CAfD;;AC5CAg2B,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1CR,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,OAAO,CAAC,IAAD,EAAO;AACbrqD,MAAAA,IAAI,EAAE,kBADO;AAEbK,MAAAA,GAAG,EAAE;AAFQ,KAAP,CADR,EAKC;AAAC0pD,MAAAA,OAAO,EAAE;AAAV,KALD;AAOA,GARC,CAAF;AAUA3iC,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,OAAO,CAAC,IAAD,EAAO;AACbrqD,MAAAA,IAAI,EAAE,aADO;AAEb3N,MAAAA,GAAG,EAAE;AAFQ,KAAP,CADR,EAKC;AAACA,MAAAA,GAAG,EAAE;AAAN,KALD;AAOA,GARC,CAAF;AAUA+0B,EAAAA,EAAE,CAAC,yBAAD,EAA4B,YAAY;AACzCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,OAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE,6BADP;AAECoJ,MAAAA,IAAI,EAAE,KAFP;AAGCtW,MAAAA,KAAK,EAAE;AAHR,KAFM,CADR,EASC;AAACoW,MAAAA,kBAAkB,EAAE;AAACohD,QAAAA,GAAG,EAAE;AAAN;AAArB,KATD;AAWA,GAZC,CAAF;AAcAljC,EAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAY;AAC5CG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,OAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE,gCADP;AAECtH,MAAAA,MAAM,EAAE;AAAC8rD,QAAAA,CAAC,EAAE;AAAJ;AAFT,KAFM,CADR,EAQC;AAACt7C,MAAAA,kBAAkB,EAAE;AAACs7C,QAAAA,CAAC,EAAE;AAAJ;AAArB,KARD;AAUA,GAXC,CAAF;AAaAp9B,EAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACvCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,OAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE,2BADP;AAECQ,MAAAA,aAAa,EAAE;AAACgkD,QAAAA,CAAC,EAAE;AAAJ;AAFhB,KAFM,CADR,EAQC;AAAChkD,MAAAA,aAAa,EAAE;AAACgkD,QAAAA,CAAC,EAAE;AAAJ;AAAhB,KARD;AAUA,GAXC,CAAF;AAaAp9B,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,OAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAxEO,CAAR;;ACAA4nB,QAAQ,CAAC,qBAAD,EAAwB,YAAY;AAC3CR,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxBG,IAAAA,WAAM,CAACw9B,WAAP,CAAmB,IAAnB,EAAyBxV,WAAS,CAACxmC,MAAV,CAAiB;AAAC1N,MAAAA,GAAG,EAAE;AAAChJ,QAAAA,GAAG,EAAE;AAAN;AAAN,KAAjB,CAAzB;AACA,GAFC,CAAF;AAIA+0B,EAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AAClCG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACpmC,gBAAV,CAA2B;AAAC9N,MAAAA,GAAG,EAAE;AAACmF,QAAAA,aAAa,EAAE;AAACgkD,UAAAA,CAAC,EAAE;AAAJ;AAAhB;AAAN,KAA3B,EAA6D,GAA7D,CADD,EAEC,GAFD;AAIA,GALC,CAAF;AAOAp9B,EAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AAC1CG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACvmC,wBAAV,CAAmC;AAClC3N,MAAAA,GAAG,EAAE;AAACmF,QAAAA,aAAa,EAAE;AAACgkD,UAAAA,CAAC,EAAE;AAAJ;AAAhB;AAD6B,KAAnC,CADD,EAIC;AAACA,MAAAA,CAAC,EAAE;AAAJ,KAJD;AAMA,GAPC,CAAF;AASAp9B,EAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACvCG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAClmC,qBAAV,CACC;AAAChO,MAAAA,GAAG,EAAE;AAAC6N,QAAAA,kBAAkB,EAAE;AAACs7C,UAAAA,CAAC,EAAE;AAAJ;AAArB;AAAN,KADD,EAEC,GAFD,CADD,EAKC,GALD;AAOA,GARC,CAAF;AAUAp9B,EAAAA,EAAE,CAAC,+BAAD,EAAkC,YAAY;AAC/CG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACtmC,6BAAV,CAAwC;AACvC5N,MAAAA,GAAG,EAAE;AAAC6N,QAAAA,kBAAkB,EAAE;AAACs7C,UAAAA,CAAC,EAAE;AAAJ;AAArB;AADkC,KAAxC,CADD,EAIC;AAACA,MAAAA,CAAC,EAAE;AAAJ,KAJD;AAMA,GAPC,CAAF;AAQA,CAvCO,CAAR;;ACEA58B,QAAQ,CAAC,oCAAD,EAAuC,YAAY;AAC1D,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,OAAKsjB,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AACjD,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBlkB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV/Z,YAAAA,KAAK,EAAE;AACNhK,cAAAA,OAAO,EAAE,CACR,CACC;AACC+C,gBAAAA,cAAc,EAAE;AAAC0N,kBAAAA,IAAI,EAAE;AAAP,iBADjB;AAECxQ,gBAAAA,MAAM,EAAE;AACPwQ,kBAAAA,IAAI,EAAE;AADC,iBAFT;AAKCvQ,gBAAAA,KAAK,EAAE,KALR;AAMC+G,gBAAAA,KAAK,EAAE,CANR;AAOC/F,gBAAAA,MAAM,EAAE;AAPT,eADD,CADQ;AADH;AADG;AADL;AARgB,OAAP;AAAA,KAAjB;;AA4BA,QAAM8nC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,gEADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACshB,UAAAA,cAAc,EAAE;AAACwwC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAjB,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRxoB,UAAAA,cAAc,EAAE;AADR;AAHG,OAAb;AAQA,aAAO8pB,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA,WAAO0H,SAAO,CACZF,+BADK,CAC2B;AAACl/B,MAAAA,IAAI,EAAE;AAAP,KAD3B,EAC0Cu4B,QAD1C,EACoDC,QADpD,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,kCADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAnBK,CAAP;AAoBA,GAzGC,CAAF;AA2GA6wB,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;;AAE7B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBlkB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACf9Z,YAAAA,KAAK,EAAE;AACNvC,cAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADA;AAENzH,cAAAA,OAAO,EAAE,CACR,CACC;AACCC,gBAAAA,MAAM,EAAE;AAACwQ,kBAAAA,IAAI,EAAE;AAAP,iBADT;AAECvQ,gBAAAA,KAAK,EAAE,KAFR;AAGC+G,gBAAAA,KAAK,EAAE,CAHR;AAIC/F,gBAAAA,MAAM,EAAE;AAJT,eADD,CADQ;AAFH,aADQ;AAcfmE,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAACzyD,gBAAAA,GAAG,EAAE;AAAN,eADE;AAEN8yD,cAAAA,EAAE,EAAE;AAAC9yD,gBAAAA,GAAG,EAAE;AAAN;AAFE;AAdQ;AADV;AARgB,OAAP;AAAA,KAAjB;;AA8BA,QAAMmnC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,gEADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACshB,UAAAA,cAAc,EAAE;AAACwwC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAjB,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRxoB,UAAAA,cAAc,EAAE;AADR;AAHG,OAAb;AAQA,aAAO8pB,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZR,WADK,GACSrG,QADT,EACmBC,QADnB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE;AAAP,OADyC,EAEzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAFyC,CAA1C;AAYA,KAlBK,CAAP;AAmBA,GAzGC,CAAF;AA2GAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,SAAO,CAACsB,YAAR,CAAqB,IAArB,EAA2BnI,QAA3B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,uCAAP;AAAgD3N,MAAAA,GAAG,EAAE;AAArD,KADyC,CAA1C;AAGA,GANC,CAAF;AAQA+0B,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ,SAXe;AAYvB2e,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AADV;AAZgB,OAAP;AAAA,KAAjB;;AAgBA,QAAMklB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,gEADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACshB,UAAAA,cAAc,EAAE;AAACwwC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAjB,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRxoB,UAAAA,cAAc,EAAE;AADR;AAHG,OAAb;AAQA,aAAO8pB,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZzE,UADK,CAEL;AAAC36B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,CANK,EAOL,KAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAjCK,CAAP;AAkCA,GAzGC,CAAF;AA2GAonB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAAC2B,eAAR,CAAwB,KAAxB,CAAvB,EAAuD;AACtDhiC,MAAAA,IAAI,EAAE,0CADgD;AAEtDy7B,MAAAA,WAAW,EAAE;AAFyC,KAAvD;AAIA,GALC,CAAF;AAOArU,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;;AAEzB,QAAMoS,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA,QAAMlH,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBlkB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAACzyD,gBAAAA,GAAG,EAAE;AAAN,eAAL;AAAkB8yD,cAAAA,EAAE,EAAE;AAAC9yD,gBAAAA,GAAG,EAAE;AAAN;AAAtB;AADQ;AADV;AARgB,OAAP;AAAA,KAAjB;;AAeA,WAAOguC,SAAO,CACZ7E,OADK,CAEL,CAAC,IAAD,EAAO,IAAP,CAFK,EAGL,KAHK,EAIJhC,QAJI,EAKLZ,IALK,CAKA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAPK,EAQLb,IARK,CAQA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAFP;AAGC+H,QAAAA,IAAI,EAAE;AAHP,OADyC,CAA1C;AAOA,KAhBK,CAAP;AAiBA,GA9CC,CAAF;AA+CA,CAtaO,CAAR;;ACFA,IAAM8pD,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,iBAAe,YAAmC;AAAA,MAAlC70D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCC,GAAxC;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCE,cAAxC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCK,KAAnC,CAAyCJ,GAA9C;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCS,cAAxC;AACC,aAAOxsB,MAAM,CAAC4hD,SAAP,CAAiBpuD,KAAjB,EAAwB+uC,MAAxB,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCU,GAAnC,CAAuCC,OAAvC,CAA+CE,QAApD;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCU,GAAnC,CAAuCC,OAAvC,CAA+CC,KAApD;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCU,GAAnC,CAAuCI,IAAvC,CAA4CD,QAAjD;AACC,aAAO5sB,MAAM,CAAC+oD,eAAP,CAAuBv1D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCU,GAAnC,CAAuCI,IAAvC,CAA4CF,KAAjD;AACC,aAAO3sB,MAAM,CAACyjC,YAAP,CAAoBjwC,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBC,gBAAlB,CAAmCK,KAAnC,CAAyCC,SAA9C;AACC,aAAOrsB,MAAM,CAACmqD,YAAP,CAAoB32D,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBE,YAA7B;AACC,aAAOpuB,MAAM,CAACsqD,eAAP,CAAuB92D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBC,iBAA7B;AACC,aAAOnuB,MAAM,CAACuqD,eAAP,CAAuB/2D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD;AACC,aAAO/uC,KAAP;AAxBF;AA0BA,CA3BD;;ACJAg2B,QAAQ,CAAC,qCAAD,EAAwC,YAAY;AAC3DA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,4BAAP;AAAqChN,QAAAA,IAAI,EAAE;AAA3C,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,4BADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEP/H,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KATa,EAkBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAlBa,CAAd;AAkCAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,kCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,kCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OANT;AAUC60B,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE;AAFG;AAVjB,KADa,CAAd;AAiBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAxBO,CAAR;AA0BAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,6CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,6CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GApCO,CAAR;AAsCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,iBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCmmC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OALT;AAUCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AAAP;AADQ;AAVjB,KADa,EAeb;AACCjoD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AADA;AADD,OAFR;AAOCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OAPT;AAYCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AAZjB,KAfa,CAAd;AAiCA5E,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAxCO,CAAR;AA0CAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AATjB,KADa,EAcb;AACCjoD,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAP;AAA2BC,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAlC;AAAP;AADD,OAFR;AAKCxoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACkxD,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAR;AAAP;AADQ;AATjB,KAda,EA2Bb;AACCloD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAAP;AADQ;AATjB,KA3Ba,CAAd;AAyCAqsD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhDO,CAAR;AAkDAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE;AADH,OAFR;AAKCmwC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE;AADM;AANjB,KADa,EAWb;AACCyQ,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ;AADH,OAFR;AAaC6uC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAbT;AAcCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ;AADM;AAdjB,KAXa,CAAd;AAyCAlE,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhDO,CAAR;AAkDAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WADE;AAENW,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFE;AADD,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OART;AASCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB,WADE;AAEN6qD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB;AAFE;AADQ;AATjB,KAPa,CAAd;AAyBAgqD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAEN+uC,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFE;AAGNY,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAHE;AADD,OAFR;AASCuqB,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OATT;AAUCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAENgvC,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAFE;AADQ;AAVjB,KADa,CAAd;AAoBAkuC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GA3BO,CAAR;AA6BAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAviBO,CAAR;;ACAA4nB,QAAQ,CAAC,sCAAD,EAAyC,YAAY;AAC5DA,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AADQ;AADV;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KADa,EAYb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AADQ;AADV;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KAZa,EAuBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eADE;AAENzE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAFE;AAGNxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE,CAAJ;AAAOvC,gBAAAA,OAAO,EAAE;AAAhB;AAHE;AADQ;AADV;AADD,OAFR;AAaCngC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAbjB,KAvBa,CAAd;AAwCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACr5C,MAAV,CAAiByuD,IAAI,CAAC/yD,KAAtB,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AADQ;AADV;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KADa,EAYb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AADQ;AADV;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KAZa,EAuBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eADE;AAENzE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAFE;AAGNxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE,CAAJ;AAAOvC,gBAAAA,OAAO,EAAE;AAAhB;AAHE;AADQ;AADV;AADD,OAFR;AAaCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAbjB,KAvBa,CAAd;AA2CAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5C,cAAV,CAAyB0uD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApDO,CAAR;AAsDAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AADV,SADD;AAIN7e,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAJF,OAFR;AAUCwxB,MAAAA,cAAc,EAAE;AAVjB,KADa,EAab;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ;AAAjB,aADQ;AAEfp5D,YAAAA,OAAO,EAAE;AAFM;AADV,SADD;AAONiF,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAPF,OAFR;AAaCwxB,MAAAA,cAAc,EAAE;AAbjB,KAba,EA4Bb;AACCjmB,MAAAA,IAAI,EAAE,qBADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ;AAAjB,aADQ;AAEfp5D,YAAAA,OAAO,EAAE,CACR;AAACC,cAAAA,MAAM,EAAE,KAAT;AAAgBC,cAAAA,KAAK,EAAE;AAAvB,aADQ,EAER;AACCD,cAAAA,MAAM,EAAE;AAACuD,gBAAAA,QAAQ,EAAE;AAAX,eADT;AAECtD,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAIC5F,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,aAFQ;AAFM;AADV,SADD;AAeN8E,QAAAA,MAAM,EAAE;AAfF,OAFR;AAmBCyxB,MAAAA,cAAc,EAAE;AAnBjB,KA5Ba,EAiDb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ;AAAjB,aADQ;AAEfp5D,YAAAA,OAAO,EAAE,CACR;AAACC,cAAAA,MAAM,EAAE,KAAT;AAAgBC,cAAAA,KAAK,EAAE;AAAvB,aADQ,EAER;AACCD,cAAAA,MAAM,EAAE;AAACuD,gBAAAA,QAAQ,EAAE;AAAX,eADT;AAECtD,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAIC5F,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,aAFQ;AAFM;AADV,SADD;AAeN8E,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAfF,OAFR;AAqBCwxB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT,EAAiB;AAACv3D,QAAAA,GAAG,EAAE;AAAN,OAAjB,EAA8B,IAA9B;AArBjB,KAjDa,CAAd;AAyEA,QAAM3B,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC34C,oBAAV,CAA+B+tD,IAAI,CAAC/yD,KAApC,EAA2ClB,KAA3C,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApFO,CAAR;AAsFAE,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMx1B,KAAK,GAAG;AACbyiB,MAAAA,KAAK,EAAE;AACNC,QAAAA,cAAc,EAAE;AAAC5e,UAAAA,SAAS,EAAE;AAAZ;AADV;AADM,KAAd;AAMA6xB,IAAAA,WAAM,CAACw9B,WAAP,CAAmBxV,WAAS,CAACx4C,YAAV,CAAuBnF,KAAvB,CAAnB,EAAkD,GAAlD;AACA,GARC,CAAF;AAUAg2B,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM+hC,WAAW,GAAG,SAAdA,WAAc,CAACj0D,SAAD;AAAA,aAAgB;AACnC2e,QAAAA,KAAK,EAAE;AACNC,UAAAA,cAAc,EAAE;AACfze,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eADE;AAENzE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAFE;AAGNxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE,CAAJ;AAAOvC,gBAAAA,OAAO,EAAE;AAAhB;AAHE,aADQ;AAMf3xD,YAAAA,SAAS,EAATA;AANe;AADV;AAD4B,OAAhB;AAAA,KAApB;;AAaA0xB,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAvB,EAA+D;AAC9DC,QAAAA,CAAC,EAAE;AAD2D,OAA/D;AAGA,KAJC,CAAF;AAMAxiC,IAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,MAAAA,WAAM,CAACg/B,MAAP,CAAchX,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAd;AACA,KAFC,CAAF;AAGA,GAvBO,CAAR;AAyBAviC,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrBye,MAAAA,KAAK,EAAE;AACNC,QAAAA,cAAc,EAAE;AADV;AADc,KAAtB,CADD,EAMC,OAND;AAQA,GATC,CAAF;AAUA,CA7OO,CAAR;;ACEAsT,QAAQ,CAAC,+BAAD,EAAkC,YAAY;AACrD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,OAAKsjB,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AACjD,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBlkB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV/Z,YAAAA,KAAK,EAAE;AACNhK,cAAAA,OAAO,EAAE,CACR,CACC;AACC+C,gBAAAA,cAAc,EAAE;AAAC0N,kBAAAA,IAAI,EAAE;AAAP,iBADjB;AAECxQ,gBAAAA,MAAM,EAAE;AACPwQ,kBAAAA,IAAI,EAAE;AADC,iBAFT;AAKCvQ,gBAAAA,KAAK,EAAE,KALR;AAMC+G,gBAAAA,KAAK,EAAE,CANR;AAOC/F,gBAAAA,MAAM,EAAE;AAPT,eADD,CADQ;AADH;AADG;AADL;AARgB,OAAP;AAAA,KAAjB;;AA4BA,QAAM8nC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,2DADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuhB,UAAAA,SAAS,EAAE;AAACuwC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAZ,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvoB,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO6pB,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA,WAAO0H,SAAO,CACZF,+BADK,CAC2B;AAACl/B,MAAAA,IAAI,EAAE;AAAP,KAD3B,EAC0Cu4B,QAD1C,EACoDC,QADpD,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,4BADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAnBK,CAAP;AAoBA,GAzGC,CAAF;AA2GA6wB,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBlkB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV/Z,YAAAA,KAAK,EAAE;AACNvC,cAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADA;AAENzH,cAAAA,OAAO,EAAE,CACR,CACC;AACCC,gBAAAA,MAAM,EAAE;AAACwQ,kBAAAA,IAAI,EAAE;AAAP,iBADT;AAECvQ,gBAAAA,KAAK,EAAE,KAFR;AAGC+G,gBAAAA,KAAK,EAAE,CAHR;AAIC/F,gBAAAA,MAAM,EAAE;AAJT,eADD,CADQ;AAFH,aADG;AAcVmE,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAACzyD,gBAAAA,GAAG,EAAE;AAAN,eADE;AAEN8yD,cAAAA,EAAE,EAAE;AAAC9yD,gBAAAA,GAAG,EAAE;AAAN;AAFE;AAdG;AADL;AARgB,OAAP;AAAA,KAAjB;;AA8BA,QAAMmnC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,2DADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuhB,UAAAA,SAAS,EAAE;AAACuwC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAZ,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvoB,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO6pB,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZR,WADK,GACSrG,QADT,EACmBC,QADnB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE;AAAP,OADyC,EAEzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAFyC,CAA1C;AAYA,KAlBK,CAAP;AAmBA,GAxGC,CAAF;AA0GAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,SAAO,CAACsB,YAAR,CAAqB,IAArB,EAA2BnI,QAA3B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,iCAAP;AAA0C3N,MAAAA,GAAG,EAAE;AAA/C,KADyC,CAA1C;AAGA,GANC,CAAF;AAQA+0B,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ,SAXe;AAYvB2e,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AADL;AAZgB,OAAP;AAAA,KAAjB;;AAgBA,QAAMilB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,2DADD,EAEaC,yBAAK,CAAC3kD,GAAD,CAFlB;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACuhB,UAAAA,SAAS,EAAE;AAACuwC,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAZ,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvoB,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO6pB,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZzE,UADK,CAEL;AAAC36B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,CANK,EAOL,KAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAjCK,CAAP;AAkCA,GAzGC,CAAF;AA2GAonB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,IAAAA,WAAM,CAACC,eAAP,CAAuB6Y,SAAO,CAAC2B,eAAR,CAAwB,KAAxB,CAAvB,EAAuD;AACtDhiC,MAAAA,IAAI,EAAE,oCADgD;AAEtDy7B,MAAAA,WAAW,EAAE;AAFyC,KAAvD;AAIA,GALC,CAAF;AAOArU,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;;AAEzB,QAAMoS,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA,QAAMlH,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBlkB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAACzyD,gBAAAA,GAAG,EAAE;AAAN,eAAL;AAAkB8yD,cAAAA,EAAE,EAAE;AAAC9yD,gBAAAA,GAAG,EAAE;AAAN;AAAtB;AADG;AADL;AARgB,OAAP;AAAA,KAAjB;;AAeA,WAAOguC,SAAO,CACZ7E,OADK,CAEL,CAAC,IAAD,EAAO,IAAP,CAFK,EAGL,KAHK,EAIJhC,QAJI,EAKLZ,IALK,CAKA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAPK,EAQLb,IARK,CAQA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAFP;AAGC+H,QAAAA,IAAI,EAAE;AAHP,OADyC,CAA1C;AAOA,KAhBK,CAAP;AAiBA,GA9CC,CAAF;AAgDAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,SAAO,CAACwB,YAAR,CAAqB,KAArB,EAA4BrI,QAA5B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,iCADP;AAECy7B,MAAAA,WAAW,EAAE;AAFd,KADyC,CAA1C;AAMA,GATC,CAAF;AAUA,CAhbO,CAAR;;ACFA,IAAMquB,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,iBAAe,YAAmC;AAAA,MAAlC70D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6Bd,GAAlC;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6Bb,cAAlC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BV,KAA7B,CAAmCJ,GAAxC;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BN,cAAlC;AACC,aAAOxsB,MAAM,CAAC4hD,SAAP,CAAiBpuD,KAAjB,EAAwB+uC,MAAxB,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BL,GAA7B,CAAiCC,OAAjC,CAAyCE,QAA9C;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BL,GAA7B,CAAiCC,OAAjC,CAAyCC,KAA9C;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BL,GAA7B,CAAiCI,IAAjC,CAAsCD,QAA3C;AACC,aAAO5sB,MAAM,CAAC+oD,eAAP,CAAuBv1D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BL,GAA7B,CAAiCI,IAAjC,CAAsCF,KAA3C;AACC,aAAO3sB,MAAM,CAACyjC,YAAP,CAAoBjwC,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACtW,KAAZ,CAAkBgB,UAAlB,CAA6BV,KAA7B,CAAmCC,SAAxC;AACC,aAAOrsB,MAAM,CAACmqD,YAAP,CAAoB32D,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBE,YAA7B;AACC,aAAOpuB,MAAM,CAACsqD,eAAP,CAAuB92D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBC,iBAA7B;AACC,aAAOnuB,MAAM,CAACuqD,eAAP,CAAuB/2D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD;AACC,aAAO/uC,KAAP;AAxBF;AA0BA,CA3BD;;ACJAg2B,QAAQ,CAAC,gCAAD,EAAmC,YAAY;AACtDA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,sBAAP;AAA+BhN,QAAAA,IAAI,EAAE;AAArC,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEP/H,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KATa,EAkBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAlBa,CAAd;AAkCAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,4BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,4BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OANT;AAUC60B,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE;AAFG;AAVjB,KADa,CAAd;AAiBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAxBO,CAAR;AA0BAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GApCO,CAAR;AAsCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,iBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCmmC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oCADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OALT;AAUCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AAAP;AADQ;AAVjB,KADa,EAeb;AACCjoD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AADA;AADD,OAFR;AAOCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oCADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OAPT;AAYCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AAZjB,KAfa,CAAd;AAiCA5E,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAxCO,CAAR;AA0CAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AATjB,KADa,EAcb;AACCjoD,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAP;AAA2BC,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAlC;AAAP;AADD,OAFR;AAKCxoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACkxD,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAR;AAAP;AADQ;AATjB,KAda,EA2Bb;AACCloD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAAP;AADQ;AATjB,KA3Ba,CAAd;AAyCAqsD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhDO,CAAR;AAkDAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE;AADH,OAFR;AAKCmwC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE;AADM;AANjB,KADa,EAWb;AACCyQ,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ;AADH,OAFR;AAaC6uC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAbT;AAcCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ;AADM;AAdjB,KAXa,CAAd;AAyCAlE,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhDO,CAAR;AAkDAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WADE;AAENW,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFE;AADD,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OART;AASCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB,WADE;AAEN6qD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB;AAFE;AADQ;AATjB,KAPa,CAAd;AAyBAgqD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAEN+uC,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFE;AAGNY,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAHE;AADD,OAFR;AASCuqB,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OATT;AAUCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAENgvC,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAFE;AADQ;AAVjB,KADa,CAAd;AAoBAkuC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GA3BO,CAAR;AA6BAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAviBO,CAAR;;ACAA4nB,QAAQ,CAAC,iCAAD,EAAoC,YAAY;AACvDA,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AADG;AADL;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KADa,EAYb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AADG;AADL;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KAZa,EAuBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eADE;AAENzE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAFE;AAGNxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE,CAAJ;AAAOvC,gBAAAA,OAAO,EAAE;AAAhB;AAHE;AADG;AADL;AADD,OAFR;AAaCngC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAbjB,KAvBa,CAAd;AAwCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACr5C,MAAV,CAAiByuD,IAAI,CAAC/yD,KAAtB,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AADG;AADL;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KADa,EAYb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AADG;AADL;AADD,OAFR;AASCqxB,MAAAA,cAAc,EAAE;AATjB,KAZa,EAuBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eADE;AAENzE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAFE;AAGNxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE,CAAJ;AAAOvC,gBAAAA,OAAO,EAAE;AAAhB;AAHE;AADG;AADL;AADD,OAFR;AAaCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAbjB,KAvBa,CAAd;AA2CAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5C,cAAV,CAAyB0uD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApDO,CAAR;AAsDAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AADL,SADD;AAIN9e,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAJF,OAFR;AAUCwxB,MAAAA,cAAc,EAAE;AAVjB,KADa,EAab;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ;AAAjB,aADG;AAEVp5D,YAAAA,OAAO,EAAE;AAFC;AADL,SADD;AAONiF,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAPF,OAFR;AAaCwxB,MAAAA,cAAc,EAAE;AAbjB,KAba,EA4Bb;AACCjmB,MAAAA,IAAI,EAAE,qBADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ;AAAjB,aADG;AAEVp5D,YAAAA,OAAO,EAAE,CACR;AAACC,cAAAA,MAAM,EAAE,KAAT;AAAgBC,cAAAA,KAAK,EAAE;AAAvB,aADQ,EAER;AACCD,cAAAA,MAAM,EAAE;AAACuD,gBAAAA,QAAQ,EAAE;AAAX,eADT;AAECtD,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAIC5F,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,aAFQ;AAFC;AADL,SADD;AAeN8E,QAAAA,MAAM,EAAE;AAfF,OAFR;AAmBCyxB,MAAAA,cAAc,EAAE;AAnBjB,KA5Ba,EAiDb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ;AAAjB,aADG;AAEVp5D,YAAAA,OAAO,EAAE,CACR;AAACC,cAAAA,MAAM,EAAE,KAAT;AAAgBC,cAAAA,KAAK,EAAE;AAAvB,aADQ,EAER;AACCD,cAAAA,MAAM,EAAE;AAACuD,gBAAAA,QAAQ,EAAE;AAAX,eADT;AAECtD,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAIC5F,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,aAFQ;AAFC;AADL,SADD;AAeN8E,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAfF,OAFR;AAqBCwxB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT,EAAiB;AAACv3D,QAAAA,GAAG,EAAE;AAAN,OAAjB,EAA8B,IAA9B;AArBjB,KAjDa,CAAd;AAyEA,QAAM3B,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC34C,oBAAV,CAA+B+tD,IAAI,CAAC/yD,KAApC,EAA2ClB,KAA3C,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApFO,CAAR;AAsFAE,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMx1B,KAAK,GAAG;AACbyiB,MAAAA,KAAK,EAAE;AACNE,QAAAA,SAAS,EAAE;AAAC7e,UAAAA,SAAS,EAAE;AAAZ;AADL;AADM,KAAd;AAMA6xB,IAAAA,WAAM,CAACw9B,WAAP,CAAmBxV,WAAS,CAACx4C,YAAV,CAAuBnF,KAAvB,CAAnB,EAAkD,GAAlD;AACA,GARC,CAAF;AAUAg2B,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM+hC,WAAW,GAAG,SAAdA,WAAc,CAACj0D,SAAD;AAAA,aAAgB;AACnC2e,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AACNivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eADE;AAENzE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAFE;AAGNxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE,CAAJ;AAAOvC,gBAAAA,OAAO,EAAE;AAAhB;AAHE,aADG;AAMV3xD,YAAAA,SAAS,EAATA;AANU;AADL;AAD4B,OAAhB;AAAA,KAApB;;AAaA0xB,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAvB,EAA+D;AAC9DC,QAAAA,CAAC,EAAE;AAD2D,OAA/D;AAGA,KAJC,CAAF;AAMAxiC,IAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,MAAAA,WAAM,CAACg/B,MAAP,CAAchX,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAd;AACA,KAFC,CAAF;AAGA,GAvBO,CAAR;AAyBAviC,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrBye,MAAAA,KAAK,EAAE;AACNE,QAAAA,SAAS,EAAE;AADL;AADc,KAAtB,CADD,EAMC,OAND;AAQA,GATC,CAAF;AAWAqT,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,IATP;AAUCivB,MAAAA,cAAc,EAAE;AAVjB,KADa,EAab;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,EATP;AAUCivB,MAAAA,cAAc,EAAE;AAVjB,KAba,EAyBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CATP;AAUCivB,MAAAA,cAAc,EAAE;AAVjB,KAzBa,EAqCb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AADL;AADD,OAFR;AAOCtc,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KArCa,EA+Cb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CATP;AAUCivB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAVjB,KA/Ca,CAAd;AA6DAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACp3C,SAAV,CAAoBwsD,IAAI,CAAC/yD,KAAzB,EAAgC+yD,IAAI,CAAC1sD,IAArC,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtEO,CAAR;AAwEAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,IATP;AAUCivB,MAAAA,cAAc,EAAE;AAVjB,KADa,EAab;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CATP;AAUCivB,MAAAA,cAAc,EAAE;AAVjB,KAba,EAyBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyiB,QAAAA,KAAK,EAAE;AACNE,UAAAA,SAAS,EAAE;AACV1e,YAAAA,KAAK,EAAE;AAACivD,cAAAA,EAAE,EAAE;AAAC8E,gBAAAA,CAAC,EAAE;AAAJ,eAAL;AAAazE,cAAAA,EAAE,EAAE;AAACyE,gBAAAA,CAAC,EAAE;AAAJ,eAAjB;AAAyBxE,cAAAA,EAAE,EAAE;AAACwE,gBAAAA,CAAC,EAAE;AAAJ;AAA7B;AADG;AADL;AADD,OAFR;AASC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CATP;AAUCivB,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAVjB,KAzBa,CAAd;AA0CAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACv3C,iBAAV,CAA4B2sD,IAAI,CAAC/yD,KAAjC,EAAwC+yD,IAAI,CAAC1sD,IAA7C,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnDO,CAAR;AAoDA,CA1WO,CAAR;;ACEAU,QAAQ,CAAC,6BAAD,EAAgC,YAAY;AACnD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,OAAKsjB,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ,SAXe;AAYvBiS,QAAAA,aAAa,EAAE;AAZQ,OAAP;AAAA,KAAjB;;AAcA,QAAM6xB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AACvB2nB,MAAAA,WAAM,CAACw9B,WAAP,CAAmB,uDAAnB,EAA4EC,yBAAK,CAAC3kD,GAAD,CAAjF;AACTknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACyB,UAAAA,SAAS,EAAE;AAACqwD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAZ,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRroC,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KArCO,CAAR;AAuCA,WAAO0H,SAAO,CACZzE,UADK,CAEL;AAAC36B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,CANK,EAOL,KAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAjCK,CAAP;AAkCA,GApGC,CAAF;AAsGAonB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCiZ,IAAAA,SAAO,CAAC2B,eAAR,CAAwB,KAAxB,EAA+BxI,QAA/B;AACAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,kCADP;AAECy7B,MAAAA,WAAW,EAAE;AAFd,KADyC,CAA1C;AAMA,GARC,CAAF;AASA,CAtJO,CAAR;;ACCA,IAAMquB,eAAa,sBACfrD,qBADe,CAAnB;;;AAKA,IAAM/tD,QAAM,GAAG,SAATA,MAAS,CAAC9G,KAAD,EAAQ+uC,MAAR,EAAmB;AACjC,MAAIimB,OAAO,sBAAOh1D,KAAK,CAACiE,KAAb,CAAX;;AACA,MAAI8qC,MAAM,CAAC3tC,IAAP,IAAe2tC,MAAM,CAAC3tC,IAAP,CAAYtB,MAA/B,EAAuC;AACtCivC,IAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAAAG,KAAK,EAAI;AAC5B,UAAIm4D,YAAY,GAAG3D,OAAO,CAACx0D,KAAK,CAAC6U,sBAAP,CAA1B;;AACA,UAAIsjD,YAAJ,EAAkB;AACjB,YAAMhrD,aAAa,GAAGohC,MAAM,CAAClwC,MAAP,CAAc8O,aAApC;AACA,YAAMirD,gBAAgB,GAAGD,YAAY,CAAC5iD,aAAb,CAA2BxH,QAApD;AACA,YAAMsqD,YAAY,GAAGr4D,KAAK,CAACuV,aAAN,CAAoBxH,QAAzC;AAEA,YAAIuqD,mBAAmB,GAAG,EAA1B;;AACA,qCAAUF,gBAAV,EAA4B,UAACtoD,OAAD,EAAa;AACxCwoD,UAAAA,mBAAmB,CAACxoD,OAAO,CAACC,UAAR,CAAmB5C,aAAnB,CAAD,CAAnB,GAAyD2C,OAAzD;AACA,SAFD;;AAIA,qCAAUuoD,YAAV,EAAwB,UAAAvoD,OAAO,EAAI;AAClC,cAAM7P,GAAG,GAAG6P,OAAO,CAACC,UAAR,CAAmB5C,aAAnB,CAAZ;AACAmrD,UAAAA,mBAAmB,CAACr4D,GAAD,CAAnB,GAA2B6P,OAA3B;AACA,SAHD;;AAKA0kD,QAAAA,OAAO,CAACx0D,KAAK,CAAC6U,sBAAP,CAAP,qCACI2/C,OAAO,CAACx0D,KAAK,CAAC6U,sBAAP,CADX;AAECU,UAAAA,aAAa,oCACTi/C,OAAO,CAACx0D,KAAK,CAAC6U,sBAAP,CAAP,CAAsCU,aAD7B;AAEZxH,YAAAA,QAAQ,EAAE7N,MAAM,CAAC6D,MAAP,CAAcu0D,mBAAd;AAFE;AAFd;AAQA,OAvBD,MAuBO;AACN9D,QAAAA,OAAO,CAACx0D,KAAK,CAAC6U,sBAAP,CAAP,GAAwC7U,KAAxC;AACA;AACD,KA5BD;AA6BA;;AACD,2CAAWR,KAAX;AAAkBiE,IAAAA,KAAK,EAAE+wD;AAAzB;AACA,CAlCD;;AAoCA,iBAAe,YAAmC;AAAA,MAAlCh1D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAAC1T,cAAZ,CAA2B1C,GAAhC;AACC,aAAO1xB,QAAM,CAAC9G,KAAD,EAAQ+uC,MAAR,CAAb;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BjB,SAAhC;AACC,aAAOztB,MAAM,CAACmjC,QAAP,CAAgB3vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BzC,cAAhC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BtC,KAA3B,CAAiCJ,GAAtC;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BtC,KAA3B,CAAiCqB,SAAtC;AACC,aAAOztB,MAAM,CAACojC,aAAP,CAAqB5vC,KAArB,EAA4B+uC,MAA5B,CAAP;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BjC,GAA3B,CAA+BC,OAA/B,CAAuCE,QAA5C;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BjC,GAA3B,CAA+BmB,aAA/B,CAA6ChB,QAAlD;AACC,aAAO5sB,MAAM,CAAC8oD,uBAAP,CAA+Bt1D,KAA/B,EAAsC+uC,MAAtC,CAAP;;AACD,SAAKH,WAAW,CAAC1T,cAAZ,CAA2BjC,GAA3B,CAA+BC,OAA/B,CAAuCC,KAA5C;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AAED;AACC,aAAO/uC,KAAP;AAnBF;AAqBA,CAtBD;;AC5CAg2B,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACpDA,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,+BADC;AAEP/H,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KATa,EAkBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,+BADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAlBa,CAAd;AAkCAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qCADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qCADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,kCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,kCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GApCO,CAAR;AAsCAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAYA4nB,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEPhN,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KAPa,EAgBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEP3N,QAAAA,GAAG,EAAE,SAFE;AAGPW,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECw2D,UAAAA,OAAO,EAAE,KAFV;AAGC5nD,UAAAA,IAAI,EAAE;AAHP,SADK,EAML;AACC5O,UAAAA,GAAG,EAAE,IADN;AAECw2D,UAAAA,OAAO,EAAE,KAFV;AAGC5nD,UAAAA,IAAI,EAAE,QAHP;AAIC3G,UAAAA,QAAQ,EAAE,IAJX;AAKCusD,UAAAA,UAAU,EAAE;AALb,SANK;AAHC,OAHT;AAqBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNizD,UAAAA,GAAG,EAAE;AAACz2D,YAAAA,GAAG,EAAE,IAAN;AAAYw2D,YAAAA,OAAO,EAAE,KAArB;AAA4B5nD,YAAAA,IAAI,EAAE;AAAlC,WADC;AAEN8nD,UAAAA,GAAG,EAAE;AAAC12D,YAAAA,GAAG,EAAE,IAAN;AAAYw2D,YAAAA,OAAO,EAAE,KAArB;AAA4B5nD,YAAAA,IAAI,EAAE;AAAlC;AAFC;AADQ;AArBjB,KAhBa,CAAd;AA8CAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvDO,CAAR;AAyDAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIP2B,QAAAA,GAAG,EAAE,SAJE;AAKPW,QAAAA,IAAI,EAAE;AALC,OAHT;AAUCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECE,UAAAA,KAAK,EAAE,KAFR;AAGCD,UAAAA,KAAK,EAAE;AAHR,SADQ;AADM;AAVjB,KADa,EAqBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CACN;AAACk4D,YAAAA,OAAO,EAAE;AAAV,WADM,EAEN;AAACA,YAAAA,OAAO,EAAE;AAAV,WAFM,EAGN;AAACA,YAAAA,OAAO,EAAE;AAAV,WAHM;AAHR,SADQ;AADH,OAFR;AAeCloB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIP2B,QAAAA,GAAG,EAAE,SAJE;AAKPW,QAAAA,IAAI,EAAE,CAAC;AAAC61D,UAAAA,OAAO,EAAE;AAAV,SAAD,EAAkB;AAACA,UAAAA,OAAO,EAAE;AAAV,SAAlB;AALC,OAfT;AAsBC3hC,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECE,UAAAA,KAAK,EAAE;AAAC,eAAG,IAAJ;AAAU,eAAG,IAAb;AAAmB,eAAG;AAACk4D,cAAAA,OAAO,EAAE;AAAV;AAAtB,WAFR;AAGCn4D,UAAAA,KAAK,EAAE;AAHR,SADQ;AADM;AAtBjB,KArBa,CAAd;AAuDA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhEO,CAAR;AAkEAU,EAAAA,QAAQ,CAAC,yBAAD,EAA4B,YAAY;AAC/C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADD,OAFR;AAeCiwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE;AALA,OAfT;AAsBCw2B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADQ;AAtBjB,KADa,EAqCb;AACCuQ,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADD,OAFR;AAeCiwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE;AALA,OAfT;AAsBCw2B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO,EAMP;AACC6C,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aANO;AADA;AADH;AADQ;AAtBjB,KArCa,CAAd;AAgFA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAzFO,CAAR;AA2FAU,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE;AAAN,WADE;AAEN+yD,UAAAA,EAAE,EAAE;AACH/yD,YAAAA,GAAG,EAAE,IADF;AAEHsV,YAAAA,aAAa,EAAE;AACdxH,cAAAA,QAAQ,EAAE,CAAC;AAACgC,gBAAAA,UAAU,EAAE;AAACwoD,kBAAAA,GAAG,EAAE;AAAN,iBAAb;AAA0BC,gBAAAA,EAAE,EAAE;AAA9B,eAAD;AADI;AAFZ;AAFE;AADD,OAFR;AAaCjqB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oBADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCiU,UAAAA,sBAAsB,EAAE;AADzB,SADK,EAIL;AACCA,UAAAA,sBAAsB,EAAE,IADzB;AAECU,UAAAA,aAAa,EAAE;AACdxH,YAAAA,QAAQ,EAAE,CAAC;AAACgC,cAAAA,UAAU,EAAE;AAACwoD,gBAAAA,GAAG,EAAE;AAAN,eAAb;AAA0BC,cAAAA,EAAE,EAAE;AAA9B,aAAD;AADI;AAFhB,SAJK,CAFC;AAaPn6D,QAAAA,MAAM,EAAE;AAAC8O,UAAAA,aAAa,EAAE;AAAhB;AAbD,OAbT;AA4BC2nB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AACHzyD,YAAAA,GAAG,EAAE;AADF,WADE;AAIN8yD,UAAAA,EAAE,EAAE;AACHl+C,YAAAA,sBAAsB,EAAE;AADrB,WAJE;AAONm+C,UAAAA,EAAE,EAAE;AACHz9C,YAAAA,aAAa,EAAE;AACdxH,cAAAA,QAAQ,EAAE,CACT;AACCyqD,gBAAAA,EAAE,EAAE,GADL;AAECzoD,gBAAAA,UAAU,EAAE;AACXwoD,kBAAAA,GAAG,EAAE;AADM;AAFb,eADS,EAOT;AACCC,gBAAAA,EAAE,EAAE,GADL;AAECzoD,gBAAAA,UAAU,EAAE;AACXwoD,kBAAAA,GAAG,EAAE;AADM;AAFb,eAPS;AADI,aADZ;AAiBHt4D,YAAAA,GAAG,EAAE;AAjBF;AAPE;AADQ;AA5BjB,KADa,CAAd;AA6DAiyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtEO,CAAR;AAuEA,CA3iBO,CAAR;;ACAAU,QAAQ,CAAC,+BAAD,EAAkC,YAAY;AACrDA,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AADO;AADT,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AADO;AADT,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADO;AADT,OAFR;AAWCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAXjB,KAnBa,CAAd;AAqCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5C,cAAV,CAAyB0uD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9CO,CAAR;AAgDAE,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrB+R,MAAAA,aAAa,EAAE;AADM,KAAtB,CADD,EAIC,OAJD;AAMA,GAPC,CAAF;AASAigB,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADO;AADT,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADO;AADT,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAEg+B;AARjB,KAXa,EAqBb;AACCjkD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADO;AADT,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AARjB,KArBa,CAAd;AAmCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACz3C,QAAV,CAAmB6sD,IAAI,CAAC/yD,KAAxB,EAA+B+yD,IAAI,CAACtyD,GAApC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5CO,CAAR;AA8CAU,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE,EADO;AAEdrF,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFK;AADT,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAhBjB,KADa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADO;AAEdp5D,UAAAA,OAAO,EAAE;AAFK;AADT,OAFR;AAQC02B,MAAAA,cAAc,EAAE;AARjB,KAnBa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADO;AAEdp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFK;AADT,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAP,EAAe;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAf,EAAuB,IAAvB;AAhBjB,KA7Ba,CAAd;AAgDA,QAAMn5D,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACj4C,qBAAV,CAAgCqtD,IAAI,CAAC/yD,KAArC,EAA4CnB,MAA5C,EAAoDC,KAApD,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AADO,SADT;AAIN8Q,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AADY;AAJd,OAFR;AAUCqxB,MAAAA,cAAc,EAAE;AAVjB,KADa,EAab;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADO,SADT;AAQN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE,CAAJ;AAAOx7B,gBAAAA,aAAa,EAAE;AAAtB;AADH,aADE;AAINsnD,YAAAA,EAAE,EAAE;AAAC93D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE;AAAJ;AAAP;AAJE;AADY;AARd,OAFR;AAmBC9X,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AAnBjB,KAba,CAAd;AAsCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACloC,WAAV,CAAsBs9C,IAAI,CAAC/yD,KAA3B,EAAkC,CAAC,GAAD,EAAM,CAAN,CAAlC,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA/CO,CAAR;AAiDAU,EAAAA,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACpD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADO,SADT;AAQN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE,CAAJ;AAAO/3B,gBAAAA,sBAAsB,EAAE;AAA/B;AADH,aADE;AAIN6jD,YAAAA,EAAE,EAAE;AAAC93D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE;AAAJ;AAAP;AAJE;AADY;AARd,OAFR;AAmBC9X,MAAAA,cAAc,EAAE;AACf6jC,QAAAA,EAAE,EAAE,CACH;AACCziD,UAAAA,qBAAqB,EAAE;AACtBrB,YAAAA,sBAAsB,EAAE,IADF;AAEtB+3B,YAAAA,CAAC,EAAE;AAFmB,WADxB;AAKC4qB,UAAAA,CAAC,EAAE;AALJ,SADG;AADW;AAnBjB,KADa,CAAd;AAkCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAClpC,4BAAV,CAAuCs+C,IAAI,CAAC/yD,KAA5C,EAAmD,CAClD;AAACoB,UAAAA,IAAI,EAAE;AAACX,YAAAA,GAAG,EAAE;AAAN,WAAP;AAAoB5B,UAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAA5B,SADkD,CAAnD,CADD,EAICk0D,IAAI,CAACz9B,cAJN;AAMA,OAPC,CAAF;AAQA,KATD;AAUA,GA7CO,CAAR;AA+CAU,EAAAA,QAAQ,CAAC,yBAAD,EAA4B,YAAY;AAC/C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACH8E,cAAAA,CAAC,EAAE,CADA;AAEHjiD,cAAAA,aAAa,EAAE;AACdxH,gBAAAA,QAAQ,EAAE,CAAC;AAACgC,kBAAAA,UAAU,EAAE;AAACwoD,oBAAAA,GAAG,EAAE;AAAN;AAAb,iBAAD;AADI;AAFZ,aADE;AAONxF,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAPE;AAQNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AARE;AADO,SADT;AAaN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAEL/3B,gBAAAA,sBAAsB,EAAE,IAFnB;AAGL1H,gBAAAA,aAAa,EAAE;AAHV;AADH,aADE;AAQNurD,YAAAA,EAAE,EAAE;AAAC93D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE;AAAJ;AAAP;AARE;AADY;AAbd,OAFR;AA4BC9X,MAAAA,cAAc,EAAE,CAAC;AAAC70B,QAAAA,GAAG,EAAE,CAAN;AAASW,QAAAA,IAAI,EAAE;AAACiO,UAAAA,IAAI,EAAE,CAAP;AAAU9K,UAAAA,MAAM,EAAE;AAAlB;AAAf,OAAD;AA5BjB,KADa,CAAd;AAiCAmuD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC1nC,uBAAV,CAAkC88C,IAAI,CAAC/yD,KAAvC,EAA8C,CAC7C;AAACoB,UAAAA,IAAI,EAAE;AAACX,YAAAA,GAAG,EAAE;AAAN,WAAP;AAAoB5B,UAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAA5B,SAD6C,CAA9C,CADD,EAICk0D,IAAI,CAACz9B,cAJN;AAMA,OAPC,CAAF;AAQA,KATD;AAUA,GA5CO,CAAR;AA8CAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACH8E,cAAAA,CAAC,EAAE,CADA;AAEHjiD,cAAAA,aAAa,EAAE;AACdxH,gBAAAA,QAAQ,EAAE,CAAC;AAACgC,kBAAAA,UAAU,EAAE;AAACwoD,oBAAAA,GAAG,EAAE,CAAN;AAASnG,oBAAAA,CAAC,EAAE;AAAZ;AAAb,iBAAD;AADI;AAFZ,aADE;AAONW,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAPE;AAQNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AARE;AADO,SADT;AAaN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAEL/3B,gBAAAA,sBAAsB,EAAE,IAFnB;AAGL1H,gBAAAA,aAAa,EAAE;AAHV;AADH;AADE;AADY;AAbd,OAFR;AA2BC2nB,MAAAA,cAAc,EAAE,CACf;AACCl0B,QAAAA,IAAI,EAAE;AACLiO,UAAAA,IAAI,EAAE;AADD,SADP;AAIC5O,QAAAA,GAAG,EAAE;AAJN,OADe;AA3BjB,KADa,CAAd;AAuCAiyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAClnC,aAAV,CAAwBs8C,IAAI,CAAC/yD,KAA7B,EAAoC,CACnC;AAACoB,UAAAA,IAAI,EAAE;AAACX,YAAAA,GAAG,EAAE;AAAN,WAAP;AAAoB5B,UAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAA5B,SADmC,CAApC,CADD,EAICk0D,IAAI,CAACz9B,cAJN;AAMA,OAPC,CAAF;AAQA,KATD;AAUA,GAlDO,CAAR;AAmDA,CAvWO,CAAR;;ACAAU,QAAQ,CAAC,oCAAD,EAAuC,YAAY;AAC1D,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,OAAKsjB,SAAL,CAAe,YAAY;AAC1BC,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzB,QAAMoS,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA,QAAMlH,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB94B,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aAAL;AAAkB8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAAtB;AADc;AARC,OAAP;AAAA,KAAjB;;AAaA,WAAOguC,SAAO,CACZ7E,OADK,CAEL,CAAC,IAAD,EAAO,IAAP,CAFK,EAGL,KAHK,EAIJhC,QAJI,EAKLZ,IALK,CAKA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAPK,EAQLb,IARK,CAQA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAFP;AAGC+H,QAAAA,IAAI,EAAE;AAHP,OADyC,CAA1C;AAOA,KAhBK,CAAP;AAiBA,GA3CC,CAAF;AA6CAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,SAAO,CAACwB,YAAR,CAAqB,KAArB,EAA4BrI,QAA5B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,uCADP;AAECy7B,MAAAA,WAAW,EAAE;AAFd,KADyC,CAA1C;AAMA,GATC,CAAF;AAUA,CA7FO,CAAR;;ACEA,IAAMquB,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,iBAAe,YAAmC;AAAA,MAAlC70D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACxT,sBAAZ,CAAmC5C,GAAxC;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACxT,sBAAZ,CAAmC3C,cAAxC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACxT,sBAAZ,CAAmCnC,GAAnC,CAAuCI,IAAvC,CAA4CD,QAAjD;AACC,aAAO5sB,MAAM,CAAC+oD,eAAP,CAAuBv1D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACxT,sBAAZ,CAAmCnC,GAAnC,CAAuCI,IAAvC,CAA4CF,KAAjD;AACC,aAAO3sB,MAAM,CAACyjC,YAAP,CAAoBjwC,KAApB,EAA2B+uC,MAA3B,CAAP;;AAED;AACC,aAAO/uC,KAAP;AAXF;AAaA,CAdD;;ACNAg2B,QAAQ,CAAC,qCAAD,EAAwC,YAAY;AAC3DA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,4BAAP;AAAqChN,QAAAA,IAAI,EAAE;AAA3C,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,4BADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEP/H,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KATa,EAkBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAlBa,CAAd;AAkCAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,iBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCmmC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OALT;AAUCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AAAP;AADQ;AAVjB,KADa,EAeb;AACCjoD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AADA;AADD,OAFR;AAOCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OAPT;AAYCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AAZjB,KAfa,CAAd;AAiCA5E,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAxCO,CAAR;AA0CAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AATjB,KADa,EAcb;AACCjoD,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAP;AAA2BC,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAlC;AAAP;AADD,OAFR;AAKCxoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACkxD,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAR;AAAP;AADQ;AATjB,KAda,EA2Bb;AACCloD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAAP;AADQ;AATjB,KA3Ba,CAAd;AAyCAqsD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhDO,CAAR;AAkDAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAxMO,CAAR;;ACAA4nB,QAAQ,CAAC,sCAAD,EAAyC,YAAY;AAC5DR,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrB6J,MAAAA,oBAAoB,EAAE;AADD,KAAtB,CADD,EAIC,OAJD;AAMA,GAPC,CAAF;AASAmoB,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADc;AADhB,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADc;AADhB,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAEg+B;AARjB,KAXa,EAqBb;AACCjkD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADc;AADhB,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AARjB,KArBa,CAAd;AAmCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACz3C,QAAV,CAAmB6sD,IAAI,CAAC/yD,KAAxB,EAA+B+yD,IAAI,CAACtyD,GAApC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5CO,CAAR;AA8CAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADc;AADhB,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,IAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADc;AADhB,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,EAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADc;AADhB,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KArBa,EA+Bb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AADhB,OAFR;AAKCxH,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CALP;AAMCivB,MAAAA,cAAc,EAAE;AANjB,KA/Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADc;AADhB,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AARjB,KAvCa,CAAd;AAmDAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACp3C,SAAV,CAAoBwsD,IAAI,CAAC/yD,KAAzB,EAAgC+yD,IAAI,CAAC1sD,IAArC,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AADc,SADhB;AAIN8Q,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AADY;AAJd,OAFR;AAUCqxB,MAAAA,cAAc,EAAE;AAVjB,KADa,EAab;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADc,SADhB;AAQN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE,CAAJ;AAAOx7B,gBAAAA,aAAa,EAAE;AAAtB;AADH,aADE;AAINsnD,YAAAA,EAAE,EAAE;AAAC93D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE;AAAJ;AAAP;AAJE;AADY;AARd,OAFR;AAmBC9X,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AAnBjB,KAba,CAAd;AAsCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACloC,WAAV,CAAsBs9C,IAAI,CAAC/yD,KAA3B,EAAkC,CAAC,GAAD,EAAM,CAAN,CAAlC,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA/CO,CAAR;AAiDAU,EAAAA,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACpD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADc,SADhB;AAQN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE,CAAJ;AAAO/3B,gBAAAA,sBAAsB,EAAE;AAA/B;AADH,aADE;AAIN6jD,YAAAA,EAAE,EAAE;AAAC93D,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE;AAAJ;AAAP;AAJE;AADY;AARd,OAFR;AAmBC9X,MAAAA,cAAc,EAAE;AACf6jC,QAAAA,EAAE,EAAE,CACH;AACCziD,UAAAA,qBAAqB,EAAE;AACtBrB,YAAAA,sBAAsB,EAAE,IADF;AAEtB+3B,YAAAA,CAAC,EAAE;AAFmB,WADxB;AAKC4qB,UAAAA,CAAC,EAAE;AALJ,SADG;AADW;AAnBjB,KADa,CAAd;AAkCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAClpC,4BAAV,CAAuCs+C,IAAI,CAAC/yD,KAA5C,EAAmD,CAClD;AAACoB,UAAAA,IAAI,EAAE;AAACX,YAAAA,GAAG,EAAE;AAAN,WAAP;AAAoB5B,UAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAA5B,SADkD,CAAnD,CADD,EAICk0D,IAAI,CAACz9B,cAJN;AAMA,OAPC,CAAF;AAQA,KATD;AAUA,GA7CO,CAAR;AA+CAU,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE,EADc;AAErBrF,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFY;AADhB,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAhBjB,KADa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADc;AAErBp5D,UAAAA,OAAO,EAAE;AAFY;AADhB,OAFR;AAQC02B,MAAAA,cAAc,EAAE;AARjB,KAnBa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADc;AAErBp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFY;AADhB,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAP,EAAe;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAf,EAAuB,IAAvB;AAhBjB,KA7Ba,CAAd;AAgDA,QAAMn5D,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACj4C,qBAAV,CAAgCqtD,IAAI,CAAC/yD,KAArC,EAA4CnB,MAA5C,EAAoDC,KAApD,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC9C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADc,SADhB;AAQN1/C,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNm1D,YAAAA,GAAG,EAAE;AAACpB,cAAAA,CAAC,EAAE;AAAJ,aADC;AAENqB,YAAAA,GAAG,EAAE;AAACrB,cAAAA,CAAC,EAAE;AAAJ,aAFC;AAGNsB,YAAAA,IAAI,EAAE;AAACtB,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHA;AADO,SART;AAeN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAEL/3B,gBAAAA,sBAAsB,EAAE,IAFnB;AAGLtS,gBAAAA,YAAY,EAAE,KAHT;AAIL4K,gBAAAA,aAAa,EAAE;AAJV;AADH;AADE;AADY;AAfd,OAFR;AA8BC9O,MAAAA,MAAM,EAAE;AACPkE,QAAAA,YAAY,EAAE;AAAC,gBAAI,CAAC,KAAD;AAAL;AADP,OA9BT;AAiCCuyB,MAAAA,cAAc,EAAE,CACf;AACCvyB,QAAAA,YAAY,EAAE,KADf;AAEC2K,QAAAA,UAAU,EAAE;AACXsqD,UAAAA,CAAC,EAAE;AADQ,SAFb;AAKCrqD,QAAAA,aAAa,EAAE,KALhB;AAMChL,QAAAA,SAAS,EAAE2wD;AANZ,OADe;AAjCjB,KADa,CAAd;AA+CAZ,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAChnC,sBAAV,CAAiCo8C,IAAI,CAAC/yD,KAAtC,EAA6C+yD,IAAI,CAACl0D,MAAlD,CADD,EAECk0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAxDO,CAAR;AA0DAU,EAAAA,QAAQ,CAAC,yCAAD,EAA4C,YAAY;AAC/D,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6N,QAAAA,oBAAoB,EAAE;AACrB5J,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADc,SADhB;AAQN1/C,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNm1D,YAAAA,GAAG,EAAE;AAACpB,cAAAA,CAAC,EAAE;AAAJ,aADC;AAENqB,YAAAA,GAAG,EAAE;AAACrB,cAAAA,CAAC,EAAE;AAAJ,aAFC;AAGNsB,YAAAA,IAAI,EAAE;AAACtB,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHA;AADO,SART;AAeN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAEL/3B,gBAAAA,sBAAsB,EAAE,IAFnB;AAGLtS,gBAAAA,YAAY,EAAE,KAHT;AAIL4K,gBAAAA,aAAa,EAAE;AAJV;AADH;AADE;AADY;AAfd,OAFR;AA8BC4H,MAAAA,gBAAgB,EAAE,CACjB;AACC9U,QAAAA,GAAG,EAAE,IADN;AAEC+M,QAAAA,eAAe,EAAE;AAChB4/B,UAAAA,CAAC,EAAE,CADa;AAEhB/3B,UAAAA,sBAAsB,EAAE,IAFR;AAGhBtS,UAAAA,YAAY,EAAE,KAHE;AAIhB4K,UAAAA,aAAa,EAAE;AAJC;AAFlB,OADiB,CA9BnB;AAyCCJ,MAAAA,WAAW,EAAE,CACZ;AACC9M,QAAAA,GAAG,EAAE,IADN;AAECwU,QAAAA,aAAa,EAAE,CAAC,KAAD;AAFhB,OADY,CAzCd;AA+CCqgB,MAAAA,cAAc,EAAE;AACf6jC,QAAAA,EAAE,EAAE,CACH;AACCp2D,UAAAA,YAAY,EAAE,KADf;AAEC2K,UAAAA,UAAU,EAAE;AACXsqD,YAAAA,CAAC,EAAE;AADQ,WAFb;AAKCrqD,UAAAA,aAAa,EAAE;AALhB,SADG;AADW;AA/CjB,KADa,CAAd;AA8DA+kD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC1mC,uCAAV,CACC87C,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAACx9C,gBAFN,EAGCw9C,IAAI,CAACxlD,WAHN,EAIC,CAJD,CADD,EAOCwlD,IAAI,CAACz9B,cAPN;AASA,OAVC,CAAF;AAWA,KAZD;AAaA,GA5EO,CAAR;AA6EA,CA3ZO,CAAR;;ACEAU,QAAQ,CAAC,kCAAD,EAAqC,YAAY;AACxD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,OAAKsjB,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ,SAXe;AAYvBiR,QAAAA,kBAAkB,EAAE;AAZG,OAAP;AAAA,KAAjB;;AAcA,QAAM6yB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACyB,UAAAA,SAAS,EAAE;AAACqwD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAZ,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRroC,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZzE,UADK,CAEL;AAAC36B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,CANK,EAOL,KAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAjCK,CAAP;AAkCA,GAvGC,CAAF;AAyGAonB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCiZ,IAAAA,SAAO,CAAC4B,kBAAR,GAA6BzI,QAA7B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE;AAAP,KADyC,CAA1C;AAGA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCG,IAAAA,WAAM,CAACC,eAAP,CACC6Y,SAAO,CAAC0B,kBAAR,CACC,KADD,EAEC;AAAC9gC,MAAAA,IAAI,EAAE;AAAP,KAFD,EAGC;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHD,EAIC,KAJD,EAKC,CALD,EAMC,CAND,CADD,EASC;AACCjB,MAAAA,IAAI,EAAE,0CADP;AAECy7B,MAAAA,WAAW,EAAE,KAFd;AAGCloC,MAAAA,cAAc,EAAE;AAAC0N,QAAAA,IAAI,EAAE;AAAP,OAHjB;AAICxQ,MAAAA,MAAM,EAAE;AAACwQ,QAAAA,IAAI,EAAE;AAAP,OAJT;AAKCvQ,MAAAA,KAAK,EAAE,KALR;AAMC+G,MAAAA,KAAK,EAAE,CANR;AAOC/F,MAAAA,MAAM,EAAE;AAPT,KATD;AAmBA,GApBC,CAAF;AAsBAk2B,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrCR,IAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChC,UAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBp+B,UAAAA,GAAG,EAAE;AACJ6N,YAAAA,kBAAkB,EAAE;AACnBmvB,cAAAA,kBAAkB,EAAE,MADD;AAEnBC,cAAAA,cAAc,EAAE,WAFG;AAGnBC,cAAAA,cAAc,EAAE;AAHG;AADhB,WADkB;AAQvB5xB,UAAAA,kBAAkB,EAAE;AACnBnW,YAAAA,OAAO,EAAE,CACR;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAICzE,cAAAA,SAAS,EAAE,YAJZ;AAKCnB,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB;AALR,aADQ;AADU;AARG,SAAP;AAAA,OAAjB;;AAqBA0vC,MAAAA,SAAO,CACLvE,aADF,CAEE;AAAC76B,QAAAA,IAAI,EAAE;AAAP,OAFF,EAGE,KAHF,EAIE,CAJF,EAKE,CALF,EAMGu4B,QANH,EAMaC,QANb,EAOEb,IAPF,CAOO,YAAY;AACjB,eAAOwrB,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAARA;AAAX,SAAD,CAAzB;AACA,OATF,EAUEb,IAVF,CAUO,YAAY;AACjBrR,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,EAA1C;AACA,OAZF;AAaA,KAnCC,CAAF;AAqCA98B,IAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,UAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBp+B,UAAAA,GAAG,EAAE;AACJ6N,YAAAA,kBAAkB,EAAE;AACnBmvB,cAAAA,kBAAkB,EAAE,MADD;AAEnBC,cAAAA,cAAc,EAAE,WAFG;AAGnBC,cAAAA,cAAc,EAAE;AAHG;AADhB,WADkB;AAQvB5xB,UAAAA,kBAAkB,EAAE;AACnBnW,YAAAA,OAAO,EAAE,CACR;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC6F,cAAAA,KAAK,EAAE,CAHR;AAICzE,cAAAA,SAAS,EAAE,YAJZ;AAKCnB,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AALR,aADQ;AADU;AARG,SAAP;AAAA,OAAjB;;AAoBA,UAAM6oC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,YAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,cAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,cAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,YAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,iBAAOA,GAAP;AACA;;AAED0lB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,OAXD;;AAYA/I,MAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,QAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,QAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,UAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,YAAAA,MAAM,EAAE;AACPwQ,cAAAA,IAAI,EAAE,KADC;AAEP5O,cAAAA,GAAG,EAAE;AACJe,gBAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AADH;AAFE,aADY;AAOpB+qC,YAAAA,MAAM,EAAE,CAPY;AAQpBztC,YAAAA,KAAK,EAAE,KARa;AASpBotC,YAAAA,KAAK,EAAE;AATa,WAAf,CADyB;AAY/BrF,UAAAA,WAAW,EAAE,SAZkB;AAa/BC,UAAAA,OAAO,EAAE;AACRusB,YAAAA,MAAM,EAAE,kBADA;AAER,4BAAgB;AAFR,WAbsB;AAiB/BjtB,UAAAA,MAAM,EAAE;AAjBuB,SAAhC;AAoBA,YAAMW,IAAI,GAAG;AACZ3lC,UAAAA,IAAI,EAAE;AAACyB,YAAAA,SAAS,EAAE;AAAC2wD,cAAAA,EAAE,EAAE,EAAL;AAASC,cAAAA,EAAE,EAAE;AAAb;AAAZ,WADM;AAEZxoB,UAAAA,KAAK,EAAE,CAFK;AAGZC,UAAAA,OAAO,EAAE;AACRroC,YAAAA,SAAS,EAAE;AADH;AAHG,SAAb;AAQA,eAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,UAAAA,EAAE,EAAE,IADkB;AAEtBE,UAAAA,IAAI,EAAE,gBAAY;AACjB,mBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,WAJqB;AAKtBD,UAAAA,OAAO,EAAE;AACRtiB,YAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,qBAAO;AAAC,gCAAgB;AAAjB,gBAAqCA,IAArC,CAAP;AACA;AAHO,WALa;AAUtBjO,UAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,SAAhB,CAAP;AAYA,OA7CO,CAAR;AA+CA,aAAO0H,SAAO,CACZvE,aADK,CAEL;AAAC76B,QAAAA,IAAI,EAAE;AAAP,OAFK,EAGL,KAHK,EAIL,CAJK,EAKL,CALK,EAMJu4B,QANI,EAMMC,QANN,EAOLb,IAPK,CAOA,YAAY;AACjB,eAAOwrB,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAARA;AAAX,SAAD,CAAzB;AACA,OATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,UAAAA,IAAI,EAAE,+BADP;AAECvP,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE,KADC;AAEP5O,YAAAA,GAAG,EAAE;AAACe,cAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAR;AAFE,WAFT;AAMC1C,UAAAA,KAAK,EAAE,KANR;AAOC+G,UAAAA,KAAK,EAAE,CAPR;AAQCzE,UAAAA,IAAI,EAAE;AAACoyD,YAAAA,EAAE,EAAE,EAAL;AAASC,YAAAA,EAAE,EAAE;AAAb,WARP;AASCvzD,UAAAA,SAAS,EAAE,YATZ;AAUCyE,UAAAA,KAAK,EAAE;AAVR,SADyC,CAA1C;AAcA,OAzBK,CAAP;AA0BA,KA1GC,CAAF;AA4GA6wB,IAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChC,UAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,eAAO;AACvBp+B,UAAAA,GAAG,EAAE;AACJ6N,YAAAA,kBAAkB,EAAE;AACnBmvB,cAAAA,kBAAkB,EAAE,MADD;AAEnBC,cAAAA,cAAc,EAAE,WAFG;AAGnBC,cAAAA,cAAc,EAAE;AAHG;AADhB,WADkB;AAQvB5xB,UAAAA,kBAAkB,EAAE;AACnBnW,YAAAA,OAAO,EAAE;AADU;AARG,SAAP;AAAA,OAAjB;;AAYA,UAAMgpC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,YAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,cAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,cAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,YAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,iBAAOA,GAAP;AACA;;AAED0lB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,OAXD;;AAYA/I,MAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,QAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,QAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,UAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,YAAAA,MAAM,EAAE;AACPwQ,cAAAA,IAAI,EAAE;AADC,aADY;AAIpBk9B,YAAAA,MAAM,EAAE,CAJY;AAKpBztC,YAAAA,KAAK,EAAE,KALa;AAMpBotC,YAAAA,KAAK,EAAE;AANa,WAAf,CADyB;AAS/BrF,UAAAA,WAAW,EAAE,SATkB;AAU/BC,UAAAA,OAAO,EAAE;AACRusB,YAAAA,MAAM,EAAE,kBADA;AAER,4BAAgB;AAFR,WAVsB;AAc/BjtB,UAAAA,MAAM,EAAE;AAduB,SAAhC;AAiBA,YAAMW,IAAI,GAAG;AACZ3lC,UAAAA,IAAI,EAAE;AAACyB,YAAAA,SAAS,EAAE;AAACqwD,cAAAA,EAAE,EAAE,EAAL;AAASK,cAAAA,EAAE,EAAE,EAAb;AAAiBC,cAAAA,EAAE,EAAE,EAArB;AAAyBC,cAAAA,EAAE,EAAE;AAA7B;AAAZ,WADM;AAEZxoB,UAAAA,KAAK,EAAE,CAFK;AAGZC,UAAAA,OAAO,EAAE;AACRroC,YAAAA,SAAS,EAAE;AADH;AAHG,SAAb;AAQA,eAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,UAAAA,EAAE,EAAE,IADkB;AAEtBE,UAAAA,IAAI,EAAE,gBAAY;AACjB,mBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,WAJqB;AAKtBD,UAAAA,OAAO,EAAE;AACRtiB,YAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,qBAAO;AAAC,gCAAgB;AAAjB,gBAAqCA,IAArC,CAAP;AACA;AAHO,WALa;AAUtBjO,UAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,SAAhB,CAAP;AAYA,OA1CO,CAAR;AA4CA,aAAO0H,SAAO,CACZvE,aADK,CAEL;AAAC76B,QAAAA,IAAI,EAAE;AAAP,OAFK,EAGL,KAHK,EAIL,CAJK,EAKL,CALK,EAMJu4B,QANI,EAMMC,QANN,EAOLb,IAPK,CAOA,YAAY;AACjB,eAAOwrB,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAARA;AAAX,SAAD,CAAzB;AACA,OATK,EAULb,IAVK,CAUA,YAAY;AACjBrR,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,UAAAA,IAAI,EAAE,+BADP;AAECvP,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WAFT;AAKCvQ,UAAAA,KAAK,EAAE,KALR;AAMC+G,UAAAA,KAAK,EAAE,CANR;AAOCzE,UAAAA,IAAI,EAAE;AAAC8xD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B,WAPP;AAQCvzD,UAAAA,SAAS,EAAE,YARZ;AASCyE,UAAAA,KAAK,EAAE;AATR,SADyC,CAA1C;AAaA,OAxBK,CAAP;AAyBA,KA9FC,CAAF;AA+FA,GAjPO,CAAR;AAmPA6wB,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AACjD,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB5xB,QAAAA,kBAAkB,EAAE;AACnBnM,UAAAA,KAAK,EAAE;AACNhK,YAAAA,OAAO,EAAE,CACR,CACC;AACC+C,cAAAA,cAAc,EAAE;AAAC0N,gBAAAA,IAAI,EAAE;AAAP,eADjB;AAECxQ,cAAAA,MAAM,EAAE;AACPwQ,gBAAAA,IAAI,EAAE;AADC,eAFT;AAKCvQ,cAAAA,KAAK,EAAE,KALR;AAMC+G,cAAAA,KAAK,EAAE,CANR;AAOC/F,cAAAA,MAAM,EAAE;AAPT,aADD,CADQ;AADH;AADY;AARG,OAAP;AAAA,KAAjB;;AA0BA,QAAM8nC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACyB,UAAAA,SAAS,EAAE;AAACqwD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAZ,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRroC,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA0H,IAAAA,SAAO,CAACF,+BAAR,CAAwC;AAACl/B,MAAAA,IAAI,EAAE;AAAP,KAAxC,EACCu4B,QADD,EAECC,QAFD;AAKA,WAAO2qB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAY;AAChErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,+BADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAdM,CAAP;AAeA,GAvGC,CAAF;AAyGA6wB,EAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACvC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB5xB,QAAAA,kBAAkB,EAAE;AACnBnW,UAAAA,OAAO,EAAE;AADU;AARG,OAAP;AAAA,KAAjB;;AAYA,QAAMgpC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACyB,UAAAA,SAAS,EAAE;AAACqwD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAZ,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRroC,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA0H,IAAAA,SAAO,CAACmD,qBAAR,CACC;AAACviC,MAAAA,IAAI,EAAE;AAAP,KADD,EAEC,KAFD,EAGC,CAHD,EAIC,CAJD,EAKC,KALD,EAMC,IAND,EAOEu4B,QAPF,EAOYC,QAPZ;AASA,WAAO2qB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAY;AAChErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,+BADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAdM,CAAP;AAeA,GA7FC,CAAF;AA8FA,CAxmBO,CAAR;;ACAA,IAAMuzD,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,iBAAe,YAAmC;AAAA,MAAlC70D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACvT,mBAAZ,CAAgC7C,GAArC;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACvT,mBAAZ,CAAgC5C,cAArC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACvT,mBAAZ,CAAgCzC,KAAhC,CAAsCJ,GAA3C;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAACvT,mBAAZ,CAAgCpC,GAAhC,CAAoCC,OAApC,CAA4CE,QAAjD;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAACvT,mBAAZ,CAAgCpC,GAAhC,CAAoCC,OAApC,CAA4CC,KAAjD;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACvT,mBAAZ,CAAgCpC,GAAhC,CAAoCC,OAApC,CAA4CL,SAAjD;AACC,aAAOrsB,MAAM,CAAC6jC,kBAAP,CAA0BrwC,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD;AACC,aAAO/uC,KAAP;AAdF;AAgBA,CAjBD;;ACNAg2B,QAAQ,CAAC,mCAAD,EAAsC,YAAY;AACzDA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,yBAAP;AAAkChN,QAAAA,IAAI,EAAE;AAAxC,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oCADC;AAEP/H,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KATa,EAkBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oCADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAlBa,CAAd;AAkCAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,+BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,+BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uCADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GApCO,CAAR;AAsCAE,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpC,QAAMk9B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE;AADC,OALT;AAQCknB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAV;AADQ;AARjB,KADa,CAAd;AAcA8zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GArBC,CAAF;AAuBAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAvVO,CAAR;;ACAA4nB,QAAQ,CAAC,oCAAD,EAAuC,YAAY;AAC1DR,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnBlR,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADW;AAEnBG,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE;AAAC8E,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAazE,UAAAA,EAAE,EAAE;AAACyE,YAAAA,CAAC,EAAE;AAAJ,WAAjB;AAAyBxE,UAAAA,EAAE,EAAE;AAACwE,YAAAA,CAAC,EAAE,CAAJ;AAAOvC,YAAAA,OAAO,EAAE;AAAhB;AAA7B,SAFY;AAGnB72D,QAAAA,OAAO,EAAE,CACR;AACC+C,UAAAA,cAAc,EAAE;AAACO,YAAAA,KAAK,EAAE;AAAR,WADjB;AAECrD,UAAAA,MAAM,EAAE;AAACuD,YAAAA,QAAQ,EAAE;AAAX,WAFT;AAGCtD,UAAAA,KAAK,EAAE,KAHR;AAIC6F,UAAAA,KAAK,EAAE,CAJR;AAKC5F,UAAAA,KAAK,EAAE,CACN,OADM,EAEN,QAFM,EAGN,OAHM,EAIN,QAJM,EAKN,OALM,EAMN,OANM,EAON,SAPM;AALR,SADQ;AAHU;AADP,KAAd;AAuBA,QAAM4C,cAAc,GAAG;AAACO,MAAAA,KAAK,EAAE;AAAR,KAAvB;AACA,QAAMrD,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAM/F,MAAM,GAAG,CAAf;AAEA,QAAMw1B,cAAc,GAAG,CAAC;AAAC70B,MAAAA,GAAG,EAAE;AAAN,KAAD,EAAkB;AAACA,MAAAA,GAAG,EAAE;AAAN,KAAlB,CAAvB;AAEAk1B,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAACh4C,UAAV,CACC3F,KADD,EAEC2B,cAFD,EAGC9C,MAHD,EAICC,KAJD,EAKC+G,KALD,EAMC/F,MAND,CADD,EASCw1B,cATD;AAWA,GA3CC,CAAF;AA6CAU,EAAAA,QAAQ,CAAC,YAAD,EAAe,YAAY;AAClC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+U,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AADY;AADd,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACN+U,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AADY;AADd,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+U,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC9xD,cAAAA,IAAI,EAAE;AAAC42D,gBAAAA,CAAC,EAAE;AAAJ;AAAP,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAC42D,gBAAAA,CAAC,EAAE;AAAJ;AAAP;AAFE;AADY;AADd,OAFR;AAUC1iC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAVjB,KAnBa,CAAd;AAiCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAACvrC,UAAV,CAAqB2gD,IAAI,CAAC/yD,KAA1B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1CO,CAAR;AA4CAE,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,SAAS,CAAC35C,WAAV,CAAsB;AACrB+Q,MAAAA,kBAAkB,EAAE;AADC,KAAtB,CADD,EAIC,OAJD;AAMA,GAPC,CAAF;AASAygB,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7B,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WADE;AAENumD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WAFE;AAGNwmD,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP;AAHE;AADY;AADP,KAAd;AASA,QAAMnO,MAAM,GAAG,QAAf;AACA,QAAMy2B,cAAc,GAAG,CACtB;AAAC8X,MAAAA,CAAC,EAAE,CAAJ;AAAOpgC,MAAAA,MAAM,EAAE;AAAf,KADsB,EAEtB;AAACogC,MAAAA,CAAC,EAAE,CAAJ;AAAOpgC,MAAAA,MAAM,EAAE;AAAf,KAFsB,CAAvB;AAKA2oB,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAACloC,WAAV,CAAsBzV,KAAtB,EAA6BnB,MAA7B,CADD,EAECy2B,cAFD;AAIA,GApBC,CAAF;AAsBAE,EAAAA,EAAE,CAAC,sBAAD,EAAyB,YAAY;AACtC,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WADE;AAENumD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WAFE;AAGNwmD,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP;AAHE;AADY;AADP,KAAd;AASA,QAAMnO,MAAM,GAAG;AAACmO,MAAAA,MAAM,EAAE;AAAT,KAAf;AACA,QAAMsoB,cAAc,GAAG,CACtB;AAAC8X,MAAAA,CAAC,EAAE,CAAJ;AAAOpgC,MAAAA,MAAM,EAAE;AAAf,KADsB,EAEtB;AAACogC,MAAAA,CAAC,EAAE,CAAJ;AAAOpgC,MAAAA,MAAM,EAAE;AAAf,KAFsB,CAAvB;AAKA2oB,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAACjoC,oBAAV,CAA+B1V,KAA/B,EAAsCnB,MAAtC,CADD,EAECy2B,cAFD;AAIA,GApBC,CAAF;AAsBAE,EAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAY;AAClD,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WADE;AAENumD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WAFE;AAGNwmD,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP;AAHE;AADY;AADP,KAAd;AASA,QAAM+B,MAAM,GAAG,CAAC;AAAC3N,MAAAA,IAAI,EAAE;AAACX,QAAAA,GAAG,EAAE,IAAN;AAAY5B,QAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAApB;AAAP,KAAD,CAAf;AACA,QAAMy2B,cAAc,GAAG;AACtB6jC,MAAAA,EAAE,EAAE,CACH;AACCnsD,QAAAA,MAAM,EAAE,IADT;AAECogC,QAAAA,CAAC,EAAE;AAFJ,OADG,EAKH;AACCpgC,QAAAA,MAAM,EAAE,IADT;AAECogC,QAAAA,CAAC,EAAE;AAFJ,OALG,EASH;AACCpgC,QAAAA,MAAM,EAAE,KADT;AAECogC,QAAAA,CAAC,EAAE;AAFJ,OATG;AADkB,KAAvB;AAiBAzX,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAAC7qC,gCAAV,CAA2C9S,KAA3C,EAAkD+O,MAAlD,CADD,EAECumB,cAFD;AAIA,GAhCC,CAAF;AAkCAE,EAAAA,EAAE,CAAC,yCAAD,EAA4C,YAAY;AACzD,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WADE;AAENumD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP,WAFE;AAGNwmD,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP;AAHE;AADY;AADP,KAAd;AASA,QAAM+B,MAAM,GAAG,CAAC;AAAC3N,MAAAA,IAAI,EAAE;AAACX,QAAAA,GAAG,EAAE,IAAN;AAAY5B,QAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAApB;AAAP,KAAD,CAAf;AACA,QAAMy2B,cAAc,GAAG;AACtB6jC,MAAAA,EAAE,EAAE,CACH;AACCnsD,QAAAA,MAAM,EAAE,IADT;AAECogC,QAAAA,CAAC,EAAE;AAFJ,OADG,EAKH;AACCpgC,QAAAA,MAAM,EAAE,IADT;AAECogC,QAAAA,CAAC,EAAE;AAFJ,OALG,EASH;AACCpgC,QAAAA,MAAM,EAAE,KADT;AAECogC,QAAAA,CAAC,EAAE;AAFJ,OATG;AADkB,KAAvB;AAiBAzX,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAACtqC,uCAAV,CAAkDrT,KAAlD,EAAyD+O,MAAzD,CADD,EAECumB,cAFD;AAIA,GAhCC,CAAF;AAkCAE,EAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAY;AACpD,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLgsC,cAAAA,CAAC,EAAE,CADE;AAELpgC,cAAAA,MAAM,EAAE,IAFH;AAGLqI,cAAAA,sBAAsB,EAAE;AAHnB;AADH,WADE;AAQNk+C,UAAAA,EAAE,EAAE;AACHnyD,YAAAA,IAAI,EAAE;AACLgsC,cAAAA,CAAC,EAAE,CADE;AAELpgC,cAAAA,MAAM,EAAE,IAFH;AAGLqI,cAAAA,sBAAsB,EAAE;AAHnB;AADH,WARE;AAeNm+C,UAAAA,EAAE,EAAE;AACHpyD,YAAAA,IAAI,EAAE;AACLgsC,cAAAA,CAAC,EAAE,CADE;AAELpgC,cAAAA,MAAM,EAAE,KAFH;AAGLqI,cAAAA,sBAAsB,EAAE;AAHnB;AADH;AAfE;AADY;AADP,KAAd;AA2BA,QAAMtG,MAAM,GAAG,CAAC;AAAC3N,MAAAA,IAAI,EAAE;AAACX,QAAAA,GAAG,EAAE,IAAN;AAAY5B,QAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAApB;AAAP,KAAD,CAAf;AACA,QAAMy2B,cAAc,GAAG;AACtB6jC,MAAAA,EAAE,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf;AADkB,KAAvB;AAIAxjC,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAACnqC,kCAAV,CAA6CxT,KAA7C,EAAoD+O,MAApD,CADD,EAECumB,cAFD;AAIA,GArCC,CAAF;AAuCAE,EAAAA,EAAE,CAAC,qCAAD,EAAwC,YAAY;AACrD,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLgsC,cAAAA,CAAC,EAAE,CADE;AAELpgC,cAAAA,MAAM,EAAE,IAFH;AAGLqI,cAAAA,sBAAsB,EAAE,KAHnB;AAIL1H,cAAAA,aAAa,EAAE;AAJV;AADH,WADE;AASN4lD,UAAAA,EAAE,EAAE;AACHnyD,YAAAA,IAAI,EAAE;AACLgsC,cAAAA,CAAC,EAAE,CADE;AAELpgC,cAAAA,MAAM,EAAE,IAFH;AAGLqI,cAAAA,sBAAsB,EAAE,KAHnB;AAIL1H,cAAAA,aAAa,EAAE;AAJV;AADH,WATE;AAiBN6lD,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP;AAjBE;AADY;AADP,KAAd;AAuBA,QAAMnO,MAAM,GAAG;AAACmO,MAAAA,MAAM,EAAE;AAAT,KAAf;AACA,QAAMsoB,cAAc,GAAG,CACtB;AACCjgB,MAAAA,sBAAsB,EAAE,KADzB;AAEC1H,MAAAA,aAAa,EAAE;AAFhB,KADsB,EAKtB;AACC0H,MAAAA,sBAAsB,EAAE,KADzB;AAEC1H,MAAAA,aAAa,EAAE;AAFhB,KALsB,CAAvB;AAWAgoB,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAAC9nC,mCAAV,CAA8C7V,KAA9C,EAAqDnB,MAArD,CADD,EAECy2B,cAFD;AAIA,GAxCC,CAAF;AA0CAE,EAAAA,EAAE,CAAC,0BAAD,EAA6B,YAAY;AAC1C,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE,IAAf;AAAqB4E,cAAAA,aAAa,EAAE;AAApC;AAAP,WADE;AAEN4hD,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACgsC,cAAAA,CAAC,EAAE,CAAJ;AAAOpgC,cAAAA,MAAM,EAAE;AAAf;AAAP;AAFE;AADY;AADP,KAAd;AAQA,QAAMnO,MAAM,GAAG,QAAf;AACA,QAAMy2B,cAAc,GAAG,IAAvB;AAEAK,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAAC7nC,wBAAV,CAAmC9V,KAAnC,EAA0CnB,MAA1C,CADD,EAECy2B,cAFD;AAIA,GAhBC,CAAF;AAkBAE,EAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAY;AACxD,QAAMx1B,KAAK,GAAG;AACb+U,MAAAA,kBAAkB,EAAE;AACnB9Q,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLgsC,cAAAA,CAAC,EAAE,CADE;AAELpgC,cAAAA,MAAM,EAAE,IAFH;AAGLqI,cAAAA,sBAAsB,EAAE,KAHnB;AAILtS,cAAAA,YAAY,EAAE,KAJT;AAKLJ,cAAAA,SAAS,EAAE,KALN;AAMLgL,cAAAA,aAAa,EAAE;AANV;AADH;AADE;AADY;AADP,KAAd;AAgBA,QAAM9O,MAAM,GAAG;AACdkE,MAAAA,YAAY,EAAE;AACb,cAAI,CAAC,KAAD;AADS;AADA,KAAf;AAKA,QAAMuyB,cAAc,GAAG,CACtB;AACCjgB,MAAAA,sBAAsB,EAAE,KADzB;AAECtS,MAAAA,YAAY,EAAE,KAFf;AAGC4K,MAAAA,aAAa,EAAE,KAHhB;AAIChL,MAAAA,SAAS,EAAE;AAJZ,KADsB,CAAvB;AASAgzB,IAAAA,WAAM,CAACC,eAAP,CACC+nB,SAAS,CAAC3oC,sCAAV,CAAiDhV,KAAjD,EAAwDnB,MAAxD,CADD,EAECy2B,cAFD;AAIA,GAnCC,CAAF,CAtT0D;AA4V1D,CA5VO,CAAR;;ACEAU,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,OAAKsjB,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxB,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AACXxK,UAAAA,OAAO,EAAE,CAAC;AAACC,YAAAA,MAAM,EAAE;AAACkD,cAAAA,cAAc,EAAE;AAAjB;AAAT,WAAD;AADE;AARW,OAAP;AAAA,KAAjB;;AAYAikC,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wCADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AACLgI,YAAAA,UAAU,EAAE,CAAC;AAAC3I,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAACW,gBAAAA,cAAc,EAAE;AAAjB;AAAlB,aAAD;AADP;AADc,SAAf,CADyB;AAM/B8kC,QAAAA,WAAW,EAAE,SANkB;AAO/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAPsB;AAW/BjtB,QAAAA,MAAM,EAAE;AAXuB,OAAhC;AAcA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA/BO,CAAR;AAiCA,WAAO0H,SAAO,CACZ9d,MADK,CACE,IADF,EACQ,IADR,EACciX,QADd,EACwBC,QADxB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,gBADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AACLW,YAAAA,cAAc,EAAE;AADX;AAFP,SADK;AAHP,OADyC,EAazC;AACCqM,QAAAA,IAAI,EAAE,8BADP;AAECvP,QAAAA,MAAM,EAAE;AACPkD,UAAAA,cAAc,EAAE;AADT,SAFT;AAKCjD,QAAAA,KAAK,EAAEw0D;AALR,OAbyC,CAA1C;AAqBA,KA3BK,CAAP;AA4BA,GA1EC,CAAF;AA4EA99B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxB,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AARW,OAAP;AAAA,KAAjB;;AAUA,QAAMw+B,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;AACAyqB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AAEA,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KATD;;AAUA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wCADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAACgI,YAAAA,UAAU,EAAE,CAAC;AAAC3I,cAAAA,GAAG,EAAE;AAAN,aAAD;AAAb;AADc,SAAf,CADyB;AAI/BomC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA7BO,CAAR;AA+BA,WAAO0H,SAAO,UAAP,CACE;AAAChuC,MAAAA,GAAG,EAAE;AAAN,KADF,EACemnC,QADf,EACyBC,QADzB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjB,aAAOsrB,iBAAiB,CAAC,CAAD,CAAjB,CAAqB,MAArB,CAAP;AACA38B,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACC7xD,QAAAA,GAAG,EAAE,IADN;AAEC2N,QAAAA,IAAI,EAAE;AAFP,OADyC,EAKzC;AACCA,QAAAA,IAAI,EAAE,sCADP;AAECs5B,QAAAA,QAAQ,EAAE,YAFX;AAGCrhC,QAAAA,IAAI,EAAE,CAAC,IAAD;AAHP,OALyC,CAA1C;AAWA,KAlBK,CAAP;AAmBA,GAvEC,CAAF;AAyEAmvB,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;;AAEjD,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AACXR,UAAAA,KAAK,EAAE;AACNhK,YAAAA,OAAO,EAAE,CACR,CACC;AACC+C,cAAAA,cAAc,EAAE;AAAC0N,gBAAAA,IAAI,EAAE;AAAP,eADjB;AAECxQ,cAAAA,MAAM,EAAE;AACPwQ,gBAAAA,IAAI,EAAE;AADC,eAFT;AAKCvQ,cAAAA,KAAK,EAAE,KALR;AAMC+G,cAAAA,KAAK,EAAE,CANR;AAOC/F,cAAAA,MAAM,EAAE;AAPT,aADD,CADQ;AADH;AADI;AARW,OAAP;AAAA,KAAjB;;AA0BA,QAAM8nC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACgI,UAAAA,UAAU,EAAE;AAAC8pD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAb,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACR9hC,UAAAA,UAAU,EAAE;AADJ;AAHG,OAAb;AAQA,aAAOojC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA,WAAO0H,SAAO,CACZF,+BADK,CAC2B;AAACl/B,MAAAA,IAAI,EAAE;AAAP,KAD3B,EAC0Cu4B,QAD1C,EACoDC,QADpD,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,sBADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAnBK,CAAP;AAoBA,GAxGC,CAAF;AA0GAqxB,EAAAA,QAAQ,CAAC,qBAAD,EAAwB,YAAY;AAC3CR,IAAAA,EAAE,CAAC,WAAD,EAAc,YAAY;AAC3BiZ,MAAAA,SAAO,CAAC+B,mBAAR,CAA4B;AAC3B1sC,QAAAA,SAAS,EAAE;AADgB,OAA5B,EAEG8jC,QAFH;AAIAjS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAC7xD,QAAAA,GAAG,EAAE,IAAN;AAAY2N,QAAAA,IAAI,EAAE;AAAlB,OADyC,CAA1C;AAGA,KARC,CAAF;AAUAonB,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BiZ,MAAAA,SAAO,CAAC+B,mBAAR,CAA4B;AAC3B9uC,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AADe,OAA5B,EAEGkmC,QAFH;AAIAjS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACjsD,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAAP;AAAqB+H,QAAAA,IAAI,EAAE;AAA3B,OADyC,CAA1C;AAGA,KARC,CAAF;AASA,GApBO,CAAR;AAsBAonB,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AACXR,UAAAA,KAAK,EAAE;AACNvC,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADA;AAENzH,YAAAA,OAAO,EAAE,CACR,CACC;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC+G,cAAAA,KAAK,EAAE,CAHR;AAIC/F,cAAAA,MAAM,EAAE;AAJT,aADD,CADQ;AAFH,WADI;AAcXmE,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aADE;AAEN8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAFE;AAdI;AARW,OAAP;AAAA,KAAjB;;AA4BA,QAAMmnC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACgI,UAAAA,UAAU,EAAE;AAAC8pD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAb,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACR9hC,UAAAA,UAAU,EAAE;AADJ;AAHG,OAAb;AAQA,aAAOojC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZR,WADK,GACSrG,QADT,EACmBC,QADnB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE;AAAP,OADyC,EAEzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAFyC,CAA1C;AAYA,KAlBK,CAAP;AAmBA,GAtGC,CAAF;AAwGAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN;AAAL,WADI;AAEXuG,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFF;AARW,OAAP;AAAA,KAAjB;;AAaA,QAAMtsB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wCADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAACgI,YAAAA,UAAU,EAAE,CAAC;AAAC3I,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB,aAAD;AAAb;AADc,SAAf,CADyB;AAI/BrtB,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACgI,UAAAA,UAAU,EAAE,CAAC;AAAC3I,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAAC8yD,cAAAA,IAAI,EAAE;AAAP;AAAlB,WAAD;AAAb,SADM;AAEZjpB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRvb,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAO6c,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KArCO,CAAR;AAuCA,WAAO0H,SAAO,CACZ/E,UADK,CACM,IADN,EACY9B,QADZ,EACsBC,QADtB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,gBADP;AAEChN,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAAC8yD,YAAAA,IAAI,EAAE;AAAP;AAAlB,SAAD,CAFP;AAGCr1D,QAAAA,MAAM,EAAEy0D;AAHT,OADyC,EAMzC;AACCllD,QAAAA,IAAI,EAAE,mCADP;AAEC3N,QAAAA,GAAG,EAAE,IAFN;AAGC0uC,QAAAA,QAAQ,EAAE;AAHX,OANyC,CAA1C;AAYA,KAlBK,CAAP;AAmBA,GApFC,CAAF;AAsFA3Z,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AARW,OAAP;AAAA,KAAjB;;AAUA,QAAMw+B,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAaAN,IAAAA,SAAO,CAACsB,YAAR,CAAqB,IAArB,EAA2BnI,QAA3B;AAEA,WAAO4qB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE,2BAAP;AAAoC3N,QAAAA,GAAG,EAAE;AAAzC,OADyC,CAA1C;AAGA,KAJM,CAAP;AAKA,GA/BC,CAAF;AAiCA+0B,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;;AAE9B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN;AAAL,WADI;AAEXuG,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFF;AARW,OAAP;AAAA,KAAjB;;AAaAzlB,IAAAA,SAAO,CAAChG,YAAR,CAAqB,YAArB,EAAmC,IAAnC,EAAyC;AACxChoC,MAAAA,GAAG,EAAE,IADmC;AAExCW,MAAAA,IAAI,EAAE;AAAC8yD,QAAAA,IAAI,EAAE;AAAP;AAFkC,KAAzC,EAGGtsB,QAHH,EAGaC,QAHb;AAKAlS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,0BADP;AAEChN,MAAAA,IAAI,EAAE,CACL;AACCX,QAAAA,GAAG,EAAE,YADN;AAECW,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAAC8yD,cAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFP,OADK;AAFP,KADyC,CAA1C;AAWA,GA/BC,CAAF;AAiCA1+B,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ;AAXe,OAAP;AAAA,KAAjB;;AAaA,QAAM8jC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACgI,UAAAA,UAAU,EAAE;AAAC8pD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAb,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACR9hC,UAAAA,UAAU,EAAE;AADJ;AAHG,OAAb;AAQA,aAAOojC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZzE,UADK,CAEL;AAAC36B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,CANK,EAOL,KAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAjCK,CAAP;AAkCA,GAtGC,CAAF;AAwGAonB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCiZ,IAAAA,SAAO,CAAC2B,eAAR,CAAwB,KAAxB,EAA+BxI,QAA/B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,MAAAA,WAAW,EAAE,KAAd;AAAqBz7B,MAAAA,IAAI,EAAE;AAA3B,KADyC,CAA1C;AAGA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzB,QAAMoS,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA,QAAMlH,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aAAL;AAAkB8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAAtB;AADI;AARW,OAAP;AAAA,KAAjB;;AAaA,WAAOguC,SAAO,CACZ7E,OADK,CAEL,CAAC,IAAD,EAAO,IAAP,CAFK,EAGL,KAHK,EAIJhC,QAJI,EAKLZ,IALK,CAKA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAPK,EAQLb,IARK,CAQA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAFP;AAGC+H,QAAAA,IAAI,EAAE;AAHP,OADyC,CAA1C;AAOA,KAhBK,CAAP;AAiBA,GA3CC,CAAF;AA6CAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,SAAO,CAACwB,YAAR,CAAqB,KAArB,EAA4BrI,QAA5B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,MAAAA,WAAW,EAAE,KAAd;AAAqBz7B,MAAAA,IAAI,EAAE;AAA3B,KADyC,CAA1C;AAGA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB9iC,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SARe;AASvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SATc;AAUvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ;AAVe,OAAP;AAAA,KAAjB;;AAYA,QAAM8jC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wDADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBvQ,UAAAA,KAAK,EAAE;AAFa,SAAf,CADyB;AAK/B+nC,QAAAA,WAAW,EAAE,SALkB;AAM/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SANsB;AAU/BjtB,QAAAA,MAAM,EAAE;AAVuB,OAAhC;AAaA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACgI,UAAAA,UAAU,EAAE;AAAC8pD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAb,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACR9hC,UAAAA,UAAU,EAAE;AADJ;AAHG,OAAb;AAQA,aAAOojC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAtCO,CAAR;AAwCA,WAAO0H,SAAO,CACZtE,eADK,CAEL;AAAC96B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,KALK,EAML,IANK,EAOL,EAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,uCADP;AAECy7B,QAAAA,WAAW,EAAE,KAFd;AAGCloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAHjB;AAICxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAJT;AAKCvQ,QAAAA,KAAK,EAAE;AALR,OADyC,EAQzC;AACCsP,QAAAA,IAAI,EAAE,4BADP;AAECvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAFT;AAGCvQ,QAAAA,KAAK,EAAE,KAHR;AAICsC,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SAJP;AAKC9yD,QAAAA,GAAG,EAAE;AALN,OARyC,CAA1C;AAgBA,KA7BK,CAAP;AA8BA,GA/FC,CAAF;AAiGA+0B,EAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAY;AACnC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB9iC,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SARe;AASvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SATc;AAUvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ;AAVe,OAAP;AAAA,KAAjB;;AAYA,QAAM8jC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wDADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBvQ,UAAAA,KAAK,EAAE;AAFa,SAAf,CADyB;AAK/B+nC,QAAAA,WAAW,EAAE,SALkB;AAM/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SANsB;AAU/BjtB,QAAAA,MAAM,EAAE;AAVuB,OAAhC;AAaA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACgI,UAAAA,UAAU,EAAE;AAAC8pD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAb,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACR9hC,UAAAA,UAAU,EAAE;AADJ;AAHG,OAAb;AAQA,aAAOojC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAtCO,CAAR;AAwCA,WAAO0H,SAAO,CACZiD,iBADK,CACa;AAACriC,MAAAA,IAAI,EAAE;AAAP,KADb,EAC4B,KAD5B,EACmCu4B,QADnC,EAC6CC,QAD7C,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,uCADP;AAECy7B,QAAAA,WAAW,EAAE,KAFd;AAGChrC,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAIC1N,QAAAA,cAAc,EAAE,IAJjB;AAKC7C,QAAAA,KAAK,EAAE;AALR,OADyC,EAQzC;AACCsP,QAAAA,IAAI,EAAE,4BADP;AAECvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAFT;AAGCvQ,QAAAA,KAAK,EAAE,IAHR;AAICsC,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SAJP;AAKC9yD,QAAAA,GAAG,EAAE;AALN,OARyC,CAA1C;AAgBA,KAtBK,CAAP;AAuBA,GAxFC,CAAF;AAyFA,CA35BO,CAAR;;ACAA,IAAMy3D,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,IAAM0E,wBAAwB,GAAG,SAAjC;;AAEA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACx5D,KAAD,EAAQ+uC,MAAR,EAAmB;AACvC,MAAIA,MAAM,IAAIA,MAAM,CAAC3tC,IAAjB,IAAyB2tC,MAAM,CAAC3tC,IAAP,CAAYtB,MAAzC,EAAiD;AAChDivC,IAAAA,MAAM,CAAC3tC,IAAP,CAAYf,OAAZ,CAAoB,UAAAG,KAAK,EAAI;AAC5B;AACA;AACA,UAAG,CAACA,KAAK,CAACY,IAAN,CAAWwO,KAAf,EAAsB;AACrBpP,QAAAA,KAAK,CAACY,IAAN,CAAWwO,KAAX,GAAmB2pD,wBAAnB;AACA;AACD,KAND;AAOA;;AAED,SAAO/sD,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;AACA,CAZD;;AAcA,iBAAe,YAAmC;AAAA,MAAlC/uC,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAAClV,UAAZ,CAAuBlB,GAA5B;AACC,aAAOghC,YAAY,CAACx5D,KAAD,EAAQ+uC,MAAR,CAAnB;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBjB,cAA5B;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBC,MAA5B;AACC,aAAOntB,MAAM,CAACojD,MAAP,CAAc5vD,KAAd,EAAqB+uC,MAArB,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBG,MAAvB,CAA8BC,MAAnC;AACC,aAAOttB,MAAM,CAACkpD,YAAP,CAAoB11D,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBG,MAAvB,CAA8BE,eAAnC;AACC,aAAOvtB,MAAM,CAACopD,oBAAP,CAA4B51D,KAA5B,EAAmC+uC,MAAnC,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBG,MAAvB,CAA8BG,MAAnC;AACC,aAAOxtB,MAAM,CAACi8B,YAAP,CAAoBzoC,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBd,KAAvB,CAA6BJ,GAAlC;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBd,KAAvB,CAA6BC,SAAlC;AACC,aAAOrsB,MAAM,CAACmqD,YAAP,CAAoB32D,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBd,KAAvB,CAA6BsB,WAAlC;AACC,aAAO1tB,MAAM,CAAC0jC,UAAP,CAAkBlwC,KAAlB,EAAyB+uC,MAAzB,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBE,YAA5B;AACC,aAAOptB,MAAM,CAACgpD,WAAP,CAAmBx1D,KAAnB,EAA0B+uC,MAA1B,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBV,cAA5B;AACC,aAAOxsB,MAAM,CAAC4hD,SAAP,CAAiBpuD,KAAjB,EAAwB+uC,MAAxB,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBT,GAAvB,CAA2BC,OAA3B,CAAmCC,KAAxC;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBT,GAAvB,CAA2BC,OAA3B,CAAmCE,QAAxC;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBT,GAAvB,CAA2BI,IAA3B,CAAgCD,QAArC;AACC,aAAO5sB,MAAM,CAAC+oD,eAAP,CAAuBv1D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAAClV,UAAZ,CAAuBT,GAAvB,CAA2BI,IAA3B,CAAgCF,KAArC;AACC,aAAO3sB,MAAM,CAACyjC,YAAP,CAAoBjwC,KAApB,EAA2B+uC,MAA3B,CAAP;;AAED,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBE,YAA7B;AACC,aAAOpuB,MAAM,CAACsqD,eAAP,CAAuB92D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBC,iBAA7B;AACC,aAAOnuB,MAAM,CAACuqD,eAAP,CAAuB/2D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBZ,MAAnB,CAA0BgB,sBAA/B;AACC,aAAOruB,MAAM,CAACupD,0BAAP,CAAkC/1D,KAAlC,EAAyC+uC,MAAzC,CAAP;;AACD;AACC,aAAO/uC,KAAP;AAvCF;AAyCA,CA1CD;;ACtBAg2B,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AACjDA,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,gBAAP;AAAyBhN,QAAAA,IAAI,EAAE;AAA/B,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gBADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AAACiO,YAAAA,IAAI,EAAE;AAAP;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AACLiO,YAAAA,IAAI,EAAE,QADD;AAELO,YAAAA,KAAK,EAAE;AAFF;AAFP,SALK;AAFC,OAHT;AAmBC0lB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AACHzyD,YAAAA,GAAG,EAAE,IADF;AAEHW,YAAAA,IAAI,EAAE;AAACiO,cAAAA,IAAI,EAAE,OAAP;AAAgBO,cAAAA,KAAK,EAAE;AAAvB;AAFH,WADE;AAKN2jD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAACiO,cAAAA,IAAI,EAAE,QAAP;AAAiBO,cAAAA,KAAK,EAAE;AAAxB;AAAlB;AALE;AADQ;AAnBjB,KAba,CAAd;AA4CA8iD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GArDO,CAAR;AAuDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2BADC;AAEP/H,QAAAA,IAAI,EAAE;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAPjB,KATa,EAkBb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2BADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAlBa,CAAd;AAkCAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAR,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,mBADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACuvD,UAAAA,EAAE,EAAE;AAAL;AADQ;AAPjB,KADa,EAYb;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAR,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,mBADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AADQ;AAPjB,KAZa,CAAd;AAyBAyuD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlCO,CAAR;AAoCAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AAACgH,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAd,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AAACwsD,UAAAA,EAAE,EAAE;AAAL;AADE;AAPjB,KADa,EAYb;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AAACgH,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAd,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AADE;AAPjB,KAZa,CAAd;AAyBA0rD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlCO,CAAR;AAoCAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAAP;AAFQ;AADP,OAFR;AAQC2tC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,mCADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAAP;AAFQ;AADE;AAbjB,KADa,EAqBb;AACCiO,MAAAA,IAAI,EAAE,uBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADP,OAFR;AAQC5oB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,mCADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADE;AAbjB,KArBa,EAyCb;AACCtoD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADP,OAFR;AAQC5oB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,mCADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACu2D,cAAAA,EAAE,EAAE;AAAL;AAAP;AAFQ;AADE;AAbjB,KAzCa,EA6Db;AACCtoD,MAAAA,IAAI,EAAE,uBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,mCADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AADQ;AADE;AAbjB,KA7Da,CAAd;AAkFAjF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3FO,CAAR;AA6FAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEPhN,QAAAA,IAAI,EAAE;AAFC,OART;AAYCk0B,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADE;AAZjB,KADa,EAoBb;AACCvjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AAACX,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACwxD,YAAAA,CAAC,EAAE;AAAJ;AAAlB,SADK,EAEL;AAACnyD,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACwxD,YAAAA,CAAC,EAAE;AAAJ;AAAlB,SAFK;AAFC,OART;AAeCt9B,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,EAAJ;AAAQkF,cAAAA,EAAE,EAAE;AAAZ;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFQ;AAGZY,UAAAA,EAAE,EAAE;AAAC/yD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAlB;AAHQ;AADE;AAfjB,KApBa,CAAd;AA6CAF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtDO,CAAR;AAwDAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE;AADH,OAFR;AAKCmwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE;AADC,OALT;AAQCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE;AADM;AARjB,KADa,EAab;AACCyQ,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ;AADH,OAFR;AAaC6uC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE;AADC,OAbT;AAgBCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ;AADM;AAhBjB,KAba,CAAd;AA6CAlE,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtDO,CAAR;AAwDAU,EAAAA,QAAQ,CAAC,YAAD,EAAe,YAAY;AAClC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADH,OAFR;AAoBC6uC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEPvP,QAAAA,MAAM,EAAE,MAFD;AAGPC,QAAAA,KAAK,EAAE;AAHA,OApBT;AAyBCw2B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADM;AAzBjB,KADa,EA6Cb;AACCmP,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADH,OAFR;AAoBC6uC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE;AAHA,OApBT;AAyBCw2B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ,EAUR;AACC/3D,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SAVQ;AADM;AAzBjB,KA7Ca,CAAd;AA6FAwyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtGO,CAAR;AAwGAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AAACuzD,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AADD,OAFR;AAKC2B,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OALT;AASC60B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACuzD,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AADQ;AATjB,KADa,EAcb;AACC/9B,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AAACyzD,UAAAA,EAAE,EAAE;AAACtqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaoqB,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAjB;AAAyBqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAA9B;AADD,OAFR;AAKC2B,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OALT;AASC60B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACyzD,UAAAA,EAAE,EAAE;AAACtqB,YAAAA,CAAC,EAAE,CAAJ;AAAOqoB,YAAAA,OAAO,EAAE;AAAhB,WAAL;AAA4B+B,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAhC;AAAwCqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAA7C;AADQ;AATjB,KAda,CAAd;AA6BAslB,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2BADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OANT;AAUC60B,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE;AAFG;AAVjB,KADa,CAAd;AAiBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1BO,CAAR;AA4BAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iCADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,iBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCmmC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OALT;AAUCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AAAP;AADQ;AAVjB,KADa,EAeb;AACCjoD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AADA;AADD,OAFR;AAOCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OAPT;AAYCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AAZjB,KAfa,CAAd;AAiCA5E,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1CO,CAAR;AA4CAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2BADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AATjB,KADa,EAcb;AACCjoD,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAP;AAA2BC,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAlC;AAAP;AADD,OAFR;AAKCxoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2BADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACkxD,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAR;AAAP;AADQ;AATjB,KAda,EA2Bb;AACCloD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2BADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAAP;AADQ;AATjB,KA3Ba,CAAd;AAyCAqsD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlDO,CAAR;AAoDAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE;AADC,OAHT;AAMCknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KADa,EASb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WADE;AAENW,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFE;AADD,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE;AADC,OART;AAWCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB,WADE;AAEN6qD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB;AAFE;AADQ;AAXjB,KATa,CAAd;AA6BAgqD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAEN+uC,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFE;AAGNY,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAHE;AADD,OAFR;AASCuqB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE;AADC,OATT;AAYCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAENgvC,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAFE;AADQ;AAZjB,KADa,CAAd;AAsBAkuC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA/BO,CAAR;AAiCAU,EAAAA,QAAQ,CAAC,4BAAD,EAA+B,YAAY;AAClD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,kBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WADQ;AAOZrE,UAAAA,EAAE,EAAE;AACHnyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,sBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WAPQ;AAaZpE,UAAAA,EAAE,EAAE;AACHpyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,wBADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD,EAAU,OAAV;AAFP;AADH,WAbQ;AAmBZpE,UAAAA,EAAE,EAAE;AACHryD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,4BADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD,EAAU,OAAV;AAFP;AADH;AAnBQ;AADP,OAFR;AA8BC9oB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sCADC;AAEPs5B,QAAAA,QAAQ,EAAE,SAFH;AAGPrhC,QAAAA,IAAI,EAAE,CAAC,KAAD,EAAQ,OAAR;AAHC,OA9BT;AAmCCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AACH9xD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,kBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WADQ;AAOZrE,UAAAA,EAAE,EAAE;AACHnyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,sBADD;AAELuoD,cAAAA,SAAS,EAAE;AAFN;AADH,WAPQ;AAaZpE,UAAAA,EAAE,EAAE;AACHpyD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,wBADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD;AAFP;AADH,WAbQ;AAmBZpE,UAAAA,EAAE,EAAE;AACHryD,YAAAA,IAAI,EAAE;AACLiO,cAAAA,IAAI,EAAE,4BADD;AAELwoD,cAAAA,UAAU,EAAE,CAAC,OAAD,EAAU,OAAV;AAFP;AADH;AAnBQ;AADE;AAnCjB,KADa,CAAd;AAmEAnF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5EO,CAAR;AA8EAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CA9/BO,CAAR;;ACAA4nB,QAAQ,CAAC,4BAAD,EAA+B,YAAY;AAClDA,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AADI;AADN,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AADI;AADN,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADI;AADN,OAFR;AAWCngC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAXjB,KAnBa,CAAd;AAkCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC/6B,aAAV,CAAwBmwC,IAAI,CAAC/yD,KAA7B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM+hC,WAAW,GAAG,SAAdA,WAAc,CAACj0D,SAAD;AAAA,aAAgB;AACnCsF,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADI;AAMX3xD,UAAAA,SAAS,EAATA;AANW;AADuB,OAAhB;AAAA,KAApB;;AAWA0xB,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAvB,EAA+D;AAC9DC,QAAAA,CAAC,EAAE;AAD2D,OAA/D;AAGA,KAJC,CAAF;AAMAxiC,IAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,MAAAA,WAAM,CAACg/B,MAAP,CAAchX,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAd;AACA,KAFC,CAAF;AAGA,GArBO,CAAR;AAuBAviC,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMx1B,KAAK,GAAG;AAACoJ,MAAAA,UAAU,EAAE;AAACtF,QAAAA,SAAS,EAAE;AAAZ;AAAb,KAAd;AAEA6xB,IAAAA,WAAM,CAACw9B,WAAP,CAAmBxV,WAAS,CAACx4C,YAAV,CAAuBnF,KAAvB,CAAnB,EAAkD,GAAlD;AACA,GAJC,CAAF;AAMAg2B,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AADI;AADN,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AADI;AADN,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADI;AADN,OAFR;AAWCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAXjB,KAnBa,CAAd;AAqCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5C,cAAV,CAAyB0uD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9CO,CAAR;AAgDAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADI;AADN,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADI;AADN,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAEg+B;AARjB,KAXa,EAqBb;AACCjkD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADI;AADN,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AARjB,KArBa,CAAd;AAmCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACz3C,QAAV,CAAmB6sD,IAAI,CAAC/yD,KAAxB,EAA+B+yD,IAAI,CAACtyD,GAApC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5CO,CAAR;AA8CAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADI;AADN,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,IAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADI;AADN,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,EAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADI;AADN,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KArBa,EA+Bb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AADN,OAFR;AAKC/C,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CALP;AAMCivB,MAAAA,cAAc,EAAE;AANjB,KA/Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADI;AADN,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AARjB,KAvCa,CAAd;AAmDAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACp3C,SAAV,CAAoBwsD,IAAI,CAAC/yD,KAAzB,EAAgC+yD,IAAI,CAAC1sD,IAArC,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAb,aAAL;AAA2BmyD,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAA/B;AADI;AADN,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAb,aAAL;AAA2BmyD,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAA/B;AADI;AADN,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,CAAd;AAuBAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACn3C,YAAV,CAAuBusD,IAAI,CAAC/yD,KAA5B,EAAmC+yD,IAAI,CAACtyD,GAAxC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZC,gBAAAA,UAAU,EAAE;AACX,4BAAQ;AADG;AADA;AADV;AADE;AADI;AADN,OAFR;AAeC2uB,MAAAA,cAAc,EAAE;AAfjB,KADa,EAkBb;AACCjmB,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZE,gBAAAA,KAAK,EAAE;AACN,4BAAQ;AADF;AADK;AADV;AADE;AADI;AADN,OAFR;AAeC0uB,MAAAA,cAAc,EAAE;AAfjB,KAlBa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AADN,OAFR;AAKCksB,MAAAA,cAAc,EAAE;AALjB,KAnCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACl3C,wBAAV,CAAmCssD,IAAI,CAAC/yD,KAAxC,EAA+C,IAA/C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GArDO,CAAR;AAuDAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXpC,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADF;AADN,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXpC,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADF;AADN,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXpC,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADF;AADN,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KArBa,CAAd;AAiCAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACt2C,kBAAV,CAA6B0rD,IAAI,CAAC/yD,KAAlC,EAAyC+yD,IAAI,CAACtyD,GAA9C,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1CO,CAAR;AA4CAU,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZC,gBAAAA,UAAU,EAAE;AACXG,kBAAAA,MAAM,EAAE;AADG;AADA;AADV;AADE;AADI;AADN,OAFR;AAeCwuB,MAAAA,cAAc,EAAE;AAfjB,KADa,EAkBb;AACCjmB,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AACXnF,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZE,gBAAAA,KAAK,EAAE;AACNE,kBAAAA,MAAM,EAAE;AADF;AADK;AADV;AADE;AADI;AADN,OAFR;AAeCwuB,MAAAA,cAAc,EAAE;AAfjB,KAlBa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNoJ,QAAAA,UAAU,EAAE;AADN,OAFR;AAKCksB,MAAAA,cAAc,EAAE;AALjB,KAnCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC92C,wBAAV,CAAmCksD,IAAI,CAAC/yD,KAAxC,EAA+C,IAA/C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GArDO,CAAR;AAuDAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AAACoJ,QAAAA,UAAU,EAAE;AAAb,OAFR;AAGCksB,MAAAA,cAAc,EAAE;AAHjB,KADa,EAMb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACoJ,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ;AAAb,OAFR;AAGCwxB,MAAAA,cAAc,EAAE;AAACxxB,QAAAA,SAAS,EAAE;AAAZ;AAHjB,KANa,EAWb;AACCuL,MAAAA,IAAI,EAAE,aADP;AAECrP,MAAAA,KAAK,EAAE;AAACoJ,QAAAA,UAAU,EAAE;AAAC1H,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAAb,OAFR;AAGC4zB,MAAAA,cAAc,EAAE;AAAC5zB,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAHjB,KAXa,CAAd;AAkBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACpyC,cAAV,CAAyBwnD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3BO,CAAR;AA6BAE,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrBoF,MAAAA,UAAU,EAAE;AADS,KAAtB,CADD,EAIC,OAJD;AAMA,GAPC,CAAF;AAQA,CAxcO,CAAR;;ACAA4sB,QAAQ,CAAC,6BAAD,EAAgC,YAAY;AACnD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AACA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,MAAMwjB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIAD,EAAAA,SAAS,CAAC,YAAY;AACrBE,IAAAA,sBAAsB;AACtB,GAFQ,CAAT;AAIA/8B,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BiZ,IAAAA,SAAO,CAACuB,aAAR,CAAsB,CAAC,IAAD,EAAO,IAAP,CAAtB,EAAoCpI,QAApC;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,gCAAP;AAAyC/H,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAA/C,KADyC,CAA1C;AAGA,GANC,CAAF;AAOA,CArBO,CAAR;;ACEA,IAAM6xD,eAAa,qCACfrD,qBADe;AAElBnzD,EAAAA,UAAU,EAAE;AAFM,EAAnB;;AAKA,iBAAe,YAAmC;AAAA,MAAlC1B,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACvU,cAAZ,CAA2B7B,GAAhC;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACvU,cAAZ,CAA2B5B,cAAhC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACvU,cAAZ,CAA2BF,eAAhC;AACC,aAAO3tB,MAAM,CAACiqD,iBAAP,CAAyBz2D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD;AACC,aAAO/uC,KAAP;AARF;AAUA,CAXD;;ACPAg2B,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACpDA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,oBAAP;AAA6BhN,QAAAA,IAAI,EAAE;AAAnC,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oBADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,+BAAP;AAAwC/H,QAAAA,IAAI,EAAE;AAA9C,OAHT;AAICivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,+BADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAba,CAAd;AA6BAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gCADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT;AAFC,OANT;AAUCivB,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE,CAAC,MAAD,EAAS,MAAT;AAFG;AAVjB,KADa,CAAd;AAkBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAzBO,CAAR;AA2BAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAlIO,CAAR;;ACAA4nB,QAAQ,CAAC,+BAAD,EAAkC,YAAY;AACrDA,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM+hC,WAAW,GAAG,SAAdA,WAAc,CAACj0D,SAAD;AAAA,aAAgB;AACnC+e,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADO;AAMd3xD,UAAAA,SAAS,EAATA;AANc;AADoB,OAAhB;AAAA,KAApB;;AAWA0xB,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAvB,EAA+D;AAC9DC,QAAAA,CAAC,EAAE;AAD2D,OAA/D;AAGA,KAJC,CAAF;AAMAxiC,IAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,MAAAA,WAAM,CAACg/B,MAAP,CAAchX,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAd;AACA,KAFC,CAAF;AAGA,GArBO,CAAR;AAuBAviC,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/B,QAAMx1B,KAAK,GAAG;AAAC6iB,MAAAA,aAAa,EAAE;AAACnhB,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAAhB,KAAd;AAEAi0B,IAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACv4C,aAAV,CAAwBpF,KAAxB,CAAvB,EAAuD,CAAC,IAAD,EAAO,IAAP,CAAvD;AACA,GAJC,CAAF;AAMAg2B,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AACxC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AADO;AADT,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AADO;AADT,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADO;AADT,OAFR;AAWCngC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAXjB,KAnBa,CAAd;AAkCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACr6B,gBAAV,CAA2ByvC,IAAI,CAAC/yD,KAAhC,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,IADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aADE;AAENswC,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aAFE;AAGNuwC,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb;AAHE;AADO;AADT,OAFR;AAWCF,MAAAA,MAAM,EAAE,CAAC,IAAD,CAXT;AAYCuS,MAAAA,cAAc,EAAE;AAZjB,KADa,EAeb;AACCjmB,MAAAA,IAAI,EAAE,IADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aADE;AAENswC,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aAFE;AAGNuwC,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb;AAHE;AADO;AADT,OAFR;AAWCF,MAAAA,MAAM,EAAE,CAAC,IAAD,CAXT;AAYCuS,MAAAA,cAAc,EAAE,CACf;AAAC0iC,QAAAA,CAAC,EAAE,CAAJ;AAAO52D,QAAAA,IAAI,EAAE;AAAC6hB,UAAAA,KAAK,EAAE;AAAR;AAAb,OADe,EAEf;AAAC+0C,QAAAA,CAAC,EAAE,CAAJ;AAAO52D,QAAAA,IAAI,EAAE;AAAC6hB,UAAAA,KAAK,EAAE;AAAR;AAAb,OAFe;AAZjB,KAfa,EAgCb;AACC5T,MAAAA,IAAI,EAAE,IADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aADE;AAENswC,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aAFE;AAGNuwC,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb;AAHE;AADO;AADT,OAFR;AAWCF,MAAAA,MAAM,EAAE,CAAC,IAAD,CAXT;AAYCuS,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE,CAAJ;AAAO52D,QAAAA,IAAI,EAAE;AAAC6hB,UAAAA,KAAK,EAAE;AAAR;AAAb,OAAD;AAZjB,KAhCa,EA8Cb;AACC5T,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aADE;AAENswC,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb,aAFE;AAGNuwC,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE;AAAR;AAAb;AAHE;AADO;AADT,OAFR;AAWCF,MAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP,CAXT;AAYCuS,MAAAA,cAAc,EAAE,CACf;AAAC0iC,QAAAA,CAAC,EAAE,CAAJ;AAAO52D,QAAAA,IAAI,EAAE;AAAC6hB,UAAAA,KAAK,EAAE;AAAR;AAAb,OADe,EAEf;AAAC+0C,QAAAA,CAAC,EAAE,CAAJ;AAAO52D,QAAAA,IAAI,EAAE;AAAC6hB,UAAAA,KAAK,EAAE;AAAR;AAAb,OAFe,EAGf;AAAC+0C,QAAAA,CAAC,EAAE,CAAJ;AAAO52D,QAAAA,IAAI,EAAE;AAAC6hB,UAAAA,KAAK,EAAE;AAAR;AAAb,OAHe;AAZjB,KA9Ca,CAAd;AAkEAyvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC76B,WAAV,CAAsBiwC,IAAI,CAAC/yD,KAA3B,EAAkC+yD,IAAI,CAAChwC,MAAvC,CADD,EAECgwC,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3EO,CAAR;AA6EAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AAAC6iB,QAAAA,aAAa,EAAE;AAAhB,OAFR;AAGCyS,MAAAA,cAAc,EAAE;AAHjB,KADa,EAMb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAAC6iB,QAAAA,aAAa,EAAE;AAAC/e,UAAAA,SAAS,EAAE;AAAZ;AAAhB,OAFR;AAGCwxB,MAAAA,cAAc,EAAE;AAACxxB,QAAAA,SAAS,EAAE;AAAZ;AAHjB,KANa,EAWb;AACCuL,MAAAA,IAAI,EAAE,aADP;AAECrP,MAAAA,KAAK,EAAE;AAAC6iB,QAAAA,aAAa,EAAE;AAACnhB,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAAhB,OAFR;AAGC4zB,MAAAA,cAAc,EAAE;AAAC5zB,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAHjB,KAXa,CAAd;AAkBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACpyC,cAAV,CAAyBwnD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3BO,CAAR;AA6BAU,EAAAA,QAAQ,CAAC,iCAAD,EAAoC,YAAY;AACvD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN6iB,QAAAA,aAAa,EAAE;AACd5e,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACH8E,cAAAA,CAAC,EAAE,CADA;AAEH52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE,IAAR;AAAc7Z,gBAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAA1B;AAFH,aADE;AAKNmqD,YAAAA,EAAE,EAAE;AACHyE,cAAAA,CAAC,EAAE,CADA;AAEH52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE,IAAR;AAAc7Z,gBAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAA1B;AAFH,aALE;AASNoqD,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAC6hB,gBAAAA,KAAK,EAAE,IAAR;AAAc7Z,gBAAAA,UAAU,EAAE;AAA1B;AAAb;AATE;AADO;AADT,OAFR;AAiBC2Z,MAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP,CAjBT;AAkBCuS,MAAAA,cAAc,EAAE,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf;AAlBjB,KADa,CAAd;AAuBAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACz6B,+BAAV,CACC6vC,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAAChwC,MAFN,CADD,EAKCgwC,IAAI,CAACz9B,cALN;AAOA,OARC,CAAF;AASA,KAVD;AAWA,GAnCO,CAAR;AAoCA,CAzNO,CAAR;;ACEAU,QAAQ,CAAC,mCAAD,EAAsC,YAAY;AACzD,MAAIs8B,iBAAiB,GAAG,EAAxB;AAEA,OAAKD,SAAL,CAAe,YAAY;AAC1BpsB,IAAAA,UAAU;AACVqsB,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAHD;;AAKA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAv1B,EAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AAClC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB9iC,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SARe;AASvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SATc;AAUvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ;AAVe,OAAP;AAAA,KAAjB;;AAYA,QAAM8jC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBvQ,UAAAA,KAAK,EAAE;AAFa,SAAf,CADyB;AAK/B+nC,QAAAA,WAAW,EAAE,SALkB;AAM/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SANsB;AAU/BjtB,QAAAA,MAAM,EAAE;AAVuB,OAAhC;AAaA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACyB,UAAAA,SAAS,EAAE;AAACqwD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAZ,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRroC,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAtCO,CAAR;AAwCA,WAAO0H,SAAO,CACZkD,gBADK,CACY;AAACtiC,MAAAA,IAAI,EAAE;AAAP,KADZ,EAC2B,KAD3B,EACkCu4B,QADlC,EAC4CC,QAD5C,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,iDADP;AAECy7B,QAAAA,WAAW,EAAE,KAFd;AAGChrC,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAIC1N,QAAAA,cAAc,EAAE,IAJjB;AAKC7C,QAAAA,KAAK,EAAE;AALR,OADyC,EAQzC;AACCsP,QAAAA,IAAI,EAAE,sCADP;AAECvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAFT;AAGCvQ,QAAAA,KAAK,EAAE,IAHR;AAICsC,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SAJP;AAKC9yD,QAAAA,GAAG,EAAE;AALN,OARyC,CAA1C;AAgBA,KAtBK,CAAP;AAuBA,GAxFC,CAAF;AAyFA,CA5HO,CAAR;;ACAA,IAAMy3D,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,iBAAe,YAAmC;AAAA,MAAlC70D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACzM,oBAAZ,CAAiC3J,GAAtC;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACzM,oBAAZ,CAAiClI,SAAtC;AACC,aAAOztB,MAAM,CAACmjC,QAAP,CAAgB3vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAACzM,oBAAZ,CAAiC1J,cAAtC;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACzM,oBAAZ,CAAiCvJ,KAAjC,CAAuCJ,GAA5C;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAACzM,oBAAZ,CAAiCvJ,KAAjC,CAAuCqB,SAA5C;AACC,aAAOztB,MAAM,CAACojC,aAAP,CAAqB5vC,KAArB,EAA4B+uC,MAA5B,CAAP;;AACD,SAAKH,WAAW,CAACzM,oBAAZ,CAAiClJ,GAAjC,CAAqCC,OAArC,CAA6CE,QAAlD;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAACzM,oBAAZ,CAAiClJ,GAAjC,CAAqCmB,aAArC,CAAmDhB,QAAxD;AACC,aAAO5sB,MAAM,CAAC8oD,uBAAP,CAA+Bt1D,KAA/B,EAAsC+uC,MAAtC,CAAP;;AACD,SAAKH,WAAW,CAACxT,sBAAZ,CAAmCnC,GAAnC,CAAuCC,OAAvC,CAA+CC,KAApD;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AAED;AACC,aAAO/uC,KAAP;AAnBF;AAqBA,CAtBD;;ACNAg2B,QAAQ,CAAC,oCAAD,EAAuC,YAAY;AAC1DA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,0BAAP;AAAmChN,QAAAA,IAAI,EAAE;AAAzC,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0BADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,gCAAP;AAAyChN,QAAAA,IAAI,EAAE;AAA/C,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gCADC;AAEP3N,QAAAA,GAAG,EAAE,SAFE;AAGPW,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECw2D,UAAAA,OAAO,EAAE,KAFV;AAGC5nD,UAAAA,IAAI,EAAE;AAHP,SADK,EAML;AACC5O,UAAAA,GAAG,EAAE,IADN;AAECw2D,UAAAA,OAAO,EAAE,KAFV;AAGC5nD,UAAAA,IAAI,EAAE,QAHP;AAIC3G,UAAAA,QAAQ,EAAE,IAJX;AAKCusD,UAAAA,UAAU,EAAE;AALb,SANK;AAHC,OAHT;AAqBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNizD,UAAAA,GAAG,EAAE;AAACz2D,YAAAA,GAAG,EAAE,IAAN;AAAYw2D,YAAAA,OAAO,EAAE,KAArB;AAA4B5nD,YAAAA,IAAI,EAAE;AAAlC,WADC;AAEN8nD,UAAAA,GAAG,EAAE;AAAC12D,YAAAA,GAAG,EAAE,IAAN;AAAYw2D,YAAAA,OAAO,EAAE,KAArB;AAA4B5nD,YAAAA,IAAI,EAAE;AAAlC;AAFC;AADQ;AArBjB,KAba,CAAd;AA2CAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GApDO,CAAR;AAsDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,qCAAP;AAA8C/H,QAAAA,IAAI,EAAE;AAApD,OALT;AAMCivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AANjB,KAPa,EAeb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qCADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAPjB,KAfa,CAAd;AA+BAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAxCO,CAAR;AA0CAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,gCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AACrC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIP2B,QAAAA,GAAG,EAAE,SAJE;AAKPW,QAAAA,IAAI,EAAE;AALC,OAHT;AAUCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECE,UAAAA,KAAK,EAAE,KAFR;AAGCD,UAAAA,KAAK,EAAE;AAHR,SADQ;AADM;AAVjB,KADa,EAqBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CACN;AAACk4D,YAAAA,OAAO,EAAE;AAAV,WADM,EAEN;AAACA,YAAAA,OAAO,EAAE;AAAV,WAFM,EAGN;AAACA,YAAAA,OAAO,EAAE;AAAV,WAHM;AAHR,SADQ;AADH,OAFR;AAeCloB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sCADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIP2B,QAAAA,GAAG,EAAE,SAJE;AAKPW,QAAAA,IAAI,EAAE,CAAC;AAAC61D,UAAAA,OAAO,EAAE;AAAV,SAAD,EAAkB;AAACA,UAAAA,OAAO,EAAE;AAAV,SAAlB;AALC,OAfT;AAsBC3hC,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECE,UAAAA,KAAK,EAAE;AAAC,eAAG,IAAJ;AAAU,eAAG,IAAb;AAAmB,eAAG;AAACk4D,cAAAA,OAAO,EAAE;AAAV;AAAtB,WAFR;AAGCn4D,UAAAA,KAAK,EAAE;AAHR,SADQ;AADM;AAtBjB,KArBa,CAAd;AAuDA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhEO,CAAR;AAkEAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,2CADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,yBAAD,EAA4B,YAAY;AAC/C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADD,OAFR;AAeCiwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iDADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE;AALA,OAfT;AAsBCw2B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADQ;AAtBjB,KADa,EAqCb;AACCuQ,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO;AADA;AADH;AADD,OAFR;AAeCiwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iDADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE;AALA,OAfT;AAsBCw2B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aADO,EAMP;AACC6C,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE;AAHR,aANO;AADA;AADH;AADQ;AAtBjB,KArCa,CAAd;AAgFA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAzFO,CAAR;AA2FAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,0CADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAlhBO,CAAR;;ACAA4nB,QAAQ,CAAC,qCAAD,EAAwC,YAAY;AAC3DA,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADa;AADf,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADa;AADf,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAEg+B;AARjB,KAXa,EAqBb;AACCjkD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB;AADa;AADf,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AACf0iC,QAAAA,CAAC,EAAE;AADY;AARjB,KArBa,CAAd;AAmCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACz3C,QAAV,CAAmB6sD,IAAI,CAAC/yD,KAAxB,EAA+B+yD,IAAI,CAACtyD,GAApC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5CO,CAAR;AA8CAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AADa;AADf,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AADa;AADf,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADa;AADf,OAFR;AAWCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAXjB,KAnBa,CAAd;AAqCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5C,cAAV,CAAyB0uD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9CO,CAAR;AAgDAU,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE,EADa;AAEpBrF,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFW;AADf,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAhBjB,KADa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADa;AAEpBp5D,UAAAA,OAAO,EAAE;AAFW;AADf,OAFR;AAQC02B,MAAAA,cAAc,EAAE;AARjB,KAnBa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNujB,QAAAA,mBAAmB,EAAE;AACpBtf,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADa;AAEpBp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFW;AADf,OAFR;AAgBCu2B,MAAAA,cAAc,EAAE,CAAC,IAAD,EAAO;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAP,EAAe;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAf,EAAuB,IAAvB;AAhBjB,KA7Ba,CAAd;AAgDA,QAAMn5D,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACj4C,qBAAV,CAAgCqtD,IAAI,CAAC/yD,KAArC,EAA4CnB,MAA5C,EAAoDC,KAApD,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAE,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrBuf,MAAAA,mBAAmB,EAAE;AADA,KAAtB,CADD,EAIC,OAJD;AAMA,GAPC,CAAF;AAQA,CArKO,CAAR;;ACEAyS,QAAQ,CAAC,qBAAD,EAAwB,YAAY;AAC3C,MAAIs8B,iBAAiB,GAAG,EAAxB;;AACA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,MAAMwjB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBpsB,IAAAA,UAAU;AACVssB,IAAAA,sBAAsB;AACtB,GAHQ,CAAT;AAKA/8B,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrBiZ,IAAAA,SAAO,CAACiB,GAAR,CAAY,MAAZ,EAAoB,QAApB,EAA8B9H,QAA9B;AACAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE,WAAP;AAAoBhN,MAAAA,IAAI,EAAE,CAAC,MAAD,CAA1B;AAAoCvC,MAAAA,MAAM,EAAE;AAA5C,KADyC,CAA1C;AAGA,GALC,CAAF;AAOA22B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;;AAExB,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB39B,QAAAA,KAAK,EAAE;AACNpK,UAAAA,OAAO,EAAE,CAAC;AAACC,YAAAA,MAAM,EAAE;AAACkD,cAAAA,cAAc,EAAE;AAAjB;AAAT,WAAD;AADH;AARgB,OAAP;AAAA,KAAjB;;AAYAikC,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wCADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAAC4H,YAAAA,KAAK,EAAE,CAAC;AAACvI,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAACW,gBAAAA,cAAc,EAAE;AAAjB;AAAlB,aAAD;AAAR;AADc,SAAf,CADyB;AAI/B8kC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA7BO,CAAR;AA+BA,WAAO0H,SAAO,CACZ9d,MADK,CACE,IADF,EACQ,IADR,EACciX,QADd,EACwBC,QADxB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,WADP;AAECvP,QAAAA,MAAM,EAAEy0D,SAFT;AAGClyD,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAECW,UAAAA,IAAI,EAAE;AACLW,YAAAA,cAAc,EAAE;AADX;AAFP,SADK;AAHP,OADyC,EAazC;AACCqM,QAAAA,IAAI,EAAE,yBADP;AAECvP,QAAAA,MAAM,EAAE;AACPkD,UAAAA,cAAc,EAAE;AADT,SAFT;AAKCjD,QAAAA,KAAK,EAAEw0D;AALR,OAbyC,CAA1C;AAqBA,KA3BK,CAAP;AA4BA,GAzEC,CAAF;AA2EA99B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;;AAExB,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB39B,QAAAA,KAAK,EAAE;AARgB,OAAP;AAAA,KAAjB;;AAUA,QAAM4+B,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;AACAyqB,QAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AAEA,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KATD;;AAUA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wCADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAAC4H,YAAAA,KAAK,EAAE,CAAC;AAACvI,cAAAA,GAAG,EAAE;AAAN,aAAD;AAAR;AADc,SAAf,CADyB;AAI/BomC,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,aAAOoG,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgB7rD,IAAI,CAACmO,KAAL,CAAWW,OAAO,CAAC+4B,IAAnB,CAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAE4M,OAAO,CAAC+4B;AAVQ,OAAhB,CAAP;AAYA,KA7BO,CAAR;AA+BA,WAAO0H,SAAO,UAAP,CACE;AAAChuC,MAAAA,GAAG,EAAE;AAAN,KADF,EACemnC,QADf,EACyBC,QADzB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjB,aAAOsrB,iBAAiB,CAAC,CAAD,CAAjB,CAAqB,MAArB,CAAP;AACA38B,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACC7xD,QAAAA,GAAG,EAAE,IADN;AAEC2N,QAAAA,IAAI,EAAE;AAFP,OADyC,EAKzC;AACCA,QAAAA,IAAI,EAAE,sCADP;AAECs5B,QAAAA,QAAQ,EAAE,OAFX;AAGCrhC,QAAAA,IAAI,EAAE,CAAC,IAAD;AAHP,OALyC,CAA1C;AAWA,KAlBK,CAAP;AAmBA,GAxEC,CAAF;AA0EAmvB,EAAAA,EAAE,CAAC,iCAAD,EAAoC,YAAY;AACjD,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB39B,QAAAA,KAAK,EAAE;AACNJ,UAAAA,KAAK,EAAE;AACNhK,YAAAA,OAAO,EAAE,CACR,CACC;AACC+C,cAAAA,cAAc,EAAE;AAAC0N,gBAAAA,IAAI,EAAE;AAAP,eADjB;AAECxQ,cAAAA,MAAM,EAAE;AACPwQ,gBAAAA,IAAI,EAAE;AADC,eAFT;AAKCvQ,cAAAA,KAAK,EAAE,KALR;AAMC+G,cAAAA,KAAK,EAAE,CANR;AAOC/F,cAAAA,MAAM,EAAE;AAPT,aADD,CADQ;AADH;AADD;AARgB,OAAP;AAAA,KAAjB;;AA0BA,QAAM8nC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,uDADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPwQ,YAAAA,IAAI,EAAE;AADC,WADY;AAIpBk9B,UAAAA,MAAM,EAAE,CAJY;AAKpBztC,UAAAA,KAAK,EAAE,KALa;AAMpBotC,UAAAA,KAAK,EAAE;AANa,SAAf,CADyB;AAS/BrF,QAAAA,WAAW,EAAE,SATkB;AAU/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAVsB;AAc/BjtB,QAAAA,MAAM,EAAE;AAduB,OAAhC;AAiBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAAC4H,UAAAA,KAAK,EAAE;AAACkqD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAR,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRliC,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAOwjC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA1CO,CAAR;AA4CA,WAAO0H,SAAO,CACZF,+BADK,CAC2B;AAACl/B,MAAAA,IAAI,EAAE;AAAP,KAD3B,EAC0Cu4B,QAD1C,EACoDC,QADpD,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,iBADP;AAECvP,QAAAA,MAAM,EAAE;AACPwQ,UAAAA,IAAI,EAAE;AADC,SAFT;AAKCvQ,QAAAA,KAAK,EAAE,KALR;AAMC+G,QAAAA,KAAK,EAAE,CANR;AAOCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE,EAAb;AAAiBC,UAAAA,EAAE,EAAE,EAArB;AAAyBC,UAAAA,EAAE,EAAE;AAA7B,SAPP;AAQCvzD,QAAAA,SAAS,EAAE,YARZ;AASCyE,QAAAA,KAAK,EAAE;AATR,OADyC,CAA1C;AAaA,KAnBK,CAAP;AAoBA,GAvGC,CAAF;AAyGA6wB,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB39B,QAAAA,KAAK,EAAE;AACNJ,UAAAA,KAAK,EAAE;AACNvC,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADA;AAENzH,YAAAA,OAAO,EAAE,CACR,CACC;AACCC,cAAAA,MAAM,EAAE;AAACwQ,gBAAAA,IAAI,EAAE;AAAP,eADT;AAECvQ,cAAAA,KAAK,EAAE,KAFR;AAGC+G,cAAAA,KAAK,EAAE,CAHR;AAIC/F,cAAAA,MAAM,EAAE;AAJT,aADD,CADQ;AAFH,WADD;AAcNmE,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN,aADE;AAEN8yD,YAAAA,EAAE,EAAE;AAAC9yD,cAAAA,GAAG,EAAE;AAAN;AAFE;AAdD;AARgB,OAAP;AAAA,KAAjB;;AA4BA,QAAMmnC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,uDADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAAC4H,UAAAA,KAAK,EAAE;AAACkqD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRliC,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAOwjC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZR,WADK,GACSrG,QADT,EACmBC,QADnB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,QAAAA,IAAI,EAAE;AAAP,OADyC,EAEzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAFyC,CAA1C;AAYA,KAlBK,CAAP;AAmBA,GAtGC,CAAF;AAwGAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB39B,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN;AAAL,WADD;AAENuG,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFP;AARgB,OAAP;AAAA,KAAjB;;AAaA,QAAMtsB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,wCADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBiC,UAAAA,IAAI,EAAE;AAAC4H,YAAAA,KAAK,EAAE,CAAC;AAACvI,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB,aAAD;AAAR;AADc,SAAf,CADyB;AAI/BrtB,QAAAA,WAAW,EAAE,SAJkB;AAK/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SALsB;AAS/BjtB,QAAAA,MAAM,EAAE;AATuB,OAAhC;AAYA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAAC4H,UAAAA,KAAK,EAAE,CAAC;AAACvI,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAAC8yD,cAAAA,IAAI,EAAE;AAAP;AAAlB,WAAD;AAAR,SADM;AAEZjpB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRliC,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAOwjC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KArCO,CAAR;AAuCA,WAAO0H,SAAO,CACZ/E,UADK,CACM,IADN,EACY9B,QADZ,EACsBC,QADtB,EAELb,IAFK,CAEA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAJK,EAKLb,IALK,CAKA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,WADP;AAEChN,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAAC8yD,YAAAA,IAAI,EAAE;AAAP;AAAlB,SAAD,CAFP;AAGCr1D,QAAAA,MAAM,EAAEy0D;AAHT,OADyC,EAMzC;AACCllD,QAAAA,IAAI,EAAE,8BADP;AAEC3N,QAAAA,GAAG,EAAE,IAFN;AAGC0uC,QAAAA,QAAQ,EAAE;AAHX,OANyC,CAA1C;AAYA,KAlBK,CAAP;AAmBA,GApFC,CAAF;AAsFA3Z,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB39B,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE;AAAN;AAAL,WADD;AAENuG,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE;AAACzyD,cAAAA,GAAG,EAAE,IAAN;AAAYW,cAAAA,IAAI,EAAE;AAAC8yD,gBAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFP;AARgB,OAAP;AAAA,KAAjB;;AAaAzlB,IAAAA,SAAO,CAAChG,YAAR,CAAqB,OAArB,EAA8B,IAA9B,EAAoC;AACnChoC,MAAAA,GAAG,EAAE,IAD8B;AAEnCW,MAAAA,IAAI,EAAE;AAAC8yD,QAAAA,IAAI,EAAE;AAAP;AAF6B,KAApC,EAGGtsB,QAHH,EAGaC,QAHb;AAKAlS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,MAAAA,IAAI,EAAE,qBADP;AAEChN,MAAAA,IAAI,EAAE,CACL;AACCX,QAAAA,GAAG,EAAE,OADN;AAECW,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAAC8yD,cAAAA,IAAI,EAAE;AAAP;AAAlB;AAAL;AAFP,OADK;AAFP,KADyC,CAA1C;AAWA,GA9BC,CAAF;AAgCAl+B,EAAAA,QAAQ,CAAC,qBAAD,EAAwB,YAAY;AAC3CR,IAAAA,EAAE,CAAC,WAAD,EAAc,YAAY;AAC3BiZ,MAAAA,SAAO,CAAC+B,mBAAR,CAA4B;AAC3B1sC,QAAAA,SAAS,EAAE;AADgB,OAA5B,EAEG8jC,QAFH;AAIAjS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAC7xD,QAAAA,GAAG,EAAE,IAAN;AAAY2N,QAAAA,IAAI,EAAE;AAAlB,OADyC,CAA1C;AAGA,KARC,CAAF;AAUAonB,IAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BiZ,MAAAA,SAAO,CAAC+B,mBAAR,CAA4B;AAC3B9uC,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AADe,OAA5B,EAEGkmC,QAFH;AAIAjS,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACjsD,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAAP;AAAqB+H,QAAAA,IAAI,EAAE;AAA3B,OADyC,CAA1C;AAGA,KARC,CAAF;AASA,GApBO,CAAR;AAsBAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvBv9B,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SARW;AASvBD,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SATe;AAUvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE;AAAZ,SAVc;AAWvBoF,QAAAA,MAAM,EAAE;AAACpF,UAAAA,SAAS,EAAE;AAAZ,SAXe;AAYvBkF,QAAAA,KAAK,EAAE;AAZgB,OAAP;AAAA,KAAjB;;AAcA,QAAM4+B,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,uDADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAIAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AAACwQ,YAAAA,IAAI,EAAE;AAAP,WADY;AAEpBk9B,UAAAA,MAAM,EAAE,CAFY;AAGpBztC,UAAAA,KAAK,EAAE,KAHa;AAIpBotC,UAAAA,KAAK,EAAE;AAJa,SAAf,CADyB;AAO/BrF,QAAAA,WAAW,EAAE,SAPkB;AAQ/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SARsB;AAY/BjtB,QAAAA,MAAM,EAAE;AAZuB,OAAhC;AAeA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAAC4H,UAAAA,KAAK,EAAE;AAACkqD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE;AAAb;AAAR,SADM;AAEZtoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRliC,UAAAA,KAAK,EAAE;AADC;AAHG,OAAb;AAQA,aAAOwjC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KAxCO,CAAR;AA0CA,WAAO0H,SAAO,CACZzE,UADK,CAEL;AAAC36B,MAAAA,IAAI,EAAE;AAAP,KAFK,EAGL;AAACA,MAAAA,IAAI,EAAE;AAAP,KAHK,EAIL,KAJK,EAKL,CALK,EAML,CANK,EAOL,KAPK,EAQJu4B,QARI,EAQMC,QARN,EASLb,IATK,CASA,YAAY;AACjB,aAAOwrB,kBAAkB,CAAC;AAAC5qB,QAAAA,QAAQ,EAARA,QAAD;AAAWC,QAAAA,QAAQ,EAARA;AAAX,OAAD,CAAzB;AACA,KAXK,EAYLb,IAZK,CAYA,YAAY;AACjBrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,KADd;AAECloC,QAAAA,cAAc,EAAE;AAAC0N,UAAAA,IAAI,EAAE;AAAP,SAFjB;AAGCxQ,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SAHT;AAICvQ,QAAAA,KAAK,EAAE,KAJR;AAKC+G,QAAAA,KAAK,EAAE,CALR;AAMC/F,QAAAA,MAAM,EAAE,CANT;AAOCsO,QAAAA,IAAI,EAAE;AAPP,OADyC,EAUzC;AACCvP,QAAAA,MAAM,EAAE;AAACwQ,UAAAA,IAAI,EAAE;AAAP,SADT;AAECvQ,QAAAA,KAAK,EAAE,KAFR;AAGC6F,QAAAA,KAAK,EAAE,CAHR;AAICkB,QAAAA,KAAK,EAAE,CAJR;AAKCzE,QAAAA,IAAI,EAAE;AAAC8xD,UAAAA,EAAE,EAAE,EAAL;AAASK,UAAAA,EAAE,EAAE;AAAb,SALP;AAMCrzD,QAAAA,SAAS,EAAE,YANZ;AAOCkO,QAAAA,IAAI,EAAE;AAPP,OAVyC,CAA1C;AAoBA,KAjCK,CAAP;AAkCA,GAvGC,CAAF;AAyGAonB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCiZ,IAAAA,SAAO,CAAC2B,eAAR,CAAwB,KAAxB,EAA+BxI,QAA/B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,MAAAA,WAAW,EAAE,KAAd;AAAqBz7B,MAAAA,IAAI,EAAE;AAA3B,KADyC,CAA1C;AAGA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BiZ,IAAAA,SAAO,CAACwB,YAAR,CAAqB,KAArB,EAA4BrI,QAA5B;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAACzoB,MAAAA,WAAW,EAAE,KAAd;AAAqBz7B,MAAAA,IAAI,EAAE;AAA3B,KADyC,CAA1C;AAGA,GANC,CAAF;AAQAonB,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvB7+B,QAAAA,KAAK,EAAE;AADgB,OAAP;AAAA,KAAjB;;AAIAylC,IAAAA,SAAO,CAACsB,YAAR,CAAqB,IAArB,EAA2B;AAAC1gC,MAAAA,IAAI,EAAE;AAAP,KAA3B,EAA0Cu4B,QAA1C,EAAoDC,QAApD;AAEA,WAAO2qB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAY;AAChErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACC7xD,QAAAA,GAAG,EAAE,IADN;AAEC2N,QAAAA,IAAI,EAAE;AAFP,OADyC,CAA1C;AAMA,KAPM,CAAP;AAQA,GAfC,CAAF;AAiBAonB,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/B,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvB7+B,QAAAA,KAAK,EAAE;AADgB,OAAP;AAAA,KAAjB;;AAIAylC,IAAAA,SAAO,CAACuB,aAAR,CAAsB,CAAC,IAAD,EAAO,IAAP,CAAtB,EAAoC;AAAC3gC,MAAAA,IAAI,EAAE;AAAP,KAApC,EAAmDu4B,QAAnD,EAA6DC,QAA7D;AAEA,WAAO2qB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAY;AAChErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCjsD,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CADP;AAEC+H,QAAAA,IAAI,EAAE;AAFP,OADyC,CAA1C;AAMA,KAPM,CAAP;AAQA,GAfC,CAAF;AAgBA,CA7rBO,CAAR;;ACAA,IAAM8pD,eAAa,sBACfrD,qBADe,CAAnB;;AAIA,iBAAe,YAAmC;AAAA,MAAlC70D,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAACtU,KAAZ,CAAkB9B,GAAvB;AACC,aAAOhsB,MAAM,CAACkjC,GAAP,CAAW1vC,KAAX,EAAkB+uC,MAAlB,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkB7B,cAAvB;AACC,aAAOjsB,MAAM,CAAC0oD,iBAAP,CAAyBl1D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBX,MAAvB;AACC,aAAOntB,MAAM,CAACojD,MAAP,CAAc5vD,KAAd,EAAqB+uC,MAArB,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBT,MAAlB,CAAyBC,MAA9B;AACC,aAAOttB,MAAM,CAACkpD,YAAP,CAAoB11D,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBT,MAAlB,CAAyBE,eAA9B;AACC,aAAOvtB,MAAM,CAACopD,oBAAP,CAA4B51D,KAA5B,EAAmC+uC,MAAnC,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBT,MAAlB,CAAyBG,MAA9B;AACC,aAAOxtB,MAAM,CAACi8B,YAAP,CAAoBzoC,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkB1B,KAAlB,CAAwBJ,GAA7B;AACC,aAAOhsB,MAAM,CAACqjC,QAAP,CAAgB7vC,KAAhB,EAAuB+uC,MAAvB,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkB1B,KAAlB,CAAwBC,SAA7B;AACC,aAAOrsB,MAAM,CAACmqD,YAAP,CAAoB32D,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkB1B,KAAlB,CAAwBsB,WAA7B;AACC,aAAO1tB,MAAM,CAAC0jC,UAAP,CAAkBlwC,KAAlB,EAAyB+uC,MAAzB,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBV,YAAvB;AACC,aAAOptB,MAAM,CAACgpD,WAAP,CAAmBx1D,KAAnB,EAA0B+uC,MAA1B,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBtB,cAAvB;AACC,aAAOxsB,MAAM,CAAC4hD,SAAP,CAAiBpuD,KAAjB,EAAwB+uC,MAAxB,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBH,eAAvB;AACC,aAAO3tB,MAAM,CAACiqD,iBAAP,CAAyBz2D,KAAzB,EAAgC+uC,MAAhC,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBrB,GAAlB,CAAsBC,OAAtB,CAA8BC,KAAnC;AACC,aAAO3sB,MAAM,CAAC4jC,eAAP,CAAuBpwC,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBrB,GAAlB,CAAsBC,OAAtB,CAA8BE,QAAnC;AACC,aAAO5sB,MAAM,CAAC2oD,kBAAP,CAA0Bn1D,KAA1B,EAAiC+uC,MAAjC,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBrB,GAAlB,CAAsBI,IAAtB,CAA2BD,QAAhC;AACC,aAAO5sB,MAAM,CAAC+oD,eAAP,CAAuBv1D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACtU,KAAZ,CAAkBrB,GAAlB,CAAsBI,IAAtB,CAA2BF,KAAhC;AACC,aAAO3sB,MAAM,CAACyjC,YAAP,CAAoBjwC,KAApB,EAA2B+uC,MAA3B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBE,YAA7B;AACC,aAAOpuB,MAAM,CAACsqD,eAAP,CAAuB92D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD,SAAKH,WAAW,CAACnU,MAAZ,CAAmBC,IAAnB,CAAwBC,iBAA7B;AACC,aAAOnuB,MAAM,CAACuqD,eAAP,CAAuB/2D,KAAvB,EAA8B+uC,MAA9B,CAAP;;AACD;AACC,aAAO/uC,KAAP;AAtCF;AAwCA,CAzCD;;ACNAg2B,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5CA,EAAAA,QAAQ,CAAC,KAAD,EAAQ,YAAY;AAC3B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,WAAP;AAAoBhN,QAAAA,IAAI,EAAE;AAA1B,OAHT;AAICk0B,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,WADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AACCX,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE;AAFP,SADK,EAKL;AACC5O,UAAAA,GAAG,EAAE,IADN;AAEC4O,UAAAA,IAAI,EAAE,QAFP;AAGC3G,UAAAA,QAAQ,EAAE,IAHX;AAICusD,UAAAA,UAAU,EAAE;AAJb,SALK;AAFC,OAHT;AAkBC3/B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB,WADE;AAENkkD,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAY4O,YAAAA,IAAI,EAAE;AAAlB;AAFE;AADQ;AAlBjB,KAba,CAAd;AAwCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAjDO,CAAR;AAmDAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,sBAAP;AAA+B/H,QAAAA,IAAI,EAAE;AAArC,OAHT;AAICivB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KAPa,EAab;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE,sBAAP;AAA+B/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAArC,OAHT;AAICivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAACzyD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB,WADE;AAEN1B,UAAAA,EAAE,EAAE;AAAC9yD,YAAAA,GAAG,EAAE,IAAN;AAAYw0D,YAAAA,UAAU,EAAE;AAAxB;AAFE;AADQ;AAJjB,KAba,CAAd;AA0BAvC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnCO,CAAR;AAqCAU,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAR,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,cADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACuvD,UAAAA,EAAE,EAAE;AAAL;AADQ;AAPjB,KADa,EAYb;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAR,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,cADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AADQ;AAPjB,KAZa,CAAd;AAyBAyuD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AAACgH,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAd,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qBADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AAACwsD,UAAAA,EAAE,EAAE;AAAL;AADE;AAPjB,KADa,EAYb;AACCnkD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AAACgH,QAAAA,WAAW,EAAE;AAACksD,UAAAA,EAAE,EAAE,CAAL;AAAQK,UAAAA,EAAE,EAAE,CAAZ;AAAeC,UAAAA,EAAE,EAAE;AAAnB;AAAd,OAFR;AAGCzkB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qBADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAFC,OAHT;AAOCivB,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AADE;AAPjB,KAZa,CAAd;AAyBA0rD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlCO,CAAR;AAoCAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAAP;AAFQ;AADP,OAFR;AAQC2tC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAAP;AAFQ;AADE;AAbjB,KADa,EAqBb;AACCiO,MAAAA,IAAI,EAAE,uBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADP,OAFR;AAQC5oB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADE;AAbjB,KArBa,EAyCb;AACCtoD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AAFQ;AADP,OAFR;AAQC5oB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACu2D,cAAAA,EAAE,EAAE;AAAL;AAAP;AAFQ;AADE;AAbjB,KAzCa,EA6Db;AACCtoD,MAAAA,IAAI,EAAE,uBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZpE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,8BADC;AAEP3N,QAAAA,GAAG,EAAE,IAFE;AAGP0uC,QAAAA,QAAQ,EAAE;AAHH,OART;AAaC7Z,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAO+E,cAAAA,EAAE,EAAE;AAAX;AAAP;AADQ;AADE;AAbjB,KA7Da,CAAd;AAkFAjF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3FO,CAAR;AA6FAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qBADC;AAEPhN,QAAAA,IAAI,EAAE;AAFC,OART;AAYCk0B,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADE;AAZjB,KADa,EAoBb;AACCvjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNgH,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,CAAJ;AAAOkF,cAAAA,EAAE,EAAE;AAAX;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFQ;AADP,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,qBADC;AAEPhN,QAAAA,IAAI,EAAE,CACL;AAACX,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACwxD,YAAAA,CAAC,EAAE;AAAJ;AAAlB,SADK,EAEL;AAACnyD,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACwxD,YAAAA,CAAC,EAAE;AAAJ;AAAlB,SAFK;AAFC,OART;AAeCt9B,MAAAA,cAAc,EAAE;AACftuB,QAAAA,WAAW,EAAE;AACZksD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE,EAAJ;AAAQkF,cAAAA,EAAE,EAAE;AAAZ;AAAP,WADQ;AAEZvE,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFQ;AAGZY,UAAAA,EAAE,EAAE;AAAC/yD,YAAAA,GAAG,EAAE,IAAN;AAAYW,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAlB;AAHQ;AADE;AAfjB,KApBa,CAAd;AA6CAF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtDO,CAAR;AAwDAU,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAChC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AAACpB,QAAAA,OAAO,EAAE,CAAC;AAACC,UAAAA,MAAM,EAAE,KAAT;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA8BC,UAAAA,KAAK,EAAE;AAArC,SAAD;AAAV,OAFR;AAGCgwC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iBADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPvD,QAAAA,IAAI,EAAE;AANC,OAHT;AAWCk0B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE,KAJR;AAKCD,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AAXjB,KADa,EAwBb;AACCuQ,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGCC,UAAAA,KAAK,EAAE,CAAC;AAAC0B,YAAAA,GAAG,EAAE;AAAN,WAAD,EAAa;AAACA,YAAAA,GAAG,EAAE;AAAN,WAAb,EAA2B;AAACA,YAAAA,GAAG,EAAE;AAAN,WAA3B;AAHR,SADQ;AADH,OAFR;AAWCsuC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,iBADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE,KAHA;AAIPoB,QAAAA,SAAS,EAAE,WAJJ;AAKPyE,QAAAA,KAAK,EAAE,CALA;AAMPkB,QAAAA,KAAK,EAAE,CANA;AAOPzE,QAAAA,IAAI,EAAE,CAAC;AAACX,UAAAA,GAAG,EAAE;AAAN,SAAD,EAAc;AAACA,UAAAA,GAAG,EAAE;AAAN,SAAd;AAPC,OAXT;AAoBC60B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCsB,UAAAA,SAAS,EAAE,WADZ;AAECyE,UAAAA,KAAK,EAAE,CAFR;AAGC9F,UAAAA,MAAM,EAAE,KAHT;AAICE,UAAAA,KAAK,EAAE;AAAC,eAAG;AAAC0B,cAAAA,GAAG,EAAE;AAAN,aAAJ;AAAgB,eAAG,IAAnB;AAAyB,eAAG;AAA5B,WAJR;AAKC3B,UAAAA,KAAK,EAAE;AALR,SADQ;AADM;AApBjB,KAxBa,CAAd;AA0DA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAnEO,CAAR;AAqEAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE;AADH,OAFR;AAKCmwC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OALT;AAMCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE;AADM;AANjB,KADa,EAWb;AACCyQ,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ;AADH,OAFR;AAaC6uC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAbT;AAcCknB,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ;AADM;AAdjB,KAXa,CAAd;AAyCAlE,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlDO,CAAR;AAoDAU,EAAAA,QAAQ,CAAC,YAAD,EAAe,YAAY;AAClC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADH,OAFR;AAoBC6uC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPvP,QAAAA,MAAM,EAAE,MAFD;AAGPC,QAAAA,KAAK,EAAE;AAHA,OApBT;AAyBCw2B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADM;AAzBjB,KADa,EA6Cb;AACCmP,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNpB,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SADQ,EAQR;AACCrB,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SARQ;AADH,OAFR;AAoBC6uC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPvP,QAAAA,MAAM,EAAE,KAFD;AAGPC,QAAAA,KAAK,EAAE;AAHA,OApBT;AAyBCw2B,MAAAA,cAAc,EAAE;AACf12B,QAAAA,OAAO,EAAE,CACR;AACCC,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,KAFR;AAGC6F,UAAAA,KAAK,EAAE,IAHR;AAIC5F,UAAAA,KAAK,EAAE,IAJR;AAKCmB,UAAAA,SAAS,EAAE,IALZ;AAMCwI,UAAAA,QAAQ,EAAE,CAAC,IAAD,EAAO,IAAP,CANX;AAOCkuD,UAAAA,aAAa,EAAE;AAPhB,SADQ,EAUR;AACC/3D,UAAAA,MAAM,EAAE,KADT;AAECC,UAAAA,KAAK,EAAE,MAFR;AAGC6F,UAAAA,KAAK,EAAE,CAHR;AAIC5F,UAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,MAAT,CAJR;AAKCmB,UAAAA,SAAS,EAAE;AALZ,SAVQ;AADM;AAzBjB,KA7Ca,CAAd;AA6FAwyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtGO,CAAR;AAwGAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AAACuzD,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AADD,OAFR;AAKC2B,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oBADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OALT;AASC60B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACuzD,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AADQ;AATjB,KADa,EAcb;AACC/9B,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AAACyzD,UAAAA,EAAE,EAAE;AAACtqB,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAaoqB,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAjB;AAAyBqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAA9B;AADD,OAFR;AAKC2B,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,oBADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OALT;AASC60B,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AAACyzD,UAAAA,EAAE,EAAE;AAACtqB,YAAAA,CAAC,EAAE,CAAJ;AAAOqoB,YAAAA,OAAO,EAAE;AAAhB,WAAL;AAA4B+B,UAAAA,EAAE,EAAE;AAACpqB,YAAAA,CAAC,EAAE;AAAJ,WAAhC;AAAwCqqB,UAAAA,GAAG,EAAE;AAACrqB,YAAAA,CAAC,EAAE;AAAJ;AAA7C;AADQ;AATjB,KAda,CAAd;AA6BAslB,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEP3N,QAAAA,GAAG,EAAE;AAFE,OANT;AAUC60B,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE;AAFG;AAVjB,KADa,CAAd;AAiBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1BO,CAAR;AA4BAU,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACzC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN8D,QAAAA,SAAS,EAAE,IADL;AAENpC,QAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,KAAR;AAFN,OAFR;AAMCqtC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,uBADC;AAEP/H,QAAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT;AAFC,OANT;AAUCivB,MAAAA,cAAc,EAAE;AACfxxB,QAAAA,SAAS,EAAE,IADI;AAEfpC,QAAAA,UAAU,EAAE,CAAC,MAAD,EAAS,MAAT;AAFG;AAVjB,KADa,CAAd;AAkBAgxD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBp9B,MAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,KALD;AAMA,GAzBO,CAAR;AA2BAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADQ;AATjB,KADa,EAcb;AACChoD,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE,MAAP;AAAe4iB,YAAAA,KAAK,EAAE;AAAtB;AAAV;AADD,OAFR;AAKCtoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAAChK,UAAAA,OAAO,EAAE;AAAC61C,YAAAA,IAAI,EAAE;AAAP;AAAV;AADQ;AATjB,KAda,CAAd;AA6BAie,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,UADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,4BADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,KAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADQ;AA1BjB,KADa,EA2Cb;AACCuP,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO;AADA;AADH;AADD,OAFR;AAiBCivC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,4BADC;AAEPy7B,QAAAA,WAAW,EAAE,QAFN;AAGPloC,QAAAA,cAAc,EAAE,MAHT;AAIP9C,QAAAA,MAAM,EAAE,GAJD;AAKPC,QAAAA,KAAK,EAAE,KALA;AAMP+G,QAAAA,KAAK,EAAE,CANA;AAOP/F,QAAAA,MAAM,EAAE;AAPD,OAjBT;AA0BCw1B,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AACNhK,UAAAA,OAAO,EAAE;AACRw4D,YAAAA,MAAM,EAAE,CACP;AACCz1D,cAAAA,cAAc,EAAE,KADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aADO,EAQP;AACC6B,cAAAA,cAAc,EAAE,MADjB;AAEC9C,cAAAA,MAAM,EAAE,GAFT;AAGCC,cAAAA,KAAK,EAAE,KAHR;AAIC+G,cAAAA,KAAK,EAAE,CAJR;AAKC/F,cAAAA,MAAM,EAAE;AALT,aARO;AADA;AADH;AADQ;AA1BjB,KA3Ca,CAAd;AA8FA4yD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAvGO,CAAR;AAyGAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,iBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCmmC,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OALT;AAUCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AAAP;AADQ;AAVjB,KADa,EAeb;AACCjoD,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AACNvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAAP;AADA;AADD,OAFR;AAOCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,yBADC;AAEPy7B,QAAAA,WAAW,EAAE,MAFN;AAGPxjC,QAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP;AAHC,OAPT;AAYCivB,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AAZjB,KAfa,CAAd;AAiCA5E,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1CO,CAAR;AA4CAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADQ;AATjB,KADa,EAcb;AACCjoD,MAAAA,IAAI,EAAE,QADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,CAAP;AAA2BC,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAlC;AAAP;AADD,OAFR;AAKCxoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACkxD,YAAAA,KAAK,EAAE,CAAC,IAAD;AAAR;AAAP;AADQ;AATjB,KAda,EA2Bb;AACCloD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN4I,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAACixD,YAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AAAP;AAAP;AADD,OAFR;AAKCvoB,MAAAA,MAAM,EAAE;AACP3gC,QAAAA,IAAI,EAAE,sBADC;AAEPy7B,QAAAA,WAAW,EAAE;AAFN,OALT;AASCvU,MAAAA,cAAc,EAAE;AACf1sB,QAAAA,KAAK,EAAE;AAACvC,UAAAA,IAAI,EAAE;AAAP;AADQ;AATjB,KA3Ba,CAAd;AAyCAqsD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlDO,CAAR;AAoDAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AAACiE,QAAAA,KAAK,EAAE;AAAR,OAFR;AAGC8qC,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OAHT;AAICknB,MAAAA,cAAc,EAAE;AAACrxB,QAAAA,KAAK,EAAE;AAAR;AAJjB,KADa,EAOb;AACCoL,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WADE;AAENW,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP;AAFE;AADD,OAFR;AAQC7jB,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OART;AASCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB,WADE;AAEN6qD,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelqD,YAAAA,QAAQ,EAAE;AAAzB;AAFE;AADQ;AATjB,KAPa,CAAd;AAyBAgqD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlCO,CAAR;AAoCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNiE,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAEN+uC,UAAAA,EAAE,EAAE;AAACnyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ;AAAP,WAFE;AAGNY,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAHE;AADD,OAFR;AASCuqB,MAAAA,MAAM,EAAE;AAAC3gC,QAAAA,IAAI,EAAE;AAAP,OATT;AAUCknB,MAAAA,cAAc,EAAE;AACfrxB,QAAAA,KAAK,EAAE;AACNivD,UAAAA,EAAE,EAAE;AAAC9xD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B,WADE;AAENgvC,UAAAA,EAAE,EAAE;AAACpyD,YAAAA,IAAI,EAAE;AAACwxD,cAAAA,CAAC,EAAE;AAAJ,aAAP;AAAelsD,YAAAA,WAAW,EAAE;AAACE,cAAAA,KAAK,EAAE;AAAC4d,gBAAAA,GAAG,EAAE;AAAN;AAAR;AAA5B;AAFE;AADQ;AAVjB,KADa,CAAd;AAoBAkuC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CAAC1F,IAAI,CAAC/yD,KAAN,EAAa+yD,IAAI,CAAChkB,MAAlB,CADR,EAECgkB,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA7BO,CAAR;AA+BAE,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CAn7BO,CAAR;;ACAA4nB,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7CA,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM+hC,WAAW,GAAG,SAAdA,WAAc,CAACj0D,SAAD;AAAA,aAAgB;AACnCkF,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADD;AAMN3xD,UAAAA,SAAS,EAATA;AANM;AAD4B,OAAhB;AAAA,KAApB;;AAWA0xB,IAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAvB,EAA+D;AAC9DC,QAAAA,CAAC,EAAE;AAD2D,OAA/D;AAGA,KAJC,CAAF;AAMAxiC,IAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,MAAAA,WAAM,CAACg/B,MAAP,CAAchX,WAAS,CAACt4C,SAAV,CAAoB0yD,WAAW,CAAC,IAAD,CAA/B,CAAd;AACA,KAFC,CAAF;AAGA,GArBO,CAAR;AAuBAviC,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9B,QAAMx1B,KAAK,GAAG;AAACgJ,MAAAA,KAAK,EAAE;AAAClF,QAAAA,SAAS,EAAE;AAAZ;AAAR,KAAd;AAEA6xB,IAAAA,WAAM,CAACw9B,WAAP,CAAmBxV,WAAS,CAACx4C,YAAV,CAAuBnF,KAAvB,CAAnB,EAAkD,GAAlD;AACA,GAJC,CAAF;AAMAw1B,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/B,QAAMx1B,KAAK,GAAG;AAACgJ,MAAAA,KAAK,EAAE;AAACtH,QAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AAAb;AAAR,KAAd;AAEAi0B,IAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACv4C,aAAV,CAAwBpF,KAAxB,CAAvB,EAAuD,CAAC,IAAD,EAAO,IAAP,CAAvD;AACA,GAJC,CAAF;AAMAg2B,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,4BADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADD;AAMN/zD,UAAAA,UAAU,EAAE;AANN;AADD,OAFR;AAYC4zB,MAAAA,cAAc,EAAE;AAZjB,KADa,EAeb;AACCjmB,MAAAA,IAAI,EAAE,6BADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADD;AAMN/zD,UAAAA,UAAU,EAAE;AANN;AADD,OAFR;AAYC4zB,MAAAA,cAAc,EAAE;AAZjB,KAfa,EA6Bb;AACCjmB,MAAAA,IAAI,EAAE,wBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE,EADD;AAENvC,UAAAA,UAAU,EAAE,CAAC,IAAD;AAFN;AADD,OAFR;AAQC4zB,MAAAA,cAAc,EAAE;AARjB,KA7Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADD;AAMN/zD,UAAAA,UAAU,EAAE,CAAC,IAAD;AANN;AADD,OAFR;AAYC4zB,MAAAA,cAAc,EAAE;AAZjB,KAvCa,EAqDb;AACCjmB,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADD;AAMN/zD,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP;AANN;AADD,OAFR;AAYC4zB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD;AAZjB,KArDa,EAmEb;AACC3oD,MAAAA,IAAI,EAAE,KADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE,WADD;AAMN/zD,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb;AANN;AADD,OAFR;AAYC4zB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAZjB,KAnEa,CAAd;AAmFAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACr4C,eAAV,CAA0BytD,IAAI,CAAC/yD,KAA/B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5FO,CAAR;AA8FAU,EAAAA,QAAQ,CAAC,QAAD,EAAW,YAAY;AAC9B,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AADD;AADD,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AADD;AADD,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADD;AADD,OAFR;AAWCngC,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AAXjB,KAnBa,CAAd;AAkCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACr5C,MAAV,CAAiByuD,IAAI,CAAC/yD,KAAtB,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACtC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AADD;AADD,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KADa,EAUb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AADD;AADD,OAFR;AAOCqxB,MAAAA,cAAc,EAAE;AAPjB,KAVa,EAmBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aADE;AAENzE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAFE;AAGNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AAHE;AADD;AADD,OAFR;AAWCngC,MAAAA,cAAc,EAAE;AACf49B,QAAAA,EAAE,EAAE;AAAC8E,UAAAA,CAAC,EAAE;AAAJ,SADW;AAEfzE,QAAAA,EAAE,EAAE;AAACyE,UAAAA,CAAC,EAAE;AAAJ;AAFW;AAXjB,KAnBa,CAAd;AAqCAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5C,cAAV,CAAyB0uD,IAAI,CAAC/yD,KAA9B,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA9CO,CAAR;AAgDAU,EAAAA,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,cADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE,EADD;AAENnF,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAFF,OAFR;AAQCwxB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,eADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADD;AAENp5D,UAAAA,OAAO,EAAE;AAFH,SADD;AAKNiF,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AALF,OAFR;AAWCwxB,MAAAA,cAAc,EAAE;AAXjB,KAXa,EAwBb;AACCjmB,MAAAA,IAAI,EAAE,qBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADD;AAENp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFH,SADD;AAaN8E,QAAAA,MAAM,EAAE;AAbF,OAFR;AAiBCyxB,MAAAA,cAAc,EAAE;AAjBjB,KAxBa,EA2Cb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAAjB,WADD;AAENp5D,UAAAA,OAAO,EAAE,CACR;AAACC,YAAAA,MAAM,EAAE,KAAT;AAAgBC,YAAAA,KAAK,EAAE;AAAvB,WADQ,EAER;AACCD,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE;AAAX,aADT;AAECtD,YAAAA,KAAK,EAAE,KAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB;AAJR,WAFQ;AAFH,SADD;AAaN8E,QAAAA,MAAM,EAAE;AACPC,UAAAA,SAAS,EAAE;AADJ;AAbF,OAFR;AAmBCwxB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT,EAAiB;AAACv3D,QAAAA,GAAG,EAAE;AAAN,OAAjB,EAA8B,IAA9B;AAnBjB,KA3Ca,CAAd;AAiEA,QAAM3B,KAAK,GAAG,KAAd;AAEA4zD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC34C,oBAAV,CAA+B+tD,IAAI,CAAC/yD,KAApC,EAA2ClB,KAA3C,CADD,EAECi0D,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5EO,CAAR;AA8EAU,EAAAA,QAAQ,CAAC,WAAD,EAAc,YAAY;AACjC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADD;AADD,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,IAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,YADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADD;AADD,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,EAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADD;AADD,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE;AARjB,KArBa,EA+Bb;AACCjmB,MAAAA,IAAI,EAAE,OADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AADD,OAFR;AAKC3C,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CALP;AAMCivB,MAAAA,cAAc,EAAE;AANjB,KA/Ba,EAuCb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE;AAAJ,aAAL;AAAazE,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAAjB;AAAyBxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE;AAAJ;AAA7B;AADD;AADD,OAFR;AAOC3xD,MAAAA,IAAI,EAAE,CAAC,IAAD,EAAO,IAAP,CAPP;AAQCivB,MAAAA,cAAc,EAAE,CAAC;AAAC0iC,QAAAA,CAAC,EAAE;AAAJ,OAAD,EAAS;AAACA,QAAAA,CAAC,EAAE;AAAJ,OAAT;AARjB,KAvCa,CAAd;AAmDAtF,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACp3C,SAAV,CAAoBwsD,IAAI,CAAC/yD,KAAzB,EAAgC+yD,IAAI,CAAC1sD,IAArC,CADD,EAEC0sD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,cAAD,EAAiB,YAAY;AACpC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAb,aAAL;AAA2BmyD,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAA/B;AADD;AADD,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AAACivD,YAAAA,EAAE,EAAE;AAAC8E,cAAAA,CAAC,EAAE,CAAJ;AAAO52D,cAAAA,IAAI,EAAE;AAAb,aAAL;AAA2BmyD,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ;AAA/B;AADD;AADD,OAFR;AAOCv3D,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,CAAd;AAuBAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACn3C,YAAV,CAAuBusD,IAAI,CAAC/yD,KAA5B,EAAmC+yD,IAAI,CAACtyD,GAAxC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAhCO,CAAR;AAkCAU,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZC,gBAAAA,UAAU,EAAE;AACX,4BAAQ;AADG;AADA;AADV;AADE;AADD;AADD,OAFR;AAeC2uB,MAAAA,cAAc,EAAE;AAfjB,KADa,EAkBb;AACCjmB,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZE,gBAAAA,KAAK,EAAE;AACN,4BAAQ;AADF;AADK;AADV;AADE;AADD;AADD,OAFR;AAeC0uB,MAAAA,cAAc,EAAE;AAfjB,KAlBa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCssB,MAAAA,cAAc,EAAE;AALjB,KAnCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACl3C,wBAAV,CAAmCssD,IAAI,CAAC/yD,KAAxC,EAA+C,IAA/C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GArDO,CAAR;AAuDAU,EAAAA,QAAQ,CAAC,oBAAD,EAAuB,YAAY;AAC1C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACNhC,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADP;AADD,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KADa,EAWb;AACCjmB,MAAAA,IAAI,EAAE,SADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACNhC,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADP;AADD,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KAXa,EAqBb;AACCjmB,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACNhC,UAAAA,WAAW,EAAE;AAACksD,YAAAA,EAAE,EAAE,MAAL;AAAaK,YAAAA,EAAE,EAAE;AAACnyD,cAAAA,IAAI,EAAE;AAAP;AAAjB;AADP;AADD,OAFR;AAOCX,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AARjB,KArBa,CAAd;AAiCAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAACt2C,kBAAV,CAA6B0rD,IAAI,CAAC/yD,KAAlC,EAAyC+yD,IAAI,CAACtyD,GAA9C,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA1CO,CAAR;AA4CAE,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5B,QAAMx1B,KAAK,GAAG;AACbgJ,MAAAA,KAAK,EAAE;AACNnF,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADF;AAENG,QAAAA,KAAK,EAAE;AAACivD,UAAAA,EAAE,EAAE;AAAC8E,YAAAA,CAAC,EAAE;AAAJ,WAAL;AAAazE,UAAAA,EAAE,EAAE;AAACyE,YAAAA,CAAC,EAAE;AAAJ,WAAjB;AAAyBxE,UAAAA,EAAE,EAAE;AAACwE,YAAAA,CAAC,EAAE,CAAJ;AAAOvC,YAAAA,OAAO,EAAE;AAAhB;AAA7B,SAFD;AAGN72D,QAAAA,OAAO,EAAE,CACR;AACC+C,UAAAA,cAAc,EAAE;AAACO,YAAAA,KAAK,EAAE;AAAR,WADjB;AAECrD,UAAAA,MAAM,EAAE;AAACuD,YAAAA,QAAQ,EAAE;AAAX,WAFT;AAGCtD,UAAAA,KAAK,EAAE,KAHR;AAIC6F,UAAAA,KAAK,EAAE,CAJR;AAKC5F,UAAAA,KAAK,EAAE,CACN,OADM,EAEN,QAFM,EAGN,OAHM,EAIN,QAJM,EAKN,OALM,EAMN,OANM,EAON,SAPM;AALR,SADQ;AAHH;AADM,KAAd;AAuBA,QAAM4C,cAAc,GAAG;AAACO,MAAAA,KAAK,EAAE;AAAR,KAAvB;AACA,QAAMrD,MAAM,GAAG;AAACuD,MAAAA,QAAQ,EAAE;AAAX,KAAf;AACA,QAAMtD,KAAK,GAAG,KAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAM/F,MAAM,GAAG,CAAf;AAEA,QAAMw1B,cAAc,GAAG,CAAC;AAAC70B,MAAAA,GAAG,EAAE;AAAN,KAAD,EAAkB;AAACA,MAAAA,GAAG,EAAE;AAAN,KAAlB,CAAvB;AAEAk1B,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACh4C,UAAV,CACC3F,KADD,EAEC2B,cAFD,EAGC9C,MAHD,EAICC,KAJD,EAKC+G,KALD,EAMC/F,MAND,CADD,EASCw1B,cATD;AAWA,GA3CC,CAAF;AA6CAU,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,kBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZC,gBAAAA,UAAU,EAAE;AACXG,kBAAAA,MAAM,EAAE;AADG;AADA;AADV;AADE;AADD;AADD,OAFR;AAeCwuB,MAAAA,cAAc,EAAE;AAfjB,KADa,EAkBb;AACCjmB,MAAAA,IAAI,EAAE,mBADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AACN/E,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACHxsD,cAAAA,WAAW,EAAE;AACZE,gBAAAA,KAAK,EAAE;AACNE,kBAAAA,MAAM,EAAE;AADF;AADK;AADV;AADE;AADD;AADD,OAFR;AAeCwuB,MAAAA,cAAc,EAAE;AAfjB,KAlBa,EAmCb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECrP,MAAAA,KAAK,EAAE;AACNgJ,QAAAA,KAAK,EAAE;AADD,OAFR;AAKCssB,MAAAA,cAAc,EAAE;AALjB,KAnCa,CAAd;AA4CAo9B,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC92C,wBAAV,CAAmCksD,IAAI,CAAC/yD,KAAxC,EAA+C,IAA/C,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GArDO,CAAR;AAuDAE,EAAAA,EAAE,CAAC,aAAD,EAAgB,YAAY;AAC7BG,IAAAA,WAAM,CAACw9B,WAAP,CACCxV,WAAS,CAAC35C,WAAV,CAAsB;AACrBgF,MAAAA,KAAK,EAAE;AADc,KAAtB,CADD,EAIC,OAJD;AAMA,GAPC,CAAF;AAQA,CA5lBO,CAAR;;ACEAgtB,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AAC5C,MAAIs8B,iBAAiB,GAAG,EAAxB;;AACA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,MAAMwjB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBpsB,IAAAA,UAAU;AACVssB,IAAAA,sBAAsB;AACtB,GAHQ,CAAT;AAKAv8B,EAAAA,QAAQ,CAAC,qBAAD,EAAwB,YAAY;AAC3C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,SADP;AAECjO,MAAAA,IAAI,EAAE,IAFP;AAGCk0B,MAAAA,cAAc,EAAE;AAHjB,KADa,EAMb;AACCjmB,MAAAA,IAAI,EAAE,WADP;AAECjO,MAAAA,IAAI,EAAE;AAACqgB,QAAAA,CAAC,EAAE;AAAJ,OAFP;AAGC6T,MAAAA,cAAc,EAAE,CACf;AACClnB,QAAAA,IAAI,EAAE,eADP;AAEChN,QAAAA,IAAI,EAAE;AACLqgB,UAAAA,CAAC,EAAE;AADE;AAFP,OADe;AAHjB,KANa,CAAd;AAoBAixC,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBu4B,QAAAA,QAAQ,CAAC6G,SAAO,CAAC+B,mBAAR,CAA4BuiB,IAAI,CAAC3xD,IAAjC,CAAD,CAAR;AACAoxD,QAAAA,kBAAkB,CAAC;AAAC5qB,UAAAA,QAAQ,EAARA,QAAD;AAAWC,UAAAA,QAAQ,EAAE,oBAAM;AAA3B,SAAD,CAAlB;AAEAlS,QAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0CS,IAAI,CAACz9B,cAA/C;AACA,OALC,CAAF;AAMA,KAPD;AAQA,GA7BO,CAAR;AA+BAE,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrB,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBp+B,QAAAA,GAAG,EAAE;AACJ6N,UAAAA,kBAAkB,EAAE;AACnBmvB,YAAAA,kBAAkB,EAAE,MADD;AAEnBC,YAAAA,cAAc,EAAE,WAFG;AAGnBC,YAAAA,cAAc,EAAE;AAHG;AADhB,SADkB;AAQvB9iC,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SARe;AASvBqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE,KAAZ;AAAmBpC,UAAAA,UAAU,EAAE,CAAC,KAAD;AAA/B,SATc;AAUvB0H,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SAVW;AAWvB2f,QAAAA,MAAM,EAAE;AACPA,UAAAA,MAAM,EAAE;AACPyvC,YAAAA,EAAE,EAAE;AACH9xD,cAAAA,IAAI,EAAE;AACLc,gBAAAA,KAAK,EAAE,IADF;AAELiH,gBAAAA,OAAO,EAAE,CAAC,IAAD,CAFJ;AAGLC,gBAAAA,UAAU,EAAE,CAAC,IAAD,CAHP;AAILpG,gBAAAA,aAAa,EAAE;AAJV;AADH;AADG;AADD,SAXe;AAuBvB+R,QAAAA,kBAAkB,EAAE;AACnBnW,UAAAA,OAAO,EAAE,CACR;AACCC,YAAAA,MAAM,EAAE;AACPuD,cAAAA,QAAQ,EAAE,IADH;AAEPO,cAAAA,SAAS,EAAE,IAFJ;AAGPI,cAAAA,YAAY,EAAE,IAHP;AAIPG,cAAAA,gBAAgB,EAAE;AAJX,aADT;AAOCpE,YAAAA,KAAK,EAAE,IAPR;AAQC6F,YAAAA,KAAK,EAAE;AARR,WADQ;AADU;AAvBG,OAAP;AAAA,KAAjB;;AAsCA,QAAMijC,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,KAXD;;AAYA/I,IAAAA,QAAQ,CAAC,UAAUv3B,GAAV,EAAeT,OAAf,EAAwB;AAChC2nB,MAAAA,WAAM,CAACw9B,WAAP,CACC,4DADD,EAECC,yBAAK,CAAC3kD,GAAD,CAFN;AAKAknB,MAAAA,WAAM,CAACC,eAAP,CAAuB5nB,OAAvB,EAAgC;AAC/B+4B,QAAAA,IAAI,EAAE7nC,IAAI,CAACC,SAAL,CAAe;AACpBN,UAAAA,MAAM,EAAE;AACPuD,YAAAA,QAAQ,EAAE,IADH;AAEPO,YAAAA,SAAS,EAAE,IAFJ;AAGPI,YAAAA,YAAY,EAAE,IAHP;AAIPG,YAAAA,gBAAgB,EAAE;AAJX,WADY;AAOpBqpC,UAAAA,MAAM,EAAE,CAPY;AAQpBztC,UAAAA,KAAK,EAAE,IARa;AASpBotC,UAAAA,KAAK,EAAE;AATa,SAAf,CADyB;AAY/BrF,QAAAA,WAAW,EAAE,SAZkB;AAa/BC,QAAAA,OAAO,EAAE;AACRusB,UAAAA,MAAM,EAAE,kBADA;AAER,0BAAgB;AAFR,SAbsB;AAiB/BjtB,QAAAA,MAAM,EAAE;AAjBuB,OAAhC;AAoBA,UAAMW,IAAI,GAAG;AACZ3lC,QAAAA,IAAI,EAAE;AAACyB,UAAAA,SAAS,EAAE;AAACqwD,YAAAA,EAAE,EAAE,EAAL;AAASK,YAAAA,EAAE,EAAE,EAAb;AAAiBC,YAAAA,EAAE,EAAE,EAArB;AAAyBC,YAAAA,EAAE,EAAE;AAA7B;AAAZ,SADM;AAEZxoB,QAAAA,KAAK,EAAE,CAFK;AAGZC,QAAAA,OAAO,EAAE;AACRroC,UAAAA,SAAS,EAAE;AADH;AAHG,OAAb;AAQA,aAAO2pC,OAAO,CAACue,OAAR,CAAgB;AACtB5jB,QAAAA,EAAE,EAAE,IADkB;AAEtBE,QAAAA,IAAI,EAAE,gBAAY;AACjB,iBAAOmF,OAAO,CAACue,OAAR,CAAgBhkB,IAAhB,CAAP;AACA,SAJqB;AAKtBD,QAAAA,OAAO,EAAE;AACRtiB,UAAAA,GAAG,EAAE,aAAUnV,IAAV,EAAgB;AACpB,mBAAO;AAAC,8BAAgB;AAAjB,cAAqCA,IAArC,CAAP;AACA;AAHO,SALa;AAUtBjO,QAAAA,IAAI,EAAElC,IAAI,CAACC,SAAL,CAAe4nC,IAAf;AAVgB,OAAhB,CAAP;AAYA,KA9CO,CAAR;AAgDAa,IAAAA,QAAQ,CAAC6G,SAAO,CAAC7jC,GAAR,CAAY,IAAZ,EAAkB,KAAlB,CAAD,CAAR;AAEA,WAAO4nD,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,UADd;AAEChrC,QAAAA,MAAM,EAAE;AACPkE,UAAAA,YAAY,EAAE,IADP;AAEPG,UAAAA,gBAAgB,EAAE,IAFX;AAGPP,UAAAA,SAAS,EAAE,IAHJ;AAIPP,UAAAA,QAAQ,EAAE;AAJH,SAFT;AAQCT,QAAAA,cAAc,EAAE,EARjB;AASC7B,QAAAA,MAAM,EAAE,IATT;AAUChB,QAAAA,KAAK,EAAE,IAVR;AAWC+G,QAAAA,KAAK,EAAE,CAXR;AAYCuI,QAAAA,IAAI,EAAE;AAZP,OADyC,CAA1C;AAgBA,KAjBM,CAAP;AAkBA,GAvHC,CAAF;AAyHAonB,EAAAA,EAAE,CAAC,UAAD,EAAa,YAAY;AAC1BoS,IAAAA,QAAQ,CAAC6G,SAAO,CAACgM,QAAR,CAAiB,IAAjB,CAAD,CAAR;AAEA,WAAO+X,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAAE;AAAA,eAAO,EAAP;AAAA;AAArB,KAAD,CAAlB,CAAqDb,IAArD,CAA0D,YAAM;AACtErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCzoB,QAAAA,WAAW,EAAE,UADd;AAECz7B,QAAAA,IAAI,EAAE;AAFP,OADyC,CAA1C;AAMA,KAPM,CAAP;AAQA,GAXC,CAAF;AAaAonB,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BiZ,IAAAA,SAAO,CAAC6B,UAAR,GAAqB1I,QAArB;AAEAjS,IAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AAAClkD,MAAAA,IAAI,EAAE;AAAP,KADyC,CAA1C;AAGA,GANC,CAAF;AAOA,CAtNO,CAAR;;ACHA,IAAM8pD,eAAa,GAAG;AACrBz0C,EAAAA,MAAM,EAAE,EADa;AAErBpJ,EAAAA,IAAI,EAAE;AAFe,CAAtB;;AAKA,SAASi2B,YAAT,GAAsB;AACrB,4BAAW4nB,eAAX;AACA;;AAED,SAASpxD,QAAT,CAAgB9G,KAAhB,EAAuB+uC,MAAvB,EAA+B;AAC9B,2CAAW/uC,KAAX,GAAqB+uC,MAAM,CAAC3tC,IAA5B;AACA;;AAGD,iBAAe,YAAmC;AAAA,MAAlCpB,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAAC5T,MAAZ,CAAmBhB,MAAxB;AACC,aAAOlzB,QAAM,CAAC9G,KAAD,EAAQ+uC,MAAR,CAAb;;AACD,SAAKH,WAAW,CAAC5T,MAAZ,CAAmBC,WAAxB;AACC,aAAOqV,YAAU,EAAjB;;AACD;AACC,aAAOtwC,KAAP;AANF;AAQA,CATD;;ACbAg2B,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7CR,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACCh1C,MAAAA,MAAM,EAAE,EADT;AAECpJ,MAAAA,IAAI,EAAE;AAFP,KADM,EAKN;AAACjM,MAAAA,IAAI,EAAE,eAAP;AAAwBhN,MAAAA,IAAI,EAAE;AAAC,eAAK;AAAN;AAA9B,KALM,CADR,EAQC;AACCqiB,MAAAA,MAAM,EAAE,EADT;AAECpJ,MAAAA,IAAI,EAAE,EAFP;AAGC,aAAK;AAHN,KARD;AAcA,GAfC,CAAF;AAiBAmb,EAAAA,EAAE,CAAC,YAAD,EAAe,YAAY;AAC5BG,IAAAA,WAAM,CAACC,eAAP,CAAuB6iC,SAAO,CAAC,EAAD,EAAK;AAACrqD,MAAAA,IAAI,EAAE;AAAP,KAAL,CAA9B,EAAkE;AACjEqV,MAAAA,MAAM,EAAE,EADyD;AAEjEpJ,MAAAA,IAAI,EAAE;AAF2D,KAAlE;AAIA,GALC,CAAF;AAOAmb,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CApCO,CAAR;;ACAA4nB,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC9CA,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC7C,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,4CADP;AAECrP,MAAAA,KAAK,EAAE;AACN6D,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADF;AAENqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE,KAAZ;AAAmBpC,UAAAA,UAAU,EAAE,CAAC,KAAD;AAA/B,SAFH;AAGN0H,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SAHN;AAIN2f,QAAAA,MAAM,EAAE;AACPA,UAAAA,MAAM,EAAE;AACPyvC,YAAAA,EAAE,EAAE;AACH9xD,cAAAA,IAAI,EAAE;AACLc,gBAAAA,KAAK,EAAE,IADF;AAELiH,gBAAAA,OAAO,EAAE,CAAC,IAAD,CAFJ;AAGLC,gBAAAA,UAAU,EAAE,CAAC,IAAD,CAHP;AAILpG,gBAAAA,aAAa,EAAE;AAJV;AADH;AADG;AADD;AAJF,OAFR;AAmBCvC,MAAAA,GAAG,EAAE,IAnBN;AAoBCqgB,MAAAA,qBAAqB,EAAE,KApBxB;AAqBCwU,MAAAA,cAAc,EAAE;AACfl0B,QAAAA,IAAI,EAAE;AACLgI,UAAAA,UAAU,EAAE,CAAC,IAAD,CADP;AAELpG,UAAAA,aAAa,EAAE,IAFV;AAGLmG,UAAAA,OAAO,EAAE,CAAC,IAAD,CAHJ;AAILjH,UAAAA,KAAK,EAAE;AAJF,SADS;AAOfrD,QAAAA,MAAM,EAAE;AACPkE,UAAAA,YAAY,EAAE,IADP;AAEPG,UAAAA,gBAAgB,EAAE,IAFX;AAGPP,UAAAA,SAAS,EAAE,IAHJ;AAIPP,UAAAA,QAAQ,EAAE;AAJH,SAPO;AAafT,QAAAA,cAAc,EAAE,EAbD;AAcfmE,QAAAA,YAAY,EAAE;AACb/C,UAAAA,YAAY,EAAE,IADD;AAEbG,UAAAA,gBAAgB,EAAE,IAFL;AAGbP,UAAAA,SAAS,EAAE,IAHE;AAIbP,UAAAA,QAAQ,EAAE;AAJG;AAdC;AArBjB,KADa,EA4Cb;AACCiN,MAAAA,IAAI,EAAE,2CADP;AAECrP,MAAAA,KAAK,EAAE;AACN6D,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADF;AAENqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE,KAAZ;AAAmBpC,UAAAA,UAAU,EAAE,CAAC,KAAD;AAA/B,SAFH;AAGN0H,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SAHN;AAIN2f,QAAAA,MAAM,EAAE;AACPA,UAAAA,MAAM,EAAE;AACPyvC,YAAAA,EAAE,EAAE;AACH9xD,cAAAA,IAAI,EAAE;AACLc,gBAAAA,KAAK,EAAE,IADF;AAELiH,gBAAAA,OAAO,EAAE,CAAC,IAAD,EAAO,IAAP,CAFJ;AAGLC,gBAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP,CAHP;AAILpG,gBAAAA,aAAa,EAAE;AAJV;AADH;AADG;AADD;AAJF,OAFR;AAmBCvC,MAAAA,GAAG,EAAE,IAnBN;AAoBCqgB,MAAAA,qBAAqB,EAAE,KApBxB;AAqBCwU,MAAAA,cAAc,EAAE;AACfl0B,QAAAA,IAAI,EAAE;AACLgI,UAAAA,UAAU,EAAE,CAAC,IAAD,EAAO,IAAP,CADP;AAELpG,UAAAA,aAAa,EAAE,IAFV;AAGLmG,UAAAA,OAAO,EAAE,CAAC,IAAD,EAAO,IAAP,CAHJ;AAILjH,UAAAA,KAAK,EAAE;AAJF,SADS;AAOfrD,QAAAA,MAAM,EAAE;AACPkE,UAAAA,YAAY,EAAE;AAAC,kBAAI,CAAC,IAAD,EAAO,IAAP;AAAL,WADP;AAEPG,UAAAA,gBAAgB,EAAE,IAFX;AAGPP,UAAAA,SAAS,EAAE;AAAC,kBAAI,CAAC,IAAD,EAAO,IAAP;AAAL,WAHJ;AAIPP,UAAAA,QAAQ,EAAE;AAJH,SAPO;AAafT,QAAAA,cAAc,EAAE,EAbD;AAcfmE,QAAAA,YAAY,EAAE;AACb/C,UAAAA,YAAY,EAAE;AAAC,kBAAI,CAAC,IAAD,EAAO,IAAP;AAAL,WADD;AAEbG,UAAAA,gBAAgB,EAAE,IAFL;AAGbP,UAAAA,SAAS,EAAE;AAAC,kBAAI,CAAC,IAAD,EAAO,IAAP;AAAL,WAHE;AAIbP,UAAAA,QAAQ,EAAE;AAJG;AAdC;AArBjB,KA5Ca,EAuFb;AACCiN,MAAAA,IAAI,EAAE,+CADP;AAECrP,MAAAA,KAAK,EAAE;AACN6D,QAAAA,MAAM,EAAE;AAACC,UAAAA,SAAS,EAAE;AAAZ,SADF;AAENqF,QAAAA,OAAO,EAAE;AAACrF,UAAAA,SAAS,EAAE,KAAZ;AAAmBpC,UAAAA,UAAU,EAAE,CAAC,KAAD;AAA/B,SAFH;AAGN0H,QAAAA,UAAU,EAAE;AAACtF,UAAAA,SAAS,EAAE;AAAZ,SAHN;AAIN2f,QAAAA,MAAM,EAAE;AACPA,UAAAA,MAAM,EAAE;AACPyvC,YAAAA,EAAE,EAAE;AACH9xD,cAAAA,IAAI,EAAE;AADH;AADG;AADD;AAJF,OAFR;AAcCX,MAAAA,GAAG,EAAE,IAdN;AAeCqgB,MAAAA,qBAAqB,EAAE;AACtB5e,QAAAA,KAAK,EAAE,IADe;AAEtBO,QAAAA,MAAM,EAAE,IAFc;AAGtBI,QAAAA,SAAS,EAAE;AAHW,OAfxB;AAoBCyyB,MAAAA,cAAc,EAAE;AACfl0B,QAAAA,IAAI,EAAE,EADS;AAEfvC,QAAAA,MAAM,EAAE,EAFO;AAGf8C,QAAAA,cAAc,EAAE;AACfkB,UAAAA,SAAS,EAAE,IADI;AAEfJ,UAAAA,MAAM,EAAE,IAFO;AAGfP,UAAAA,KAAK,EAAE;AAHQ,SAHD;AAQf4D,QAAAA,YAAY,EAAE;AACb/C,UAAAA,YAAY,EAAE,IADD;AAEbJ,UAAAA,SAAS,EAAE,KAFE;AAGbP,UAAAA,QAAQ,EAAE;AAHG;AARC;AApBjB,KAvFa,CAAd;AA4HAswD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC55B,qBAAV,CACCgvC,IAAI,CAAC/yD,KADN,EAEC+yD,IAAI,CAACtyD,GAFN,EAGCsyD,IAAI,CAACjyC,qBAHN,CADD,EAMCiyC,IAAI,CAACz9B,cANN;AAQA,OATC,CAAF;AAUA,KAXD;AAYA,GAzIO,CAAR;AA2IAU,EAAAA,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AACjD,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyjB,QAAAA,MAAM,EAAE;AACPA,UAAAA,MAAM,EAAE;AACPg2C,YAAAA,EAAE,EAAE;AAACh5D,cAAAA,GAAG,EAAE;AAAN,aADG;AAEPi5D,YAAAA,EAAE,EAAE;AAACj5D,cAAAA,GAAG,EAAE;AAAN,aAFG;AAGPk5D,YAAAA,EAAE,EAAE;AAACl5D,cAAAA,GAAG,EAAE;AAAN;AAHG,WADD;AAMP4Z,UAAAA,IAAI,EAAE;AAACu/C,YAAAA,EAAE,EAAE;AAACn2C,cAAAA,MAAM,EAAE,CAAC,IAAD,EAAO,IAAP;AAAT;AAAL;AANC;AADF,OAFR;AAYChjB,MAAAA,GAAG,EAAE,IAZN;AAaC60B,MAAAA,cAAc,EAAE;AACfmkC,QAAAA,EAAE,EAAE;AACHh5D,UAAAA,GAAG,EAAE;AADF,SADW;AAIfk5D,QAAAA,EAAE,EAAE;AACHl5D,UAAAA,GAAG,EAAE;AADF;AAJW;AAbjB,KADa,CAAd;AAyBAiyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAAC/5B,yBAAV,CAAoCmvC,IAAI,CAAC/yD,KAAzC,EAAgD+yD,IAAI,CAACtyD,GAArD,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAlCO,CAAR;AAoCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACvC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNm1D,YAAAA,GAAG,EAAE;AACJpB,cAAAA,CAAC,EAAE,CADC;AAEJjiD,cAAAA,aAAa,EAAE;AACdxH,gBAAAA,QAAQ,EAAE,CAAC;AAACgC,kBAAAA,UAAU,EAAE;AAACwoD,oBAAAA,GAAG,EAAE;AAAN;AAAb,iBAAD;AADI;AAFX,aADC;AAONM,YAAAA,GAAG,EAAE;AAACrB,cAAAA,CAAC,EAAE;AAAJ,aAPC;AAQN6B,YAAAA,GAAG,EAAE;AAAC7B,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AARC;AADO,SADT;AAaN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACH9xD,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAELpgC,gBAAAA,MAAM,EAAE,IAFH;AAGLqI,gBAAAA,sBAAsB,EAAE,KAHnB;AAIL1H,gBAAAA,aAAa,EAAE;AAJV;AADH,aADE;AASN4lD,YAAAA,EAAE,EAAE;AACHnyD,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAELpgC,gBAAAA,MAAM,EAAE,IAFH;AAGLqI,gBAAAA,sBAAsB,EAAE,KAHnB;AAIL1H,gBAAAA,aAAa,EAAE;AAJV;AADH,aATE;AAiBN6lD,YAAAA,EAAE,EAAE;AAACpyD,cAAAA,IAAI,EAAE;AAACgsC,gBAAAA,CAAC,EAAE,CAAJ;AAAOpgC,gBAAAA,MAAM,EAAE;AAAf;AAAP;AAjBE;AADY,SAbd;AAkCNnO,QAAAA,MAAM,EAAE,CAAC,GAAD,EAAM,CAAN;AAlCF,OAFR;AAsCCy2B,MAAAA,cAAc,EAAE,CACf;AACC70B,QAAAA,GAAG,EAAE,IADN;AAECW,QAAAA,IAAI,EAAE;AACLiO,UAAAA,IAAI,EAAE,IADD;AAEL9K,UAAAA,MAAM,EAAE;AAFH;AAFP,OADe;AAtCjB,KADa,CAAd;AAmDAmuD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAM;AACnBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACx5B,eAAV,CAA0B4uC,IAAI,CAAC/yD,KAA/B,EAAsC,QAAtC,EAAgD,UAAhD,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GA5DO,CAAR;AA8DAU,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AACxC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACN+V,QAAAA,aAAa,EAAE;AACd9R,UAAAA,KAAK,EAAE;AACNivD,YAAAA,EAAE,EAAE;AACH8E,cAAAA,CAAC,EAAE,CADA;AAEHjiD,cAAAA,aAAa,EAAE;AACdxH,gBAAAA,QAAQ,EAAE,CAAC;AAACgC,kBAAAA,UAAU,EAAE;AAACwoD,oBAAAA,GAAG,EAAE,CAAN;AAASnG,oBAAAA,CAAC,EAAE;AAAZ;AAAb,iBAAD;AADI;AAFZ,aADE;AAONW,YAAAA,EAAE,EAAE;AAACyE,cAAAA,CAAC,EAAE;AAAJ,aAPE;AAQNxE,YAAAA,EAAE,EAAE;AAACwE,cAAAA,CAAC,EAAE,CAAJ;AAAOvC,cAAAA,OAAO,EAAE;AAAhB;AARE;AADO,SADT;AAaN1gD,QAAAA,kBAAkB,EAAE;AACnB9Q,UAAAA,KAAK,EAAE;AACNg1D,YAAAA,EAAE,EAAE;AACH73D,cAAAA,IAAI,EAAE;AACLgsC,gBAAAA,CAAC,EAAE,CADE;AAEL/3B,gBAAAA,sBAAsB,EAAE,IAFnB;AAGL1H,gBAAAA,aAAa,EAAE;AAHV;AADH;AADE;AADY;AAbd,OAFR;AA2BC2nB,MAAAA,cAAc,EAAE,CAAC;AAAC70B,QAAAA,GAAG,EAAE,CAAN;AAASW,QAAAA,IAAI,EAAE;AAACiO,UAAAA,IAAI,EAAE;AAAP;AAAf,OAAD;AA3BjB,KADa,CAAd;AAgCAqjD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACt5B,gBAAV,CAA2B0uC,IAAI,CAAC/yD,KAAhC,EAAuC,QAAvC,EAAiD,IAAjD,CADD,EAEC+yD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAzCO,CAAR;AA2CAU,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AACnC,QAAM08B,KAAK,GAAG,CACb;AACCrjD,MAAAA,IAAI,EAAE,MADP;AAECrP,MAAAA,KAAK,EAAE;AACNyjB,QAAAA,MAAM,EAAE;AACPpJ,UAAAA,IAAI,EAAE;AAACu/C,YAAAA,EAAE,EAAE;AAACn5D,cAAAA,GAAG,EAAE;AAAN;AAAL;AADC;AADF,OAFR;AAOCA,MAAAA,GAAG,EAAE,IAPN;AAQC60B,MAAAA,cAAc,EAAE;AAAC70B,QAAAA,GAAG,EAAE;AAAN;AARjB,KADa,CAAd;AAaAiyD,IAAAA,KAAK,CAACryD,OAAN,CAAc,UAAC0yD,IAAD,EAAU;AACvBv9B,MAAAA,EAAE,CAACu9B,IAAI,CAAC1jD,IAAN,EAAY,YAAY;AACzBsmB,QAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACh6B,WAAV,CAAsBovC,IAAI,CAAC/yD,KAA3B,EAAkC+yD,IAAI,CAACtyD,GAAvC,CADD,EAECsyD,IAAI,CAACz9B,cAFN;AAIA,OALC,CAAF;AAMA,KAPD;AAQA,GAtBO,CAAR;AAuBA,CAhTO,CAAR;;ACAAU,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AACA,MAAM1qB,QAAQ,GAAG,SAAXA,QAAW,CAAUmH,MAAV,EAAkB;AAClCujB,IAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACA,GAFD;;AAIA,MAAMwjB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,KAAK,IAAb;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KAvBM,CAAP;AAwBA,GAzBD;;AA2BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBE,IAAAA,sBAAsB;AACtB,GAFQ,CAAT;AAIA/8B,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxBoS,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3nC,MAAR,CAAe,KAAf,EAAsB;AAAC2a,MAAAA,CAAC,EAAE;AAAJ,KAAtB,CAAD,CAAR;AAEA,WAAO+wC,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAAE;AAAA,eAAO,EAAP;AAAA;AAArB,KAAD,CAAlB,CAAqDb,IAArD,CAA0D,YAAM;AACtErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCjU,QAAAA,SAAS,EAAE,KADZ;AAECjwC,QAAAA,IAAI,EAAE,mBAFP;AAGCtH,QAAAA,MAAM,EAAE;AACP2a,UAAAA,CAAC,EAAE;AADI;AAHT,OADyC,CAA1C;AASA,KAVM,CAAP;AAWA,GAdC,CAAF;AAgBA+T,EAAAA,EAAE,CAAC,qBAAD,EAAwB,YAAY;AACrCoS,IAAAA,QAAQ,CAAC6G,SAAO,CAAC+B,mBAAR,CAA4B;AAACspB,MAAAA,GAAG,EAAE;AAACr4C,QAAAA,CAAC,EAAE;AAAJ;AAAN,KAA5B,CAAD,CAAR;AAEA,WAAO+wC,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAAE;AAAA,eAAO,EAAP;AAAA;AAArB,KAAD,CAAlB,CAAqDb,IAArD,CAA0D,YAAM;AACtErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACCjU,QAAAA,SAAS,EAAE,KADZ;AAECjwC,QAAAA,IAAI,EAAE,mBAFP;AAGCtH,QAAAA,MAAM,EAAE;AACP2a,UAAAA,CAAC,EAAE;AADI;AAHT,OADyC,CAA1C;AASA,KAVM,CAAP;AAWA,GAdC,CAAF;AAgBA+T,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrBoS,IAAAA,QAAQ,CAAC6G,SAAO,CAACtzB,GAAR,CAAY,KAAZ,EAAmB,GAAnB,EAAwB,GAAxB,CAAD,CAAR;AAEA,WAAOq3C,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAAE;AAAA,eAAO,EAAP;AAAA;AAArB,KAAD,CAAlB,CAAqDb,IAArD,CAA0D,YAAM;AACtErR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACClkD,QAAAA,IAAI,EAAE,gBADP;AAECiwC,QAAAA,SAAS,EAAE,KAFZ;AAGC7mC,QAAAA,IAAI,EAAE,GAHP;AAICtW,QAAAA,KAAK,EAAE;AAJR,OADyC,CAA1C;AAQA,KATM,CAAP;AAUA,GAbC,CAAF;AAcA,CAvFO,CAAR;;ACDA,IAAMg3D,eAAa,GAAG,EAAtB;;AAGA,SAASpxD,QAAT,CAAgB9G,KAAhB,EAAuB+uC,MAAvB,EAA+B;AAC9B,2CAAW/uC,KAAX,2BAAmB+uC,MAAM,CAACsP,SAA1B,EAAsCr+C,KAAK,CAAC+uC,MAAM,CAACsP,SAAR,CAAL,qCAA8Br+C,KAAK,CAAC+uC,MAAM,CAACsP,SAAR,CAAnC,GAA0DtP,MAAM,CAACjoC,MAAjE,IAA2EioC,MAAM,CAACjoC,MAAxH;AACA;;AACD,SAASqU,GAAT,CAAanb,KAAb,EAAoB+uC,MAApB,EAA4B;AAC3B,MAAIv3B,IAAI,GAAGu3B,MAAM,CAACv3B,IAAP,CAAYyO,KAAZ,CAAkB,GAAlB,CAAX;AACA,2CAAWjmB,KAAX,2BAAmB+uC,MAAM,CAACsP,SAA1B,EAAsC+Z,WAAS,CAACp4D,KAAK,CAAC+uC,MAAM,CAACsP,SAAR,CAAN,EAA0B7mC,IAA1B,EAAgCu3B,MAAM,CAAC7tC,KAAvC,CAA/C;AACA;;AAED,SAASk3D,WAAT,CAAmBp4D,KAAnB,EAA0BwX,IAA1B,EAAgCtW,KAAhC,EAAuC;AACtC,MAAIm3D,aAAa,sBAAO7gD,IAAP,CAAjB;;AACA,MAAI8gD,UAAU,GAAGD,aAAa,CAACE,KAAd,EAAjB;;AACA,MAAIF,aAAa,CAACv4D,MAAlB,EAA0B;AACzB,6CAAWE,KAAX,2BAAmBs4D,UAAnB,EAAgCF,WAAS,CAACp4D,KAAK,CAACs4D,UAAD,CAAN,EAAoBD,aAApB,EAAmCn3D,KAAnC,CAAzC;AACA,GAFD,MAEO;AACN,6CAAWlB,KAAX,2BAAmBs4D,UAAnB,EAAgCp3D,KAAhC;AACA;AACD;;AAED,iBAAe,YAAmC;AAAA,MAAlClB,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAAC9T,UAAZ,CAAuBd,MAA5B;AACC,aAAOlzB,QAAM,CAAC9G,KAAD,EAAQ+uC,MAAR,CAAb;;AACD,SAAKH,WAAW,CAAC9T,UAAZ,CAAuBC,GAA5B;AACC,aAAO5f,GAAG,CAACnb,KAAD,EAAQ+uC,MAAR,CAAV;;AACD;AACC,aAAO/uC,KAAP;AANF;AAQA,CATD;;ACpBAg2B,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AACjDR,EAAAA,EAAE,CAAC,QAAD,EAAW,YAAY;AACxBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AAACrqD,MAAAA,IAAI,EAAE,mBAAP;AAA4BiwC,MAAAA,SAAS,EAAE,KAAvC;AAA8Cv3C,MAAAA,MAAM,EAAE;AAAC2a,QAAAA,CAAC,EAAE;AAAJ;AAAtD,KAFM,CADR,EAKC;AAACq4C,MAAAA,GAAG,EAAE;AAACr4C,QAAAA,CAAC,EAAE;AAAJ;AAAN,KALD;AAOA,GARC,CAAF;AAUA+T,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AAACqB,MAAAA,GAAG,EAAE;AAACr4C,QAAAA,CAAC,EAAE;AAAC2rB,UAAAA,CAAC,EAAE;AAAJ;AAAJ;AAAN,KADM,EAEN;AACCh/B,MAAAA,IAAI,EAAE,gBADP;AAECiwC,MAAAA,SAAS,EAAE,KAFZ;AAGC7mC,MAAAA,IAAI,EAAE,KAHP;AAICtW,MAAAA,KAAK,EAAE;AAJR,KAFM,CADR,EAUC;AAAC44D,MAAAA,GAAG,EAAE;AAACr4C,QAAAA,CAAC,EAAE;AAAC2rB,UAAAA,CAAC,EAAE;AAAJ;AAAJ;AAAN,KAVD;AAYA,GAbC,CAAF;AAeA5X,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CArCO,CAAR;;ACAA4nB,QAAQ,CAAC,4BAAD,EAA+B,YAAY;AAClDR,EAAAA,EAAE,CAAC,KAAD,EAAQ,YAAY;AACrBG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACn5B,GAAV,CACC;AAACF,MAAAA,UAAU,EAAE;AAAC4uC,QAAAA,EAAE,EAAE;AAACzyD,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACqgB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AAAL;AAAb,KADD,EAEC,IAFD,EAGC,MAHD,CADD,EAMC;AACCA,MAAAA,CAAC,EAAE;AADJ,KAND;AAUA,GAXC,CAAF;AAaA+T,EAAAA,EAAE,CAAC,uBAAD,EAA0B,YAAY;AACvCG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACp5B,qBAAV,CACC;AAACD,MAAAA,UAAU,EAAE;AAAC4uC,QAAAA,EAAE,EAAE;AAACzyD,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACqgB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AAAL;AAAb,KADD,EAEC,IAFD,CADD,EAKC;AACChhB,MAAAA,GAAG,EAAE,IADN;AAECW,MAAAA,IAAI,EAAE;AACLqgB,QAAAA,CAAC,EAAE;AADE;AAFP,KALD;AAYA,GAbC,CAAF;AAeA+T,EAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChCG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACpyC,cAAV,CACC;AAAC+Y,MAAAA,UAAU,EAAE;AAAC4uC,QAAAA,EAAE,EAAE;AAACzyD,UAAAA,GAAG,EAAE,IAAN;AAAYW,UAAAA,IAAI,EAAE;AAACqgB,YAAAA,CAAC,EAAE;AAAJ;AAAlB;AAAL;AAAb,KADD,EAEC,IAFD,CADD,EAKC;AAACyxC,MAAAA,EAAE,EAAE;AAACzyD,QAAAA,GAAG,EAAE,IAAN;AAAYW,QAAAA,IAAI,EAAE;AAACqgB,UAAAA,CAAC,EAAE;AAAJ;AAAlB;AAAL,KALD;AAOA,GARC,CAAF;AASA,CAtCO,CAAR;;ACAAuU,QAAQ,CAAC,gCAAD,EAAmC,YAAY;AACtD,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHM,MAGA,IAAI8hB,KAAK,CAACy4C,OAAN,CAAchrB,MAAd,CAAJ,EAA2B;AACjCujB,UAAAA,iBAAiB,gCAAOA,iBAAP,sBAA6BvjB,MAA7B,EAAjB;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,IAAI,IAAZ;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KA1BM,CAAP;AA2BA,GA5BD;;AA8BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBE,IAAAA,sBAAsB;AACtB,GAFQ,CAAT;AAIA/8B,EAAAA,EAAE,CAAC,gDAAD,EAAmD,YAAY;AAChE,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBzmC,QAAAA,IAAI,EAAE;AACLwS,UAAAA,WAAW,EAAE;AACZmR,YAAAA,eAAe,EAAE;AADL;AADR;AADiB,OAAP;AAAA,KAAjB;;AAOA,QAAM6iB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMhH,MAAM,GAAG,EAAf;AACA,QAAMlpC,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AACN,QAAMosC,OAAO,GAAG,IAAhB;AACAtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB/C,MAAvB,EAA+BlpC,MAA/B,EAAuCC,KAAvC,EAA8CosC,OAA9C,CAAD,CAAR;AAEA,QAAM5V,cAAc,GAAG,CACtB;AACE,mBAAa,IADf;AAEE,6BAAuB,EAFzB;AAGE,mBAAa,CACX,EADW,CAHf;AAME,eAASg+B,SANX;AAOE,eAAS,IAPX;AAQE,uBAAiB,EARnB;AASE,cAAQ;AATV,KADsB,CAAvB,CA3BgE;;AA0ChE,WAAOd,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0Ch9B,cAA1C;AACA,KAFM,CAAP;AAGA,GA7CC,CAAF;AA+CAE,EAAAA,EAAE,CAAC,qCAAD,EAAwC,YAAY;AACrD,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBzmC,QAAAA,IAAI,EAAE;AACLwS,UAAAA,WAAW,EAAE;AACZmR,YAAAA,eAAe,EAAE;AADL;AADR;AADiB,OAAP;AAAA,KAAjB;;AAQA,QAAM6iB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMrC,OAAO,GAAG;AACrBstB,MAAAA,IAAI,EAAE;AACL9a,QAAAA,YAAY,EAAE;AACb,aAAG;AACF,mBAAO,CAAC,CAAD;AADL;AADU,SADT;AAML99C,QAAAA,IAAI,EAAE;AACL64D,UAAAA,QAAQ,EAAE;AADL;AAND,OADe;AAWrBC,MAAAA,IAAI,EAAE;AACLhb,QAAAA,YAAY,EAAE;AACb,aAAG;AACF,mBAAO,CAAC,CAAD;AADL;AADU,SADT;AAML99C,QAAAA,IAAI,EAAE;AACL64D,UAAAA,QAAQ,EAAE;AADL;AAND;AAXe,KAAhB;AAuBA,QAAMp7D,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AAEA,QAAMosC,OAAO,GAAG,IAAhB;AACNtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB4B,OAAvB,EAAgC7tC,MAAhC,EAAwCC,KAAxC,EAA+CosC,OAA/C,CAAD,CAAR;AAEA,WAAOsnB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACI,+BAAuB;AACzB,kBAAQ;AACP,wBAAY;AADL,WADiB;AAIzB,kBAAQ;AACP,wBAAY;AADL;AAJiB,SAD3B;AASI,iBAAS,GATb;AAUC,gBAAQ,kCAVT;AAWC,iBAAS,IAXV;AAYC,yBAAiB,EAZlB;AAaC,qBAAa,IAbd;AAcC,qBAAa,CACZ;AACM,eAAK;AACH,mBAAO;AACL,sBAAQ,CACN,CADM;AADH,aADJ;AAOH,mBAAO;AACL,sBAAQ,CACN,CADM;AADH;AAPJ;AADX,SADY;AAdd,OADyC,CAA1C;AAiCA,KAlCM,CAAP;AAmCA,GAtFC,CAAF;AAuFA98B,EAAAA,EAAE,CAAC,qDAAD,EAAwD,YAAY;AACrE,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO;AACvBzmC,QAAAA,IAAI,EAAE;AACLwS,UAAAA,WAAW,EAAE;AACZmR,YAAAA,eAAe,EAAE;AAChB,sBAAQ;AACPk1C,gBAAAA,QAAQ,EAAE;AADH;AADQ;AADL;AADR;AADiB,OAAP;AAAA,KAAjB;;AAYA,QAAMryB,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMrC,OAAO,GAAG;AACrBstB,MAAAA,IAAI,EAAE;AACL9a,QAAAA,YAAY,EAAE;AACb,aAAG;AACF,mBAAO,CAAC,CAAD;AADL;AADU,SADT;AAML99C,QAAAA,IAAI,EAAE;AACL64D,UAAAA,QAAQ,EAAE;AADL;AAND,OADe;AAWrBC,MAAAA,IAAI,EAAE;AACLhb,QAAAA,YAAY,EAAE;AACb,aAAG;AACF,mBAAO,CAAC,CAAD;AADL;AADU,SADT;AAML99C,QAAAA,IAAI,EAAE;AACL64D,UAAAA,QAAQ,EAAE;AADL;AAND;AAXe,KAAhB;AAuBA,QAAMp7D,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AAEA,QAAMosC,OAAO,GAAG,IAAhB;AACNtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB4B,OAAvB,EAAgC7tC,MAAhC,EAAwCC,KAAxC,EAA+CosC,OAA/C,CAAD,CAAR;AAEA,WAAOsnB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACC,qBAAa,IADd;AAEC,+BAAuB;AACtB,kBAAQ;AACP,wBAAY;AADL,WADc;AAItB,kBAAQ;AACP,wBAAY;AADL;AAJc,SAFxB;AAUC,iBAAS,GAVV;AAWC,iBAAS,IAXV;AAYC,gBAAQ,kCAZT;AAaC,yBAAiB,EAblB;AAcC,qBAAa,CACZ;AACM,eAAK;AACH,mBAAO;AACL,sBAAQ,CACN,CADM;AADH,aADJ;AAMH,mBAAO;AACL,sBAAQ,CACN,CADM;AADH;AANJ;AADX,SADY;AAdd,OADyC,CAA1C;AAiCA,KAlCM,CAAP;AAmCA,GA1FC,CAAF;AA2FA,CA1QO,CAAR;;ACEA,IAAM4F,eAAa,qCACZrD,qBADY;AAEf9vC,EAAAA,eAAe,EAAE;AAFF,EAAnB;;AAKA,IAAMo1C,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1B,SAAO;AACH7yC,IAAAA,UAAU,EAAE;AADT,GAAP;AAGH,CAJD;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,IAAMooB,KAAG,GAAG,SAANA,GAAM,CAAC1vC,KAAD,EAAQ+uC,MAAR,EAAmB;AAC3B,MAAMn9B,aAAa,GAAGm9B,MAAM,CAACtuC,GAA7B;AACH,MAAM25D,2BAA2B,GAAGC,8BAA8B,CAACr6D,KAAD,EAAQ4R,aAAR,EAAuBm9B,MAAM,CAAC3tC,IAA9B,EAAoC2tC,MAAM,CAACnuC,KAA3C,CAAlE;AAEG,2CAAWZ,KAAX;AAAkB+kB,IAAAA,eAAe,oCAAM/kB,KAAK,CAAC+kB,eAAZ,2BAA8BnT,aAA9B,EAA8CwoD,2BAA9C;AAAjC;AACH,CALD;;AAOA,IAAME,YAAY,GAAG,SAAfA,YAAe,CAACt6D,KAAD,EAAQ+uC,MAAR,EAAmB;AACvC,MAAMwrB,sBAAsB,GAAGC,yBAAyB,CAACx6D,KAAD,EAAQ+uC,MAAM,CAACzpB,mBAAf,EAAoCypB,MAAM,CAACnuC,KAA3C,CAAxD;AACA,MAAM65D,cAAc,GAAGv1D,aAAa,CAACnF,iBAAd,CAAgCC,KAAhC,EAAuC+uC,MAAM,CAAC5jB,aAA9C,EAA6D4jB,MAAM,CAACjwC,KAApE,EAA2EiwC,MAAM,CAAC0P,SAAlF,EAA6F1P,MAAM,CAAC7uC,SAApG,CAAvB;AAEA,2CACIF,KADJ;AAEC+kB,IAAAA,eAAe,EAAEw1C,sBAFlB;AAGC37D,IAAAA,OAAO,EAAE67D;AAHV;AAKA,CATD;;AAWA,IAAM5qB,UAAQ,GAAG,SAAXA,QAAW,CAAC7vC,KAAD,EAAQ+uC,MAAR,EAAmB;AACnC,MAAM0rB,cAAc,GAAGv1D,aAAa,CAACnF,iBAAd,CAAgCC,KAAhC,EAAuC+uC,MAAM,CAAC5jB,aAA9C,EAA6D4jB,MAAM,CAACjwC,KAApE,EAA2EiwC,MAAM,CAAC0P,SAAlF,EAA6F1P,MAAM,CAAC7uC,SAApG,CAAvB;AAEA,2CACIF,KADJ;AAECpB,IAAAA,OAAO,EAAE67D;AAFV;AAIA,CAPD;AASA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAMh7D,aAAW,GAAG,SAAdA,WAAc,CAACO,KAAD,EAAQ+uC,MAAR,EAAmB;AACtC,MAAM0rB,cAAc,GAAGv1D,aAAa,CAACzF,WAAd,CAA0BO,KAAK,CAACpB,OAAhC,EAAyCmwC,MAAM,CAAClwC,MAAhD,EAAwDkwC,MAAM,CAACjwC,KAA/D,CAAvB;AACA,2CACIkB,KADJ;AAECpB,IAAAA,OAAO,EAAE67D;AAFV;AAIA,CAND;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASJ,8BAAT,CAAwCr6D,KAAxC,EAA+C4R,aAA/C,EAA8D8oD,gBAA9D,EAAgF95D,KAAhF,EAAuF;AACtF;AACA,MAAM+5D,gBAAgB,GAAGj6D,MAAM,CAAC2F,IAAP,CAAYq0D,gBAAZ,CAAzB;AACA,MAAIxI,WAAW,GAAGlyD,KAAK,CAAC+kB,eAAN,CAAsBnT,aAAtB,uBAA2C5R,KAAK,CAAC+kB,eAAN,CAAsBnT,aAAtB,CAA3C,IAAmF,EAArG;AAEA+oD,EAAAA,gBAAgB,CAACt6D,OAAjB,CAAyB,UAACsQ,UAAD,EAAgB;AACxC,QAAIuhD,WAAW,CAACpxD,cAAZ,CAA2B6P,UAA3B,CAAJ,EAA4C;AAC3C;AACAuhD,MAAAA,WAAW,CAACvhD,UAAD,CAAX,CAAwB2W,UAAxB,CAAmC1mB,KAAnC,IAA4C85D,gBAAgB,CAAC/pD,UAAD,CAA5D;AACA,KAHD,MAGO;AACN;AACA,UAAMiqD,UAAU,GAAGT,eAAe,EAAlC;AACAS,MAAAA,UAAU,CAACtzC,UAAX,CAAsB1mB,KAAtB,IAA+B85D,gBAAgB,CAAC/pD,UAAD,CAA/C;AACAuhD,MAAAA,WAAW,qCAAOA,WAAP,2BAAqBvhD,UAArB,qBAAsCiqD,UAAtC,GAAX;AACA;AACD,GAVD;AAYA,SAAO1I,WAAP;AACA;;AAED,SAASsI,yBAAT,CAAmCx6D,KAAnC,EAA0CslB,mBAA1C,EAA+D1kB,KAA/D,EAAsE;AACrE,MAAIsxD,WAAW,sBAAOlyD,KAAK,CAAC+kB,eAAb,CAAf;;AAEA,6BAAQO,mBAAR,EAA6B,UAAClkB,IAAD,EAAOwQ,aAAP,EAAyB;AACrD,QAAI,CAACsgD,WAAW,CAACpxD,cAAZ,CAA2B8Q,aAA3B,CAAL,EAAgD;AAC/CsgD,MAAAA,WAAW,CAACtgD,aAAD,CAAX,GAA6B,EAA7B;AACA;;AAED,+BAAQxQ,IAAR,EAAc,UAACylB,QAAD,EAAWlW,UAAX,EAA0B;AACvC,UAAMkqD,eAAe,GAAG3I,WAAW,CAACtgD,aAAD,CAAX,CAA2B9Q,cAA3B,CAA0C6P,UAA1C,CAAxB;;AACA,UAAIkqD,eAAJ,EAAqB;AACpB;AACA3I,QAAAA,WAAW,CAACtgD,aAAD,CAAX,CAA2BjB,UAA3B,EAAuC2W,UAAvC,CAAkD1mB,KAAlD,IAA2DimB,QAA3D;AACA,OAHD,MAGO;AACN;AACA,YAAM+zC,UAAU,GAAGT,eAAe,EAAlC;AACAS,QAAAA,UAAU,CAACtzC,UAAX,CAAsB1mB,KAAtB,IAA+BimB,QAA/B;AACAqrC,QAAAA,WAAW,CAACtgD,aAAD,CAAX,qCAAiCsgD,WAAW,CAACtgD,aAAD,CAA5C,2BAA8DjB,UAA9D,EAA2EiqD,UAA3E;AACA;AACD,KAXD;AAYA,GAjBD;;AAmBA,SAAO1I,WAAP;AACA;;AAED,iBAAe,YAAmC;AAAA,MAAlClyD,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AAC9C,UAAQA,MAAM,CAAC3gC,IAAf;AACI,SAAKwgC,WAAW,CAAClU,IAAZ,CAAiBY,YAAjB,CAA8B9C,GAAnC;AACL,aAAOkX,KAAG,CAAC1vC,KAAD,EAAQ+uC,MAAR,CAAV;;AACD,SAAKH,WAAW,CAAClU,IAAZ,CAAiBY,YAAjB,CAA8BH,cAAnC;AACC,aAAOm/B,YAAY,CAACt6D,KAAD,EAAQ+uC,MAAR,CAAnB;;AACD,SAAKH,WAAW,CAAClU,IAAZ,CAAiBY,YAAjB,CAA8B1C,KAA9B,CAAoCJ,GAAzC;AACC,aAAOqX,UAAQ,CAAC7vC,KAAD,EAAQ+uC,MAAR,CAAf;;AACD,SAAKH,WAAW,CAAClU,IAAZ,CAAiBY,YAAjB,CAA8B1C,KAA9B,CAAoCkB,MAAzC;AACC,aAAOr6B,aAAW,CAACO,KAAD,EAAQ+uC,MAAR,CAAlB;;AACK;AACI,aAAO/uC,KAAP;AAVR;AAYH,CAbD;;ACvHAg2B,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC9CR,EAAAA,EAAE,CAAC,cAAD,EAAiB,YAAY;AAC9BG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC1zC,MAAAA,eAAe,EAAE;AAChBm1C,QAAAA,IAAI,EAAE;AACLY,UAAAA,WAAW,EAAE;AACZxzC,YAAAA,UAAU,EAAE;AACX,mBAAK;AAACyzC,gBAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AADM;AADA;AADR;AADU;AADlB,KADM,EAYN;AACC3sD,MAAAA,IAAI,EAAE,uBADP;AAEC3N,MAAAA,GAAG,EAAE,MAFN;AAGCW,MAAAA,IAAI,EAAE;AAAC,uBAAe;AAAC25D,UAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AAAhB,OAHP;AAICn6D,MAAAA,KAAK,EAAE;AAJR,KAZM,CADR,EAoBC;AACCmkB,MAAAA,eAAe,EAAE;AAChBi1C,QAAAA,IAAI,EAAE;AACLgB,UAAAA,WAAW,EAAE;AACX1zC,YAAAA,UAAU,EAAE;AACX,mBAAK;AACJyzC,gBAAAA,IAAI,EAAE,CAAC,MAAD;AADF;AADM;AADD;AADR,SADU;AAUhBb,QAAAA,IAAI,EAAE;AACLY,UAAAA,WAAW,EAAE;AACZxzC,YAAAA,UAAU,EAAE;AACX,mBAAK;AAACyzC,gBAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AADM;AADA;AADR;AAVU;AADlB,KApBD;AAyCA,GA1CC,CAAF;AA4CAvlC,EAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC7CG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC1zC,MAAAA,eAAe,EAAE;AAChBk2C,QAAAA,GAAG,EAAE;AACJC,UAAAA,GAAG,EAAE;AACJ5zC,YAAAA,UAAU,EAAE;AACX,mBAAK;AAACyzC,gBAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AADM;AADR;AADD;AADW;AADlB,KADM,EAYN;AACC3sD,MAAAA,IAAI,EAAE,uBADP;AAEC3N,MAAAA,GAAG,EAAE,KAFN;AAGCW,MAAAA,IAAI,EAAE;AACL,eAAO;AAAC25D,UAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AADF,OAHP;AAMCn6D,MAAAA,KAAK,EAAE;AANR,KAZM,CADR,EAsBC;AACCmkB,MAAAA,eAAe,EAAE;AAChBk2C,QAAAA,GAAG,EAAE;AACJC,UAAAA,GAAG,EAAE;AACJ5zC,YAAAA,UAAU,EAAE;AACX,mBAAK;AAACyzC,gBAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AADM;AADR,WADD;AAMJI,UAAAA,GAAG,EAAE;AACJ7zC,YAAAA,UAAU,EAAE;AACX,mBAAK;AAACyzC,gBAAAA,IAAI,EAAE,CAAC,MAAD;AAAP;AADM;AADR;AAND;AADW;AADlB,KAtBD;AAuCA,GAxCC,CAAF;AA0CAvlC,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AAE3B,QAAM32B,MAAM,GAAG;AAACqD,MAAAA,KAAK,EAAE;AAAR,KAAf;AACA,QAAMpD,KAAK,GAAG,IAAd;AACA,QAAM8B,KAAK,GAAG,EAAd;AAEN,QAAM6kB,IAAI,GAAG,OAAb;AACA,QAAMrkB,IAAI,GAAG,qBAAGR,KAAH,sBAAa6kB,IAAb,EAAmB;AAAC85B,MAAAA,KAAK,EAAE,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL;AAAR,KAAnB,GAAb;AACA,QAAMr/C,SAAS,GAAG,IAAlB;AACAy1B,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE,6BADP;AAEC+c,MAAAA,aAAa,EAAEtsB,MAFhB;AAGCC,MAAAA,KAAK,EAALA,KAHD;AAIC2/C,MAAAA,SAAS,EAAEr9C,IAJZ;AAKClB,MAAAA,SAAS,EAATA;AALD,KAFM,CADR,EAWC;AACCtB,MAAAA,OAAO,EAAE,CACR;AACCC,QAAAA,MAAM,EAANA,MADD;AAECC,QAAAA,KAAK,EAALA,KAFD;AAGCoB,QAAAA,SAAS,EAATA,SAHD;AAICnB,QAAAA,KAAK,sBAAI6B,KAAJ,sBAAc6kB,IAAd,EAAoB;AAAC85B,UAAAA,KAAK,EAAE,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL;AAAR,SAApB;AAJN,OADQ;AADV,KAXD;AAsBA,GA/BC,CAAF;AAiCA/pB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AAAA;;AAE3B,QAAM32B,MAAM,GAAG;AAACqD,MAAAA,KAAK,EAAE;AAAR,KAAf;AACA,QAAMpD,KAAK,GAAG,IAAd;AACA,QAAM8B,KAAK,GAAG,EAAd;AAEN,QAAM6kB,IAAI,GAAG,OAAb;AACA,QAAM21C,KAAK,GAAG,OAAd;AACA,QAAMh6D,IAAI,GAAG,qBAAGR,KAAH,0CACX6kB,IADW,EACL,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CADK,4BAEX21C,KAFW,EAEJ,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAFI,aAAb;AAIA,QAAMl7D,SAAS,GAAG,IAAlB;AACAy1B,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE,6BADP;AAEC+c,MAAAA,aAAa,EAAEtsB,MAFhB;AAGCC,MAAAA,KAAK,EAALA,KAHD;AAIC2/C,MAAAA,SAAS,EAAEr9C,IAJZ;AAKClB,MAAAA,SAAS,EAATA;AALD,KAFM,CADR,EAWC;AACCtB,MAAAA,OAAO,EAAE,CACR;AACCC,QAAAA,MAAM,EAANA,MADD;AAECC,QAAAA,KAAK,EAALA,KAFD;AAGCC,QAAAA,KAAK,sBAAI6B,KAAJ,0CACH6kB,IADG,EACG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CADH,4BAEH21C,KAFG,EAEI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAFJ,YAHN;AAOCl7D,QAAAA,SAAS,EAATA;AAPD,OADQ;AADV,KAXD;AAyBA,GAtCC,CAAF;AAwCAs1B,EAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAAA;;AAEvC,QAAM32B,MAAM,GAAG;AAACqD,MAAAA,KAAK,EAAE;AAAR,KAAf;AACA,QAAMpD,KAAK,GAAG,IAAd;AACA,QAAM8B,KAAK,GAAG,EAAd;AAEN,QAAM6kB,IAAI,GAAG,OAAb;AACA,QAAM21C,KAAK,GAAG,OAAd;;AACA,QAAMr8D,KAAK,uBAAK6B,KAAL,0CACT6kB,IADS,EACH,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CADG,4BAET21C,KAFS,EAEF,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAFE,YAAX;;AAIA,QAAMC,WAAW,GAAG,qBAAGz6D,KAAH,sBAClBw6D,KADkB,EACX,CAAC,CAAD,EAAG,CAAH,EAAK,EAAL,EAAQ,EAAR,EAAW,EAAX,CADW,GAApB;AAGA,QAAMl7D,SAAS,GAAG,IAAlB;AACAy1B,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC75D,MAAAA,OAAO,EAAE,CACR;AACCC,QAAAA,MAAM,EAANA,MADD;AAECC,QAAAA,KAAK,EAALA,KAFD;AAGCC,QAAAA,KAAK,EAAEA,KAHR;AAICmB,QAAAA,SAAS,EAATA;AAJD,OADQ;AADV,KADM,EAWN;AACCkO,MAAAA,IAAI,EAAE,6BADP;AAEC+c,MAAAA,aAAa,EAAEtsB,MAFhB;AAGCC,MAAAA,KAAK,EAALA,KAHD;AAIC2/C,MAAAA,SAAS,EAAE4c,WAJZ;AAKCn7D,MAAAA,SAAS,EAATA;AALD,KAXM,CADR,EAoBC;AACCtB,MAAAA,OAAO,EAAE,CACR;AACCC,QAAAA,MAAM,EAANA,MADD;AAECC,QAAAA,KAAK,EAALA,KAFD;AAGCC,QAAAA,KAAK,sBAAI6B,KAAJ,0CACH6kB,IADG,EACG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CADH,4BAEH21C,KAFG,EAEI,CAAC,CAAD,EAAG,CAAH,EAAK,EAAL,EAAQ,EAAR,EAAW,EAAX,CAFJ,YAHN;AAOCl7D,QAAAA,SAAS,EAATA;AAPD,OADQ;AADV,KApBD;AAkCA,GAlDC,CAAF;AAmDA,CAnNO,CAAR;;ACAA81B,QAAQ,CAAC,uCAAD,EAA0C,YAAY;AAC7D,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHM,MAGA,IAAI8hB,KAAK,CAACy4C,OAAN,CAAchrB,MAAd,CAAJ,EAA2B;AACjCujB,UAAAA,iBAAiB,gCAAOA,iBAAP,sBAA6BvjB,MAA7B,EAAjB;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,IAAI,IAAZ;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KA1BM,CAAP;AA2BA,GA5BD;;AA8BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBE,IAAAA,sBAAsB;AACtB,GAFQ,CAAT;AAIA/8B,EAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO,EAAP;AAAA,KAAjB;;AACA,QAAMD,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMhH,MAAM,GAAG,EAAf;AACA,QAAMlpC,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAMolC,KAAK,GAAG,EAAd;AACA,QAAMC,OAAO,GAAG,IAAhB;AAENtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB/C,MAAvB,EAA+BlpC,MAA/B,EAAuCC,KAAvC,EAA8C+G,KAA9C,EAAqDolC,KAArD,EAA4DC,OAA5D,CAAD,CAAR;AAEA,WAAOsnB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACgBlkD,QAAAA,IAAI,EAAE,qCADtB;AAEgBvP,QAAAA,MAAM,EAANA,MAFhB;AAGgBC,QAAAA,KAAK,EAALA,KAHhB;AAIgB+G,QAAAA,KAAK,EAALA,KAJhB;AAKgBlB,QAAAA,KAAK,EAAEsmC,KALvB;AAMgB7pC,QAAAA,IAAI,EAAE2mC,MANtB;AAOgB7nC,QAAAA,SAAS,EAAEgrC;AAP3B,OADyC,CAA1C;AAWA,KAZM,CAAP;AAaA,GArCC,CAAF;AAuCA1V,EAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC7C,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO,EAAP;AAAA,KAAjB;;AACA,QAAMD,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMrC,OAAO,GAAG,CAAC;AAACjsC,MAAAA,GAAG,EAAC;AAAL,KAAD,EAAU;AAACA,MAAAA,GAAG,EAAC;AAAL,KAAV,CAAhB;AACA,QAAM5B,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAMolC,KAAK,GAAG,EAAd;AACA,QAAMC,OAAO,GAAG,IAAhB;AAENtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB4B,OAAvB,EAAgC7tC,MAAhC,EAAwCC,KAAxC,EAA+C+G,KAA/C,EAAsDolC,KAAtD,EAA6DC,OAA7D,CAAD,CAAR;AAEA,WAAOsnB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CAC7B;AACM,gBAAQ5lB,OADd;AAEM,kBAAU7tC,MAFhB;AAGM,gBAAQ;AAHd,OAD6B,EAMzC;AACgBuP,QAAAA,IAAI,EAAE,qCADtB;AAEgBvP,QAAAA,MAAM,EAANA,MAFhB;AAGgBC,QAAAA,KAAK,EAALA,KAHhB;AAIgB+G,QAAAA,KAAK,EAALA,KAJhB;AAKgBlB,QAAAA,KAAK,EAAEsmC,KALvB;AAMgB7pC,QAAAA,IAAI,EAAEsrC,OANtB;AAOgBxsC,QAAAA,SAAS,EAAEgrC;AAP3B,OANyC,CAA1C;AAgBA,KAjBM,CAAP;AAkBA,GA1CC,CAAF;AA2CA,CA3HO,CAAR;;ACAAlV,QAAQ,CAAC,sCAAD,EAAyC,YAAY;AAC5D,MAAIs8B,iBAAiB,GAAG,EAAxB;;AAEA,MAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAY;AAC1CD,IAAAA,iBAAiB,GAAG,EAApB;AACA,GAFD;;AAIA,MAAME,kBAAkB,GAAG,SAArBA,kBAAqB,OAAgC;AAAA,QAArB5qB,QAAqB,QAArBA,QAAqB;AAAA,QAAXC,QAAW,QAAXA,QAAW;AAC1D,WAAO,IAAI2E,OAAJ,CAAY,UAACue,OAAD,EAAU0H,MAAV,EAAqB;AACvC,UAAMtmB,QAAQ,GAAG,EAAjB;;AACA,WAAK,IAAI3sC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8yD,iBAAiB,CAACxyD,MAAtC,EAA8CN,CAAC,EAA/C,EAAmD;AAClD,YAAMuvC,MAAM,GAAGujB,iBAAiB,CAAC9yD,CAAD,CAAhC;;AAEA,YAAI,OAAOuvC,MAAP,KAAkB,UAAtB,EAAkC;AACjC5C,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAApB;AACAyqB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHD,MAGO,IAAIuvC,MAAM,YAAYvC,OAAtB,EAA+B;AACrCL,UAAAA,QAAQ,CAAC5rC,IAAT,CAAcwuC,MAAd;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA,SAHM,MAGA,IAAI8hB,KAAK,CAACy4C,OAAN,CAAchrB,MAAd,CAAJ,EAA2B;AACjCujB,UAAAA,iBAAiB,gCAAOA,iBAAP,sBAA6BvjB,MAA7B,EAAjB;AACAujB,UAAAA,iBAAiB,CAAC9yD,CAAD,CAAjB,GAAuB,IAAvB;AACA;AACD;;AAED8yD,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACzzD,MAAlB,CAAyB,UAACmiB,CAAD;AAAA,eAAOA,CAAC,IAAI,IAAZ;AAAA,OAAzB,CAApB;;AAEA,UAAImrB,QAAQ,CAACrsC,MAAT,GAAkB,CAAtB,EAAyB;AACxB,eAAO0sC,OAAO,CAACC,GAAR,CAAYN,QAAZ,EACLnF,IADK,CACA;AAAA,iBAAMwrB,kBAAkB,CAAC;AAAC5qB,YAAAA,QAAQ,EAARA,QAAD;AAAWC,YAAAA,QAAQ,EAARA;AAAX,WAAD,CAAxB;AAAA,SADA,EAELb,IAFK,CAEA;AAAA,iBAAM+jB,OAAO,EAAb;AAAA,SAFA,CAAP;AAGA;;AAEDA,MAAAA,OAAO;AACP,KA1BM,CAAP;AA2BA,GA5BD;;AA8BAsH,EAAAA,SAAS,CAAC,YAAY;AACrBE,IAAAA,sBAAsB;AACtB,GAFQ,CAAT;AAIA/8B,EAAAA,EAAE,CAAC,gBAAD,EAAmB,YAAY;AAChC,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO,EAAP;AAAA,KAAjB;;AACA,QAAMD,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMhH,MAAM,GAAG,EAAf;AACA,QAAMlpC,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAMolC,KAAK,GAAG,EAAd;AACA,QAAMC,OAAO,GAAG,IAAhB;AAENtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB/C,MAAvB,EAA+BlpC,MAA/B,EAAuCC,KAAvC,EAA8C+G,KAA9C,EAAqDolC,KAArD,EAA4DC,OAA5D,CAAD,CAAR;AAEA,WAAOsnB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CACzC;AACgBlkD,QAAAA,IAAI,EAAE,kCADtB;AAEgBvP,QAAAA,MAAM,EAANA,MAFhB;AAGgBC,QAAAA,KAAK,EAALA,KAHhB;AAIgB+G,QAAAA,KAAK,EAALA,KAJhB;AAKgBlB,QAAAA,KAAK,EAAEsmC,KALvB;AAMgB7pC,QAAAA,IAAI,EAAE2mC,MANtB;AAOgB7nC,QAAAA,SAAS,EAAEgrC;AAP3B,OADyC,CAA1C;AAWA,KAZM,CAAP;AAaA,GArCC,CAAF;AAuCA1V,EAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAY;AAC7C,QAAMqS,QAAQ,GAAG,SAAXA,QAAW;AAAA,aAAO,EAAP;AAAA,KAAjB;;AACA,QAAMD,QAAQ,GAAG,SAAXA,QAAW,CAACmH,MAAD,EAAY;AAC5B,UAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAMnC,GAAG,GAAGmC,MAAM,CAACnH,QAAD,EAAWC,QAAX,CAAlB;;AACA,YAAI+E,GAAG,IAAI,IAAX,EAAiB;AAChB0lB,UAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBqsC,GAAvB;AACA;;AAED,eAAOA,GAAP;AACA;;AAED0lB,MAAAA,iBAAiB,CAAC/xD,IAAlB,CAAuBwuC,MAAvB;AACM,KAXP;;AAaM,QAAMrC,OAAO,GAAG,CAAC;AAACjsC,MAAAA,GAAG,EAAC;AAAL,KAAD,EAAU;AAACA,MAAAA,GAAG,EAAC;AAAL,KAAV,CAAhB;AACA,QAAM5B,MAAM,GAAG,EAAf;AACA,QAAMC,KAAK,GAAG,IAAd;AACA,QAAM+G,KAAK,GAAG,CAAd;AACA,QAAMolC,KAAK,GAAG,EAAd;AACA,QAAMC,OAAO,GAAG,IAAhB;AAENtD,IAAAA,QAAQ,CAAC6G,SAAO,CAAC3D,cAAR,CAAuB4B,OAAvB,EAAgC7tC,MAAhC,EAAwCC,KAAxC,EAA+C+G,KAA/C,EAAsDolC,KAAtD,EAA6DC,OAA7D,CAAD,CAAR;AAEA,WAAOsnB,kBAAkB,CAAC;AAAC5qB,MAAAA,QAAQ,EAARA,QAAD;AAAWC,MAAAA,QAAQ,EAARA;AAAX,KAAD,CAAlB,CAAyCb,IAAzC,CAA8C,YAAM;AAC1DrR,MAAAA,WAAM,CAACC,eAAP,CAAuB08B,iBAAvB,EAA0C,CAC7B;AACM,gBAAQ5lB,OADd;AAEM,kBAAU7tC,MAFhB;AAGM,gBAAQ;AAHd,OAD6B,EAMzC;AACgBuP,QAAAA,IAAI,EAAE,kCADtB;AAEgBvP,QAAAA,MAAM,EAANA,MAFhB;AAGgBC,QAAAA,KAAK,EAALA,KAHhB;AAIgB+G,QAAAA,KAAK,EAALA,KAJhB;AAKgBlB,QAAAA,KAAK,EAAEsmC,KALvB;AAMgB7pC,QAAAA,IAAI,EAAEsrC,OANtB;AAOgBxsC,QAAAA,SAAS,EAAEgrC;AAP3B,OANyC,CAA1C;AAgBA,KAjBM,CAAP;AAkBA,GA1CC,CAAF;AA2CA,CA3HO,CAAR;;ACAAlV,QAAQ,CAAC,uCAAD,EAA0C,YAAY;AAC1DA,EAAAA,QAAQ,CAAC,UAAD,EAAa,YAAY;AAC7B,QAAMh2B,KAAK,GAAG;AACVoB,MAAAA,IAAI,EAAE;AACFwR,QAAAA,gBAAgB,EAAE;AACdhU,UAAAA,OAAO,EAAE,CAAC;AACNC,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE,QAAX;AAAqBG,cAAAA,QAAQ,EAAE;AAA/B,aADF;AAENzD,YAAAA,KAAK,EAAE,IAFD;AAGN6F,YAAAA,KAAK,EAAE,CAHD;AAIN5F,YAAAA,KAAK,EAAE;AACH,iBAAG,GADA;AAEH,iBAAG,GAFA;AAGH,iBAAG;AAHA;AAJD,WAAD,EASN;AACCF,YAAAA,MAAM,EAAE;AAACuD,cAAAA,QAAQ,EAAE,QAAX;AAAqBG,cAAAA,QAAQ,EAAE,QAA/B;AAAyCN,cAAAA,OAAO,EAAE;AAAC,sBAAI,CAAC,GAAD,EAAM,GAAN;AAAL;AAAlD,aADT;AAECnD,YAAAA,KAAK,EAAE,IAFR;AAGC6F,YAAAA,KAAK,EAAE,CAHR;AAIC5F,YAAAA,KAAK,EAAE;AACH,iBAAG,GADA;AAEH,iBAAG,IAFA;AAGH,iBAAG;AAHA;AAJR,WATM;AADK;AADhB;AADI,KAAd;AA0BAy2B,IAAAA,EAAE,CAAC,qBAAD,EAAwB,YAAY;AAClC,UAAM32B,MAAM,GAAG;AAACuD,QAAAA,QAAQ,EAAE,QAAX;AAAqBG,QAAAA,QAAQ,EAAE;AAA/B,OAAf;AACA,UAAM+yB,cAAc,GAAG;AACnBz2B,QAAAA,MAAM,EAAE;AAACuD,UAAAA,QAAQ,EAAE,QAAX;AAAqBG,UAAAA,QAAQ,EAAE;AAA/B,SADW;AAEnBzD,QAAAA,KAAK,EAAE,IAFY;AAGnB6F,QAAAA,KAAK,EAAE,CAHY;AAInB5F,QAAAA,KAAK,EAAE;AACH,aAAG,GADA;AAEH,aAAG,GAFA;AAGH,aAAG;AAHA;AAJY,OAAvB;AAUA42B,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACj/C,QAAV,CAAmBsB,KAAnB,EAA0BnB,MAA1B,EAAkC,IAAlC,CAAvB,EAAgEy2B,cAAhE;AACH,KAbC,CAAF;AAeAE,IAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAY;AACzD,UAAM32B,MAAM,GAAG;AAACuD,QAAAA,QAAQ,EAAE,QAAX;AAAqBG,QAAAA,QAAQ,EAAE,QAA/B;AAAyCN,QAAAA,OAAO,EAAE;AAAC,gBAAI,CAAC,GAAD,EAAM,GAAN;AAAL;AAAlD,OAAf;AACA,UAAMqzB,cAAc,GAAG;AACnBz2B,QAAAA,MAAM,EAAE;AAACuD,UAAAA,QAAQ,EAAE,QAAX;AAAqBG,UAAAA,QAAQ,EAAE,QAA/B;AAAyCN,UAAAA,OAAO,EAAE;AAAC,kBAAI,CAAC,GAAD,EAAM,GAAN;AAAL;AAAlD,SADW;AAEnBnD,QAAAA,KAAK,EAAE,IAFY;AAGnB6F,QAAAA,KAAK,EAAE,CAHY;AAInB5F,QAAAA,KAAK,EAAE;AACH,aAAG,GADA;AAEH,aAAG,IAFA;AAGH,aAAG;AAHA;AAJY,OAAvB;AAUA42B,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACj/C,QAAV,CAAmBsB,KAAnB,EAA0BnB,MAA1B,EAAkC,IAAlC,CAAvB,EAAgEy2B,cAAhE;AACH,KAbC,CAAF;AAeAE,IAAAA,EAAE,CAAC,yBAAD,EAA4B,YAAY;AACtC,UAAM32B,MAAM,GAAG;AAACuD,QAAAA,QAAQ,EAAE,QAAX;AAAqBG,QAAAA,QAAQ,EAAE,QAA/B;AAAyCN,QAAAA,OAAO,EAAE;AAAC,gBAAI,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;AAAL;AAAlD,OAAf;AACA,UAAMqzB,cAAc,GAAG,IAAvB;AACAK,MAAAA,WAAM,CAACC,eAAP,CAAuB+nB,WAAS,CAACj/C,QAAV,CAAmBsB,KAAnB,EAA0BnB,MAA1B,EAAkC,IAAlC,CAAvB,EAAgEy2B,cAAhE;AACH,KAJC,CAAF;AAKH,GA9DO,CAAR;AA+DH,CAhEO,CAAR;;ACDA,IAAM4iC,eAAa,GAAG;AACrBtwC,EAAAA,QAAQ,EAAE,EADW;AAErBE,EAAAA,UAAU,EAAE,EAFS;AAGrB7jB,EAAAA,KAAK,EAAE;AAHc,CAAtB;;AAOA,SAASq3D,aAAT,CAAuBt7D,KAAvB,EAA8B+uC,MAA9B,EAAsC;AACrC,MAAIwsB,WAAW,qCAAOC,cAAc,CAACx7D,KAAD,EAAQ+uC,MAAM,CAACyU,MAAf,EAAuBzU,MAAM,CAAC3hC,QAA9B,CAArB;AAA8DhM,IAAAA,IAAI,EAAE2tC,MAAM,CAAC5lC,OAA3E;AAAoFy9C,IAAAA,OAAO,EAAE;AAA7F,IAAf;;AACA,MAAI6U,UAAU,qCAAOC,aAAa,CAAC17D,KAAD,EAAQ+uC,MAAM,CAACyU,MAAf,CAApB,2BAA6CzU,MAAM,CAAC3hC,QAApD,EAA+DmuD,WAA/D,EAAd;;AACA,MAAII,SAAS,qCAAO37D,KAAK,CAAC4nB,QAAN,CAAemnB,MAAM,CAACyU,MAAtB,CAAP;AAAsCiY,IAAAA,UAAU,EAAEA;AAAlD,IAAb;;AACA,MAAI7zC,QAAQ,qCAAO5nB,KAAK,CAAC4nB,QAAb,2BAAwBmnB,MAAM,CAACyU,MAA/B,EAAwCmY,SAAxC,EAAZ;;AACA,2CAAW37D,KAAX;AAAkB4nB,IAAAA,QAAQ,EAAEA;AAA5B;AACA;;AAED,SAASg0C,kBAAT,CAA4B57D,KAA5B,EAAmC+uC,MAAnC,EAA2C;AAC1C,MAAIwsB,WAAW,qCAAOC,cAAc,CAACx7D,KAAD,EAAQ+uC,MAAM,CAACyU,MAAf,EAAuBzU,MAAM,CAAC3hC,QAA9B,CAArB;AAA8Dw5C,IAAAA,OAAO,EAAE;AAAvE,IAAf,CAD0C;;;AAE1C,MAAI6U,UAAU,qCAAOC,aAAa,CAAC17D,KAAD,EAAQ+uC,MAAM,CAACyU,MAAf,CAApB,2BAA6CzU,MAAM,CAAC3hC,QAApD,EAA+DmuD,WAA/D,EAAd;;AACA,MAAII,SAAS,qCAAO37D,KAAK,CAAC4nB,QAAN,CAAemnB,MAAM,CAACyU,MAAtB,CAAP;AAAsCiY,IAAAA,UAAU,EAAEA;AAAlD,IAAb;;AACA,MAAI7zC,QAAQ,qCAAO5nB,KAAK,CAAC4nB,QAAb,2BAAwBmnB,MAAM,CAACyU,MAA/B,EAAwCmY,SAAxC,EAAZ;;AACA,2CAAW37D,KAAX;AAAkB4nB,IAAAA,QAAQ,EAAEA;AAA5B;AACA;;AAED,SAASi0C,aAAT,CAAuB77D,KAAvB,EAA8B+uC,MAA9B,EAAsC;AACrC,MAAIwsB,WAAW,qCAAOC,cAAc,CAACx7D,KAAD,EAAQ+uC,MAAM,CAACyU,MAAf,EAAuBzU,MAAM,CAAC3hC,QAA9B,CAArB;AAA8DhM,IAAAA,IAAI,EAAE2tC,MAAM,CAAC5lC,OAA3E;AAAoFy9C,IAAAA,OAAO,EAAE;AAA7F,IAAf;;AACA,MAAI6U,UAAU,qCAAOC,aAAa,CAAC17D,KAAD,EAAQ+uC,MAAM,CAACyU,MAAf,CAApB,2BAA6CzU,MAAM,CAAC3hC,QAApD,EAA+DmuD,WAA/D,EAAd;;AACA,MAAII,SAAS,qCAAO37D,KAAK,CAAC4nB,QAAN,CAAemnB,MAAM,CAACyU,MAAtB,CAAP;AAAsCiY,IAAAA,UAAU,EAAEA;AAAlD,IAAb;;AACA,MAAI7zC,QAAQ,qCAAO5nB,KAAK,CAAC4nB,QAAb,2BAAwBmnB,MAAM,CAACyU,MAA/B,EAAwCmY,SAAxC,EAAZ;;AACA,2CAAW37D,KAAX;AAAkB4nB,IAAAA,QAAQ,EAAEA;AAA5B;AACA;;AAED,SAASk0C,eAAT,CAAyB97D,KAAzB,EAAgC+uC,MAAhC,EAAwC;AACvC,MAAIwsB,WAAW,qCAAOQ,sBAAsB,CAAC/7D,KAAD,EAAQ+uC,MAAM,CAACxsC,QAAf,EAAyBwsC,MAAM,CAAC3hC,QAAhC,CAA7B;AAAwEhM,IAAAA,IAAI,EAAE2tC,MAAM,CAAC5lC,OAArF;AAA8Fy9C,IAAAA,OAAO,EAAE;AAAvG,IAAf;;AACA,MAAI6U,UAAU,qCAAOO,qBAAqB,CAACh8D,KAAD,EAAQ+uC,MAAM,CAACxsC,QAAf,CAA5B,2BAAuDwsC,MAAM,CAAC3hC,QAA9D,EAAyEmuD,WAAzE,EAAd;;AACA,MAAIU,WAAW,qCAAOj8D,KAAK,CAAC8nB,UAAN,CAAiBinB,MAAM,CAACxsC,QAAxB,CAAP;AAA0Ck5D,IAAAA,UAAU,EAAEA;AAAtD,IAAf;;AACA,MAAI3zC,UAAU,qCAAO9nB,KAAK,CAAC8nB,UAAb,2BAA0BinB,MAAM,CAACxsC,QAAjC,EAA4C05D,WAA5C,EAAd;;AACA,2CAAWj8D,KAAX;AAAkB8nB,IAAAA,UAAU,EAAEA;AAA9B;AACA;;AAED,SAASo0C,oBAAT,CAA8Bl8D,KAA9B,EAAqC+uC,MAArC,EAA6C;AAC5C,MAAIwsB,WAAW,qCAAOQ,sBAAsB,CAAC/7D,KAAD,EAAQ+uC,MAAM,CAACxsC,QAAf,EAAyBwsC,MAAM,CAAC3hC,QAAhC,CAA7B;AAAwEw5C,IAAAA,OAAO,EAAE;AAAjF,IAAf;;AACA,MAAI6U,UAAU,qCAAOO,qBAAqB,CAACh8D,KAAD,EAAQ+uC,MAAM,CAACxsC,QAAf,CAA5B,2BAAuDwsC,MAAM,CAAC3hC,QAA9D,EAAyEmuD,WAAzE,EAAd;;AACA,MAAIU,WAAW,qCAAOj8D,KAAK,CAAC8nB,UAAN,CAAiBinB,MAAM,CAACxsC,QAAxB,CAAP;AAA0Ck5D,IAAAA,UAAU,EAAEA;AAAtD,IAAf;;AACA,MAAI3zC,UAAU,qCAAO9nB,KAAK,CAAC8nB,UAAb,2BAA0BinB,MAAM,CAACxsC,QAAjC,EAA4C05D,WAA5C,EAAd;;AACA,2CAAWj8D,KAAX;AAAkB8nB,IAAAA,UAAU,EAAEA;AAA9B;AACA;;AAED,SAASq0C,eAAT,CAAyBn8D,KAAzB,EAAgC+uC,MAAhC,EAAwC;AACvC,MAAIwsB,WAAW,qCAAOQ,sBAAsB,CAAC/7D,KAAD,EAAQ+uC,MAAM,CAACxsC,QAAf,EAAyBwsC,MAAM,CAAC3hC,QAAhC,CAA7B;AAAwEhM,IAAAA,IAAI,EAAE2tC,MAAM,CAAC5lC,OAArF;AAA8Fy9C,IAAAA,OAAO,EAAE;AAAvG,IAAf;;AACA,MAAI6U,UAAU,qCAAOO,qBAAqB,CAACh8D,KAAD,EAAQ+uC,MAAM,CAACxsC,QAAf,CAA5B,2BAAuDwsC,MAAM,CAAC3hC,QAA9D,EAAyEmuD,WAAzE,EAAd;;AACA,MAAIU,WAAW,qCAAOj8D,KAAK,CAAC8nB,UAAN,CAAiBinB,MAAM,CAACxsC,QAAxB,CAAP;AAA0Ck5D,IAAAA,UAAU,EAAEA;AAAtD,IAAf;;AACA,MAAI3zC,UAAU,qCAAO9nB,KAAK,CAAC8nB,UAAb,2BAA0BinB,MAAM,CAACxsC,QAAjC,EAA4C05D,WAA5C,EAAd;;AACA,2CAAWj8D,KAAX;AAAkB8nB,IAAAA,UAAU,EAAEA;AAA9B;AACA;;AAED,SAASs0C,aAAT,CAAuBp8D,KAAvB,EAA8B+uC,MAA9B,EAAsC;AACrC,MAAIwsB,WAAW,qCAAOc,oBAAoB,CAACr8D,KAAD,EAAQ+uC,MAAM,CAACtuC,GAAf,EAAoBsuC,MAAM,CAAC3hC,QAA3B,CAA3B;AAAiEhM,IAAAA,IAAI,EAAE2tC,MAAM,CAAC5lC,OAA9E;AAAuFy9C,IAAAA,OAAO,EAAE;AAAhG,IAAf;;AACA,MAAI6U,UAAU,qCAAOa,mBAAmB,CAACt8D,KAAD,EAAQ+uC,MAAM,CAACtuC,GAAf,CAA1B,2BAAgDsuC,MAAM,CAAC3hC,QAAvD,EAAkEmuD,WAAlE,EAAd;;AACA,MAAIgB,MAAM,qCAAOv8D,KAAK,CAACiE,KAAN,CAAY8qC,MAAM,CAACtuC,GAAnB,CAAP;AAAgCg7D,IAAAA,UAAU,EAAEA;AAA5C,IAAV;;AACA,MAAIx3D,KAAK,qCAAOjE,KAAK,CAACiE,KAAb,2BAAqB8qC,MAAM,CAACtuC,GAA5B,EAAkC87D,MAAlC,EAAT;;AACA,2CAAWv8D,KAAX;AAAkBiE,IAAAA,KAAK,EAAEA;AAAzB;AACA;;AAED,SAASu4D,kBAAT,CAA4Bx8D,KAA5B,EAAmC+uC,MAAnC,EAA2C;AAC1C,MAAIwsB,WAAW,qCAAOc,oBAAoB,CAACr8D,KAAD,EAAQ+uC,MAAM,CAACtuC,GAAf,EAAoBsuC,MAAM,CAAC3hC,QAA3B,CAA3B;AAAiEw5C,IAAAA,OAAO,EAAE;AAA1E,IAAf;;AACA,MAAI6U,UAAU,qCAAOa,mBAAmB,CAACt8D,KAAD,EAAQ+uC,MAAM,CAACtuC,GAAf,CAA1B,2BAAgDsuC,MAAM,CAAC3hC,QAAvD,EAAkEmuD,WAAlE,EAAd;;AACA,MAAIgB,MAAM,qCAAOv8D,KAAK,CAACiE,KAAN,CAAY8qC,MAAM,CAACtuC,GAAnB,CAAP;AAAgCg7D,IAAAA,UAAU,EAAEA;AAA5C,IAAV;;AACA,MAAIx3D,KAAK,qCAAOjE,KAAK,CAACiE,KAAb,2BAAqB8qC,MAAM,CAACtuC,GAA5B,EAAkC87D,MAAlC,EAAT;;AACA,2CAAWv8D,KAAX;AAAkBiE,IAAAA,KAAK,EAAEA;AAAzB;AACA;;AAED,SAASw4D,aAAT,CAAuBz8D,KAAvB,EAA8B+uC,MAA9B,EAAsC;AACrC,MAAIwsB,WAAW,qCAAOc,oBAAoB,CAACr8D,KAAD,EAAQ+uC,MAAM,CAACtuC,GAAf,EAAoBsuC,MAAM,CAAC3hC,QAA3B,CAA3B;AAAiEhM,IAAAA,IAAI,EAAE2tC,MAAM,CAAC5lC,OAA9E;AAAuFy9C,IAAAA,OAAO,EAAE;AAAhG,IAAf;;AACA,MAAI6U,UAAU,qCAAOa,mBAAmB,CAACt8D,KAAD,EAAQ+uC,MAAM,CAACtuC,GAAf,CAA1B,2BAAgDsuC,MAAM,CAAC3hC,QAAvD,EAAkEmuD,WAAlE,EAAd;;AACA,MAAIgB,MAAM,qCAAOv8D,KAAK,CAACiE,KAAN,CAAY8qC,MAAM,CAACtuC,GAAnB,CAAP;AAAgCg7D,IAAAA,UAAU,EAAEA;AAA5C,IAAV;;AACA,MAAIx3D,KAAK,qCAAOjE,KAAK,CAACiE,KAAb,2BAAqB8qC,MAAM,CAACtuC,GAA5B,EAAkC87D,MAAlC,EAAT;;AACA,2CAAWv8D,KAAX;AAAkBiE,IAAAA,KAAK,EAAEA;AAAzB;AACA;;AAGD,iBAAe,YAAmC;AAAA,MAAlCjE,KAAkC,uEAA1Bk4D,eAA0B;AAAA,MAAXnpB,MAAW;;AACjD,UAAQA,MAAM,CAAC3gC,IAAf;AACC,SAAKwgC,WAAW,CAAC7S,+BAAjB;AACC,aAAOu/B,aAAa,CAACt7D,KAAD,EAAQ+uC,MAAR,CAApB;;AACD,SAAKH,WAAW,CAAC3S,+BAAjB;AACC,aAAO4/B,aAAa,CAAC77D,KAAD,EAAQ+uC,MAAR,CAApB;;AACD,SAAKH,WAAW,CAAC5S,qCAAjB;AACC,aAAO4/B,kBAAkB,CAAC57D,KAAD,EAAQ+uC,MAAR,CAAzB;;AACD,SAAKH,WAAW,CAAC1S,iCAAjB;AACC,aAAO4/B,eAAe,CAAC97D,KAAD,EAAQ+uC,MAAR,CAAtB;;AACD,SAAKH,WAAW,CAACxS,iCAAjB;AACC,aAAO+/B,eAAe,CAACn8D,KAAD,EAAQ+uC,MAAR,CAAtB;;AACD,SAAKH,WAAW,CAACzS,uCAAjB;AACC,aAAO+/B,oBAAoB,CAACl8D,KAAD,EAAQ+uC,MAAR,CAA3B;;AACD,SAAKH,WAAW,CAACvS,+BAAjB;AACC,aAAO+/B,aAAa,CAACp8D,KAAD,EAAQ+uC,MAAR,CAApB;;AACD,SAAKH,WAAW,CAACrS,+BAAjB;AACC,aAAOkgC,aAAa,CAACz8D,KAAD,EAAQ+uC,MAAR,CAApB;;AACD,SAAKH,WAAW,CAACtS,qCAAjB;AACC,aAAOkgC,kBAAkB,CAACx8D,KAAD,EAAQ+uC,MAAR,CAAzB;;AACD;AACC,aAAO/uC,KAAP;AApBF;AAsBA,CAvBD;;AA0BA,SAAS07D,aAAT,CAAuB17D,KAAvB,EAA8BwjD,MAA9B,EAAsC;AACrC,SAAOxjD,KAAK,IAAIA,KAAK,CAAC4nB,QAAf,IAA2B5nB,KAAK,CAAC4nB,QAAN,CAAe47B,MAAf,CAA3B,IAAqDxjD,KAAK,CAAC4nB,QAAN,CAAe47B,MAAf,EAAuBiY,UAAnF;AACA;;AACD,SAASD,cAAT,CAAwBx7D,KAAxB,EAA+BwjD,MAA/B,EAAuCp2C,QAAvC,EAAiD;AAChD,SAAOsuD,aAAa,CAAC17D,KAAD,EAAQwjD,MAAR,CAAb,IAAgCxjD,KAAK,CAAC4nB,QAAN,CAAe47B,MAAf,EAAuBiY,UAAvB,CAAkCruD,QAAlC,CAAvC;AACA;;AAED,SAAS4uD,qBAAT,CAA+Bh8D,KAA/B,EAAsCuC,QAAtC,EAAgD;AAC/C,SAAOvC,KAAK,IAAIA,KAAK,CAAC8nB,UAAf,IAA6B9nB,KAAK,CAAC8nB,UAAN,CAAiBvlB,QAAjB,CAA7B,IAA2DvC,KAAK,CAAC8nB,UAAN,CAAiBvlB,QAAjB,EAA2Bk5D,UAA7F;AACA;;AACD,SAASM,sBAAT,CAAgC/7D,KAAhC,EAAuCuC,QAAvC,EAAiD6K,QAAjD,EAA2D;AAC1D,SAAO4uD,qBAAqB,CAACh8D,KAAD,EAAQuC,QAAR,CAArB,IAA0CvC,KAAK,CAAC8nB,UAAN,CAAiBvlB,QAAjB,EAA2Bk5D,UAA3B,CAAsCruD,QAAtC,CAAjD;AACA;;AAED,SAASkvD,mBAAT,CAA6Bt8D,KAA7B,EAAoCS,GAApC,EAAyC;AACxC,SAAOT,KAAK,IAAIA,KAAK,CAACiE,KAAf,IAAwBjE,KAAK,CAACiE,KAAN,CAAYxD,GAAZ,CAAxB,IAA4CT,KAAK,CAACiE,KAAN,CAAYxD,GAAZ,EAAiBg7D,UAApE;AACA;;AACD,SAASY,oBAAT,CAA8Br8D,KAA9B,EAAqCS,GAArC,EAA0C2M,QAA1C,EAAoD;AACnD,SAAOkvD,mBAAmB,CAACt8D,KAAD,EAAQS,GAAR,CAAnB,IAAmCT,KAAK,CAACiE,KAAN,CAAYxD,GAAZ,EAAiBg7D,UAAjB,CAA4BruD,QAA5B,CAA1C;AACA;;AC5HD4oB,QAAQ,CAAC,6BAAD,EAAgC,YAAY;AACnDR,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC7wC,MAAAA,QAAQ,EAAE;AAAC80C,QAAAA,GAAG,EAAE;AAACjB,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAN;AADX,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,iCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAICo2C,MAAAA,MAAM,EAAE;AAJT,KAJM,CADR,EAYC;AACC57B,MAAAA,QAAQ,EAAE;AACT80C,QAAAA,GAAG,EAAE;AACJjB,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJv7D,cAAAA,IAAI,EAAE;AACL62D,gBAAAA,EAAE,EAAE;AADC,eADF;AAIJ7qD,cAAAA,QAAQ,EAAE,KAJN;AAKJw5C,cAAAA,OAAO,EAAE;AALL;AADM;AADR;AADI;AADX,KAZD;AA4BA,GA7BC,CAAF;AA+BApxB,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC7wC,MAAAA,QAAQ,EAAE;AAAC80C,QAAAA,GAAG,EAAE;AAACjB,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAN;AADX,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,iCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAICo2C,MAAAA,MAAM,EAAE;AAJT,KAJM,CADR,EAYC;AACC57B,MAAAA,QAAQ,EAAE;AACT80C,QAAAA,GAAG,EAAE;AACJjB,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJv7D,cAAAA,IAAI,EAAE;AACL62D,gBAAAA,EAAE,EAAE;AADC,eADF;AAIJ7qD,cAAAA,QAAQ,EAAE,KAJN;AAKJw5C,cAAAA,OAAO,EAAE;AALL;AADM;AADR;AADI;AADX,KAZD;AA4BA,GA7BC,CAAF;AA+BApxB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC7wC,MAAAA,QAAQ,EAAE;AAAC80C,QAAAA,GAAG,EAAE;AAACjB,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAN;AADX,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,uCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAICo2C,MAAAA,MAAM,EAAE;AAJT,KAJM,CADR,EAYC;AACC57B,MAAAA,QAAQ,EAAE;AACT80C,QAAAA,GAAG,EAAE;AACJjB,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJvvD,cAAAA,QAAQ,EAAE,KADN;AAEJw5C,cAAAA,OAAO,EAAE;AAFL;AADM;AADR;AADI;AADX,KAZD;AAyBA,GA1BC,CAAF;AA4BApxB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC3wC,MAAAA,UAAU,EAAE;AAAC80C,QAAAA,GAAG,EAAE;AAACnB,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAN;AADb,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,mCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAIC7K,MAAAA,QAAQ,EAAE;AAJX,KAJM,CADR,EAYC;AACCulB,MAAAA,UAAU,EAAE;AACX80C,QAAAA,GAAG,EAAE;AACJnB,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJv7D,cAAAA,IAAI,EAAE;AACL62D,gBAAAA,EAAE,EAAE;AADC,eADF;AAIJ7qD,cAAAA,QAAQ,EAAE,KAJN;AAKJw5C,cAAAA,OAAO,EAAE;AALL;AADM;AADR;AADM;AADb,KAZD;AA4BA,GA7BC,CAAF;AA+BApxB,EAAAA,EAAE,CAAC,iBAAD,EAAoB,YAAY;AACjCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC3wC,MAAAA,UAAU,EAAE;AAAC80C,QAAAA,GAAG,EAAE;AAACnB,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAN;AADb,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,mCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAIC7K,MAAAA,QAAQ,EAAE;AAJX,KAJM,CADR,EAYC;AACCulB,MAAAA,UAAU,EAAE;AACX80C,QAAAA,GAAG,EAAE;AACJnB,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJv7D,cAAAA,IAAI,EAAE;AACL62D,gBAAAA,EAAE,EAAE;AADC,eADF;AAIJ7qD,cAAAA,QAAQ,EAAE,KAJN;AAKJw5C,cAAAA,OAAO,EAAE;AALL;AADM;AADR;AADM;AADb,KAZD;AA4BA,GA7BC,CAAF;AA+BApxB,EAAAA,EAAE,CAAC,sBAAD,EAAyB,YAAY;AACtCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACC3wC,MAAAA,UAAU,EAAE;AAAC40C,QAAAA,GAAG,EAAE;AAACjB,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAN;AADb,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,yCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAIC7K,MAAAA,QAAQ,EAAE;AAJX,KAJM,CADR,EAYC;AACCulB,MAAAA,UAAU,EAAE;AACX40C,QAAAA,GAAG,EAAE;AACJjB,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJvvD,cAAAA,QAAQ,EAAE,KADN;AAEJw5C,cAAAA,OAAO,EAAE;AAFL;AADM;AADR;AADM;AADb,KAZD;AAyBA,GA1BC,CAAF;AA4BApxB,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACCx0D,MAAAA,KAAK,EAAE;AAACivD,QAAAA,EAAE,EAAE;AAACuI,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAL;AADR,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,iCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAIC3M,MAAAA,GAAG,EAAE;AAJN,KAJM,CADR,EAYC;AACCwD,MAAAA,KAAK,EAAE;AACNivD,QAAAA,EAAE,EAAE;AACHuI,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJv7D,cAAAA,IAAI,EAAE;AACL62D,gBAAAA,EAAE,EAAE;AADC,eADF;AAIJ7qD,cAAAA,QAAQ,EAAE,KAJN;AAKJw5C,cAAAA,OAAO,EAAE;AALL;AADM;AADT;AADE;AADR,KAZD;AA4BA,GA7BC,CAAF;AA+BApxB,EAAAA,EAAE,CAAC,eAAD,EAAkB,YAAY;AAC/BG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACCx0D,MAAAA,KAAK,EAAE;AAACivD,QAAAA,EAAE,EAAE;AAACuI,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAL;AADR,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,iCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAIC3M,MAAAA,GAAG,EAAE;AAJN,KAJM,CADR,EAYC;AACCwD,MAAAA,KAAK,EAAE;AACNivD,QAAAA,EAAE,EAAE;AACHuI,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJv7D,cAAAA,IAAI,EAAE;AACL62D,gBAAAA,EAAE,EAAE;AADC,eADF;AAIJ7qD,cAAAA,QAAQ,EAAE,KAJN;AAKJw5C,cAAAA,OAAO,EAAE;AALL;AADM;AADT;AADE;AADR,KAZD;AA4BA,GA7BC,CAAF;AA+BApxB,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN;AACCx0D,MAAAA,KAAK,EAAE;AAACivD,QAAAA,EAAE,EAAE;AAACuI,UAAAA,UAAU,EAAE;AAACkB,YAAAA,GAAG,EAAE;AAACvvD,cAAAA,QAAQ,EAAE;AAAX;AAAN;AAAb;AAAL;AADR,KADM,EAIN;AACCgB,MAAAA,IAAI,EAAE,uCADP;AAECjF,MAAAA,OAAO,EAAE;AAAC8uD,QAAAA,EAAE,EAAE;AAAL,OAFV;AAGC7qD,MAAAA,QAAQ,EAAE,KAHX;AAIC3M,MAAAA,GAAG,EAAE;AAJN,KAJM,CADR,EAYC;AACCwD,MAAAA,KAAK,EAAE;AACNivD,QAAAA,EAAE,EAAE;AACHuI,UAAAA,UAAU,EAAE;AACXkB,YAAAA,GAAG,EAAE;AACJvvD,cAAAA,QAAQ,EAAE,KADN;AAEJw5C,cAAAA,OAAO,EAAE;AAFL;AADM;AADT;AADE;AADR,KAZD;AAyBA,GA1BC,CAAF;AA4BApxB,EAAAA,EAAE,CAAC,SAAD,EAAY,YAAY;AACzBG,IAAAA,WAAM,CAACC,eAAP,CACC6iC,SAAO,CACN,EADM,EAEN;AACCrqD,MAAAA,IAAI,EAAE;AADP,KAFM,CADR,EAOC,EAPD;AASA,GAVC,CAAF;AAWA,CA1RO,CAAR;;ACAA4nB,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACpDR,EAAAA,EAAE,CAAC,kBAAD,EAAqB,YAAY;AAClCG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACv1B,gBAAV,CAA2B;AAC1BT,MAAAA,YAAY,EAAE;AAACC,QAAAA,QAAQ,EAAE;AAAC80C,UAAAA,GAAG,EAAE;AAACj8D,YAAAA,GAAG,EAAE;AAAN;AAAN;AAAX,OADY;AAE1BunB,MAAAA,GAAG,EAAE;AAAClkB,QAAAA,SAAS,EAAE;AAAZ;AAFqB,KAA3B,CADD,EAKC;AAACrD,MAAAA,GAAG,EAAE;AAAN,KALD;AAOA,GARC,CAAF;AAUA+0B,EAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAY;AACpCG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACr1B,kBAAV,CAA6B;AAC5BX,MAAAA,YAAY,EAAE;AAACG,QAAAA,UAAU,EAAE;AAAC80C,UAAAA,GAAG,EAAE;AAACn8D,YAAAA,GAAG,EAAE;AAAN;AAAN;AAAb,OADc;AAE5ByI,MAAAA,MAAM,EAAE;AAACpF,QAAAA,SAAS,EAAE;AAAZ;AAFoB,KAA7B,CADD,EAKC;AAACrD,MAAAA,GAAG,EAAE;AAAN,KALD;AAOA,GARC,CAAF;AAUA+0B,EAAAA,EAAE,CAAC,sBAAD,EAAyB,YAAY;AACtCG,IAAAA,WAAM,CAACC,eAAP,CACC+nB,WAAS,CAACp1B,oBAAV,CAA+B;AAC9BZ,MAAAA,YAAY,EAAE;AAAC1jB,QAAAA,KAAK,EAAE;AAAC44D,UAAAA,WAAW,EAAE;AAACp8D,YAAAA,GAAG,EAAE;AAAN;AAAd;AAAR,OADgB;AAE9B8I,MAAAA,QAAQ,EAAE;AAAC4e,QAAAA,qBAAqB,EAAE;AAACnmB,UAAAA,aAAa,EAAE;AAAhB;AAAxB;AAFoB,KAA/B,CADD,EAKC;AAACvB,MAAAA,GAAG,EAAE;AAAN,KALD;AAOA,GARC,CAAF;AASA,CA9BO,CAAR;;ACGAu1B,QAAQ,CAAC,4BAAD,EAA+B,YAAY;AAC/CA,EAAAA,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AAC9C,QAAM1a,eAAe,GAAG;AACpBpY,MAAAA,gBAAgB,EAAE;AADE,KAAxB;AAIA,QAAMoyB,cAAc,GAAG;AACnB70B,MAAAA,GAAG,EAAE,wBADc;AAEnByC,MAAAA,gBAAgB,EAAE;AAFC,KAAvB;AAKAsyB,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C;AACAG,MAAAA,WAAM,CAACC,eAAP,CAAuBjM,eAAe,CAACjB,yBAAhB,CAA0CpN,eAA1C,CAAvB,EAAmFga,cAAnF;AACH,KAHC,CAAF;AAKAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsBzL,eAAe,CAACjB,yBAAtC,EAAiE,CAACpN,eAAD,CAAjE,EAAoFga,cAApF;AACH,GAhBO,CAAR;AAkBAU,EAAAA,QAAQ,CAAC,gCAAD,EAAmC,YAAY;AACnD,QAAM1a,eAAe,GAAG;AACpBpY,MAAAA,gBAAgB,EAAE;AADE,KAAxB;AAIA,QAAM6L,MAAM,GAAG,CACX;AACItO,MAAAA,GAAG,EAAE,SADT;AAEIgb,MAAAA,iBAAiB,EAAE;AACfxZ,QAAAA,OAAO,EAAE;AADM;AAFvB,KADW,CAAf;AASA,QAAMqzB,cAAc,GAAG,CACnB;AACI70B,MAAAA,GAAG,EAAE,wBADT;AAEIyC,MAAAA,gBAAgB,EAAE;AAFtB,KADmB,EAKnB;AACIzC,MAAAA,GAAG,EAAE,SADT;AAEIgb,MAAAA,iBAAiB,EAAE;AACfxZ,QAAAA,OAAO,EAAE;AADM;AAFvB,KALmB,CAAvB;AAaAuzB,IAAAA,EAAE,CAAC,6BAAD,EAAgC,YAAM;AACpC;AACAG,MAAAA,WAAM,CAACC,eAAP,CAAuBjM,eAAe,CAAChB,8BAAhB,CAA+CrN,eAA/C,EAAgEvM,MAAhE,CAAvB,EAAgGumB,cAAhG;AACH,KAHC,CAAF;AAKAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsBzL,eAAe,CAAChB,8BAAtC,EAAsE,CAACrN,eAAD,EAAkBvM,MAAlB,CAAtE,EAAiGumB,cAAjG;AAEAE,IAAAA,EAAE,CAAC,iEAAD,EAAoE,YAAM;AACxE;AACAG,MAAAA,WAAM,CAACg/B,MAAP,CAAchrC,eAAe,CAAChB,8BAAhB,CAA+C,IAA/C,EAAqD,IAArD,CAAd;AACH,KAHC,CAAF;AAKA6M,IAAAA,EAAE,CAAC,4EAAD,EAA+E,YAAM;AACnF;AACAG,MAAAA,WAAM,CAACC,eAAP,CAAuBjM,eAAe,CAAChB,8BAAhB,CAA+CrN,eAA/C,CAAvB,EAAwF,CAACga,cAAc,CAAC,CAAD,CAAf,CAAxF;AACH,KAHC,CAAF;AAIH,GA3CO,CAAR;AA6CAU,EAAAA,QAAQ,CAAC,SAAD,EAAY,YAAY;AAC5B,QAAM8mC,WAAW,GAAGhjD,oBAAY,CAACR,cAAjC;AAEAkc,IAAAA,EAAE,CAAC,qCAAD,EAAwC,YAAM;AAC5C,UAAMhwB,GAAG,GAAG;AACR/E,QAAAA,GAAG,EAAE,MADG;AAERW,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF/D,YAAAA,MAAM,EAAE;AACJC,cAAAA,GAAG,EAAE,EADD;AAEJC,cAAAA,GAAG,EAAE;AAFD;AADN;AADJ;AAFE,OAAZ;AAYA,UAAM0B,GAAG,GAAG;AACRhB,QAAAA,IAAI,EAAE,CAAC,MAAD,CADE;AAERoD,QAAAA,IAAI,EAAE;AACF7D,UAAAA,QAAQ,EAAE;AADR,SAFE;AAKRtY,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF5D,YAAAA,QAAQ,EAAE;AADR;AADJ;AALE,OAAZ;;AAcA,UAAM4b,cAAc,qCAAOwnC,WAAP,GAAuB;AACnCvjD,QAAAA,MAAM,EAAE;AACJC,UAAAA,GAAG,EAAE,EADD;AAEJC,UAAAA,GAAG,EAAE;AAFD,SAD2B;AAKnCC,QAAAA,QAAQ,EAAE;AALyB,OAAvB,CAApB;;AASA,UAAMid,MAAM,GAAGhN,eAAe,CAACvM,OAAhB,CAAwB5X,GAAxB,EAA6B2V,GAA7B,CAAf;AACAwa,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAtCC,CAAF;AAwCAE,IAAAA,EAAE,CAAC,iDAAD,EAAoD,YAAM;AACxD,UAAMhwB,GAAG,GAAG;AACR/E,QAAAA,GAAG,EAAE,MADG;AAERW,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF/D,YAAAA,MAAM,EAAE;AACJC,cAAAA,GAAG,EAAE,EADD;AAEJC,cAAAA,GAAG,EAAE;AAFD,aADN;AAKFC,YAAAA,QAAQ,EAAE;AALR;AADJ;AAFE,OAAZ;AAaA,UAAMyB,GAAG,GAAG;AACRhB,QAAAA,IAAI,EAAE,CAAC,MAAD,CADE;AAERoD,QAAAA,IAAI,EAAE;AACF7D,UAAAA,QAAQ,EAAE;AADR,SAFE;AAKRtY,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF5D,YAAAA,QAAQ,EAAE;AADR;AADJ;AALE,OAAZ;;AAcA,UAAM4b,cAAc,qCAAOwnC,WAAP,GAAuB;AACnCvjD,QAAAA,MAAM,EAAE;AACJC,UAAAA,GAAG,EAAE,EADD;AAEJC,UAAAA,GAAG,EAAE;AAFD,SAD2B;AAKnCC,QAAAA,QAAQ,EAAE;AALyB,OAAvB,CAApB;;AASA,UAAMid,MAAM,GAAGhN,eAAe,CAACvM,OAAhB,CAAwB5X,GAAxB,EAA6B2V,GAA7B,CAAf;AACAwa,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAvCC,CAAF;AAyCAE,IAAAA,EAAE,CAAC,wDAAD,EAA2D,YAAM;AAC/D,UAAMhwB,GAAG,GAAG;AACR/E,QAAAA,GAAG,EAAE,MADG;AAERW,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF/D,YAAAA,MAAM,EAAE;AACJC,cAAAA,GAAG,EAAE,EADD;AAEJC,cAAAA,GAAG,EAAE;AAFD,aADN;AAKFC,YAAAA,QAAQ,EAAE;AALR;AADJ;AAFE,OAAZ;AAaA,UAAMyB,GAAG,GAAG;AACRhB,QAAAA,IAAI,EAAE,CAAC,MAAD,CADE;AAER/Y,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF5D,YAAAA,QAAQ,EAAE;AADR;AADJ;AAFE,OAAZ;;AAWA,UAAM4b,cAAc,qCAAOwnC,WAAP,GAAuB;AACnCvjD,QAAAA,MAAM,EAAE;AACJC,UAAAA,GAAG,EAAE,EADD;AAEJC,UAAAA,GAAG,EAAE;AAFD,SAD2B;AAKnCC,QAAAA,QAAQ,EAAE;AALyB,OAAvB,CAApB;;AASA,UAAMid,MAAM,GAAGhN,eAAe,CAACvM,OAAhB,CAAwB5X,GAAxB,EAA6B2V,GAA7B,CAAf;AACAwa,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KApCC,CAAF;AAsCAE,IAAAA,EAAE,CAAC,+CAAD,EAAkD,YAAM;AACtD,UAAMhwB,GAAG,GAAG;AACR/E,QAAAA,GAAG,EAAE,MADG;AAERW,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF/D,YAAAA,MAAM,EAAE;AACJC,cAAAA,GAAG,EAAE,EADD;AAEJC,cAAAA,GAAG,EAAE;AAFD;AADN;AADJ;AAFE,OAAZ;;AAYA,UAAM6b,cAAc,qCAAOwnC,WAAP,GAAuB;AACnCvjD,QAAAA,MAAM,EAAE;AACJC,UAAAA,GAAG,EAAE,EADD;AAEJC,UAAAA,GAAG,EAAE;AAFD;AAD2B,OAAvB,CAApB;;AAQA,UAAMkd,MAAM,GAAGhN,eAAe,CAACvM,OAAhB,CAAwB5X,GAAxB,EAA6B,IAA7B,CAAf;AACAmwB,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAvBC,CAAF;AAyBAE,IAAAA,EAAE,CAAC,+CAAD,EAAkD,YAAM;AACtD,UAAMra,GAAG,GAAG;AACRhB,QAAAA,IAAI,EAAE,CAAC,QAAD,CADE;AAER/Y,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF5D,YAAAA,QAAQ,EAAE;AADR;AADJ;AAFE,OAAZ;AASA,UAAMid,MAAM,GAAGhN,eAAe,CAACvM,OAAhB,CAAwB,IAAxB,EAA8B,IAA9B,CAAf;AACAuY,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AAEA,UAAMO,OAAO,GAAGvN,eAAe,CAACvM,OAAhB,CAAwB,IAAxB,EAA8BjC,GAA9B,CAAhB;AACAwa,MAAAA,WAAM,CAACg/B,MAAP,CAAcz9B,OAAd;AACH,KAfC,CAAF;AAiBA1B,IAAAA,EAAE,CAAC,kEAAD,EAAqE,YAAM;AACzE,UAAMhwB,GAAG,GAAG;AACR/E,QAAAA,GAAG,EAAE,MADG;AAERW,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AADJ;AAFE,OAAZ;AAOA,UAAMnC,GAAG,GAAG;AACRhB,QAAAA,IAAI,EAAE,CAAC,QAAD,CADE;AAERoD,QAAAA,IAAI,EAAE;AACF7D,UAAAA,QAAQ,EAAE;AADR,SAFE;AAKRtY,QAAAA,IAAI,EAAE;AACFkc,UAAAA,IAAI,EAAE;AACF5D,YAAAA,QAAQ,EAAE;AADR;AADJ;AALE,OAAZ;;AAcA,UAAM4b,cAAc,qCAAOwnC,WAAP,GAAuB;AACnCpjD,QAAAA,QAAQ,EAAE;AADyB,OAAvB,CAApB;;AAKA,UAAMid,MAAM,GAAGhN,eAAe,CAACvM,OAAhB,CAAwB5X,GAAxB,EAA6B2V,GAA7B,CAAf;AACAwa,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KA7BC,CAAF;AA8BH,GAlMO,CAAR;AAoMH,CApQO,CAAR;;ACDAU,QAAQ,CAAC,sBAAD,EAAyB,YAAY;AACzC,MAAMh2B,KAAK,GAAG;AACVma,IAAAA,IAAI,EAAE;AACFA,MAAAA,IAAI,EAAE;AACF4iD,QAAAA,IAAI,EAAE;AACFt8D,UAAAA,GAAG,EAAE,MADH;AAEF4O,UAAAA,IAAI,EAAE,OAFJ;AAGFjO,UAAAA,IAAI,EAAE;AACFka,YAAAA,eAAe,EAAE;AACbpY,cAAAA,gBAAgB,EAAE;AADL,aADf;AAIF6L,YAAAA,MAAM,EAAE,CACJ;AACItO,cAAAA,GAAG,EAAE,QADT;AAEI4O,cAAAA,IAAI,EAAE,SAFV;AAGInM,cAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,cAAAA,QAAQ,EAAE,QAJd;AAKI2D,cAAAA,iBAAiB,EAAE;AACflZ,gBAAAA,QAAQ,EAAE,QADK;AAEfmB,gBAAAA,YAAY,EAAE,CAAC,WAAD,EAAc,WAAd;AAFC,eALvB;AASI/B,cAAAA,cAAc,EAAE;AACZU,gBAAAA,KAAK,EAAE,IADK;AAEZa,gBAAAA,gBAAgB,EAAE,IAFN;AAGZnB,gBAAAA,cAAc,EAAE;AAHJ;AATpB,aADI,EAeD;AACCtB,cAAAA,GAAG,EAAE,kBADN;AAEC4O,cAAAA,IAAI,EAAE,wBAFP;AAGCjB,cAAAA,IAAI,EAAE,QAHP;AAICJ,cAAAA,OAAO,EAAE;AACLO,gBAAAA,QAAQ,EAAE,EADL;AAELX,gBAAAA,KAAK,EAAE;AACHoB,kBAAAA,MAAM,EAAE,CAAC;AACLguD,oBAAAA,IAAI,EAAE;AADD,mBAAD;AADL;AAFF;AAJV,aAfC,CAJN;AAiCFvhD,YAAAA,iBAAiB,EAAE,IAjCjB;AAkCF9Z,YAAAA,cAAc,EAAE;AACZc,cAAAA,MAAM,EAAE;AADI,aAlCd;AAqCF6a,YAAAA,IAAI,EAAE;AACF5D,cAAAA,QAAQ,EAAE,MADR;AAEFH,cAAAA,MAAM,EAAE;AACJC,gBAAAA,GAAG,EAAE,EADD;AAEJC,gBAAAA,GAAG,EAAE;AAFD;AAFN;AArCJ;AAHJ,SADJ;AAkDFwjD,QAAAA,IAAI,EAAE;AACFx8D,UAAAA,GAAG,EAAE,MADH;AAEF4O,UAAAA,IAAI,EAAE,OAFJ;AAGFjO,UAAAA,IAAI,EAAE;AACFka,YAAAA,eAAe,EAAE,IADf;AAEFvM,YAAAA,MAAM,EAAE,CACJ;AACItO,cAAAA,GAAG,EAAE,QADT;AAEI4O,cAAAA,IAAI,EAAE,SAFV;AAGInM,cAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,cAAAA,QAAQ,EAAE,QAJd;AAKI2D,cAAAA,iBAAiB,EAAE;AACflZ,gBAAAA,QAAQ,EAAE;AADK;AALvB,aADI,CAFN;AAaF+a,YAAAA,IAAI,EAAE;AACF5D,cAAAA,QAAQ,EAAE;AADR,aAbJ;AAgBF+B,YAAAA,iBAAiB,EAAE;AACf9Y,cAAAA,SAAS,EAAE;AADI;AAhBjB;AAHJ;AAlDJ,OADJ;AA4EF0X,MAAAA,IAAI,EAAE;AACF6iD,QAAAA,IAAI,EAAE;AACFz8D,UAAAA,GAAG,EAAE,MADH;AAEFga,UAAAA,YAAY,EAAE,MAFZ;AAGFN,UAAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT,CAHJ;AAIFoD,UAAAA,IAAI,EAAE;AAAChE,YAAAA,MAAM,EAAE;AAAT,WAJJ;AAKFnY,UAAAA,IAAI,EAAE;AACFka,YAAAA,eAAe,EAAE;AACblN,cAAAA,IAAI,EAAE,MADO;AAEbJ,cAAAA,OAAO,EAAE;AACLS,gBAAAA,GAAG,EAAE;AADA;AAFI,aADf;AAOFM,YAAAA,MAAM,EAAE,CACJ;AACItO,cAAAA,GAAG,EAAE,QADT;AAEIyC,cAAAA,gBAAgB,EAAE,gBAFtB;AAGIuY,cAAAA,iBAAiB,EAAE;AACf9Y,gBAAAA,SAAS,EAAE;AADI;AAHvB,aADI,CAPN;AAgBF8Y,YAAAA,iBAAiB,EAAE;AACfrZ,cAAAA,QAAQ,EAAE;AADK,aAhBjB;AAmBFT,YAAAA,cAAc,EAAE,IAnBd;AAoBF2b,YAAAA,IAAI,EAAE;AACF/D,cAAAA,MAAM,EAAE;AACJC,gBAAAA,GAAG,EAAE,EADD;AAEJC,gBAAAA,GAAG,EAAE;AAFD;AADN,aApBJ;AA0BFuE,YAAAA,UAAU,EAAE,CAAC,GAAD,EAAM,MAAN;AA1BV;AALJ;AADJ;AA5EJ;AADI,GAAd;AAoHAgY,EAAAA,QAAQ,CAAC,aAAD,EAAgB,YAAY;AAChCR,IAAAA,EAAE,CAAC,oDAAD,EAAuD,YAAM;AAC3D,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IAAvC;AACA,UAAMpmC,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYU,WAAZ,CAAwB7a,KAAxB,EAA+B,MAA/B,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,2CAAD,EAA8C,YAAM;AAClD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYU,WAAZ,CAAwB7a,KAAxB,EAA+B,QAA/B,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAXO,CAAR;AAaAX,EAAAA,QAAQ,CAAC,YAAD,EAAe,YAAY;AAC/BR,IAAAA,EAAE,CAAC,mDAAD,EAAsD,YAAM;AAC1D,UAAMF,cAAc,GAAG50B,MAAM,CAAC6D,MAAP,CAAcvE,KAAK,CAACma,IAAN,CAAWE,IAAzB,CAAvB;AACA,UAAMsc,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYS,UAAZ,CAAuB5a,KAAvB,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,sCAAD,EAAyC,YAAM;AAC7C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYS,UAAZ,mCAA2B5a,KAA3B;AAAkCma,QAAAA,IAAI,oCAAMna,KAAK,CAACma,IAAZ;AAAkBE,UAAAA,IAAI,EAAE;AAAxB;AAAtC,SAAf;AACAsb,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAXO,CAAR;AAaAX,EAAAA,QAAQ,CAAC,mBAAD,EAAsB,YAAY;AACtCR,IAAAA,EAAE,CAAC,mEAAD,EAAsE,YAAM;AAC1E,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAvC;AACA,UAAMvmC,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYa,iBAAZ,CAA8Bhb,KAA9B,EAAqC,MAArC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,sCAAD,EAAyC,YAAM;AAC7C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYa,iBAAZ,mCAAkChb,KAAlC;AAAyCma,QAAAA,IAAI,oCAAMna,KAAK,CAACma,IAAZ;AAAkBE,UAAAA,IAAI,EAAE;AAAxB;AAA7C,UAA6E,MAA7E,CAAf;AACAsb,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAKAnB,IAAAA,EAAE,CAAC,iEAAD,EAAoE,YAAM;AACxE,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYa,iBAAZ,CAA8Bhb,KAA9B,EAAqC,QAArC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAhBO,CAAR;AAkBAX,EAAAA,QAAQ,CAAC,gBAAD,EAAmB,YAAY;AACnCR,IAAAA,EAAE,CAAC,oDAAD,EAAuD,YAAM;AAC3D,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAvC;AACA,UAAMvmC,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYY,cAAZ,CAA2B/a,KAA3B,EAAkC,MAAlC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,2CAAD,EAA8C,YAAM;AAClD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYY,cAAZ,CAA2B/a,KAA3B,EAAkC,QAAlC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAXO,CAAR;AAaAX,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC1CR,IAAAA,EAAE,CAAC,gEAAD,EAAmE,YAAM;AACvE,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqBziD,YAA5C;AACA,UAAMkc,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+C,qBAAZ,CAAkCld,KAAlC,EAAyC,MAAzC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,oGAAD,EAAuG,YAAM;AAC3G,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAM,UAAAA,YAAY,EAAE,MAFd;AAGAJ,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEAziD,cAAAA,YAAY,EAAE;AAFd;AAFJ;AAHJ;AAFU,QAAlB;;AAcA,UAAMkc,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+C,qBAAZ,CAAkCuZ,YAAlC,EAAgD,MAAhD,CAAf;AACAd,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+B,MAA/B;AACH,KAjBC,CAAF;AAmBAnB,IAAAA,EAAE,CAAC,8CAAD,EAAiD,YAAM;AACrD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+C,qBAAZ,CAAkCld,KAAlC,EAAyC,QAAzC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GA9BO,CAAR;AAgCAX,EAAAA,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC3CR,IAAAA,EAAE,CAAC,6DAAD,EAAgE,YAAM;AACpE,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEAziD,cAAAA,YAAY,EAAE;AAFd;AAFJ;AAFJ;AAFU,QAAlB;;AAaA,UAAMkc,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkE,sBAAZ,CAAmCoY,YAAnC,EAAiD,MAAjD,CAAf;AACAd,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAhBC,CAAF;AAkBAnB,IAAAA,EAAE,CAAC,8CAAD,EAAiD,YAAM;AACrD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkE,sBAAZ,CAAmCre,KAAnC,EAA0C,QAA1C,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAKAnB,IAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAM;AAC3B,UAAMF,cAAc,GAAG;AACnB5b,QAAAA,QAAQ,EAAE,MADS;AAEnBH,QAAAA,MAAM,EAAE;AACJC,UAAAA,GAAG,EAAE,EADD;AAEJC,UAAAA,GAAG,EAAE;AAFD,SAFW;AAMnBI,QAAAA,OAAO,EAAE,CANU;AAOnBF,QAAAA,IAAI,EAAE,CAPa;AAQnBC,QAAAA,IAAI,EAAE;AARa,OAAvB;AAUA,UAAM+c,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkE,sBAAZ,CAAmCre,KAAnC,EAA0C,MAA1C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAbC,CAAF;AAcH,GAtCO,CAAR;AAwCAU,EAAAA,QAAQ,CAAC,iBAAD,EAAoB,YAAY;AACpCR,IAAAA,EAAE,CAAC,sCAAD,EAAyC,YAAM;AAC7C,UAAMF,cAAc,GAAG;AACnB5b,QAAAA,QAAQ,EAAE,MADS;AAEnBH,QAAAA,MAAM,EAAE;AACJC,UAAAA,GAAG,EAAE,EADD;AAEJC,UAAAA,GAAG,EAAE;AAFD,SAFW;AAMnBI,QAAAA,OAAO,EAAE,CANU;AAOnBF,QAAAA,IAAI,EAAE,CAPa;AAQnBC,QAAAA,IAAI,EAAE;AARa,OAAvB;AAUA,UAAM+c,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY0P,eAAZ,CAA4B7pB,KAA5B,EAAmC,MAAnC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAbC,CAAF;AAcH,GAfO,CAAR;AAiBAU,EAAAA,QAAQ,CAAC,uBAAD,EAA0B,YAAY;AAC1CR,IAAAA,EAAE,CAAC,yDAAD,EAA4D,YAAM;AAChE,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+P,qBAAZ,CAAkClqB,KAAlC,EAAyC,QAAzC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAKAnB,IAAAA,EAAE,CAAC,gEAAD,EAAmE,YAAM;AACvE,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA/iD,cAAAA,IAAI,EAAE;AAFN;AAFJ,YAFJ;AASAA,UAAAA,IAAI,oCACGna,KAAK,CAACma,IAAN,CAAWA,IADd;AAEA4iD,YAAAA,IAAI,oCACG/8D,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IADnB;AAEA37D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IAAhB,CAAqB37D,IADxB;AAEA4c,gBAAAA,UAAU,EAAE,CAAC,GAAD,EAAK,IAAL;AAFZ;AAFJ;AAFJ;AATJ;AAFU,QAAlB;;AAuBA,UAAMsX,cAAc,GAAG,CAAC,GAAD,EAAM,IAAN,CAAvB;AACA,UAAMqB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+P,qBAAZ,CAAkCuM,YAAlC,EAAgD,MAAhD,CAAf;AACAd,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KA3BC,CAAF;AA6BAE,IAAAA,EAAE,CAAC,+BAAD,EAAkC,YAAM;AACtC,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IAArB,CAA0B4c,UAAjD;AACA,UAAM2Y,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+P,qBAAZ,CAAkClqB,KAAlC,EAAyC,MAAzC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAKH,GAxCO,CAAR;AA0CAU,EAAAA,QAAQ,CAAC,kBAAD,EAAqB,YAAY;AACrCR,IAAAA,EAAE,CAAC,4DAAD,EAA+D,YAAM;AACnE,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB/iD,IAA5C;AACA,UAAMwc,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYiB,gBAAZ,CAA6Bpb,KAA7B,EAAoC,MAApC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,yCAAD,EAA4C,YAAM;AAChD,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA/iD,cAAAA,IAAI,EAAE;AAFN;AAFJ;AAFJ;AAFU,QAAlB;;AAaA,UAAMwc,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYiB,gBAAZ,CAA6Bqb,YAA7B,EAA2C,MAA3C,CAAf;AACAd,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAhBC,CAAF;AAkBAnB,IAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAM;AACnD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYiB,gBAAZ,CAA6Bpb,KAA7B,EAAoC,QAApC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GA7BO,CAAR;AA+BAX,EAAAA,QAAQ,CAAC,eAAD,EAAkB,YAAY;AAClCR,IAAAA,EAAE,CAAC,4DAAD,EAA+D,YAAM;AACnE,UAAMF,cAAc,qCAAOxb,oBAAY,CAACR,cAApB,GAAuCtZ,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IAArB,CAA0Bkc,IAAjE,CAApB;;AACA,UAAMqZ,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+D,aAAZ,CAA0Ble,KAA1B,EAAiC,MAAjC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAM;AACnD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+D,aAAZ,CAA0Ble,KAA1B,EAAiC,QAAjC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAXO,CAAR;AAaAX,EAAAA,QAAQ,CAAC,qBAAD,EAAwB,YAAY;AACxCR,IAAAA,EAAE,CAAC,mEAAD,EAAsE,YAAM;AAC1E,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IAArB,CAA0B4c,UAAjD;AACA,UAAM2Y,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYiE,mBAAZ,CAAgCpe,KAAhC,EAAuC,MAAvC,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,4CAAD,EAA+C,YAAM;AACnD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYiE,mBAAZ,CAAgCpe,KAAhC,EAAuC,QAAvC,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAXO,CAAR;AAaAX,EAAAA,QAAQ,CAAC,oCAAD,EAAuC,YAAY;AACvDR,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMF,cAAc,GAAG;AACnBpyB,QAAAA,gBAAgB,EAAE;AADC,OAAvB;AAGA,UAAMyzB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkB,kCAAZ,CAA+Crb,KAA/C,EAAsD,MAAtD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,uDAAD,EAA0D,YAAM;AAC9D,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkB,kCAAZ,mCAAmDrb,KAAnD;AACXma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAA,UAAAA,IAAI,oCACGna,KAAK,CAACma,IAAN,CAAWA,IADd;AAEA4iD,YAAAA,IAAI,oCACG/8D,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IADnB;AAEA37D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IAAhB,CAAqB37D,IADxB;AAEAka,gBAAAA,eAAe,EAAE;AAFjB;AAFJ;AAFJ;AAFJ;AADO,UAcZ,MAdY,CAAf;AAeAqa,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAjBC,CAAF;AAkBH,GA3BO,CAAR;AA6BAX,EAAAA,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AAC9CR,IAAAA,EAAE,CAAC,2BAAD,EAA8B,YAAM;AAClC,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IAAhB,CAAqB37D,IAArB,CAA0B2N,MAAjD;AACA,UAAM4nB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYoB,yBAAZ,CAAsCvb,KAAtC,EAA6C,MAA7C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYoB,yBAAZ,mCAA0Cvb,KAA1C;AACXma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAA,UAAAA,IAAI,oCACGna,KAAK,CAACma,IAAN,CAAWA,IADd;AAEA4iD,YAAAA,IAAI,oCACG/8D,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IADnB;AAEA37D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IAAhB,CAAqB37D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE;AAFR;AAFJ;AAFJ;AAFJ;AADO,UAcZ,MAdY,CAAf;AAeA4mB,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAjBC,CAAF;AAkBH,GAzBO,CAAR;AA2BAX,EAAAA,QAAQ,CAAC,uCAAD,EAA0C,YAAY;AAC1DR,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMF,cAAc,GAAG;AACnBlnB,QAAAA,IAAI,EAAE,MADa;AAEnBJ,QAAAA,OAAO,EAAE;AACLS,UAAAA,GAAG,EAAE;AADA;AAFU,OAAvB;AAMA,UAAMkoB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYwB,qCAAZ,CAAkD3b,KAAlD,EAAyD,MAAzD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KATC,CAAF;AAWAE,IAAAA,EAAE,CAAC,uDAAD,EAA0D,YAAM;AAC9D,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYwB,qCAAZ,mCAAsD3b,KAAtD;AACXma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEAka,gBAAAA,eAAe,EAAE;AAFjB;AAFJ;AAFJ;AAFJ;AADO,UAcZ,MAdY,CAAf;AAeAqa,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAjBC,CAAF;AAkBH,GA9BO,CAAR;AAgCAX,EAAAA,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACjDR,IAAAA,EAAE,CAAC,2BAAD,EAA8B,YAAM;AAClC,UAAMF,cAAc,GAAGt1B,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IAArB,CAA0B2N,MAAjD;AACA,UAAM4nB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYyB,4BAAZ,CAAyC5b,KAAzC,EAAgD,MAAhD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAJC,CAAF;AAMAE,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYyB,4BAAZ,mCAA6C5b,KAA7C;AACXma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE;AAFR;AAFJ;AAFJ;AAFJ;AADO,UAcZ,MAdY,CAAf;AAeA4mB,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAjBC,CAAF;AAkBH,GAzBO,CAAR;AA2BAX,EAAAA,QAAQ,CAAC,iCAAD,EAAoC,YAAY;AACpDR,IAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAM;AACzC,UAAMF,cAAc,GAAG;AACnB3yB,QAAAA,SAAS,EAAE;AADQ,OAAvB;AAGA,UAAMg0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqB,+BAAZ,CAA4Cxb,KAA5C,EAAmD,MAAnD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqB,+BAAZ,CAA4Cxb,KAA5C,EAAmD,MAAnD,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAbO,CAAR;AAeAX,EAAAA,QAAQ,CAAC,oCAAD,EAAuC,YAAY;AACvDR,IAAAA,EAAE,CAAC,kCAAD,EAAqC,YAAM;AACzC,UAAMF,cAAc,GAAG;AACnBlzB,QAAAA,QAAQ,EAAE;AADS,OAAvB;AAGA,UAAMu0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY0B,kCAAZ,CAA+C7b,KAA/C,EAAsD,MAAtD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,oDAAD,EAAuD,YAAM;AAC3D,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY0B,kCAAZ,mCAAmD7b,KAAnD;AACXma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEAqa,gBAAAA,iBAAiB,EAAE;AAFnB;AAFJ;AAFJ;AAFJ;AADO,UAcZ,MAdY,CAAf;AAeAka,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAjBC,CAAF;AAkBH,GA3BO,CAAR;AA6BAX,EAAAA,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACjDR,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMF,cAAc,GAAG;AACnBlzB,QAAAA,QAAQ,EAAE,QADS;AAEnBO,QAAAA,SAAS,EAAE;AAFQ,OAAvB;AAIA,UAAMg0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkQ,4BAAZ,CAAyCrqB,KAAzC,EAAgD,MAAhD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAPC,CAAF;AASAE,IAAAA,EAAE,CAAC,kEAAD,EAAqE,YAAM;AACzE,UAAMF,cAAc,GAAG;AACnBlzB,QAAAA,QAAQ,EAAE;AADS,OAAvB;AAGA,UAAMu0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkQ,4BAAZ,CAAyCrqB,KAAzC,EAAgD,MAAhD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,2CAAD,EAA8C,YAAM;AAClD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkQ,4BAAZ,CAAyCrqB,KAAzC,EAAgD,MAAhD,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAKAE,IAAAA,WAAW,CAACzB,SAAZ,CAAsB0S,MAAM,CAAC3tB,IAAP,CAAYkQ,4BAAlC,EAAgE,CAACrqB,KAAD,EAAQ,MAAR,CAAhE,EAAiF;AAC7EoC,MAAAA,QAAQ,EAAE,QADmE;AAE7EO,MAAAA,SAAS,EAAE;AAFkE,KAAjF,EAGG,CAAC3C,KAAD,EAAQ,MAAR,CAHH;AAIH,GA3BO,CAAR;AA6BAg2B,EAAAA,QAAQ,CAAC,8BAAD,EAAiC,YAAY;AACjDR,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAM;AACvC,UAAMF,cAAc,GAAG;AACnB7yB,QAAAA,MAAM,EAAE;AADW,OAAvB;AAGA,UAAMk0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYuB,4BAAZ,CAAyC1b,KAAzC,EAAgD,MAAhD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,mDAAD,EAAsD,YAAM;AAC1D,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYuB,4BAAZ,CAAyC1b,KAAzC,EAAgD,MAAhD,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAbO,CAAR;AAeAX,EAAAA,QAAQ,CAAC,iCAAD,EAAoC,YAAY;AACpDR,IAAAA,EAAE,CAAC,gCAAD,EAAmC,YAAM;AACvC,UAAMF,cAAc,GAAG;AACnB7yB,QAAAA,MAAM,EAAE;AADW,OAAvB;AAGA,UAAMk0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY2B,+BAAZ,mCAAgD9b,KAAhD;AACXma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEAO,gBAAAA,cAAc,EAAE;AACZc,kBAAAA,MAAM,EAAE;AADI;AAFhB;AAFJ;AAFJ;AAFJ;AADO,UAgBZ,MAhBY,CAAf;AAiBAkzB,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAtBC,CAAF;AAwBAE,IAAAA,EAAE,CAAC,mDAAD,EAAsD,YAAM;AAC1D,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY2B,+BAAZ,CAA4C9b,KAA5C,EAAmD,MAAnD,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GA7BO,CAAR;AA+BAX,EAAAA,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AAC9CR,IAAAA,EAAE,CAAC,uCAAD,EAA0C,YAAM;AAC9C,UAAMF,cAAc,GAAG;AACnB7yB,QAAAA,MAAM,EAAE;AADW,OAAvB;AAGA,UAAMk0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+B,yBAAZ,CAAsClc,KAAtC,EAA6C,MAA7C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,yCAAD,EAA4C,YAAM;AAChD,UAAMF,cAAc,GAAG;AACnB7yB,QAAAA,MAAM,EAAE,IADW;AAEnBP,QAAAA,KAAK,EAAE;AAFY,OAAvB;;AAKA,UAAMu0B,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEAv7D,gBAAAA,cAAc,EAAE;AACZO,kBAAAA,KAAK,EAAE;AADK;AAFhB;AAFJ;AAFJ;AAFJ;AAFU,QAAlB;;AAmBA,UAAMy0B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+B,yBAAZ,CAAsCua,YAAtC,EAAoD,MAApD,CAAf;AACAd,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KA3BC,CAAF;AA6BAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsB0S,MAAM,CAAC3tB,IAAP,CAAY+B,yBAAlC,EAA6D,CAAClc,KAAD,EAAQ,MAAR,CAA7D,EAA8E;AAC1EyC,MAAAA,MAAM,EAAE;AADkE,KAA9E;AAIA+yB,IAAAA,EAAE,CAAC,2CAAD,EAA8C,YAAM;AAClD,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY+B,yBAAZ,CAAsClc,KAAtC,EAA6C,MAA7C,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GA9CO,CAAR;AAgDAX,EAAAA,QAAQ,CAAC,iCAAD,EAAoC,YAAY;AACpDR,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMF,cAAc,GAAG;AACnBpyB,QAAAA,gBAAgB,EAAE;AADC,OAAvB;AAGA,UAAMyzB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkC,+BAAZ,CAA4Crc,KAA5C,EAAmD,MAAnD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KANC,CAAF;AAQAE,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMF,cAAc,GAAG;AACnBlnB,QAAAA,IAAI,EAAE,MADa;AAEnBJ,QAAAA,OAAO,EAAE;AACLS,UAAAA,GAAG,EAAE;AADA;AAFU,OAAvB;AAMA,UAAMkoB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkC,+BAAZ,CAA4Crc,KAA5C,EAAmD,MAAnD,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KATC,CAAF;AAWAE,IAAAA,EAAE,CAAC,oBAAD,EAAuB,YAAM;AAC3B,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYkC,+BAAZ,CAA4Crc,KAA5C,EAAmD,MAAnD,CAAf;AACA21B,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KAHC,CAAF;AAIH,GAxBO,CAAR;AA0BAX,EAAAA,QAAQ,CAAC,2CAAD,EAA8C,YAAY;AAC9D,QAAMV,cAAc,GAAG,CACnB;AACI70B,MAAAA,GAAG,EAAE,QADT;AAEIyC,MAAAA,gBAAgB,EAAE,gBAFtB;AAGIuY,MAAAA,iBAAiB,EAAE;AACf9Y,QAAAA,SAAS,EAAE,SADI;AAEfP,QAAAA,QAAQ,EAAE;AAFK,OAHvB;AAOIT,MAAAA,cAAc,EAAE;AAPpB,KADmB,CAAvB;AAYA6zB,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYsQ,yCAAZ,CAAsDzqB,KAAtD,EAA6D,MAA7D,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAHC,CAAF;AAKAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsB0S,MAAM,CAAC3tB,IAAP,CAAYsQ,yCAAlC,EAA6E,CAACzqB,KAAD,EAAQ,MAAR,CAA7E,EAA8Fs1B,cAA9F;AACH,GAnBO,CAAR;AAqBAU,EAAAA,QAAQ,CAAC,wCAAD,EAA2C,YAAY;AAC3D,QAAMV,cAAc,GAAG,CACnB;AACI70B,MAAAA,GAAG,EAAE,QADT;AAEI4O,MAAAA,IAAI,EAAE,SAFV;AAGInM,MAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,MAAAA,QAAQ,EAAE,QAJd;AAKI2D,MAAAA,iBAAiB,EAAE;AACflZ,QAAAA,QAAQ,EAAE,QADK;AAEfH,QAAAA,QAAQ,EAAE,QAFK;AAGfsB,QAAAA,YAAY,EAAE,CAAC,WAAD,EAAc,WAAd;AAHC,OALvB;AAUI/B,MAAAA,cAAc,EAAE;AACZU,QAAAA,KAAK,EAAE,IADK;AAEZI,QAAAA,MAAM,EAAE,IAFI;AAGZS,QAAAA,gBAAgB,EAAE,IAHN;AAIZnB,QAAAA,cAAc,EAAE;AAJJ;AAVpB,KADmB,EAiBhB;AACCtB,MAAAA,GAAG,EAAE,kBADN;AAEC4O,MAAAA,IAAI,EAAE,wBAFP;AAGCjB,MAAAA,IAAI,EAAE,QAHP;AAICJ,MAAAA,OAAO,EAAE;AACLO,QAAAA,QAAQ,EAAE,EADL;AAELX,QAAAA,KAAK,EAAE;AACHoB,UAAAA,MAAM,EAAE,CAAC;AACLguD,YAAAA,IAAI,EAAE;AADD,WAAD;AADL;AAFF,OAJV;AAYCr7D,MAAAA,cAAc,EAAE;AACZc,QAAAA,MAAM,EAAE;AADI,OAZjB;AAeCgZ,MAAAA,iBAAiB,EAAE;AACfrZ,QAAAA,QAAQ,EAAE;AADK;AAfpB,KAjBgB,CAAvB;AAsCAozB,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYwQ,sCAAZ,CAAmD3qB,KAAnD,EAA0D,MAA1D,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAHC,CAAF;AAKAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsB0S,MAAM,CAAC3tB,IAAP,CAAYwQ,sCAAlC,EAA0E,CAAC3qB,KAAD,EAAQ,MAAR,CAA1E,EAA2Fs1B,cAA3F;AACH,GA7CO,CAAR;AA+CAU,EAAAA,QAAQ,CAAC,wBAAD,EAA2B,YAAY;AAC3C,QAAMV,cAAc,GAAG,CACnB;AACI70B,MAAAA,GAAG,EAAE,QADT;AAEIyC,MAAAA,gBAAgB,EAAE,gBAFtB;AAGIuY,MAAAA,iBAAiB,EAAE;AACf9Y,QAAAA,SAAS,EAAE,SADI;AAEfP,QAAAA,QAAQ,EAAE;AAFK,OAHvB;AAOIT,MAAAA,cAAc,EAAE;AAPpB,KADmB,EAUnB;AACIlB,MAAAA,GAAG,EAAE,QADT;AAEI4O,MAAAA,IAAI,EAAE,SAFV;AAGInM,MAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,MAAAA,QAAQ,EAAE,QAJd;AAKI2D,MAAAA,iBAAiB,EAAE;AACflZ,QAAAA,QAAQ,EAAE,QADK;AAEfH,QAAAA,QAAQ,EAAE,QAFK;AAGfsB,QAAAA,YAAY,EAAE,CAAC,WAAD,EAAc,WAAd;AAHC,OALvB;AAUI/B,MAAAA,cAAc,EAAE;AACZU,QAAAA,KAAK,EAAE,IADK;AAEZI,QAAAA,MAAM,EAAE,IAFI;AAGZS,QAAAA,gBAAgB,EAAE,IAHN;AAIZnB,QAAAA,cAAc,EAAE;AAJJ;AAVpB,KAVmB,EA0BhB;AACCtB,MAAAA,GAAG,EAAE,kBADN;AAEC4O,MAAAA,IAAI,EAAE,wBAFP;AAGCjB,MAAAA,IAAI,EAAE,QAHP;AAICJ,MAAAA,OAAO,EAAE;AACLO,QAAAA,QAAQ,EAAE,EADL;AAELX,QAAAA,KAAK,EAAE;AACHoB,UAAAA,MAAM,EAAE,CAAC;AACLguD,YAAAA,IAAI,EAAE;AADD,WAAD;AADL;AAFF,OAJV;AAYCr7D,MAAAA,cAAc,EAAE;AACZc,QAAAA,MAAM,EAAE;AADI,OAZjB;AAeCgZ,MAAAA,iBAAiB,EAAE;AACfrZ,QAAAA,QAAQ,EAAE;AADK;AAfpB,KA1BgB,CAAvB;AA+CA,QAAM+6D,eAAe,GAAG,CACpB;AACI18D,MAAAA,GAAG,EAAE,QADT;AAEIyC,MAAAA,gBAAgB,EAAE,gBAFtB;AAGIuY,MAAAA,iBAAiB,EAAE;AACf9Y,QAAAA,SAAS,EAAE,SADI;AAEfP,QAAAA,QAAQ,EAAE;AAFK,OAHvB;AAOIT,MAAAA,cAAc,EAAE;AAPpB,KADoB,EAUpB;AACIlB,MAAAA,GAAG,EAAE,QADT;AAEI4O,MAAAA,IAAI,EAAE,SAFV;AAGInM,MAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,MAAAA,QAAQ,EAAE,QAJd;AAKI2D,MAAAA,iBAAiB,EAAE;AACflZ,QAAAA,QAAQ,EAAE,QADK;AAEfI,QAAAA,SAAS,EAAE,SAFI;AAGfP,QAAAA,QAAQ,EAAE;AAHK,OALvB;AAUIT,MAAAA,cAAc,EAAE;AAVpB,KAVoB,CAAxB;AAwBA6zB,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqC,sBAAZ,CAAmCxc,KAAnC,EAA0C,MAA1C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAHC,CAAF;AAKAE,IAAAA,EAAE,CAAC,oCAAD,EAAuC,YAAM;AAC3C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqC,sBAAZ,CAAmCxc,KAAnC,EAA0C,MAA1C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BwmC,eAA/B;AACH,KAHC,CAAF;AAKAtmC,IAAAA,WAAW,CAACzB,SAAZ,CAAsB0S,MAAM,CAAC3tB,IAAP,CAAYqC,sBAAlC,EAA0D,CAACxc,KAAD,EAAQ,MAAR,CAA1D,EAA2Es1B,cAA3E,EAA2F,CAACt1B,KAAD,EAAQ,MAAR,CAA3F;AAEAw1B,IAAAA,EAAE,CAAC,2DAAD,EAA8D,YAAM;AAClE,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE;AAFR;AAFJ;AAFJ;AAFJ;AAFU,QAAlB;;AAgBA,UAAM4nB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqC,sBAAZ,CAAmCia,YAAnC,EAAiD,MAAjD,CAAf;AACAd,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+B,CAACwmC,eAAe,CAAC,CAAD,CAAhB,CAA/B;AACH,KAnBC,CAAF;AAqBA3nC,IAAAA,EAAE,CAAC,2DAAD,EAA8D,YAAM;AAClE,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAA,UAAAA,IAAI,oCACGna,KAAK,CAACma,IAAN,CAAWA,IADd;AAEA8iD,YAAAA,IAAI,oCACGj9D,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB8iD,IADnB;AAEA77D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB8iD,IAAhB,CAAqB77D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE;AAFR;AAFJ;AAFJ;AAFJ;AAFU,QAAlB;;AAgBA,UAAM4nB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqC,sBAAZ,CAAmCia,YAAnC,EAAiD,MAAjD,CAAf;AACAd,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+B,CAACwmC,eAAe,CAAC,CAAD,CAAhB,CAA/B;AACH,KAnBC,CAAF;AAqBA3nC,IAAAA,EAAE,CAAC,+DAAD,EAAkE,YAAM;AACtE,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE;AAFR;AAFJ;AAFJ,YAFJ;AAYAoL,UAAAA,IAAI,oCACGna,KAAK,CAACma,IAAN,CAAWA,IADd;AAEA8iD,YAAAA,IAAI,oCACGj9D,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB8iD,IADnB;AAEA77D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB8iD,IAAhB,CAAqB77D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE;AAFR;AAFJ;AAFJ;AAZJ;AAFU,QAAlB;;AA0BA,UAAM4nB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAYqC,sBAAZ,CAAmCia,YAAnC,EAAiD,MAAjD,CAAf;AACAd,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KA7BC,CAAF;AA8BH,GA5JO,CAAR;AA8JAX,EAAAA,QAAQ,CAAC,2BAAD,EAA8B,YAAY;AAC9C,QAAMV,cAAc,GAAG,CACnB;AACI70B,MAAAA,GAAG,EAAE,wBADT;AAEIyC,MAAAA,gBAAgB,EAAE;AAFtB,KADmB,EAKnB;AACIzC,MAAAA,GAAG,EAAE,QADT;AAEIyC,MAAAA,gBAAgB,EAAE,gBAFtB;AAGIuY,MAAAA,iBAAiB,EAAE;AACf9Y,QAAAA,SAAS,EAAE,SADI;AAEfP,QAAAA,QAAQ,EAAE;AAFK,OAHvB;AAOIT,MAAAA,cAAc,EAAE;AAPpB,KALmB,EAcnB;AACIlB,MAAAA,GAAG,EAAE,QADT;AAEI4O,MAAAA,IAAI,EAAE,SAFV;AAGInM,MAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,MAAAA,QAAQ,EAAE,QAJd;AAKI2D,MAAAA,iBAAiB,EAAE;AACflZ,QAAAA,QAAQ,EAAE,QADK;AAEfH,QAAAA,QAAQ,EAAE,QAFK;AAGfsB,QAAAA,YAAY,EAAE,CAAC,WAAD,EAAc,WAAd;AAHC,OALvB;AAUI/B,MAAAA,cAAc,EAAE;AACZU,QAAAA,KAAK,EAAE,IADK;AAEZI,QAAAA,MAAM,EAAE,IAFI;AAGZS,QAAAA,gBAAgB,EAAE,IAHN;AAIZnB,QAAAA,cAAc,EAAE;AAJJ;AAVpB,KAdmB,EA8BhB;AACCtB,MAAAA,GAAG,EAAE,kBADN;AAEC4O,MAAAA,IAAI,EAAE,wBAFP;AAGCjB,MAAAA,IAAI,EAAE,QAHP;AAICJ,MAAAA,OAAO,EAAE;AACLO,QAAAA,QAAQ,EAAE,EADL;AAELX,QAAAA,KAAK,EAAE;AACHoB,UAAAA,MAAM,EAAE,CAAC;AACLguD,YAAAA,IAAI,EAAE;AADD,WAAD;AADL;AAFF,OAJV;AAYCr7D,MAAAA,cAAc,EAAE;AACZc,QAAAA,MAAM,EAAE;AADI,OAZjB;AAeCgZ,MAAAA,iBAAiB,EAAE;AACfrZ,QAAAA,QAAQ,EAAE;AADK;AAfpB,KA9BgB,CAAvB;AAmDAozB,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMmB,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY8C,yBAAZ,CAAsCjd,KAAtC,EAA6C,MAA7C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAHC,CAAF;AAKAuB,IAAAA,WAAW,CAACzB,SAAZ,CAAsB0S,MAAM,CAAC3tB,IAAP,CAAY8C,yBAAlC,EAA6D,CAACjd,KAAD,EAAQ,MAAR,CAA7D,EAA8Es1B,cAA9E;AAEAE,IAAAA,EAAE,CAAC,wCAAD,EAA2C,YAAM;AAC/C,UAAMF,cAAc,GAAG,CACnB;AACI70B,QAAAA,GAAG,EAAE,wBADT;AAEI2N,QAAAA,IAAI,EAAE,MAFV;AAGIJ,QAAAA,OAAO,EAAE;AACLS,UAAAA,GAAG,EAAE;AADA;AAHb,OADmB,EAQnB;AACIhO,QAAAA,GAAG,EAAE,QADT;AAEIyC,QAAAA,gBAAgB,EAAE,gBAFtB;AAGIuY,QAAAA,iBAAiB,EAAE;AACf9Y,UAAAA,SAAS,EAAE,SADI;AAEfP,UAAAA,QAAQ,EAAE;AAFK,SAHvB;AAOIT,QAAAA,cAAc,EAAE;AAPpB,OARmB,EAiBnB;AACIlB,QAAAA,GAAG,EAAE,QADT;AAEI4O,QAAAA,IAAI,EAAE,SAFV;AAGInM,QAAAA,gBAAgB,EAAE,gBAHtB;AAII4U,QAAAA,QAAQ,EAAE,QAJd;AAKI2D,QAAAA,iBAAiB,EAAE;AACflZ,UAAAA,QAAQ,EAAE,QADK;AAEfI,UAAAA,SAAS,EAAE,SAFI;AAGfP,UAAAA,QAAQ,EAAE;AAHK,SALvB;AAUIT,QAAAA,cAAc,EAAE;AAVpB,OAjBmB,CAAvB;AA8BA,UAAMg1B,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY8C,yBAAZ,CAAsCjd,KAAtC,EAA6C,MAA7C,CAAf;AACA21B,MAAAA,WAAM,CAACC,eAAP,CAAuBe,MAAvB,EAA+BrB,cAA/B;AACH,KAjCC,CAAF;AAmCAE,IAAAA,EAAE,CAAC,gEAAD,EAAmE,YAAM;AACvE,UAAMiB,YAAY,qCACXz2B,KADW;AAEdma,QAAAA,IAAI,oCACGna,KAAK,CAACma,IADT;AAEAE,UAAAA,IAAI,oCACGra,KAAK,CAACma,IAAN,CAAWE,IADd;AAEA6iD,YAAAA,IAAI,oCACGl9D,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IADnB;AAEA97D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWE,IAAX,CAAgB6iD,IAAhB,CAAqB97D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE,IAFR;AAGAuM,gBAAAA,eAAe,EAAE;AAHjB;AAFJ;AAFJ,YAFJ;AAaAnB,UAAAA,IAAI,oCACGna,KAAK,CAACma,IAAN,CAAWA,IADd;AAEA4iD,YAAAA,IAAI,oCACG/8D,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IADnB;AAEA37D,cAAAA,IAAI,oCACGpB,KAAK,CAACma,IAAN,CAAWA,IAAX,CAAgB4iD,IAAhB,CAAqB37D,IADxB;AAEA2N,gBAAAA,MAAM,EAAE,IAFR;AAGAuM,gBAAAA,eAAe,EAAE;AAHjB;AAFJ;AAFJ;AAbJ;AAFU,QAAlB;;AA4BA,UAAMqb,MAAM,GAAGmR,MAAM,CAAC3tB,IAAP,CAAY8C,yBAAZ,CAAsCwZ,YAAtC,EAAoD,MAApD,CAAf;AACAd,MAAAA,WAAM,CAACg/B,MAAP,CAAch+B,MAAd;AACH,KA/BC,CAAF;AAgCH,GA9HO,CAAR;AA+HH,CA//BO,CAAR;;ACFAX,QAAQ,CAAC,4BAAD,EAA+B,YAAY;AAClD,MAAMh2B,KAAK,GAAG;AACbgP,IAAAA,MAAM,EAAE;AACP/K,MAAAA,KAAK,EAAE;AACN,kBAAU;AACTxD,UAAAA,GAAG,EAAE,QADI;AAETW,UAAAA,IAAI,EAAE;AACLgO,YAAAA,UAAU,EAAE;AACXiJ,cAAAA,KAAK,EAAE,CAAC;AACPrJ,gBAAAA,MAAM,EAAE,CACP;AACC,0BAAQ;AADT,iBADO;AADD,eAAD;AADI;AADP;AAFG;AADJ;AADA,KADK;AAmBblB,IAAAA,UAAU,EAAE;AACX7J,MAAAA,KAAK,EAAE;AACN,sBAAc;AACbxD,UAAAA,GAAG,EAAE,YADQ;AAEbW,UAAAA,IAAI,EAAE;AACL0W,YAAAA,QAAQ,EAAE;AADL;AAFO;AADR;AADI;AAnBC,GAAd;AAgCAke,EAAAA,QAAQ,CAAC,0BAAD,EAA6B,YAAY;AAChD,QAAMonC,YAAY,qCACdp9D,KADc;AAEjBgP,MAAAA,MAAM,EAAE;AAFS,MAAlB;;AAKA,QAAMquD,iBAAiB,qCACnBr9D,KADmB;AAEtBgP,MAAAA,MAAM,EAAE;AAAC/K,QAAAA,KAAK,EAAE;AAAC,sBAAY;AAAb;AAAR;AAFc,MAAvB;;AAKA,QAAMq5D,eAAe,qCACjBt9D,KADiB;AAEpBgP,MAAAA,MAAM,EAAE;AAAC/K,QAAAA,KAAK,EAAE;AAAC,oBAAU;AAACxD,YAAAA,GAAG,EAAE,QAAN;AAAgBW,YAAAA,IAAI,EAAE;AAAtB;AAAX;AAAR;AAFY,MAArB;;AAKA,QAAMm8D,gBAAgB,qCAClBv9D,KADkB;AAErB8N,MAAAA,UAAU,EAAE;AAFS,MAAtB;;AAKA0nB,IAAAA,EAAE,CAAC,sCAAD,EAAyC,YAAM;AAChD,UAAMuS,MAAM,GAAG;AACd,sBAAc;AACbtnC,UAAAA,GAAG,EAAE,YADQ;AAEbW,UAAAA,IAAI,EAAE;AACL0W,YAAAA,QAAQ,EAAE,QADL;AAELlK,YAAAA,KAAK,EAAE;AACN,sBAAQ;AADF;AAFF;AAFO;AADA,OAAf;AAWA+nB,MAAAA,WAAM,CAAC6nC,SAAP,CAAiB11B,MAAM,CAACh6B,UAAP,CAAkBiK,wBAAlB,CAA2C/X,KAA3C,CAAjB,EAAoE+nC,MAApE;AACA,KAbC,CAAF;AAeAvS,IAAAA,EAAE,CAAC,mCAAD,EAAsC,YAAM;AAC7C,UAAMuS,MAAM,sBAAO/nC,KAAK,CAAC8N,UAAN,CAAiB7J,KAAxB,CAAZ;;AACA0xB,MAAAA,WAAM,CAAC6nC,SAAP,CAAiB11B,MAAM,CAACh6B,UAAP,CAAkBiK,wBAAlB,CAA2CqlD,YAA3C,CAAjB,EAA2Er1B,MAA3E;AACApS,MAAAA,WAAM,CAAC6nC,SAAP,CAAiB11B,MAAM,CAACh6B,UAAP,CAAkBiK,wBAAlB,CAA2CslD,iBAA3C,CAAjB,EAAgFt1B,MAAhF;AACApS,MAAAA,WAAM,CAAC6nC,SAAP,CAAiB11B,MAAM,CAACh6B,UAAP,CAAkBiK,wBAAlB,CAA2CulD,eAA3C,CAAjB,EAA8Ev1B,MAA9E;AACA,KALC,CAAF;AAOAvS,IAAAA,EAAE,CAAC,4BAAD,EAA+B,YAAM;AACtCG,MAAAA,WAAM,CAAC6nC,SAAP,CAAiB11B,MAAM,CAACh6B,UAAP,CAAkBiK,wBAAlB,CAA2CwlD,gBAA3C,CAAjB,EAA+E,EAA/E;AACA,KAFC,CAAF;AAGA,GA9CO,CAAR;AA+CA,CAhFO,CAAR;;"}